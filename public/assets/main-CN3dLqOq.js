import{p as aa,a as $v}from"./chunk-CfUDwz28.js";function Kv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gp={exports:{}},Ro={},Yp={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),qv=Symbol.for("react.portal"),Gv=Symbol.for("react.fragment"),Yv=Symbol.for("react.strict_mode"),Qv=Symbol.for("react.profiler"),Jv=Symbol.for("react.provider"),Xv=Symbol.for("react.context"),Zv=Symbol.for("react.forward_ref"),e1=Symbol.for("react.suspense"),t1=Symbol.for("react.memo"),n1=Symbol.for("react.lazy"),df=Symbol.iterator;function r1(t){return t===null||typeof t!="object"?null:(t=df&&t[df]||t["@@iterator"],typeof t=="function"?t:null)}var Qp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jp=Object.assign,Xp={};function gi(t,e,n){this.props=t,this.context=e,this.refs=Xp,this.updater=n||Qp}gi.prototype.isReactComponent={};gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zp(){}Zp.prototype=gi.prototype;function Hh(t,e,n){this.props=t,this.context=e,this.refs=Xp,this.updater=n||Qp}var Wh=Hh.prototype=new Zp;Wh.constructor=Hh;Jp(Wh,gi.prototype);Wh.isPureReactComponent=!0;var pf=Array.isArray,em=Object.prototype.hasOwnProperty,Vh={current:null},tm={key:!0,ref:!0,__self:!0,__source:!0};function nm(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)em.call(e,r)&&!tm.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Ds,type:t,key:s,ref:l,props:i,_owner:Vh.current}}function i1(t,e){return{$$typeof:Ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Uh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ds}function s1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mf=/\/+/g;function ua(t,e){return typeof t=="object"&&t!==null&&t.key!=null?s1(""+t.key):e.toString(36)}function El(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ds:case qv:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+ua(l,0):r,pf(i)?(n="",t!=null&&(n=t.replace(mf,"$&/")+"/"),El(i,e,n,"",function(u){return u})):i!=null&&(Uh(i)&&(i=i1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(mf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",pf(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+ua(s,o);l+=El(s,e,n,a,i)}else if(a=r1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+ua(s,o++),l+=El(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Vs(t,e,n){if(t==null)return t;var r=[],i=0;return El(t,r,"","",function(s){return e.call(n,s,i++)}),r}function l1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Je={current:null},Ml={transition:null},o1={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:Ml,ReactCurrentOwner:Vh};function rm(){throw Error("act(...) is not supported in production builds of React.")}$.Children={map:Vs,forEach:function(t,e,n){Vs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vs(t,function(){e++}),e},toArray:function(t){return Vs(t,function(e){return e})||[]},only:function(t){if(!Uh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$.Component=gi;$.Fragment=Gv;$.Profiler=Qv;$.PureComponent=Hh;$.StrictMode=Yv;$.Suspense=e1;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o1;$.act=rm;$.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jp({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=Vh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)em.call(e,a)&&!tm.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Ds,type:t.type,key:i,ref:s,props:r,_owner:l}};$.createContext=function(t){return t={$$typeof:Xv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jv,_context:t},t.Consumer=t};$.createElement=nm;$.createFactory=function(t){var e=nm.bind(null,t);return e.type=t,e};$.createRef=function(){return{current:null}};$.forwardRef=function(t){return{$$typeof:Zv,render:t}};$.isValidElement=Uh;$.lazy=function(t){return{$$typeof:n1,_payload:{_status:-1,_result:t},_init:l1}};$.memo=function(t,e){return{$$typeof:t1,type:t,compare:e===void 0?null:e}};$.startTransition=function(t){var e=Ml.transition;Ml.transition={};try{t()}finally{Ml.transition=e}};$.unstable_act=rm;$.useCallback=function(t,e){return Je.current.useCallback(t,e)};$.useContext=function(t){return Je.current.useContext(t)};$.useDebugValue=function(){};$.useDeferredValue=function(t){return Je.current.useDeferredValue(t)};$.useEffect=function(t,e){return Je.current.useEffect(t,e)};$.useId=function(){return Je.current.useId()};$.useImperativeHandle=function(t,e,n){return Je.current.useImperativeHandle(t,e,n)};$.useInsertionEffect=function(t,e){return Je.current.useInsertionEffect(t,e)};$.useLayoutEffect=function(t,e){return Je.current.useLayoutEffect(t,e)};$.useMemo=function(t,e){return Je.current.useMemo(t,e)};$.useReducer=function(t,e,n){return Je.current.useReducer(t,e,n)};$.useRef=function(t){return Je.current.useRef(t)};$.useState=function(t){return Je.current.useState(t)};$.useSyncExternalStore=function(t,e,n){return Je.current.useSyncExternalStore(t,e,n)};$.useTransition=function(){return Je.current.useTransition()};$.version="18.3.1";Yp.exports=$;var H=Yp.exports;const a1=Kv(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1=H,h1=Symbol.for("react.element"),c1=Symbol.for("react.fragment"),f1=Object.prototype.hasOwnProperty,d1=u1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p1={key:!0,ref:!0,__self:!0,__source:!0};function im(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)f1.call(e,r)&&!p1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:h1,type:t,key:s,ref:l,props:i,_owner:d1.current}}Ro.Fragment=c1;Ro.jsx=im;Ro.jsxs=im;Gp.exports=Ro;var x=Gp.exports,iu={},sm={exports:{}},gt={},lm={exports:{}},om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,_){var V=D.length;D.push(_);e:for(;0<V;){var q=V-1>>>1,Y=D[q];if(0<i(Y,_))D[q]=_,D[V]=Y,V=q;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var _=D[0],V=D.pop();if(V!==_){D[0]=V;e:for(var q=0,Y=D.length,Te=Y>>>1;q<Te;){var Ne=2*(q+1)-1,vt=D[Ne],Ze=Ne+1,an=D[Ze];if(0>i(vt,V))Ze<Y&&0>i(an,vt)?(D[q]=an,D[Ze]=V,q=Ze):(D[q]=vt,D[Ne]=V,q=Ne);else if(Ze<Y&&0>i(an,V))D[q]=an,D[Ze]=V,q=Ze;else break e}}return _}function i(D,_){var V=D.sortIndex-_.sortIndex;return V!==0?V:D.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],h=1,c=null,f=3,d=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=D)r(u),_.sortIndex=_.expirationTime,e(a,_);else break;_=n(u)}}function k(D){if(y=!1,v(D),!m)if(n(a)!==null)m=!0,ie(S);else{var _=n(u);_!==null&&$t(k,_.startTime-D)}}function S(D,_){m=!1,y&&(y=!1,p(O),O=-1),d=!0;var V=f;try{for(v(_),c=n(a);c!==null&&(!(c.expirationTime>_)||D&&!z());){var q=c.callback;if(typeof q=="function"){c.callback=null,f=c.priorityLevel;var Y=q(c.expirationTime<=_);_=t.unstable_now(),typeof Y=="function"?c.callback=Y:c===n(a)&&r(a),v(_)}else r(a);c=n(a)}if(c!==null)var Te=!0;else{var Ne=n(u);Ne!==null&&$t(k,Ne.startTime-_),Te=!1}return Te}finally{c=null,f=V,d=!1}}var A=!1,C=null,O=-1,j=5,T=-1;function z(){return!(t.unstable_now()-T<j)}function B(){if(C!==null){var D=t.unstable_now();T=D;var _=!0;try{_=C(!0,D)}finally{_?G():(A=!1,C=null)}}else A=!1}var G;if(typeof g=="function")G=function(){g(B)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,me=X.port2;X.port1.onmessage=B,G=function(){me.postMessage(null)}}else G=function(){w(B,0)};function ie(D){C=D,A||(A=!0,G())}function $t(D,_){O=w(function(){D(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){m||d||(m=!0,ie(S))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var _=3;break;default:_=f}var V=f;f=_;try{return D()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,_){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var V=f;f=D;try{return _()}finally{f=V}},t.unstable_scheduleCallback=function(D,_,V){var q=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,D){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=V+Y,D={id:h++,callback:_,priorityLevel:D,startTime:V,expirationTime:Y,sortIndex:-1},V>q?(D.sortIndex=V,e(u,D),n(a)===null&&D===n(u)&&(y?(p(O),O=-1):y=!0,$t(k,V-q))):(D.sortIndex=Y,e(a,D),m||d||(m=!0,ie(S))),D},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(D){var _=f;return function(){var V=f;f=_;try{return D.apply(this,arguments)}finally{f=V}}}})(om);lm.exports=om;var m1=lm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g1=H,dt=m1;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var am=new Set,is={};function br(t,e){ni(t,e),ni(t+"Capture",e)}function ni(t,e){for(is[t]=e,t=0;t<e.length;t++)am.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),su=Object.prototype.hasOwnProperty,y1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gf={},yf={};function v1(t){return su.call(yf,t)?!0:su.call(gf,t)?!1:y1.test(t)?yf[t]=!0:(gf[t]=!0,!1)}function x1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function w1(t,e,n,r){if(e===null||typeof e>"u"||x1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xe(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){je[t]=new Xe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];je[e]=new Xe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){je[t]=new Xe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){je[t]=new Xe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){je[t]=new Xe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){je[t]=new Xe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){je[t]=new Xe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){je[t]=new Xe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){je[t]=new Xe(t,5,!1,t.toLowerCase(),null,!1,!1)});var $h=/[\-:]([a-z])/g;function Kh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($h,Kh);je[e]=new Xe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($h,Kh);je[e]=new Xe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($h,Kh);je[e]=new Xe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){je[t]=new Xe(t,1,!1,t.toLowerCase(),null,!1,!1)});je.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){je[t]=new Xe(t,1,!1,t.toLowerCase(),null,!0,!0)});function qh(t,e,n,r){var i=je.hasOwnProperty(e)?je[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(w1(e,n,i,r)&&(n=null),r||i===null?v1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sn=g1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Us=Symbol.for("react.element"),Pr=Symbol.for("react.portal"),Dr=Symbol.for("react.fragment"),Gh=Symbol.for("react.strict_mode"),lu=Symbol.for("react.profiler"),um=Symbol.for("react.provider"),hm=Symbol.for("react.context"),Yh=Symbol.for("react.forward_ref"),ou=Symbol.for("react.suspense"),au=Symbol.for("react.suspense_list"),Qh=Symbol.for("react.memo"),An=Symbol.for("react.lazy"),cm=Symbol.for("react.offscreen"),vf=Symbol.iterator;function Si(t){return t===null||typeof t!="object"?null:(t=vf&&t[vf]||t["@@iterator"],typeof t=="function"?t:null)}var pe=Object.assign,ha;function Bi(t){if(ha===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ha=e&&e[1]||""}return`
`+ha+t}var ca=!1;function fa(t,e){if(!t||ca)return"";ca=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{ca=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bi(t):""}function k1(t){switch(t.tag){case 5:return Bi(t.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 2:case 15:return t=fa(t.type,!1),t;case 11:return t=fa(t.type.render,!1),t;case 1:return t=fa(t.type,!0),t;default:return""}}function uu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Dr:return"Fragment";case Pr:return"Portal";case lu:return"Profiler";case Gh:return"StrictMode";case ou:return"Suspense";case au:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hm:return(t.displayName||"Context")+".Consumer";case um:return(t._context.displayName||"Context")+".Provider";case Yh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qh:return e=t.displayName||null,e!==null?e:uu(t.type)||"Memo";case An:e=t._payload,t=t._init;try{return uu(t(e))}catch{}}return null}function S1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uu(e);case 8:return e===Gh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $n(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function C1(t){var e=fm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $s(t){t._valueTracker||(t._valueTracker=C1(t))}function dm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hu(t,e){var n=e.checked;return pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$n(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pm(t,e){e=e.checked,e!=null&&qh(t,"checked",e,!1)}function cu(t,e){pm(t,e);var n=$n(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fu(t,e.type,n):e.hasOwnProperty("defaultValue")&&fu(t,e.type,$n(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fu(t,e,n){(e!=="number"||$l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ii=Array.isArray;function Kr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$n(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function du(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Ii(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$n(n)}}function mm(t,e){var n=$n(e.value),r=$n(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ks,ym=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ks=Ks||document.createElement("div"),Ks.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ks.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ss(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A1=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(t){A1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wi[e]=Wi[t]})});function vm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wi.hasOwnProperty(t)&&Wi[t]?(""+e).trim():e+"px"}function xm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=vm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var b1=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mu(t,e){if(e){if(b1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function gu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yu=null;function Jh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vu=null,qr=null,Gr=null;function Cf(t){if(t=Bs(t)){if(typeof vu!="function")throw Error(M(280));var e=t.stateNode;e&&(e=zo(e),vu(t.stateNode,t.type,e))}}function wm(t){qr?Gr?Gr.push(t):Gr=[t]:qr=t}function km(){if(qr){var t=qr,e=Gr;if(Gr=qr=null,Cf(t),e)for(t=0;t<e.length;t++)Cf(e[t])}}function Sm(t,e){return t(e)}function Cm(){}var da=!1;function Am(t,e,n){if(da)return t(e,n);da=!0;try{return Sm(t,e,n)}finally{da=!1,(qr!==null||Gr!==null)&&(Cm(),km())}}function ls(t,e){var n=t.stateNode;if(n===null)return null;var r=zo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var xu=!1;if(yn)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){xu=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{xu=!1}function E1(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Vi=!1,Kl=null,ql=!1,wu=null,M1={onError:function(t){Vi=!0,Kl=t}};function T1(t,e,n,r,i,s,l,o,a){Vi=!1,Kl=null,E1.apply(M1,arguments)}function N1(t,e,n,r,i,s,l,o,a){if(T1.apply(this,arguments),Vi){if(Vi){var u=Kl;Vi=!1,Kl=null}else throw Error(M(198));ql||(ql=!0,wu=u)}}function Er(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Af(t){if(Er(t)!==t)throw Error(M(188))}function O1(t){var e=t.alternate;if(!e){if(e=Er(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Af(i),t;if(s===r)return Af(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function Em(t){return t=O1(t),t!==null?Mm(t):null}function Mm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mm(t);if(e!==null)return e;t=t.sibling}return null}var Tm=dt.unstable_scheduleCallback,bf=dt.unstable_cancelCallback,P1=dt.unstable_shouldYield,D1=dt.unstable_requestPaint,ve=dt.unstable_now,L1=dt.unstable_getCurrentPriorityLevel,Xh=dt.unstable_ImmediatePriority,Nm=dt.unstable_UserBlockingPriority,Gl=dt.unstable_NormalPriority,R1=dt.unstable_LowPriority,Om=dt.unstable_IdlePriority,Bo=null,sn=null;function B1(t){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Bo,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:j1,I1=Math.log,F1=Math.LN2;function j1(t){return t>>>=0,t===0?32:31-(I1(t)/F1|0)|0}var qs=64,Gs=4194304;function Fi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=Fi(o):(s&=l,s!==0&&(r=Fi(s)))}else l=n&~i,l!==0?r=Fi(l):s!==0&&(r=Fi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ft(e),i=1<<n,r|=t[n],e&=~i;return r}function z1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Ft(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=z1(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function ku(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pm(){var t=qs;return qs<<=1,!(qs&4194240)&&(qs=64),t}function pa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ls(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ft(e),t[e]=n}function H1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ft(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Zh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ft(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var te=0;function Dm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lm,ec,Rm,Bm,Im,Su=!1,Ys=[],In=null,Fn=null,jn=null,os=new Map,as=new Map,Tn=[],W1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ef(t,e){switch(t){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":os.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":as.delete(e.pointerId)}}function Ai(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Bs(e),e!==null&&ec(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function V1(t,e,n,r,i){switch(e){case"focusin":return In=Ai(In,t,e,n,r,i),!0;case"dragenter":return Fn=Ai(Fn,t,e,n,r,i),!0;case"mouseover":return jn=Ai(jn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return os.set(s,Ai(os.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,as.set(s,Ai(as.get(s)||null,t,e,n,r,i)),!0}return!1}function Fm(t){var e=or(t.target);if(e!==null){var n=Er(e);if(n!==null){if(e=n.tag,e===13){if(e=bm(n),e!==null){t.blockedOn=e,Im(t.priority,function(){Rm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yu=r,n.target.dispatchEvent(r),yu=null}else return e=Bs(n),e!==null&&ec(e),t.blockedOn=n,!1;e.shift()}return!0}function Mf(t,e,n){Tl(t)&&n.delete(e)}function U1(){Su=!1,In!==null&&Tl(In)&&(In=null),Fn!==null&&Tl(Fn)&&(Fn=null),jn!==null&&Tl(jn)&&(jn=null),os.forEach(Mf),as.forEach(Mf)}function bi(t,e){t.blockedOn===e&&(t.blockedOn=null,Su||(Su=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,U1)))}function us(t){function e(i){return bi(i,t)}if(0<Ys.length){bi(Ys[0],t);for(var n=1;n<Ys.length;n++){var r=Ys[n];r.blockedOn===t&&(r.blockedOn=null)}}for(In!==null&&bi(In,t),Fn!==null&&bi(Fn,t),jn!==null&&bi(jn,t),os.forEach(e),as.forEach(e),n=0;n<Tn.length;n++)r=Tn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tn.length&&(n=Tn[0],n.blockedOn===null);)Fm(n),n.blockedOn===null&&Tn.shift()}var Yr=Sn.ReactCurrentBatchConfig,Ql=!0;function $1(t,e,n,r){var i=te,s=Yr.transition;Yr.transition=null;try{te=1,tc(t,e,n,r)}finally{te=i,Yr.transition=s}}function K1(t,e,n,r){var i=te,s=Yr.transition;Yr.transition=null;try{te=4,tc(t,e,n,r)}finally{te=i,Yr.transition=s}}function tc(t,e,n,r){if(Ql){var i=Cu(t,e,n,r);if(i===null)Aa(t,e,r,Jl,n),Ef(t,r);else if(V1(i,t,e,n,r))r.stopPropagation();else if(Ef(t,r),e&4&&-1<W1.indexOf(t)){for(;i!==null;){var s=Bs(i);if(s!==null&&Lm(s),s=Cu(t,e,n,r),s===null&&Aa(t,e,r,Jl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Aa(t,e,r,null,n)}}var Jl=null;function Cu(t,e,n,r){if(Jl=null,t=Jh(r),t=or(t),t!==null)if(e=Er(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jl=t,null}function jm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L1()){case Xh:return 1;case Nm:return 4;case Gl:case R1:return 16;case Om:return 536870912;default:return 16}default:return 16}}var Pn=null,nc=null,Nl=null;function zm(){if(Nl)return Nl;var t,e=nc,n=e.length,r,i="value"in Pn?Pn.value:Pn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Nl=i.slice(t,1<r?1-r:void 0)}function Ol(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qs(){return!0}function Tf(){return!1}function yt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qs:Tf,this.isPropagationStopped=Tf,this}return pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),e}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=yt(yi),Rs=pe({},yi,{view:0,detail:0}),q1=yt(Rs),ma,ga,Ei,Io=pe({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ic,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ei&&(Ei&&t.type==="mousemove"?(ma=t.screenX-Ei.screenX,ga=t.screenY-Ei.screenY):ga=ma=0,Ei=t),ma)},movementY:function(t){return"movementY"in t?t.movementY:ga}}),Nf=yt(Io),G1=pe({},Io,{dataTransfer:0}),Y1=yt(G1),Q1=pe({},Rs,{relatedTarget:0}),ya=yt(Q1),J1=pe({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),X1=yt(J1),Z1=pe({},yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ex=yt(Z1),tx=pe({},yi,{data:0}),Of=yt(tx),nx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ix={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ix[t])?!!e[t]:!1}function ic(){return sx}var lx=pe({},Rs,{key:function(t){if(t.key){var e=nx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ic,charCode:function(t){return t.type==="keypress"?Ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ox=yt(lx),ax=pe({},Io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pf=yt(ax),ux=pe({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ic}),hx=yt(ux),cx=pe({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),fx=yt(cx),dx=pe({},Io,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),px=yt(dx),mx=[9,13,27,32],sc=yn&&"CompositionEvent"in window,Ui=null;yn&&"documentMode"in document&&(Ui=document.documentMode);var gx=yn&&"TextEvent"in window&&!Ui,_m=yn&&(!sc||Ui&&8<Ui&&11>=Ui),Df=" ",Lf=!1;function Hm(t,e){switch(t){case"keyup":return mx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lr=!1;function yx(t,e){switch(t){case"compositionend":return Wm(e);case"keypress":return e.which!==32?null:(Lf=!0,Df);case"textInput":return t=e.data,t===Df&&Lf?null:t;default:return null}}function vx(t,e){if(Lr)return t==="compositionend"||!sc&&Hm(t,e)?(t=zm(),Nl=nc=Pn=null,Lr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _m&&e.locale!=="ko"?null:e.data;default:return null}}var xx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xx[t.type]:e==="textarea"}function Vm(t,e,n,r){wm(r),e=Xl(e,"onChange"),0<e.length&&(n=new rc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $i=null,hs=null;function wx(t){eg(t,0)}function Fo(t){var e=Ir(t);if(dm(e))return t}function kx(t,e){if(t==="change")return e}var Um=!1;if(yn){var va;if(yn){var xa="oninput"in document;if(!xa){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),xa=typeof Bf.oninput=="function"}va=xa}else va=!1;Um=va&&(!document.documentMode||9<document.documentMode)}function If(){$i&&($i.detachEvent("onpropertychange",$m),hs=$i=null)}function $m(t){if(t.propertyName==="value"&&Fo(hs)){var e=[];Vm(e,hs,t,Jh(t)),Am(wx,e)}}function Sx(t,e,n){t==="focusin"?(If(),$i=e,hs=n,$i.attachEvent("onpropertychange",$m)):t==="focusout"&&If()}function Cx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fo(hs)}function Ax(t,e){if(t==="click")return Fo(e)}function bx(t,e){if(t==="input"||t==="change")return Fo(e)}function Ex(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zt=typeof Object.is=="function"?Object.is:Ex;function cs(t,e){if(zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!su.call(e,i)||!zt(t[i],e[i]))return!1}return!0}function Ff(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jf(t,e){var n=Ff(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ff(n)}}function Km(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Km(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qm(){for(var t=window,e=$l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$l(t.document)}return e}function lc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Mx(t){var e=qm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Km(n.ownerDocument.documentElement,n)){if(r!==null&&lc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=jf(n,s);var l=jf(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tx=yn&&"documentMode"in document&&11>=document.documentMode,Rr=null,Au=null,Ki=null,bu=!1;function zf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bu||Rr==null||Rr!==$l(r)||(r=Rr,"selectionStart"in r&&lc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ki&&cs(Ki,r)||(Ki=r,r=Xl(Au,"onSelect"),0<r.length&&(e=new rc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rr)))}function Js(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Br={animationend:Js("Animation","AnimationEnd"),animationiteration:Js("Animation","AnimationIteration"),animationstart:Js("Animation","AnimationStart"),transitionend:Js("Transition","TransitionEnd")},wa={},Gm={};yn&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function jo(t){if(wa[t])return wa[t];if(!Br[t])return t;var e=Br[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Gm)return wa[t]=e[n];return t}var Ym=jo("animationend"),Qm=jo("animationiteration"),Jm=jo("animationstart"),Xm=jo("transitionend"),Zm=new Map,_f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(t,e){Zm.set(t,e),br(e,[t])}for(var ka=0;ka<_f.length;ka++){var Sa=_f[ka],Nx=Sa.toLowerCase(),Ox=Sa[0].toUpperCase()+Sa.slice(1);Zn(Nx,"on"+Ox)}Zn(Ym,"onAnimationEnd");Zn(Qm,"onAnimationIteration");Zn(Jm,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(Xm,"onTransitionEnd");ni("onMouseEnter",["mouseout","mouseover"]);ni("onMouseLeave",["mouseout","mouseover"]);ni("onPointerEnter",["pointerout","pointerover"]);ni("onPointerLeave",["pointerout","pointerover"]);br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));br("onBeforeInput",["compositionend","keypress","textInput","paste"]);br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Px=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function Hf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,N1(r,e,void 0,t),t.currentTarget=null}function eg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;Hf(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;Hf(i,o,u),s=a}}}if(ql)throw t=wu,ql=!1,wu=null,t}function oe(t,e){var n=e[Ou];n===void 0&&(n=e[Ou]=new Set);var r=t+"__bubble";n.has(r)||(tg(e,t,2,!1),n.add(r))}function Ca(t,e,n){var r=0;e&&(r|=4),tg(n,t,r,e)}var Xs="_reactListening"+Math.random().toString(36).slice(2);function fs(t){if(!t[Xs]){t[Xs]=!0,am.forEach(function(n){n!=="selectionchange"&&(Px.has(n)||Ca(n,!1,t),Ca(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xs]||(e[Xs]=!0,Ca("selectionchange",!1,e))}}function tg(t,e,n,r){switch(jm(e)){case 1:var i=$1;break;case 4:i=K1;break;default:i=tc}n=i.bind(null,e,n,t),i=void 0,!xu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Aa(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=or(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Am(function(){var u=s,h=Jh(n),c=[];e:{var f=Zm.get(t);if(f!==void 0){var d=rc,m=t;switch(t){case"keypress":if(Ol(n)===0)break e;case"keydown":case"keyup":d=ox;break;case"focusin":m="focus",d=ya;break;case"focusout":m="blur",d=ya;break;case"beforeblur":case"afterblur":d=ya;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Y1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=hx;break;case Ym:case Qm:case Jm:d=X1;break;case Xm:d=fx;break;case"scroll":d=q1;break;case"wheel":d=px;break;case"copy":case"cut":case"paste":d=ex;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Pf}var y=(e&4)!==0,w=!y&&t==="scroll",p=y?f!==null?f+"Capture":null:f;y=[];for(var g=u,v;g!==null;){v=g;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,p!==null&&(k=ls(g,p),k!=null&&y.push(ds(g,k,v)))),w)break;g=g.return}0<y.length&&(f=new d(f,m,null,n,h),c.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==yu&&(m=n.relatedTarget||n.fromElement)&&(or(m)||m[vn]))break e;if((d||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,d?(m=n.relatedTarget||n.toElement,d=u,m=m?or(m):null,m!==null&&(w=Er(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=u),d!==m)){if(y=Nf,k="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=Pf,k="onPointerLeave",p="onPointerEnter",g="pointer"),w=d==null?f:Ir(d),v=m==null?f:Ir(m),f=new y(k,g+"leave",d,n,h),f.target=w,f.relatedTarget=v,k=null,or(h)===u&&(y=new y(p,g+"enter",m,n,h),y.target=v,y.relatedTarget=w,k=y),w=k,d&&m)t:{for(y=d,p=m,g=0,v=y;v;v=Mr(v))g++;for(v=0,k=p;k;k=Mr(k))v++;for(;0<g-v;)y=Mr(y),g--;for(;0<v-g;)p=Mr(p),v--;for(;g--;){if(y===p||p!==null&&y===p.alternate)break t;y=Mr(y),p=Mr(p)}y=null}else y=null;d!==null&&Wf(c,f,d,y,!1),m!==null&&w!==null&&Wf(c,w,m,y,!0)}}e:{if(f=u?Ir(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var S=kx;else if(Rf(f))if(Um)S=bx;else{S=Cx;var A=Sx}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Ax);if(S&&(S=S(t,u))){Vm(c,S,n,h);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&fu(f,"number",f.value)}switch(A=u?Ir(u):window,t){case"focusin":(Rf(A)||A.contentEditable==="true")&&(Rr=A,Au=u,Ki=null);break;case"focusout":Ki=Au=Rr=null;break;case"mousedown":bu=!0;break;case"contextmenu":case"mouseup":case"dragend":bu=!1,zf(c,n,h);break;case"selectionchange":if(Tx)break;case"keydown":case"keyup":zf(c,n,h)}var C;if(sc)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Lr?Hm(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(_m&&n.locale!=="ko"&&(Lr||O!=="onCompositionStart"?O==="onCompositionEnd"&&Lr&&(C=zm()):(Pn=h,nc="value"in Pn?Pn.value:Pn.textContent,Lr=!0)),A=Xl(u,O),0<A.length&&(O=new Of(O,t,null,n,h),c.push({event:O,listeners:A}),C?O.data=C:(C=Wm(n),C!==null&&(O.data=C)))),(C=gx?yx(t,n):vx(t,n))&&(u=Xl(u,"onBeforeInput"),0<u.length&&(h=new Of("onBeforeInput","beforeinput",null,n,h),c.push({event:h,listeners:u}),h.data=C))}eg(c,e)})}function ds(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ls(t,n),s!=null&&r.unshift(ds(t,s,i)),s=ls(t,e),s!=null&&r.push(ds(t,s,i))),t=t.return}return r}function Mr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wf(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=ls(n,s),a!=null&&l.unshift(ds(n,a,o))):i||(a=ls(n,s),a!=null&&l.push(ds(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Dx=/\r\n?/g,Lx=/\u0000|\uFFFD/g;function Vf(t){return(typeof t=="string"?t:""+t).replace(Dx,`
`).replace(Lx,"")}function Zs(t,e,n){if(e=Vf(e),Vf(t)!==e&&n)throw Error(M(425))}function Zl(){}var Eu=null,Mu=null;function Tu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nu=typeof setTimeout=="function"?setTimeout:void 0,Rx=typeof clearTimeout=="function"?clearTimeout:void 0,Uf=typeof Promise=="function"?Promise:void 0,Bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Uf<"u"?function(t){return Uf.resolve(null).then(t).catch(Ix)}:Nu;function Ix(t){setTimeout(function(){throw t})}function ba(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),us(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);us(e)}function zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $f(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vi=Math.random().toString(36).slice(2),Zt="__reactFiber$"+vi,ps="__reactProps$"+vi,vn="__reactContainer$"+vi,Ou="__reactEvents$"+vi,Fx="__reactListeners$"+vi,jx="__reactHandles$"+vi;function or(t){var e=t[Zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[Zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$f(t);t!==null;){if(n=t[Zt])return n;t=$f(t)}return e}t=n,n=t.parentNode}return null}function Bs(t){return t=t[Zt]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ir(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function zo(t){return t[ps]||null}var Pu=[],Fr=-1;function er(t){return{current:t}}function ue(t){0>Fr||(t.current=Pu[Fr],Pu[Fr]=null,Fr--)}function se(t,e){Fr++,Pu[Fr]=t.current,t.current=e}var Kn={},Ke=er(Kn),rt=er(!1),mr=Kn;function ri(t,e){var n=t.type.contextTypes;if(!n)return Kn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function it(t){return t=t.childContextTypes,t!=null}function eo(){ue(rt),ue(Ke)}function Kf(t,e,n){if(Ke.current!==Kn)throw Error(M(168));se(Ke,e),se(rt,n)}function ng(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,S1(t)||"Unknown",i));return pe({},n,r)}function to(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kn,mr=Ke.current,se(Ke,t),se(rt,rt.current),!0}function qf(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=ng(t,e,mr),r.__reactInternalMemoizedMergedChildContext=t,ue(rt),ue(Ke),se(Ke,t)):ue(rt),se(rt,n)}var hn=null,_o=!1,Ea=!1;function rg(t){hn===null?hn=[t]:hn.push(t)}function zx(t){_o=!0,rg(t)}function tr(){if(!Ea&&hn!==null){Ea=!0;var t=0,e=te;try{var n=hn;for(te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hn=null,_o=!1}catch(i){throw hn!==null&&(hn=hn.slice(t+1)),Tm(Xh,tr),i}finally{te=e,Ea=!1}}return null}var jr=[],zr=0,no=null,ro=0,xt=[],wt=0,gr=null,fn=1,dn="";function ir(t,e){jr[zr++]=ro,jr[zr++]=no,no=t,ro=e}function ig(t,e,n){xt[wt++]=fn,xt[wt++]=dn,xt[wt++]=gr,gr=t;var r=fn;t=dn;var i=32-Ft(r)-1;r&=~(1<<i),n+=1;var s=32-Ft(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,fn=1<<32-Ft(e)+i|n<<i|r,dn=s+t}else fn=1<<s|n<<i|r,dn=t}function oc(t){t.return!==null&&(ir(t,1),ig(t,1,0))}function ac(t){for(;t===no;)no=jr[--zr],jr[zr]=null,ro=jr[--zr],jr[zr]=null;for(;t===gr;)gr=xt[--wt],xt[wt]=null,dn=xt[--wt],xt[wt]=null,fn=xt[--wt],xt[wt]=null}var ft=null,ct=null,he=!1,Bt=null;function sg(t,e){var n=St(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ft=t,ct=zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ft=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gr!==null?{id:fn,overflow:dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=St(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ft=t,ct=null,!0):!1;default:return!1}}function Du(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lu(t){if(he){var e=ct;if(e){var n=e;if(!Gf(t,e)){if(Du(t))throw Error(M(418));e=zn(n.nextSibling);var r=ft;e&&Gf(t,e)?sg(r,n):(t.flags=t.flags&-4097|2,he=!1,ft=t)}}else{if(Du(t))throw Error(M(418));t.flags=t.flags&-4097|2,he=!1,ft=t}}}function Yf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ft=t}function el(t){if(t!==ft)return!1;if(!he)return Yf(t),he=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tu(t.type,t.memoizedProps)),e&&(e=ct)){if(Du(t))throw lg(),Error(M(418));for(;e;)sg(t,e),e=zn(e.nextSibling)}if(Yf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ct=zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=ft?zn(t.stateNode.nextSibling):null;return!0}function lg(){for(var t=ct;t;)t=zn(t.nextSibling)}function ii(){ct=ft=null,he=!1}function uc(t){Bt===null?Bt=[t]:Bt.push(t)}var _x=Sn.ReactCurrentBatchConfig;function Mi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function tl(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qf(t){var e=t._init;return e(t._payload)}function og(t){function e(p,g){if(t){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Vn(p,g),p.index=0,p.sibling=null,p}function s(p,g,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,g,v,k){return g===null||g.tag!==6?(g=La(v,p.mode,k),g.return=p,g):(g=i(g,v),g.return=p,g)}function a(p,g,v,k){var S=v.type;return S===Dr?h(p,g,v.props.children,k,v.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===An&&Qf(S)===g.type)?(k=i(g,v.props),k.ref=Mi(p,g,v),k.return=p,k):(k=Fl(v.type,v.key,v.props,null,p.mode,k),k.ref=Mi(p,g,v),k.return=p,k)}function u(p,g,v,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Ra(v,p.mode,k),g.return=p,g):(g=i(g,v.children||[]),g.return=p,g)}function h(p,g,v,k,S){return g===null||g.tag!==7?(g=dr(v,p.mode,k,S),g.return=p,g):(g=i(g,v),g.return=p,g)}function c(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=La(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Us:return v=Fl(g.type,g.key,g.props,null,p.mode,v),v.ref=Mi(p,null,g),v.return=p,v;case Pr:return g=Ra(g,p.mode,v),g.return=p,g;case An:var k=g._init;return c(p,k(g._payload),v)}if(Ii(g)||Si(g))return g=dr(g,p.mode,v,null),g.return=p,g;tl(p,g)}return null}function f(p,g,v,k){var S=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:o(p,g,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Us:return v.key===S?a(p,g,v,k):null;case Pr:return v.key===S?u(p,g,v,k):null;case An:return S=v._init,f(p,g,S(v._payload),k)}if(Ii(v)||Si(v))return S!==null?null:h(p,g,v,k,null);tl(p,v)}return null}function d(p,g,v,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return p=p.get(v)||null,o(g,p,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Us:return p=p.get(k.key===null?v:k.key)||null,a(g,p,k,S);case Pr:return p=p.get(k.key===null?v:k.key)||null,u(g,p,k,S);case An:var A=k._init;return d(p,g,v,A(k._payload),S)}if(Ii(k)||Si(k))return p=p.get(v)||null,h(g,p,k,S,null);tl(g,k)}return null}function m(p,g,v,k){for(var S=null,A=null,C=g,O=g=0,j=null;C!==null&&O<v.length;O++){C.index>O?(j=C,C=null):j=C.sibling;var T=f(p,C,v[O],k);if(T===null){C===null&&(C=j);break}t&&C&&T.alternate===null&&e(p,C),g=s(T,g,O),A===null?S=T:A.sibling=T,A=T,C=j}if(O===v.length)return n(p,C),he&&ir(p,O),S;if(C===null){for(;O<v.length;O++)C=c(p,v[O],k),C!==null&&(g=s(C,g,O),A===null?S=C:A.sibling=C,A=C);return he&&ir(p,O),S}for(C=r(p,C);O<v.length;O++)j=d(C,p,O,v[O],k),j!==null&&(t&&j.alternate!==null&&C.delete(j.key===null?O:j.key),g=s(j,g,O),A===null?S=j:A.sibling=j,A=j);return t&&C.forEach(function(z){return e(p,z)}),he&&ir(p,O),S}function y(p,g,v,k){var S=Si(v);if(typeof S!="function")throw Error(M(150));if(v=S.call(v),v==null)throw Error(M(151));for(var A=S=null,C=g,O=g=0,j=null,T=v.next();C!==null&&!T.done;O++,T=v.next()){C.index>O?(j=C,C=null):j=C.sibling;var z=f(p,C,T.value,k);if(z===null){C===null&&(C=j);break}t&&C&&z.alternate===null&&e(p,C),g=s(z,g,O),A===null?S=z:A.sibling=z,A=z,C=j}if(T.done)return n(p,C),he&&ir(p,O),S;if(C===null){for(;!T.done;O++,T=v.next())T=c(p,T.value,k),T!==null&&(g=s(T,g,O),A===null?S=T:A.sibling=T,A=T);return he&&ir(p,O),S}for(C=r(p,C);!T.done;O++,T=v.next())T=d(C,p,O,T.value,k),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?O:T.key),g=s(T,g,O),A===null?S=T:A.sibling=T,A=T);return t&&C.forEach(function(B){return e(p,B)}),he&&ir(p,O),S}function w(p,g,v,k){if(typeof v=="object"&&v!==null&&v.type===Dr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Us:e:{for(var S=v.key,A=g;A!==null;){if(A.key===S){if(S=v.type,S===Dr){if(A.tag===7){n(p,A.sibling),g=i(A,v.props.children),g.return=p,p=g;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===An&&Qf(S)===A.type){n(p,A.sibling),g=i(A,v.props),g.ref=Mi(p,A,v),g.return=p,p=g;break e}n(p,A);break}else e(p,A);A=A.sibling}v.type===Dr?(g=dr(v.props.children,p.mode,k,v.key),g.return=p,p=g):(k=Fl(v.type,v.key,v.props,null,p.mode,k),k.ref=Mi(p,g,v),k.return=p,p=k)}return l(p);case Pr:e:{for(A=v.key;g!==null;){if(g.key===A)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(p,g.sibling),g=i(g,v.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Ra(v,p.mode,k),g.return=p,p=g}return l(p);case An:return A=v._init,w(p,g,A(v._payload),k)}if(Ii(v))return m(p,g,v,k);if(Si(v))return y(p,g,v,k);tl(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(p,g.sibling),g=i(g,v),g.return=p,p=g):(n(p,g),g=La(v,p.mode,k),g.return=p,p=g),l(p)):n(p,g)}return w}var si=og(!0),ag=og(!1),io=er(null),so=null,_r=null,hc=null;function cc(){hc=_r=so=null}function fc(t){var e=io.current;ue(io),t._currentValue=e}function Ru(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qr(t,e){so=t,hc=_r=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nt=!0),t.firstContext=null)}function Mt(t){var e=t._currentValue;if(hc!==t)if(t={context:t,memoizedValue:e,next:null},_r===null){if(so===null)throw Error(M(308));_r=t,so.dependencies={lanes:0,firstContext:t}}else _r=_r.next=t;return e}var ar=null;function dc(t){ar===null?ar=[t]:ar.push(t)}function ug(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,dc(e)):(n.next=i.next,i.next=n),e.interleaved=n,xn(t,r)}function xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bn=!1;function pc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _n(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xn(t,n)}return i=r.interleaved,i===null?(e.next=e,dc(r)):(e.next=i.next,i.next=e),r.interleaved=e,xn(t,n)}function Pl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zh(t,n)}}function Jf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lo(t,e,n,r){var i=t.updateQueue;bn=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;l=0,h=u=a=null,o=s;do{var f=o.lane,d=o.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,y=o;switch(f=e,d=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){c=m.call(d,c,f);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(d,c,f):m,f==null)break e;c=pe({},c,f);break e;case 2:bn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=d,a=c):h=h.next=d,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);vr|=l,t.lanes=l,t.memoizedState=c}}function Xf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var Is={},ln=er(Is),ms=er(Is),gs=er(Is);function ur(t){if(t===Is)throw Error(M(174));return t}function mc(t,e){switch(se(gs,e),se(ms,t),se(ln,Is),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pu(e,t)}ue(ln),se(ln,e)}function li(){ue(ln),ue(ms),ue(gs)}function cg(t){ur(gs.current);var e=ur(ln.current),n=pu(e,t.type);e!==n&&(se(ms,t),se(ln,n))}function gc(t){ms.current===t&&(ue(ln),ue(ms))}var ce=er(0);function oo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ma=[];function yc(){for(var t=0;t<Ma.length;t++)Ma[t]._workInProgressVersionPrimary=null;Ma.length=0}var Dl=Sn.ReactCurrentDispatcher,Ta=Sn.ReactCurrentBatchConfig,yr=0,de=null,ke=null,be=null,ao=!1,qi=!1,ys=0,Hx=0;function _e(){throw Error(M(321))}function vc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zt(t[n],e[n]))return!1;return!0}function xc(t,e,n,r,i,s){if(yr=s,de=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dl.current=t===null||t.memoizedState===null?$x:Kx,t=n(r,i),qi){s=0;do{if(qi=!1,ys=0,25<=s)throw Error(M(301));s+=1,be=ke=null,e.updateQueue=null,Dl.current=qx,t=n(r,i)}while(qi)}if(Dl.current=uo,e=ke!==null&&ke.next!==null,yr=0,be=ke=de=null,ao=!1,e)throw Error(M(300));return t}function wc(){var t=ys!==0;return ys=0,t}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?de.memoizedState=be=t:be=be.next=t,be}function Tt(){if(ke===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=be===null?de.memoizedState:be.next;if(e!==null)be=e,ke=t;else{if(t===null)throw Error(M(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},be===null?de.memoizedState=be=t:be=be.next=t}return be}function vs(t,e){return typeof e=="function"?e(t):e}function Na(t){var e=Tt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var h=u.lane;if((yr&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=c,l=r):a=a.next=c,de.lanes|=h,vr|=h}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,zt(r,e.memoizedState)||(nt=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,de.lanes|=s,vr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Oa(t){var e=Tt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);zt(s,e.memoizedState)||(nt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function fg(){}function dg(t,e){var n=de,r=Tt(),i=e(),s=!zt(r.memoizedState,i);if(s&&(r.memoizedState=i,nt=!0),r=r.queue,kc(gg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,xs(9,mg.bind(null,n,r,i,e),void 0,null),Me===null)throw Error(M(349));yr&30||pg(n,e,i)}return i}function pg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mg(t,e,n,r){e.value=n,e.getSnapshot=r,yg(e)&&vg(t)}function gg(t,e,n){return n(function(){yg(e)&&vg(t)})}function yg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zt(t,n)}catch{return!0}}function vg(t){var e=xn(t,1);e!==null&&jt(e,t,1,-1)}function Zf(t){var e=Xt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:t},e.queue=t,t=t.dispatch=Ux.bind(null,de,t),[e.memoizedState,t]}function xs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xg(){return Tt().memoizedState}function Ll(t,e,n,r){var i=Xt();de.flags|=t,i.memoizedState=xs(1|e,n,void 0,r===void 0?null:r)}function Ho(t,e,n,r){var i=Tt();r=r===void 0?null:r;var s=void 0;if(ke!==null){var l=ke.memoizedState;if(s=l.destroy,r!==null&&vc(r,l.deps)){i.memoizedState=xs(e,n,s,r);return}}de.flags|=t,i.memoizedState=xs(1|e,n,s,r)}function ed(t,e){return Ll(8390656,8,t,e)}function kc(t,e){return Ho(2048,8,t,e)}function wg(t,e){return Ho(4,2,t,e)}function kg(t,e){return Ho(4,4,t,e)}function Sg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cg(t,e,n){return n=n!=null?n.concat([t]):null,Ho(4,4,Sg.bind(null,e,t),n)}function Sc(){}function Ag(t,e){var n=Tt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bg(t,e){var n=Tt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&vc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Eg(t,e,n){return yr&21?(zt(n,e)||(n=Pm(),de.lanes|=n,vr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nt=!0),t.memoizedState=n)}function Wx(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var r=Ta.transition;Ta.transition={};try{t(!1),e()}finally{te=n,Ta.transition=r}}function Mg(){return Tt().memoizedState}function Vx(t,e,n){var r=Wn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tg(t))Ng(e,n);else if(n=ug(t,e,n,r),n!==null){var i=Ye();jt(n,t,r,i),Og(n,e,r)}}function Ux(t,e,n){var r=Wn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tg(t))Ng(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,zt(o,l)){var a=e.interleaved;a===null?(i.next=i,dc(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=ug(t,e,i,r),n!==null&&(i=Ye(),jt(n,t,r,i),Og(n,e,r))}}function Tg(t){var e=t.alternate;return t===de||e!==null&&e===de}function Ng(t,e){qi=ao=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Og(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zh(t,n)}}var uo={readContext:Mt,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},$x={readContext:Mt,useCallback:function(t,e){return Xt().memoizedState=[t,e===void 0?null:e],t},useContext:Mt,useEffect:ed,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ll(4194308,4,Sg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ll(4,2,t,e)},useMemo:function(t,e){var n=Xt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Vx.bind(null,de,t),[r.memoizedState,t]},useRef:function(t){var e=Xt();return t={current:t},e.memoizedState=t},useState:Zf,useDebugValue:Sc,useDeferredValue:function(t){return Xt().memoizedState=t},useTransition:function(){var t=Zf(!1),e=t[0];return t=Wx.bind(null,t[1]),Xt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=de,i=Xt();if(he){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Me===null)throw Error(M(349));yr&30||pg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ed(gg.bind(null,r,s,t),[t]),r.flags|=2048,xs(9,mg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Xt(),e=Me.identifierPrefix;if(he){var n=dn,r=fn;n=(r&~(1<<32-Ft(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ys++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Kx={readContext:Mt,useCallback:Ag,useContext:Mt,useEffect:kc,useImperativeHandle:Cg,useInsertionEffect:wg,useLayoutEffect:kg,useMemo:bg,useReducer:Na,useRef:xg,useState:function(){return Na(vs)},useDebugValue:Sc,useDeferredValue:function(t){var e=Tt();return Eg(e,ke.memoizedState,t)},useTransition:function(){var t=Na(vs)[0],e=Tt().memoizedState;return[t,e]},useMutableSource:fg,useSyncExternalStore:dg,useId:Mg,unstable_isNewReconciler:!1},qx={readContext:Mt,useCallback:Ag,useContext:Mt,useEffect:kc,useImperativeHandle:Cg,useInsertionEffect:wg,useLayoutEffect:kg,useMemo:bg,useReducer:Oa,useRef:xg,useState:function(){return Oa(vs)},useDebugValue:Sc,useDeferredValue:function(t){var e=Tt();return ke===null?e.memoizedState=t:Eg(e,ke.memoizedState,t)},useTransition:function(){var t=Oa(vs)[0],e=Tt().memoizedState;return[t,e]},useMutableSource:fg,useSyncExternalStore:dg,useId:Mg,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wo={isMounted:function(t){return(t=t._reactInternals)?Er(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ye(),i=Wn(t),s=pn(r,i);s.payload=e,n!=null&&(s.callback=n),e=_n(t,s,i),e!==null&&(jt(e,t,i,r),Pl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ye(),i=Wn(t),s=pn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=_n(t,s,i),e!==null&&(jt(e,t,i,r),Pl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ye(),r=Wn(t),i=pn(n,r);i.tag=2,e!=null&&(i.callback=e),e=_n(t,i,r),e!==null&&(jt(e,t,r,n),Pl(e,t,r))}};function td(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!cs(n,r)||!cs(i,s):!0}function Pg(t,e,n){var r=!1,i=Kn,s=e.contextType;return typeof s=="object"&&s!==null?s=Mt(s):(i=it(e)?mr:Ke.current,r=e.contextTypes,s=(r=r!=null)?ri(t,i):Kn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function nd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wo.enqueueReplaceState(e,e.state,null)}function Iu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},pc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Mt(s):(s=it(e)?mr:Ke.current,i.context=ri(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wo.enqueueReplaceState(i,i.state,null),lo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function oi(t,e){try{var n="",r=e;do n+=k1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Pa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Gx=typeof WeakMap=="function"?WeakMap:Map;function Dg(t,e,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){co||(co=!0,qu=r),Fu(t,e)},n}function Lg(t,e,n){n=pn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Fu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Fu(t,e),typeof r!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function rd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Gx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=aw.bind(null,t,e,n),e.then(t,t))}function id(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pn(-1,1),e.tag=2,_n(n,e,1))),n.lanes|=1),t)}var Yx=Sn.ReactCurrentOwner,nt=!1;function Ge(t,e,n,r){e.child=t===null?ag(e,null,n,r):si(e,t.child,n,r)}function ld(t,e,n,r,i){n=n.render;var s=e.ref;return Qr(e,i),r=xc(t,e,n,r,s,i),n=wc(),t!==null&&!nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wn(t,e,i)):(he&&n&&oc(e),e.flags|=1,Ge(t,e,r,i),e.child)}function od(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Oc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Rg(t,e,s,r,i)):(t=Fl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:cs,n(l,r)&&t.ref===e.ref)return wn(t,e,i)}return e.flags|=1,t=Vn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Rg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(cs(s,r)&&t.ref===e.ref)if(nt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(nt=!0);else return e.lanes=t.lanes,wn(t,e,i)}return ju(t,e,n,r,i)}function Bg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(Wr,at),at|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(Wr,at),at|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,se(Wr,at),at|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,se(Wr,at),at|=r;return Ge(t,e,i,n),e.child}function Ig(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ju(t,e,n,r,i){var s=it(n)?mr:Ke.current;return s=ri(e,s),Qr(e,i),n=xc(t,e,n,r,s,i),r=wc(),t!==null&&!nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wn(t,e,i)):(he&&r&&oc(e),e.flags|=1,Ge(t,e,n,i),e.child)}function ad(t,e,n,r,i){if(it(n)){var s=!0;to(e)}else s=!1;if(Qr(e,i),e.stateNode===null)Rl(t,e),Pg(e,n,r),Iu(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Mt(u):(u=it(n)?mr:Ke.current,u=ri(e,u));var h=n.getDerivedStateFromProps,c=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";c||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&nd(e,l,r,u),bn=!1;var f=e.memoizedState;l.state=f,lo(e,r,l,i),a=e.memoizedState,o!==r||f!==a||rt.current||bn?(typeof h=="function"&&(Bu(e,n,h,r),a=e.memoizedState),(o=bn||td(e,n,o,r,f,a,u))?(c||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,hg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Lt(e.type,o),l.props=u,c=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Mt(a):(a=it(n)?mr:Ke.current,a=ri(e,a));var d=n.getDerivedStateFromProps;(h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==c||f!==a)&&nd(e,l,r,a),bn=!1,f=e.memoizedState,l.state=f,lo(e,r,l,i);var m=e.memoizedState;o!==c||f!==m||rt.current||bn?(typeof d=="function"&&(Bu(e,n,d,r),m=e.memoizedState),(u=bn||td(e,n,u,r,f,m,a)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),l.props=r,l.state=m,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return zu(t,e,n,r,s,i)}function zu(t,e,n,r,i,s){Ig(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&qf(e,n,!1),wn(t,e,s);r=e.stateNode,Yx.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=si(e,t.child,null,s),e.child=si(e,null,o,s)):Ge(t,e,o,s),e.memoizedState=r.state,i&&qf(e,n,!0),e.child}function Fg(t){var e=t.stateNode;e.pendingContext?Kf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kf(t,e.context,!1),mc(t,e.containerInfo)}function ud(t,e,n,r,i){return ii(),uc(i),e.flags|=256,Ge(t,e,n,r),e.child}var _u={dehydrated:null,treeContext:null,retryLane:0};function Hu(t){return{baseLanes:t,cachePool:null,transitions:null}}function jg(t,e,n){var r=e.pendingProps,i=ce.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),se(ce,i&1),t===null)return Lu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=$o(l,r,0,null),t=dr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Hu(n),e.memoizedState=_u,t):Cc(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Qx(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Vn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Vn(o,s):(s=dr(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?Hu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=_u,r}return s=t.child,t=s.sibling,r=Vn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cc(t,e){return e=$o({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nl(t,e,n,r){return r!==null&&uc(r),si(e,t.child,null,n),t=Cc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Qx(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=Pa(Error(M(422))),nl(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=$o({mode:"visible",children:r.children},i,0,null),s=dr(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&si(e,t.child,null,l),e.child.memoizedState=Hu(l),e.memoizedState=_u,s);if(!(e.mode&1))return nl(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(M(419)),r=Pa(s,r,void 0),nl(t,e,l,r)}if(o=(l&t.childLanes)!==0,nt||o){if(r=Me,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xn(t,i),jt(r,t,i,-1))}return Nc(),r=Pa(Error(M(421))),nl(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ct=zn(i.nextSibling),ft=e,he=!0,Bt=null,t!==null&&(xt[wt++]=fn,xt[wt++]=dn,xt[wt++]=gr,fn=t.id,dn=t.overflow,gr=e),e=Cc(e,r.children),e.flags|=4096,e)}function hd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ru(t.return,e,n)}function Da(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ge(t,e,r.children,n),r=ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hd(t,n,e);else if(t.tag===19)hd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(se(ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&oo(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Da(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&oo(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Da(e,!0,n,null,s);break;case"together":Da(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jx(t,e,n){switch(e.tag){case 3:Fg(e),ii();break;case 5:cg(e);break;case 1:it(e.type)&&to(e);break;case 4:mc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;se(io,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(se(ce,ce.current&1),e.flags|=128,null):n&e.child.childLanes?jg(t,e,n):(se(ce,ce.current&1),t=wn(t,e,n),t!==null?t.sibling:null);se(ce,ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),se(ce,ce.current),r)break;return null;case 22:case 23:return e.lanes=0,Bg(t,e,n)}return wn(t,e,n)}var _g,Wu,Hg,Wg;_g=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wu=function(){};Hg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ur(ln.current);var s=null;switch(n){case"input":i=hu(t,i),r=hu(t,r),s=[];break;case"select":i=pe({},i,{value:void 0}),r=pe({},r,{value:void 0}),s=[];break;case"textarea":i=du(t,i),r=du(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zl)}mu(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(is.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(is.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&oe("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Wg=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ti(t,e){if(!he)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Xx(t,e,n){var r=e.pendingProps;switch(ac(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return it(e.type)&&eo(),He(e),null;case 3:return r=e.stateNode,li(),ue(rt),ue(Ke),yc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(el(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&(Qu(Bt),Bt=null))),Wu(t,e),He(e),null;case 5:gc(e);var i=ur(gs.current);if(n=e.type,t!==null&&e.stateNode!=null)Hg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return He(e),null}if(t=ur(ln.current),el(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Zt]=e,r[ps]=s,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(i=0;i<ji.length;i++)oe(ji[i],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":xf(r,s),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},oe("invalid",r);break;case"textarea":kf(r,s),oe("invalid",r)}mu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Zs(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Zs(r.textContent,o,t),i=["children",""+o]):is.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&oe("scroll",r)}switch(n){case"input":$s(r),wf(r,s,!0);break;case"textarea":$s(r),Sf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Zl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Zt]=e,t[ps]=r,_g(t,e,!1,!1),e.stateNode=t;e:{switch(l=gu(n,r),n){case"dialog":oe("cancel",t),oe("close",t),i=r;break;case"iframe":case"object":case"embed":oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<ji.length;i++)oe(ji[i],t);i=r;break;case"source":oe("error",t),i=r;break;case"img":case"image":case"link":oe("error",t),oe("load",t),i=r;break;case"details":oe("toggle",t),i=r;break;case"input":xf(t,r),i=hu(t,r),oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=pe({},r,{value:void 0}),oe("invalid",t);break;case"textarea":kf(t,r),i=du(t,r),oe("invalid",t);break;default:i=r}mu(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?xm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&ym(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ss(t,a):typeof a=="number"&&ss(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(is.hasOwnProperty(s)?a!=null&&s==="onScroll"&&oe("scroll",t):a!=null&&qh(t,s,a,l))}switch(n){case"input":$s(t),wf(t,r,!1);break;case"textarea":$s(t),Sf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$n(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Kr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Kr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return He(e),null;case 6:if(t&&e.stateNode!=null)Wg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=ur(gs.current),ur(ln.current),el(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zt]=e,(s=r.nodeValue!==n)&&(t=ft,t!==null))switch(t.tag){case 3:Zs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zs(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=e,e.stateNode=r}return He(e),null;case 13:if(ue(ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(he&&ct!==null&&e.mode&1&&!(e.flags&128))lg(),ii(),e.flags|=98560,s=!1;else if(s=el(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[Zt]=e}else ii(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),s=!1}else Bt!==null&&(Qu(Bt),Bt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ce.current&1?Se===0&&(Se=3):Nc())),e.updateQueue!==null&&(e.flags|=4),He(e),null);case 4:return li(),Wu(t,e),t===null&&fs(e.stateNode.containerInfo),He(e),null;case 10:return fc(e.type._context),He(e),null;case 17:return it(e.type)&&eo(),He(e),null;case 19:if(ue(ce),s=e.memoizedState,s===null)return He(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Ti(s,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=oo(t),l!==null){for(e.flags|=128,Ti(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return se(ce,ce.current&1|2),e.child}t=t.sibling}s.tail!==null&&ve()>ai&&(e.flags|=128,r=!0,Ti(s,!1),e.lanes=4194304)}else{if(!r)if(t=oo(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ti(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!he)return He(e),null}else 2*ve()-s.renderingStartTime>ai&&n!==1073741824&&(e.flags|=128,r=!0,Ti(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ve(),e.sibling=null,n=ce.current,se(ce,r?n&1|2:n&1),e):(He(e),null);case 22:case 23:return Tc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?at&1073741824&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Zx(t,e){switch(ac(e),e.tag){case 1:return it(e.type)&&eo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return li(),ue(rt),ue(Ke),yc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gc(e),null;case 13:if(ue(ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));ii()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ue(ce),null;case 4:return li(),null;case 10:return fc(e.type._context),null;case 22:case 23:return Tc(),null;case 24:return null;default:return null}}var rl=!1,Ve=!1,ew=typeof WeakSet=="function"?WeakSet:Set,R=null;function Hr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ge(t,e,r)}else n.current=null}function Vu(t,e,n){try{n()}catch(r){ge(t,e,r)}}var cd=!1;function tw(t,e){if(Eu=Ql,t=qm(),lc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,h=0,c=t,f=null;t:for(;;){for(var d;c!==n||i!==0&&c.nodeType!==3||(o=l+i),c!==s||r!==0&&c.nodeType!==3||(a=l+r),c.nodeType===3&&(l+=c.nodeValue.length),(d=c.firstChild)!==null;)f=c,c=d;for(;;){if(c===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++h===r&&(a=l),(d=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=d}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mu={focusedElem:t,selectionRange:n},Ql=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:Lt(e.type,y),w);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(k){ge(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return m=cd,cd=!1,m}function Gi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Vu(e,n,s)}i=i.next}while(i!==r)}}function Vo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Vg(t){var e=t.alternate;e!==null&&(t.alternate=null,Vg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zt],delete e[ps],delete e[Ou],delete e[Fx],delete e[jx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ug(t){return t.tag===5||t.tag===3||t.tag===4}function fd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ug(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $u(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zl));else if(r!==4&&(t=t.child,t!==null))for($u(t,e,n),t=t.sibling;t!==null;)$u(t,e,n),t=t.sibling}function Ku(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ku(t,e,n),t=t.sibling;t!==null;)Ku(t,e,n),t=t.sibling}var Oe=null,Rt=!1;function Cn(t,e,n){for(n=n.child;n!==null;)$g(t,e,n),n=n.sibling}function $g(t,e,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Bo,n)}catch{}switch(n.tag){case 5:Ve||Hr(n,e);case 6:var r=Oe,i=Rt;Oe=null,Cn(t,e,n),Oe=r,Rt=i,Oe!==null&&(Rt?(t=Oe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(Rt?(t=Oe,n=n.stateNode,t.nodeType===8?ba(t.parentNode,n):t.nodeType===1&&ba(t,n),us(t)):ba(Oe,n.stateNode));break;case 4:r=Oe,i=Rt,Oe=n.stateNode.containerInfo,Rt=!0,Cn(t,e,n),Oe=r,Rt=i;break;case 0:case 11:case 14:case 15:if(!Ve&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Vu(n,e,l),i=i.next}while(i!==r)}Cn(t,e,n);break;case 1:if(!Ve&&(Hr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ge(n,e,o)}Cn(t,e,n);break;case 21:Cn(t,e,n);break;case 22:n.mode&1?(Ve=(r=Ve)||n.memoizedState!==null,Cn(t,e,n),Ve=r):Cn(t,e,n);break;default:Cn(t,e,n)}}function dd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ew),e.forEach(function(r){var i=hw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Oe=o.stateNode,Rt=!1;break e;case 3:Oe=o.stateNode.containerInfo,Rt=!0;break e;case 4:Oe=o.stateNode.containerInfo,Rt=!0;break e}o=o.return}if(Oe===null)throw Error(M(160));$g(s,l,i),Oe=null,Rt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ge(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Kg(e,t),e=e.sibling}function Kg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pt(e,t),qt(t),r&4){try{Gi(3,t,t.return),Vo(3,t)}catch(y){ge(t,t.return,y)}try{Gi(5,t,t.return)}catch(y){ge(t,t.return,y)}}break;case 1:Pt(e,t),qt(t),r&512&&n!==null&&Hr(n,n.return);break;case 5:if(Pt(e,t),qt(t),r&512&&n!==null&&Hr(n,n.return),t.flags&32){var i=t.stateNode;try{ss(i,"")}catch(y){ge(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&pm(i,s),gu(o,l);var u=gu(o,s);for(l=0;l<a.length;l+=2){var h=a[l],c=a[l+1];h==="style"?xm(i,c):h==="dangerouslySetInnerHTML"?ym(i,c):h==="children"?ss(i,c):qh(i,h,c,u)}switch(o){case"input":cu(i,s);break;case"textarea":mm(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Kr(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?Kr(i,!!s.multiple,s.defaultValue,!0):Kr(i,!!s.multiple,s.multiple?[]:"",!1))}i[ps]=s}catch(y){ge(t,t.return,y)}}break;case 6:if(Pt(e,t),qt(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){ge(t,t.return,y)}}break;case 3:if(Pt(e,t),qt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{us(e.containerInfo)}catch(y){ge(t,t.return,y)}break;case 4:Pt(e,t),qt(t);break;case 13:Pt(e,t),qt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ec=ve())),r&4&&dd(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ve=(u=Ve)||h,Pt(e,t),Ve=u):Pt(e,t),qt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(R=t,h=t.child;h!==null;){for(c=R=h;R!==null;){switch(f=R,d=f.child,f.tag){case 0:case 11:case 14:case 15:Gi(4,f,f.return);break;case 1:Hr(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){ge(r,n,y)}}break;case 5:Hr(f,f.return);break;case 22:if(f.memoizedState!==null){md(c);continue}}d!==null?(d.return=f,R=d):md(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=c.stateNode,a=c.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=vm("display",l))}catch(y){ge(t,t.return,y)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(y){ge(t,t.return,y)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Pt(e,t),qt(t),r&4&&dd(t);break;case 21:break;default:Pt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ug(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ss(i,""),r.flags&=-33);var s=fd(t);Ku(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=fd(t);$u(t,o,l);break;default:throw Error(M(161))}}catch(a){ge(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nw(t,e,n){R=t,qg(t)}function qg(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||rl;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Ve;o=rl;var u=Ve;if(rl=l,(Ve=a)&&!u)for(R=i;R!==null;)l=R,a=l.child,l.tag===22&&l.memoizedState!==null?gd(i):a!==null?(a.return=l,R=a):gd(i);for(;s!==null;)R=s,qg(s),s=s.sibling;R=i,rl=o,Ve=u}pd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):pd(t)}}function pd(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ve||Vo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ve)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Xf(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xf(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&us(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ve||e.flags&512&&Uu(e)}catch(f){ge(e,e.return,f)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function md(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function gd(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vo(4,e)}catch(a){ge(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ge(e,i,a)}}var s=e.return;try{Uu(e)}catch(a){ge(e,s,a)}break;case 5:var l=e.return;try{Uu(e)}catch(a){ge(e,l,a)}}}catch(a){ge(e,e.return,a)}if(e===t){R=null;break}var o=e.sibling;if(o!==null){o.return=e.return,R=o;break}R=e.return}}var rw=Math.ceil,ho=Sn.ReactCurrentDispatcher,Ac=Sn.ReactCurrentOwner,Ct=Sn.ReactCurrentBatchConfig,J=0,Me=null,we=null,Fe=0,at=0,Wr=er(0),Se=0,ws=null,vr=0,Uo=0,bc=0,Yi=null,et=null,Ec=0,ai=1/0,un=null,co=!1,qu=null,Hn=null,il=!1,Dn=null,fo=0,Qi=0,Gu=null,Bl=-1,Il=0;function Ye(){return J&6?ve():Bl!==-1?Bl:Bl=ve()}function Wn(t){return t.mode&1?J&2&&Fe!==0?Fe&-Fe:_x.transition!==null?(Il===0&&(Il=Pm()),Il):(t=te,t!==0||(t=window.event,t=t===void 0?16:jm(t.type)),t):1}function jt(t,e,n,r){if(50<Qi)throw Qi=0,Gu=null,Error(M(185));Ls(t,n,r),(!(J&2)||t!==Me)&&(t===Me&&(!(J&2)&&(Uo|=n),Se===4&&Nn(t,Fe)),st(t,r),n===1&&J===0&&!(e.mode&1)&&(ai=ve()+500,_o&&tr()))}function st(t,e){var n=t.callbackNode;_1(t,e);var r=Yl(t,t===Me?Fe:0);if(r===0)n!==null&&bf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bf(n),e===1)t.tag===0?zx(yd.bind(null,t)):rg(yd.bind(null,t)),Bx(function(){!(J&6)&&tr()}),n=null;else{switch(Dm(r)){case 1:n=Xh;break;case 4:n=Nm;break;case 16:n=Gl;break;case 536870912:n=Om;break;default:n=Gl}n=t0(n,Gg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Gg(t,e){if(Bl=-1,Il=0,J&6)throw Error(M(327));var n=t.callbackNode;if(Jr()&&t.callbackNode!==n)return null;var r=Yl(t,t===Me?Fe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=po(t,r);else{e=r;var i=J;J|=2;var s=Qg();(Me!==t||Fe!==e)&&(un=null,ai=ve()+500,fr(t,e));do try{lw();break}catch(o){Yg(t,o)}while(!0);cc(),ho.current=s,J=i,we!==null?e=0:(Me=null,Fe=0,e=Se)}if(e!==0){if(e===2&&(i=ku(t),i!==0&&(r=i,e=Yu(t,i))),e===1)throw n=ws,fr(t,0),Nn(t,r),st(t,ve()),n;if(e===6)Nn(t,r);else{if(i=t.current.alternate,!(r&30)&&!iw(i)&&(e=po(t,r),e===2&&(s=ku(t),s!==0&&(r=s,e=Yu(t,s))),e===1))throw n=ws,fr(t,0),Nn(t,r),st(t,ve()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:sr(t,et,un);break;case 3:if(Nn(t,r),(r&130023424)===r&&(e=Ec+500-ve(),10<e)){if(Yl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ye(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Nu(sr.bind(null,t,et,un),e);break}sr(t,et,un);break;case 4:if(Nn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Ft(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rw(r/1960))-r,10<r){t.timeoutHandle=Nu(sr.bind(null,t,et,un),r);break}sr(t,et,un);break;case 5:sr(t,et,un);break;default:throw Error(M(329))}}}return st(t,ve()),t.callbackNode===n?Gg.bind(null,t):null}function Yu(t,e){var n=Yi;return t.current.memoizedState.isDehydrated&&(fr(t,e).flags|=256),t=po(t,e),t!==2&&(e=et,et=n,e!==null&&Qu(e)),t}function Qu(t){et===null?et=t:et.push.apply(et,t)}function iw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nn(t,e){for(e&=~bc,e&=~Uo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ft(e),r=1<<n;t[n]=-1,e&=~r}}function yd(t){if(J&6)throw Error(M(327));Jr();var e=Yl(t,0);if(!(e&1))return st(t,ve()),null;var n=po(t,e);if(t.tag!==0&&n===2){var r=ku(t);r!==0&&(e=r,n=Yu(t,r))}if(n===1)throw n=ws,fr(t,0),Nn(t,e),st(t,ve()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sr(t,et,un),st(t,ve()),null}function Mc(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(ai=ve()+500,_o&&tr())}}function xr(t){Dn!==null&&Dn.tag===0&&!(J&6)&&Jr();var e=J;J|=1;var n=Ct.transition,r=te;try{if(Ct.transition=null,te=1,t)return t()}finally{te=r,Ct.transition=n,J=e,!(J&6)&&tr()}}function Tc(){at=Wr.current,ue(Wr)}function fr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Rx(n)),we!==null)for(n=we.return;n!==null;){var r=n;switch(ac(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eo();break;case 3:li(),ue(rt),ue(Ke),yc();break;case 5:gc(r);break;case 4:li();break;case 13:ue(ce);break;case 19:ue(ce);break;case 10:fc(r.type._context);break;case 22:case 23:Tc()}n=n.return}if(Me=t,we=t=Vn(t.current,null),Fe=at=e,Se=0,ws=null,bc=Uo=vr=0,et=Yi=null,ar!==null){for(e=0;e<ar.length;e++)if(n=ar[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}ar=null}return t}function Yg(t,e){do{var n=we;try{if(cc(),Dl.current=uo,ao){for(var r=de.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ao=!1}if(yr=0,be=ke=de=null,qi=!1,ys=0,Ac.current=null,n===null||n.return===null){Se=1,ws=e,we=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=Fe,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=o,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=id(l);if(d!==null){d.flags&=-257,sd(d,l,o,s,e),d.mode&1&&rd(s,u,e),e=d,a=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(a),e.updateQueue=y}else m.add(a);break e}else{if(!(e&1)){rd(s,u,e),Nc();break e}a=Error(M(426))}}else if(he&&o.mode&1){var w=id(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),sd(w,l,o,s,e),uc(oi(a,o));break e}}s=a=oi(a,o),Se!==4&&(Se=2),Yi===null?Yi=[s]:Yi.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Dg(s,a,e);Jf(s,p);break e;case 1:o=a;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Hn===null||!Hn.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=Lg(s,o,e);Jf(s,k);break e}}s=s.return}while(s!==null)}Xg(n)}catch(S){e=S,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function Qg(){var t=ho.current;return ho.current=uo,t===null?uo:t}function Nc(){(Se===0||Se===3||Se===2)&&(Se=4),Me===null||!(vr&268435455)&&!(Uo&268435455)||Nn(Me,Fe)}function po(t,e){var n=J;J|=2;var r=Qg();(Me!==t||Fe!==e)&&(un=null,fr(t,e));do try{sw();break}catch(i){Yg(t,i)}while(!0);if(cc(),J=n,ho.current=r,we!==null)throw Error(M(261));return Me=null,Fe=0,Se}function sw(){for(;we!==null;)Jg(we)}function lw(){for(;we!==null&&!P1();)Jg(we)}function Jg(t){var e=e0(t.alternate,t,at);t.memoizedProps=t.pendingProps,e===null?Xg(t):we=e,Ac.current=null}function Xg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Zx(n,e),n!==null){n.flags&=32767,we=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,we=null;return}}else if(n=Xx(n,e,at),n!==null){we=n;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);Se===0&&(Se=5)}function sr(t,e,n){var r=te,i=Ct.transition;try{Ct.transition=null,te=1,ow(t,e,n,r)}finally{Ct.transition=i,te=r}return null}function ow(t,e,n,r){do Jr();while(Dn!==null);if(J&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(H1(t,s),t===Me&&(we=Me=null,Fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||il||(il=!0,t0(Gl,function(){return Jr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ct.transition,Ct.transition=null;var l=te;te=1;var o=J;J|=4,Ac.current=null,tw(t,n),Kg(n,t),Mx(Mu),Ql=!!Eu,Mu=Eu=null,t.current=n,nw(n),D1(),J=o,te=l,Ct.transition=s}else t.current=n;if(il&&(il=!1,Dn=t,fo=i),s=t.pendingLanes,s===0&&(Hn=null),B1(n.stateNode),st(t,ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(co)throw co=!1,t=qu,qu=null,t;return fo&1&&t.tag!==0&&Jr(),s=t.pendingLanes,s&1?t===Gu?Qi++:(Qi=0,Gu=t):Qi=0,tr(),null}function Jr(){if(Dn!==null){var t=Dm(fo),e=Ct.transition,n=te;try{if(Ct.transition=null,te=16>t?16:t,Dn===null)var r=!1;else{if(t=Dn,Dn=null,fo=0,J&6)throw Error(M(331));var i=J;for(J|=4,R=t.current;R!==null;){var s=R,l=s.child;if(R.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(R=u;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:Gi(8,h,s)}var c=h.child;if(c!==null)c.return=h,R=c;else for(;R!==null;){h=R;var f=h.sibling,d=h.return;if(Vg(h),h===u){R=null;break}if(f!==null){f.return=d,R=f;break}R=d}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}R=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,R=l;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gi(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,R=p;break e}R=s.return}}var g=t.current;for(R=g;R!==null;){l=R;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,R=v;else e:for(l=g;R!==null;){if(o=R,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Vo(9,o)}}catch(S){ge(o,o.return,S)}if(o===l){R=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,R=k;break e}R=o.return}}if(J=i,tr(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Bo,t)}catch{}r=!0}return r}finally{te=n,Ct.transition=e}}return!1}function vd(t,e,n){e=oi(n,e),e=Dg(t,e,1),t=_n(t,e,1),e=Ye(),t!==null&&(Ls(t,1,e),st(t,e))}function ge(t,e,n){if(t.tag===3)vd(t,t,n);else for(;e!==null;){if(e.tag===3){vd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hn===null||!Hn.has(r))){t=oi(n,t),t=Lg(e,t,1),e=_n(e,t,1),t=Ye(),e!==null&&(Ls(e,1,t),st(e,t));break}}e=e.return}}function aw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ye(),t.pingedLanes|=t.suspendedLanes&n,Me===t&&(Fe&n)===n&&(Se===4||Se===3&&(Fe&130023424)===Fe&&500>ve()-Ec?fr(t,0):bc|=n),st(t,e)}function Zg(t,e){e===0&&(t.mode&1?(e=Gs,Gs<<=1,!(Gs&130023424)&&(Gs=4194304)):e=1);var n=Ye();t=xn(t,e),t!==null&&(Ls(t,e,n),st(t,n))}function uw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Zg(t,n)}function hw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),Zg(t,n)}var e0;e0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rt.current)nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nt=!1,Jx(t,e,n);nt=!!(t.flags&131072)}else nt=!1,he&&e.flags&1048576&&ig(e,ro,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rl(t,e),t=e.pendingProps;var i=ri(e,Ke.current);Qr(e,n),i=xc(null,e,r,t,i,n);var s=wc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,it(r)?(s=!0,to(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pc(e),i.updater=Wo,e.stateNode=i,i._reactInternals=e,Iu(e,r,t,n),e=zu(null,e,r,!0,s,n)):(e.tag=0,he&&s&&oc(e),Ge(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=fw(r),t=Lt(r,t),i){case 0:e=ju(null,e,r,t,n);break e;case 1:e=ad(null,e,r,t,n);break e;case 11:e=ld(null,e,r,t,n);break e;case 14:e=od(null,e,r,Lt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),ju(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),ad(t,e,r,i,n);case 3:e:{if(Fg(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,hg(t,e),lo(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=oi(Error(M(423)),e),e=ud(t,e,r,n,i);break e}else if(r!==i){i=oi(Error(M(424)),e),e=ud(t,e,r,n,i);break e}else for(ct=zn(e.stateNode.containerInfo.firstChild),ft=e,he=!0,Bt=null,n=ag(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ii(),r===i){e=wn(t,e,n);break e}Ge(t,e,r,n)}e=e.child}return e;case 5:return cg(e),t===null&&Lu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Tu(r,i)?l=null:s!==null&&Tu(r,s)&&(e.flags|=32),Ig(t,e),Ge(t,e,l,n),e.child;case 6:return t===null&&Lu(e),null;case 13:return jg(t,e,n);case 4:return mc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=si(e,null,r,n):Ge(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),ld(t,e,r,i,n);case 7:return Ge(t,e,e.pendingProps,n),e.child;case 8:return Ge(t,e,e.pendingProps.children,n),e.child;case 12:return Ge(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,se(io,r._currentValue),r._currentValue=l,s!==null)if(zt(s.value,l)){if(s.children===i.children&&!rt.current){e=wn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=pn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ru(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Ru(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Ge(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qr(e,n),i=Mt(i),r=r(i),e.flags|=1,Ge(t,e,r,n),e.child;case 14:return r=e.type,i=Lt(r,e.pendingProps),i=Lt(r.type,i),od(t,e,r,i,n);case 15:return Rg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Rl(t,e),e.tag=1,it(r)?(t=!0,to(e)):t=!1,Qr(e,n),Pg(e,r,i),Iu(e,r,i,n),zu(null,e,r,!0,t,n);case 19:return zg(t,e,n);case 22:return Bg(t,e,n)}throw Error(M(156,e.tag))};function t0(t,e){return Tm(t,e)}function cw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(t,e,n,r){return new cw(t,e,n,r)}function Oc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fw(t){if(typeof t=="function")return Oc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yh)return 11;if(t===Qh)return 14}return 2}function Vn(t,e){var n=t.alternate;return n===null?(n=St(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fl(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")Oc(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Dr:return dr(n.children,i,s,e);case Gh:l=8,i|=8;break;case lu:return t=St(12,n,e,i|2),t.elementType=lu,t.lanes=s,t;case ou:return t=St(13,n,e,i),t.elementType=ou,t.lanes=s,t;case au:return t=St(19,n,e,i),t.elementType=au,t.lanes=s,t;case cm:return $o(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case um:l=10;break e;case hm:l=9;break e;case Yh:l=11;break e;case Qh:l=14;break e;case An:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=St(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function dr(t,e,n,r){return t=St(7,t,r,e),t.lanes=n,t}function $o(t,e,n,r){return t=St(22,t,r,e),t.elementType=cm,t.lanes=n,t.stateNode={isHidden:!1},t}function La(t,e,n){return t=St(6,t,null,e),t.lanes=n,t}function Ra(t,e,n){return e=St(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pa(0),this.expirationTimes=pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pa(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pc(t,e,n,r,i,s,l,o,a){return t=new dw(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=St(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pc(s),t}function pw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function n0(t){if(!t)return Kn;t=t._reactInternals;e:{if(Er(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(it(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(it(n))return ng(t,n,e)}return e}function r0(t,e,n,r,i,s,l,o,a){return t=Pc(n,r,!0,t,i,s,l,o,a),t.context=n0(null),n=t.current,r=Ye(),i=Wn(n),s=pn(r,i),s.callback=e??null,_n(n,s,i),t.current.lanes=i,Ls(t,i,r),st(t,r),t}function Ko(t,e,n,r){var i=e.current,s=Ye(),l=Wn(i);return n=n0(n),e.context===null?e.context=n:e.pendingContext=n,e=pn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_n(i,e,l),t!==null&&(jt(t,i,l,s),Pl(t,i,l)),l}function mo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dc(t,e){xd(t,e),(t=t.alternate)&&xd(t,e)}function mw(){return null}var i0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lc(t){this._internalRoot=t}qo.prototype.render=Lc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Ko(t,e,null,null)};qo.prototype.unmount=Lc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xr(function(){Ko(null,t,null,null)}),e[vn]=null}};function qo(t){this._internalRoot=t}qo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tn.length&&e!==0&&e<Tn[n].priority;n++);Tn.splice(n,0,t),n===0&&Fm(t)}};function Rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Go(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wd(){}function gw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=mo(l);s.call(u)}}var l=r0(e,r,t,0,null,!1,!1,"",wd);return t._reactRootContainer=l,t[vn]=l.current,fs(t.nodeType===8?t.parentNode:t),xr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=mo(a);o.call(u)}}var a=Pc(t,0,!1,null,null,!1,!1,"",wd);return t._reactRootContainer=a,t[vn]=a.current,fs(t.nodeType===8?t.parentNode:t),xr(function(){Ko(e,a,n,r)}),a}function Yo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=mo(l);o.call(a)}}Ko(e,l,t,i)}else l=gw(n,e,t,i,r);return mo(l)}Lm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fi(e.pendingLanes);n!==0&&(Zh(e,n|1),st(e,ve()),!(J&6)&&(ai=ve()+500,tr()))}break;case 13:xr(function(){var r=xn(t,1);if(r!==null){var i=Ye();jt(r,t,1,i)}}),Dc(t,1)}};ec=function(t){if(t.tag===13){var e=xn(t,134217728);if(e!==null){var n=Ye();jt(e,t,134217728,n)}Dc(t,134217728)}};Rm=function(t){if(t.tag===13){var e=Wn(t),n=xn(t,e);if(n!==null){var r=Ye();jt(n,t,e,r)}Dc(t,e)}};Bm=function(){return te};Im=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};vu=function(t,e,n){switch(e){case"input":if(cu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zo(r);if(!i)throw Error(M(90));dm(r),cu(r,i)}}}break;case"textarea":mm(t,n);break;case"select":e=n.value,e!=null&&Kr(t,!!n.multiple,e,!1)}};Sm=Mc;Cm=xr;var yw={usingClientEntryPoint:!1,Events:[Bs,Ir,zo,wm,km,Mc]},Ni={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vw={bundleType:Ni.bundleType,version:Ni.version,rendererPackageName:Ni.rendererPackageName,rendererConfig:Ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Em(t),t===null?null:t.stateNode},findFiberByHostInstance:Ni.findFiberByHostInstance||mw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{Bo=sl.inject(vw),sn=sl}catch{}}gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yw;gt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rc(e))throw Error(M(200));return pw(t,e,null,n)};gt.createRoot=function(t,e){if(!Rc(t))throw Error(M(299));var n=!1,r="",i=i0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pc(t,1,!1,null,null,n,!1,r,i),t[vn]=e.current,fs(t.nodeType===8?t.parentNode:t),new Lc(e)};gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=Em(e),t=t===null?null:t.stateNode,t};gt.flushSync=function(t){return xr(t)};gt.hydrate=function(t,e,n){if(!Go(e))throw Error(M(200));return Yo(null,t,e,!0,n)};gt.hydrateRoot=function(t,e,n){if(!Rc(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=i0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=r0(e,null,t,1,n??null,i,!1,s,l),t[vn]=e.current,fs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new qo(e)};gt.render=function(t,e,n){if(!Go(e))throw Error(M(200));return Yo(null,t,e,!1,n)};gt.unmountComponentAtNode=function(t){if(!Go(t))throw Error(M(40));return t._reactRootContainer?(xr(function(){Yo(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};gt.unstable_batchedUpdates=Mc;gt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Go(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Yo(t,e,n,!1,r)};gt.version="18.3.1-next-f1338f8080-20240426";function s0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s0)}catch(t){console.error(t)}}s0(),sm.exports=gt;var xw=sm.exports,kd=xw;iu.createRoot=kd.createRoot,iu.hydrateRoot=kd.hydrateRoot;let Ju=[],l0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?l0:Ju).push(n=n+t[e])})();function ww(t){if(t<768)return!1;for(let e=0,n=Ju.length;;){let r=e+n>>1;if(t<Ju[r])n=r;else if(t>=l0[r])e=r+1;else return!0;if(e==n)return!1}}function Sd(t){return t>=127462&&t<=127487}const Cd=8205;function kw(t,e,n=!0,r=!0){return(n?o0:Sw)(t,e,r)}function o0(t,e,n){if(e==t.length)return e;e&&a0(t.charCodeAt(e))&&u0(t.charCodeAt(e-1))&&e--;let r=Ba(t,e);for(e+=Ad(r);e<t.length;){let i=Ba(t,e);if(r==Cd||i==Cd||n&&ww(i))e+=Ad(i),r=i;else if(Sd(i)){let s=0,l=e-2;for(;l>=0&&Sd(Ba(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function Sw(t,e,n){for(;e>0;){let r=o0(t,e-2,n);if(r<e)return r;e--}return 0}function Ba(t,e){let n=t.charCodeAt(e);if(!u0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return a0(r)?(n-55296<<10)+(r-56320)+65536:n}function a0(t){return t>=56320&&t<57344}function u0(t){return t>=55296&&t<56320}function Ad(t){return t<65536?1:2}class Q{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=ui(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),en.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=ui(this,e,n);let r=[];return this.decompose(e,n,r,0),en.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Ji(this),s=new Ji(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new Ji(this,e)}iterRange(e,n=this.length){return new h0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new c0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Q.empty:e.length<=32?new ye(e):en.from(ye.split(e,[]))}}class ye extends Q{constructor(e,n=Cw(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new Aw(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new ye(bd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=jl(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new ye(o,l.length+s.length));else{let a=o.length>>1;r.push(new ye(o.slice(0,a)),new ye(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof ye))return super.replace(e,n,r);[e,n]=ui(this,e,n);let i=jl(this.text,jl(r.text,bd(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new ye(i,s):en.from(ye.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=ui(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new ye(r,i)),r=[],i=-1);return i>-1&&n.push(new ye(r,i)),n}}class en extends Q{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=ui(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let h=this.children.slice();return h[i]=a,new en(h,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=ui(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof en))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let m of e)m.flatten(d);return new ye(d,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,h=[];function c(d){let m;if(d.lines>s&&d instanceof en)for(let y of d.children)c(y);else d.lines>l&&(a>l||!a)?(f(),o.push(d)):d instanceof ye&&a&&(m=h[h.length-1])instanceof ye&&d.lines+m.lines<=32?(a+=d.lines,u+=d.length+1,h[h.length-1]=new ye(m.text.concat(d.text),m.length+1+d.length)):(a+d.lines>i&&f(),a+=d.lines,u+=d.length+1,h.push(d))}function f(){a!=0&&(o.push(h.length==1?h[0]:en.from(h,u)),u=-1,a=h.length=0)}for(let d of e)c(d);return f(),o.length==1?o[0]:new en(o,n)}}Q.empty=new ye([""],0);function Cw(t){let e=-1;for(let n of t)e+=n.length+1;return e}function jl(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function bd(t,e,n){return jl(t,[""],e,n)}class Ji{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof ye?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof ye?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof ye){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof ye?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class h0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Ji(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class c0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Q.prototype[Symbol.iterator]=function(){return this.iter()},Ji.prototype[Symbol.iterator]=h0.prototype[Symbol.iterator]=c0.prototype[Symbol.iterator]=function(){return this});class Aw{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function ui(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Be(t,e,n=!0,r=!0){return kw(t,e,n,r)}function bw(t){return t>=56320&&t<57344}function Ew(t){return t>=55296&&t<56320}function f0(t,e){let n=t.charCodeAt(e);if(!Ew(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return bw(r)?(n-55296<<10)+(r-56320)+65536:n}function Mw(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function d0(t){return t<65536?1:2}const Xu=/\r\n?|\n/;var ht=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(ht||(ht={}));class mn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){Zu(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new mn(e)}composeDesc(e){return this.empty?e:e.empty?this:p0(this,e)}mapDesc(e,n=!1){return e.empty?this:eh(this,e,n)}mapPos(e,n=-1,r=ht.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=ht.Simple&&u>=e&&(r==ht.TrackDel&&i<e&&u>e||r==ht.TrackBefore&&i<e||r==ht.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new mn(e)}static create(e){return new mn(e)}}class Ee extends mn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Zu(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return eh(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(Q.empty);r.push(l?e.slice(s,s+l):Q.empty)}s+=l}return new Ee(n,r)}compose(e){return this.empty?e:e.empty?this:p0(this,e,!0)}map(e,n=!1){return e.empty?this:eh(this,e,n,!0)}iterChanges(e,n=!1){Zu(this,e,n)}get desc(){return mn.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new ks(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,a-o);We(i,h,-1);let c=s.ins==-1?-1:s.off==0?s.ins:0;We(n,h,c),c>0&&Ln(r,n,s.text),s.forward(h),o+=h}let u=e[l++];for(;o<u;){if(s.done)break e;let h=Math.min(s.len,u-o);We(n,h,-1),We(i,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),o+=h}}return{changes:new Ee(n,r),filtered:mn.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(h=!1){if(!h&&!i.length)return;l<n&&We(i,n-l,-1);let c=new Ee(i,s);o=o?o.compose(c.map(o)):c,i=[],s=[],l=0}function u(h){if(Array.isArray(h))for(let c of h)u(c);else if(h instanceof Ee){if(h.length!=n)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${n})`);a(),o=o?o.compose(h.map(o)):h}else{let{from:c,to:f=c,insert:d}=h;if(c>f||c<0||f>n)throw new RangeError(`Invalid change range ${c} to ${f} (in doc of length ${n})`);let m=d?typeof d=="string"?Q.of(d.split(r||Xu)):d:Q.empty,y=m.length;if(c==f&&y==0)return;c<l&&a(),c>l&&We(i,c-l,-1),We(i,f-c,y),Ln(s,i,m),l=f}}return u(e),a(!o),o}static empty(e){return new Ee(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(Q.empty);r[i]=Q.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Ee(n,r)}static createSet(e,n){return new Ee(e,n)}}function We(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Ln(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Q.empty);t.push(n)}}function Zu(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,h=s,c=Q.empty;for(;u+=o,h+=a,a&&r&&(c=c.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,h,c),i=u,s=h}}}function eh(t,e,n,r=!1){let i=[],s=r?[]:null,l=new ks(t),o=new ks(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);We(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(We(i,o.ins,-1);u;){let h=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=h&&(We(i,0,l.ins),s&&Ln(s,i,l.text),a=l.i),l.forward(h),u-=h}o.next()}else if(l.ins>=0){let u=0,h=l.len;for(;h;)if(o.ins==-1){let c=Math.min(h,o.len);u+=c,h-=c,o.forward(c)}else if(o.ins==0&&o.len<h)h-=o.len,o.next();else break;We(i,u,a<l.i?l.ins:0),s&&a<l.i&&Ln(s,i,l.text),a=l.i,l.forward(l.len-h)}else{if(l.done&&o.done)return s?Ee.createSet(i,s):mn.create(i);throw new Error("Mismatched change set lengths")}}}function p0(t,e,n=!1){let r=[],i=n?[]:null,s=new ks(t),l=new ks(e);for(let o=!1;;){if(s.done&&l.done)return i?Ee.createSet(r,i):mn.create(r);if(s.ins==0)We(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)We(r,0,l.ins,o),i&&Ln(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let h=l.ins==-1?-1:l.off?0:l.ins;We(r,a,h,o),i&&h&&Ln(i,r,l.text)}else l.ins==-1?(We(r,s.off?0:s.len,a,o),i&&Ln(i,r,s.textBit(a))):(We(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Ln(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class ks{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Q.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Q.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class hr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new hr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return E.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return E.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return E.range(e.anchor,e.head)}static create(e,n,r){return new hr(e,n,r)}}class E{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:E.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new E([this.main],0)}addRange(e,n=!0){return E.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,E.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new E(e.ranges.map(n=>hr.fromJSON(n)),e.main)}static single(e,n=e){return new E([E.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return E.normalized(e.slice(),n);r=s.to}return new E(e,n)}static cursor(e,n=0,r,i){return hr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?hr.create(n,e,48|s):hr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?E.range(a,o):E.range(o,a))}}return new E(e,n)}}function m0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Bc=0;class F{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Bc++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new F(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Ic),!!e.static,e.enables)}of(e){return new zl([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new zl(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new zl(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Ic(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class zl{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Bc++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,h=[];for(let c of this.dependencies)c=="doc"?a=!0:c=="selection"?u=!0:((n=e[c.id])!==null&&n!==void 0?n:1)&1||h.push(e[c.id]);return{create(c){return c.values[l]=r(c),1},update(c,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||th(c,h)){let d=r(c);if(o?!Ed(d,c.values[l],i):!i(d,c.values[l]))return c.values[l]=d,1}return 0},reconfigure:(c,f)=>{let d,m=f.config.address[s];if(m!=null){let y=yo(f,m);if(this.dependencies.every(w=>w instanceof F?f.facet(w)===c.facet(w):w instanceof Wt?f.field(w,!1)==c.field(w,!1):!0)||(o?Ed(d=r(c),y,i):i(d=r(c),y)))return c.values[l]=y,0}else d=r(c);return c.values[l]=d,1}}}}function Ed(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function th(t,e){let n=!1;for(let r of e)Xi(t,r)&1&&(n=!0);return n}function Tw(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let h=0;h<r.length;h++){let c=yo(a,r[h]);if(i[h]==2)for(let f of c)u.push(f);else u.push(c)}return e.combine(u)}return{create(a){for(let u of r)Xi(a,u);return a.values[l]=o(a),1},update(a,u){if(!th(a,s))return 0;let h=o(a);return e.compare(h,a.values[l])?0:(a.values[l]=h,1)},reconfigure(a,u){let h=th(a,r),c=u.config.facets[e.id],f=u.facet(e);if(c&&!h&&Ic(n,c))return a.values[l]=f,0;let d=o(a);return e.compare(d,f)?(a.values[l]=f,0):(a.values[l]=d,1)}}}const ll=F.define({static:!0});class Wt{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Wt(Bc++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(ll).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(ll),l=i.facet(ll),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,ll.of({field:this,create:e})]}get extension(){return this}}const lr={lowest:4,low:3,default:2,high:1,highest:0};function Oi(t){return e=>new g0(e,t)}const Qo={highest:Oi(lr.highest),high:Oi(lr.high),default:Oi(lr.default),low:Oi(lr.low),lowest:Oi(lr.lowest)};class g0{constructor(e,n){this.inner=e,this.prec=n}}class Jo{of(e){return new nh(this,e)}reconfigure(e){return Jo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class nh{constructor(e,n){this.compartment=e,this.inner=n}}class go{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of Nw(e,n,l))f instanceof Wt?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(d=>f.slot(d));let h=r==null?void 0:r.config.facets;for(let f in s){let d=s[f],m=d[0].facet,y=h&&h[f]||[];if(d.every(w=>w.type==0))if(o[m.id]=a.length<<1|1,Ic(y,d))a.push(r.facet(m));else{let w=m.combine(d.map(p=>p.value));a.push(r&&m.compare(w,r.facet(m))?r.facet(m):w)}else{for(let w of d)w.type==0?(o[w.id]=a.length<<1|1,a.push(w.value)):(o[w.id]=u.length<<1,u.push(p=>w.dynamicSlot(p)));o[m.id]=u.length<<1,u.push(w=>Tw(w,m,d))}}let c=u.map(f=>f(o));return new go(e,l,c,o,a,s)}}function Nw(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof nh&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof nh){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof g0)s(l.inner,l.prec);else if(l instanceof Wt)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof zl)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,lr.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,lr.default),r.reduce((l,o)=>l.concat(o))}function Xi(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function yo(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const y0=F.define(),rh=F.define({combine:t=>t.some(e=>e),static:!0}),v0=F.define({combine:t=>t.length?t[0]:void 0,static:!0}),x0=F.define(),w0=F.define(),k0=F.define(),S0=F.define({combine:t=>t.length?t[0]:!1});class xi{constructor(e,n){this.type=e,this.value=n}static define(){return new Ow}}class Ow{of(e){return new xi(this,e)}}class Pw{constructor(e){this.map=e}of(e){return new le(this,e)}}class le{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new le(this.type,n)}is(e){return this.type==e}static define(e={}){return new Pw(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}le.reconfigure=le.define();le.appendConfig=le.define();class $e{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&m0(r,n.newLength),s.some(o=>o.type==$e.time)||(this.annotations=s.concat($e.time.of(Date.now())))}static create(e,n,r,i,s,l){return new $e(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation($e.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}$e.time=xi.define();$e.userEvent=xi.define();$e.addToHistory=xi.define();$e.remote=xi.define();function Dw(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function C0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Ee.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:le.mapEffects(t.effects,i).concat(le.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function ih(t,e,n){let r=e.selection,i=Xr(e.annotations);return e.userEvent&&(i=i.concat($e.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ee?e.changes:Ee.of(e.changes||[],n,t.facet(v0)),selection:r&&(r instanceof E?r:E.single(r.anchor,r.head)),effects:Xr(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function A0(t,e,n){let r=ih(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=C0(r,ih(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=$e.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Rw(n?Lw(i):i)}function Lw(t){let e=t.startState,n=!0;for(let i of e.facet(x0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:Dw(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Ee.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=$e.create(e,i,t.selection&&t.selection.map(s),le.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(w0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof $e?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof $e?t=s[0]:t=A0(e,Xr(s),!1)}return t}function Rw(t){let e=t.startState,n=e.facet(k0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=C0(r,ih(e,s,t.changes.newLength),!0))}return r==t?t:$e.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const Bw=[];function Xr(t){return t==null?Bw:Array.isArray(t)?t:[t]}var Ie=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Ie||(Ie={}));const Iw=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let sh;try{sh=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Fw(t){if(sh)return sh.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Iw.test(n)))return!0}return!1}function jw(t){return e=>{if(!/\S/.test(e))return Ie.Space;if(Fw(e))return Ie.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Ie.Word;return Ie.Other}}class Z{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)Xi(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Xi(this,r),yo(this,r)}update(...e){return A0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(Jo.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(le.reconfigure)?(n=null,r=o.value):o.is(le.appendConfig)&&(n=null,r=Xr(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=go.resolve(r,i,this),s=new Z(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(rh)?e.newSelection:e.newSelection.asSingle();new Z(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:E.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=Xr(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),h=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(h);let c=i.mapDesc(u,!0);s.push(a.range.map(c)),i=i.compose(h),l=le.mapEffects(l,h).concat(le.mapEffects(Xr(a.effects),c))}return{changes:i,selection:E.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Ee?e:Ee.of(e,this.doc.length,this.facet(Z.lineSeparator))}toText(e){return Q.of(e.split(this.facet(Z.lineSeparator)||Xu))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Xi(this,n),yo(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Wt&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return Z.create({doc:e.doc,selection:E.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=go.resolve(e.extensions||[],new Map),r=e.doc instanceof Q?e.doc:Q.of((e.doc||"").split(n.staticFacet(Z.lineSeparator)||Xu)),i=e.selection?e.selection instanceof E?e.selection:E.single(e.selection.anchor,e.selection.head):E.single(0);return m0(i,r.length),n.staticFacet(rh)||(i=i.asSingle()),new Z(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(Z.tabSize)}get lineBreak(){return this.facet(Z.lineSeparator)||`
`}get readOnly(){return this.facet(S0)}phrase(e,...n){for(let r of this.facet(Z.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(y0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return jw(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=Be(n,l,!1);if(s(n.slice(a,l))!=Ie.Word)break;l=a}for(;o<i;){let a=Be(n,o);if(s(n.slice(o,a))!=Ie.Word)break;o=a}return l==o?null:E.range(l+r,o+r)}}Z.allowMultipleSelections=rh;Z.tabSize=F.define({combine:t=>t.length?t[0]:4});Z.lineSeparator=v0;Z.readOnly=S0;Z.phrases=F.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Z.languageData=y0;Z.changeFilter=x0;Z.transactionFilter=w0;Z.transactionExtender=k0;Jo.reconfigure=le.define();function Xo(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class hi{eq(e){return this==e}range(e,n=e){return lh.create(e,n,this)}}hi.prototype.startSide=hi.prototype.endSide=0;hi.prototype.point=!1;hi.prototype.mapMode=ht.TrackDel;let lh=class b0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new b0(e,n,r)}};function oh(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Fc{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],h=this.from[a]+e,c=this.to[a]+e,f,d;if(h==c){let m=n.mapPos(h,u.startSide,u.mapMode);if(m==null||(f=d=m,u.startSide!=u.endSide&&(d=n.mapPos(h,u.endSide),d<f)))continue}else if(f=n.mapPos(h,u.startSide),d=n.mapPos(c,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,d-f)),r.push(u),i.push(f-l),s.push(d-l))}return{mapped:r.length?new Fc(i,s,r,o):null,pos:l}}}class ee{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ee(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(oh)),this.isEmpty)return n.length?ee.of(n):this;let o=new E0(this,null,-1).goto(0),a=0,u=[],h=new wr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let c=n[a++];h.addInner(c.from,c.to,c.value)||u.push(c)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&h.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(h.addInner(o.from,o.to,o.value)||u.push(lh.create(o.from,o.to,o.value))),o.next());return h.finishInner(this.nextLayer.isEmpty&&!u.length?ee.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:h,pos:c}=a.map(o,e);h&&(i=Math.max(i,h.maxPoint),n.push(h),r.push(c))}}let s=this.nextLayer.map(e);return n.length==0?s:new ee(r,n,s||ee.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Ss.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Ss.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),o=n.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),a=Md(l,o,r),u=new Pi(l,a,s),h=new Pi(o,a,s);r.iterGaps((c,f,d)=>Td(u,c,h,f,d,i)),r.empty&&r.length==0&&Td(u,0,h,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(h=>!h.isEmpty&&n.indexOf(h)<0),l=n.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=Md(s,l),a=new Pi(s,o,0).goto(r),u=new Pi(l,o,0).goto(r);for(;;){if(a.to!=u.to||!ah(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new Pi(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let h=l.activeForPoint(l.to),c=l.pointFrom<n?h.length+1:l.point.startSide<0?h.length:Math.min(h.length,a);i.point(o,u,l.point,h,c,l.pointRank),a=Math.min(l.openEnd(u),h.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new wr;for(let i of e instanceof lh?[e]:n?zw(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ee.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ee.empty;i=i.nextLayer)n=new ee(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}ee.empty=new ee([],[],null,-1);function zw(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(oh(e,r)>0)return t.slice().sort(oh);e=r}return t}ee.empty.nextLayer=ee.empty;class wr{finishChunk(e){this.chunks.push(new Fc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new wr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ee.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ee.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Md(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class E0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ss{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new E0(l,n,r,s));return i.length==1?i[0]:new Ss(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ia(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ia(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ia(this.heap,0)}}}function Ia(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Pi{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ss.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){ol(this.active,e),ol(this.activeTo,e),ol(this.activeRank,e),this.minActive=Nd(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;al(this.active,n,r),al(this.activeTo,n,i),al(this.activeRank,n,s),e&&al(e,n,this.cursor.from),this.minActive=Nd(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&ol(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Td(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,h=u||t.endSide-n.endSide,c=h<0?t.to+a:n.to,f=Math.min(c,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&ah(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!ah(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),c>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(c),o=c,h<=0&&t.next(),h>=0&&n.next()}}function ah(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function ol(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function al(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Nd(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Zo(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Be(t,i));return r}function _w(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Be(t,i)}return t.length}const uh="",Od=typeof Symbol>"u"?"__"+uh:Symbol.for(uh),hh=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class qn{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let h=[],c=/^@(\w+)\b/.exec(l[0]),f=c&&c[1]=="keyframes";if(c&&o==null)return a.push(l[0]+";");for(let d in o){let m=o[d];if(/&/.test(d))s(d.split(/,\s*/).map(y=>l.map(w=>y.replace(/&/,w))).reduce((y,w)=>y.concat(w)),m,a);else if(m&&typeof m=="object"){if(!c)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),m,h,f)}else m!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+m+";")}(h.length||f)&&a.push((r&&!c&&!u?l.map(r):l).join(", ")+" {"+h.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Pd[Od]||1;return Pd[Od]=e+1,uh+e.toString(36)}static mount(e,n,r){let i=e[hh],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Hw(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let Dd=new Map;class Hw{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=Dd.get(r);if(s)return e[hh]=s;this.sheet=new i.CSSStyleSheet,Dd.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[hh]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Gn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ww=typeof navigator<"u"&&/Mac/.test(navigator.platform),Vw=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Le=0;Le<10;Le++)Gn[48+Le]=Gn[96+Le]=String(Le);for(var Le=1;Le<=24;Le++)Gn[Le+111]="F"+Le;for(var Le=65;Le<=90;Le++)Gn[Le]=String.fromCharCode(Le+32),Cs[Le]=String.fromCharCode(Le);for(var Fa in Gn)Cs.hasOwnProperty(Fa)||(Cs[Fa]=Gn[Fa]);function Uw(t){var e=Ww&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Vw&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Cs:Gn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Pe(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)M0(t,arguments[e]);return t}function M0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)M0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function As(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function ch(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function _l(t,e){if(!e.anchorNode)return!1;try{return ch(t,e.anchorNode)}catch{return!1}}function bs(t){return t.nodeType==3?Sr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Zi(t,e,n,r){return n?Ld(t,e,n,r,-1)||Ld(t,e,n,r,1):!1}function kr(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function vo(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Ld(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:on(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=kr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?on(t):0}else return!1}}function on(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ea(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function $w(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function T0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function Kw(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let h=t,c=!1;h&&!c;)if(h.nodeType==1){let f,d=h==a.body,m=1,y=1;if(d)f=$w(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(c=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let g=h.getBoundingClientRect();({scaleX:m,scaleY:y}=T0(h,g)),f={left:g.left,right:g.left+h.clientWidth*m,top:g.top,bottom:g.top+h.clientHeight*y}}let w=0,p=0;if(i=="nearest")e.top<f.top?(p=e.top-(f.top+l),n>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,n<0&&e.top-p<f.top&&(p=e.top-(f.top+l)));else{let g=e.bottom-e.top,v=f.bottom-f.top;p=(i=="center"&&g<=v?e.top+g/2-v/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-v+l)-f.top}if(r=="nearest"?e.left<f.left?(w=e.left-(f.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=e.left-(f.left+s))):w=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||p)if(d)u.scrollBy(w,p);else{let g=0,v=0;if(p){let k=h.scrollTop;h.scrollTop+=p/y,v=(h.scrollTop-k)*y}if(w){let k=h.scrollLeft;h.scrollLeft+=w/m,g=(h.scrollLeft-k)*m}e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v},g&&Math.abs(g-w)<1&&(r="nearest"),v&&Math.abs(v-p)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function qw(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class Gw{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?on(n):0),r,Math.min(e.focusOffset,r?on(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Tr=null;function N0(t){if(t.setActive)return t.setActive();if(Tr)return t.focus(Tr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Tr==null?{get preventScroll(){return Tr={preventScroll:!0},!0}}:void 0),!Tr){Tr=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Rd;function Sr(t,e,n=e){let r=Rd||(Rd=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Zr(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function Yw(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function O0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Qw(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,on(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=on(n))}else{if(n==t)return!0;r=kr(n),n=n.parentNode}}function P0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function D0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=on(n)}else if(n.parentNode&&!vo(n))r=kr(n),n=n.parentNode;else return null}}function L0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!vo(n))r=kr(n)+1,n=n.parentNode;else return null}}class Ue{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Ue(e.parentNode,kr(e),n)}static after(e,n){return new Ue(e.parentNode,kr(e)+1,n)}}const jc=[];class re{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=re.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=Bd(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=Bd(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=on(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!re.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,h=r;a<this.children.length;a++){let c=this.children[a],f=u+c.length;if(u<e&&f>n)return c.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&c.dom.parentNode==this.dom){l=a,o=h;break}h=f,u=f+c.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=jc){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new R0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}re.prototype.breakAfter=0;function Bd(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class R0{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function B0(t,e,n,r,i,s,l,o,a){let{children:u}=t,h=u.length?u[e]:null,c=s.length?s[s.length-1]:null,f=c?c.breakAfter:l;if(!(e==r&&h&&!l&&!f&&s.length<2&&h.merge(n,i,s.length?c:null,n==0,o,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&(c!=null&&c.breakAfter))?(e==r&&(d=d.split(i),i=0),!f&&c&&d.merge(0,i,c,!0,0,a)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(c?c.breakAfter=1:l=1),r++}for(h&&(h.breakAfter=l,n>0&&(!l&&s.length&&h.merge(n,h.length,s[0],!1,o,0)?h.breakAfter=s.shift().breakAfter:(n<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(n,h.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function I0(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:h}=l.findPos(e,-1),c=e-n;for(let f of r)c+=f.length;t.length+=c,B0(t,u,h,o,a,r,0,i,s)}let tt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},fh=typeof document<"u"?document:{documentElement:{style:{}}};const dh=/Edge\/(\d+)/.exec(tt.userAgent),F0=/MSIE \d/.test(tt.userAgent),ph=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tt.userAgent),ta=!!(F0||ph||dh),Id=!ta&&/gecko\/(\d+)/i.test(tt.userAgent),ja=!ta&&/Chrome\/(\d+)/.exec(tt.userAgent),Jw="webkitFontSmoothing"in fh.documentElement.style,j0=!ta&&/Apple Computer/.test(tt.vendor),Fd=j0&&(/Mobile\/\w+/.test(tt.userAgent)||tt.maxTouchPoints>2);var L={mac:Fd||/Mac/.test(tt.platform),windows:/Win/.test(tt.platform),linux:/Linux|X11/.test(tt.platform),ie:ta,ie_version:F0?fh.documentMode||6:ph?+ph[1]:dh?+dh[1]:0,gecko:Id,gecko_version:Id?+(/Firefox\/(\d+)/.exec(tt.userAgent)||[0,0])[1]:0,chrome:!!ja,chrome_version:ja?+ja[1]:0,ios:Fd,android:/Android\b/.test(tt.userAgent),safari:j0,webkit_version:Jw?+(/\bAppleWebKit\/(\d+)/.exec(tt.userAgent)||[0,0])[1]:0,tabSize:fh.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Xw=256;class _t extends re{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof _t)||this.length-(n-e)+r.length>Xw||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new _t(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Ue(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Zw(this.dom,e,n)}}class kn extends re{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(O0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof kn&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(I0(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new kn(this.mark,n,l)}domAtPos(e){return z0(this,e)}coordsAt(e,n){return H0(this,e,n)}}function Zw(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?L.chrome||L.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=Sr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return L.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?ea(a,l<0):a||null}class cr extends re{static create(e,n,r){return new cr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=cr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof cr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof cr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Q.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Q.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ue.before(this.dom):Ue.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return ea(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ci extends re{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ci&&e.side==this.side}split(){return new ci(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ue.before(this.dom):Ue.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Q.empty}get isHidden(){return!0}}_t.prototype.children=cr.prototype.children=ci.prototype.children=jc;function z0(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new Ue(n,0)}function _0(t,e,n){let r,{children:i}=t;n>0&&e instanceof kn&&i.length&&(r=i[i.length-1])instanceof kn&&r.mark.eq(e.mark)?_0(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function H0(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,h){for(let c=0,f=0;c<u.children.length&&f<=h;c++){let d=u.children[c],m=f+d.length;m>=h&&(d.children.length?o(d,h-f):(!s||s.isHidden&&(n>0||tk(s,d)))&&(m>h||f==m&&d.getSide()>0)?(s=d,l=h-f):(f<h||f==m&&d.getSide()<0&&!d.isHidden)&&(r=d,i=h-f)),f=m}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):ek(t)}function ek(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=bs(e);return n[n.length-1]||null}function tk(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function mh(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const jd=Object.create(null);function xo(t,e,n){if(t==e)return!0;t||(t=jd),e||(e=jd);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function gh(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function nk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Fs{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var At=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(At||(At={}));class U extends hi{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new js(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Yn(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=W0(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new Yn(e,r,i,n,e.widget||null,!0)}static line(e){return new zs(e)}static set(e,n=!1){return ee.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}U.none=ee.empty;class js extends U{constructor(e){let{start:n,end:r}=W0(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof js&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&xo(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}js.prototype.point=!1;class zs extends U{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof zs&&this.spec.class==e.spec.class&&xo(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}zs.prototype.mapMode=ht.TrackBefore;zs.prototype.point=!0;class Yn extends U{constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?ht.TrackBefore:ht.TrackAfter:ht.TrackDel}get type(){return this.startSide!=this.endSide?At.WidgetRange:this.startSide<=0?At.WidgetBefore:At.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Yn&&rk(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Yn.prototype.point=!0;function W0(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function rk(t,e){return t==e||!!(t&&e&&t.compare(e))}function Hl(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class xe extends re{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof xe))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),I0(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new xe;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){xo(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){_0(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=mh(n,this.attrs||{})),r&&(this.attrs=mh({class:r},this.attrs||{}))}domAtPos(e){return z0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(O0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(gh(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&re.get(i)instanceof kn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=re.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!L.ios||!this.children.some(s=>s instanceof _t))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof _t)||/[^ -~]/.test(r.text))return null;let i=bs(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=H0(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof xe&&this.children.length==0&&e.children.length==0&&xo(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof xe)return s;if(l>n)break}i=l+s.breakAfter}return null}}class gn extends re{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof gn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Ue.before(this.dom):Ue.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new gn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return jc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Q.empty}domBoundsAround(){return null}become(e){return e instanceof gn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof yh?null:ea(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class yh extends Fs{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class es{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof gn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new xe),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ul(new ci(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof gn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(ul(new _t(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof Yn){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof Yn)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new gn(r.widget||fi.block,o,r));else{let a=cr.create(r.widget||fi.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),h=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),c=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(c.append(ul(new ci(1),i),s),s=i.length+Math.max(0,s-i.length)),c.append(ul(a,i),s),this.atCursorPos=h,this.pendingBuffer=h?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new es(e,n,r,s);return l.openEnd=ee.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function ul(t,e){for(let n of e)t=new kn(n,[t],t.length);return t}class fi extends Fs{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}fi.inline=new fi("span");fi.block=new fi("div");var Ce=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ce||(Ce={}));const Cr=Ce.LTR,zc=Ce.RTL;function V0(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const ik=V0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),sk=V0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),vh=Object.create(null),Gt=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);vh[e]=n,vh[n]=-e}function U0(t){return t<=247?ik[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?sk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const lk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Rn{get dir(){return this.level%2?zc:Cr}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function $0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!$0(r.inner,i.inner))return!1}return!0}const ne=[];function ok(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,h=a,c=a;u<o;u++){let f=U0(t.charCodeAt(u));f==512?f=h:f==8&&c==4&&(f=16),ne[u]=f==4?2:f,f&7&&(c=f),h=f}for(let u=l,h=a,c=a;u<o;u++){let f=ne[u];if(f==128)u<o-1&&h==ne[u+1]&&h&24?f=ne[u]=h:ne[u]=256;else if(f==64){let d=u+1;for(;d<o&&ne[d]==64;)d++;let m=u&&h==8||d<n&&ne[d]==8?c==1?1:8:256;for(let y=u;y<d;y++)ne[y]=m;u=d-1}else f==8&&c==1&&(ne[u]=1);h=f,f&7&&(c=f)}}}function ak(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,h=l<r.length?r[l].from:n;for(let c=u,f,d,m;c<h;c++)if(d=vh[f=t.charCodeAt(c)])if(d<0){for(let y=o-3;y>=0;y-=3)if(Gt[y+1]==-d){let w=Gt[y+2],p=w&2?i:w&4?w&1?s:i:0;p&&(ne[c]=ne[Gt[y]]=p),o=y;break}}else{if(Gt.length==189)break;Gt[o++]=c,Gt[o++]=f,Gt[o++]=a}else if((m=ne[c])==2||m==1){let y=m==i;a=y?0:1;for(let w=o-3;w>=0;w-=3){let p=Gt[w+2];if(p&2)break;if(y)Gt[w+2]|=2;else{if(p&4)break;Gt[w+2]|=4}}}}}function uk(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=ne[a];if(u==256){let h=a+1;for(;;)if(h==o){if(i==n.length)break;h=n[i++].to,o=i<n.length?n[i].from:e}else if(ne[h]==256)h++;else break;let c=s==1,f=(h<e?ne[h]:r)==1,d=c==f?c?1:2:r;for(let m=h,y=i,w=y?n[y-1].to:t;m>a;)m==w&&(m=n[--y].from,w=y?n[y-1].to:t),ne[--m]=d;a=h}else s=u,a++}}}function xh(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let h=!0,c=!1;if(u==s.length||a<s[u].from){let y=ne[a];y!=o&&(h=!1,c=y==16)}let f=!h&&o==1?[]:null,d=h?r:r+1,m=a;e:for(;;)if(u<s.length&&m==s[u].from){if(c)break e;let y=s[u];if(!h)for(let w=y.to,p=u+1;;){if(w==n)break e;if(p<s.length&&s[p].from==w)w=s[p++].to;else{if(ne[w]==o)break e;break}}if(u++,f)f.push(y);else{y.from>a&&l.push(new Rn(a,y.from,d));let w=y.direction==Cr!=!(d%2);wh(t,w?r+1:r,i,y.inner,y.from,y.to,l),a=y.to}m=y.to}else{if(m==n||(h?ne[m]!=o:ne[m]==o))break;m++}f?xh(t,a,m,r+1,i,f,l):a<m&&l.push(new Rn(a,m,d)),a=m}else for(let a=n,u=s.length;a>e;){let h=!0,c=!1;if(!u||a>s[u-1].to){let y=ne[a-1];y!=o&&(h=!1,c=y==16)}let f=!h&&o==1?[]:null,d=h?r:r+1,m=a;e:for(;;)if(u&&m==s[u-1].to){if(c)break e;let y=s[--u];if(!h)for(let w=y.from,p=u;;){if(w==e)break e;if(p&&s[p-1].to==w)w=s[--p].from;else{if(ne[w-1]==o)break e;break}}if(f)f.push(y);else{y.to<a&&l.push(new Rn(y.to,a,d));let w=y.direction==Cr!=!(d%2);wh(t,w?r+1:r,i,y.inner,y.from,y.to,l),a=y.from}m=y.from}else{if(m==e||(h?ne[m-1]!=o:ne[m-1]==o))break;m--}f?xh(t,m,a,r+1,i,f,l):m<a&&l.push(new Rn(m,a,d)),a=m}}function wh(t,e,n,r,i,s,l){let o=e%2?2:1;ok(t,i,s,r,o),ak(t,i,s,r,o),uk(i,s,r,o),xh(t,i,s,e,n,r,l)}function hk(t,e,n){if(!t)return[new Rn(0,0,e==zc?1:0)];if(e==Cr&&!n.length&&!lk.test(t))return K0(t.length);if(n.length)for(;t.length>ne.length;)ne[ne.length]=256;let r=[],i=e==Cr?0:1;return wh(t,i,i,n,0,t.length,r),r}function K0(t){return[new Rn(0,t,0)]}let q0="";function ck(t,e,n,r,i){var s;let l=r.head-t.from,o=Rn.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let h=Be(t.text,l,a.forward(i,n));(h<a.from||h>a.to)&&(h=u),q0=t.text.slice(Math.min(l,h),Math.max(l,h));let c=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return c&&h==u&&c.level+(i?0:1)<a.level?E.cursor(c.side(!i,n)+t.from,c.forward(i,n)?1:-1,c.level):E.cursor(h+t.from,a.forward(i,n)?-1:1,a.level)}function fk(t,e,n){for(let r=e;r<n;r++){let i=U0(t.charCodeAt(r));if(i==1)return Cr;if(i==2||i==4)return zc}return Cr}const G0=F.define(),Y0=F.define(),Q0=F.define(),J0=F.define(),kh=F.define(),X0=F.define(),Z0=F.define(),_c=F.define(),Hc=F.define(),ey=F.define({combine:t=>t.some(e=>e)}),dk=F.define({combine:t=>t.some(e=>e)}),ty=F.define();class ei{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new ei(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ei(E.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const hl=le.define({map:(t,e)=>t.map(e)}),ny=le.define();function nn(t,e,n){let r=t.facet(J0);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const cn=F.define({combine:t=>t.length?t[0]:!0});let pk=0;const Vr=F.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class pt{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Vr.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Vr.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new pt(pk++,e,r,i,o=>{let a=[];return l&&a.push(Es.of(u=>{let h=u.plugin(o);return h?l(h):U.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return pt.define((r,i)=>new e(r,i),n)}}class za{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(nn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){nn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){nn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ry=F.define(),Wc=F.define(),Es=F.define(),iy=F.define(),_s=F.define(),sy=F.define();function zd(t,e){let n=t.state.facet(sy);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return ee.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,h=l-e.from,c=i;for(let f=o.length-1;f>=0;f--,a--){let d=o[f].spec.bidiIsolate,m;if(d==null&&(d=fk(e.text,u,h)),a>0&&c.length&&(m=c[c.length-1]).to==u&&m.direction==d)m.to=h,c=m.inner;else{let y={from:u,to:h,direction:d,inner:[]};c.push(y),c=y.inner}}}}),i}const ly=F.define();function oy(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(ly)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const zi=F.define();class bt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new bt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,h=a?a.fromB:1e9;for(;s<n.length&&n[s]<h;){let c=n[s],f=n[s+1],d=Math.max(o,c),m=Math.min(h,f);if(d<=m&&new bt(d+u,m+u,d,m).addToSet(r),f>h)break;s+=2}if(!a)return r;new bt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class wo{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ee.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new bt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new wo(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class _d extends re{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=U.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new xe],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new bt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:h})=>h<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!kk(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?gk(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:h}=this.hasComposition;r=new bt(u,h,e.changes.mapPos(u,-1),e.changes.mapPos(h,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(L.ie||L.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=xk(l,o,e.changes);return r=bt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=L.chrome||L.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof gn&&l.widget instanceof yh&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:h,toB:c}=o,f,d,m,y;if(r&&r.range.fromB<c&&r.range.toB>h){let k=es.build(this.view.state.doc,h,r.range.fromB,this.decorations,this.dynamicDecorationMap),S=es.build(this.view.state.doc,r.range.toB,c,this.decorations,this.dynamicDecorationMap);d=k.breakAtStart,m=k.openStart,y=S.openEnd;let A=this.compositionView(r);S.breakAtStart?A.breakAfter=1:S.content.length&&A.merge(A.length,A.length,S.content[0],!1,S.openStart,0)&&(A.breakAfter=S.content[0].breakAfter,S.content.shift()),k.content.length&&A.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(A).concat(S.content)}else({content:f,breakAtStart:d,openStart:m,openEnd:y}=es.build(this.view.state.doc,h,c,this.decorations,this.dynamicDecorationMap));let{i:w,off:p}=s.findPos(u,1),{i:g,off:v}=s.findPos(a,-1);B0(this,g,v,w,p,f,d,m,y)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(ny)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new _t(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new kn(i,[n],n.length);let r=new xe;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=re.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(cn)||this.dom.tabIndex>-1)&&_l(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(L.gecko&&o.empty&&!this.hasComposition&&mk(a)){let c=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(c,a.node.childNodes[a.offset]||null)),a=u=new Ue(c,0),l=!0}let h=this.view.observer.selectionRange;(l||!h.focusNode||(!Zi(a.node,a.offset,h.anchorNode,h.anchorOffset)||!Zi(u.node,u.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,o))&&(this.view.observer.ignore(()=>{L.android&&L.chrome&&this.dom.contains(h.focusNode)&&wk(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let c=As(this.view.root);if(c)if(o.empty){if(L.gecko){let f=yk(a.node,a.offset);if(f&&f!=3){let d=(f==1?D0:L0)(a.node,a.offset);d&&(a=new Ue(d.node,d.offset))}}c.collapse(a.node,a.offset),o.bidiLevel!=null&&c.caretBidiLevel!==void 0&&(c.caretBidiLevel=o.bidiLevel)}else if(c.extend){c.collapse(a.node,a.offset);try{c.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Ue(h.anchorNode,h.anchorOffset),this.impreciseHead=u.precise?null:new Ue(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Zi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=As(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=xe.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let h=this.domAtPos(n.head+n.assoc);r.collapse(h.node,h.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=re.get(n.childNodes[i]);s instanceof xe&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=re.get(n.childNodes[i]);s instanceof xe&&(r=s.domAtPos(s.length))}return r?new Ue(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=re.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof xe)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof xe&&!(r instanceof xe&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof gn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof xe))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof _t))return null;let s=Be(i.text,r);if(s==r)return null;let l=Sr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Ce.LTR;for(let u=0,h=0;h<this.children.length;h++){let c=this.children[h],f=u+c.length;if(f>i)break;if(u>=r){let d=c.dom.getBoundingClientRect();if(n.push(d.height),l){let m=c.dom.lastChild,y=m?bs(m):[];if(y.length){let w=y[y.length-1],p=a?w.right-d.left:d.right-w.left;p>o&&(o=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+c.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Ce.RTL:Ce.LTR}measureTextSize(){for(let s of this.children)if(s instanceof xe){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=bs(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new R0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(U.replace({widget:new yh(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return U.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Es).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(iy).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(ee.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(ty))try{if(u(this.view,e.range,e))return!0}catch(h){nn(this.view.state,h,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=oy(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;Kw(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Ce.LTR)}}function mk(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function ay(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=D0(n.focusNode,n.focusOffset),i=L0(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=re.get(i.node);if(!o||o instanceof _t&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=re.get(r.node);!a||a instanceof _t&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function gk(t,e,n){let r=ay(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new bt(a.mapPos(s),a.mapPos(l),s,l),h=[];for(let c=i.parentNode;;c=c.parentNode){let f=re.get(c);if(f instanceof kn)h.push({node:c,deco:f.mark});else{if(f instanceof xe||c.nodeName=="DIV"&&c.parentNode==t.contentDOM)return{range:u,text:i,marks:h,line:c};if(c!=t.contentDOM)h.push({node:c,deco:new js({inclusive:!0,attributes:nk(c),tagName:c.tagName.toLowerCase()})});else return null}}}function yk(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let vk=class{constructor(){this.changes=[]}compareRange(e,n){Hl(e,n,this.changes)}comparePoint(e,n){Hl(e,n,this.changes)}boundChange(e){Hl(e,e,this.changes)}};function xk(t,e,n){let r=new vk;return ee.compare(t,e,n,r),r.changes}function wk(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function kk(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function Sk(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return E.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=Be(i.text,s,!1):o=Be(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=Be(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=Be(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return E.range(l+i.from,o+i.from)}function Ck(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Ak(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function _a(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Hd(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Wd(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Sh(t,e,n){let r,i,s,l,o=!1,a,u,h,c;for(let m=t.firstChild;m;m=m.nextSibling){let y=bs(m);for(let w=0;w<y.length;w++){let p=y[w];i&&_a(i,p)&&(p=Hd(Wd(p,i.bottom),i.top));let g=Ck(e,p),v=Ak(n,p);if(g==0&&v==0)return m.nodeType==3?Vd(m,e,n):Sh(m,e,n);(!r||l>v||l==v&&s>g)&&(r=m,i=p,s=g,l=v,o=g?e<p.left?w>0:w<y.length-1:!0),g==0?n>p.bottom&&(!h||h.bottom<p.bottom)?(a=m,h=p):n<p.top&&(!c||c.top>p.top)&&(u=m,c=p):h&&_a(h,p)?h=Wd(h,p.bottom):c&&_a(c,p)&&(c=Hd(c,p.top))}}if(h&&h.bottom>=n?(r=a,i=h):c&&c.top<=n&&(r=u,i=c),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Vd(r,f,n);if(o&&r.contentEditable!="false")return Sh(r,f,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function Vd(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=Sr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let h=a[u];if(h.top==h.bottom)continue;l||(l=e-h.left);let c=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&c<s){let f=e>=(h.left+h.right)/2,d=f;if((L.chrome||L.gecko)&&Sr(t,o).getBoundingClientRect().left==h.right&&(d=!f),c<=0)return{node:t,offset:o+(d?1:0)};i=o+(d?1:0),s=c}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function uy(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:h,y:c}=e,f=c-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,S=!1;a=t.elementAtHeight(f),a.type!=At.Text;)for(;f=r>0?a.bottom+k:a.top-k,!(f>=0&&f<=u);){if(S)return n?null:0;S=!0,r=-r}c=o+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:Ud(t,l,a,h,c);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Ud(t,l,a,h,c);let m=t.dom.ownerDocument,y=t.root.elementFromPoint?t.root:m,w=y.elementFromPoint(h,c);w&&!t.contentDOM.contains(w)&&(w=null),w||(h=Math.max(l.left+1,Math.min(l.right-1,h)),w=y.elementFromPoint(h,c),w&&!t.contentDOM.contains(w)&&(w=null));let p,g=-1;if(w&&((i=t.docView.nearest(w))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let k=m.caretPositionFromPoint(h,c);k&&({offsetNode:p,offset:g}=k)}else if(m.caretRangeFromPoint){let k=m.caretRangeFromPoint(h,c);k&&({startContainer:p,startOffset:g}=k)}p&&(!t.contentDOM.contains(p)||L.safari&&bk(p,g,h)||L.chrome&&Ek(p,g,h))&&(p=void 0),p&&(g=Math.min(on(p),g))}if(!p||!t.docView.dom.contains(p)){let k=xe.find(t.docView,d);if(!k)return f>a.top+a.height/2?a.to:a.from;({node:p,offset:g}=Sh(k.dom,h,c))}let v=t.docView.nearest(p);if(!v)return null;if(v.isWidget&&((s=v.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=v.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(p,g)+v.posAtStart}function Ud(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+_w(l,s,t.state.tabSize)}function hy(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return Sr(t,r-1,r).getBoundingClientRect().right>n}function bk(t,e,n){return hy(t,e,n)}function Ek(t,e,n){if(e!=0)return hy(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Sr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function Mk(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==At.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function Tk(t,e,n,r){let i=Mk(t,e.head,e.assoc||-1),s=!r||i.type!=At.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==Ce.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return E.cursor(a,n?-1:1)}return E.cursor(n?i.to:i.from,n?-1:1)}function $d(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=ck(i,s,l,o,n),h=q0;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;h=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(h))return o}else{if(!r)return u;a=r(h)}o=u}}function Nk(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==Ie.Space&&(i=l),i==l}}function Ok(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return E.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),h=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),o=(s<0?d.top:d.bottom)+h}let c=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let m=o+(f+d)*s,y=uy(t,{x:c,y:m},!1,s);if(m<a.top||m>a.bottom||(s<0?y<i:y>i)){let w=t.docView.coordsForChar(y),p=!w||m<w.top?-1:1;return E.cursor(y,p,void 0,l)}}}function ts(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function cy(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=ts(t,i.from,0);l!=i.from&&(s=E.cursor(l,-1))}else{let l=ts(t,i.from,-1),o=ts(t,i.to,1);(l!=i.from||o!=i.to)&&(s=E.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?E.create(n,e.mainIndex):e}function Ha(t,e,n){let r=ts(t.state.facet(_s).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:E.cursor(r,r<n.from?1:-1)}const _i="";class Pk{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Z.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=_i}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=re.get(i),a=re.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:vo(i))||vo(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=re.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(Dk(e,r.node,r.offset)?n:0))}}function Dk(t,e,n){for(;;){if(!e||n<on(e))return!1;if(e==t)return!0;n=kr(e)+1,e=e.parentNode}}class Kd{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Lk{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:Ik(e),a=new Pk(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=Fk(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!ch(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!ch(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),h=e.viewport;if((L.ios||L.chrome)&&e.state.selection.main.empty&&a!=u&&(h.from>0||h.to<e.state.doc.length)){let c=Math.min(a,u),f=Math.max(a,u),d=h.from-c,m=h.to-f;(d==0||d==1||c==0)&&(m==0||m==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=E.single(u,a)}}}function fy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||L.android&&e.text.length<o-l)&&(a=i.to,u="end");let h=Bk(t.state.doc.sliceString(l,o,_i),e.text,a-l,u);h&&(L.chrome&&s==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==_i+_i&&h.toB--,n={from:l+h.from,to:l+h.toA,insert:Q.of(e.text.slice(h.from,h.toB).split(_i))})}else r&&(!t.hasFocus&&t.state.facet(cn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(L.mac||L.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Q.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:L.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Q.of([" "])}),n)return Vc(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=cy(t.state.facet(_s).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function Vc(t,e,n,r=-1){if(L.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(L.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Zr(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Zr(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Zr(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=Rk(t,e,n));return t.state.facet(X0).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function Rk(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,h=ts(i.facet(_s).map(c=>c(t)),u,a);e.from==h&&(l=h)}if(l>-1)r={changes:e,selection:E.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=t.state.sliceDoc(e.from,e.to),c,f=n&&ay(t,n.main.head);if(f){let y=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-y}}else c=t.state.doc.lineAt(s.head);let d=s.to-e.to,m=s.to-s.from;r=i.changeByRange(y=>{if(y.from==s.from&&y.to==s.to)return{changes:a,range:u||y.map(a)};let w=y.to-d,p=w-h.length;if(y.to-y.from!=m||t.state.sliceDoc(p,w)!=h||y.to>=c.from&&y.from<=c.to)return{range:y};let g=i.changes({from:p,to:w,insert:e.insert}),v=y.to-s.to;return{changes:g,range:u?E.range(Math.max(0,u.anchor+v),Math.max(0,u.head+v)):y.map(g)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function Bk(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function Ik(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Kd(n,r)),(i!=n||s!=r)&&e.push(new Kd(i,s))),e}function Fk(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?E.single(n+e,r+e):null}class jk{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,L.safari&&e.contentDOM.addEventListener("input",()=>null),L.gecko&&eS(e.contentDOM.ownerDocument)}handleEvent(e){!Kk(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=zk(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&py.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),L.android&&L.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return L.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=dy.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||_k.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Zr(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:L.safari&&!L.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function qd(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){nn(n.state,i)}}}function zk(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(qd(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(qd(r.value,a))}}for(let r in Ht)n(r).handlers.push(Ht[r]);for(let r in Nt)n(r).observers.push(Nt[r]);return e}const dy=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],_k="dthko",py=[16,17,18,20,91,92,224,225],cl=6;function fl(t){return Math.max(0,t)*.7+8}function Hk(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Wk{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=qw(e.contentDOM),this.atoms=e.state.facet(_s).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Z.allowMultipleSelections)&&Vk(e,n),this.dragging=$k(e,n)&&yy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Hk(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=oy(this.view);e.clientX-a.left<=i+cl?n=-fl(i-e.clientX):e.clientX+a.right>=l-cl&&(n=fl(e.clientX-l)),e.clientY-a.top<=s+cl?r=-fl(s-e.clientY):e.clientY+a.bottom>=o-cl&&(r=fl(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=cy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Vk(t,e){let n=t.state.facet(G0);return n.length?n[0](e):L.mac?e.metaKey:e.ctrlKey}function Uk(t,e){let n=t.state.facet(Y0);return n.length?n[0](e):L.mac?!e.altKey:!e.ctrlKey}function $k(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=As(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function Kk(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=re.get(n))&&r.ignoreEvent(e))return!1;return!0}const Ht=Object.create(null),Nt=Object.create(null),my=L.ie&&L.ie_version<15||L.ios&&L.webkit_version<604;function qk(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),gy(t,n.value)},50)}function na(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function gy(t,e){e=na(t.state,_c,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(Ch!=null&&n.selection.ranges.every(a=>a.empty)&&Ch==s.toString()){let a=-1;r=n.changeByRange(u=>{let h=n.doc.lineAt(u.from);if(h.from==a)return{range:u};a=h.from;let c=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:h.from,insert:c},range:E.cursor(u.from+c.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:E.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Nt.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Ht.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Nt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Nt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Ht.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(Q0))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=Qk(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new Wk(t,e,n,r)),r&&t.observer.ignore(()=>{N0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Gd(t,e,n,r){if(r==1)return E.cursor(e,n);if(r==2)return Sk(t.state,e,n);{let i=xe.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,E.range(l,o)}}let Yd=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Gk(t,e,n,r){let i=xe.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&Yd(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&Yd(n,r,o)?1:l&&l.bottom>=r?-1:1}function Qd(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Gk(t,n,e.clientX,e.clientY)}}const Yk=L.ie&&L.ie_version<=11;let Jd=null,Xd=0,Zd=0;function yy(t){if(!Yk)return t.detail;let e=Jd,n=Zd;return Jd=t,Zd=Date.now(),Xd=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Xd+1)%3:1}function Qk(t,e){let n=Qd(t,e),r=yy(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=Qd(t,s),u,h=Gd(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let c=Gd(t,n.pos,n.bias,r),f=Math.min(c.from,h.from),d=Math.max(c.to,h.to);h=f<h.from?E.range(f,d):E.range(d,f)}return l?i.replaceRange(i.main.extend(h.from,h.to)):o&&r==1&&i.ranges.length>1&&(u=Jk(i,a.pos))?u:o?i.addRange(h):E.create([h])}}}function Jk(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return E.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Ht.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=E.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",na(t.state,Hc,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ht.dragend=t=>(t.inputState.draggedContent=null,!1);function ep(t,e,n,r){if(n=na(t.state,_c,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&Uk(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Ht.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&ep(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return ep(t,e,r,!0),!0}return!1};Ht.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=my?null:e.clipboardData;return n?(gy(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(qk(t),!1)};function Xk(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function Zk(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:na(t,Hc,e.join(t.lineBreak)),ranges:n,linewise:r}}let Ch=null;Ht.copy=Ht.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=Zk(t.state);if(!n&&!i)return!1;Ch=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=my?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Xk(t,n),!1)};const vy=xi.define();function xy(t,e){let n=[];for(let r of t.facet(Z0)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:vy.of(!0)}):null}function wy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=xy(t.state,e);n?t.dispatch(n):t.update([])}},10)}Nt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),wy(t)};Nt.blur=t=>{t.observer.clearSelectionRange(),wy(t)};Nt.compositionstart=Nt.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Nt.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,L.chrome&&L.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Nt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Ht.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return Vc(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(L.chrome&&L.android&&(i=dy.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return L.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),L.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Nt.compositionend(t,e),20),!1};const tp=new Set;function eS(t){tp.has(t)||(tp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const np=["pre-wrap","normal","pre-line","break-spaces"];let di=!1;function rp(){di=!1}class tS{constructor(e){this.lineWrapping=e,this.doc=Q.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return np.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=np.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let h=l[u];h<0?u++:this.heightSamples[Math.floor(h*10)]=!0}}return a}}class nS{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class tn{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?At.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Yn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new tn(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var ae=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ae||(ae={}));const Wl=.001;class Qe{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Wl&&(di=!0),this.height=e)}replace(e,n,r){return Qe.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:h,toB:c}=i[o],f=s.lineAt(a,ae.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,ae.ByPosNoHeight,r,0,0);for(c+=d.to-u,u=d.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,h=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,ae.ByPosNoHeight,r,0,0));h+=f.from-a,a=f.from;let m=Uc.build(r.setDoc(l),e,h,c);s=ko(s,s.replace(a,u,m))}return s.updateHeight(r,0)}static empty(){return new ut(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new rS(Qe.of(e.slice(0,n)),l,Qe.of(e.slice(r)))}}function ko(t,e){return t==e?t:(t.constructor!=e.constructor&&(di=!0),e)}Qe.prototype.size=1;class ky extends Qe{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new tn(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ut extends ky{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new tn(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof ut||i instanceof De&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof De?i=new ut(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Qe.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class De extends Qe{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),h=n.doc.lineAt(u),c=o+h.length*a,f=Math.max(r,e-c/2);return new tn(h.from,h.length,f,c,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:h,length:c}=n.doc.line(s+u);return new tn(h,c,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==ae.ByHeight)return this.blockAt(e,r,i,s);if(n==ae.ByPosNoHeight){let{from:d,to:m}=r.doc.lineAt(e);return new tn(d,m-d,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),h=o+u.length*a,c=u.number-l,f=i+o*c+a*(u.from-s-c);return new tn(u.from,u.length,Math.max(i,Math.min(f,i+this.height-h)),h,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let h=e,c=i;h<=n;){let f=r.doc.lineAt(h);if(h==e){let m=f.number-o;c+=a*m+u*(e-s-m)}let d=a+u*f.length;l(new tn(f.from,f.length,c,d,0)),c+=d,h=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof De?r[r.length-1]=new De(s.length+i):r.push(null,new De(i-1))}if(e>0){let s=r[0];s instanceof De?r[0]=new De(e+s.length):r.unshift(new De(e-1),null)}return Qe.of(r)}decomposeLeft(e,n){n.push(new De(e-1),null)}decomposeRight(e,n){n.push(null,new De(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new De(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let h=e.doc.lineAt(o).length;l.length&&l.push(null);let c=i.heights[i.index++];a==-1?a=c:Math.abs(c-a)>=Wl&&(a=-2);let f=new ut(h,c);f.outdated=!1,l.push(f),o+=h+1}o<=s&&l.push(null,new De(s-o).updateHeight(e,o));let u=Qe.of(l);return(a<0||Math.abs(u.height-this.height)>=Wl||Math.abs(a-this.heightMetrics(e,n).perLine)>=Wl)&&(di=!0),ko(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class rS extends Qe{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==ae.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let h=n==ae.ByPosNoHeight?ae.ByPosNoHeight:ae.ByPos;return a?u.join(this.right.lineAt(o,h,r,l,o)):this.left.lineAt(o,h,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,ae.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&ip(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),ip(s,o)}return Qe.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Qe.of(this.break?[e,null,n]:[e,n]):(this.left=ko(this.left,e),this.right=ko(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ip(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof De&&(r=t[e+1])instanceof De&&t.splice(e-1,3,new De(n.length+1+r.length))}const iS=5;class Uc{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof ut?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new ut(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new ky(l,i,r)):(l||s||i>=iS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ut(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new De(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ut)return e;let n=new ut(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof ut)&&!this.isCovered?this.nodes.push(new ut(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof ut&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new Uc(r,e);return ee.spans(n,r,i,s,0),s.finish(r)}}function sS(t,e,n){let r=new lS;return ee.compare(t,e,n,r,0),r.changes}class lS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&Hl(e,n,this.changes,5)}}function oS(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let h=u,c=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&c.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=c.position=="absolute"||c.position=="fixed"?h.offsetParent:h.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function aS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function uS(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Wa{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return U.replace({widget:new hS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class hS extends Fs{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class sp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=lp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ce.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Wc).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new tS(n),this.stateDeco=e.facet(Es).filter(r=>typeof r!="function"),this.heightMap=Qe.empty().applyChanges(this.stateDeco,Q.empty,this.heightOracle.setDoc(e.doc),[new bt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=U.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new dl(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?lp:new $c(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Hi(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Es).filter(h=>typeof h!="function");let i=e.changedRanges,s=bt.extendWithRanges(i,sS(r,this.stateDeco,e?e.changes:Ee.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);rp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||di)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(dk)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Ce.RTL:Ce.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,h=0;if(o.width&&o.height){let{scaleX:k,scaleY:S}=T0(n,o);(k>.005&&Math.abs(this.scaleX-k)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=k,this.scaleY=S,u|=16,l=a=!0)}let c=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=f)&&(this.paddingTop=c,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=P0(e.scrollDOM);let m=(this.printing?uS:oS)(n,this.paddingTop),y=m.top-this.pixelViewport.top,w=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!aS(e.dom))return 0;let g=o.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let k=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(k)&&(l=!0),l||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:A,textHeight:C}=e.docView.measureTextSize();l=S>0&&i.refresh(s,S,A,C,Math.max(5,g/A),k),l&&(e.docView.minWidth=0,u|=16)}y>0&&w>0?h=Math.max(y,w):y<0&&w<0&&(h=Math.min(y,w)),rp();for(let S of this.viewports){let A=S.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(S);this.heightMap=(l?Qe.empty().applyChanges(this.stateDeco,Q.empty,this.heightOracle,[new bt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new nS(S.from,A))}di&&(u|=2)}let v=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),u|=this.updateForViewport()),(u&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new dl(i.lineAt(l-r*1e3,ae.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,ae.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=i.lineAt(u,ae.ByPos,s,0,0),f;n.y=="center"?f=(c.top+c.bottom)/2-h/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=c.top:f=c.bottom-h,a=new dl(i.lineAt(f-1e3/2,ae.ByHeight,s,0,0).from,i.lineAt(f+h+1e3/2,ae.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new dl(this.heightMap.lineAt(r,ae.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ae.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ae.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,ae.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Wa(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=Ce.LTR&&!r)return[];let o=[],a=(h,c,f,d)=>{if(c-h<s)return;let m=this.state.selection.main,y=[m.from];m.empty||y.push(m.to);for(let p of y)if(p>h&&p<c){a(h,p-10,f,d),a(p+10,c,f,d);return}let w=fS(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-h)<s&&Math.abs(p.to-c)<s&&!y.some(g=>p.from<g&&p.to>g));if(!w){if(c<f.to&&n&&r&&n.visibleRanges.some(v=>v.from<=c&&v.to>=c)){let v=n.moveToLineBoundary(E.cursor(c),!1,!0).head;v>h&&(c=v)}let p=this.gapSize(f,h,c,d),g=r||p<2e6?p:2e6;w=new Wa(h,c,p,g)}o.push(w)},u=h=>{if(h.length<l||h.type!=At.Text)return;let c=cS(h.from,h.to,this.stateDeco);if(c.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,m;if(r){let y=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,p;if(f!=null){let g=ml(c,f),v=((this.visibleBottom-this.visibleTop)/2+y)/h.height;w=g-v,p=g+v}else w=(this.visibleTop-h.top-y)/h.height,p=(this.visibleBottom-h.top+y)/h.height;d=pl(c,w),m=pl(c,p)}else{let y=c.total*this.heightOracle.charWidth,w=i*this.heightOracle.charWidth,p=0;if(y>2e6)for(let A of e)A.from>=h.from&&A.from<h.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=A.size-A.displaySize);let g=this.pixelViewport.left+p,v=this.pixelViewport.right+p,k,S;if(f!=null){let A=ml(c,f),C=((v-g)/2+w)/y;k=A-C,S=A+C}else k=(g-w)/y,S=(v+w)/y;d=pl(c,k),m=pl(c,S)}d>h.from&&a(h.from,d,h,c),m<h.to&&a(m,h.to,h,c)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(u):u(h);return o}gapSize(e,n,r,i){let s=ml(i,r)-ml(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Wa.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=U.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];ee.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Hi(this.heightMap.lineAt(e,ae.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Hi(this.heightMap.lineAt(this.scaler.fromDOM(e),ae.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Hi(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class dl{constructor(e,n){this.from=e,this.to=n}}function cS(t,e,n){let r=[],i=t,s=0;return ee.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function pl({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function ml(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function fS(t,e){for(let n of t)if(e(n))return n}const lp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class $c{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,ae.ByPos,e,0,0).top,h=n.lineAt(a,ae.ByPos,e,0,0).bottom;return i+=h-u,{from:o,to:a,top:u,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof $c?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Hi(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new tn(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Hi(i,e)):t._content)}const gl=F.define({combine:t=>t.join(" ")}),Ah=F.define({combine:t=>t.indexOf(!0)>-1}),bh=qn.newName(),Sy=qn.newName(),Cy=qn.newName(),Ay={"&light":"."+Sy,"&dark":"."+Cy};function Eh(t,e,n){return new qn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const dS=Eh("."+bh,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ay),pS={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Va=L.ie&&L.ie_version<=11;class mS{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Gw,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(L.ie&&L.ie_version<=11||L.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&L.android&&e.constructor.EDIT_CONTEXT!==!1&&!(L.chrome&&L.chrome_version<126)&&(this.editContext=new yS(e),e.state.facet(cn)&&(e.contentDOM.editContext=this.editContext.editContext)),Va&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(cn)?r.root.activeElement!=this.dom:!_l(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(L.ie&&L.ie_version<=11||L.android&&L.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Zi(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=As(e.root);if(!n)return!1;let r=L.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&gS(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=_l(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Qw(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,pS),Va&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Va&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Zr(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&_l(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Lk(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=fy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=op(n,e.previousSibling||e.target.previousSibling,-1),i=op(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(cn)!=e.state.facet(cn)&&(e.view.contentDOM.editContext=e.state.facet(cn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function op(t,e,n){for(;e;){let r=re.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function ap(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return Zi(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function gS(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return ap(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?ap(t,n):null}class yS{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:Q.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let h=E.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}if((L.mac||L.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:Q.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let h=this.to-this.from+(u.to-u.from+u.insert.length);Vc(e,u,E.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let h=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(U.mark({attributes:{style:h}}).range(a,u))}}}e.dispatch({effects:ny.of(U.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=As(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let h=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=h,this.to+=h;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=h}n+=h}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class I{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Yw(e.parent)||document,this.viewState=new sp(e.state||Z.create(e)),e.scrollTo&&e.scrollTo.is(hl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Vr).map(i=>new za(i));for(let i of this.plugins)i.update(this);this.observer=new mS(this),this.inputState=new jk(this),this.inputState.ensureHandlers(this.plugins),this.docView=new _d(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof $e?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(vy))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=xy(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,h=null;if(u?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(h=null)):this.observer.clear(),s.facet(Z.phrases)!=this.state.facet(Z.phrases))return this.setState(s);i=wo.create(this,s,e),i.flags|=o;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(c&&(c=c.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;c=new ei(d.empty?d:E.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(hl)&&(c=d.value.clip(this.state))}this.viewState.update(i,c),this.bidiCache=So.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(zi)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(gl)!=i.state.facet(gl)&&(this.viewState.mustMeasureContent=!0),(n||r||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(kh))try{f(i)}catch(d){nn(this.state,d,"update listener")}(a||h)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),h&&!fy(this,h)&&u.force&&Zr(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new sp(e),this.plugins=e.facet(Vr).map(r=>new za(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new _d(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Vr),r=e.state.facet(Vr);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new za(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){nn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(P0(r))s=-1,l=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,l=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let h=u.map(d=>{try{return d.read(this)}catch(m){return nn(this.state,m),up}}),c=wo.create(this,this.state,[]),f=!1;c.flags|=a,n?n.flags|=a:n=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),f=this.docView.update(c),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(h[d]!=up)try{let m=u[d];m.write&&m.write(h[d],this)}catch(m){nn(this.state,m)}if(f&&this.docView.updateSelection(!0),!c.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(kh))o(n)}get themeClasses(){return bh+" "+(this.state.facet(Ah)?Cy:Sy)+" "+this.state.facet(gl)}updateAttrs(){let e=hp(this,ry,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(cn)?"true":"false",class:"cm-content",style:`${L.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),hp(this,Wc,n);let r=this.observer.ignore(()=>{let i=gh(this.contentDOM,this.contentAttrs,n),s=gh(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(I.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(zi);let e=this.state.facet(I.cspNonce);qn.mount(this.root,this.styleModules.concat(dS).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Ha(this,e,$d(this,e,n,r))}moveByGroup(e,n){return Ha(this,e,$d(this,e,n,r=>Nk(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return E.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return Tk(this,e,n,r)}moveVertically(e,n,r){return Ha(this,e,Ok(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),uy(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[Rn.find(s,e-i.from,-1,n)];return ea(r,l.dir==Ce.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(ey)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>vS)return K0(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||$0(s.isolates,r=zd(this,e))))return s.order;r||(r=zd(this,e));let i=hk(e.text,n,r);return this.bidiCache.push(new So(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||L.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{N0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return hl.of(new ei(typeof e=="number"?E.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return hl.of(new ei(E.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return pt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return pt.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=qn.newName(),i=[gl.of(r),zi.of(Eh(`.${r}`,e))];return n&&n.dark&&i.push(Ah.of(!0)),i}static baseTheme(e){return Qo.lowest(zi.of(Eh("."+bh,e,Ay)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&re.get(r)||re.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}I.styleModule=zi;I.inputHandler=X0;I.clipboardInputFilter=_c;I.clipboardOutputFilter=Hc;I.scrollHandler=ty;I.focusChangeEffect=Z0;I.perLineTextDirection=ey;I.exceptionSink=J0;I.updateListener=kh;I.editable=cn;I.mouseSelectionStyle=Q0;I.dragMovesSelection=Y0;I.clickAddsSelectionRange=G0;I.decorations=Es;I.outerDecorations=iy;I.atomicRanges=_s;I.bidiIsolatedRanges=sy;I.scrollMargins=ly;I.darkTheme=Ah;I.cspNonce=F.define({combine:t=>t.length?t[0]:""});I.contentAttributes=Wc;I.editorAttributes=ry;I.lineWrapping=I.contentAttributes.of({class:"cm-lineWrapping"});I.announce=le.define();const vS=4096,up={};class So{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Ce.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new So(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function hp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&mh(l,n)}return n}const xS=L.mac?"mac":L.windows?"win":L.linux?"linux":"key";function wS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function yl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const kS=Qo.default(I.domEventHandlers({keydown(t,e){return My(Ey(e.state),t,e,"editor")}})),by=F.define({enables:kS}),cp=new WeakMap;function Ey(t){let e=t.facet(by),n=cp.get(e);return n||cp.set(e,n=AS(e.reduce((r,i)=>r.concat(i),[]))),n}function SS(t,e,n){return My(Ey(t.state),e,t,n)}let On=null;const CS=4e3;function AS(t,e=xS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,h)=>{var c,f;let d=n[l]||(n[l]=Object.create(null)),m=o.split(/ (?!$)/).map(p=>wS(p,e));for(let p=1;p<m.length;p++){let g=m.slice(0,p).join(" ");i(g,!0),d[g]||(d[g]={preventDefault:!0,stopPropagation:!1,run:[v=>{let k=On={view:v,prefix:g,scope:l};return setTimeout(()=>{On==k&&(On=null)},CS),!0}]})}let y=m.join(" ");i(y,!1);let w=d[y]||(d[y]={preventDefault:!1,stopPropagation:!1,run:((f=(c=d._any)===null||c===void 0?void 0:c.run)===null||f===void 0?void 0:f.slice())||[]});a&&w.run.push(a),u&&(w.preventDefault=!0),h&&(w.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let h=n[u]||(n[u]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:c}=l;for(let f in h)h[f].run.push(d=>c(d,Mh))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Mh=null;function My(t,e,n,r){Mh=e;let i=Uw(e),s=f0(i,0),l=d0(s)==i.length&&i!=" ",o="",a=!1,u=!1,h=!1;On&&On.view==n&&On.scope==r&&(o=On.prefix+" ",py.indexOf(e.keyCode)<0&&(u=!0,On=null));let c=new Set,f=w=>{if(w){for(let p of w.run)if(!c.has(p)&&(c.add(p),p(n)))return w.stopPropagation&&(h=!0),!0;w.preventDefault&&(w.stopPropagation&&(h=!0),u=!0)}return!1},d=t[r],m,y;return d&&(f(d[o+yl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(L.windows&&e.ctrlKey&&e.altKey)&&!(L.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(m=Gn[e.keyCode])&&m!=i?(f(d[o+yl(m,e,!0)])||e.shiftKey&&(y=Cs[e.keyCode])!=i&&y!=m&&f(d[o+yl(y,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(d[o+yl(i,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&h&&e.stopPropagation(),Mh=null,a}function bS(){return MS}const ES=U.line({class:"cm-activeLine"}),MS=pt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(ES.range(i.from)),e=i.from)}return U.set(n)}},{decorations:t=>t.decorations}),fp=F.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Co(t,e){let n=t.plugin(Ty),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Ty=pt.fromClass(class{constructor(t){this.input=t.state.facet(Ao),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(fp);this.top=new vl(t,!0,e.topContainer),this.bottom=new vl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(fp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new vl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new vl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Ao);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),h;u<0?(h=a(t.view),o.push(h)):(h=this.panels[u],h.update&&h.update(t)),i.push(h),(h.top?s:l).push(h)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>I.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class vl{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=dp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=dp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function dp(t){let e=t.nextSibling;return t.remove(),e}const Ao=F.define({enables:Ty});class Qn extends hi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Qn.prototype.elementClass="";Qn.prototype.toDOM=void 0;Qn.prototype.mapMode=ht.TrackBefore;Qn.prototype.startSide=Qn.prototype.endSide=-1;Qn.prototype.point=!0;const Ua=F.define(),TS=F.define(),NS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ee.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ns=F.define();function OS(t){return[Ny(),ns.of({...NS,...t})]}const pp=F.define({combine:t=>t.some(e=>e)});function Ny(t){return[PS]}const PS=pt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ns).map(e=>new gp(t,e)),this.fixed=!t.state.facet(pp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(pp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=ee.iter(this.view.state.facet(Ua),this.view.viewport.from),r=[],i=this.gutters.map(s=>new DS(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==At.Text&&l){Th(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==At.Text){Th(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ns),n=t.state.facet(ns),r=t.docChanged||t.heightChanged||t.viewportChanged||!ee.eq(t.startState.facet(Ua),t.state.facet(Ua),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new gp(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>I.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ce.LTR?{left:r,right:i}:{right:r,left:i}})});function mp(t){return Array.isArray(t)?t:[t]}function Th(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class DS{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ee.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new Oy(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Th(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(TS)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class gp{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=mp(n.markers(e)),n.initialSpacer&&(this.spacer=new Oy(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=mp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ee.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Oy{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),LS(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let h=a.elementClass;h&&(r+=" "+h);for(let c=l;c<this.markers.length;c++)if(this.markers[c].compare(a)){o=c,u=!0;break}}else o=this.markers.length;for(;l<o;){let h=this.markers[l++];if(h.toDOM){h.destroy(i);let c=i.nextSibling;i.remove(),i=c}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function LS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const RS=F.define(),BS=F.define(),Ur=F.define({combine(t){return Xo(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class $a extends Qn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ka(t,e){return t.state.facet(Ur).formatNumber(e,t.state)}const IS=ns.compute([Ur],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(RS)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new $a(Ka(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(BS)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Ur)!=e.state.facet(Ur),initialSpacer(e){return new $a(Ka(e,yp(e.state.doc.lines)))},updateSpacer(e,n){let r=Ka(n.view,yp(n.view.state.doc.lines));return r==e.number?e:new $a(r)},domEventHandlers:t.facet(Ur).domEventHandlers,side:"before"}));function FS(t={}){return[Ur.of(t),Ny(),IS]}function yp(t){let e=9;for(;e<t;)e=e*10+9;return e}const jS=1024;let zS=0;class qa{constructor(e,n){this.from=e,this.to=n}}class K{constructor(e={}){this.id=zS++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=lt.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}K.closedBy=new K({deserialize:t=>t.split(" ")});K.openedBy=new K({deserialize:t=>t.split(" ")});K.group=new K({deserialize:t=>t.split(" ")});K.isolate=new K({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});K.contextHash=new K({perNode:!0});K.lookAhead=new K({perNode:!0});K.mounted=new K({perNode:!0});class bo{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[K.mounted.id]}}const _S=Object.create(null);class lt{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):_S,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new lt(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(K.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(K.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}lt.none=new lt("",Object.create(null),0,8);class Kc{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new lt(r.name,i,r.id,r.flags):r)}return new Kc(n)}}const xl=new WeakMap,vp=new WeakMap;var Re;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Re||(Re={}));class fe{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=bo.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Oh(this.topNode,e)}cursorAt(e,n=0,r=0){let i=xl.get(this)||this.topNode,s=new Oh(i);return s.moveTo(e,n),xl.set(this,s._tree),s}get topNode(){return new Et(this,0,0,null)}resolve(e,n=0){let r=Ms(xl.get(this)||this.topNode,e,n,!1);return xl.set(this,r),r}resolveInner(e,n=0){let r=Ms(vp.get(this)||this.topNode,e,n,!0);return vp.set(this,r),r}resolveStack(e,n=0){return VS(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&Re.IncludeAnonymous)>0;for(let a=this.cursor(l|Re.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Yc(lt.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new fe(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new fe(lt.none,n,r,i)))}static build(e){return US(e)}}fe.empty=new fe(lt.none,[],[],0);class qc{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new qc(this.buffer,this.index)}}class Jn{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return lt.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(Py(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new Jn(s,l,this.set)}}function Py(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ms(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Et&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:Re.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Et&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class Dy{cursor(e=0){return new Oh(this,e)}getChild(e,n=null,r=null){let i=xp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return xp(this,e,n,r)}resolve(e,n=0){return Ms(this,e,n,!1)}resolveInner(e,n=0){return Ms(this,e,n,!0)}matchContext(e){return Nh(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Et extends Dy{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let h=o[e],c=a[e]+l.from;if(Py(i,r,c,c+h.length)){if(h instanceof Jn){if(s&Re.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,n,r-c,i);if(f>-1)return new Bn(new HS(l,h,e,c),null,f)}else if(s&Re.IncludeAnonymous||!h.type.isAnonymous||Gc(h)){let f;if(!(s&Re.IgnoreMounts)&&(f=bo.get(h))&&!f.overlay)return new Et(f.tree,c,e,l);let d=new Et(h,c,e,l);return s&Re.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?h.children.length-1:0,n,r,i)}}}if(s&Re.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Re.IgnoreOverlays)&&(i=bo.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Et(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function xp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Nh(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class HS{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Bn extends Dy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Bn(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Re.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Bn(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Bn(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Bn(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new fe(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Ly(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Et&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new WS(i,n)}class WS{constructor(e,n){this.heads=e,this.node=n}get next(){return Ly(this.heads)}}function VS(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Et?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=bo.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Et(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Ms(o,e,n,!1))}}return i?Ly(i):r}class Oh{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Et)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Et?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Re.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Re.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Re.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&Re.IncludeAnonymous||o instanceof Jn||!o.type.isAnonymous||Gc(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Bn(this.buffer,n,this.stack[i]);return this.bufferNode=new Bn(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Nh(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Nh(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function Gc(t){return t.children.some(e=>e instanceof Jn||!e.type.isAnonymous||Gc(e))}function US(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=jS,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new qc(n,n.length):n,a=r.types,u=0,h=0;function c(S,A,C,O,j,T){let{id:z,start:B,end:G,size:X}=o,me=h,ie=u;for(;X<0;)if(o.next(),X==-1){let q=s[z];C.push(q),O.push(B-S);return}else if(X==-3){u=z;return}else if(X==-4){h=z;return}else throw new RangeError(`Unrecognized record size: ${X}`);let $t=a[z],D,_,V=B-S;if(G-B<=i&&(_=w(o.pos-A,j))){let q=new Uint16Array(_.size-_.skip),Y=o.pos-_.size,Te=q.length;for(;o.pos>Y;)Te=p(_.start,q,Te);D=new Jn(q,G-_.start,r),V=_.start-S}else{let q=o.pos-X;o.next();let Y=[],Te=[],Ne=z>=l?z:-1,vt=0,Ze=G;for(;o.pos>q;)Ne>=0&&o.id==Ne&&o.size>=0?(o.end<=Ze-i&&(m(Y,Te,B,vt,o.end,Ze,Ne,me,ie),vt=Y.length,Ze=o.end),o.next()):T>2500?f(B,q,Y,Te):c(B,q,Y,Te,Ne,T+1);if(Ne>=0&&vt>0&&vt<Y.length&&m(Y,Te,B,vt,B,Ze,Ne,me,ie),Y.reverse(),Te.reverse(),Ne>-1&&vt>0){let an=d($t,ie);D=Yc($t,Y,Te,0,Y.length,0,G-B,an,an)}else D=y($t,Y,Te,G-B,me-G,ie)}C.push(D),O.push(V)}function f(S,A,C,O){let j=[],T=0,z=-1;for(;o.pos>A;){let{id:B,start:G,end:X,size:me}=o;if(me>4)o.next();else{if(z>-1&&G<z)break;z<0&&(z=X-i),j.push(B,G,X),T++,o.next()}}if(T){let B=new Uint16Array(T*4),G=j[j.length-2];for(let X=j.length-3,me=0;X>=0;X-=3)B[me++]=j[X],B[me++]=j[X+1]-G,B[me++]=j[X+2]-G,B[me++]=me;C.push(new Jn(B,j[2]-G,r)),O.push(G-S)}}function d(S,A){return(C,O,j)=>{let T=0,z=C.length-1,B,G;if(z>=0&&(B=C[z])instanceof fe){if(!z&&B.type==S&&B.length==j)return B;(G=B.prop(K.lookAhead))&&(T=O[z]+B.length+G)}return y(S,C,O,j,T,A)}}function m(S,A,C,O,j,T,z,B,G){let X=[],me=[];for(;S.length>O;)X.push(S.pop()),me.push(A.pop()+C-j);S.push(y(r.types[z],X,me,T-j,B-T,G)),A.push(j-C)}function y(S,A,C,O,j,T,z){if(T){let B=[K.contextHash,T];z=z?[B].concat(z):[B]}if(j>25){let B=[K.lookAhead,j];z=z?[B].concat(z):[B]}return new fe(S,A,C,O,z)}function w(S,A){let C=o.fork(),O=0,j=0,T=0,z=C.end-i,B={size:0,start:0,skip:0};e:for(let G=C.pos-S;C.pos>G;){let X=C.size;if(C.id==A&&X>=0){B.size=O,B.start=j,B.skip=T,T+=4,O+=4,C.next();continue}let me=C.pos-X;if(X<0||me<G||C.start<z)break;let ie=C.id>=l?4:0,$t=C.start;for(C.next();C.pos>me;){if(C.size<0)if(C.size==-3)ie+=4;else break e;else C.id>=l&&(ie+=4);C.next()}j=$t,O+=X,T+=ie}return(A<0||O==S)&&(B.size=O,B.start=j,B.skip=T),B.size>4?B:void 0}function p(S,A,C){let{id:O,start:j,end:T,size:z}=o;if(o.next(),z>=0&&O<l){let B=C;if(z>4){let G=o.pos-(z-4);for(;o.pos>G;)C=p(S,A,C)}A[--C]=B,A[--C]=T-S,A[--C]=j-S,A[--C]=O}else z==-3?u=O:z==-4&&(h=O);return C}let g=[],v=[];for(;o.pos>0;)c(t.start||0,t.bufferStart||0,g,v,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:g.length?v[0]+g[0].length:0;return new fe(a[t.topID],g.reverse(),v.reverse(),k)}const wp=new WeakMap;function Vl(t,e){if(!t.isAnonymous||e instanceof Jn||e.type!=t)return 1;let n=wp.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof fe)){n=1;break}n+=Vl(t,r)}wp.set(e,n)}return n}function Yc(t,e,n,r,i,s,l,o,a){let u=0;for(let m=r;m<i;m++)u+=Vl(t,e[m]);let h=Math.ceil(u*1.5/8),c=[],f=[];function d(m,y,w,p,g){for(let v=w;v<p;){let k=v,S=y[v],A=Vl(t,m[v]);for(v++;v<p;v++){let C=Vl(t,m[v]);if(A+C>=h)break;A+=C}if(v==k+1){if(A>h){let C=m[k];d(C.children,C.positions,0,C.children.length,y[k]+g);continue}c.push(m[k])}else{let C=y[v-1]+m[v-1].length-S;c.push(Yc(t,m,y,k,v,S,C,null,a))}f.push(S+g-s)}}return d(e,n,r,i,0),(o||a)(c,f,l)}class pr{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new pr(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let h=o<n.length?n[o]:null,c=h?h.fromA:1e9;if(c-a>=r)for(;l&&l.from<c;){let f=l;if(a>=f.from||c<=f.to||u){let d=Math.max(f.from,a)-u,m=Math.min(f.to,c)-u;f=d>=m?null:new pr(d,m,f.tree,f.offset+u,o>0,!!h)}if(f&&i.push(f),l.to>c)break;l=s<e.length?e[s++]:null}if(!h)break;a=h.toA,u=h.toA-h.toB}return i}}class Ry{startParse(e,n,r){return typeof e=="string"&&(e=new $S(e)),r=r?r.length?r.map(i=>new qa(i.from,i.to)):[new qa(0,0)]:[new qa(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class $S{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new K({perNode:!0});let KS=0;class kt{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=KS++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof kt&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new kt(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Eo(e);return r=>r.modified.indexOf(n)>-1?r:Eo.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let qS=0;class Eo{constructor(e){this.name=e,this.instances=[],this.id=qS++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&GS(n,o.modified));if(r)return r;let i=[],s=new kt(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=YS(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(Eo.get(o,a));return s}}function GS(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function YS(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function QS(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let c=0;;){if(o=="..."&&c>0&&c+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),c+=f[0].length,c==i.length)break;let d=i[c++];if(c==i.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);o=i.slice(c)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let h=new Mo(r,l,a>0?s.slice(0,a):null);e[u]=h.sort(e[u])}}return By.add(e)}const By=new K;class Mo{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Mo.empty=new Mo([],2,null);function Iy(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function JS(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function XS(t,e,n,r=0,i=t.length){let s=new ZS(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class ZS{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(l)));let u=i,h=eC(e)||Mo.empty,c=JS(s,h.tags);if(c&&(u&&(u+=" "),u+=c,h.mode==1&&(i+=(i?" ":"")+c)),this.startSpan(Math.max(n,o),u),h.opaque)return;let f=e.tree&&e.tree.prop(K.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+o,1),m=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),y=e.firstChild();for(let w=0,p=o;;w++){let g=w<f.overlay.length?f.overlay[w]:null,v=g?g.from+o:a,k=Math.max(n,p),S=Math.min(r,v);if(k<S&&y)for(;e.from<S&&(this.highlightRange(e,k,S,i,s),this.startSpan(Math.min(S,e.to),u),!(e.to>=v||!e.nextSibling())););if(!g||v>r)break;p=g.to+o,p>n&&(this.highlightRange(d.cursor(),Math.max(n,g.from+o),Math.min(r,p),"",m),this.startSpan(Math.min(r,p),u))}y&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function eC(t){let e=t.type.prop(By);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const P=kt.define,wl=P(),En=P(),kp=P(En),Sp=P(En),Mn=P(),kl=P(Mn),Ga=P(Mn),Jt=P(),rr=P(Jt),Yt=P(),Qt=P(),Ph=P(),Di=P(Ph),Sl=P(),N={comment:wl,lineComment:P(wl),blockComment:P(wl),docComment:P(wl),name:En,variableName:P(En),typeName:kp,tagName:P(kp),propertyName:Sp,attributeName:P(Sp),className:P(En),labelName:P(En),namespace:P(En),macroName:P(En),literal:Mn,string:kl,docString:P(kl),character:P(kl),attributeValue:P(kl),number:Ga,integer:P(Ga),float:P(Ga),bool:P(Mn),regexp:P(Mn),escape:P(Mn),color:P(Mn),url:P(Mn),keyword:Yt,self:P(Yt),null:P(Yt),atom:P(Yt),unit:P(Yt),modifier:P(Yt),operatorKeyword:P(Yt),controlKeyword:P(Yt),definitionKeyword:P(Yt),moduleKeyword:P(Yt),operator:Qt,derefOperator:P(Qt),arithmeticOperator:P(Qt),logicOperator:P(Qt),bitwiseOperator:P(Qt),compareOperator:P(Qt),updateOperator:P(Qt),definitionOperator:P(Qt),typeOperator:P(Qt),controlOperator:P(Qt),punctuation:Ph,separator:P(Ph),bracket:Di,angleBracket:P(Di),squareBracket:P(Di),paren:P(Di),brace:P(Di),content:Jt,heading:rr,heading1:P(rr),heading2:P(rr),heading3:P(rr),heading4:P(rr),heading5:P(rr),heading6:P(rr),contentSeparator:P(Jt),list:P(Jt),quote:P(Jt),emphasis:P(Jt),strong:P(Jt),link:P(Jt),monospace:P(Jt),strikethrough:P(Jt),inserted:P(),deleted:P(),changed:P(),invalid:P(),meta:Sl,documentMeta:P(Sl),annotation:P(Sl),processingInstruction:P(Sl),definition:kt.defineModifier("definition"),constant:kt.defineModifier("constant"),function:kt.defineModifier("function"),standard:kt.defineModifier("standard"),local:kt.defineModifier("local"),special:kt.defineModifier("special")};for(let t in N){let e=N[t];e instanceof kt&&(e.name=t)}Iy([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}]);var Ya;const $r=new K;function tC(t){return F.define({combine:t?e=>e.concat(t):void 0})}const nC=new K;class It{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Z.prototype.hasOwnProperty("tree")||Object.defineProperty(Z.prototype,"tree",{get(){return mt(this)}}),this.parser=n,this.extension=[Xn.of(this),Z.languageData.of((s,l,o)=>{let a=Cp(s,l,o),u=a.type.prop($r);if(!u)return[];let h=s.facet(u),c=a.type.prop(nC);if(c){let f=a.resolve(l-a.from,o);for(let d of c)if(d.test(f,s)){let m=s.facet(d.facet);return d.type=="replace"?m:m.concat(h)}}return h})].concat(r)}isActiveAt(e,n,r=-1){return Cp(e,n,r).type.prop($r)==this.data}findRegions(e){let n=e.facet(Xn);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop($r)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(K.mounted);if(o){if(o.tree.prop($r)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof fe&&i(u,s.positions[a]+l)}};return i(mt(e),0),r}get allowsNesting(){return!0}}It.setState=le.define();function Cp(t,e,n){let r=t.facet(Xn),i=mt(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Re.ExcludeBuffers))s.type.isTop&&(i=s);return i}function mt(t){let e=t.field(It.state,!1);return e?e.tree:fe.empty}class rC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Li=null;class pi{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new pi(e,n,[],fe.empty,0,r,[],null)}startParse(){return this.parser.startParse(new rC(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=fe.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(pr.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(pr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Li;Li=this;try{return e()}finally{Li=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Ap(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,h,c,f)=>a.push({fromA:u,toA:h,fromB:c,toB:f})),r=pr.applyChanges(r,a),i=fe.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let h=e.mapPos(u.from,1),c=e.mapPos(u.to,-1);h<c&&o.push({from:h,to:c})}}}return new pi(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Ap(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Ry{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Li;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new fe(lt.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Li}}function Ap(t,e,n){return pr.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class mi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new mi(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=pi.create(e.facet(Xn).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new mi(r)}}It.state=Wt.define({create:mi.init,update(t,e){for(let n of e.effects)if(n.is(It.setState))return n.value;return e.startState.facet(Xn)!=e.state.facet(Xn)?mi.init(e.state):t.apply(e)}});let Fy=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Fy=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Qa=typeof navigator<"u"&&(!((Ya=navigator.scheduling)===null||Ya===void 0)&&Ya.isInputPending)?()=>navigator.scheduling.isInputPending():null,iC=pt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(It.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(It.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Fy(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(It.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!Qa?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>Qa&&Qa()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:It.setState.of(new mi(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>nn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Xn=F.define({combine(t){return t.length?t[0]:null},enables:t=>[It.state,iC,I.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),sC=F.define(),Qc=F.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Ar(t){let e=t.facet(Qc);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Ts(t,e){let n="",r=t.tabSize,i=t.facet(Qc)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function Jc(t,e){t instanceof Z&&(t=new ra(t));for(let r of t.state.facet(sC)){let i=r(t,e);if(i!==void 0)return i}let n=mt(t.state);return n.length>=e?lC(t,n,e):null}class ra{constructor(e,n={}){this.state=e,this.options=n,this.unit=Ar(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Zo(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const jy=new K;function lC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return zy(r,t,n)}function zy(t,e,n){for(let r=t;r;r=r.next){let i=aC(r.node);if(i)return i(Xc.create(e,n,r))}return 0}function oC(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function aC(t){let e=t.type.prop(jy);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(K.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>fC(l,!0,1,void 0,s&&!oC(l)?i.from:void 0)}return t.parent==null?uC:null}function uC(){return 0}class Xc extends ra{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new Xc(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(hC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return zy(this.context.next,this.base,this.pos)}}function hC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function cC(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function fC(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=cC(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const dC=200;function pC(){return Z.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+dC)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let h=l.doc.lineAt(u);if(h.from==o)continue;o=h.from;let c=Jc(l,h.from);if(c==null)continue;let f=/^\s*/.exec(h.text)[0],d=Ts(l,c);f!=d&&a.push({from:h.from,to:h.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const mC=F.define(),gC=new K;function yC(t,e,n){let r=mt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(gC);if(a&&(o.to<r.length-50||r.length==t.doc.length||!vC(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function vC(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function bp(t,e,n){for(let r of t.facet(mC)){let i=r(t,e,n);if(i)return i}return yC(t,e,n)}function _y(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Hy=le.define({map:_y}),Zc=le.define({map:_y}),To=Wt.define({create(){return U.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=Ep(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Hy)&&!xC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(Wy),i=r?U.replace({widget:new SC(r(e.state,n.value))}):Mp;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(Zc)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=Ep(t,e.selection.main.head)),t},provide:t=>I.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Mp.range(r,i))}return U.set(e,!0)}});function Ep(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function Dh(t,e,n){var r;let i=null;return(r=t.field(To,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function xC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const wC={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Wy=F.define({combine(t){return Xo(t,wC)}});function kC(t){return[To,bC]}function Vy(t,e){let{state:n}=t,r=n.facet(Wy),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=Dh(t.state,o.from,o.to);a&&t.dispatch({effects:Zc.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const Mp=U.replace({widget:new class extends Fs{toDOM(t){return Vy(t,null)}}});class SC extends Fs{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Vy(e,this.value)}}const CC={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ja extends Qn{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function AC(t={}){let e={...CC,...t},n=new Ja(e,!0),r=new Ja(e,!1),i=pt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(Xn)!=l.state.facet(Xn)||l.startState.field(To,!1)!=l.state.field(To,!1)||mt(l.startState)!=mt(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new wr;for(let a of l.viewportLineBlocks){let u=Dh(l.state,a.from,a.to)?r:bp(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,OS({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||ee.empty},initialSpacer(){return new Ja(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=Dh(l.state,o.from,o.to);if(u)return l.dispatch({effects:Zc.of(u)}),!0;let h=bp(l.state,o.from,o.to);return h?(l.dispatch({effects:Hy.of(h)}),!0):!1}}}),kC()]}const bC=I.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ia{constructor(e,n){this.specs=e;let r;function i(o){let a=qn.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof It?o=>o.prop($r)==l.data:l?o=>o==l:void 0,this.style=Iy(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new qn(r):null,this.themeType=n.themeType}static define(e,n){return new ia(e,n||{})}}const Lh=F.define(),EC=F.define({combine(t){return t.length?[t[0]]:null}});function Xa(t){let e=t.facet(Lh);return e.length?e:t.facet(EC)}function MC(t,e){let n=[NC],r;return t instanceof ia&&(t.module&&n.push(I.styleModule.of(t.module)),r=t.themeType),r?n.push(Lh.computeN([I.darkTheme],i=>i.facet(I.darkTheme)==(r=="dark")?[t]:[])):n.push(Lh.of(t)),n}class TC{constructor(e){this.markCache=Object.create(null),this.tree=mt(e.state),this.decorations=this.buildDeco(e,Xa(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=mt(e.state),r=Xa(e.state),i=r!=Xa(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return U.none;let r=new wr;for(let{from:i,to:s}of e.visibleRanges)XS(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=U.mark({class:a})))},i,s);return r.finish()}}const NC=Qo.high(pt.fromClass(TC,{decorations:t=>t.decorations})),OC=I.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Uy=1e4,$y="()[]{}",Ky=F.define({combine(t){return Xo(t,{afterCursor:!0,brackets:$y,maxScanDistance:Uy,renderMatch:LC})}}),PC=U.mark({class:"cm-matchingBracket"}),DC=U.mark({class:"cm-nonmatchingBracket"});function LC(t){let e=[],n=t.matched?PC:DC;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const RC=Wt.define({create(){return U.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Ky);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=rn(e.state,i.head,-1,r)||i.head>0&&rn(e.state,i.head-1,1,r)||r.afterCursor&&(rn(e.state,i.head,1,r)||i.head<e.state.doc.length&&rn(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return U.set(n,!0)},provide:t=>I.decorations.from(t)}),BC=[RC,OC];function IC(t={}){return[Ky.of(t),BC]}const FC=new K;function Rh(t,e,n){let r=t.prop(e<0?K.openedBy:K.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Bh(t){let e=t.type.prop(FC);return e?e(t.node):t}function rn(t,e,n,r={}){let i=r.maxScanDistance||Uy,s=r.brackets||$y,l=mt(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=Rh(a.type,n,s);if(u&&a.from<a.to){let h=Bh(a);if(h&&(n>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return jC(t,e,n,a,h,u,s)}}return zC(t,e,n,l,o.type,i,s)}function jC(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,h=o==null?void 0:o.cursor();if(h&&(n<0?h.childBefore(r.from):h.childAfter(r.to)))do if(n<0?h.to<=r.from:h.from>=r.to){if(u==0&&s.indexOf(h.type.name)>-1&&h.from<h.to){let c=Bh(h);return{start:a,end:c?{from:c.from,to:c.to}:void 0,matched:!0}}else if(Rh(h.type,n,l))u++;else if(Rh(h.type,-n,l)){if(u==0){let c=Bh(h);return{start:a,end:c&&c.from<c.to?{from:c.from,to:c.to}:void 0,matched:!1}}u--}}while(n<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}function zC(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),c=0;for(let f=0;!h.next().done&&f<=s;){let d=h.value;n<0&&(f+=d.length);let m=e+f*n;for(let y=n>0?0:d.length-1,w=n>0?d.length:-1;y!=w;y+=n){let p=l.indexOf(d[y]);if(!(p<0||r.resolveInner(m+y,1).type!=i))if(p%2==0==n>0)c++;else{if(c==1)return{start:u,end:{from:m+y,to:m+y+1},matched:p>>1==a>>1};c--}}n>0&&(f+=d.length)}return h.done?{start:u,matched:!1}:null}function Tp(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class qy{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Tp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Tp(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function _C(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||HC,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||nf,mergeTokens:t.mergeTokens!==!1}}function HC(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const Np=new WeakMap;class ef extends It{constructor(e){let n=tC(e.languageData),r=_C(e),i,s=new class extends Ry{createParse(l,o,a){return new VC(i,l,o,a)}};super(n,s,[],e.name),this.topNode=KC(n,this),i=this,this.streamParser=r,this.stateAfter=new K({perNode:!0}),this.tokenTable=e.tokenTable?new Jy(r.tokenTable):$C}static define(e){return new ef(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=Np.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=tf(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let h=r?r(a.from):-1,c=new qy(a.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;c.pos<u-a.from;)Yy(this.streamParser.token,c,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&Np.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function tf(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof fe&&a<i&&tf(t,o,a,r,i);if(u)return u}return null}function Gy(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof fe){if(!(a=Gy(t,o,n-l,r-l,i)))break;return i?new fe(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function WC(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&tf(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=Gy(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Ar(i):4),tree:fe.empty}}class VC{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=pi.get(),l=i[0].from,{state:o,tree:a}=WC(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Ar(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=pi.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new qy(n,e?e.state.tabSize:4,e?Ar(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=Yy(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=fe.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:UC,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new fe(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new fe(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Yy(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const nf=Object.create(null),Ns=[lt.none],UC=new Kc(Ns),Op=[],Pp=Object.create(null),Qy=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Qy[t]=Xy(nf,e);class Jy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Qy)}resolve(e){return e?this.table[e]||(this.table[e]=Xy(this.extra,e)):0}}const $C=new Jy(nf);function Za(t,e){Op.indexOf(t)>-1||(Op.push(t),console.warn(e))}function Xy(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let h=t[u]||N[u];h?typeof h=="function"?a.length?a=a.map(h):Za(u,`Modifier ${u} used at start of tag`):a.length?Za(u,`Tag ${u} used as modifier`):a=Array.isArray(h)?h:[h]:Za(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=Pp[i];if(s)return s.id;let l=Pp[i]=lt.define({id:Ns.length,name:r,props:[QS({[r]:n})]});return Ns.push(l),l.id}function KC(t,e){let n=lt.define({id:Ns.length,name:"Document",props:[$r.add(()=>t),jy.add(()=>r=>e.getIndent(r))],top:!0});return Ns.push(n),n}Ce.RTL,Ce.LTR;const qC="#e5c07b",Dp="#e06c75",GC="#56b6c2",YC="#ffffff",Ul="#abb2bf",Ih="#7d8799",QC="#61afef",JC="#98c379",Lp="#d19a66",XC="#c678dd",ZC="#21252b",Rp="#2c313a",Bp="#282c34",eu="#353a42",e2="#3E4451",Ip="#528bff",t2=I.theme({"&":{color:Ul,backgroundColor:Bp},".cm-content":{caretColor:Ip},".cm-cursor, .cm-dropCursor":{borderLeftColor:Ip},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:e2},".cm-panels":{backgroundColor:ZC,color:Ul},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Bp,color:Ih,border:"none"},".cm-activeLineGutter":{backgroundColor:Rp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:eu},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:eu,borderBottomColor:eu},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Rp,color:Ul}}},{dark:!0}),n2=ia.define([{tag:N.keyword,color:XC},{tag:[N.name,N.deleted,N.character,N.propertyName,N.macroName],color:Dp},{tag:[N.function(N.variableName),N.labelName],color:QC},{tag:[N.color,N.constant(N.name),N.standard(N.name)],color:Lp},{tag:[N.definition(N.name),N.separator],color:Ul},{tag:[N.typeName,N.className,N.number,N.changed,N.annotation,N.modifier,N.self,N.namespace],color:qC},{tag:[N.operator,N.operatorKeyword,N.url,N.escape,N.regexp,N.link,N.special(N.string)],color:GC},{tag:[N.meta,N.comment],color:Ih},{tag:N.strong,fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.link,color:Ih,textDecoration:"underline"},{tag:N.heading,fontWeight:"bold",color:Dp},{tag:[N.atom,N.bool,N.special(N.variableName)],color:Lp},{tag:[N.processingInstruction,N.string,N.inserted],color:JC},{tag:N.invalid,color:YC}]),r2=[t2,MC(n2)],i2=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=sf(t.state,n.from);return r.line?s2(t):r.block?o2(t):!1};function rf(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const s2=rf(h2,0),l2=rf(Zy,0),o2=rf((t,e)=>Zy(t,e,u2(e)),0);function sf(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Ri=50;function a2(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Ri,r),l=t.sliceDoc(i,i+Ri),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let h,c;i-r<=2*Ri?h=c=t.sliceDoc(r,i):(h=t.sliceDoc(r,r+Ri),c=t.sliceDoc(i-Ri,i));let f=/^\s*/.exec(h)[0].length,d=/\s*$/.exec(c)[0].length,m=c.length-d-n.length;return h.slice(f,f+e.length)==e&&c.slice(m,m+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(h.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(c.charAt(m-1))?1:0}}:null}function u2(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Zy(t,e,n=e.selection.ranges){let r=n.map(s=>sf(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>a2(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:h}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:h.pos-h.margin,to:h.pos+a.close.length})}return{changes:s}}return null}function h2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=sf(e,s).line;if(u){for(let h=s;h<=l;){let c=e.doc.lineAt(h);if(c.from>i&&(s==l||l>c.from)){i=c.from;let f=/^\s*/.exec(c.text)[0].length,d=f==c.length,m=c.text.slice(f,f+u.length)==u?f:-1;f<c.text.length&&f<a&&(a=f),r.push({line:c,comment:m,token:u,indent:f,empty:d,single:!1})}h=c.to+1}if(a<1e9)for(let h=o;h<r.length;h++)r[h].indent<r[h].line.text.length&&(r[h].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:h,single:c}of r)(c||!h)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,h=u+a.length;l.text[h-l.from]==" "&&h++,s.push({from:u,to:h})}return{changes:s}}return null}function wi(t,e){return E.create(t.ranges.map(e),t.mainIndex)}function Vt(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ut({state:t,dispatch:e},n){let r=wi(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Vt(t,r)),!0)}function sa(t,e){return E.cursor(e?t.to:t.from)}function ev(t,e){return Ut(t,n=>n.empty?t.moveByChar(n,e):sa(n,e))}function qe(t){return t.textDirectionAt(t.state.selection.main.head)==Ce.LTR}const tv=t=>ev(t,!qe(t)),nv=t=>ev(t,qe(t));function rv(t,e){return Ut(t,n=>n.empty?t.moveByGroup(n,e):sa(n,e))}const c2=t=>rv(t,!qe(t)),f2=t=>rv(t,qe(t));function d2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function la(t,e,n){let r=mt(t).resolveInner(e.head),i=n?K.closedBy:K.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;d2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?rn(t,r.from,1):rn(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,E.cursor(o,n?-1:1)}const p2=t=>Ut(t,e=>la(t.state,e,!qe(t))),m2=t=>Ut(t,e=>la(t.state,e,qe(t)));function iv(t,e){return Ut(t,n=>{if(!n.empty)return sa(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const sv=t=>iv(t,!1),lv=t=>iv(t,!0);function ov(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(I.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function av(t,e){let n=ov(t),{state:r}=t,i=wi(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):sa(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=I.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(Vt(r,i),{effects:s}),!0}const Fp=t=>av(t,!1),Fh=t=>av(t,!0);function nr(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=E.cursor(r.from+s))}return i}const g2=t=>Ut(t,e=>nr(t,e,!0)),y2=t=>Ut(t,e=>nr(t,e,!1)),v2=t=>Ut(t,e=>nr(t,e,!qe(t))),x2=t=>Ut(t,e=>nr(t,e,qe(t))),w2=t=>Ut(t,e=>E.cursor(t.lineBlockAt(e.head).from,1)),k2=t=>Ut(t,e=>E.cursor(t.lineBlockAt(e.head).to,-1));function S2(t,e,n){let r=!1,i=wi(t.selection,s=>{let l=rn(t,s.head,-1)||rn(t,s.head,1)||s.head>0&&rn(t,s.head-1,1)||s.head<t.doc.length&&rn(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return E.cursor(o)});return r?(e(Vt(t,i)),!0):!1}const C2=({state:t,dispatch:e})=>S2(t,e);function Ot(t,e){let n=wi(t.state.selection,r=>{let i=e(r);return E.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Vt(t.state,n)),!0)}function uv(t,e){return Ot(t,n=>t.moveByChar(n,e))}const hv=t=>uv(t,!qe(t)),cv=t=>uv(t,qe(t));function fv(t,e){return Ot(t,n=>t.moveByGroup(n,e))}const A2=t=>fv(t,!qe(t)),b2=t=>fv(t,qe(t)),E2=t=>Ot(t,e=>la(t.state,e,!qe(t))),M2=t=>Ot(t,e=>la(t.state,e,qe(t)));function dv(t,e){return Ot(t,n=>t.moveVertically(n,e))}const pv=t=>dv(t,!1),mv=t=>dv(t,!0);function gv(t,e){return Ot(t,n=>t.moveVertically(n,e,ov(t).height))}const jp=t=>gv(t,!1),zp=t=>gv(t,!0),T2=t=>Ot(t,e=>nr(t,e,!0)),N2=t=>Ot(t,e=>nr(t,e,!1)),O2=t=>Ot(t,e=>nr(t,e,!qe(t))),P2=t=>Ot(t,e=>nr(t,e,qe(t))),D2=t=>Ot(t,e=>E.cursor(t.lineBlockAt(e.head).from)),L2=t=>Ot(t,e=>E.cursor(t.lineBlockAt(e.head).to)),_p=({state:t,dispatch:e})=>(e(Vt(t,{anchor:0})),!0),Hp=({state:t,dispatch:e})=>(e(Vt(t,{anchor:t.doc.length})),!0),Wp=({state:t,dispatch:e})=>(e(Vt(t,{anchor:t.selection.main.anchor,head:0})),!0),Vp=({state:t,dispatch:e})=>(e(Vt(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),R2=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),B2=({state:t,dispatch:e})=>{let n=oa(t).map(({from:r,to:i})=>E.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:E.create(n),userEvent:"select"})),!0},I2=({state:t,dispatch:e})=>{let n=wi(t.selection,r=>{let i=mt(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return E.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(Vt(t,n)),!0)};function yv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(Vt(n,E.create(i,i.length-1))),!0)}const F2=t=>yv(t,!1),j2=t=>yv(t,!0),z2=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=E.create([n.main]):n.main.empty||(r=E.create([E.cursor(n.main.head)])),r?(e(Vt(t,r)),!0):!1};function Hs(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=Cl(t,a,!1)):a>l&&(n="delete.forward",a=Cl(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=Cl(t,l,!1),o=Cl(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:E.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?I.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Cl(t,e,n){if(t instanceof I)for(let r of t.state.facet(I.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const vv=(t,e,n)=>Hs(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=Zo(o,s.tabSize),h=u%Ar(s)||Ar(s);for(let c=0;c<h&&o[o.length-1-c]==" ";c++)i--;a=i}else a=Be(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=Be(l.text,a-l.from,!1,!1)+l.from);return a}),jh=t=>vv(t,!1,!0),xv=t=>vv(t,!0,!1),wv=(t,e)=>Hs(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=Be(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),h=l(u);if(o!=null&&h!=o)break;(u!=" "||r!=n.head)&&(o=h),r=a}return r}),kv=t=>wv(t,!1),_2=t=>wv(t,!0),H2=t=>Hs(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),W2=t=>Hs(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),V2=t=>Hs(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),U2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Q.of(["",""])},range:E.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},$2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:Be(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:Be(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:E.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function oa(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Sv(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of oa(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(E.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(E.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:E.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const K2=({state:t,dispatch:e})=>Sv(t,e,!1),q2=({state:t,dispatch:e})=>Sv(t,e,!0);function Cv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of oa(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const G2=({state:t,dispatch:e})=>Cv(t,e,!1),Y2=({state:t,dispatch:e})=>Cv(t,e,!0),Q2=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(oa(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=wi(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function J2(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=mt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(K.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const Up=Av(!1),X2=Av(!0);function Av(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&J2(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new ra(e,{simulateBreak:s,simulateDoubleBreak:!!a}),h=Jc(u,s);for(h==null&&(h=Zo(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let c=["",Ts(e,h)];return a&&c.push(Ts(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:Q.of(c)},range:E.cursor(s+1+c[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function lf(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:E.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const Z2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new ra(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=lf(t,(s,l,o)=>{let a=Jc(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],h=Ts(t,a);(u!=h||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:h}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},eA=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(lf(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Qc)})}),{userEvent:"input.indent"})),!0),tA=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(lf(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Zo(i,t.tabSize),l=0,o=Ts(t,Math.max(0,s-Ar(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),nA=t=>(t.setTabFocusMode(),!0),rA=[{key:"Ctrl-b",run:tv,shift:hv,preventDefault:!0},{key:"Ctrl-f",run:nv,shift:cv},{key:"Ctrl-p",run:sv,shift:pv},{key:"Ctrl-n",run:lv,shift:mv},{key:"Ctrl-a",run:w2,shift:D2},{key:"Ctrl-e",run:k2,shift:L2},{key:"Ctrl-d",run:xv},{key:"Ctrl-h",run:jh},{key:"Ctrl-k",run:H2},{key:"Ctrl-Alt-h",run:kv},{key:"Ctrl-o",run:U2},{key:"Ctrl-t",run:$2},{key:"Ctrl-v",run:Fh}],iA=[{key:"ArrowLeft",run:tv,shift:hv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:c2,shift:A2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:v2,shift:O2,preventDefault:!0},{key:"ArrowRight",run:nv,shift:cv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:f2,shift:b2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:x2,shift:P2,preventDefault:!0},{key:"ArrowUp",run:sv,shift:pv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:_p,shift:Wp},{mac:"Ctrl-ArrowUp",run:Fp,shift:jp},{key:"ArrowDown",run:lv,shift:mv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Hp,shift:Vp},{mac:"Ctrl-ArrowDown",run:Fh,shift:zp},{key:"PageUp",run:Fp,shift:jp},{key:"PageDown",run:Fh,shift:zp},{key:"Home",run:y2,shift:N2,preventDefault:!0},{key:"Mod-Home",run:_p,shift:Wp},{key:"End",run:g2,shift:T2,preventDefault:!0},{key:"Mod-End",run:Hp,shift:Vp},{key:"Enter",run:Up,shift:Up},{key:"Mod-a",run:R2},{key:"Backspace",run:jh,shift:jh,preventDefault:!0},{key:"Delete",run:xv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:kv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:_2,preventDefault:!0},{mac:"Mod-Backspace",run:W2,preventDefault:!0},{mac:"Mod-Delete",run:V2,preventDefault:!0}].concat(rA.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),sA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:p2,shift:E2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:m2,shift:M2},{key:"Alt-ArrowUp",run:K2},{key:"Shift-Alt-ArrowUp",run:G2},{key:"Alt-ArrowDown",run:q2},{key:"Shift-Alt-ArrowDown",run:Y2},{key:"Mod-Alt-ArrowUp",run:F2},{key:"Mod-Alt-ArrowDown",run:j2},{key:"Escape",run:z2},{key:"Mod-Enter",run:X2},{key:"Alt-l",mac:"Ctrl-l",run:B2},{key:"Mod-i",run:I2,preventDefault:!0},{key:"Mod-[",run:tA},{key:"Mod-]",run:eA},{key:"Mod-Alt-\\",run:Z2},{key:"Shift-Mod-k",run:Q2},{key:"Shift-Mod-\\",run:C2},{key:"Mod-/",run:i2},{key:"Alt-A",run:l2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:nA}].concat(iA),$p=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Os{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s($p(o)):$p,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return f0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Mw(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=d0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Os.prototype[Symbol.iterator]=function(){return this});const bv={from:-1,to:-1,match:/.*/.exec("")},of="gm"+(/x/.unicode==null?"":"u");class Ev{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=bv,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Mv(e,n,r,i,s);this.re=new RegExp(n,of+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=No(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=No(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const tu=new WeakMap;class ti{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=tu.get(e);if(!i||i.from>=r||i.to<=n){let o=new ti(n,e.sliceString(n,r));return tu.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),tu.set(e,new ti(l,s)),new ti(n,s.slice(n-l,r-l))}}class Mv{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=bv,this.matchPos=No(e,i),this.re=new RegExp(n,of+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=ti.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=No(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ti.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Ev.prototype[Symbol.iterator]=Mv.prototype[Symbol.iterator]=function(){return this});function lA(t){try{return new RegExp(t,of),!0}catch{return!1}}function No(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function zh(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Pe("input",{class:"cm-textfield",name:"line",value:e}),r=Pe("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:rs.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Pe("label",t.state.phrase("Go to line"),": ",n)," ",Pe("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Pe("button",{name:"close",onclick:()=>{t.dispatch({effects:rs.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,h,c]=s,f=h?+h.slice(1):0,d=u?+u:o.number;if(u&&c){let w=d/100;a&&(w=w*(a=="-"?-1:1)+o.number/l.doc.lines),d=Math.round(l.doc.lines*w)}else u&&a&&(d=d*(a=="-"?-1:1)+o.number);let m=l.doc.line(Math.max(1,Math.min(l.doc.lines,d))),y=E.cursor(m.from+Math.max(0,Math.min(f,m.length)));t.dispatch({effects:[rs.of(!1),I.scrollIntoView(y.from,{y:"center"})],selection:y}),t.focus()}return{dom:r}}const rs=le.define(),Kp=Wt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(rs)&&(t=n.value);return t},provide:t=>Ao.from(t,e=>e?zh:null)}),oA=t=>{let e=Co(t,zh);if(!e){let n=[rs.of(!0)];t.state.field(Kp,!1)==null&&n.push(le.appendConfig.of([Kp,aA])),t.dispatch({effects:n}),e=Co(t,zh)}return e&&e.dom.querySelector("input").select(),!0},aA=I.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),uA=({state:t,dispatch:e})=>{let{selection:n}=t,r=E.create(n.ranges.map(i=>t.wordAt(i.head)||E.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function hA(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Os(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Os(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const cA=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return uA({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=hA(t,r);return i?(e(t.update({selection:t.selection.addRange(E.range(i.from,i.to),!1),effects:I.scrollIntoView(i.to)})),!0):!1},ki=F.define({combine(t){return Xo(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new CA(e),scrollToMatch:e=>I.scrollIntoView(e)})}});class Tv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||lA(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new mA(this):new dA(this)}getCursor(e,n=0,r){let i=e.doc?e:Z.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Or(this,i,n,r):Nr(this,i,n,r)}}class Nv{constructor(e){this.spec=e}}function Nr(t,e,n,r){return new Os(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?fA(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function fA(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Oo(i,n-s))!=Ie.Word||e(Po(i,n-s))!=Ie.Word)&&(e(Po(i,r-s))!=Ie.Word||e(Oo(i,r-s))!=Ie.Word))}class dA extends Nv{constructor(e){super(e)}nextMatch(e,n,r){let i=Nr(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Nr(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Nr(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Nr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Nr(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Or(t,e,n,r){return new Ev(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?pA(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Oo(t,e){return t.slice(Be(t,e,!1),e)}function Po(t,e){return t.slice(e,Be(t,e))}function pA(t){return(e,n,r)=>!r[0].length||(t(Oo(r.input,r.index))!=Ie.Word||t(Po(r.input,r.index))!=Ie.Word)&&(t(Po(r.input,r.index+r[0].length))!=Ie.Word||t(Oo(r.input,r.index+r[0].length))!=Ie.Word)}class mA extends Nv{nextMatch(e,n,r){let i=Or(this.spec,e,r,e.doc.length).next();return i.done&&(i=Or(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Or(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Or(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Or(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Ps=le.define(),af=le.define(),Un=Wt.define({create(t){return new nu(_h(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ps)?t=new nu(n.value.create(),t.panel):n.is(af)&&(t=new nu(t.query,n.value?uf:null));return t},provide:t=>Ao.from(t,e=>e.panel)});class nu{constructor(e,n){this.query=e,this.panel=n}}const gA=U.mark({class:"cm-searchMatch"}),yA=U.mark({class:"cm-searchMatch cm-searchMatch-selected"}),vA=pt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Un))}update(t){let e=t.state.field(Un);(e!=t.startState.field(Un)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return U.none;let{view:n}=this,r=new wr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,h)=>{let c=n.state.selection.ranges.some(f=>f.from==u&&f.to==h);r.add(u,h,c?yA:gA)})}return r.finish()}},{decorations:t=>t.decorations});function Ws(t){return e=>{let n=e.state.field(Un,!1);return n&&n.query.spec.valid?t(e,n):Dv(e)}}const Do=Ws((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=E.single(r.from,r.to),s=t.state.facet(ki);return t.dispatch({selection:i,effects:[hf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),Pv(t),!0}),Lo=Ws((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=E.single(i.from,i.to),l=t.state.facet(ki);return t.dispatch({selection:s,effects:[hf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),Pv(t),!0}),xA=Ws((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:E.create(n.map(r=>E.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),wA=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Os(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(E.range(o.value.from,o.value.to))}return e(t.update({selection:E.create(s,l),userEvent:"select.search.matches"})),!0},qp=Ws((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,h=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),h.push(I.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let c=t.state.changes(o);return l&&(a=E.single(l.from,l.to).map(c),h.push(hf(t,l)),h.push(n.facet(ki).scrollToMatch(a.main,t))),t.dispatch({changes:c,selection:a,effects:h,userEvent:"input.replace"}),!0}),kA=Ws((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:I.announce.of(r),userEvent:"input.replace.all"}),!0});function uf(t){return t.state.facet(ki).createPanel(t)}function _h(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(ki);return new Tv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function Ov(t){let e=Co(t,uf);return e&&e.dom.querySelector("[main-field]")}function Pv(t){let e=Ov(t);e&&e==t.root.activeElement&&e.select()}const Dv=t=>{let e=t.state.field(Un,!1);if(e&&e.panel){let n=Ov(t);if(n&&n!=t.root.activeElement){let r=_h(t.state,e.query.spec);r.valid&&t.dispatch({effects:Ps.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[af.of(!0),e?Ps.of(_h(t.state,e.query.spec)):le.appendConfig.of(bA)]});return!0},Lv=t=>{let e=t.state.field(Un,!1);if(!e||!e.panel)return!1;let n=Co(t,uf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:af.of(!1)}),!0},SA=[{key:"Mod-f",run:Dv,scope:"editor search-panel"},{key:"F3",run:Do,shift:Lo,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Do,shift:Lo,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Lv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:wA},{key:"Mod-Alt-g",run:oA},{key:"Mod-d",run:cA,preventDefault:!0}];class CA{constructor(e){this.view=e;let n=this.query=e.state.field(Un).query.spec;this.commit=this.commit.bind(this),this.searchField=Pe("input",{value:n.search,placeholder:ot(e,"Find"),"aria-label":ot(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Pe("input",{value:n.replace,placeholder:ot(e,"Replace"),"aria-label":ot(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Pe("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Pe("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Pe("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return Pe("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=Pe("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Do(e),[ot(e,"next")]),r("prev",()=>Lo(e),[ot(e,"previous")]),r("select",()=>xA(e),[ot(e,"all")]),Pe("label",null,[this.caseField,ot(e,"match case")]),Pe("label",null,[this.reField,ot(e,"regexp")]),Pe("label",null,[this.wordField,ot(e,"by word")]),...e.state.readOnly?[]:[Pe("br"),this.replaceField,r("replace",()=>qp(e),[ot(e,"replace")]),r("replaceAll",()=>kA(e),[ot(e,"replace all")])],Pe("button",{name:"close",onclick:()=>Lv(e),"aria-label":ot(e,"close"),type:"button"},[""])])}commit(){let e=new Tv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ps.of(e)}))}keydown(e){SS(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Lo:Do)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),qp(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Ps)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ki).top}}function ot(t,e){return t.state.phrase(e)}const Al=30,bl=/[\s\.,:;?!]/;function hf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Al),l=Math.min(i,n+Al),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<Al;a++)if(!bl.test(o[a+1])&&bl.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-Al;a--)if(!bl.test(o[a-1])&&bl.test(o[a])){o=o.slice(0,a);break}}return I.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const AA=I.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),bA=[Un,Qo.low(vA),AA],Dt={PAGE_BREAK:/^\={3,}$/,CHARACTER:/^([A-Z][A-Z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,CHARACTER_POWER_USER:/^(?:@)([A-Za-z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,SCENE:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,TRANSITION:/^((?:FADE (?:IN|TO BLACK|OUT)|CUT TO BLACK)[\:\.]?|.+ TO\:)/i,TRANSITION_POWER_USER:/^(?:> )(.+)/i,TITLE:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,SECTION:/^(#{1,4})\ (.*)/,MILESTONE:/^(?:\ +)?-\ (.+)/,IMAGE:/^(\[i\]https:\/\/(.+))/i,AUDIO:/^(\[a\]https:\/\/(.+))/i},EA=ef.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(Dt.TRANSITION)||t.match(Dt.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(Dt.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(Dt.CHARACTER))||(n=t.match(Dt.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(Dt.IMAGE)||t.match(Dt.AUDIO)?"link":t.match(Dt.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(Dt.TITLE))return t.skipTo(":"),t.next(),"def";if(n=t.match(Dt.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(Dt.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),MA=pt.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push(U.line({class:"cm-keyword"}).range(s.from)),e.push(U.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push(U.line({class:"cm-header"}).range(s.from)),e.push(U.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push(U.line({class:"cm-atom"}).range(s.from)),e.push(U.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push(U.line({class:"cm-synopsis"}).range(s.from)),e.push(U.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push(U.line({class:"cm-number"}).range(s.from)),e.push(U.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push(U.line({class:"cm-variable"}).range(s.from)),e.push(U.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return U.set(e)}},{decorations:t=>t.decorations}),Rv=H.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=H.useRef(null),l=H.useRef(null);return H.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:I.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),H.useEffect(()=>{if(!s.current)return;const o=[FS(),bS(),AC(),IC(),pC(),I.lineWrapping,EA,MA,I.domEventHandlers({mouseup:(h,c)=>{setTimeout(()=>{const f=c.state.selection.main.head,d=c.state.doc.lineAt(f);n(d.number-1)},10)}}),r2,by.of([...sA,...SA]),I.updateListener.of(h=>{if(h.docChanged&&e(h.state.doc.toString()),h.selectionSet&&!h.docChanged){const c=h.state.selection.main.head,f=h.state.doc.lineAt(c);n(f.number-1)}}),I.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=Z.create({doc:t,extensions:o}),u=new I({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),H.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),x.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});Rv.displayName="CodeMirrorEditor";function TA(t=""){const[e,n]=H.useState([]),[r,i]=H.useState([]),[s,l]=H.useState(new Map),o=H.useRef(null),[a,u]=H.useState(!0);return H.useEffect(()=>{if(!a){if(t){const c=aa(t);n(c.blocks),i(c.characters),l(c.characterLineCounts)}return}(function(){try{const c=new Worker(new URL("/assets/previewWorker-D6jE4gsy.js",import.meta.url),{type:"module"});return c.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},c.onmessage=f=>{const{type:d,blocks:m,characters:y,characterLineCounts:w}=f.data;d==="result"?(n(m||[]),i(y||[]),l(w||new Map)):d==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=c,t&&c.postMessage({type:"process",text:t}),()=>{try{c.terminate()}catch{}}}catch(c){console.error("Failed to create module worker, falling back to main-thread parsing:",c),u(!1)}})()},[a]),H.useEffect(()=>{if(!a&&t){const c=aa(t);n(c.blocks),i(c.characters),l(c.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:c=>{if(a&&o.current)o.current.postMessage({type:"process",text:c});else{const f=aa(c);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let NA=1;function OA(){const t=H.useRef(null),e=H.useRef(new Map),[n,r]=H.useState([]),i=H.useRef(!1);H.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=H.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-BvckRB4Y.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:h,requestId:c,message:f}=a.data||{};if(c&&e.current.has(c)){const{resolve:d,reject:m}=e.current.get(c);if(e.current.delete(c),u==="panels")try{d(h)}catch{}else if(u==="error")try{m(new Error(f||"worker error"))}catch{}else try{m(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(h)&&r(h)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=H.useCallback(o=>{const a=s();if(!a)try{const h=$v(o);return r(h),Promise.resolve(h)}catch(h){return Promise.reject(h)}const u=String(NA++);return new Promise((h,c)=>{e.current.set(u,{resolve:h,reject:c});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),c(f)}}).then(h=>(i.current&&r(h),h))},[s]);return{panels:n,parsePanels:l}}const ru=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Heydid the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE  CODING AND COFFEE\r
\r
 Keys clack.  \r
 Tests blink green, then red, then righteous green again.  \r
 A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pingsjust shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing  preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open  payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function PA(){const[t,e]=H.useState(!1),[n,r]=H.useState(""),[i,s]=H.useState(!1),[l,o]=H.useState(!1),[a,u]=H.useState("edit"),[h,c]=H.useState(0),[f,d]=H.useState(!1),[m,y]=H.useState(null),w=H.useRef(null),p=H.useRef(null),g=H.useRef([]),v=H.useRef(null),[k,S]=H.useState(!1);H.useEffect(()=>{const b=localStorage.getItem("fountain-script");let W=ru;if(b)try{const Ae=JSON.parse(b);W=Ae.content,d(!0),y(new Date(Ae.savedAt))}catch(Ae){console.error("Error parsing saved script:",Ae),localStorage.removeItem("fountain-script")}r(W),j(W);try{typeof z=="function"&&z(W)}catch{}},[]),H.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const W=navigator.userAgent||"",Ae=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(W),ze=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,Kt=(window.innerWidth||screen.width||0)<1024;(Ae||ze&&Kt)&&e(!0)}catch{}},[]);const{blocks:A,characters:C,characterLineCounts:O,processText:j}=TA(""),{panels:T,parsePanels:z}=OA(),[B,G]=H.useState(0),[X,me]=H.useState("screenplay"),ie=H.useRef(null),[$t,D]=H.useState(!1);H.useEffect(()=>{g.current=A},[A]);const _=b=>{r(b),j(b);try{typeof z=="function"&&z(b)}catch{}},V=()=>{!Array.isArray(T)||T.length===0||G(b=>{const W=T.length;return((b-1)%W+W)%W})},q=()=>{!Array.isArray(T)||T.length===0||G(b=>{const W=T.length;return(b+1)%W})},Y=async()=>{try{if(!ie.current)return;await ie.current.play(),D(!0)}catch(b){console.warn("Play failed",b)}},Te=()=>{ie.current&&(ie.current.pause(),D(!1))},Ne=()=>{if(ie.current){ie.current.pause();try{ie.current.currentTime=0}catch{}D(!1)}};H.useEffect(()=>{const b=ie.current;if(!b)return;const W=()=>D(!0),Ae=()=>D(!1),ze=()=>{D(!1),q()};return b.addEventListener("play",W),b.addEventListener("pause",Ae),b.addEventListener("ended",ze),()=>{b.removeEventListener("play",W),b.removeEventListener("pause",Ae),b.removeEventListener("ended",ze)}},[B,T]),H.useEffect(()=>{if(ie.current){try{ie.current.pause(),ie.current.currentTime=0}catch{}D(!1)}},[B]),H.useEffect(()=>{try{const b=T&&T.length>0&&T[B]?T[B]:null;console.log("Player will render panel:",{index:B,panel:b})}catch{}},[T,B]);const vt=()=>{if(n.trim()){const b={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(b)),d(!0),y(new Date)}},Ze=()=>{const b=localStorage.getItem("fountain-script");if(b)try{const W=JSON.parse(b);r(W.content),j(W.content),y(new Date(W.savedAt))}catch(W){console.error("Error loading saved script:",W)}},an=()=>{localStorage.removeItem("fountain-script"),d(!1),y(null),r(ru),j(ru)},Bv=async()=>{try{await navigator.clipboard.writeText(n)}catch{const W=document.createElement("textarea");W.value=n,document.body.appendChild(W),W.select(),document.execCommand("copy"),document.body.removeChild(W)}},Iv=async()=>{try{const b=await navigator.clipboard.readText();r(b),j(b)}catch(b){console.error("Error pasting from clipboard:",b)}},Fv=()=>{r(""),j("");try{p.current&&p.current.focus&&p.current.focus()}catch{}},jv=H.useCallback(b=>{const W=g.current;if(c(b),w.current&&W.length>0){let Ae=null;for(let ze=W.length-1;ze>=0;ze--)if(W[ze].index<=b){Ae=W[ze];break}if(Ae){const ze=w.current.querySelector(`[data-line-id="${Ae.id}"]`);if(ze){const Kt=w.current,cf=Kt.getBoundingClientRect(),ff=ze.getBoundingClientRect(),Hv=ff.top-cf.top,Wv=cf.height,Vv=ff.height,Uv=Kt.scrollTop+Hv-Wv/2+Vv/2;Kt.scrollTo({top:Uv,behavior:"smooth"})}}}},[]),zv=H.useCallback(b=>{p.current&&p.current.scrollToLine&&p.current.scrollToLine(b)},[]);H.useEffect(()=>{const b=W=>{W.key==="Escape"&&(i?s(!1):l&&o(!1))};if(i||l)return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[i,l]),H.useEffect(()=>{const b=()=>{S(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",b),()=>document.removeEventListener("fullscreenchange",b)},[]);const _v=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),S(!1)):v.current&&v.current.requestFullscreen?(await v.current.requestFullscreen(),S(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),S(!0))}catch(b){console.error("Fullscreen toggle failed",b)}};return x.jsxs("div",{className:"fountain-app",ref:v,children:[t&&x.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:x.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),children:[x.jsxs("div",{className:"modal-header",children:[x.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),x.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:""})]}),x.jsxs("div",{className:"modal-body",children:[x.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),x.jsxs("p",{style:{marginTop:"1rem"},children:[x.jsx("strong",{children:"How to:"}),' open your browser menu () and choose "Desktop site" or "Request desktop site".']})]}),x.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:x.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"Got it"})})]})}),x.jsxs("div",{className:"persistence-toolbar",children:[x.jsxs("div",{className:"toolbar-group",children:[x.jsxs("button",{className:`toolbar-btn ${n.trim()?"":"disabled"}`,onClick:vt,disabled:!n.trim(),title:"Save current script to browser storage",children:[x.jsx("i",{className:"fas fa-save"}),"Save"]}),x.jsxs("button",{className:`toolbar-btn ${f?"":"disabled"}`,onClick:Ze,disabled:!f,title:m?`Load saved script (${m.toLocaleDateString()} ${m.toLocaleTimeString()})`:"Load saved script",children:[x.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),x.jsxs("button",{className:"toolbar-btn",onClick:Bv,title:"Copy editor contents to clipboard",children:[x.jsx("i",{className:"fas fa-copy"}),"Copy"]}),x.jsxs("button",{className:"toolbar-btn",onClick:Iv,title:"Paste from clipboard to editor",children:[x.jsx("i",{className:"fas fa-paste"}),"Paste"]}),x.jsxs("button",{className:`toolbar-btn danger ${n.trim()?"":"disabled"}`,onClick:Fv,disabled:!n.trim(),title:"Clear editor contents",children:[x.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),x.jsxs("button",{className:`toolbar-btn danger ${f?"":"disabled"}`,onClick:an,disabled:!f,title:"Clear saved script from storage",children:[x.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),x.jsx("div",{className:"toolbar-divider"}),x.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>s(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[x.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),x.jsxs("button",{className:`toolbar-btn character-btn ${C.length===0?"disabled":""}`,onClick:()=>C.length>0&&o(!0),title:C.length>0?"Character List":"No characters found",disabled:C.length===0,children:[x.jsx("i",{className:"fas fa-user"}),"Characters",C.length>0&&x.jsx("span",{className:"character-count-badge",children:C.length})]})]}),m&&x.jsxs("div",{className:"last-saved",children:["Last saved: ",m.toLocaleDateString()," at ",m.toLocaleTimeString()]})]}),x.jsx("div",{className:"mobile-view-toggle",children:x.jsx("div",{className:"tabs is-centered",children:x.jsxs("ul",{children:[x.jsx("li",{className:a==="edit"?"is-active":"",children:x.jsxs("a",{onClick:()=>u("edit"),children:[x.jsx("span",{className:"icon is-small",children:x.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),x.jsx("span",{children:"Edit"})]})}),x.jsx("li",{className:a==="preview"?"is-active":"",children:x.jsxs("a",{onClick:()=>u("preview"),children:[x.jsx("span",{className:"icon is-small",children:x.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),x.jsx("span",{children:"Preview"})]})})]})})}),x.jsxs("div",{className:"editor-layout",children:[x.jsx("button",{className:`toolbar-btn fullscreen-btn ${k?"is-active":""}`,onClick:_v,title:k?"Exit fullscreen":"Enter fullscreen","aria-label":k?"Exit fullscreen":"Enter fullscreen",children:x.jsx("i",{className:`fas ${k?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),x.jsxs("div",{className:"columns is-gapless",children:[x.jsx("div",{className:`column is-half-desktop ${a==="preview"?"mobile-hidden":""}`,children:x.jsxs("div",{className:"box editor-box",children:[x.jsx("h3",{className:"title is-6",children:"Editor"}),x.jsx(Rv,{ref:p,value:n,onChange:_,onCursorChange:jv,placeholder:"Type your fountain screenplay here..."})]})}),x.jsx("div",{className:`column is-half-desktop ${a==="edit"?"mobile-hidden":""}`,children:x.jsxs("div",{className:"box preview-box",children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[x.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview"}),x.jsxs("div",{style:{display:"flex",gap:8},children:[x.jsx("button",{className:`toolbar-btn ${X==="screenplay"?"is-active":""}`,onClick:()=>me("screenplay"),"aria-pressed":X==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),x.jsx("button",{className:`toolbar-btn ${X==="player"?"is-active":""}`,onClick:()=>me("player"),"aria-pressed":X==="player",title:"Show media player",children:"Player"})]})]}),X==="screenplay"?x.jsx("div",{className:"preview-content",ref:w,children:A.length===0?x.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):A.map(b=>x.jsx("div",{className:`preview-line ${b.className||""} ${b.index===h?"current-line":""}`,"data-type":b.type,"data-line-id":b.id,"data-line-index":b.index,onClick:()=>zv(b.index),style:{cursor:"pointer"},children:b.type==="image"||b.type==="audio"||b.type==="title_page"||b.type==="page_break"||b.type==="page_number"?x.jsx("div",{dangerouslySetInnerHTML:{__html:b.text}}):b.text||""},b.id))}):x.jsxs("div",{className:"media-player",style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const b=T&&T.length>0?T[B]||T[0]:null,W=b&&typeof b.duration=="number"?b.duration:null,Ae=T&&T.length?T.length:0,ze=b&&b.title?String(b.title):"";let Kt="untitled";return ze&&ze.trim()&&(Kt=ze.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),Kt||(Kt="untitled")),x.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[x.jsxs("div",{children:[x.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[x.jsx("div",{style:{fontSize:"1.05rem",fontWeight:700},children:Kt}),x.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${B+1} / ${Ae})`})]}),x.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:x.jsxs("div",{style:{color:"#999"},children:["lines ",b&&typeof b.startLine=="number"?b.startLine:"?","",b&&typeof b.endLine=="number"?b.endLine:"?"]})})]}),x.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[x.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[x.jsx("span",{style:{fontSize:"0.95rem"},children:""}),W?`${W}s`:"n/a"]}),x.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:Ne,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),x.jsx("button",{className:"toolbar-btn",title:"Play","aria-label":"Play",onClick:Y,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),x.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:Te,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),x.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:V,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),x.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:q,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""})]})]})})(),(()=>{const b=T&&T.length>0?T[B]||T[0]:null,W=b&&b.imageUrl?b.imageUrl:null;return x.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:W?x.jsx("img",{src:W,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):x.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:x.jsx("span",{children:"No image"})})})})(),(()=>{const b=T&&T.length>0?T[B]||T[0]:null,W=b&&b.audioUrl?b.audioUrl:null;return x.jsx("div",{style:{marginBottom:"0.75rem"},children:W?x.jsx("audio",{ref:ie,controls:!0,src:W,style:{width:"100%"}}):x.jsx("audio",{ref:ie,controls:!0,disabled:!0,style:{width:"100%"}})})})(),x.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!T||T.length===0?x.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const b=T&&T.length>0?T[B]||T[0]:null;return x.jsx("div",{children:x.jsx("div",{style:{padding:"0.5rem"},children:x.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:b&&b.blocks&&b.blocks.length>0?b.blocks.map(W=>x.jsx("div",{className:`preview-line ${W.className||""}`,dangerouslySetInnerHTML:{__html:W.text||""}},W.id)):b&&b.snippet?b.snippet.split(/\r?\n/).map((W,Ae)=>x.jsx("div",{style:{whiteSpace:"pre-wrap"},children:W||""},Ae)):x.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),i&&x.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:x.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),children:[x.jsxs("div",{className:"modal-header",children:[x.jsx("h2",{children:"Fountain.ext Format Reference"}),x.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:""})]}),x.jsxs("div",{className:"modal-body",children:[x.jsxs("div",{className:"help-section",children:[x.jsx("h3",{children:"Title Page"}),x.jsxs("div",{className:"help-example",children:[x.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",x.jsx("br",{}),"Credit: Written by",x.jsx("br",{}),"Author: John Dope",x.jsx("br",{}),"Authors: John Dope and Jane Smith",x.jsx("br",{}),"Source: Based on the novel by Famous Writer",x.jsx("br",{}),"Draft Date: October 4, 2025",x.jsx("br",{}),"Date: 10/04/2025",x.jsx("br",{}),"Contact:",x.jsx("br",{}),"John Dope",x.jsx("br",{}),"555-123-4567",x.jsx("br",{}),"john@example.com",x.jsx("br",{}),"",x.jsx("br",{}),"Literary Agent",x.jsx("br",{}),"Agency Name",x.jsx("br",{}),"agent@agency.com",x.jsx("br",{}),"Notes: This is a sample script",x.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),x.jsx("p",{children:'Title page elements appear at the top of your script. All are optional. Use "Author" for single writer, "Authors" for multiple. Contact can be multi-line with indentation. End title page with === (page break).'})]})]}),x.jsxs("div",{className:"help-section",children:[x.jsx("h3",{children:"Scene Headings"}),x.jsxs("div",{className:"help-example",children:[x.jsxs("code",{children:["EXT. PARKING LOT - DAY",x.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",x.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),x.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),x.jsxs("div",{className:"help-section",children:[x.jsx("h3",{children:"Characters & Dialogue"}),x.jsxs("div",{className:"help-example",children:[x.jsxs("code",{children:["MENTOR",x.jsx("br",{}),"Welcome to the team!",x.jsx("br",{}),x.jsx("br",{}),"@MENTOR",x.jsx("br",{}),"(power user syntax)",x.jsx("br",{}),x.jsx("br",{}),"USER #1",x.jsx("br",{}),"Thanks for having me.",x.jsx("br",{}),x.jsx("br",{}),"BOB O'SHAUNNESSY",x.jsx("br",{}),"(whispering)",x.jsx("br",{}),"This is a parenthetical."]}),x.jsx("p",{children:'Characters are ALL CAPS. Use @ for power user syntax or mixed-case names like "@John Doe". Names with @ in front will be counted as characters. Parentheticals go under character names.'})]})]}),x.jsxs("div",{className:"help-section",children:[x.jsx("h3",{children:"Dual Dialogue"}),x.jsxs("div",{className:"help-example",children:[x.jsxs("code",{children:["ALICE^",x.jsx("br",{}),"BOB^",x.jsx("br",{}),"CHARLIE^",x.jsx("br",{}),"I can't believe it!",x.jsx("br",{}),x.jsx("br",{}),"CHARLIE ^",x.jsx("br",{}),"DAVE ^",x.jsx("br",{}),"(disgusted)",x.jsx("br",{}),"Eew. no it's nooot!",x.jsx("br",{}),x.jsx("br",{})]}),x.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),x.jsxs("div",{className:"help-section",children:[x.jsx("h3",{children:"Action Lines"}),x.jsxs("div",{className:"help-example",children:[x.jsxs("code",{children:["Bob walks into the room and looks around nervously.",x.jsx("br",{}),x.jsx("br",{}),"The computer screen flickers to life."]}),x.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),x.jsxs("div",{className:"help-section",children:[x.jsx("h3",{children:"Transitions"}),x.jsxs("div",{className:"help-example",children:[x.jsxs("code",{children:["FADE IN:",x.jsx("br",{}),"CUT TO:",x.jsx("br",{}),"FADE TO BLACK.",x.jsx("br",{}),"> CUT TO BLACK."]}),x.jsx("p",{children:"Transitions control scene changes. Use > for power user syntax."})]})]}),x.jsxs("div",{className:"help-section",children:[x.jsx("h3",{children:"Centered Text"}),x.jsxs("div",{className:"help-example",children:[x.jsxs("code",{children:[">INTERMISSION<",x.jsx("br",{}),">THE END<"]}),x.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),x.jsxs("div",{className:"help-section",children:[x.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),x.jsxs("div",{className:"help-example",children:[x.jsxs("code",{children:["# Act I",x.jsx("br",{}),"## Scene 1: The Beginning",x.jsx("br",{}),"### Sequence A: Setup",x.jsx("br",{}),"#### Panel 1",x.jsx("br",{}),"02:30",x.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",x.jsx("br",{}),"[a]https://example.com/dialogue.mp3",x.jsx("br",{}),x.jsx("br",{}),"#### Panel 2",x.jsx("br",{}),"01:15",x.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),x.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),x.jsxs("div",{className:"help-section",children:[x.jsx("h3",{children:"Notes & Comments"}),x.jsxs("div",{className:"help-example",children:[x.jsxs("code",{children:["[[This is a note for the writer]]",x.jsx("br",{}),x.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),x.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),x.jsxs("div",{className:"help-section",children:[x.jsx("h3",{children:"Special Elements"}),x.jsxs("div",{className:"help-example",children:[x.jsxs("code",{children:["= Synopsis: Brief scene description",x.jsx("br",{}),x.jsx("br",{}),"===",x.jsx("br",{}),"(Page Break)",x.jsx("br",{}),x.jsx("br",{}),"~Lyrics:",x.jsx("br",{}),'~"Happy birthday to you"',x.jsx("br",{}),'~"Happy birthday to you"']}),x.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),l&&x.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:x.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),children:[x.jsxs("div",{className:"modal-header",children:[x.jsx("h2",{children:"Character List"}),x.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:""})]}),x.jsx("div",{className:"modal-body",children:C.length===0?x.jsx("p",{children:"No characters found in the script."}):x.jsx("div",{className:"character-list",children:C.map(b=>x.jsxs("div",{className:"character-item",children:[x.jsx("div",{className:"character-name",children:b}),x.jsxs("div",{className:"character-count",children:[O.get(b)||0," dialogue lines"]})]},b))})})]})})]})}iu.createRoot(document.getElementById("root")).render(x.jsx(a1.StrictMode,{children:x.jsx(PA,{})}));
