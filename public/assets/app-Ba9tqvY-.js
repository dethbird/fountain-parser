function M1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hp={exports:{}},Oo={},Vp={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=Symbol.for("react.element"),T1=Symbol.for("react.portal"),O1=Symbol.for("react.fragment"),N1=Symbol.for("react.strict_mode"),D1=Symbol.for("react.profiler"),P1=Symbol.for("react.provider"),L1=Symbol.for("react.context"),R1=Symbol.for("react.forward_ref"),B1=Symbol.for("react.suspense"),I1=Symbol.for("react.memo"),F1=Symbol.for("react.lazy"),sf=Symbol.iterator;function _1(t){return t===null||typeof t!="object"?null:(t=sf&&t[sf]||t["@@iterator"],typeof t=="function"?t:null)}var Wp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Up=Object.assign,$p={};function ci(t,e,n){this.props=t,this.context=e,this.refs=$p,this.updater=n||Wp}ci.prototype.isReactComponent={};ci.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ci.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kp(){}Kp.prototype=ci.prototype;function Bh(t,e,n){this.props=t,this.context=e,this.refs=$p,this.updater=n||Wp}var Ih=Bh.prototype=new Kp;Ih.constructor=Bh;Up(Ih,ci.prototype);Ih.isPureReactComponent=!0;var lf=Array.isArray,qp=Object.prototype.hasOwnProperty,Fh={current:null},Gp={key:!0,ref:!0,__self:!0,__source:!0};function Yp(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)qp.call(e,r)&&!Gp.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Ms,type:t,key:s,ref:l,props:i,_owner:Fh.current}}function z1(t,e){return{$$typeof:Ms,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _h(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ms}function j1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var of=/\/+/g;function ra(t,e){return typeof t=="object"&&t!==null&&t.key!=null?j1(""+t.key):e.toString(36)}function wl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ms:case T1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+ra(l,0):r,lf(i)?(n="",t!=null&&(n=t.replace(of,"$&/")+"/"),wl(i,e,n,"",function(u){return u})):i!=null&&(_h(i)&&(i=z1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(of,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",lf(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+ra(s,o);l+=wl(s,e,n,a,i)}else if(a=_1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+ra(s,o++),l+=wl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function _s(t,e,n){if(t==null)return t;var r=[],i=0;return wl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function H1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ke={current:null},Sl={transition:null},V1={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:Sl,ReactCurrentOwner:Fh};function Qp(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:_s,forEach:function(t,e,n){_s(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _s(t,function(){e++}),e},toArray:function(t){return _s(t,function(e){return e})||[]},only:function(t){if(!_h(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=ci;V.Fragment=O1;V.Profiler=D1;V.PureComponent=Bh;V.StrictMode=N1;V.Suspense=B1;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V1;V.act=Qp;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Up({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=Fh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)qp.call(e,a)&&!Gp.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Ms,type:t.type,key:i,ref:s,props:r,_owner:l}};V.createContext=function(t){return t={$$typeof:L1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:P1,_context:t},t.Consumer=t};V.createElement=Yp;V.createFactory=function(t){var e=Yp.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:R1,render:t}};V.isValidElement=_h;V.lazy=function(t){return{$$typeof:F1,_payload:{_status:-1,_result:t},_init:H1}};V.memo=function(t,e){return{$$typeof:I1,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Sl.transition;Sl.transition={};try{t()}finally{Sl.transition=e}};V.unstable_act=Qp;V.useCallback=function(t,e){return Ke.current.useCallback(t,e)};V.useContext=function(t){return Ke.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return Ke.current.useDeferredValue(t)};V.useEffect=function(t,e){return Ke.current.useEffect(t,e)};V.useId=function(){return Ke.current.useId()};V.useImperativeHandle=function(t,e,n){return Ke.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return Ke.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return Ke.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return Ke.current.useMemo(t,e)};V.useReducer=function(t,e,n){return Ke.current.useReducer(t,e,n)};V.useRef=function(t){return Ke.current.useRef(t)};V.useState=function(t){return Ke.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return Ke.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return Ke.current.useTransition()};V.version="18.3.1";Vp.exports=V;var Te=Vp.exports;const W1=M1(Te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1=Te,$1=Symbol.for("react.element"),K1=Symbol.for("react.fragment"),q1=Object.prototype.hasOwnProperty,G1=U1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y1={key:!0,ref:!0,__self:!0,__source:!0};function Jp(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)q1.call(e,r)&&!Y1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$1,type:t,key:s,ref:l,props:i,_owner:G1.current}}Oo.Fragment=K1;Oo.jsx=Jp;Oo.jsxs=Jp;Hp.exports=Oo;var w=Hp.exports,Xa={},Xp={exports:{}},ht={},Zp={exports:{}},em={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,F){var H=N.length;N.push(F);e:for(;0<H;){var q=H-1>>>1,G=N[q];if(0<i(G,F))N[q]=F,N[H]=G,H=q;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var F=N[0],H=N.pop();if(H!==F){N[0]=H;e:for(var q=0,G=N.length,He=G>>>1;q<He;){var Ve=2*(q+1)-1,zt=N[Ve],dt=Ve+1,Jn=N[dt];if(0>i(zt,H))dt<G&&0>i(Jn,zt)?(N[q]=Jn,N[dt]=H,q=dt):(N[q]=zt,N[Ve]=H,q=Ve);else if(dt<G&&0>i(Jn,H))N[q]=Jn,N[dt]=H,q=dt;else break e}}return F}function i(N,F){var H=N.sortIndex-F.sortIndex;return H!==0?H:N.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],h=1,c=null,f=3,d=!1,m=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=N)r(u),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(u)}}function x(N){if(v=!1,y(N),!m)if(n(a)!==null)m=!0,ft(S);else{var F=n(u);F!==null&&en(x,F.startTime-N)}}function S(N,F){m=!1,v&&(v=!1,p(O),O=-1),d=!0;var H=f;try{for(y(F),c=n(a);c!==null&&(!(c.expirationTime>F)||N&&!z());){var q=c.callback;if(typeof q=="function"){c.callback=null,f=c.priorityLevel;var G=q(c.expirationTime<=F);F=t.unstable_now(),typeof G=="function"?c.callback=G:c===n(a)&&r(a),y(F)}else r(a);c=n(a)}if(c!==null)var He=!0;else{var Ve=n(u);Ve!==null&&en(x,Ve.startTime-F),He=!1}return He}finally{c=null,f=H,d=!1}}var A=!1,C=null,O=-1,_=5,L=-1;function z(){return!(t.unstable_now()-L<_)}function I(){if(C!==null){var N=t.unstable_now();L=N;var F=!0;try{F=C(!0,N)}finally{F?Q():(A=!1,C=null)}}else A=!1}var Q;if(typeof g=="function")Q=function(){g(I)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ge=ee.port2;ee.port1.onmessage=I,Q=function(){ge.postMessage(null)}}else Q=function(){k(I,0)};function ft(N){C=N,A||(A=!0,Q())}function en(N,F){O=k(function(){N(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){m||d||(m=!0,ft(S))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var H=f;f=F;try{return N()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,F){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=f;f=N;try{return F()}finally{f=H}},t.unstable_scheduleCallback=function(N,F,H){var q=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,N){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=H+G,N={id:h++,callback:F,priorityLevel:N,startTime:H,expirationTime:G,sortIndex:-1},H>q?(N.sortIndex=H,e(u,N),n(a)===null&&N===n(u)&&(v?(p(O),O=-1):v=!0,en(x,H-q))):(N.sortIndex=G,e(a,N),m||d||(m=!0,ft(S))),N},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(N){var F=f;return function(){var H=f;f=F;try{return N.apply(this,arguments)}finally{f=H}}}})(em);Zp.exports=em;var Q1=Zp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1=Te,ot=Q1;function b(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tm=new Set,Zi={};function xr(t,e){Jr(t,e),Jr(t+"Capture",e)}function Jr(t,e){for(Zi[t]=e,t=0;t<e.length;t++)tm.add(e[t])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Za=Object.prototype.hasOwnProperty,X1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,af={},uf={};function Z1(t){return Za.call(uf,t)?!0:Za.call(af,t)?!1:X1.test(t)?uf[t]=!0:(af[t]=!0,!1)}function ev(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tv(t,e,n,r){if(e===null||typeof e>"u"||ev(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qe(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pe[t]=new qe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pe[e]=new qe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pe[t]=new qe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pe[t]=new qe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pe[t]=new qe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pe[t]=new qe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pe[t]=new qe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pe[t]=new qe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pe[t]=new qe(t,5,!1,t.toLowerCase(),null,!1,!1)});var zh=/[\-:]([a-z])/g;function jh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zh,jh);Pe[e]=new qe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zh,jh);Pe[e]=new qe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zh,jh);Pe[e]=new qe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pe[t]=new qe(t,1,!1,t.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pe[t]=new qe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hh(t,e,n,r){var i=Pe.hasOwnProperty(e)?Pe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tv(e,n,i,r)&&(n=null),r||i===null?Z1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gn=J1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zs=Symbol.for("react.element"),br=Symbol.for("react.portal"),Mr=Symbol.for("react.fragment"),Vh=Symbol.for("react.strict_mode"),eu=Symbol.for("react.profiler"),nm=Symbol.for("react.provider"),rm=Symbol.for("react.context"),Wh=Symbol.for("react.forward_ref"),tu=Symbol.for("react.suspense"),nu=Symbol.for("react.suspense_list"),Uh=Symbol.for("react.memo"),vn=Symbol.for("react.lazy"),im=Symbol.for("react.offscreen"),hf=Symbol.iterator;function yi(t){return t===null||typeof t!="object"?null:(t=hf&&t[hf]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,ia;function Ni(t){if(ia===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ia=e&&e[1]||""}return`
`+ia+t}var sa=!1;function la(t,e){if(!t||sa)return"";sa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{sa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ni(t):""}function nv(t){switch(t.tag){case 5:return Ni(t.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 2:case 15:return t=la(t.type,!1),t;case 11:return t=la(t.type.render,!1),t;case 1:return t=la(t.type,!0),t;default:return""}}function ru(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mr:return"Fragment";case br:return"Portal";case eu:return"Profiler";case Vh:return"StrictMode";case tu:return"Suspense";case nu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rm:return(t.displayName||"Context")+".Consumer";case nm:return(t._context.displayName||"Context")+".Provider";case Wh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uh:return e=t.displayName||null,e!==null?e:ru(t.type)||"Memo";case vn:e=t._payload,t=t._init;try{return ru(t(e))}catch{}}return null}function rv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ru(e);case 8:return e===Vh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iv(t){var e=sm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function js(t){t._valueTracker||(t._valueTracker=iv(t))}function lm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function iu(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function om(t,e){e=e.checked,e!=null&&Hh(t,"checked",e,!1)}function su(t,e){om(t,e);var n=zn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lu(t,e.type,n):e.hasOwnProperty("defaultValue")&&lu(t,e.type,zn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ff(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lu(t,e,n){(e!=="number"||jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Di=Array.isArray;function Hr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ou(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function df(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(b(92));if(Di(n)){if(1<n.length)throw Error(b(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zn(n)}}function am(t,e){var n=zn(e.value),r=zn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function um(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function au(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?um(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hs,hm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hs=Hs||document.createElement("div"),Hs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function es(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sv=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(t){sv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fi[e]=Fi[t]})});function cm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fi.hasOwnProperty(t)&&Fi[t]?(""+e).trim():e+"px"}function fm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=cm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var lv=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uu(t,e){if(e){if(lv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function hu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cu=null;function $h(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fu=null,Vr=null,Wr=null;function mf(t){if(t=Ns(t)){if(typeof fu!="function")throw Error(b(280));var e=t.stateNode;e&&(e=Ro(e),fu(t.stateNode,t.type,e))}}function dm(t){Vr?Wr?Wr.push(t):Wr=[t]:Vr=t}function pm(){if(Vr){var t=Vr,e=Wr;if(Wr=Vr=null,mf(t),e)for(t=0;t<e.length;t++)mf(e[t])}}function mm(t,e){return t(e)}function gm(){}var oa=!1;function ym(t,e,n){if(oa)return t(e,n);oa=!0;try{return mm(t,e,n)}finally{oa=!1,(Vr!==null||Wr!==null)&&(gm(),pm())}}function ts(t,e){var n=t.stateNode;if(n===null)return null;var r=Ro(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(b(231,e,typeof n));return n}var du=!1;if(cn)try{var vi={};Object.defineProperty(vi,"passive",{get:function(){du=!0}}),window.addEventListener("test",vi,vi),window.removeEventListener("test",vi,vi)}catch{du=!1}function ov(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var _i=!1,Hl=null,Vl=!1,pu=null,av={onError:function(t){_i=!0,Hl=t}};function uv(t,e,n,r,i,s,l,o,a){_i=!1,Hl=null,ov.apply(av,arguments)}function hv(t,e,n,r,i,s,l,o,a){if(uv.apply(this,arguments),_i){if(_i){var u=Hl;_i=!1,Hl=null}else throw Error(b(198));Vl||(Vl=!0,pu=u)}}function wr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gf(t){if(wr(t)!==t)throw Error(b(188))}function cv(t){var e=t.alternate;if(!e){if(e=wr(t),e===null)throw Error(b(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return gf(i),t;if(s===r)return gf(i),e;s=s.sibling}throw Error(b(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?t:e}function km(t){return t=cv(t),t!==null?xm(t):null}function xm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xm(t);if(e!==null)return e;t=t.sibling}return null}var wm=ot.unstable_scheduleCallback,yf=ot.unstable_cancelCallback,fv=ot.unstable_shouldYield,dv=ot.unstable_requestPaint,de=ot.unstable_now,pv=ot.unstable_getCurrentPriorityLevel,Kh=ot.unstable_ImmediatePriority,Sm=ot.unstable_UserBlockingPriority,Wl=ot.unstable_NormalPriority,mv=ot.unstable_LowPriority,Cm=ot.unstable_IdlePriority,No=null,Jt=null;function gv(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(No,t,void 0,(t.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:kv,yv=Math.log,vv=Math.LN2;function kv(t){return t>>>=0,t===0?32:31-(yv(t)/vv|0)|0}var Vs=64,Ws=4194304;function Pi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ul(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=Pi(o):(s&=l,s!==0&&(r=Pi(s)))}else l=n&~i,l!==0?r=Pi(l):s!==0&&(r=Pi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Dt(e),i=1<<n,r|=t[n],e&=~i;return r}function xv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Dt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=xv(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function mu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Am(){var t=Vs;return Vs<<=1,!(Vs&4194240)&&(Vs=64),t}function aa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ts(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dt(e),t[e]=n}function Sv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Dt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function qh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Dt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var J=0;function Em(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bm,Gh,Mm,Tm,Om,gu=!1,Us=[],Nn=null,Dn=null,Pn=null,ns=new Map,rs=new Map,Sn=[],Cv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vf(t,e){switch(t){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":ns.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(e.pointerId)}}function ki(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ns(e),e!==null&&Gh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Av(t,e,n,r,i){switch(e){case"focusin":return Nn=ki(Nn,t,e,n,r,i),!0;case"dragenter":return Dn=ki(Dn,t,e,n,r,i),!0;case"mouseover":return Pn=ki(Pn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ns.set(s,ki(ns.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rs.set(s,ki(rs.get(s)||null,t,e,n,r,i)),!0}return!1}function Nm(t){var e=nr(t.target);if(e!==null){var n=wr(e);if(n!==null){if(e=n.tag,e===13){if(e=vm(n),e!==null){t.blockedOn=e,Om(t.priority,function(){Mm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cu=r,n.target.dispatchEvent(r),cu=null}else return e=Ns(n),e!==null&&Gh(e),t.blockedOn=n,!1;e.shift()}return!0}function kf(t,e,n){Cl(t)&&n.delete(e)}function Ev(){gu=!1,Nn!==null&&Cl(Nn)&&(Nn=null),Dn!==null&&Cl(Dn)&&(Dn=null),Pn!==null&&Cl(Pn)&&(Pn=null),ns.forEach(kf),rs.forEach(kf)}function xi(t,e){t.blockedOn===e&&(t.blockedOn=null,gu||(gu=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,Ev)))}function is(t){function e(i){return xi(i,t)}if(0<Us.length){xi(Us[0],t);for(var n=1;n<Us.length;n++){var r=Us[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nn!==null&&xi(Nn,t),Dn!==null&&xi(Dn,t),Pn!==null&&xi(Pn,t),ns.forEach(e),rs.forEach(e),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)Nm(n),n.blockedOn===null&&Sn.shift()}var Ur=gn.ReactCurrentBatchConfig,$l=!0;function bv(t,e,n,r){var i=J,s=Ur.transition;Ur.transition=null;try{J=1,Yh(t,e,n,r)}finally{J=i,Ur.transition=s}}function Mv(t,e,n,r){var i=J,s=Ur.transition;Ur.transition=null;try{J=4,Yh(t,e,n,r)}finally{J=i,Ur.transition=s}}function Yh(t,e,n,r){if($l){var i=yu(t,e,n,r);if(i===null)va(t,e,r,Kl,n),vf(t,r);else if(Av(i,t,e,n,r))r.stopPropagation();else if(vf(t,r),e&4&&-1<Cv.indexOf(t)){for(;i!==null;){var s=Ns(i);if(s!==null&&bm(s),s=yu(t,e,n,r),s===null&&va(t,e,r,Kl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else va(t,e,r,null,n)}}var Kl=null;function yu(t,e,n,r){if(Kl=null,t=$h(r),t=nr(t),t!==null)if(e=wr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kl=t,null}function Dm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pv()){case Kh:return 1;case Sm:return 4;case Wl:case mv:return 16;case Cm:return 536870912;default:return 16}default:return 16}}var En=null,Qh=null,Al=null;function Pm(){if(Al)return Al;var t,e=Qh,n=e.length,r,i="value"in En?En.value:En.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Al=i.slice(t,1<r?1-r:void 0)}function El(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $s(){return!0}function xf(){return!1}function ct(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$s:xf,this.isPropagationStopped=xf,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),e}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jh=ct(fi),Os=he({},fi,{view:0,detail:0}),Tv=ct(Os),ua,ha,wi,Do=he({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wi&&(wi&&t.type==="mousemove"?(ua=t.screenX-wi.screenX,ha=t.screenY-wi.screenY):ha=ua=0,wi=t),ua)},movementY:function(t){return"movementY"in t?t.movementY:ha}}),wf=ct(Do),Ov=he({},Do,{dataTransfer:0}),Nv=ct(Ov),Dv=he({},Os,{relatedTarget:0}),ca=ct(Dv),Pv=he({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Lv=ct(Pv),Rv=he({},fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bv=ct(Rv),Iv=he({},fi,{data:0}),Sf=ct(Iv),Fv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_v={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zv[t])?!!e[t]:!1}function Xh(){return jv}var Hv=he({},Os,{key:function(t){if(t.key){var e=Fv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=El(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_v[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xh,charCode:function(t){return t.type==="keypress"?El(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?El(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vv=ct(Hv),Wv=he({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cf=ct(Wv),Uv=he({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xh}),$v=ct(Uv),Kv=he({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),qv=ct(Kv),Gv=he({},Do,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yv=ct(Gv),Qv=[9,13,27,32],Zh=cn&&"CompositionEvent"in window,zi=null;cn&&"documentMode"in document&&(zi=document.documentMode);var Jv=cn&&"TextEvent"in window&&!zi,Lm=cn&&(!Zh||zi&&8<zi&&11>=zi),Af=" ",Ef=!1;function Rm(t,e){switch(t){case"keyup":return Qv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tr=!1;function Xv(t,e){switch(t){case"compositionend":return Bm(e);case"keypress":return e.which!==32?null:(Ef=!0,Af);case"textInput":return t=e.data,t===Af&&Ef?null:t;default:return null}}function Zv(t,e){if(Tr)return t==="compositionend"||!Zh&&Rm(t,e)?(t=Pm(),Al=Qh=En=null,Tr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lm&&e.locale!=="ko"?null:e.data;default:return null}}var ek={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ek[t.type]:e==="textarea"}function Im(t,e,n,r){dm(r),e=ql(e,"onChange"),0<e.length&&(n=new Jh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ji=null,ss=null;function tk(t){qm(t,0)}function Po(t){var e=Dr(t);if(lm(e))return t}function nk(t,e){if(t==="change")return e}var Fm=!1;if(cn){var fa;if(cn){var da="oninput"in document;if(!da){var Mf=document.createElement("div");Mf.setAttribute("oninput","return;"),da=typeof Mf.oninput=="function"}fa=da}else fa=!1;Fm=fa&&(!document.documentMode||9<document.documentMode)}function Tf(){ji&&(ji.detachEvent("onpropertychange",_m),ss=ji=null)}function _m(t){if(t.propertyName==="value"&&Po(ss)){var e=[];Im(e,ss,t,$h(t)),ym(tk,e)}}function rk(t,e,n){t==="focusin"?(Tf(),ji=e,ss=n,ji.attachEvent("onpropertychange",_m)):t==="focusout"&&Tf()}function ik(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Po(ss)}function sk(t,e){if(t==="click")return Po(e)}function lk(t,e){if(t==="input"||t==="change")return Po(e)}function ok(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lt=typeof Object.is=="function"?Object.is:ok;function ls(t,e){if(Lt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Za.call(e,i)||!Lt(t[i],e[i]))return!1}return!0}function Of(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nf(t,e){var n=Of(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Of(n)}}function zm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jm(){for(var t=window,e=jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jl(t.document)}return e}function ec(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ak(t){var e=jm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zm(n.ownerDocument.documentElement,n)){if(r!==null&&ec(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Nf(n,s);var l=Nf(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uk=cn&&"documentMode"in document&&11>=document.documentMode,Or=null,vu=null,Hi=null,ku=!1;function Df(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ku||Or==null||Or!==jl(r)||(r=Or,"selectionStart"in r&&ec(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hi&&ls(Hi,r)||(Hi=r,r=ql(vu,"onSelect"),0<r.length&&(e=new Jh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Or)))}function Ks(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Nr={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionend:Ks("Transition","TransitionEnd")},pa={},Hm={};cn&&(Hm=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function Lo(t){if(pa[t])return pa[t];if(!Nr[t])return t;var e=Nr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hm)return pa[t]=e[n];return t}var Vm=Lo("animationend"),Wm=Lo("animationiteration"),Um=Lo("animationstart"),$m=Lo("transitionend"),Km=new Map,Pf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qn(t,e){Km.set(t,e),xr(e,[t])}for(var ma=0;ma<Pf.length;ma++){var ga=Pf[ma],hk=ga.toLowerCase(),ck=ga[0].toUpperCase()+ga.slice(1);qn(hk,"on"+ck)}qn(Vm,"onAnimationEnd");qn(Wm,"onAnimationIteration");qn(Um,"onAnimationStart");qn("dblclick","onDoubleClick");qn("focusin","onFocus");qn("focusout","onBlur");qn($m,"onTransitionEnd");Jr("onMouseEnter",["mouseout","mouseover"]);Jr("onMouseLeave",["mouseout","mouseover"]);Jr("onPointerEnter",["pointerout","pointerover"]);Jr("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Lf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hv(r,e,void 0,t),t.currentTarget=null}function qm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;Lf(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;Lf(i,o,u),s=a}}}if(Vl)throw t=pu,Vl=!1,pu=null,t}function re(t,e){var n=e[Au];n===void 0&&(n=e[Au]=new Set);var r=t+"__bubble";n.has(r)||(Gm(e,t,2,!1),n.add(r))}function ya(t,e,n){var r=0;e&&(r|=4),Gm(n,t,r,e)}var qs="_reactListening"+Math.random().toString(36).slice(2);function os(t){if(!t[qs]){t[qs]=!0,tm.forEach(function(n){n!=="selectionchange"&&(fk.has(n)||ya(n,!1,t),ya(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qs]||(e[qs]=!0,ya("selectionchange",!1,e))}}function Gm(t,e,n,r){switch(Dm(e)){case 1:var i=bv;break;case 4:i=Mv;break;default:i=Yh}n=i.bind(null,e,n,t),i=void 0,!du||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function va(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=nr(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}ym(function(){var u=s,h=$h(n),c=[];e:{var f=Km.get(t);if(f!==void 0){var d=Jh,m=t;switch(t){case"keypress":if(El(n)===0)break e;case"keydown":case"keyup":d=Vv;break;case"focusin":m="focus",d=ca;break;case"focusout":m="blur",d=ca;break;case"beforeblur":case"afterblur":d=ca;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Nv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=$v;break;case Vm:case Wm:case Um:d=Lv;break;case $m:d=qv;break;case"scroll":d=Tv;break;case"wheel":d=Yv;break;case"copy":case"cut":case"paste":d=Bv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Cf}var v=(e&4)!==0,k=!v&&t==="scroll",p=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,y;g!==null;){y=g;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,p!==null&&(x=ts(g,p),x!=null&&v.push(as(g,x,y)))),k)break;g=g.return}0<v.length&&(f=new d(f,m,null,n,h),c.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==cu&&(m=n.relatedTarget||n.fromElement)&&(nr(m)||m[fn]))break e;if((d||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,d?(m=n.relatedTarget||n.toElement,d=u,m=m?nr(m):null,m!==null&&(k=wr(m),m!==k||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=u),d!==m)){if(v=wf,x="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Cf,x="onPointerLeave",p="onPointerEnter",g="pointer"),k=d==null?f:Dr(d),y=m==null?f:Dr(m),f=new v(x,g+"leave",d,n,h),f.target=k,f.relatedTarget=y,x=null,nr(h)===u&&(v=new v(p,g+"enter",m,n,h),v.target=y,v.relatedTarget=k,x=v),k=x,d&&m)t:{for(v=d,p=m,g=0,y=v;y;y=Sr(y))g++;for(y=0,x=p;x;x=Sr(x))y++;for(;0<g-y;)v=Sr(v),g--;for(;0<y-g;)p=Sr(p),y--;for(;g--;){if(v===p||p!==null&&v===p.alternate)break t;v=Sr(v),p=Sr(p)}v=null}else v=null;d!==null&&Rf(c,f,d,v,!1),m!==null&&k!==null&&Rf(c,k,m,v,!0)}}e:{if(f=u?Dr(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var S=nk;else if(bf(f))if(Fm)S=lk;else{S=ik;var A=rk}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=sk);if(S&&(S=S(t,u))){Im(c,S,n,h);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&lu(f,"number",f.value)}switch(A=u?Dr(u):window,t){case"focusin":(bf(A)||A.contentEditable==="true")&&(Or=A,vu=u,Hi=null);break;case"focusout":Hi=vu=Or=null;break;case"mousedown":ku=!0;break;case"contextmenu":case"mouseup":case"dragend":ku=!1,Df(c,n,h);break;case"selectionchange":if(uk)break;case"keydown":case"keyup":Df(c,n,h)}var C;if(Zh)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Tr?Rm(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(Lm&&n.locale!=="ko"&&(Tr||O!=="onCompositionStart"?O==="onCompositionEnd"&&Tr&&(C=Pm()):(En=h,Qh="value"in En?En.value:En.textContent,Tr=!0)),A=ql(u,O),0<A.length&&(O=new Sf(O,t,null,n,h),c.push({event:O,listeners:A}),C?O.data=C:(C=Bm(n),C!==null&&(O.data=C)))),(C=Jv?Xv(t,n):Zv(t,n))&&(u=ql(u,"onBeforeInput"),0<u.length&&(h=new Sf("onBeforeInput","beforeinput",null,n,h),c.push({event:h,listeners:u}),h.data=C))}qm(c,e)})}function as(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ql(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ts(t,n),s!=null&&r.unshift(as(t,s,i)),s=ts(t,e),s!=null&&r.push(as(t,s,i))),t=t.return}return r}function Sr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rf(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=ts(n,s),a!=null&&l.unshift(as(n,a,o))):i||(a=ts(n,s),a!=null&&l.push(as(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var dk=/\r\n?/g,pk=/\u0000|\uFFFD/g;function Bf(t){return(typeof t=="string"?t:""+t).replace(dk,`
`).replace(pk,"")}function Gs(t,e,n){if(e=Bf(e),Bf(t)!==e&&n)throw Error(b(425))}function Gl(){}var xu=null,wu=null;function Su(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cu=typeof setTimeout=="function"?setTimeout:void 0,mk=typeof clearTimeout=="function"?clearTimeout:void 0,If=typeof Promise=="function"?Promise:void 0,gk=typeof queueMicrotask=="function"?queueMicrotask:typeof If<"u"?function(t){return If.resolve(null).then(t).catch(yk)}:Cu;function yk(t){setTimeout(function(){throw t})}function ka(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),is(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);is(e)}function Ln(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ff(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var di=Math.random().toString(36).slice(2),Kt="__reactFiber$"+di,us="__reactProps$"+di,fn="__reactContainer$"+di,Au="__reactEvents$"+di,vk="__reactListeners$"+di,kk="__reactHandles$"+di;function nr(t){var e=t[Kt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[Kt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ff(t);t!==null;){if(n=t[Kt])return n;t=Ff(t)}return e}t=n,n=t.parentNode}return null}function Ns(t){return t=t[Kt]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(b(33))}function Ro(t){return t[us]||null}var Eu=[],Pr=-1;function Gn(t){return{current:t}}function se(t){0>Pr||(t.current=Eu[Pr],Eu[Pr]=null,Pr--)}function te(t,e){Pr++,Eu[Pr]=t.current,t.current=e}var jn={},ze=Gn(jn),Je=Gn(!1),hr=jn;function Xr(t,e){var n=t.type.contextTypes;if(!n)return jn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xe(t){return t=t.childContextTypes,t!=null}function Yl(){se(Je),se(ze)}function _f(t,e,n){if(ze.current!==jn)throw Error(b(168));te(ze,e),te(Je,n)}function Ym(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(b(108,rv(t)||"Unknown",i));return he({},n,r)}function Ql(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jn,hr=ze.current,te(ze,t),te(Je,Je.current),!0}function zf(t,e,n){var r=t.stateNode;if(!r)throw Error(b(169));n?(t=Ym(t,e,hr),r.__reactInternalMemoizedMergedChildContext=t,se(Je),se(ze),te(ze,t)):se(Je),te(Je,n)}var rn=null,Bo=!1,xa=!1;function Qm(t){rn===null?rn=[t]:rn.push(t)}function xk(t){Bo=!0,Qm(t)}function Yn(){if(!xa&&rn!==null){xa=!0;var t=0,e=J;try{var n=rn;for(J=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rn=null,Bo=!1}catch(i){throw rn!==null&&(rn=rn.slice(t+1)),wm(Kh,Yn),i}finally{J=e,xa=!1}}return null}var Lr=[],Rr=0,Jl=null,Xl=0,pt=[],mt=0,cr=null,ln=1,on="";function Zn(t,e){Lr[Rr++]=Xl,Lr[Rr++]=Jl,Jl=t,Xl=e}function Jm(t,e,n){pt[mt++]=ln,pt[mt++]=on,pt[mt++]=cr,cr=t;var r=ln;t=on;var i=32-Dt(r)-1;r&=~(1<<i),n+=1;var s=32-Dt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,ln=1<<32-Dt(e)+i|n<<i|r,on=s+t}else ln=1<<s|n<<i|r,on=t}function tc(t){t.return!==null&&(Zn(t,1),Jm(t,1,0))}function nc(t){for(;t===Jl;)Jl=Lr[--Rr],Lr[Rr]=null,Xl=Lr[--Rr],Lr[Rr]=null;for(;t===cr;)cr=pt[--mt],pt[mt]=null,on=pt[--mt],pt[mt]=null,ln=pt[--mt],pt[mt]=null}var lt=null,st=null,le=!1,Ot=null;function Xm(t,e){var n=yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,lt=t,st=Ln(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,lt=t,st=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cr!==null?{id:ln,overflow:on}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,lt=t,st=null,!0):!1;default:return!1}}function bu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mu(t){if(le){var e=st;if(e){var n=e;if(!jf(t,e)){if(bu(t))throw Error(b(418));e=Ln(n.nextSibling);var r=lt;e&&jf(t,e)?Xm(r,n):(t.flags=t.flags&-4097|2,le=!1,lt=t)}}else{if(bu(t))throw Error(b(418));t.flags=t.flags&-4097|2,le=!1,lt=t}}}function Hf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;lt=t}function Ys(t){if(t!==lt)return!1;if(!le)return Hf(t),le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Su(t.type,t.memoizedProps)),e&&(e=st)){if(bu(t))throw Zm(),Error(b(418));for(;e;)Xm(t,e),e=Ln(e.nextSibling)}if(Hf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(b(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){st=Ln(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}st=null}}else st=lt?Ln(t.stateNode.nextSibling):null;return!0}function Zm(){for(var t=st;t;)t=Ln(t.nextSibling)}function Zr(){st=lt=null,le=!1}function rc(t){Ot===null?Ot=[t]:Ot.push(t)}var wk=gn.ReactCurrentBatchConfig;function Si(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,t))}return t}function Qs(t,e){throw t=Object.prototype.toString.call(e),Error(b(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vf(t){var e=t._init;return e(t._payload)}function eg(t){function e(p,g){if(t){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Fn(p,g),p.index=0,p.sibling=null,p}function s(p,g,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=2,g):y):(p.flags|=2,g)):(p.flags|=1048576,g)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,g,y,x){return g===null||g.tag!==6?(g=Ma(y,p.mode,x),g.return=p,g):(g=i(g,y),g.return=p,g)}function a(p,g,y,x){var S=y.type;return S===Mr?h(p,g,y.props.children,x,y.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===vn&&Vf(S)===g.type)?(x=i(g,y.props),x.ref=Si(p,g,y),x.return=p,x):(x=Pl(y.type,y.key,y.props,null,p.mode,x),x.ref=Si(p,g,y),x.return=p,x)}function u(p,g,y,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Ta(y,p.mode,x),g.return=p,g):(g=i(g,y.children||[]),g.return=p,g)}function h(p,g,y,x,S){return g===null||g.tag!==7?(g=ar(y,p.mode,x,S),g.return=p,g):(g=i(g,y),g.return=p,g)}function c(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ma(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case zs:return y=Pl(g.type,g.key,g.props,null,p.mode,y),y.ref=Si(p,null,g),y.return=p,y;case br:return g=Ta(g,p.mode,y),g.return=p,g;case vn:var x=g._init;return c(p,x(g._payload),y)}if(Di(g)||yi(g))return g=ar(g,p.mode,y,null),g.return=p,g;Qs(p,g)}return null}function f(p,g,y,x){var S=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:o(p,g,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case zs:return y.key===S?a(p,g,y,x):null;case br:return y.key===S?u(p,g,y,x):null;case vn:return S=y._init,f(p,g,S(y._payload),x)}if(Di(y)||yi(y))return S!==null?null:h(p,g,y,x,null);Qs(p,y)}return null}function d(p,g,y,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(y)||null,o(g,p,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zs:return p=p.get(x.key===null?y:x.key)||null,a(g,p,x,S);case br:return p=p.get(x.key===null?y:x.key)||null,u(g,p,x,S);case vn:var A=x._init;return d(p,g,y,A(x._payload),S)}if(Di(x)||yi(x))return p=p.get(y)||null,h(g,p,x,S,null);Qs(g,x)}return null}function m(p,g,y,x){for(var S=null,A=null,C=g,O=g=0,_=null;C!==null&&O<y.length;O++){C.index>O?(_=C,C=null):_=C.sibling;var L=f(p,C,y[O],x);if(L===null){C===null&&(C=_);break}t&&C&&L.alternate===null&&e(p,C),g=s(L,g,O),A===null?S=L:A.sibling=L,A=L,C=_}if(O===y.length)return n(p,C),le&&Zn(p,O),S;if(C===null){for(;O<y.length;O++)C=c(p,y[O],x),C!==null&&(g=s(C,g,O),A===null?S=C:A.sibling=C,A=C);return le&&Zn(p,O),S}for(C=r(p,C);O<y.length;O++)_=d(C,p,O,y[O],x),_!==null&&(t&&_.alternate!==null&&C.delete(_.key===null?O:_.key),g=s(_,g,O),A===null?S=_:A.sibling=_,A=_);return t&&C.forEach(function(z){return e(p,z)}),le&&Zn(p,O),S}function v(p,g,y,x){var S=yi(y);if(typeof S!="function")throw Error(b(150));if(y=S.call(y),y==null)throw Error(b(151));for(var A=S=null,C=g,O=g=0,_=null,L=y.next();C!==null&&!L.done;O++,L=y.next()){C.index>O?(_=C,C=null):_=C.sibling;var z=f(p,C,L.value,x);if(z===null){C===null&&(C=_);break}t&&C&&z.alternate===null&&e(p,C),g=s(z,g,O),A===null?S=z:A.sibling=z,A=z,C=_}if(L.done)return n(p,C),le&&Zn(p,O),S;if(C===null){for(;!L.done;O++,L=y.next())L=c(p,L.value,x),L!==null&&(g=s(L,g,O),A===null?S=L:A.sibling=L,A=L);return le&&Zn(p,O),S}for(C=r(p,C);!L.done;O++,L=y.next())L=d(C,p,O,L.value,x),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?O:L.key),g=s(L,g,O),A===null?S=L:A.sibling=L,A=L);return t&&C.forEach(function(I){return e(p,I)}),le&&Zn(p,O),S}function k(p,g,y,x){if(typeof y=="object"&&y!==null&&y.type===Mr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case zs:e:{for(var S=y.key,A=g;A!==null;){if(A.key===S){if(S=y.type,S===Mr){if(A.tag===7){n(p,A.sibling),g=i(A,y.props.children),g.return=p,p=g;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===vn&&Vf(S)===A.type){n(p,A.sibling),g=i(A,y.props),g.ref=Si(p,A,y),g.return=p,p=g;break e}n(p,A);break}else e(p,A);A=A.sibling}y.type===Mr?(g=ar(y.props.children,p.mode,x,y.key),g.return=p,p=g):(x=Pl(y.type,y.key,y.props,null,p.mode,x),x.ref=Si(p,g,y),x.return=p,p=x)}return l(p);case br:e:{for(A=y.key;g!==null;){if(g.key===A)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(p,g.sibling),g=i(g,y.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Ta(y,p.mode,x),g.return=p,p=g}return l(p);case vn:return A=y._init,k(p,g,A(y._payload),x)}if(Di(y))return m(p,g,y,x);if(yi(y))return v(p,g,y,x);Qs(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(p,g.sibling),g=i(g,y),g.return=p,p=g):(n(p,g),g=Ma(y,p.mode,x),g.return=p,p=g),l(p)):n(p,g)}return k}var ei=eg(!0),tg=eg(!1),Zl=Gn(null),eo=null,Br=null,ic=null;function sc(){ic=Br=eo=null}function lc(t){var e=Zl.current;se(Zl),t._currentValue=e}function Tu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $r(t,e){eo=t,ic=Br=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qe=!0),t.firstContext=null)}function St(t){var e=t._currentValue;if(ic!==t)if(t={context:t,memoizedValue:e,next:null},Br===null){if(eo===null)throw Error(b(308));Br=t,eo.dependencies={lanes:0,firstContext:t}}else Br=Br.next=t;return e}var rr=null;function oc(t){rr===null?rr=[t]:rr.push(t)}function ng(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,oc(e)):(n.next=i.next,i.next=n),e.interleaved=n,dn(t,r)}function dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kn=!1;function ac(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function an(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,dn(t,n)}return i=r.interleaved,i===null?(e.next=e,oc(r)):(e.next=i.next,i.next=e),r.interleaved=e,dn(t,n)}function bl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qh(t,n)}}function Wf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function to(t,e,n,r){var i=t.updateQueue;kn=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;l=0,h=u=a=null,o=s;do{var f=o.lane,d=o.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,v=o;switch(f=e,d=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){c=m.call(d,c,f);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(d,c,f):m,f==null)break e;c=he({},c,f);break e;case 2:kn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=d,a=c):h=h.next=d,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);dr|=l,t.lanes=l,t.memoizedState=c}}function Uf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(b(191,i));i.call(r)}}}var Ds={},Xt=Gn(Ds),hs=Gn(Ds),cs=Gn(Ds);function ir(t){if(t===Ds)throw Error(b(174));return t}function uc(t,e){switch(te(cs,e),te(hs,t),te(Xt,Ds),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:au(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=au(e,t)}se(Xt),te(Xt,e)}function ti(){se(Xt),se(hs),se(cs)}function ig(t){ir(cs.current);var e=ir(Xt.current),n=au(e,t.type);e!==n&&(te(hs,t),te(Xt,n))}function hc(t){hs.current===t&&(se(Xt),se(hs))}var oe=Gn(0);function no(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wa=[];function cc(){for(var t=0;t<wa.length;t++)wa[t]._workInProgressVersionPrimary=null;wa.length=0}var Ml=gn.ReactCurrentDispatcher,Sa=gn.ReactCurrentBatchConfig,fr=0,ue=null,ye=null,xe=null,ro=!1,Vi=!1,fs=0,Sk=0;function Le(){throw Error(b(321))}function fc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Lt(t[n],e[n]))return!1;return!0}function dc(t,e,n,r,i,s){if(fr=s,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ml.current=t===null||t.memoizedState===null?bk:Mk,t=n(r,i),Vi){s=0;do{if(Vi=!1,fs=0,25<=s)throw Error(b(301));s+=1,xe=ye=null,e.updateQueue=null,Ml.current=Tk,t=n(r,i)}while(Vi)}if(Ml.current=io,e=ye!==null&&ye.next!==null,fr=0,xe=ye=ue=null,ro=!1,e)throw Error(b(300));return t}function pc(){var t=fs!==0;return fs=0,t}function $t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?ue.memoizedState=xe=t:xe=xe.next=t,xe}function Ct(){if(ye===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=ye.next;var e=xe===null?ue.memoizedState:xe.next;if(e!==null)xe=e,ye=t;else{if(t===null)throw Error(b(310));ye=t,t={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},xe===null?ue.memoizedState=xe=t:xe=xe.next=t}return xe}function ds(t,e){return typeof e=="function"?e(t):e}function Ca(t){var e=Ct(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var h=u.lane;if((fr&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=c,l=r):a=a.next=c,ue.lanes|=h,dr|=h}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,Lt(r,e.memoizedState)||(Qe=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ue.lanes|=s,dr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Aa(t){var e=Ct(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);Lt(s,e.memoizedState)||(Qe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function sg(){}function lg(t,e){var n=ue,r=Ct(),i=e(),s=!Lt(r.memoizedState,i);if(s&&(r.memoizedState=i,Qe=!0),r=r.queue,mc(ug.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xe!==null&&xe.memoizedState.tag&1){if(n.flags|=2048,ps(9,ag.bind(null,n,r,i,e),void 0,null),Se===null)throw Error(b(349));fr&30||og(n,e,i)}return i}function og(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ag(t,e,n,r){e.value=n,e.getSnapshot=r,hg(e)&&cg(t)}function ug(t,e,n){return n(function(){hg(e)&&cg(t)})}function hg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lt(t,n)}catch{return!0}}function cg(t){var e=dn(t,1);e!==null&&Pt(e,t,1,-1)}function $f(t){var e=$t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:t},e.queue=t,t=t.dispatch=Ek.bind(null,ue,t),[e.memoizedState,t]}function ps(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fg(){return Ct().memoizedState}function Tl(t,e,n,r){var i=$t();ue.flags|=t,i.memoizedState=ps(1|e,n,void 0,r===void 0?null:r)}function Io(t,e,n,r){var i=Ct();r=r===void 0?null:r;var s=void 0;if(ye!==null){var l=ye.memoizedState;if(s=l.destroy,r!==null&&fc(r,l.deps)){i.memoizedState=ps(e,n,s,r);return}}ue.flags|=t,i.memoizedState=ps(1|e,n,s,r)}function Kf(t,e){return Tl(8390656,8,t,e)}function mc(t,e){return Io(2048,8,t,e)}function dg(t,e){return Io(4,2,t,e)}function pg(t,e){return Io(4,4,t,e)}function mg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gg(t,e,n){return n=n!=null?n.concat([t]):null,Io(4,4,mg.bind(null,e,t),n)}function gc(){}function yg(t,e){var n=Ct();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vg(t,e){var n=Ct();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kg(t,e,n){return fr&21?(Lt(n,e)||(n=Am(),ue.lanes|=n,dr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qe=!0),t.memoizedState=n)}function Ck(t,e){var n=J;J=n!==0&&4>n?n:4,t(!0);var r=Sa.transition;Sa.transition={};try{t(!1),e()}finally{J=n,Sa.transition=r}}function xg(){return Ct().memoizedState}function Ak(t,e,n){var r=In(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wg(t))Sg(e,n);else if(n=ng(t,e,n,r),n!==null){var i=Ue();Pt(n,t,r,i),Cg(n,e,r)}}function Ek(t,e,n){var r=In(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wg(t))Sg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,Lt(o,l)){var a=e.interleaved;a===null?(i.next=i,oc(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=ng(t,e,i,r),n!==null&&(i=Ue(),Pt(n,t,r,i),Cg(n,e,r))}}function wg(t){var e=t.alternate;return t===ue||e!==null&&e===ue}function Sg(t,e){Vi=ro=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Cg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qh(t,n)}}var io={readContext:St,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},bk={readContext:St,useCallback:function(t,e){return $t().memoizedState=[t,e===void 0?null:e],t},useContext:St,useEffect:Kf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tl(4194308,4,mg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tl(4,2,t,e)},useMemo:function(t,e){var n=$t();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$t();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ak.bind(null,ue,t),[r.memoizedState,t]},useRef:function(t){var e=$t();return t={current:t},e.memoizedState=t},useState:$f,useDebugValue:gc,useDeferredValue:function(t){return $t().memoizedState=t},useTransition:function(){var t=$f(!1),e=t[0];return t=Ck.bind(null,t[1]),$t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ue,i=$t();if(le){if(n===void 0)throw Error(b(407));n=n()}else{if(n=e(),Se===null)throw Error(b(349));fr&30||og(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Kf(ug.bind(null,r,s,t),[t]),r.flags|=2048,ps(9,ag.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=$t(),e=Se.identifierPrefix;if(le){var n=on,r=ln;n=(r&~(1<<32-Dt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Mk={readContext:St,useCallback:yg,useContext:St,useEffect:mc,useImperativeHandle:gg,useInsertionEffect:dg,useLayoutEffect:pg,useMemo:vg,useReducer:Ca,useRef:fg,useState:function(){return Ca(ds)},useDebugValue:gc,useDeferredValue:function(t){var e=Ct();return kg(e,ye.memoizedState,t)},useTransition:function(){var t=Ca(ds)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:sg,useSyncExternalStore:lg,useId:xg,unstable_isNewReconciler:!1},Tk={readContext:St,useCallback:yg,useContext:St,useEffect:mc,useImperativeHandle:gg,useInsertionEffect:dg,useLayoutEffect:pg,useMemo:vg,useReducer:Aa,useRef:fg,useState:function(){return Aa(ds)},useDebugValue:gc,useDeferredValue:function(t){var e=Ct();return ye===null?e.memoizedState=t:kg(e,ye.memoizedState,t)},useTransition:function(){var t=Aa(ds)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:sg,useSyncExternalStore:lg,useId:xg,unstable_isNewReconciler:!1};function Mt(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ou(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fo={isMounted:function(t){return(t=t._reactInternals)?wr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ue(),i=In(t),s=an(r,i);s.payload=e,n!=null&&(s.callback=n),e=Rn(t,s,i),e!==null&&(Pt(e,t,i,r),bl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ue(),i=In(t),s=an(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Rn(t,s,i),e!==null&&(Pt(e,t,i,r),bl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ue(),r=In(t),i=an(n,r);i.tag=2,e!=null&&(i.callback=e),e=Rn(t,i,r),e!==null&&(Pt(e,t,r,n),bl(e,t,r))}};function qf(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!ls(n,r)||!ls(i,s):!0}function Ag(t,e,n){var r=!1,i=jn,s=e.contextType;return typeof s=="object"&&s!==null?s=St(s):(i=Xe(e)?hr:ze.current,r=e.contextTypes,s=(r=r!=null)?Xr(t,i):jn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Gf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fo.enqueueReplaceState(e,e.state,null)}function Nu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ac(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=St(s):(s=Xe(e)?hr:ze.current,i.context=Xr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ou(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Fo.enqueueReplaceState(i,i.state,null),to(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ni(t,e){try{var n="",r=e;do n+=nv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ea(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Du(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ok=typeof WeakMap=="function"?WeakMap:Map;function Eg(t,e,n){n=an(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lo||(lo=!0,Hu=r),Du(t,e)},n}function bg(t,e,n){n=an(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Du(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Du(t,e),typeof r!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Yf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ok;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Wk.bind(null,t,e,n),e.then(t,t))}function Qf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=an(-1,1),e.tag=2,Rn(n,e,1))),n.lanes|=1),t)}var Nk=gn.ReactCurrentOwner,Qe=!1;function We(t,e,n,r){e.child=t===null?tg(e,null,n,r):ei(e,t.child,n,r)}function Xf(t,e,n,r,i){n=n.render;var s=e.ref;return $r(e,i),r=dc(t,e,n,r,s,i),n=pc(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pn(t,e,i)):(le&&n&&tc(e),e.flags|=1,We(t,e,r,i),e.child)}function Zf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ac(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Mg(t,e,s,r,i)):(t=Pl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:ls,n(l,r)&&t.ref===e.ref)return pn(t,e,i)}return e.flags|=1,t=Fn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Mg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ls(s,r)&&t.ref===e.ref)if(Qe=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Qe=!0);else return e.lanes=t.lanes,pn(t,e,i)}return Pu(t,e,n,r,i)}function Tg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(Fr,nt),nt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,te(Fr,nt),nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,te(Fr,nt),nt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,te(Fr,nt),nt|=r;return We(t,e,i,n),e.child}function Og(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pu(t,e,n,r,i){var s=Xe(n)?hr:ze.current;return s=Xr(e,s),$r(e,i),n=dc(t,e,n,r,s,i),r=pc(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pn(t,e,i)):(le&&r&&tc(e),e.flags|=1,We(t,e,n,i),e.child)}function ed(t,e,n,r,i){if(Xe(n)){var s=!0;Ql(e)}else s=!1;if($r(e,i),e.stateNode===null)Ol(t,e),Ag(e,n,r),Nu(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=St(u):(u=Xe(n)?hr:ze.current,u=Xr(e,u));var h=n.getDerivedStateFromProps,c=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";c||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&Gf(e,l,r,u),kn=!1;var f=e.memoizedState;l.state=f,to(e,r,l,i),a=e.memoizedState,o!==r||f!==a||Je.current||kn?(typeof h=="function"&&(Ou(e,n,h,r),a=e.memoizedState),(o=kn||qf(e,n,o,r,f,a,u))?(c||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,rg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Mt(e.type,o),l.props=u,c=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=St(a):(a=Xe(n)?hr:ze.current,a=Xr(e,a));var d=n.getDerivedStateFromProps;(h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==c||f!==a)&&Gf(e,l,r,a),kn=!1,f=e.memoizedState,l.state=f,to(e,r,l,i);var m=e.memoizedState;o!==c||f!==m||Je.current||kn?(typeof d=="function"&&(Ou(e,n,d,r),m=e.memoizedState),(u=kn||qf(e,n,u,r,f,m,a)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),l.props=r,l.state=m,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Lu(t,e,n,r,s,i)}function Lu(t,e,n,r,i,s){Og(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&zf(e,n,!1),pn(t,e,s);r=e.stateNode,Nk.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=ei(e,t.child,null,s),e.child=ei(e,null,o,s)):We(t,e,o,s),e.memoizedState=r.state,i&&zf(e,n,!0),e.child}function Ng(t){var e=t.stateNode;e.pendingContext?_f(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_f(t,e.context,!1),uc(t,e.containerInfo)}function td(t,e,n,r,i){return Zr(),rc(i),e.flags|=256,We(t,e,n,r),e.child}var Ru={dehydrated:null,treeContext:null,retryLane:0};function Bu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dg(t,e,n){var r=e.pendingProps,i=oe.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),te(oe,i&1),t===null)return Mu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=jo(l,r,0,null),t=ar(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bu(n),e.memoizedState=Ru,t):yc(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Dk(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Fn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Fn(o,s):(s=ar(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?Bu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Ru,r}return s=t.child,t=s.sibling,r=Fn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yc(t,e){return e=jo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Js(t,e,n,r){return r!==null&&rc(r),ei(e,t.child,null,n),t=yc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Dk(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=Ea(Error(b(422))),Js(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=jo({mode:"visible",children:r.children},i,0,null),s=ar(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ei(e,t.child,null,l),e.child.memoizedState=Bu(l),e.memoizedState=Ru,s);if(!(e.mode&1))return Js(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(b(419)),r=Ea(s,r,void 0),Js(t,e,l,r)}if(o=(l&t.childLanes)!==0,Qe||o){if(r=Se,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,dn(t,i),Pt(r,t,i,-1))}return Cc(),r=Ea(Error(b(421))),Js(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Uk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,st=Ln(i.nextSibling),lt=e,le=!0,Ot=null,t!==null&&(pt[mt++]=ln,pt[mt++]=on,pt[mt++]=cr,ln=t.id,on=t.overflow,cr=e),e=yc(e,r.children),e.flags|=4096,e)}function nd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tu(t.return,e,n)}function ba(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Pg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(We(t,e,r.children,n),r=oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nd(t,n,e);else if(t.tag===19)nd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(te(oe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&no(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ba(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&no(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ba(e,!0,n,null,s);break;case"together":ba(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ol(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),dr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(b(153));if(e.child!==null){for(t=e.child,n=Fn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Pk(t,e,n){switch(e.tag){case 3:Ng(e),Zr();break;case 5:ig(e);break;case 1:Xe(e.type)&&Ql(e);break;case 4:uc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;te(Zl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(te(oe,oe.current&1),e.flags|=128,null):n&e.child.childLanes?Dg(t,e,n):(te(oe,oe.current&1),t=pn(t,e,n),t!==null?t.sibling:null);te(oe,oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Pg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),te(oe,oe.current),r)break;return null;case 22:case 23:return e.lanes=0,Tg(t,e,n)}return pn(t,e,n)}var Lg,Iu,Rg,Bg;Lg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Iu=function(){};Rg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ir(Xt.current);var s=null;switch(n){case"input":i=iu(t,i),r=iu(t,r),s=[];break;case"select":i=he({},i,{value:void 0}),r=he({},r,{value:void 0}),s=[];break;case"textarea":i=ou(t,i),r=ou(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gl)}uu(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&re("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Bg=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ci(t,e){if(!le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Re(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Lk(t,e,n){var r=e.pendingProps;switch(nc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(e),null;case 1:return Xe(e.type)&&Yl(),Re(e),null;case 3:return r=e.stateNode,ti(),se(Je),se(ze),cc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ys(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ot!==null&&(Uu(Ot),Ot=null))),Iu(t,e),Re(e),null;case 5:hc(e);var i=ir(cs.current);if(n=e.type,t!==null&&e.stateNode!=null)Rg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(b(166));return Re(e),null}if(t=ir(Xt.current),Ys(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Kt]=e,r[us]=s,t=(e.mode&1)!==0,n){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(i=0;i<Li.length;i++)re(Li[i],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":cf(r,s),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},re("invalid",r);break;case"textarea":df(r,s),re("invalid",r)}uu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Gs(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Gs(r.textContent,o,t),i=["children",""+o]):Zi.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&re("scroll",r)}switch(n){case"input":js(r),ff(r,s,!0);break;case"textarea":js(r),pf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=um(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Kt]=e,t[us]=r,Lg(t,e,!1,!1),e.stateNode=t;e:{switch(l=hu(n,r),n){case"dialog":re("cancel",t),re("close",t),i=r;break;case"iframe":case"object":case"embed":re("load",t),i=r;break;case"video":case"audio":for(i=0;i<Li.length;i++)re(Li[i],t);i=r;break;case"source":re("error",t),i=r;break;case"img":case"image":case"link":re("error",t),re("load",t),i=r;break;case"details":re("toggle",t),i=r;break;case"input":cf(t,r),i=iu(t,r),re("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=he({},r,{value:void 0}),re("invalid",t);break;case"textarea":df(t,r),i=ou(t,r),re("invalid",t);break;default:i=r}uu(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?fm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&hm(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&es(t,a):typeof a=="number"&&es(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zi.hasOwnProperty(s)?a!=null&&s==="onScroll"&&re("scroll",t):a!=null&&Hh(t,s,a,l))}switch(n){case"input":js(t),ff(t,r,!1);break;case"textarea":js(t),pf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Hr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Hr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Re(e),null;case 6:if(t&&e.stateNode!=null)Bg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(b(166));if(n=ir(cs.current),ir(Xt.current),Ys(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kt]=e,(s=r.nodeValue!==n)&&(t=lt,t!==null))switch(t.tag){case 3:Gs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gs(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kt]=e,e.stateNode=r}return Re(e),null;case 13:if(se(oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(le&&st!==null&&e.mode&1&&!(e.flags&128))Zm(),Zr(),e.flags|=98560,s=!1;else if(s=Ys(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(b(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(b(317));s[Kt]=e}else Zr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Re(e),s=!1}else Ot!==null&&(Uu(Ot),Ot=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||oe.current&1?ve===0&&(ve=3):Cc())),e.updateQueue!==null&&(e.flags|=4),Re(e),null);case 4:return ti(),Iu(t,e),t===null&&os(e.stateNode.containerInfo),Re(e),null;case 10:return lc(e.type._context),Re(e),null;case 17:return Xe(e.type)&&Yl(),Re(e),null;case 19:if(se(oe),s=e.memoizedState,s===null)return Re(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Ci(s,!1);else{if(ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=no(t),l!==null){for(e.flags|=128,Ci(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return te(oe,oe.current&1|2),e.child}t=t.sibling}s.tail!==null&&de()>ri&&(e.flags|=128,r=!0,Ci(s,!1),e.lanes=4194304)}else{if(!r)if(t=no(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ci(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!le)return Re(e),null}else 2*de()-s.renderingStartTime>ri&&n!==1073741824&&(e.flags|=128,r=!0,Ci(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=de(),e.sibling=null,n=oe.current,te(oe,r?n&1|2:n&1),e):(Re(e),null);case 22:case 23:return Sc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nt&1073741824&&(Re(e),e.subtreeFlags&6&&(e.flags|=8192)):Re(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function Rk(t,e){switch(nc(e),e.tag){case 1:return Xe(e.type)&&Yl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ti(),se(Je),se(ze),cc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hc(e),null;case 13:if(se(oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(b(340));Zr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return se(oe),null;case 4:return ti(),null;case 10:return lc(e.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var Xs=!1,Ie=!1,Bk=typeof WeakSet=="function"?WeakSet:Set,P=null;function Ir(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ce(t,e,r)}else n.current=null}function Fu(t,e,n){try{n()}catch(r){ce(t,e,r)}}var rd=!1;function Ik(t,e){if(xu=$l,t=jm(),ec(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,h=0,c=t,f=null;t:for(;;){for(var d;c!==n||i!==0&&c.nodeType!==3||(o=l+i),c!==s||r!==0&&c.nodeType!==3||(a=l+r),c.nodeType===3&&(l+=c.nodeValue.length),(d=c.firstChild)!==null;)f=c,c=d;for(;;){if(c===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++h===r&&(a=l),(d=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=d}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(wu={focusedElem:t,selectionRange:n},$l=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,k=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:Mt(e.type,v),k);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(x){ce(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return m=rd,rd=!1,m}function Wi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fu(e,n,s)}i=i.next}while(i!==r)}}function _o(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _u(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ig(t){var e=t.alternate;e!==null&&(t.alternate=null,Ig(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kt],delete e[us],delete e[Au],delete e[vk],delete e[kk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fg(t){return t.tag===5||t.tag===3||t.tag===4}function id(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gl));else if(r!==4&&(t=t.child,t!==null))for(zu(t,e,n),t=t.sibling;t!==null;)zu(t,e,n),t=t.sibling}function ju(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ju(t,e,n),t=t.sibling;t!==null;)ju(t,e,n),t=t.sibling}var Ce=null,Tt=!1;function yn(t,e,n){for(n=n.child;n!==null;)_g(t,e,n),n=n.sibling}function _g(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(No,n)}catch{}switch(n.tag){case 5:Ie||Ir(n,e);case 6:var r=Ce,i=Tt;Ce=null,yn(t,e,n),Ce=r,Tt=i,Ce!==null&&(Tt?(t=Ce,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ce.removeChild(n.stateNode));break;case 18:Ce!==null&&(Tt?(t=Ce,n=n.stateNode,t.nodeType===8?ka(t.parentNode,n):t.nodeType===1&&ka(t,n),is(t)):ka(Ce,n.stateNode));break;case 4:r=Ce,i=Tt,Ce=n.stateNode.containerInfo,Tt=!0,yn(t,e,n),Ce=r,Tt=i;break;case 0:case 11:case 14:case 15:if(!Ie&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Fu(n,e,l),i=i.next}while(i!==r)}yn(t,e,n);break;case 1:if(!Ie&&(Ir(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ce(n,e,o)}yn(t,e,n);break;case 21:yn(t,e,n);break;case 22:n.mode&1?(Ie=(r=Ie)||n.memoizedState!==null,yn(t,e,n),Ie=r):yn(t,e,n);break;default:yn(t,e,n)}}function sd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Bk),e.forEach(function(r){var i=$k.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ce=o.stateNode,Tt=!1;break e;case 3:Ce=o.stateNode.containerInfo,Tt=!0;break e;case 4:Ce=o.stateNode.containerInfo,Tt=!0;break e}o=o.return}if(Ce===null)throw Error(b(160));_g(s,l,i),Ce=null,Tt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ce(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zg(e,t),e=e.sibling}function zg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bt(e,t),jt(t),r&4){try{Wi(3,t,t.return),_o(3,t)}catch(v){ce(t,t.return,v)}try{Wi(5,t,t.return)}catch(v){ce(t,t.return,v)}}break;case 1:bt(e,t),jt(t),r&512&&n!==null&&Ir(n,n.return);break;case 5:if(bt(e,t),jt(t),r&512&&n!==null&&Ir(n,n.return),t.flags&32){var i=t.stateNode;try{es(i,"")}catch(v){ce(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&om(i,s),hu(o,l);var u=hu(o,s);for(l=0;l<a.length;l+=2){var h=a[l],c=a[l+1];h==="style"?fm(i,c):h==="dangerouslySetInnerHTML"?hm(i,c):h==="children"?es(i,c):Hh(i,h,c,u)}switch(o){case"input":su(i,s);break;case"textarea":am(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Hr(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?Hr(i,!!s.multiple,s.defaultValue,!0):Hr(i,!!s.multiple,s.multiple?[]:"",!1))}i[us]=s}catch(v){ce(t,t.return,v)}}break;case 6:if(bt(e,t),jt(t),r&4){if(t.stateNode===null)throw Error(b(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ce(t,t.return,v)}}break;case 3:if(bt(e,t),jt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{is(e.containerInfo)}catch(v){ce(t,t.return,v)}break;case 4:bt(e,t),jt(t);break;case 13:bt(e,t),jt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xc=de())),r&4&&sd(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ie=(u=Ie)||h,bt(e,t),Ie=u):bt(e,t),jt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(P=t,h=t.child;h!==null;){for(c=P=h;P!==null;){switch(f=P,d=f.child,f.tag){case 0:case 11:case 14:case 15:Wi(4,f,f.return);break;case 1:Ir(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){ce(r,n,v)}}break;case 5:Ir(f,f.return);break;case 22:if(f.memoizedState!==null){od(c);continue}}d!==null?(d.return=f,P=d):od(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=c.stateNode,a=c.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=cm("display",l))}catch(v){ce(t,t.return,v)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){ce(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:bt(e,t),jt(t),r&4&&sd(t);break;case 21:break;default:bt(e,t),jt(t)}}function jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Fg(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(es(i,""),r.flags&=-33);var s=id(t);ju(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=id(t);zu(t,o,l);break;default:throw Error(b(161))}}catch(a){ce(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Fk(t,e,n){P=t,jg(t)}function jg(t,e,n){for(var r=(t.mode&1)!==0;P!==null;){var i=P,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Xs;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Ie;o=Xs;var u=Ie;if(Xs=l,(Ie=a)&&!u)for(P=i;P!==null;)l=P,a=l.child,l.tag===22&&l.memoizedState!==null?ad(i):a!==null?(a.return=l,P=a):ad(i);for(;s!==null;)P=s,jg(s),s=s.sibling;P=i,Xs=o,Ie=u}ld(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,P=s):ld(t)}}function ld(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ie||_o(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ie)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Uf(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Uf(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&is(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}Ie||e.flags&512&&_u(e)}catch(f){ce(e,e.return,f)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function od(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function ad(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_o(4,e)}catch(a){ce(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ce(e,i,a)}}var s=e.return;try{_u(e)}catch(a){ce(e,s,a)}break;case 5:var l=e.return;try{_u(e)}catch(a){ce(e,l,a)}}}catch(a){ce(e,e.return,a)}if(e===t){P=null;break}var o=e.sibling;if(o!==null){o.return=e.return,P=o;break}P=e.return}}var _k=Math.ceil,so=gn.ReactCurrentDispatcher,vc=gn.ReactCurrentOwner,vt=gn.ReactCurrentBatchConfig,$=0,Se=null,me=null,De=0,nt=0,Fr=Gn(0),ve=0,ms=null,dr=0,zo=0,kc=0,Ui=null,Ge=null,xc=0,ri=1/0,nn=null,lo=!1,Hu=null,Bn=null,Zs=!1,bn=null,oo=0,$i=0,Vu=null,Nl=-1,Dl=0;function Ue(){return $&6?de():Nl!==-1?Nl:Nl=de()}function In(t){return t.mode&1?$&2&&De!==0?De&-De:wk.transition!==null?(Dl===0&&(Dl=Am()),Dl):(t=J,t!==0||(t=window.event,t=t===void 0?16:Dm(t.type)),t):1}function Pt(t,e,n,r){if(50<$i)throw $i=0,Vu=null,Error(b(185));Ts(t,n,r),(!($&2)||t!==Se)&&(t===Se&&(!($&2)&&(zo|=n),ve===4&&Cn(t,De)),Ze(t,r),n===1&&$===0&&!(e.mode&1)&&(ri=de()+500,Bo&&Yn()))}function Ze(t,e){var n=t.callbackNode;wv(t,e);var r=Ul(t,t===Se?De:0);if(r===0)n!==null&&yf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yf(n),e===1)t.tag===0?xk(ud.bind(null,t)):Qm(ud.bind(null,t)),gk(function(){!($&6)&&Yn()}),n=null;else{switch(Em(r)){case 1:n=Kh;break;case 4:n=Sm;break;case 16:n=Wl;break;case 536870912:n=Cm;break;default:n=Wl}n=Gg(n,Hg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Hg(t,e){if(Nl=-1,Dl=0,$&6)throw Error(b(327));var n=t.callbackNode;if(Kr()&&t.callbackNode!==n)return null;var r=Ul(t,t===Se?De:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ao(t,r);else{e=r;var i=$;$|=2;var s=Wg();(Se!==t||De!==e)&&(nn=null,ri=de()+500,or(t,e));do try{Hk();break}catch(o){Vg(t,o)}while(!0);sc(),so.current=s,$=i,me!==null?e=0:(Se=null,De=0,e=ve)}if(e!==0){if(e===2&&(i=mu(t),i!==0&&(r=i,e=Wu(t,i))),e===1)throw n=ms,or(t,0),Cn(t,r),Ze(t,de()),n;if(e===6)Cn(t,r);else{if(i=t.current.alternate,!(r&30)&&!zk(i)&&(e=ao(t,r),e===2&&(s=mu(t),s!==0&&(r=s,e=Wu(t,s))),e===1))throw n=ms,or(t,0),Cn(t,r),Ze(t,de()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(b(345));case 2:er(t,Ge,nn);break;case 3:if(Cn(t,r),(r&130023424)===r&&(e=xc+500-de(),10<e)){if(Ul(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ue(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Cu(er.bind(null,t,Ge,nn),e);break}er(t,Ge,nn);break;case 4:if(Cn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Dt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=de()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_k(r/1960))-r,10<r){t.timeoutHandle=Cu(er.bind(null,t,Ge,nn),r);break}er(t,Ge,nn);break;case 5:er(t,Ge,nn);break;default:throw Error(b(329))}}}return Ze(t,de()),t.callbackNode===n?Hg.bind(null,t):null}function Wu(t,e){var n=Ui;return t.current.memoizedState.isDehydrated&&(or(t,e).flags|=256),t=ao(t,e),t!==2&&(e=Ge,Ge=n,e!==null&&Uu(e)),t}function Uu(t){Ge===null?Ge=t:Ge.push.apply(Ge,t)}function zk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Lt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cn(t,e){for(e&=~kc,e&=~zo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dt(e),r=1<<n;t[n]=-1,e&=~r}}function ud(t){if($&6)throw Error(b(327));Kr();var e=Ul(t,0);if(!(e&1))return Ze(t,de()),null;var n=ao(t,e);if(t.tag!==0&&n===2){var r=mu(t);r!==0&&(e=r,n=Wu(t,r))}if(n===1)throw n=ms,or(t,0),Cn(t,e),Ze(t,de()),n;if(n===6)throw Error(b(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,er(t,Ge,nn),Ze(t,de()),null}function wc(t,e){var n=$;$|=1;try{return t(e)}finally{$=n,$===0&&(ri=de()+500,Bo&&Yn())}}function pr(t){bn!==null&&bn.tag===0&&!($&6)&&Kr();var e=$;$|=1;var n=vt.transition,r=J;try{if(vt.transition=null,J=1,t)return t()}finally{J=r,vt.transition=n,$=e,!($&6)&&Yn()}}function Sc(){nt=Fr.current,se(Fr)}function or(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mk(n)),me!==null)for(n=me.return;n!==null;){var r=n;switch(nc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yl();break;case 3:ti(),se(Je),se(ze),cc();break;case 5:hc(r);break;case 4:ti();break;case 13:se(oe);break;case 19:se(oe);break;case 10:lc(r.type._context);break;case 22:case 23:Sc()}n=n.return}if(Se=t,me=t=Fn(t.current,null),De=nt=e,ve=0,ms=null,kc=zo=dr=0,Ge=Ui=null,rr!==null){for(e=0;e<rr.length;e++)if(n=rr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}rr=null}return t}function Vg(t,e){do{var n=me;try{if(sc(),Ml.current=io,ro){for(var r=ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ro=!1}if(fr=0,xe=ye=ue=null,Vi=!1,fs=0,vc.current=null,n===null||n.return===null){ve=1,ms=e,me=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=De,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=o,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=Qf(l);if(d!==null){d.flags&=-257,Jf(d,l,o,s,e),d.mode&1&&Yf(s,u,e),e=d,a=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(a),e.updateQueue=v}else m.add(a);break e}else{if(!(e&1)){Yf(s,u,e),Cc();break e}a=Error(b(426))}}else if(le&&o.mode&1){var k=Qf(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Jf(k,l,o,s,e),rc(ni(a,o));break e}}s=a=ni(a,o),ve!==4&&(ve=2),Ui===null?Ui=[s]:Ui.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Eg(s,a,e);Wf(s,p);break e;case 1:o=a;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Bn===null||!Bn.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=bg(s,o,e);Wf(s,x);break e}}s=s.return}while(s!==null)}$g(n)}catch(S){e=S,me===n&&n!==null&&(me=n=n.return);continue}break}while(!0)}function Wg(){var t=so.current;return so.current=io,t===null?io:t}function Cc(){(ve===0||ve===3||ve===2)&&(ve=4),Se===null||!(dr&268435455)&&!(zo&268435455)||Cn(Se,De)}function ao(t,e){var n=$;$|=2;var r=Wg();(Se!==t||De!==e)&&(nn=null,or(t,e));do try{jk();break}catch(i){Vg(t,i)}while(!0);if(sc(),$=n,so.current=r,me!==null)throw Error(b(261));return Se=null,De=0,ve}function jk(){for(;me!==null;)Ug(me)}function Hk(){for(;me!==null&&!fv();)Ug(me)}function Ug(t){var e=qg(t.alternate,t,nt);t.memoizedProps=t.pendingProps,e===null?$g(t):me=e,vc.current=null}function $g(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Rk(n,e),n!==null){n.flags&=32767,me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ve=6,me=null;return}}else if(n=Lk(n,e,nt),n!==null){me=n;return}if(e=e.sibling,e!==null){me=e;return}me=e=t}while(e!==null);ve===0&&(ve=5)}function er(t,e,n){var r=J,i=vt.transition;try{vt.transition=null,J=1,Vk(t,e,n,r)}finally{vt.transition=i,J=r}return null}function Vk(t,e,n,r){do Kr();while(bn!==null);if($&6)throw Error(b(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(b(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Sv(t,s),t===Se&&(me=Se=null,De=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zs||(Zs=!0,Gg(Wl,function(){return Kr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vt.transition,vt.transition=null;var l=J;J=1;var o=$;$|=4,vc.current=null,Ik(t,n),zg(n,t),ak(wu),$l=!!xu,wu=xu=null,t.current=n,Fk(n),dv(),$=o,J=l,vt.transition=s}else t.current=n;if(Zs&&(Zs=!1,bn=t,oo=i),s=t.pendingLanes,s===0&&(Bn=null),gv(n.stateNode),Ze(t,de()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(lo)throw lo=!1,t=Hu,Hu=null,t;return oo&1&&t.tag!==0&&Kr(),s=t.pendingLanes,s&1?t===Vu?$i++:($i=0,Vu=t):$i=0,Yn(),null}function Kr(){if(bn!==null){var t=Em(oo),e=vt.transition,n=J;try{if(vt.transition=null,J=16>t?16:t,bn===null)var r=!1;else{if(t=bn,bn=null,oo=0,$&6)throw Error(b(331));var i=$;for($|=4,P=t.current;P!==null;){var s=P,l=s.child;if(P.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(P=u;P!==null;){var h=P;switch(h.tag){case 0:case 11:case 15:Wi(8,h,s)}var c=h.child;if(c!==null)c.return=h,P=c;else for(;P!==null;){h=P;var f=h.sibling,d=h.return;if(Ig(h),h===u){P=null;break}if(f!==null){f.return=d,P=f;break}P=d}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}P=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,P=l;else e:for(;P!==null;){if(s=P,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wi(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,P=p;break e}P=s.return}}var g=t.current;for(P=g;P!==null;){l=P;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,P=y;else e:for(l=g;P!==null;){if(o=P,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:_o(9,o)}}catch(S){ce(o,o.return,S)}if(o===l){P=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,P=x;break e}P=o.return}}if($=i,Yn(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(No,t)}catch{}r=!0}return r}finally{J=n,vt.transition=e}}return!1}function hd(t,e,n){e=ni(n,e),e=Eg(t,e,1),t=Rn(t,e,1),e=Ue(),t!==null&&(Ts(t,1,e),Ze(t,e))}function ce(t,e,n){if(t.tag===3)hd(t,t,n);else for(;e!==null;){if(e.tag===3){hd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bn===null||!Bn.has(r))){t=ni(n,t),t=bg(e,t,1),e=Rn(e,t,1),t=Ue(),e!==null&&(Ts(e,1,t),Ze(e,t));break}}e=e.return}}function Wk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ue(),t.pingedLanes|=t.suspendedLanes&n,Se===t&&(De&n)===n&&(ve===4||ve===3&&(De&130023424)===De&&500>de()-xc?or(t,0):kc|=n),Ze(t,e)}function Kg(t,e){e===0&&(t.mode&1?(e=Ws,Ws<<=1,!(Ws&130023424)&&(Ws=4194304)):e=1);var n=Ue();t=dn(t,e),t!==null&&(Ts(t,e,n),Ze(t,n))}function Uk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Kg(t,n)}function $k(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(e),Kg(t,n)}var qg;qg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Je.current)Qe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qe=!1,Pk(t,e,n);Qe=!!(t.flags&131072)}else Qe=!1,le&&e.flags&1048576&&Jm(e,Xl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ol(t,e),t=e.pendingProps;var i=Xr(e,ze.current);$r(e,n),i=dc(null,e,r,t,i,n);var s=pc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xe(r)?(s=!0,Ql(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ac(e),i.updater=Fo,e.stateNode=i,i._reactInternals=e,Nu(e,r,t,n),e=Lu(null,e,r,!0,s,n)):(e.tag=0,le&&s&&tc(e),We(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ol(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qk(r),t=Mt(r,t),i){case 0:e=Pu(null,e,r,t,n);break e;case 1:e=ed(null,e,r,t,n);break e;case 11:e=Xf(null,e,r,t,n);break e;case 14:e=Zf(null,e,r,Mt(r.type,t),n);break e}throw Error(b(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),Pu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),ed(t,e,r,i,n);case 3:e:{if(Ng(e),t===null)throw Error(b(387));r=e.pendingProps,s=e.memoizedState,i=s.element,rg(t,e),to(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ni(Error(b(423)),e),e=td(t,e,r,n,i);break e}else if(r!==i){i=ni(Error(b(424)),e),e=td(t,e,r,n,i);break e}else for(st=Ln(e.stateNode.containerInfo.firstChild),lt=e,le=!0,Ot=null,n=tg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zr(),r===i){e=pn(t,e,n);break e}We(t,e,r,n)}e=e.child}return e;case 5:return ig(e),t===null&&Mu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Su(r,i)?l=null:s!==null&&Su(r,s)&&(e.flags|=32),Og(t,e),We(t,e,l,n),e.child;case 6:return t===null&&Mu(e),null;case 13:return Dg(t,e,n);case 4:return uc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ei(e,null,r,n):We(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),Xf(t,e,r,i,n);case 7:return We(t,e,e.pendingProps,n),e.child;case 8:return We(t,e,e.pendingProps.children,n),e.child;case 12:return We(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,te(Zl,r._currentValue),r._currentValue=l,s!==null)if(Lt(s.value,l)){if(s.children===i.children&&!Je.current){e=pn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=an(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Tu(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(b(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Tu(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}We(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,$r(e,n),i=St(i),r=r(i),e.flags|=1,We(t,e,r,n),e.child;case 14:return r=e.type,i=Mt(r,e.pendingProps),i=Mt(r.type,i),Zf(t,e,r,i,n);case 15:return Mg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),Ol(t,e),e.tag=1,Xe(r)?(t=!0,Ql(e)):t=!1,$r(e,n),Ag(e,r,i),Nu(e,r,i,n),Lu(null,e,r,!0,t,n);case 19:return Pg(t,e,n);case 22:return Tg(t,e,n)}throw Error(b(156,e.tag))};function Gg(t,e){return wm(t,e)}function Kk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(t,e,n,r){return new Kk(t,e,n,r)}function Ac(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qk(t){if(typeof t=="function")return Ac(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wh)return 11;if(t===Uh)return 14}return 2}function Fn(t,e){var n=t.alternate;return n===null?(n=yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pl(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")Ac(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Mr:return ar(n.children,i,s,e);case Vh:l=8,i|=8;break;case eu:return t=yt(12,n,e,i|2),t.elementType=eu,t.lanes=s,t;case tu:return t=yt(13,n,e,i),t.elementType=tu,t.lanes=s,t;case nu:return t=yt(19,n,e,i),t.elementType=nu,t.lanes=s,t;case im:return jo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nm:l=10;break e;case rm:l=9;break e;case Wh:l=11;break e;case Uh:l=14;break e;case vn:l=16,r=null;break e}throw Error(b(130,t==null?t:typeof t,""))}return e=yt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ar(t,e,n,r){return t=yt(7,t,r,e),t.lanes=n,t}function jo(t,e,n,r){return t=yt(22,t,r,e),t.elementType=im,t.lanes=n,t.stateNode={isHidden:!1},t}function Ma(t,e,n){return t=yt(6,t,null,e),t.lanes=n,t}function Ta(t,e,n){return e=yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ec(t,e,n,r,i,s,l,o,a){return t=new Gk(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ac(s),t}function Yk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:br,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Yg(t){if(!t)return jn;t=t._reactInternals;e:{if(wr(t)!==t||t.tag!==1)throw Error(b(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(t.tag===1){var n=t.type;if(Xe(n))return Ym(t,n,e)}return e}function Qg(t,e,n,r,i,s,l,o,a){return t=Ec(n,r,!0,t,i,s,l,o,a),t.context=Yg(null),n=t.current,r=Ue(),i=In(n),s=an(r,i),s.callback=e??null,Rn(n,s,i),t.current.lanes=i,Ts(t,i,r),Ze(t,r),t}function Ho(t,e,n,r){var i=e.current,s=Ue(),l=In(i);return n=Yg(n),e.context===null?e.context=n:e.pendingContext=n,e=an(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Rn(i,e,l),t!==null&&(Pt(t,i,l,s),bl(t,i,l)),l}function uo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bc(t,e){cd(t,e),(t=t.alternate)&&cd(t,e)}function Qk(){return null}var Jg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mc(t){this._internalRoot=t}Vo.prototype.render=Mc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(b(409));Ho(t,e,null,null)};Vo.prototype.unmount=Mc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pr(function(){Ho(null,t,null,null)}),e[fn]=null}};function Vo(t){this._internalRoot=t}Vo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sn.length&&e!==0&&e<Sn[n].priority;n++);Sn.splice(n,0,t),n===0&&Nm(t)}};function Tc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fd(){}function Jk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=uo(l);s.call(u)}}var l=Qg(e,r,t,0,null,!1,!1,"",fd);return t._reactRootContainer=l,t[fn]=l.current,os(t.nodeType===8?t.parentNode:t),pr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=uo(a);o.call(u)}}var a=Ec(t,0,!1,null,null,!1,!1,"",fd);return t._reactRootContainer=a,t[fn]=a.current,os(t.nodeType===8?t.parentNode:t),pr(function(){Ho(e,a,n,r)}),a}function Uo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=uo(l);o.call(a)}}Ho(e,l,t,i)}else l=Jk(n,e,t,i,r);return uo(l)}bm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pi(e.pendingLanes);n!==0&&(qh(e,n|1),Ze(e,de()),!($&6)&&(ri=de()+500,Yn()))}break;case 13:pr(function(){var r=dn(t,1);if(r!==null){var i=Ue();Pt(r,t,1,i)}}),bc(t,1)}};Gh=function(t){if(t.tag===13){var e=dn(t,134217728);if(e!==null){var n=Ue();Pt(e,t,134217728,n)}bc(t,134217728)}};Mm=function(t){if(t.tag===13){var e=In(t),n=dn(t,e);if(n!==null){var r=Ue();Pt(n,t,e,r)}bc(t,e)}};Tm=function(){return J};Om=function(t,e){var n=J;try{return J=t,e()}finally{J=n}};fu=function(t,e,n){switch(e){case"input":if(su(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ro(r);if(!i)throw Error(b(90));lm(r),su(r,i)}}}break;case"textarea":am(t,n);break;case"select":e=n.value,e!=null&&Hr(t,!!n.multiple,e,!1)}};mm=wc;gm=pr;var Xk={usingClientEntryPoint:!1,Events:[Ns,Dr,Ro,dm,pm,wc]},Ai={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zk={bundleType:Ai.bundleType,version:Ai.version,rendererPackageName:Ai.rendererPackageName,rendererConfig:Ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=km(t),t===null?null:t.stateNode},findFiberByHostInstance:Ai.findFiberByHostInstance||Qk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{No=el.inject(Zk),Jt=el}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xk;ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tc(e))throw Error(b(200));return Yk(t,e,null,n)};ht.createRoot=function(t,e){if(!Tc(t))throw Error(b(299));var n=!1,r="",i=Jg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ec(t,1,!1,null,null,n,!1,r,i),t[fn]=e.current,os(t.nodeType===8?t.parentNode:t),new Mc(e)};ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(b(188)):(t=Object.keys(t).join(","),Error(b(268,t)));return t=km(e),t=t===null?null:t.stateNode,t};ht.flushSync=function(t){return pr(t)};ht.hydrate=function(t,e,n){if(!Wo(e))throw Error(b(200));return Uo(null,t,e,!0,n)};ht.hydrateRoot=function(t,e,n){if(!Tc(t))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=Jg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Qg(e,null,t,1,n??null,i,!1,s,l),t[fn]=e.current,os(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Vo(e)};ht.render=function(t,e,n){if(!Wo(e))throw Error(b(200));return Uo(null,t,e,!1,n)};ht.unmountComponentAtNode=function(t){if(!Wo(t))throw Error(b(40));return t._reactRootContainer?(pr(function(){Uo(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};ht.unstable_batchedUpdates=wc;ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wo(n))throw Error(b(200));if(t==null||t._reactInternals===void 0)throw Error(b(38));return Uo(t,e,n,!1,r)};ht.version="18.3.1-next-f1338f8080-20240426";function Xg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xg)}catch(t){console.error(t)}}Xg(),Xp.exports=ht;var ex=Xp.exports,dd=ex;Xa.createRoot=dd.createRoot,Xa.hydrateRoot=dd.hydrateRoot;let $u=[],Zg=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?Zg:$u).push(n=n+t[e])})();function tx(t){if(t<768)return!1;for(let e=0,n=$u.length;;){let r=e+n>>1;if(t<$u[r])n=r;else if(t>=Zg[r])e=r+1;else return!0;if(e==n)return!1}}function pd(t){return t>=127462&&t<=127487}const md=8205;function nx(t,e,n=!0,r=!0){return(n?e0:rx)(t,e,r)}function e0(t,e,n){if(e==t.length)return e;e&&t0(t.charCodeAt(e))&&n0(t.charCodeAt(e-1))&&e--;let r=Oa(t,e);for(e+=gd(r);e<t.length;){let i=Oa(t,e);if(r==md||i==md||n&&tx(i))e+=gd(i),r=i;else if(pd(i)){let s=0,l=e-2;for(;l>=0&&pd(Oa(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function rx(t,e,n){for(;e>0;){let r=e0(t,e-2,n);if(r<e)return r;e--}return 0}function Oa(t,e){let n=t.charCodeAt(e);if(!n0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return t0(r)?(n-55296<<10)+(r-56320)+65536:n}function t0(t){return t>=56320&&t<57344}function n0(t){return t>=55296&&t<56320}function gd(t){return t<65536?1:2}class U{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=ii(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),qt.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=ii(this,e,n);let r=[];return this.decompose(e,n,r,0),qt.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Ki(this),s=new Ki(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new Ki(this,e)}iterRange(e,n=this.length){return new r0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new i0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?U.empty:e.length<=32?new fe(e):qt.from(fe.split(e,[]))}}class fe extends U{constructor(e,n=ix(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new sx(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new fe(yd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=Ll(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new fe(o,l.length+s.length));else{let a=o.length>>1;r.push(new fe(o.slice(0,a)),new fe(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof fe))return super.replace(e,n,r);[e,n]=ii(this,e,n);let i=Ll(this.text,Ll(r.text,yd(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new fe(i,s):qt.from(fe.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=ii(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new fe(r,i)),r=[],i=-1);return i>-1&&n.push(new fe(r,i)),n}}class qt extends U{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=ii(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let h=this.children.slice();return h[i]=a,new qt(h,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=ii(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof qt))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let m of e)m.flatten(d);return new fe(d,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,h=[];function c(d){let m;if(d.lines>s&&d instanceof qt)for(let v of d.children)c(v);else d.lines>l&&(a>l||!a)?(f(),o.push(d)):d instanceof fe&&a&&(m=h[h.length-1])instanceof fe&&d.lines+m.lines<=32?(a+=d.lines,u+=d.length+1,h[h.length-1]=new fe(m.text.concat(d.text),m.length+1+d.length)):(a+d.lines>i&&f(),a+=d.lines,u+=d.length+1,h.push(d))}function f(){a!=0&&(o.push(h.length==1?h[0]:qt.from(h,u)),u=-1,a=h.length=0)}for(let d of e)c(d);return f(),o.length==1?o[0]:new qt(o,n)}}U.empty=new fe([""],0);function ix(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Ll(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function yd(t,e,n){return Ll(t,[""],e,n)}class Ki{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof fe?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof fe?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof fe){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof fe?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class r0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Ki(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class i0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(U.prototype[Symbol.iterator]=function(){return this.iter()},Ki.prototype[Symbol.iterator]=r0.prototype[Symbol.iterator]=i0.prototype[Symbol.iterator]=function(){return this});class sx{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function ii(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Oe(t,e,n=!0,r=!0){return nx(t,e,n,r)}function lx(t){return t>=56320&&t<57344}function ox(t){return t>=55296&&t<56320}function s0(t,e){let n=t.charCodeAt(e);if(!ox(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return lx(r)?(n-55296<<10)+(r-56320)+65536:n}function ax(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function l0(t){return t<65536?1:2}const Ku=/\r\n?|\n/;var it=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(it||(it={}));class un{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){qu(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new un(e)}composeDesc(e){return this.empty?e:e.empty?this:o0(this,e)}mapDesc(e,n=!1){return e.empty?this:Gu(this,e,n)}mapPos(e,n=-1,r=it.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=it.Simple&&u>=e&&(r==it.TrackDel&&i<e&&u>e||r==it.TrackBefore&&i<e||r==it.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new un(e)}static create(e){return new un(e)}}class we extends un{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return qu(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return Gu(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(U.empty);r.push(l?e.slice(s,s+l):U.empty)}s+=l}return new we(n,r)}compose(e){return this.empty?e:e.empty?this:o0(this,e,!0)}map(e,n=!1){return e.empty?this:Gu(this,e,n,!0)}iterChanges(e,n=!1){qu(this,e,n)}get desc(){return un.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new gs(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,a-o);Be(i,h,-1);let c=s.ins==-1?-1:s.off==0?s.ins:0;Be(n,h,c),c>0&&Mn(r,n,s.text),s.forward(h),o+=h}let u=e[l++];for(;o<u;){if(s.done)break e;let h=Math.min(s.len,u-o);Be(n,h,-1),Be(i,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),o+=h}}return{changes:new we(n,r),filtered:un.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(h=!1){if(!h&&!i.length)return;l<n&&Be(i,n-l,-1);let c=new we(i,s);o=o?o.compose(c.map(o)):c,i=[],s=[],l=0}function u(h){if(Array.isArray(h))for(let c of h)u(c);else if(h instanceof we){if(h.length!=n)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${n})`);a(),o=o?o.compose(h.map(o)):h}else{let{from:c,to:f=c,insert:d}=h;if(c>f||c<0||f>n)throw new RangeError(`Invalid change range ${c} to ${f} (in doc of length ${n})`);let m=d?typeof d=="string"?U.of(d.split(r||Ku)):d:U.empty,v=m.length;if(c==f&&v==0)return;c<l&&a(),c>l&&Be(i,c-l,-1),Be(i,f-c,v),Mn(s,i,m),l=f}}return u(e),a(!o),o}static empty(e){return new we(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(U.empty);r[i]=U.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new we(n,r)}static createSet(e,n){return new we(e,n)}}function Be(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Mn(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(U.empty);t.push(n)}}function qu(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,h=s,c=U.empty;for(;u+=o,h+=a,a&&r&&(c=c.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,h,c),i=u,s=h}}}function Gu(t,e,n,r=!1){let i=[],s=r?[]:null,l=new gs(t),o=new gs(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);Be(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(Be(i,o.ins,-1);u;){let h=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=h&&(Be(i,0,l.ins),s&&Mn(s,i,l.text),a=l.i),l.forward(h),u-=h}o.next()}else if(l.ins>=0){let u=0,h=l.len;for(;h;)if(o.ins==-1){let c=Math.min(h,o.len);u+=c,h-=c,o.forward(c)}else if(o.ins==0&&o.len<h)h-=o.len,o.next();else break;Be(i,u,a<l.i?l.ins:0),s&&a<l.i&&Mn(s,i,l.text),a=l.i,l.forward(l.len-h)}else{if(l.done&&o.done)return s?we.createSet(i,s):un.create(i);throw new Error("Mismatched change set lengths")}}}function o0(t,e,n=!1){let r=[],i=n?[]:null,s=new gs(t),l=new gs(e);for(let o=!1;;){if(s.done&&l.done)return i?we.createSet(r,i):un.create(r);if(s.ins==0)Be(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)Be(r,0,l.ins,o),i&&Mn(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let h=l.ins==-1?-1:l.off?0:l.ins;Be(r,a,h,o),i&&h&&Mn(i,r,l.text)}else l.ins==-1?(Be(r,s.off?0:s.len,a,o),i&&Mn(i,r,s.textBit(a))):(Be(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Mn(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class gs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?U.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?U.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class sr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new sr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return E.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return E.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return E.range(e.anchor,e.head)}static create(e,n,r){return new sr(e,n,r)}}class E{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:E.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new E([this.main],0)}addRange(e,n=!0){return E.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,E.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new E(e.ranges.map(n=>sr.fromJSON(n)),e.main)}static single(e,n=e){return new E([E.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return E.normalized(e.slice(),n);r=s.to}return new E(e,n)}static cursor(e,n=0,r,i){return sr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?sr.create(n,e,48|s):sr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?E.range(a,o):E.range(o,a))}}return new E(e,n)}}function a0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Oc=0;class R{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Oc++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new R(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Nc),!!e.static,e.enables)}of(e){return new Rl([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rl(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rl(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Nc(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Rl{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Oc++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,h=[];for(let c of this.dependencies)c=="doc"?a=!0:c=="selection"?u=!0:((n=e[c.id])!==null&&n!==void 0?n:1)&1||h.push(e[c.id]);return{create(c){return c.values[l]=r(c),1},update(c,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||Yu(c,h)){let d=r(c);if(o?!vd(d,c.values[l],i):!i(d,c.values[l]))return c.values[l]=d,1}return 0},reconfigure:(c,f)=>{let d,m=f.config.address[s];if(m!=null){let v=co(f,m);if(this.dependencies.every(k=>k instanceof R?f.facet(k)===c.facet(k):k instanceof It?f.field(k,!1)==c.field(k,!1):!0)||(o?vd(d=r(c),v,i):i(d=r(c),v)))return c.values[l]=v,0}else d=r(c);return c.values[l]=d,1}}}}function vd(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Yu(t,e){let n=!1;for(let r of e)qi(t,r)&1&&(n=!0);return n}function ux(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let h=0;h<r.length;h++){let c=co(a,r[h]);if(i[h]==2)for(let f of c)u.push(f);else u.push(c)}return e.combine(u)}return{create(a){for(let u of r)qi(a,u);return a.values[l]=o(a),1},update(a,u){if(!Yu(a,s))return 0;let h=o(a);return e.compare(h,a.values[l])?0:(a.values[l]=h,1)},reconfigure(a,u){let h=Yu(a,r),c=u.config.facets[e.id],f=u.facet(e);if(c&&!h&&Nc(n,c))return a.values[l]=f,0;let d=o(a);return e.compare(d,f)?(a.values[l]=f,0):(a.values[l]=d,1)}}}const tl=R.define({static:!0});class It{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new It(Oc++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(tl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(tl),l=i.facet(tl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,tl.of({field:this,create:e})]}get extension(){return this}}const tr={lowest:4,low:3,default:2,high:1,highest:0};function Ei(t){return e=>new u0(e,t)}const $o={highest:Ei(tr.highest),high:Ei(tr.high),default:Ei(tr.default),low:Ei(tr.low),lowest:Ei(tr.lowest)};class u0{constructor(e,n){this.inner=e,this.prec=n}}class Ko{of(e){return new Qu(this,e)}reconfigure(e){return Ko.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Qu{constructor(e,n){this.compartment=e,this.inner=n}}class ho{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of hx(e,n,l))f instanceof It?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(d=>f.slot(d));let h=r==null?void 0:r.config.facets;for(let f in s){let d=s[f],m=d[0].facet,v=h&&h[f]||[];if(d.every(k=>k.type==0))if(o[m.id]=a.length<<1|1,Nc(v,d))a.push(r.facet(m));else{let k=m.combine(d.map(p=>p.value));a.push(r&&m.compare(k,r.facet(m))?r.facet(m):k)}else{for(let k of d)k.type==0?(o[k.id]=a.length<<1|1,a.push(k.value)):(o[k.id]=u.length<<1,u.push(p=>k.dynamicSlot(p)));o[m.id]=u.length<<1,u.push(k=>ux(k,m,d))}}let c=u.map(f=>f(o));return new ho(e,l,c,o,a,s)}}function hx(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof Qu&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof Qu){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof u0)s(l.inner,l.prec);else if(l instanceof It)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof Rl)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,tr.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,tr.default),r.reduce((l,o)=>l.concat(o))}function qi(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function co(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const h0=R.define(),Ju=R.define({combine:t=>t.some(e=>e),static:!0}),c0=R.define({combine:t=>t.length?t[0]:void 0,static:!0}),f0=R.define(),d0=R.define(),p0=R.define(),m0=R.define({combine:t=>t.length?t[0]:!1});class pi{constructor(e,n){this.type=e,this.value=n}static define(){return new cx}}class cx{of(e){return new pi(this,e)}}class fx{constructor(e){this.map=e}of(e){return new ne(this,e)}}class ne{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ne(this.type,n)}is(e){return this.type==e}static define(e={}){return new fx(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}ne.reconfigure=ne.define();ne.appendConfig=ne.define();class _e{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&a0(r,n.newLength),s.some(o=>o.type==_e.time)||(this.annotations=s.concat(_e.time.of(Date.now())))}static create(e,n,r,i,s,l){return new _e(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(_e.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}_e.time=pi.define();_e.userEvent=pi.define();_e.addToHistory=pi.define();_e.remote=pi.define();function dx(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function g0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=we.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:ne.mapEffects(t.effects,i).concat(ne.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Xu(t,e,n){let r=e.selection,i=qr(e.annotations);return e.userEvent&&(i=i.concat(_e.userEvent.of(e.userEvent))),{changes:e.changes instanceof we?e.changes:we.of(e.changes||[],n,t.facet(c0)),selection:r&&(r instanceof E?r:E.single(r.anchor,r.head)),effects:qr(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function y0(t,e,n){let r=Xu(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=g0(r,Xu(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=_e.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return mx(n?px(i):i)}function px(t){let e=t.startState,n=!0;for(let i of e.facet(f0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:dx(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=we.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=_e.create(e,i,t.selection&&t.selection.map(s),ne.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(d0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof _e?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof _e?t=s[0]:t=y0(e,qr(s),!1)}return t}function mx(t){let e=t.startState,n=e.facet(p0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=g0(r,Xu(e,s,t.changes.newLength),!0))}return r==t?t:_e.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const gx=[];function qr(t){return t==null?gx:Array.isArray(t)?t:[t]}var Ne=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Ne||(Ne={}));const yx=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Zu;try{Zu=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function vx(t){if(Zu)return Zu.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||yx.test(n)))return!0}return!1}function kx(t){return e=>{if(!/\S/.test(e))return Ne.Space;if(vx(e))return Ne.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Ne.Word;return Ne.Other}}class K{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)qi(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return qi(this,r),co(this,r)}update(...e){return y0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(Ko.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(ne.reconfigure)?(n=null,r=o.value):o.is(ne.appendConfig)&&(n=null,r=qr(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=ho.resolve(r,i,this),s=new K(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(Ju)?e.newSelection:e.newSelection.asSingle();new K(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:E.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=qr(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),h=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(h);let c=i.mapDesc(u,!0);s.push(a.range.map(c)),i=i.compose(h),l=ne.mapEffects(l,h).concat(ne.mapEffects(qr(a.effects),c))}return{changes:i,selection:E.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof we?e:we.of(e,this.doc.length,this.facet(K.lineSeparator))}toText(e){return U.of(e.split(this.facet(K.lineSeparator)||Ku))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(qi(this,n),co(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof It&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return K.create({doc:e.doc,selection:E.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=ho.resolve(e.extensions||[],new Map),r=e.doc instanceof U?e.doc:U.of((e.doc||"").split(n.staticFacet(K.lineSeparator)||Ku)),i=e.selection?e.selection instanceof E?e.selection:E.single(e.selection.anchor,e.selection.head):E.single(0);return a0(i,r.length),n.staticFacet(Ju)||(i=i.asSingle()),new K(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(K.tabSize)}get lineBreak(){return this.facet(K.lineSeparator)||`
`}get readOnly(){return this.facet(m0)}phrase(e,...n){for(let r of this.facet(K.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(h0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return kx(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=Oe(n,l,!1);if(s(n.slice(a,l))!=Ne.Word)break;l=a}for(;o<i;){let a=Oe(n,o);if(s(n.slice(o,a))!=Ne.Word)break;o=a}return l==o?null:E.range(l+r,o+r)}}K.allowMultipleSelections=Ju;K.tabSize=R.define({combine:t=>t.length?t[0]:4});K.lineSeparator=c0;K.readOnly=m0;K.phrases=R.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});K.languageData=h0;K.changeFilter=f0;K.transactionFilter=d0;K.transactionExtender=p0;Ko.reconfigure=ne.define();function qo(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class si{eq(e){return this==e}range(e,n=e){return eh.create(e,n,this)}}si.prototype.startSide=si.prototype.endSide=0;si.prototype.point=!1;si.prototype.mapMode=it.TrackDel;let eh=class v0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new v0(e,n,r)}};function th(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Dc{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],h=this.from[a]+e,c=this.to[a]+e,f,d;if(h==c){let m=n.mapPos(h,u.startSide,u.mapMode);if(m==null||(f=d=m,u.startSide!=u.endSide&&(d=n.mapPos(h,u.endSide),d<f)))continue}else if(f=n.mapPos(h,u.startSide),d=n.mapPos(c,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,d-f)),r.push(u),i.push(f-l),s.push(d-l))}return{mapped:r.length?new Dc(i,s,r,o):null,pos:l}}}class Y{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new Y(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(th)),this.isEmpty)return n.length?Y.of(n):this;let o=new k0(this,null,-1).goto(0),a=0,u=[],h=new mr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let c=n[a++];h.addInner(c.from,c.to,c.value)||u.push(c)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&h.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(h.addInner(o.from,o.to,o.value)||u.push(eh.create(o.from,o.to,o.value))),o.next());return h.finishInner(this.nextLayer.isEmpty&&!u.length?Y.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:h,pos:c}=a.map(o,e);h&&(i=Math.max(i,h.maxPoint),n.push(h),r.push(c))}}let s=this.nextLayer.map(e);return n.length==0?s:new Y(r,n,s||Y.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return ys.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return ys.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),o=n.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),a=kd(l,o,r),u=new bi(l,a,s),h=new bi(o,a,s);r.iterGaps((c,f,d)=>xd(u,c,h,f,d,i)),r.empty&&r.length==0&&xd(u,0,h,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(h=>!h.isEmpty&&n.indexOf(h)<0),l=n.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=kd(s,l),a=new bi(s,o,0).goto(r),u=new bi(l,o,0).goto(r);for(;;){if(a.to!=u.to||!nh(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new bi(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let h=l.activeForPoint(l.to),c=l.pointFrom<n?h.length+1:l.point.startSide<0?h.length:Math.min(h.length,a);i.point(o,u,l.point,h,c,l.pointRank),a=Math.min(l.openEnd(u),h.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new mr;for(let i of e instanceof eh?[e]:n?xx(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Y.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Y.empty;i=i.nextLayer)n=new Y(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}Y.empty=new Y([],[],null,-1);function xx(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(th(e,r)>0)return t.slice().sort(th);e=r}return t}Y.empty.nextLayer=Y.empty;class mr{finishChunk(e){this.chunks.push(new Dc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new mr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(Y.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Y.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function kd(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class k0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ys{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new k0(l,n,r,s));return i.length==1?i[0]:new ys(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Na(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Na(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Na(this.heap,0)}}}function Na(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class bi{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ys.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){nl(this.active,e),nl(this.activeTo,e),nl(this.activeRank,e),this.minActive=wd(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;rl(this.active,n,r),rl(this.activeTo,n,i),rl(this.activeRank,n,s),e&&rl(e,n,this.cursor.from),this.minActive=wd(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&nl(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function xd(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,h=u||t.endSide-n.endSide,c=h<0?t.to+a:n.to,f=Math.min(c,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&nh(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!nh(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),c>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(c),o=c,h<=0&&t.next(),h>=0&&n.next()}}function nh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function nl(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function rl(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function wd(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Go(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Oe(t,i));return r}function wx(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Oe(t,i)}return t.length}const rh="",Sd=typeof Symbol>"u"?"__"+rh:Symbol.for(rh),ih=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Hn{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let h=[],c=/^@(\w+)\b/.exec(l[0]),f=c&&c[1]=="keyframes";if(c&&o==null)return a.push(l[0]+";");for(let d in o){let m=o[d];if(/&/.test(d))s(d.split(/,\s*/).map(v=>l.map(k=>v.replace(/&/,k))).reduce((v,k)=>v.concat(k)),m,a);else if(m&&typeof m=="object"){if(!c)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),m,h,f)}else m!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+m+";")}(h.length||f)&&a.push((r&&!c&&!u?l.map(r):l).join(", ")+" {"+h.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Cd[Sd]||1;return Cd[Sd]=e+1,rh+e.toString(36)}static mount(e,n,r){let i=e[ih],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Sx(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let Ad=new Map;class Sx{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=Ad.get(r);if(s)return e[ih]=s;this.sheet=new i.CSSStyleSheet,Ad.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[ih]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Vn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},vs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Cx=typeof navigator<"u"&&/Mac/.test(navigator.platform),Ax=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var be=0;be<10;be++)Vn[48+be]=Vn[96+be]=String(be);for(var be=1;be<=24;be++)Vn[be+111]="F"+be;for(var be=65;be<=90;be++)Vn[be]=String.fromCharCode(be+32),vs[be]=String.fromCharCode(be);for(var Da in Vn)vs.hasOwnProperty(Da)||(vs[Da]=Vn[Da]);function Ex(t){var e=Cx&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Ax&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?vs:Vn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Ae(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)x0(t,arguments[e]);return t}function x0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)x0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function ks(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function sh(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Bl(t,e){if(!e.anchorNode)return!1;try{return sh(t,e.anchorNode)}catch{return!1}}function xs(t){return t.nodeType==3?yr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Gi(t,e,n,r){return n?Ed(t,e,n,r,-1)||Ed(t,e,n,r,1):!1}function gr(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function fo(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Ed(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Zt(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=gr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Zt(t):0}else return!1}}function Zt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Yo(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function bx(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function w0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function Mx(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let h=t,c=!1;h&&!c;)if(h.nodeType==1){let f,d=h==a.body,m=1,v=1;if(d)f=bx(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(c=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let g=h.getBoundingClientRect();({scaleX:m,scaleY:v}=w0(h,g)),f={left:g.left,right:g.left+h.clientWidth*m,top:g.top,bottom:g.top+h.clientHeight*v}}let k=0,p=0;if(i=="nearest")e.top<f.top?(p=e.top-(f.top+l),n>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,n<0&&e.top-p<f.top&&(p=e.top-(f.top+l)));else{let g=e.bottom-e.top,y=f.bottom-f.top;p=(i=="center"&&g<=y?e.top+g/2-y/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-y+l)-f.top}if(r=="nearest"?e.left<f.left?(k=e.left-(f.left+s),n>0&&e.right>f.right+k&&(k=e.right-f.right+s)):e.right>f.right&&(k=e.right-f.right+s,n<0&&e.left<f.left+k&&(k=e.left-(f.left+s))):k=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,k||p)if(d)u.scrollBy(k,p);else{let g=0,y=0;if(p){let x=h.scrollTop;h.scrollTop+=p/v,y=(h.scrollTop-x)*v}if(k){let x=h.scrollLeft;h.scrollLeft+=k/m,g=(h.scrollLeft-x)*m}e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y},g&&Math.abs(g-k)<1&&(r="nearest"),y&&Math.abs(y-p)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function Tx(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class Ox{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?Zt(n):0),r,Math.min(e.focusOffset,r?Zt(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Cr=null;function S0(t){if(t.setActive)return t.setActive();if(Cr)return t.focus(Cr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Cr==null?{get preventScroll(){return Cr={preventScroll:!0},!0}}:void 0),!Cr){Cr=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let bd;function yr(t,e,n=e){let r=bd||(bd=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Gr(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function Nx(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function C0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Dx(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,Zt(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=Zt(n))}else{if(n==t)return!0;r=gr(n),n=n.parentNode}}function A0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function E0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=Zt(n)}else if(n.parentNode&&!fo(n))r=gr(n),n=n.parentNode;else return null}}function b0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!fo(n))r=gr(n)+1,n=n.parentNode;else return null}}class Fe{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Fe(e.parentNode,gr(e),n)}static after(e,n){return new Fe(e.parentNode,gr(e)+1,n)}}const Pc=[];class Z{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=Z.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=Md(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=Md(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=Zt(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Z.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,h=r;a<this.children.length;a++){let c=this.children[a],f=u+c.length;if(u<e&&f>n)return c.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&c.dom.parentNode==this.dom){l=a,o=h;break}h=f,u=f+c.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=Pc){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new M0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Z.prototype.breakAfter=0;function Md(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class M0{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function T0(t,e,n,r,i,s,l,o,a){let{children:u}=t,h=u.length?u[e]:null,c=s.length?s[s.length-1]:null,f=c?c.breakAfter:l;if(!(e==r&&h&&!l&&!f&&s.length<2&&h.merge(n,i,s.length?c:null,n==0,o,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&(c!=null&&c.breakAfter))?(e==r&&(d=d.split(i),i=0),!f&&c&&d.merge(0,i,c,!0,0,a)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(c?c.breakAfter=1:l=1),r++}for(h&&(h.breakAfter=l,n>0&&(!l&&s.length&&h.merge(n,h.length,s[0],!1,o,0)?h.breakAfter=s.shift().breakAfter:(n<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(n,h.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function O0(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:h}=l.findPos(e,-1),c=e-n;for(let f of r)c+=f.length;t.length+=c,T0(t,u,h,o,a,r,0,i,s)}let Ye=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},lh=typeof document<"u"?document:{documentElement:{style:{}}};const oh=/Edge\/(\d+)/.exec(Ye.userAgent),N0=/MSIE \d/.test(Ye.userAgent),ah=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ye.userAgent),Qo=!!(N0||ah||oh),Td=!Qo&&/gecko\/(\d+)/i.test(Ye.userAgent),Pa=!Qo&&/Chrome\/(\d+)/.exec(Ye.userAgent),Px="webkitFontSmoothing"in lh.documentElement.style,D0=!Qo&&/Apple Computer/.test(Ye.vendor),Od=D0&&(/Mobile\/\w+/.test(Ye.userAgent)||Ye.maxTouchPoints>2);var D={mac:Od||/Mac/.test(Ye.platform),windows:/Win/.test(Ye.platform),linux:/Linux|X11/.test(Ye.platform),ie:Qo,ie_version:N0?lh.documentMode||6:ah?+ah[1]:oh?+oh[1]:0,gecko:Td,gecko_version:Td?+(/Firefox\/(\d+)/.exec(Ye.userAgent)||[0,0])[1]:0,chrome:!!Pa,chrome_version:Pa?+Pa[1]:0,ios:Od,android:/Android\b/.test(Ye.userAgent),safari:D0,webkit_version:Px?+(/\bAppleWebKit\/(\d+)/.exec(Ye.userAgent)||[0,0])[1]:0,tabSize:lh.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Lx=256;class Rt extends Z{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Rt)||this.length-(n-e)+r.length>Lx||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Rt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Fe(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Rx(this.dom,e,n)}}class mn extends Z{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(C0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof mn&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(O0(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new mn(this.mark,n,l)}domAtPos(e){return P0(this,e)}coordsAt(e,n){return R0(this,e,n)}}function Rx(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?D.chrome||D.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=yr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return D.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?Yo(a,l<0):a||null}class lr extends Z{static create(e,n,r){return new lr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=lr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof lr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof lr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return U.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):U.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Fe.before(this.dom):Fe.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return Yo(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class li extends Z{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof li&&e.side==this.side}split(){return new li(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Fe.before(this.dom):Fe.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return U.empty}get isHidden(){return!0}}Rt.prototype.children=lr.prototype.children=li.prototype.children=Pc;function P0(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new Fe(n,0)}function L0(t,e,n){let r,{children:i}=t;n>0&&e instanceof mn&&i.length&&(r=i[i.length-1])instanceof mn&&r.mark.eq(e.mark)?L0(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function R0(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,h){for(let c=0,f=0;c<u.children.length&&f<=h;c++){let d=u.children[c],m=f+d.length;m>=h&&(d.children.length?o(d,h-f):(!s||s.isHidden&&(n>0||Ix(s,d)))&&(m>h||f==m&&d.getSide()>0)?(s=d,l=h-f):(f<h||f==m&&d.getSide()<0&&!d.isHidden)&&(r=d,i=h-f)),f=m}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):Bx(t)}function Bx(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=xs(e);return n[n.length-1]||null}function Ix(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function uh(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Nd=Object.create(null);function po(t,e,n){if(t==e)return!0;t||(t=Nd),e||(e=Nd);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function hh(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function Fx(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Ps{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var kt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(kt||(kt={}));class j extends si{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Ls(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Wn(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=B0(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new Wn(e,r,i,n,e.widget||null,!0)}static line(e){return new Rs(e)}static set(e,n=!1){return Y.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}j.none=Y.empty;class Ls extends j{constructor(e){let{start:n,end:r}=B0(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Ls&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&po(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Ls.prototype.point=!1;class Rs extends j{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Rs&&this.spec.class==e.spec.class&&po(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Rs.prototype.mapMode=it.TrackBefore;Rs.prototype.point=!0;class Wn extends j{constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?it.TrackBefore:it.TrackAfter:it.TrackDel}get type(){return this.startSide!=this.endSide?kt.WidgetRange:this.startSide<=0?kt.WidgetBefore:kt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Wn&&_x(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Wn.prototype.point=!0;function B0(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function _x(t,e){return t==e||!!(t&&e&&t.compare(e))}function Il(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class pe extends Z{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof pe))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),O0(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new pe;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){po(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){L0(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=uh(n,this.attrs||{})),r&&(this.attrs=uh({class:r},this.attrs||{}))}domAtPos(e){return P0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(C0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(hh(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&Z.get(i)instanceof mn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Z.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!D.ios||!this.children.some(s=>s instanceof Rt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Rt)||/[^ -~]/.test(r.text))return null;let i=xs(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=R0(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof pe&&this.children.length==0&&e.children.length==0&&po(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof pe)return s;if(l>n)break}i=l+s.breakAfter}return null}}class hn extends Z{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof hn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Fe.before(this.dom):Fe.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new hn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return Pc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):U.empty}domBoundsAround(){return null}become(e){return e instanceof hn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof ch?null:Yo(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class ch extends Ps{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Yi{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof hn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new pe),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(il(new li(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof hn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(il(new Rt(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof Wn){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof Wn)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new hn(r.widget||oi.block,o,r));else{let a=lr.create(r.widget||oi.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),h=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),c=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(c.append(il(new li(1),i),s),s=i.length+Math.max(0,s-i.length)),c.append(il(a,i),s),this.atCursorPos=h,this.pendingBuffer=h?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new Yi(e,n,r,s);return l.openEnd=Y.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function il(t,e){for(let n of e)t=new mn(n,[t],t.length);return t}class oi extends Ps{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}oi.inline=new oi("span");oi.block=new oi("div");var ke=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(ke||(ke={}));const vr=ke.LTR,Lc=ke.RTL;function I0(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const zx=I0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),jx=I0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),fh=Object.create(null),Ht=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);fh[e]=n,fh[n]=-e}function F0(t){return t<=247?zx[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?jx[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Hx=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Tn{get dir(){return this.level%2?Lc:vr}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function _0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!_0(r.inner,i.inner))return!1}return!0}const X=[];function Vx(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,h=a,c=a;u<o;u++){let f=F0(t.charCodeAt(u));f==512?f=h:f==8&&c==4&&(f=16),X[u]=f==4?2:f,f&7&&(c=f),h=f}for(let u=l,h=a,c=a;u<o;u++){let f=X[u];if(f==128)u<o-1&&h==X[u+1]&&h&24?f=X[u]=h:X[u]=256;else if(f==64){let d=u+1;for(;d<o&&X[d]==64;)d++;let m=u&&h==8||d<n&&X[d]==8?c==1?1:8:256;for(let v=u;v<d;v++)X[v]=m;u=d-1}else f==8&&c==1&&(X[u]=1);h=f,f&7&&(c=f)}}}function Wx(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,h=l<r.length?r[l].from:n;for(let c=u,f,d,m;c<h;c++)if(d=fh[f=t.charCodeAt(c)])if(d<0){for(let v=o-3;v>=0;v-=3)if(Ht[v+1]==-d){let k=Ht[v+2],p=k&2?i:k&4?k&1?s:i:0;p&&(X[c]=X[Ht[v]]=p),o=v;break}}else{if(Ht.length==189)break;Ht[o++]=c,Ht[o++]=f,Ht[o++]=a}else if((m=X[c])==2||m==1){let v=m==i;a=v?0:1;for(let k=o-3;k>=0;k-=3){let p=Ht[k+2];if(p&2)break;if(v)Ht[k+2]|=2;else{if(p&4)break;Ht[k+2]|=4}}}}}function Ux(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=X[a];if(u==256){let h=a+1;for(;;)if(h==o){if(i==n.length)break;h=n[i++].to,o=i<n.length?n[i].from:e}else if(X[h]==256)h++;else break;let c=s==1,f=(h<e?X[h]:r)==1,d=c==f?c?1:2:r;for(let m=h,v=i,k=v?n[v-1].to:t;m>a;)m==k&&(m=n[--v].from,k=v?n[v-1].to:t),X[--m]=d;a=h}else s=u,a++}}}function dh(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let h=!0,c=!1;if(u==s.length||a<s[u].from){let v=X[a];v!=o&&(h=!1,c=v==16)}let f=!h&&o==1?[]:null,d=h?r:r+1,m=a;e:for(;;)if(u<s.length&&m==s[u].from){if(c)break e;let v=s[u];if(!h)for(let k=v.to,p=u+1;;){if(k==n)break e;if(p<s.length&&s[p].from==k)k=s[p++].to;else{if(X[k]==o)break e;break}}if(u++,f)f.push(v);else{v.from>a&&l.push(new Tn(a,v.from,d));let k=v.direction==vr!=!(d%2);ph(t,k?r+1:r,i,v.inner,v.from,v.to,l),a=v.to}m=v.to}else{if(m==n||(h?X[m]!=o:X[m]==o))break;m++}f?dh(t,a,m,r+1,i,f,l):a<m&&l.push(new Tn(a,m,d)),a=m}else for(let a=n,u=s.length;a>e;){let h=!0,c=!1;if(!u||a>s[u-1].to){let v=X[a-1];v!=o&&(h=!1,c=v==16)}let f=!h&&o==1?[]:null,d=h?r:r+1,m=a;e:for(;;)if(u&&m==s[u-1].to){if(c)break e;let v=s[--u];if(!h)for(let k=v.from,p=u;;){if(k==e)break e;if(p&&s[p-1].to==k)k=s[--p].from;else{if(X[k-1]==o)break e;break}}if(f)f.push(v);else{v.to<a&&l.push(new Tn(v.to,a,d));let k=v.direction==vr!=!(d%2);ph(t,k?r+1:r,i,v.inner,v.from,v.to,l),a=v.from}m=v.from}else{if(m==e||(h?X[m-1]!=o:X[m-1]==o))break;m--}f?dh(t,m,a,r+1,i,f,l):m<a&&l.push(new Tn(m,a,d)),a=m}}function ph(t,e,n,r,i,s,l){let o=e%2?2:1;Vx(t,i,s,r,o),Wx(t,i,s,r,o),Ux(i,s,r,o),dh(t,i,s,e,n,r,l)}function $x(t,e,n){if(!t)return[new Tn(0,0,e==Lc?1:0)];if(e==vr&&!n.length&&!Hx.test(t))return z0(t.length);if(n.length)for(;t.length>X.length;)X[X.length]=256;let r=[],i=e==vr?0:1;return ph(t,i,i,n,0,t.length,r),r}function z0(t){return[new Tn(0,t,0)]}let j0="";function Kx(t,e,n,r,i){var s;let l=r.head-t.from,o=Tn.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let h=Oe(t.text,l,a.forward(i,n));(h<a.from||h>a.to)&&(h=u),j0=t.text.slice(Math.min(l,h),Math.max(l,h));let c=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return c&&h==u&&c.level+(i?0:1)<a.level?E.cursor(c.side(!i,n)+t.from,c.forward(i,n)?1:-1,c.level):E.cursor(h+t.from,a.forward(i,n)?-1:1,a.level)}function qx(t,e,n){for(let r=e;r<n;r++){let i=F0(t.charCodeAt(r));if(i==1)return vr;if(i==2||i==4)return Lc}return vr}const H0=R.define(),V0=R.define(),W0=R.define(),U0=R.define(),mh=R.define(),$0=R.define(),K0=R.define(),Rc=R.define(),Bc=R.define(),q0=R.define({combine:t=>t.some(e=>e)}),Gx=R.define({combine:t=>t.some(e=>e)}),G0=R.define();class Yr{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new Yr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Yr(E.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const sl=ne.define({map:(t,e)=>t.map(e)}),Y0=ne.define();function Yt(t,e,n){let r=t.facet(U0);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const sn=R.define({combine:t=>t.length?t[0]:!0});let Yx=0;const _r=R.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class at{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(_r.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(_r.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new at(Yx++,e,r,i,o=>{let a=[];return l&&a.push(ws.of(u=>{let h=u.plugin(o);return h?l(h):j.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return at.define((r,i)=>new e(r,i),n)}}class La{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Yt(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Yt(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Yt(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Q0=R.define(),Ic=R.define(),ws=R.define(),J0=R.define(),Bs=R.define(),X0=R.define();function Dd(t,e){let n=t.state.facet(X0);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return Y.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,h=l-e.from,c=i;for(let f=o.length-1;f>=0;f--,a--){let d=o[f].spec.bidiIsolate,m;if(d==null&&(d=qx(e.text,u,h)),a>0&&c.length&&(m=c[c.length-1]).to==u&&m.direction==d)m.to=h,c=m.inner;else{let v={from:u,to:h,direction:d,inner:[]};c.push(v),c=v.inner}}}}),i}const Z0=R.define();function ey(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(Z0)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Ri=R.define();class xt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new xt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,h=a?a.fromB:1e9;for(;s<n.length&&n[s]<h;){let c=n[s],f=n[s+1],d=Math.max(o,c),m=Math.min(h,f);if(d<=m&&new xt(d+u,m+u,d,m).addToSet(r),f>h)break;s+=2}if(!a)return r;new xt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class mo{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=we.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new xt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new mo(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Pd extends Z{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=j.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new pe],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:h})=>h<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!nw(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?Jx(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:h}=this.hasComposition;r=new xt(u,h,e.changes.mapPos(u,-1),e.changes.mapPos(h,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(D.ie||D.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=ew(l,o,e.changes);return r=xt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=D.chrome||D.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof hn&&l.widget instanceof ch&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:h,toB:c}=o,f,d,m,v;if(r&&r.range.fromB<c&&r.range.toB>h){let x=Yi.build(this.view.state.doc,h,r.range.fromB,this.decorations,this.dynamicDecorationMap),S=Yi.build(this.view.state.doc,r.range.toB,c,this.decorations,this.dynamicDecorationMap);d=x.breakAtStart,m=x.openStart,v=S.openEnd;let A=this.compositionView(r);S.breakAtStart?A.breakAfter=1:S.content.length&&A.merge(A.length,A.length,S.content[0],!1,S.openStart,0)&&(A.breakAfter=S.content[0].breakAfter,S.content.shift()),x.content.length&&A.merge(0,0,x.content[x.content.length-1],!0,0,x.openEnd)&&x.content.pop(),f=x.content.concat(A).concat(S.content)}else({content:f,breakAtStart:d,openStart:m,openEnd:v}=Yi.build(this.view.state.doc,h,c,this.decorations,this.dynamicDecorationMap));let{i:k,off:p}=s.findPos(u,1),{i:g,off:y}=s.findPos(a,-1);T0(this,g,y,k,p,f,d,m,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(Y0)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Rt(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new mn(i,[n],n.length);let r=new pe;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=Z.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(sn)||this.dom.tabIndex>-1)&&Bl(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(D.gecko&&o.empty&&!this.hasComposition&&Qx(a)){let c=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(c,a.node.childNodes[a.offset]||null)),a=u=new Fe(c,0),l=!0}let h=this.view.observer.selectionRange;(l||!h.focusNode||(!Gi(a.node,a.offset,h.anchorNode,h.anchorOffset)||!Gi(u.node,u.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,o))&&(this.view.observer.ignore(()=>{D.android&&D.chrome&&this.dom.contains(h.focusNode)&&tw(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let c=ks(this.view.root);if(c)if(o.empty){if(D.gecko){let f=Xx(a.node,a.offset);if(f&&f!=3){let d=(f==1?E0:b0)(a.node,a.offset);d&&(a=new Fe(d.node,d.offset))}}c.collapse(a.node,a.offset),o.bidiLevel!=null&&c.caretBidiLevel!==void 0&&(c.caretBidiLevel=o.bidiLevel)}else if(c.extend){c.collapse(a.node,a.offset);try{c.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Fe(h.anchorNode,h.anchorOffset),this.impreciseHead=u.precise?null:new Fe(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Gi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=ks(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=pe.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let h=this.domAtPos(n.head+n.assoc);r.collapse(h.node,h.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=Z.get(n.childNodes[i]);s instanceof pe&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Z.get(n.childNodes[i]);s instanceof pe&&(r=s.domAtPos(s.length))}return r?new Fe(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=Z.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof pe)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof pe&&!(r instanceof pe&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof hn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof pe))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Rt))return null;let s=Oe(i.text,r);if(s==r)return null;let l=yr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==ke.LTR;for(let u=0,h=0;h<this.children.length;h++){let c=this.children[h],f=u+c.length;if(f>i)break;if(u>=r){let d=c.dom.getBoundingClientRect();if(n.push(d.height),l){let m=c.dom.lastChild,v=m?xs(m):[];if(v.length){let k=v[v.length-1],p=a?k.right-d.left:d.right-k.left;p>o&&(o=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+c.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?ke.RTL:ke.LTR}measureTextSize(){for(let s of this.children)if(s instanceof pe){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=xs(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new M0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(j.replace({widget:new ch(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return j.set(e)}updateDeco(){let e=1,n=this.view.state.facet(ws).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(J0).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(Y.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(G0))try{if(u(this.view,e.range,e))return!0}catch(h){Yt(this.view.state,h,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=ey(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;Mx(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==ke.LTR)}}function Qx(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function ty(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=E0(n.focusNode,n.focusOffset),i=b0(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=Z.get(i.node);if(!o||o instanceof Rt&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=Z.get(r.node);!a||a instanceof Rt&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function Jx(t,e,n){let r=ty(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new xt(a.mapPos(s),a.mapPos(l),s,l),h=[];for(let c=i.parentNode;;c=c.parentNode){let f=Z.get(c);if(f instanceof mn)h.push({node:c,deco:f.mark});else{if(f instanceof pe||c.nodeName=="DIV"&&c.parentNode==t.contentDOM)return{range:u,text:i,marks:h,line:c};if(c!=t.contentDOM)h.push({node:c,deco:new Ls({inclusive:!0,attributes:Fx(c),tagName:c.tagName.toLowerCase()})});else return null}}}function Xx(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Zx=class{constructor(){this.changes=[]}compareRange(e,n){Il(e,n,this.changes)}comparePoint(e,n){Il(e,n,this.changes)}boundChange(e){Il(e,e,this.changes)}};function ew(t,e,n){let r=new Zx;return Y.compare(t,e,n,r),r.changes}function tw(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function nw(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function rw(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return E.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=Oe(i.text,s,!1):o=Oe(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=Oe(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=Oe(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return E.range(l+i.from,o+i.from)}function iw(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function sw(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Ra(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Ld(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Rd(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function gh(t,e,n){let r,i,s,l,o=!1,a,u,h,c;for(let m=t.firstChild;m;m=m.nextSibling){let v=xs(m);for(let k=0;k<v.length;k++){let p=v[k];i&&Ra(i,p)&&(p=Ld(Rd(p,i.bottom),i.top));let g=iw(e,p),y=sw(n,p);if(g==0&&y==0)return m.nodeType==3?Bd(m,e,n):gh(m,e,n);(!r||l>y||l==y&&s>g)&&(r=m,i=p,s=g,l=y,o=g?e<p.left?k>0:k<v.length-1:!0),g==0?n>p.bottom&&(!h||h.bottom<p.bottom)?(a=m,h=p):n<p.top&&(!c||c.top>p.top)&&(u=m,c=p):h&&Ra(h,p)?h=Rd(h,p.bottom):c&&Ra(c,p)&&(c=Ld(c,p.top))}}if(h&&h.bottom>=n?(r=a,i=h):c&&c.top<=n&&(r=u,i=c),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Bd(r,f,n);if(o&&r.contentEditable!="false")return gh(r,f,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function Bd(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=yr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let h=a[u];if(h.top==h.bottom)continue;l||(l=e-h.left);let c=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&c<s){let f=e>=(h.left+h.right)/2,d=f;if((D.chrome||D.gecko)&&yr(t,o).getBoundingClientRect().left==h.right&&(d=!f),c<=0)return{node:t,offset:o+(d?1:0)};i=o+(d?1:0),s=c}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function ny(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:h,y:c}=e,f=c-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let x=t.viewState.heightOracle.textHeight/2,S=!1;a=t.elementAtHeight(f),a.type!=kt.Text;)for(;f=r>0?a.bottom+x:a.top-x,!(f>=0&&f<=u);){if(S)return n?null:0;S=!0,r=-r}c=o+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:Id(t,l,a,h,c);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Id(t,l,a,h,c);let m=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:m,k=v.elementFromPoint(h,c);k&&!t.contentDOM.contains(k)&&(k=null),k||(h=Math.max(l.left+1,Math.min(l.right-1,h)),k=v.elementFromPoint(h,c),k&&!t.contentDOM.contains(k)&&(k=null));let p,g=-1;if(k&&((i=t.docView.nearest(k))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let x=m.caretPositionFromPoint(h,c);x&&({offsetNode:p,offset:g}=x)}else if(m.caretRangeFromPoint){let x=m.caretRangeFromPoint(h,c);x&&({startContainer:p,startOffset:g}=x)}p&&(!t.contentDOM.contains(p)||D.safari&&lw(p,g,h)||D.chrome&&ow(p,g,h))&&(p=void 0),p&&(g=Math.min(Zt(p),g))}if(!p||!t.docView.dom.contains(p)){let x=pe.find(t.docView,d);if(!x)return f>a.top+a.height/2?a.to:a.from;({node:p,offset:g}=gh(x.dom,h,c))}let y=t.docView.nearest(p);if(!y)return null;if(y.isWidget&&((s=y.dom)===null||s===void 0?void 0:s.nodeType)==1){let x=y.dom.getBoundingClientRect();return e.y<x.top||e.y<=x.bottom&&e.x<=(x.left+x.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(p,g)+y.posAtStart}function Id(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+wx(l,s,t.state.tabSize)}function ry(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return yr(t,r-1,r).getBoundingClientRect().right>n}function lw(t,e,n){return ry(t,e,n)}function ow(t,e,n){if(e!=0)return ry(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():yr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function aw(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==kt.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function uw(t,e,n,r){let i=aw(t,e.head,e.assoc||-1),s=!r||i.type!=kt.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==ke.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return E.cursor(a,n?-1:1)}return E.cursor(n?i.to:i.from,n?-1:1)}function Fd(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Kx(i,s,l,o,n),h=j0;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;h=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(h))return o}else{if(!r)return u;a=r(h)}o=u}}function hw(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==Ne.Space&&(i=l),i==l}}function cw(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return E.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),h=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),o=(s<0?d.top:d.bottom)+h}let c=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let m=o+(f+d)*s,v=ny(t,{x:c,y:m},!1,s);if(m<a.top||m>a.bottom||(s<0?v<i:v>i)){let k=t.docView.coordsForChar(v),p=!k||m<k.top?-1:1;return E.cursor(v,p,void 0,l)}}}function Qi(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function iy(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=Qi(t,i.from,0);l!=i.from&&(s=E.cursor(l,-1))}else{let l=Qi(t,i.from,-1),o=Qi(t,i.to,1);(l!=i.from||o!=i.to)&&(s=E.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?E.create(n,e.mainIndex):e}function Ba(t,e,n){let r=Qi(t.state.facet(Bs).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:E.cursor(r,r<n.from?1:-1)}const Bi="";class fw{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(K.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Bi}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=Z.get(i),a=Z.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:fo(i))||fo(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=Z.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(dw(e,r.node,r.offset)?n:0))}}function dw(t,e,n){for(;;){if(!e||n<Zt(e))return!1;if(e==t)return!0;n=gr(e)+1,e=e.parentNode}}class _d{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class pw{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:yw(e),a=new fw(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=vw(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!sh(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!sh(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),h=e.viewport;if((D.ios||D.chrome)&&e.state.selection.main.empty&&a!=u&&(h.from>0||h.to<e.state.doc.length)){let c=Math.min(a,u),f=Math.max(a,u),d=h.from-c,m=h.to-f;(d==0||d==1||c==0)&&(m==0||m==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=E.single(u,a)}}}function sy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||D.android&&e.text.length<o-l)&&(a=i.to,u="end");let h=gw(t.state.doc.sliceString(l,o,Bi),e.text,a-l,u);h&&(D.chrome&&s==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==Bi+Bi&&h.toB--,n={from:l+h.from,to:l+h.toA,insert:U.of(e.text.slice(h.from,h.toB).split(Bi))})}else r&&(!t.hasFocus&&t.state.facet(sn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(D.mac||D.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:U.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:D.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:U.of([" "])}),n)return Fc(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=iy(t.state.facet(Bs).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function Fc(t,e,n,r=-1){if(D.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(D.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Gr(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Gr(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Gr(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=mw(t,e,n));return t.state.facet($0).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function mw(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,h=Qi(i.facet(Bs).map(c=>c(t)),u,a);e.from==h&&(l=h)}if(l>-1)r={changes:e,selection:E.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=t.state.sliceDoc(e.from,e.to),c,f=n&&ty(t,n.main.head);if(f){let v=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-v}}else c=t.state.doc.lineAt(s.head);let d=s.to-e.to,m=s.to-s.from;r=i.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:u||v.map(a)};let k=v.to-d,p=k-h.length;if(v.to-v.from!=m||t.state.sliceDoc(p,k)!=h||v.to>=c.from&&v.from<=c.to)return{range:v};let g=i.changes({from:p,to:k,insert:e.insert}),y=v.to-s.to;return{changes:g,range:u?E.range(Math.max(0,u.anchor+y),Math.max(0,u.head+y)):v.map(g)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function gw(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function yw(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new _d(n,r)),(i!=n||s!=r)&&e.push(new _d(i,s))),e}function vw(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?E.single(n+e,r+e):null}class kw{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,D.safari&&e.contentDOM.addEventListener("input",()=>null),D.gecko&&Bw(e.contentDOM.ownerDocument)}handleEvent(e){!Mw(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=xw(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&oy.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),D.android&&D.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return D.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=ly.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||ww.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Gr(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:D.safari&&!D.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function zd(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Yt(n.state,i)}}}function xw(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(zd(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(zd(r.value,a))}}for(let r in Bt)n(r).handlers.push(Bt[r]);for(let r in At)n(r).observers.push(At[r]);return e}const ly=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ww="dthko",oy=[16,17,18,20,91,92,224,225],ll=6;function ol(t){return Math.max(0,t)*.7+8}function Sw(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Cw{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Tx(e.contentDOM),this.atoms=e.state.facet(Bs).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(K.allowMultipleSelections)&&Aw(e,n),this.dragging=bw(e,n)&&hy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Sw(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=ey(this.view);e.clientX-a.left<=i+ll?n=-ol(i-e.clientX):e.clientX+a.right>=l-ll&&(n=ol(e.clientX-l)),e.clientY-a.top<=s+ll?r=-ol(s-e.clientY):e.clientY+a.bottom>=o-ll&&(r=ol(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=iy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Aw(t,e){let n=t.state.facet(H0);return n.length?n[0](e):D.mac?e.metaKey:e.ctrlKey}function Ew(t,e){let n=t.state.facet(V0);return n.length?n[0](e):D.mac?!e.altKey:!e.ctrlKey}function bw(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=ks(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function Mw(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=Z.get(n))&&r.ignoreEvent(e))return!1;return!0}const Bt=Object.create(null),At=Object.create(null),ay=D.ie&&D.ie_version<15||D.ios&&D.webkit_version<604;function Tw(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),uy(t,n.value)},50)}function Jo(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function uy(t,e){e=Jo(t.state,Rc,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(yh!=null&&n.selection.ranges.every(a=>a.empty)&&yh==s.toString()){let a=-1;r=n.changeByRange(u=>{let h=n.doc.lineAt(u.from);if(h.from==a)return{range:u};a=h.from;let c=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:h.from,insert:c},range:E.cursor(u.from+c.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:E.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}At.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Bt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);At.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};At.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Bt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(W0))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=Dw(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new Cw(t,e,n,r)),r&&t.observer.ignore(()=>{S0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function jd(t,e,n,r){if(r==1)return E.cursor(e,n);if(r==2)return rw(t.state,e,n);{let i=pe.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,E.range(l,o)}}let Hd=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Ow(t,e,n,r){let i=pe.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&Hd(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&Hd(n,r,o)?1:l&&l.bottom>=r?-1:1}function Vd(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Ow(t,n,e.clientX,e.clientY)}}const Nw=D.ie&&D.ie_version<=11;let Wd=null,Ud=0,$d=0;function hy(t){if(!Nw)return t.detail;let e=Wd,n=$d;return Wd=t,$d=Date.now(),Ud=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Ud+1)%3:1}function Dw(t,e){let n=Vd(t,e),r=hy(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=Vd(t,s),u,h=jd(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let c=jd(t,n.pos,n.bias,r),f=Math.min(c.from,h.from),d=Math.max(c.to,h.to);h=f<h.from?E.range(f,d):E.range(d,f)}return l?i.replaceRange(i.main.extend(h.from,h.to)):o&&r==1&&i.ranges.length>1&&(u=Pw(i,a.pos))?u:o?i.addRange(h):E.create([h])}}}function Pw(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return E.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Bt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=E.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Jo(t.state,Bc,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Bt.dragend=t=>(t.inputState.draggedContent=null,!1);function Kd(t,e,n,r){if(n=Jo(t.state,Rc,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&Ew(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Bt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&Kd(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return Kd(t,e,r,!0),!0}return!1};Bt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=ay?null:e.clipboardData;return n?(uy(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Tw(t),!1)};function Lw(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function Rw(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:Jo(t,Bc,e.join(t.lineBreak)),ranges:n,linewise:r}}let yh=null;Bt.copy=Bt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=Rw(t.state);if(!n&&!i)return!1;yh=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=ay?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Lw(t,n),!1)};const cy=pi.define();function fy(t,e){let n=[];for(let r of t.facet(K0)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:cy.of(!0)}):null}function dy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=fy(t.state,e);n?t.dispatch(n):t.update([])}},10)}At.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),dy(t)};At.blur=t=>{t.observer.clearSelectionRange(),dy(t)};At.compositionstart=At.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};At.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,D.chrome&&D.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};At.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Bt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return Fc(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(D.chrome&&D.android&&(i=ly.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return D.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),D.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>At.compositionend(t,e),20),!1};const qd=new Set;function Bw(t){qd.has(t)||(qd.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Gd=["pre-wrap","normal","pre-line","break-spaces"];let ai=!1;function Yd(){ai=!1}class Iw{constructor(e){this.lineWrapping=e,this.doc=U.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Gd.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=Gd.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let h=l[u];h<0?u++:this.heightSamples[Math.floor(h*10)]=!0}}return a}}class Fw{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Gt{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?kt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Wn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Gt(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var ie=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ie||(ie={}));const Fl=.001;class $e{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Fl&&(ai=!0),this.height=e)}replace(e,n,r){return $e.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:h,toB:c}=i[o],f=s.lineAt(a,ie.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,ie.ByPosNoHeight,r,0,0);for(c+=d.to-u,u=d.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,h=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,ie.ByPosNoHeight,r,0,0));h+=f.from-a,a=f.from;let m=_c.build(r.setDoc(l),e,h,c);s=go(s,s.replace(a,u,m))}return s.updateHeight(r,0)}static empty(){return new rt(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new _w($e.of(e.slice(0,n)),l,$e.of(e.slice(r)))}}function go(t,e){return t==e?t:(t.constructor!=e.constructor&&(ai=!0),e)}$e.prototype.size=1;class py extends $e{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Gt(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class rt extends py{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Gt(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof rt||i instanceof Ee&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Ee?i=new rt(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):$e.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ee extends $e{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),h=n.doc.lineAt(u),c=o+h.length*a,f=Math.max(r,e-c/2);return new Gt(h.from,h.length,f,c,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:h,length:c}=n.doc.line(s+u);return new Gt(h,c,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==ie.ByHeight)return this.blockAt(e,r,i,s);if(n==ie.ByPosNoHeight){let{from:d,to:m}=r.doc.lineAt(e);return new Gt(d,m-d,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),h=o+u.length*a,c=u.number-l,f=i+o*c+a*(u.from-s-c);return new Gt(u.from,u.length,Math.max(i,Math.min(f,i+this.height-h)),h,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let h=e,c=i;h<=n;){let f=r.doc.lineAt(h);if(h==e){let m=f.number-o;c+=a*m+u*(e-s-m)}let d=a+u*f.length;l(new Gt(f.from,f.length,c,d,0)),c+=d,h=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Ee?r[r.length-1]=new Ee(s.length+i):r.push(null,new Ee(i-1))}if(e>0){let s=r[0];s instanceof Ee?r[0]=new Ee(e+s.length):r.unshift(new Ee(e-1),null)}return $e.of(r)}decomposeLeft(e,n){n.push(new Ee(e-1),null)}decomposeRight(e,n){n.push(null,new Ee(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Ee(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let h=e.doc.lineAt(o).length;l.length&&l.push(null);let c=i.heights[i.index++];a==-1?a=c:Math.abs(c-a)>=Fl&&(a=-2);let f=new rt(h,c);f.outdated=!1,l.push(f),o+=h+1}o<=s&&l.push(null,new Ee(s-o).updateHeight(e,o));let u=$e.of(l);return(a<0||Math.abs(u.height-this.height)>=Fl||Math.abs(a-this.heightMetrics(e,n).perLine)>=Fl)&&(ai=!0),go(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class _w extends $e{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==ie.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let h=n==ie.ByPosNoHeight?ie.ByPosNoHeight:ie.ByPos;return a?u.join(this.right.lineAt(o,h,r,l,o)):this.left.lineAt(o,h,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,ie.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&Qd(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),Qd(s,o)}return $e.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?$e.of(this.break?[e,null,n]:[e,n]):(this.left=go(this.left,e),this.right=go(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Qd(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Ee&&(r=t[e+1])instanceof Ee&&t.splice(e-1,3,new Ee(n.length+1+r.length))}const zw=5;class _c{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof rt?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new rt(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new py(l,i,r)):(l||s||i>=zw)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new rt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Ee(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof rt)return e;let n=new rt(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof rt)&&!this.isCovered?this.nodes.push(new rt(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof rt&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new _c(r,e);return Y.spans(n,r,i,s,0),s.finish(r)}}function jw(t,e,n){let r=new Hw;return Y.compare(t,e,n,r,0),r.changes}class Hw{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&Il(e,n,this.changes,5)}}function Vw(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let h=u,c=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&c.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=c.position=="absolute"||c.position=="fixed"?h.offsetParent:h.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function Ww(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function Uw(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Ia{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return j.replace({widget:new $w(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class $w extends Ps{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Jd{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Xd,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ke.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Ic).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new Iw(n),this.stateDeco=e.facet(ws).filter(r=>typeof r!="function"),this.heightMap=$e.empty().applyChanges(this.stateDeco,U.empty,this.heightOracle.setDoc(e.doc),[new xt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=j.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new al(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Xd:new zc(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ii(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(ws).filter(h=>typeof h!="function");let i=e.changedRanges,s=xt.extendWithRanges(i,jw(r,this.stateDeco,e?e.changes:we.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Yd(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||ai)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Gx)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?ke.RTL:ke.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,h=0;if(o.width&&o.height){let{scaleX:x,scaleY:S}=w0(n,o);(x>.005&&Math.abs(this.scaleX-x)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=x,this.scaleY=S,u|=16,l=a=!0)}let c=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=f)&&(this.paddingTop=c,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=A0(e.scrollDOM);let m=(this.printing?Uw:Vw)(n,this.paddingTop),v=m.top-this.pixelViewport.top,k=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!Ww(e.dom))return 0;let g=o.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let x=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(x)&&(l=!0),l||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:A,textHeight:C}=e.docView.measureTextSize();l=S>0&&i.refresh(s,S,A,C,Math.max(5,g/A),x),l&&(e.docView.minWidth=0,u|=16)}v>0&&k>0?h=Math.max(v,k):v<0&&k<0&&(h=Math.min(v,k)),Yd();for(let S of this.viewports){let A=S.from==this.viewport.from?x:e.docView.measureVisibleLineHeights(S);this.heightMap=(l?$e.empty().applyChanges(this.stateDeco,U.empty,this.heightOracle,[new xt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new Fw(S.from,A))}ai&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),u|=this.updateForViewport()),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new al(i.lineAt(l-r*1e3,ie.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,ie.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=i.lineAt(u,ie.ByPos,s,0,0),f;n.y=="center"?f=(c.top+c.bottom)/2-h/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=c.top:f=c.bottom-h,a=new al(i.lineAt(f-1e3/2,ie.ByHeight,s,0,0).from,i.lineAt(f+h+1e3/2,ie.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new al(this.heightMap.lineAt(r,ie.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ie.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ie.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,ie.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Ia(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=ke.LTR&&!r)return[];let o=[],a=(h,c,f,d)=>{if(c-h<s)return;let m=this.state.selection.main,v=[m.from];m.empty||v.push(m.to);for(let p of v)if(p>h&&p<c){a(h,p-10,f,d),a(p+10,c,f,d);return}let k=qw(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-h)<s&&Math.abs(p.to-c)<s&&!v.some(g=>p.from<g&&p.to>g));if(!k){if(c<f.to&&n&&r&&n.visibleRanges.some(y=>y.from<=c&&y.to>=c)){let y=n.moveToLineBoundary(E.cursor(c),!1,!0).head;y>h&&(c=y)}let p=this.gapSize(f,h,c,d),g=r||p<2e6?p:2e6;k=new Ia(h,c,p,g)}o.push(k)},u=h=>{if(h.length<l||h.type!=kt.Text)return;let c=Kw(h.from,h.to,this.stateDeco);if(c.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,m;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,k,p;if(f!=null){let g=hl(c,f),y=((this.visibleBottom-this.visibleTop)/2+v)/h.height;k=g-y,p=g+y}else k=(this.visibleTop-h.top-v)/h.height,p=(this.visibleBottom-h.top+v)/h.height;d=ul(c,k),m=ul(c,p)}else{let v=c.total*this.heightOracle.charWidth,k=i*this.heightOracle.charWidth,p=0;if(v>2e6)for(let A of e)A.from>=h.from&&A.from<h.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=A.size-A.displaySize);let g=this.pixelViewport.left+p,y=this.pixelViewport.right+p,x,S;if(f!=null){let A=hl(c,f),C=((y-g)/2+k)/v;x=A-C,S=A+C}else x=(g-k)/v,S=(y+k)/v;d=ul(c,x),m=ul(c,S)}d>h.from&&a(h.from,d,h,c),m<h.to&&a(m,h.to,h,c)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(u):u(h);return o}gapSize(e,n,r,i){let s=hl(i,r)-hl(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Ia.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=j.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];Y.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Ii(this.heightMap.lineAt(e,ie.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Ii(this.heightMap.lineAt(this.scaler.fromDOM(e),ie.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Ii(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class al{constructor(e,n){this.from=e,this.to=n}}function Kw(t,e,n){let r=[],i=t,s=0;return Y.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function ul({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function hl(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function qw(t,e){for(let n of t)if(e(n))return n}const Xd={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class zc{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,ie.ByPos,e,0,0).top,h=n.lineAt(a,ie.ByPos,e,0,0).bottom;return i+=h-u,{from:o,to:a,top:u,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof zc?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Ii(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Gt(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Ii(i,e)):t._content)}const cl=R.define({combine:t=>t.join(" ")}),vh=R.define({combine:t=>t.indexOf(!0)>-1}),kh=Hn.newName(),my=Hn.newName(),gy=Hn.newName(),yy={"&light":"."+my,"&dark":"."+gy};function xh(t,e,n){return new Hn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const Gw=xh("."+kh,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},yy),Yw={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Fa=D.ie&&D.ie_version<=11;class Qw{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Ox,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(D.ie&&D.ie_version<=11||D.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&D.android&&e.constructor.EDIT_CONTEXT!==!1&&!(D.chrome&&D.chrome_version<126)&&(this.editContext=new Xw(e),e.state.facet(sn)&&(e.contentDOM.editContext=this.editContext.editContext)),Fa&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(sn)?r.root.activeElement!=this.dom:!Bl(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(D.ie&&D.ie_version<=11||D.android&&D.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Gi(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=ks(e.root);if(!n)return!1;let r=D.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Jw(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=Bl(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Dx(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Yw),Fa&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Fa&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Gr(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Bl(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new pw(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=sy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=Zd(n,e.previousSibling||e.target.previousSibling,-1),i=Zd(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(sn)!=e.state.facet(sn)&&(e.view.contentDOM.editContext=e.state.facet(sn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Zd(t,e,n){for(;e;){let r=Z.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function ep(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return Gi(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Jw(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return ep(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?ep(t,n):null}class Xw{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:U.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let h=E.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}if((D.mac||D.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:U.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let h=this.to-this.from+(u.to-u.from+u.insert.length);Fc(e,u,E.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let h=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(j.mark({attributes:{style:h}}).range(a,u))}}}e.dispatch({effects:Y0.of(j.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=ks(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let h=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=h,this.to+=h;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=h}n+=h}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class B{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Nx(e.parent)||document,this.viewState=new Jd(e.state||K.create(e)),e.scrollTo&&e.scrollTo.is(sl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(_r).map(i=>new La(i));for(let i of this.plugins)i.update(this);this.observer=new Qw(this),this.inputState=new kw(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Pd(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof _e?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(cy))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=fy(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,h=null;if(u?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(h=null)):this.observer.clear(),s.facet(K.phrases)!=this.state.facet(K.phrases))return this.setState(s);i=mo.create(this,s,e),i.flags|=o;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(c&&(c=c.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;c=new Yr(d.empty?d:E.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(sl)&&(c=d.value.clip(this.state))}this.viewState.update(i,c),this.bidiCache=yo.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Ri)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(cl)!=i.state.facet(cl)&&(this.viewState.mustMeasureContent=!0),(n||r||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(mh))try{f(i)}catch(d){Yt(this.state,d,"update listener")}(a||h)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),h&&!sy(this,h)&&u.force&&Gr(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Jd(e),this.plugins=e.facet(_r).map(r=>new La(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new Pd(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(_r),r=e.state.facet(_r);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new La(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Yt(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(A0(r))s=-1,l=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,l=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let h=u.map(d=>{try{return d.read(this)}catch(m){return Yt(this.state,m),tp}}),c=mo.create(this,this.state,[]),f=!1;c.flags|=a,n?n.flags|=a:n=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),f=this.docView.update(c),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(h[d]!=tp)try{let m=u[d];m.write&&m.write(h[d],this)}catch(m){Yt(this.state,m)}if(f&&this.docView.updateSelection(!0),!c.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(mh))o(n)}get themeClasses(){return kh+" "+(this.state.facet(vh)?gy:my)+" "+this.state.facet(cl)}updateAttrs(){let e=np(this,Q0,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(sn)?"true":"false",class:"cm-content",style:`${D.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),np(this,Ic,n);let r=this.observer.ignore(()=>{let i=hh(this.contentDOM,this.contentAttrs,n),s=hh(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(B.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ri);let e=this.state.facet(B.cspNonce);Hn.mount(this.root,this.styleModules.concat(Gw).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Ba(this,e,Fd(this,e,n,r))}moveByGroup(e,n){return Ba(this,e,Fd(this,e,n,r=>hw(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return E.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return uw(this,e,n,r)}moveVertically(e,n,r){return Ba(this,e,cw(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),ny(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[Tn.find(s,e-i.from,-1,n)];return Yo(r,l.dir==ke.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(q0)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Zw)return z0(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||_0(s.isolates,r=Dd(this,e))))return s.order;r||(r=Dd(this,e));let i=$x(e.text,n,r);return this.bidiCache.push(new yo(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||D.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{S0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return sl.of(new Yr(typeof e=="number"?E.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return sl.of(new Yr(E.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return at.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return at.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Hn.newName(),i=[cl.of(r),Ri.of(xh(`.${r}`,e))];return n&&n.dark&&i.push(vh.of(!0)),i}static baseTheme(e){return $o.lowest(Ri.of(xh("."+kh,e,yy)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&Z.get(r)||Z.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}B.styleModule=Ri;B.inputHandler=$0;B.clipboardInputFilter=Rc;B.clipboardOutputFilter=Bc;B.scrollHandler=G0;B.focusChangeEffect=K0;B.perLineTextDirection=q0;B.exceptionSink=U0;B.updateListener=mh;B.editable=sn;B.mouseSelectionStyle=W0;B.dragMovesSelection=V0;B.clickAddsSelectionRange=H0;B.decorations=ws;B.outerDecorations=J0;B.atomicRanges=Bs;B.bidiIsolatedRanges=X0;B.scrollMargins=Z0;B.darkTheme=vh;B.cspNonce=R.define({combine:t=>t.length?t[0]:""});B.contentAttributes=Ic;B.editorAttributes=Q0;B.lineWrapping=B.contentAttributes.of({class:"cm-lineWrapping"});B.announce=ne.define();const Zw=4096,tp={};class yo{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:ke.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new yo(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function np(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&uh(l,n)}return n}const eS=D.mac?"mac":D.windows?"win":D.linux?"linux":"key";function tS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function fl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const nS=$o.default(B.domEventHandlers({keydown(t,e){return xy(ky(e.state),t,e,"editor")}})),vy=R.define({enables:nS}),rp=new WeakMap;function ky(t){let e=t.facet(vy),n=rp.get(e);return n||rp.set(e,n=sS(e.reduce((r,i)=>r.concat(i),[]))),n}function rS(t,e,n){return xy(ky(t.state),e,t,n)}let An=null;const iS=4e3;function sS(t,e=eS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,h)=>{var c,f;let d=n[l]||(n[l]=Object.create(null)),m=o.split(/ (?!$)/).map(p=>tS(p,e));for(let p=1;p<m.length;p++){let g=m.slice(0,p).join(" ");i(g,!0),d[g]||(d[g]={preventDefault:!0,stopPropagation:!1,run:[y=>{let x=An={view:y,prefix:g,scope:l};return setTimeout(()=>{An==x&&(An=null)},iS),!0}]})}let v=m.join(" ");i(v,!1);let k=d[v]||(d[v]={preventDefault:!1,stopPropagation:!1,run:((f=(c=d._any)===null||c===void 0?void 0:c.run)===null||f===void 0?void 0:f.slice())||[]});a&&k.run.push(a),u&&(k.preventDefault=!0),h&&(k.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let h=n[u]||(n[u]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:c}=l;for(let f in h)h[f].run.push(d=>c(d,wh))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let wh=null;function xy(t,e,n,r){wh=e;let i=Ex(e),s=s0(i,0),l=l0(s)==i.length&&i!=" ",o="",a=!1,u=!1,h=!1;An&&An.view==n&&An.scope==r&&(o=An.prefix+" ",oy.indexOf(e.keyCode)<0&&(u=!0,An=null));let c=new Set,f=k=>{if(k){for(let p of k.run)if(!c.has(p)&&(c.add(p),p(n)))return k.stopPropagation&&(h=!0),!0;k.preventDefault&&(k.stopPropagation&&(h=!0),u=!0)}return!1},d=t[r],m,v;return d&&(f(d[o+fl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(D.windows&&e.ctrlKey&&e.altKey)&&!(D.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(m=Vn[e.keyCode])&&m!=i?(f(d[o+fl(m,e,!0)])||e.shiftKey&&(v=vs[e.keyCode])!=i&&v!=m&&f(d[o+fl(v,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(d[o+fl(i,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&h&&e.stopPropagation(),wh=null,a}function lS(){return aS}const oS=j.line({class:"cm-activeLine"}),aS=at.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(oS.range(i.from)),e=i.from)}return j.set(n)}},{decorations:t=>t.decorations}),ip=R.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function vo(t,e){let n=t.plugin(wy),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const wy=at.fromClass(class{constructor(t){this.input=t.state.facet(ko),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(ip);this.top=new dl(t,!0,e.topContainer),this.bottom=new dl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(ip);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new dl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new dl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(ko);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),h;u<0?(h=a(t.view),o.push(h)):(h=this.panels[u],h.update&&h.update(t)),i.push(h),(h.top?s:l).push(h)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>B.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class dl{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=sp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=sp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function sp(t){let e=t.nextSibling;return t.remove(),e}const ko=R.define({enables:wy});class Un extends si{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Un.prototype.elementClass="";Un.prototype.toDOM=void 0;Un.prototype.mapMode=it.TrackBefore;Un.prototype.startSide=Un.prototype.endSide=-1;Un.prototype.point=!0;const _a=R.define(),uS=R.define(),hS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Y.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Ji=R.define();function cS(t){return[Sy(),Ji.of({...hS,...t})]}const lp=R.define({combine:t=>t.some(e=>e)});function Sy(t){return[fS]}const fS=at.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Ji).map(e=>new ap(t,e)),this.fixed=!t.state.facet(lp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(lp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=Y.iter(this.view.state.facet(_a),this.view.viewport.from),r=[],i=this.gutters.map(s=>new dS(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==kt.Text&&l){Sh(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==kt.Text){Sh(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Ji),n=t.state.facet(Ji),r=t.docChanged||t.heightChanged||t.viewportChanged||!Y.eq(t.startState.facet(_a),t.state.facet(_a),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new ap(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>B.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==ke.LTR?{left:r,right:i}:{right:r,left:i}})});function op(t){return Array.isArray(t)?t:[t]}function Sh(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class dS{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Y.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new Cy(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Sh(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(uS)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class ap{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=op(n.markers(e)),n.initialSpacer&&(this.spacer=new Cy(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=op(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Y.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Cy{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),pS(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let h=a.elementClass;h&&(r+=" "+h);for(let c=l;c<this.markers.length;c++)if(this.markers[c].compare(a)){o=c,u=!0;break}}else o=this.markers.length;for(;l<o;){let h=this.markers[l++];if(h.toDOM){h.destroy(i);let c=i.nextSibling;i.remove(),i=c}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function pS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const mS=R.define(),gS=R.define(),zr=R.define({combine(t){return qo(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class za extends Un{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function ja(t,e){return t.state.facet(zr).formatNumber(e,t.state)}const yS=Ji.compute([zr],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(mS)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new za(ja(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(gS)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(zr)!=e.state.facet(zr),initialSpacer(e){return new za(ja(e,up(e.state.doc.lines)))},updateSpacer(e,n){let r=ja(n.view,up(n.view.state.doc.lines));return r==e.number?e:new za(r)},domEventHandlers:t.facet(zr).domEventHandlers,side:"before"}));function vS(t={}){return[zr.of(t),Sy(),yS]}function up(t){let e=9;for(;e<t;)e=e*10+9;return e}const kS=1024;let xS=0;class Ha{constructor(e,n){this.from=e,this.to=n}}class W{constructor(e={}){this.id=xS++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=et.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}W.closedBy=new W({deserialize:t=>t.split(" ")});W.openedBy=new W({deserialize:t=>t.split(" ")});W.group=new W({deserialize:t=>t.split(" ")});W.isolate=new W({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});W.contextHash=new W({perNode:!0});W.lookAhead=new W({perNode:!0});W.mounted=new W({perNode:!0});class xo{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[W.mounted.id]}}const wS=Object.create(null);class et{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):wS,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new et(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(W.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(W.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}et.none=new et("",Object.create(null),0,8);class jc{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new et(r.name,i,r.id,r.flags):r)}return new jc(n)}}const pl=new WeakMap,hp=new WeakMap;var Me;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Me||(Me={}));class ae{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=xo.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Ah(this.topNode,e)}cursorAt(e,n=0,r=0){let i=pl.get(this)||this.topNode,s=new Ah(i);return s.moveTo(e,n),pl.set(this,s._tree),s}get topNode(){return new wt(this,0,0,null)}resolve(e,n=0){let r=Ss(pl.get(this)||this.topNode,e,n,!1);return pl.set(this,r),r}resolveInner(e,n=0){let r=Ss(hp.get(this)||this.topNode,e,n,!0);return hp.set(this,r),r}resolveStack(e,n=0){return AS(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&Me.IncludeAnonymous)>0;for(let a=this.cursor(l|Me.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Wc(et.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new ae(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new ae(et.none,n,r,i)))}static build(e){return ES(e)}}ae.empty=new ae(et.none,[],[],0);class Hc{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Hc(this.buffer,this.index)}}class $n{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return et.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(Ay(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new $n(s,l,this.set)}}function Ay(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ss(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof wt&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:Me.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof wt&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class Ey{cursor(e=0){return new Ah(this,e)}getChild(e,n=null,r=null){let i=cp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return cp(this,e,n,r)}resolve(e,n=0){return Ss(this,e,n,!1)}resolveInner(e,n=0){return Ss(this,e,n,!0)}matchContext(e){return Ch(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class wt extends Ey{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let h=o[e],c=a[e]+l.from;if(Ay(i,r,c,c+h.length)){if(h instanceof $n){if(s&Me.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,n,r-c,i);if(f>-1)return new On(new SS(l,h,e,c),null,f)}else if(s&Me.IncludeAnonymous||!h.type.isAnonymous||Vc(h)){let f;if(!(s&Me.IgnoreMounts)&&(f=xo.get(h))&&!f.overlay)return new wt(f.tree,c,e,l);let d=new wt(h,c,e,l);return s&Me.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?h.children.length-1:0,n,r,i)}}}if(s&Me.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Me.IgnoreOverlays)&&(i=xo.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new wt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function cp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Ch(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class SS{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class On extends Ey{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new On(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Me.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new On(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new On(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new On(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new ae(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function by(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof wt&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new CS(i,n)}class CS{constructor(e,n){this.heads=e,this.node=n}get next(){return by(this.heads)}}function AS(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof wt?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=xo.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new wt(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Ss(o,e,n,!1))}}return i?by(i):r}class Ah{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof wt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof wt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Me.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Me.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Me.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&Me.IncludeAnonymous||o instanceof $n||!o.type.isAnonymous||Vc(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new On(this.buffer,n,this.stack[i]);return this.bufferNode=new On(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ch(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Ch(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function Vc(t){return t.children.some(e=>e instanceof $n||!e.type.isAnonymous||Vc(e))}function ES(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=kS,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new Hc(n,n.length):n,a=r.types,u=0,h=0;function c(S,A,C,O,_,L){let{id:z,start:I,end:Q,size:ee}=o,ge=h,ft=u;for(;ee<0;)if(o.next(),ee==-1){let q=s[z];C.push(q),O.push(I-S);return}else if(ee==-3){u=z;return}else if(ee==-4){h=z;return}else throw new RangeError(`Unrecognized record size: ${ee}`);let en=a[z],N,F,H=I-S;if(Q-I<=i&&(F=k(o.pos-A,_))){let q=new Uint16Array(F.size-F.skip),G=o.pos-F.size,He=q.length;for(;o.pos>G;)He=p(F.start,q,He);N=new $n(q,Q-F.start,r),H=F.start-S}else{let q=o.pos-ee;o.next();let G=[],He=[],Ve=z>=l?z:-1,zt=0,dt=Q;for(;o.pos>q;)Ve>=0&&o.id==Ve&&o.size>=0?(o.end<=dt-i&&(m(G,He,I,zt,o.end,dt,Ve,ge,ft),zt=G.length,dt=o.end),o.next()):L>2500?f(I,q,G,He):c(I,q,G,He,Ve,L+1);if(Ve>=0&&zt>0&&zt<G.length&&m(G,He,I,zt,I,dt,Ve,ge,ft),G.reverse(),He.reverse(),Ve>-1&&zt>0){let Jn=d(en,ft);N=Wc(en,G,He,0,G.length,0,Q-I,Jn,Jn)}else N=v(en,G,He,Q-I,ge-Q,ft)}C.push(N),O.push(H)}function f(S,A,C,O){let _=[],L=0,z=-1;for(;o.pos>A;){let{id:I,start:Q,end:ee,size:ge}=o;if(ge>4)o.next();else{if(z>-1&&Q<z)break;z<0&&(z=ee-i),_.push(I,Q,ee),L++,o.next()}}if(L){let I=new Uint16Array(L*4),Q=_[_.length-2];for(let ee=_.length-3,ge=0;ee>=0;ee-=3)I[ge++]=_[ee],I[ge++]=_[ee+1]-Q,I[ge++]=_[ee+2]-Q,I[ge++]=ge;C.push(new $n(I,_[2]-Q,r)),O.push(Q-S)}}function d(S,A){return(C,O,_)=>{let L=0,z=C.length-1,I,Q;if(z>=0&&(I=C[z])instanceof ae){if(!z&&I.type==S&&I.length==_)return I;(Q=I.prop(W.lookAhead))&&(L=O[z]+I.length+Q)}return v(S,C,O,_,L,A)}}function m(S,A,C,O,_,L,z,I,Q){let ee=[],ge=[];for(;S.length>O;)ee.push(S.pop()),ge.push(A.pop()+C-_);S.push(v(r.types[z],ee,ge,L-_,I-L,Q)),A.push(_-C)}function v(S,A,C,O,_,L,z){if(L){let I=[W.contextHash,L];z=z?[I].concat(z):[I]}if(_>25){let I=[W.lookAhead,_];z=z?[I].concat(z):[I]}return new ae(S,A,C,O,z)}function k(S,A){let C=o.fork(),O=0,_=0,L=0,z=C.end-i,I={size:0,start:0,skip:0};e:for(let Q=C.pos-S;C.pos>Q;){let ee=C.size;if(C.id==A&&ee>=0){I.size=O,I.start=_,I.skip=L,L+=4,O+=4,C.next();continue}let ge=C.pos-ee;if(ee<0||ge<Q||C.start<z)break;let ft=C.id>=l?4:0,en=C.start;for(C.next();C.pos>ge;){if(C.size<0)if(C.size==-3)ft+=4;else break e;else C.id>=l&&(ft+=4);C.next()}_=en,O+=ee,L+=ft}return(A<0||O==S)&&(I.size=O,I.start=_,I.skip=L),I.size>4?I:void 0}function p(S,A,C){let{id:O,start:_,end:L,size:z}=o;if(o.next(),z>=0&&O<l){let I=C;if(z>4){let Q=o.pos-(z-4);for(;o.pos>Q;)C=p(S,A,C)}A[--C]=I,A[--C]=L-S,A[--C]=_-S,A[--C]=O}else z==-3?u=O:z==-4&&(h=O);return C}let g=[],y=[];for(;o.pos>0;)c(t.start||0,t.bufferStart||0,g,y,-1,0);let x=(e=t.length)!==null&&e!==void 0?e:g.length?y[0]+g[0].length:0;return new ae(a[t.topID],g.reverse(),y.reverse(),x)}const fp=new WeakMap;function _l(t,e){if(!t.isAnonymous||e instanceof $n||e.type!=t)return 1;let n=fp.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof ae)){n=1;break}n+=_l(t,r)}fp.set(e,n)}return n}function Wc(t,e,n,r,i,s,l,o,a){let u=0;for(let m=r;m<i;m++)u+=_l(t,e[m]);let h=Math.ceil(u*1.5/8),c=[],f=[];function d(m,v,k,p,g){for(let y=k;y<p;){let x=y,S=v[y],A=_l(t,m[y]);for(y++;y<p;y++){let C=_l(t,m[y]);if(A+C>=h)break;A+=C}if(y==x+1){if(A>h){let C=m[x];d(C.children,C.positions,0,C.children.length,v[x]+g);continue}c.push(m[x])}else{let C=v[y-1]+m[y-1].length-S;c.push(Wc(t,m,v,x,y,S,C,null,a))}f.push(S+g-s)}}return d(e,n,r,i,0),(o||a)(c,f,l)}class ur{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new ur(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let h=o<n.length?n[o]:null,c=h?h.fromA:1e9;if(c-a>=r)for(;l&&l.from<c;){let f=l;if(a>=f.from||c<=f.to||u){let d=Math.max(f.from,a)-u,m=Math.min(f.to,c)-u;f=d>=m?null:new ur(d,m,f.tree,f.offset+u,o>0,!!h)}if(f&&i.push(f),l.to>c)break;l=s<e.length?e[s++]:null}if(!h)break;a=h.toA,u=h.toA-h.toB}return i}}class My{startParse(e,n,r){return typeof e=="string"&&(e=new bS(e)),r=r?r.length?r.map(i=>new Ha(i.from,i.to)):[new Ha(0,0)]:[new Ha(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class bS{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new W({perNode:!0});let MS=0;class gt{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=MS++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof gt&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new gt(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new wo(e);return r=>r.modified.indexOf(n)>-1?r:wo.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let TS=0;class wo{constructor(e){this.name=e,this.instances=[],this.id=TS++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&OS(n,o.modified));if(r)return r;let i=[],s=new gt(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=NS(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(wo.get(o,a));return s}}function OS(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function NS(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function DS(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let c=0;;){if(o=="..."&&c>0&&c+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),c+=f[0].length,c==i.length)break;let d=i[c++];if(c==i.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);o=i.slice(c)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let h=new So(r,l,a>0?s.slice(0,a):null);e[u]=h.sort(e[u])}}return Ty.add(e)}const Ty=new W;class So{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}So.empty=new So([],2,null);function Oy(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function PS(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function LS(t,e,n,r=0,i=t.length){let s=new RS(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class RS{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(l)));let u=i,h=BS(e)||So.empty,c=PS(s,h.tags);if(c&&(u&&(u+=" "),u+=c,h.mode==1&&(i+=(i?" ":"")+c)),this.startSpan(Math.max(n,o),u),h.opaque)return;let f=e.tree&&e.tree.prop(W.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+o,1),m=this.highlighters.filter(k=>!k.scope||k.scope(f.tree.type)),v=e.firstChild();for(let k=0,p=o;;k++){let g=k<f.overlay.length?f.overlay[k]:null,y=g?g.from+o:a,x=Math.max(n,p),S=Math.min(r,y);if(x<S&&v)for(;e.from<S&&(this.highlightRange(e,x,S,i,s),this.startSpan(Math.min(S,e.to),u),!(e.to>=y||!e.nextSibling())););if(!g||y>r)break;p=g.to+o,p>n&&(this.highlightRange(d.cursor(),Math.max(n,g.from+o),Math.min(r,p),"",m),this.startSpan(Math.min(r,p),u))}v&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function BS(t){let e=t.type.prop(Ty);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const T=gt.define,ml=T(),xn=T(),dp=T(xn),pp=T(xn),wn=T(),gl=T(wn),Va=T(wn),Ut=T(),Xn=T(Ut),Vt=T(),Wt=T(),Eh=T(),Mi=T(Eh),yl=T(),M={comment:ml,lineComment:T(ml),blockComment:T(ml),docComment:T(ml),name:xn,variableName:T(xn),typeName:dp,tagName:T(dp),propertyName:pp,attributeName:T(pp),className:T(xn),labelName:T(xn),namespace:T(xn),macroName:T(xn),literal:wn,string:gl,docString:T(gl),character:T(gl),attributeValue:T(gl),number:Va,integer:T(Va),float:T(Va),bool:T(wn),regexp:T(wn),escape:T(wn),color:T(wn),url:T(wn),keyword:Vt,self:T(Vt),null:T(Vt),atom:T(Vt),unit:T(Vt),modifier:T(Vt),operatorKeyword:T(Vt),controlKeyword:T(Vt),definitionKeyword:T(Vt),moduleKeyword:T(Vt),operator:Wt,derefOperator:T(Wt),arithmeticOperator:T(Wt),logicOperator:T(Wt),bitwiseOperator:T(Wt),compareOperator:T(Wt),updateOperator:T(Wt),definitionOperator:T(Wt),typeOperator:T(Wt),controlOperator:T(Wt),punctuation:Eh,separator:T(Eh),bracket:Mi,angleBracket:T(Mi),squareBracket:T(Mi),paren:T(Mi),brace:T(Mi),content:Ut,heading:Xn,heading1:T(Xn),heading2:T(Xn),heading3:T(Xn),heading4:T(Xn),heading5:T(Xn),heading6:T(Xn),contentSeparator:T(Ut),list:T(Ut),quote:T(Ut),emphasis:T(Ut),strong:T(Ut),link:T(Ut),monospace:T(Ut),strikethrough:T(Ut),inserted:T(),deleted:T(),changed:T(),invalid:T(),meta:yl,documentMeta:T(yl),annotation:T(yl),processingInstruction:T(yl),definition:gt.defineModifier("definition"),constant:gt.defineModifier("constant"),function:gt.defineModifier("function"),standard:gt.defineModifier("standard"),local:gt.defineModifier("local"),special:gt.defineModifier("special")};for(let t in M){let e=M[t];e instanceof gt&&(e.name=t)}Oy([{tag:M.link,class:"tok-link"},{tag:M.heading,class:"tok-heading"},{tag:M.emphasis,class:"tok-emphasis"},{tag:M.strong,class:"tok-strong"},{tag:M.keyword,class:"tok-keyword"},{tag:M.atom,class:"tok-atom"},{tag:M.bool,class:"tok-bool"},{tag:M.url,class:"tok-url"},{tag:M.labelName,class:"tok-labelName"},{tag:M.inserted,class:"tok-inserted"},{tag:M.deleted,class:"tok-deleted"},{tag:M.literal,class:"tok-literal"},{tag:M.string,class:"tok-string"},{tag:M.number,class:"tok-number"},{tag:[M.regexp,M.escape,M.special(M.string)],class:"tok-string2"},{tag:M.variableName,class:"tok-variableName"},{tag:M.local(M.variableName),class:"tok-variableName tok-local"},{tag:M.definition(M.variableName),class:"tok-variableName tok-definition"},{tag:M.special(M.variableName),class:"tok-variableName2"},{tag:M.definition(M.propertyName),class:"tok-propertyName tok-definition"},{tag:M.typeName,class:"tok-typeName"},{tag:M.namespace,class:"tok-namespace"},{tag:M.className,class:"tok-className"},{tag:M.macroName,class:"tok-macroName"},{tag:M.propertyName,class:"tok-propertyName"},{tag:M.operator,class:"tok-operator"},{tag:M.comment,class:"tok-comment"},{tag:M.meta,class:"tok-meta"},{tag:M.invalid,class:"tok-invalid"},{tag:M.punctuation,class:"tok-punctuation"}]);var Wa;const jr=new W;function IS(t){return R.define({combine:t?e=>e.concat(t):void 0})}const FS=new W;class Nt{constructor(e,n,r=[],i=""){this.data=e,this.name=i,K.prototype.hasOwnProperty("tree")||Object.defineProperty(K.prototype,"tree",{get(){return ut(this)}}),this.parser=n,this.extension=[Kn.of(this),K.languageData.of((s,l,o)=>{let a=mp(s,l,o),u=a.type.prop(jr);if(!u)return[];let h=s.facet(u),c=a.type.prop(FS);if(c){let f=a.resolve(l-a.from,o);for(let d of c)if(d.test(f,s)){let m=s.facet(d.facet);return d.type=="replace"?m:m.concat(h)}}return h})].concat(r)}isActiveAt(e,n,r=-1){return mp(e,n,r).type.prop(jr)==this.data}findRegions(e){let n=e.facet(Kn);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(jr)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(W.mounted);if(o){if(o.tree.prop(jr)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof ae&&i(u,s.positions[a]+l)}};return i(ut(e),0),r}get allowsNesting(){return!0}}Nt.setState=ne.define();function mp(t,e,n){let r=t.facet(Kn),i=ut(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Me.ExcludeBuffers))s.type.isTop&&(i=s);return i}function ut(t){let e=t.field(Nt.state,!1);return e?e.tree:ae.empty}class _S{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ti=null;class ui{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new ui(e,n,[],ae.empty,0,r,[],null)}startParse(){return this.parser.startParse(new _S(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=ae.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(ur.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ur.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ti;Ti=this;try{return e()}finally{Ti=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=gp(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,h,c,f)=>a.push({fromA:u,toA:h,fromB:c,toB:f})),r=ur.applyChanges(r,a),i=ae.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let h=e.mapPos(u.from,1),c=e.mapPos(u.to,-1);h<c&&o.push({from:h,to:c})}}}return new ui(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=gp(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends My{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Ti;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new ae(et.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ti}}function gp(t,e,n){return ur.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class hi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new hi(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=ui.create(e.facet(Kn).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new hi(r)}}Nt.state=It.define({create:hi.init,update(t,e){for(let n of e.effects)if(n.is(Nt.setState))return n.value;return e.startState.facet(Kn)!=e.state.facet(Kn)?hi.init(e.state):t.apply(e)}});let Ny=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Ny=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Ua=typeof navigator<"u"&&(!((Wa=navigator.scheduling)===null||Wa===void 0)&&Wa.isInputPending)?()=>navigator.scheduling.isInputPending():null,zS=at.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Nt.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Nt.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Ny(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Nt.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!Ua?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>Ua&&Ua()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Nt.setState.of(new hi(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Yt(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Kn=R.define({combine(t){return t.length?t[0]:null},enables:t=>[Nt.state,zS,B.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),jS=R.define(),Uc=R.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function kr(t){let e=t.facet(Uc);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Cs(t,e){let n="",r=t.tabSize,i=t.facet(Uc)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function $c(t,e){t instanceof K&&(t=new Xo(t));for(let r of t.state.facet(jS)){let i=r(t,e);if(i!==void 0)return i}let n=ut(t.state);return n.length>=e?HS(t,n,e):null}class Xo{constructor(e,n={}){this.state=e,this.options=n,this.unit=kr(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Go(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Dy=new W;function HS(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return Py(r,t,n)}function Py(t,e,n){for(let r=t;r;r=r.next){let i=WS(r.node);if(i)return i(Kc.create(e,n,r))}return 0}function VS(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function WS(t){let e=t.type.prop(Dy);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(W.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>qS(l,!0,1,void 0,s&&!VS(l)?i.from:void 0)}return t.parent==null?US:null}function US(){return 0}class Kc extends Xo{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new Kc(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if($S(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return Py(this.context.next,this.base,this.pos)}}function $S(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function KS(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function qS(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=KS(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const GS=200;function YS(){return K.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+GS)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let h=l.doc.lineAt(u);if(h.from==o)continue;o=h.from;let c=$c(l,h.from);if(c==null)continue;let f=/^\s*/.exec(h.text)[0],d=Cs(l,c);f!=d&&a.push({from:h.from,to:h.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const QS=R.define(),JS=new W;function XS(t,e,n){let r=ut(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(JS);if(a&&(o.to<r.length-50||r.length==t.doc.length||!ZS(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function ZS(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function yp(t,e,n){for(let r of t.facet(QS)){let i=r(t,e,n);if(i)return i}return XS(t,e,n)}function Ly(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Ry=ne.define({map:Ly}),qc=ne.define({map:Ly}),Co=It.define({create(){return j.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=vp(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Ry)&&!eC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(By),i=r?j.replace({widget:new rC(r(e.state,n.value))}):kp;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(qc)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=vp(t,e.selection.main.head)),t},provide:t=>B.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(kp.range(r,i))}return j.set(e,!0)}});function vp(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function bh(t,e,n){var r;let i=null;return(r=t.field(Co,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function eC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const tC={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},By=R.define({combine(t){return qo(t,tC)}});function nC(t){return[Co,lC]}function Iy(t,e){let{state:n}=t,r=n.facet(By),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=bh(t.state,o.from,o.to);a&&t.dispatch({effects:qc.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const kp=j.replace({widget:new class extends Ps{toDOM(t){return Iy(t,null)}}});class rC extends Ps{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Iy(e,this.value)}}const iC={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class $a extends Un{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function sC(t={}){let e={...iC,...t},n=new $a(e,!0),r=new $a(e,!1),i=at.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(Kn)!=l.state.facet(Kn)||l.startState.field(Co,!1)!=l.state.field(Co,!1)||ut(l.startState)!=ut(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new mr;for(let a of l.viewportLineBlocks){let u=bh(l.state,a.from,a.to)?r:yp(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,cS({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||Y.empty},initialSpacer(){return new $a(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=bh(l.state,o.from,o.to);if(u)return l.dispatch({effects:qc.of(u)}),!0;let h=yp(l.state,o.from,o.to);return h?(l.dispatch({effects:Ry.of(h)}),!0):!1}}}),nC()]}const lC=B.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Zo{constructor(e,n){this.specs=e;let r;function i(o){let a=Hn.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof Nt?o=>o.prop(jr)==l.data:l?o=>o==l:void 0,this.style=Oy(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new Hn(r):null,this.themeType=n.themeType}static define(e,n){return new Zo(e,n||{})}}const Mh=R.define(),oC=R.define({combine(t){return t.length?[t[0]]:null}});function Ka(t){let e=t.facet(Mh);return e.length?e:t.facet(oC)}function aC(t,e){let n=[hC],r;return t instanceof Zo&&(t.module&&n.push(B.styleModule.of(t.module)),r=t.themeType),r?n.push(Mh.computeN([B.darkTheme],i=>i.facet(B.darkTheme)==(r=="dark")?[t]:[])):n.push(Mh.of(t)),n}class uC{constructor(e){this.markCache=Object.create(null),this.tree=ut(e.state),this.decorations=this.buildDeco(e,Ka(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=ut(e.state),r=Ka(e.state),i=r!=Ka(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return j.none;let r=new mr;for(let{from:i,to:s}of e.visibleRanges)LS(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=j.mark({class:a})))},i,s);return r.finish()}}const hC=$o.high(at.fromClass(uC,{decorations:t=>t.decorations})),cC=B.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Fy=1e4,_y="()[]{}",zy=R.define({combine(t){return qo(t,{afterCursor:!0,brackets:_y,maxScanDistance:Fy,renderMatch:pC})}}),fC=j.mark({class:"cm-matchingBracket"}),dC=j.mark({class:"cm-nonmatchingBracket"});function pC(t){let e=[],n=t.matched?fC:dC;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const mC=It.define({create(){return j.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(zy);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Qt(e.state,i.head,-1,r)||i.head>0&&Qt(e.state,i.head-1,1,r)||r.afterCursor&&(Qt(e.state,i.head,1,r)||i.head<e.state.doc.length&&Qt(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return j.set(n,!0)},provide:t=>B.decorations.from(t)}),gC=[mC,cC];function yC(t={}){return[zy.of(t),gC]}const vC=new W;function Th(t,e,n){let r=t.prop(e<0?W.openedBy:W.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Oh(t){let e=t.type.prop(vC);return e?e(t.node):t}function Qt(t,e,n,r={}){let i=r.maxScanDistance||Fy,s=r.brackets||_y,l=ut(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=Th(a.type,n,s);if(u&&a.from<a.to){let h=Oh(a);if(h&&(n>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return kC(t,e,n,a,h,u,s)}}return xC(t,e,n,l,o.type,i,s)}function kC(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,h=o==null?void 0:o.cursor();if(h&&(n<0?h.childBefore(r.from):h.childAfter(r.to)))do if(n<0?h.to<=r.from:h.from>=r.to){if(u==0&&s.indexOf(h.type.name)>-1&&h.from<h.to){let c=Oh(h);return{start:a,end:c?{from:c.from,to:c.to}:void 0,matched:!0}}else if(Th(h.type,n,l))u++;else if(Th(h.type,-n,l)){if(u==0){let c=Oh(h);return{start:a,end:c&&c.from<c.to?{from:c.from,to:c.to}:void 0,matched:!1}}u--}}while(n<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}function xC(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),c=0;for(let f=0;!h.next().done&&f<=s;){let d=h.value;n<0&&(f+=d.length);let m=e+f*n;for(let v=n>0?0:d.length-1,k=n>0?d.length:-1;v!=k;v+=n){let p=l.indexOf(d[v]);if(!(p<0||r.resolveInner(m+v,1).type!=i))if(p%2==0==n>0)c++;else{if(c==1)return{start:u,end:{from:m+v,to:m+v+1},matched:p>>1==a>>1};c--}}n>0&&(f+=d.length)}return h.done?{start:u,matched:!1}:null}function xp(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class jy{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=xp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:xp(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function wC(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||SC,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Qc,mergeTokens:t.mergeTokens!==!1}}function SC(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const wp=new WeakMap;class Gc extends Nt{constructor(e){let n=IS(e.languageData),r=wC(e),i,s=new class extends My{createParse(l,o,a){return new AC(i,l,o,a)}};super(n,s,[],e.name),this.topNode=MC(n,this),i=this,this.streamParser=r,this.stateAfter=new W({perNode:!0}),this.tokenTable=e.tokenTable?new Uy(r.tokenTable):bC}static define(e){return new Gc(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=wp.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=Yc(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let h=r?r(a.from):-1,c=new jy(a.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;c.pos<u-a.from;)Vy(this.streamParser.token,c,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&wp.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function Yc(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof ae&&a<i&&Yc(t,o,a,r,i);if(u)return u}return null}function Hy(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof ae){if(!(a=Hy(t,o,n-l,r-l,i)))break;return i?new ae(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function CC(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&Yc(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=Hy(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?kr(i):4),tree:ae.empty}}class AC{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=ui.get(),l=i[0].from,{state:o,tree:a}=CC(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(kr(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=ui.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new jy(n,e?e.state.tabSize:4,e?kr(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=Vy(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=ae.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:EC,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new ae(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new ae(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Vy(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const Qc=Object.create(null),As=[et.none],EC=new jc(As),Sp=[],Cp=Object.create(null),Wy=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Wy[t]=$y(Qc,e);class Uy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Wy)}resolve(e){return e?this.table[e]||(this.table[e]=$y(this.extra,e)):0}}const bC=new Uy(Qc);function qa(t,e){Sp.indexOf(t)>-1||(Sp.push(t),console.warn(e))}function $y(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let h=t[u]||M[u];h?typeof h=="function"?a.length?a=a.map(h):qa(u,`Modifier ${u} used at start of tag`):a.length?qa(u,`Tag ${u} used as modifier`):a=Array.isArray(h)?h:[h]:qa(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=Cp[i];if(s)return s.id;let l=Cp[i]=et.define({id:As.length,name:r,props:[DS({[r]:n})]});return As.push(l),l.id}function MC(t,e){let n=et.define({id:As.length,name:"Document",props:[jr.add(()=>t),Dy.add(()=>r=>e.getIndent(r))],top:!0});return As.push(n),n}ke.RTL,ke.LTR;const TC="#e5c07b",Ap="#e06c75",OC="#56b6c2",NC="#ffffff",zl="#abb2bf",Nh="#7d8799",DC="#61afef",PC="#98c379",Ep="#d19a66",LC="#c678dd",RC="#21252b",bp="#2c313a",Mp="#282c34",Ga="#353a42",BC="#3E4451",Tp="#528bff",IC=B.theme({"&":{color:zl,backgroundColor:Mp},".cm-content":{caretColor:Tp},".cm-cursor, .cm-dropCursor":{borderLeftColor:Tp},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:BC},".cm-panels":{backgroundColor:RC,color:zl},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Mp,color:Nh,border:"none"},".cm-activeLineGutter":{backgroundColor:bp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Ga},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Ga,borderBottomColor:Ga},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:bp,color:zl}}},{dark:!0}),FC=Zo.define([{tag:M.keyword,color:LC},{tag:[M.name,M.deleted,M.character,M.propertyName,M.macroName],color:Ap},{tag:[M.function(M.variableName),M.labelName],color:DC},{tag:[M.color,M.constant(M.name),M.standard(M.name)],color:Ep},{tag:[M.definition(M.name),M.separator],color:zl},{tag:[M.typeName,M.className,M.number,M.changed,M.annotation,M.modifier,M.self,M.namespace],color:TC},{tag:[M.operator,M.operatorKeyword,M.url,M.escape,M.regexp,M.link,M.special(M.string)],color:OC},{tag:[M.meta,M.comment],color:Nh},{tag:M.strong,fontWeight:"bold"},{tag:M.emphasis,fontStyle:"italic"},{tag:M.strikethrough,textDecoration:"line-through"},{tag:M.link,color:Nh,textDecoration:"underline"},{tag:M.heading,fontWeight:"bold",color:Ap},{tag:[M.atom,M.bool,M.special(M.variableName)],color:Ep},{tag:[M.processingInstruction,M.string,M.inserted],color:PC},{tag:M.invalid,color:NC}]),_C=[IC,aC(FC)],zC=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=Xc(t.state,n.from);return r.line?jC(t):r.block?VC(t):!1};function Jc(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const jC=Jc($C,0),HC=Jc(Ky,0),VC=Jc((t,e)=>Ky(t,e,UC(e)),0);function Xc(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Oi=50;function WC(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Oi,r),l=t.sliceDoc(i,i+Oi),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let h,c;i-r<=2*Oi?h=c=t.sliceDoc(r,i):(h=t.sliceDoc(r,r+Oi),c=t.sliceDoc(i-Oi,i));let f=/^\s*/.exec(h)[0].length,d=/\s*$/.exec(c)[0].length,m=c.length-d-n.length;return h.slice(f,f+e.length)==e&&c.slice(m,m+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(h.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(c.charAt(m-1))?1:0}}:null}function UC(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Ky(t,e,n=e.selection.ranges){let r=n.map(s=>Xc(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>WC(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:h}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:h.pos-h.margin,to:h.pos+a.close.length})}return{changes:s}}return null}function $C(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=Xc(e,s).line;if(u){for(let h=s;h<=l;){let c=e.doc.lineAt(h);if(c.from>i&&(s==l||l>c.from)){i=c.from;let f=/^\s*/.exec(c.text)[0].length,d=f==c.length,m=c.text.slice(f,f+u.length)==u?f:-1;f<c.text.length&&f<a&&(a=f),r.push({line:c,comment:m,token:u,indent:f,empty:d,single:!1})}h=c.to+1}if(a<1e9)for(let h=o;h<r.length;h++)r[h].indent<r[h].line.text.length&&(r[h].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:h,single:c}of r)(c||!h)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,h=u+a.length;l.text[h-l.from]==" "&&h++,s.push({from:u,to:h})}return{changes:s}}return null}function mi(t,e){return E.create(t.ranges.map(e),t.mainIndex)}function Ft(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function _t({state:t,dispatch:e},n){let r=mi(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Ft(t,r)),!0)}function ea(t,e){return E.cursor(e?t.to:t.from)}function qy(t,e){return _t(t,n=>n.empty?t.moveByChar(n,e):ea(n,e))}function je(t){return t.textDirectionAt(t.state.selection.main.head)==ke.LTR}const Gy=t=>qy(t,!je(t)),Yy=t=>qy(t,je(t));function Qy(t,e){return _t(t,n=>n.empty?t.moveByGroup(n,e):ea(n,e))}const KC=t=>Qy(t,!je(t)),qC=t=>Qy(t,je(t));function GC(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function ta(t,e,n){let r=ut(t).resolveInner(e.head),i=n?W.closedBy:W.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;GC(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?Qt(t,r.from,1):Qt(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,E.cursor(o,n?-1:1)}const YC=t=>_t(t,e=>ta(t.state,e,!je(t))),QC=t=>_t(t,e=>ta(t.state,e,je(t)));function Jy(t,e){return _t(t,n=>{if(!n.empty)return ea(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const Xy=t=>Jy(t,!1),Zy=t=>Jy(t,!0);function e1(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(B.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function t1(t,e){let n=e1(t),{state:r}=t,i=mi(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):ea(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=B.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(Ft(r,i),{effects:s}),!0}const Op=t=>t1(t,!1),Dh=t=>t1(t,!0);function Qn(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=E.cursor(r.from+s))}return i}const JC=t=>_t(t,e=>Qn(t,e,!0)),XC=t=>_t(t,e=>Qn(t,e,!1)),ZC=t=>_t(t,e=>Qn(t,e,!je(t))),e2=t=>_t(t,e=>Qn(t,e,je(t))),t2=t=>_t(t,e=>E.cursor(t.lineBlockAt(e.head).from,1)),n2=t=>_t(t,e=>E.cursor(t.lineBlockAt(e.head).to,-1));function r2(t,e,n){let r=!1,i=mi(t.selection,s=>{let l=Qt(t,s.head,-1)||Qt(t,s.head,1)||s.head>0&&Qt(t,s.head-1,1)||s.head<t.doc.length&&Qt(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return E.cursor(o)});return r?(e(Ft(t,i)),!0):!1}const i2=({state:t,dispatch:e})=>r2(t,e);function Et(t,e){let n=mi(t.state.selection,r=>{let i=e(r);return E.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Ft(t.state,n)),!0)}function n1(t,e){return Et(t,n=>t.moveByChar(n,e))}const r1=t=>n1(t,!je(t)),i1=t=>n1(t,je(t));function s1(t,e){return Et(t,n=>t.moveByGroup(n,e))}const s2=t=>s1(t,!je(t)),l2=t=>s1(t,je(t)),o2=t=>Et(t,e=>ta(t.state,e,!je(t))),a2=t=>Et(t,e=>ta(t.state,e,je(t)));function l1(t,e){return Et(t,n=>t.moveVertically(n,e))}const o1=t=>l1(t,!1),a1=t=>l1(t,!0);function u1(t,e){return Et(t,n=>t.moveVertically(n,e,e1(t).height))}const Np=t=>u1(t,!1),Dp=t=>u1(t,!0),u2=t=>Et(t,e=>Qn(t,e,!0)),h2=t=>Et(t,e=>Qn(t,e,!1)),c2=t=>Et(t,e=>Qn(t,e,!je(t))),f2=t=>Et(t,e=>Qn(t,e,je(t))),d2=t=>Et(t,e=>E.cursor(t.lineBlockAt(e.head).from)),p2=t=>Et(t,e=>E.cursor(t.lineBlockAt(e.head).to)),Pp=({state:t,dispatch:e})=>(e(Ft(t,{anchor:0})),!0),Lp=({state:t,dispatch:e})=>(e(Ft(t,{anchor:t.doc.length})),!0),Rp=({state:t,dispatch:e})=>(e(Ft(t,{anchor:t.selection.main.anchor,head:0})),!0),Bp=({state:t,dispatch:e})=>(e(Ft(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),m2=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),g2=({state:t,dispatch:e})=>{let n=na(t).map(({from:r,to:i})=>E.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:E.create(n),userEvent:"select"})),!0},y2=({state:t,dispatch:e})=>{let n=mi(t.selection,r=>{let i=ut(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return E.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(Ft(t,n)),!0)};function h1(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(Ft(n,E.create(i,i.length-1))),!0)}const v2=t=>h1(t,!1),k2=t=>h1(t,!0),x2=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=E.create([n.main]):n.main.empty||(r=E.create([E.cursor(n.main.head)])),r?(e(Ft(t,r)),!0):!1};function Is(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=vl(t,a,!1)):a>l&&(n="delete.forward",a=vl(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=vl(t,l,!1),o=vl(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:E.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?B.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function vl(t,e,n){if(t instanceof B)for(let r of t.state.facet(B.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const c1=(t,e,n)=>Is(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=Go(o,s.tabSize),h=u%kr(s)||kr(s);for(let c=0;c<h&&o[o.length-1-c]==" ";c++)i--;a=i}else a=Oe(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=Oe(l.text,a-l.from,!1,!1)+l.from);return a}),Ph=t=>c1(t,!1,!0),f1=t=>c1(t,!0,!1),d1=(t,e)=>Is(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=Oe(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),h=l(u);if(o!=null&&h!=o)break;(u!=" "||r!=n.head)&&(o=h),r=a}return r}),p1=t=>d1(t,!1),w2=t=>d1(t,!0),S2=t=>Is(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),C2=t=>Is(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),A2=t=>Is(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),E2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:U.of(["",""])},range:E.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},b2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:Oe(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:Oe(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:E.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function na(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function m1(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of na(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(E.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(E.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:E.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const M2=({state:t,dispatch:e})=>m1(t,e,!1),T2=({state:t,dispatch:e})=>m1(t,e,!0);function g1(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of na(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const O2=({state:t,dispatch:e})=>g1(t,e,!1),N2=({state:t,dispatch:e})=>g1(t,e,!0),D2=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(na(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=mi(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function P2(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=ut(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(W.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const Ip=y1(!1),L2=y1(!0);function y1(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&P2(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new Xo(e,{simulateBreak:s,simulateDoubleBreak:!!a}),h=$c(u,s);for(h==null&&(h=Go(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let c=["",Cs(e,h)];return a&&c.push(Cs(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:U.of(c)},range:E.cursor(s+1+c[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Zc(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:E.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const R2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Xo(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=Zc(t,(s,l,o)=>{let a=$c(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],h=Cs(t,a);(u!=h||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:h}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},B2=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Zc(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Uc)})}),{userEvent:"input.indent"})),!0),I2=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Zc(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Go(i,t.tabSize),l=0,o=Cs(t,Math.max(0,s-kr(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),F2=t=>(t.setTabFocusMode(),!0),_2=[{key:"Ctrl-b",run:Gy,shift:r1,preventDefault:!0},{key:"Ctrl-f",run:Yy,shift:i1},{key:"Ctrl-p",run:Xy,shift:o1},{key:"Ctrl-n",run:Zy,shift:a1},{key:"Ctrl-a",run:t2,shift:d2},{key:"Ctrl-e",run:n2,shift:p2},{key:"Ctrl-d",run:f1},{key:"Ctrl-h",run:Ph},{key:"Ctrl-k",run:S2},{key:"Ctrl-Alt-h",run:p1},{key:"Ctrl-o",run:E2},{key:"Ctrl-t",run:b2},{key:"Ctrl-v",run:Dh}],z2=[{key:"ArrowLeft",run:Gy,shift:r1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:KC,shift:s2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:ZC,shift:c2,preventDefault:!0},{key:"ArrowRight",run:Yy,shift:i1,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:qC,shift:l2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:e2,shift:f2,preventDefault:!0},{key:"ArrowUp",run:Xy,shift:o1,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Pp,shift:Rp},{mac:"Ctrl-ArrowUp",run:Op,shift:Np},{key:"ArrowDown",run:Zy,shift:a1,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Lp,shift:Bp},{mac:"Ctrl-ArrowDown",run:Dh,shift:Dp},{key:"PageUp",run:Op,shift:Np},{key:"PageDown",run:Dh,shift:Dp},{key:"Home",run:XC,shift:h2,preventDefault:!0},{key:"Mod-Home",run:Pp,shift:Rp},{key:"End",run:JC,shift:u2,preventDefault:!0},{key:"Mod-End",run:Lp,shift:Bp},{key:"Enter",run:Ip,shift:Ip},{key:"Mod-a",run:m2},{key:"Backspace",run:Ph,shift:Ph,preventDefault:!0},{key:"Delete",run:f1,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:p1,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:w2,preventDefault:!0},{mac:"Mod-Backspace",run:C2,preventDefault:!0},{mac:"Mod-Delete",run:A2,preventDefault:!0}].concat(_2.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),j2=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:YC,shift:o2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:QC,shift:a2},{key:"Alt-ArrowUp",run:M2},{key:"Shift-Alt-ArrowUp",run:O2},{key:"Alt-ArrowDown",run:T2},{key:"Shift-Alt-ArrowDown",run:N2},{key:"Mod-Alt-ArrowUp",run:v2},{key:"Mod-Alt-ArrowDown",run:k2},{key:"Escape",run:x2},{key:"Mod-Enter",run:L2},{key:"Alt-l",mac:"Ctrl-l",run:g2},{key:"Mod-i",run:y2,preventDefault:!0},{key:"Mod-[",run:I2},{key:"Mod-]",run:B2},{key:"Mod-Alt-\\",run:R2},{key:"Shift-Mod-k",run:D2},{key:"Shift-Mod-\\",run:i2},{key:"Mod-/",run:zC},{key:"Alt-A",run:HC},{key:"Ctrl-m",mac:"Shift-Alt-m",run:F2}].concat(z2),Fp=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Es{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(Fp(o)):Fp,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return s0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=ax(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=l0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Es.prototype[Symbol.iterator]=function(){return this});const v1={from:-1,to:-1,match:/.*/.exec("")},ef="gm"+(/x/.unicode==null?"":"u");class k1{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=v1,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new x1(e,n,r,i,s);this.re=new RegExp(n,ef+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=Ao(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Ao(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Ya=new WeakMap;class Qr{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=Ya.get(e);if(!i||i.from>=r||i.to<=n){let o=new Qr(n,e.sliceString(n,r));return Ya.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),Ya.set(e,new Qr(l,s)),new Qr(n,s.slice(n-l,r-l))}}class x1{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=v1,this.matchPos=Ao(e,i),this.re=new RegExp(n,ef+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Qr.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Ao(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Qr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(k1.prototype[Symbol.iterator]=x1.prototype[Symbol.iterator]=function(){return this});function H2(t){try{return new RegExp(t,ef),!0}catch{return!1}}function Ao(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Lh(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Ae("input",{class:"cm-textfield",name:"line",value:e}),r=Ae("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Xi.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Ae("label",t.state.phrase("Go to line"),": ",n)," ",Ae("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Ae("button",{name:"close",onclick:()=>{t.dispatch({effects:Xi.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,h,c]=s,f=h?+h.slice(1):0,d=u?+u:o.number;if(u&&c){let k=d/100;a&&(k=k*(a=="-"?-1:1)+o.number/l.doc.lines),d=Math.round(l.doc.lines*k)}else u&&a&&(d=d*(a=="-"?-1:1)+o.number);let m=l.doc.line(Math.max(1,Math.min(l.doc.lines,d))),v=E.cursor(m.from+Math.max(0,Math.min(f,m.length)));t.dispatch({effects:[Xi.of(!1),B.scrollIntoView(v.from,{y:"center"})],selection:v}),t.focus()}return{dom:r}}const Xi=ne.define(),_p=It.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Xi)&&(t=n.value);return t},provide:t=>ko.from(t,e=>e?Lh:null)}),V2=t=>{let e=vo(t,Lh);if(!e){let n=[Xi.of(!0)];t.state.field(_p,!1)==null&&n.push(ne.appendConfig.of([_p,W2])),t.dispatch({effects:n}),e=vo(t,Lh)}return e&&e.dom.querySelector("input").select(),!0},W2=B.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),U2=({state:t,dispatch:e})=>{let{selection:n}=t,r=E.create(n.ranges.map(i=>t.wordAt(i.head)||E.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function $2(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Es(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Es(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const K2=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return U2({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=$2(t,r);return i?(e(t.update({selection:t.selection.addRange(E.range(i.from,i.to),!1),effects:B.scrollIntoView(i.to)})),!0):!1},gi=R.define({combine(t){return qo(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new iA(e),scrollToMatch:e=>B.scrollIntoView(e)})}});class w1{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||H2(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Q2(this):new G2(this)}getCursor(e,n=0,r){let i=e.doc?e:K.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Er(this,i,n,r):Ar(this,i,n,r)}}class S1{constructor(e){this.spec=e}}function Ar(t,e,n,r){return new Es(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?q2(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function q2(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Eo(i,n-s))!=Ne.Word||e(bo(i,n-s))!=Ne.Word)&&(e(bo(i,r-s))!=Ne.Word||e(Eo(i,r-s))!=Ne.Word))}class G2 extends S1{constructor(e){super(e)}nextMatch(e,n,r){let i=Ar(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Ar(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Ar(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Ar(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Ar(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Er(t,e,n,r){return new k1(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Y2(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Eo(t,e){return t.slice(Oe(t,e,!1),e)}function bo(t,e){return t.slice(e,Oe(t,e))}function Y2(t){return(e,n,r)=>!r[0].length||(t(Eo(r.input,r.index))!=Ne.Word||t(bo(r.input,r.index))!=Ne.Word)&&(t(bo(r.input,r.index+r[0].length))!=Ne.Word||t(Eo(r.input,r.index+r[0].length))!=Ne.Word)}class Q2 extends S1{nextMatch(e,n,r){let i=Er(this.spec,e,r,e.doc.length).next();return i.done&&(i=Er(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Er(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Er(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Er(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const bs=ne.define(),tf=ne.define(),_n=It.define({create(t){return new Qa(Rh(t).create(),null)},update(t,e){for(let n of e.effects)n.is(bs)?t=new Qa(n.value.create(),t.panel):n.is(tf)&&(t=new Qa(t.query,n.value?nf:null));return t},provide:t=>ko.from(t,e=>e.panel)});class Qa{constructor(e,n){this.query=e,this.panel=n}}const J2=j.mark({class:"cm-searchMatch"}),X2=j.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Z2=at.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(_n))}update(t){let e=t.state.field(_n);(e!=t.startState.field(_n)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return j.none;let{view:n}=this,r=new mr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,h)=>{let c=n.state.selection.ranges.some(f=>f.from==u&&f.to==h);r.add(u,h,c?X2:J2)})}return r.finish()}},{decorations:t=>t.decorations});function Fs(t){return e=>{let n=e.state.field(_n,!1);return n&&n.query.spec.valid?t(e,n):E1(e)}}const Mo=Fs((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=E.single(r.from,r.to),s=t.state.facet(gi);return t.dispatch({selection:i,effects:[rf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),A1(t),!0}),To=Fs((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=E.single(i.from,i.to),l=t.state.facet(gi);return t.dispatch({selection:s,effects:[rf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),A1(t),!0}),eA=Fs((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:E.create(n.map(r=>E.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),tA=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Es(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(E.range(o.value.from,o.value.to))}return e(t.update({selection:E.create(s,l),userEvent:"select.search.matches"})),!0},zp=Fs((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,h=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),h.push(B.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let c=t.state.changes(o);return l&&(a=E.single(l.from,l.to).map(c),h.push(rf(t,l)),h.push(n.facet(gi).scrollToMatch(a.main,t))),t.dispatch({changes:c,selection:a,effects:h,userEvent:"input.replace"}),!0}),nA=Fs((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:B.announce.of(r),userEvent:"input.replace.all"}),!0});function nf(t){return t.state.facet(gi).createPanel(t)}function Rh(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(gi);return new w1({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function C1(t){let e=vo(t,nf);return e&&e.dom.querySelector("[main-field]")}function A1(t){let e=C1(t);e&&e==t.root.activeElement&&e.select()}const E1=t=>{let e=t.state.field(_n,!1);if(e&&e.panel){let n=C1(t);if(n&&n!=t.root.activeElement){let r=Rh(t.state,e.query.spec);r.valid&&t.dispatch({effects:bs.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[tf.of(!0),e?bs.of(Rh(t.state,e.query.spec)):ne.appendConfig.of(lA)]});return!0},b1=t=>{let e=t.state.field(_n,!1);if(!e||!e.panel)return!1;let n=vo(t,nf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:tf.of(!1)}),!0},rA=[{key:"Mod-f",run:E1,scope:"editor search-panel"},{key:"F3",run:Mo,shift:To,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Mo,shift:To,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:b1,scope:"editor search-panel"},{key:"Mod-Shift-l",run:tA},{key:"Mod-Alt-g",run:V2},{key:"Mod-d",run:K2,preventDefault:!0}];class iA{constructor(e){this.view=e;let n=this.query=e.state.field(_n).query.spec;this.commit=this.commit.bind(this),this.searchField=Ae("input",{value:n.search,placeholder:tt(e,"Find"),"aria-label":tt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ae("input",{value:n.replace,placeholder:tt(e,"Replace"),"aria-label":tt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ae("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Ae("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Ae("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return Ae("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=Ae("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Mo(e),[tt(e,"next")]),r("prev",()=>To(e),[tt(e,"previous")]),r("select",()=>eA(e),[tt(e,"all")]),Ae("label",null,[this.caseField,tt(e,"match case")]),Ae("label",null,[this.reField,tt(e,"regexp")]),Ae("label",null,[this.wordField,tt(e,"by word")]),...e.state.readOnly?[]:[Ae("br"),this.replaceField,r("replace",()=>zp(e),[tt(e,"replace")]),r("replaceAll",()=>nA(e),[tt(e,"replace all")])],Ae("button",{name:"close",onclick:()=>b1(e),"aria-label":tt(e,"close"),type:"button"},[""])])}commit(){let e=new w1({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:bs.of(e)}))}keydown(e){rS(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?To:Mo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),zp(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(bs)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(gi).top}}function tt(t,e){return t.state.phrase(e)}const kl=30,xl=/[\s\.,:;?!]/;function rf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-kl),l=Math.min(i,n+kl),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<kl;a++)if(!xl.test(o[a+1])&&xl.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-kl;a--)if(!xl.test(o[a-1])&&xl.test(o[a])){o=o.slice(0,a);break}}return B.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const sA=B.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),lA=[_n,$o.low(Z2),sA],tn={PAGE_BREAK:/^\={3,}$/,SCENE:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,TRANSITION:/^((?:FADE (?:IN|TO BLACK|OUT)|CUT TO BLACK)[\:\.]?|.+ TO\:)/i,TRANSITION_POWER_USER:/^(?:> )(.+)/i,TITLE:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,SECTION:/^(#{1,4})\ (.*)/,MILESTONE:/^(?:\ +)?-\ (.+)/,IMAGE:/^(\[i\]https:\/\/(.+))/i,AUDIO:/^(\[a\]https:\/\/(.+))/i},oA=Gc.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(tn.TRANSITION)||t.match(tn.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(tn.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(/^([A-Z][A-Z0-9'\-. ]+([A-Z0-9'\-. ])+)/))||(n=t.match(/^([@][A-Za-z]+)/)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(tn.IMAGE)||t.match(tn.AUDIO)?"link":t.match(tn.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(tn.TITLE))return t.skipTo(":"),t.next(),"def";if(n=t.match(tn.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(tn.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),aA=at.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push(j.line({class:"cm-keyword"}).range(s.from)),e.push(j.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push(j.line({class:"cm-header"}).range(s.from)),e.push(j.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push(j.line({class:"cm-atom"}).range(s.from)),e.push(j.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push(j.line({class:"cm-synopsis"}).range(s.from)),e.push(j.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push(j.line({class:"cm-number"}).range(s.from)),e.push(j.mark({class:"cm-number"}).range(s.from,s.to))):/^@?[A-Z0-9 '\-\.]+(?:\^)?$/.test(o)&&o===o.toUpperCase()&&(e.push(j.line({class:"cm-variable"}).range(s.from)),e.push(j.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return j.set(e)}},{decorations:t=>t.decorations}),uA=({value:t="",onChange:e=()=>{},placeholder:n="Type your fountain screenplay here..."})=>{const r=Te.useRef(null),i=Te.useRef(null);return Te.useEffect(()=>{if(!r.current)return;const s=[vS(),lS(),sC(),yC(),YS(),oA,aA,vy.of([...j2,...rA]),_C,B.updateListener.of(a=>{a.docChanged&&e(a.state.doc.toString())}),B.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],l=K.create({doc:t,extensions:s}),o=new B({state:l,parent:r.current});return i.current=o,()=>{i.current&&(i.current.destroy(),i.current=null)}},[]),Te.useEffect(()=>{const s=i.current;if(!s)return;const l=s.state.doc.toString();t!==l&&s.dispatch({changes:{from:0,to:s.state.doc.length,insert:t}})},[t]),w.jsx("div",{ref:r,className:"codemirror-wrapper","data-placeholder":n})};function Ja(t){const e=t.split(`
`),n=[];let r={character_extended:!1,note:!1};for(let i=0;i<e.length;i++){const s=e[i],l=s.trim();if(!l){r.character_extended=!1,n.push({id:`line-${i}`,text:s,index:i,type:"blank",className:"blank-line",speaker:null});continue}let o="action",a="action",u=null;if(r.note)l.includes("]]")&&(r.note=!1),o="note",a="note";else if(l.includes("[["))r.note=!l.includes("]]"),o="note",a="note";else if(/^(INT\.|EXT\.|EST\.|I\/E\.|\.)/i.test(l))r.character_extended=!1,o="scene",a="scene-heading";else if(/^(FADE IN:|FADE OUT\.|FADE TO BLACK\.|CUT TO:|CUT TO BLACK\.|DISSOLVE TO:|SMASH CUT TO:)/.test(l)||/TO:$/.test(l))r.character_extended=!1,o="transition",a="transition";else if(/^[A-Z][A-Z0-9#'\s]*(\^)?$/.test(l)&&l.replace("^","").length<50&&l.length>1&&!l.includes(".")&&!l.includes(",")&&!l.includes("!")&&!l.includes("?")||/^@[A-Za-z0-9'\-. ][A-Za-z0-9'\-.]*(?:\^)?$/.test(l))r.character_extended=!0,l.includes("^")?(o="dual_character",a="dual-character"):(o="character",a="character"),u=l;else if(r.character_extended)/^\(.*\)$/.test(l)?(o="parenthetical",a="parenthetical"):(o="dialogue",a="dialogue");else if(/^= /.test(l))r.character_extended=!1,o="synopsis",a="synopsis";else if(/^~ /.test(l))r.character_extended=!1,o="lyrics",a="lyrics";else if(/^- /.test(l))r.character_extended=!1,o="milestone",a="milestone";else if(/^\d{1,2}:\d{2}$/.test(l))r.character_extended=!1,o="duration",a="duration";else if(/^\[i\]https?:\/\/.+/i.test(l))r.character_extended=!1,o="image",a="image";else if(/^\[a\]https?:\/\/.+/i.test(l))r.character_extended=!1,o="audio",a="audio";else if(/^(title|credit|author[s]?|source|notes|draft date|date|contact|copyright):/i.test(l)){r.character_extended=!1;const c=l.match(/^(title|credit|author[s]?|source|notes|draft date|date|contact|copyright):/i);c&&(c[1].toLowerCase()==="title"?(o="title",a="title-page-title"):(o="title_page",a="title-page-element"))}else if(/^#{1,4}\s/.test(l)){r.character_extended=!1;const c=l.match(/^(#{1,4})/)[1].length;o="section",a=`section-${c}`}else/^={3,}$/.test(l)?(r.character_extended=!1,o="page_break",a="page-break"):/^>.+<$/.test(l)?(r.character_extended=!1,o="centered",a="centered"):(r.character_extended=!1,o="action",a="action");let h=s;if(o==="title")h=s.replace(/^title:\s*/i,"");else if(o==="title_page"){const c=s.match(/^([^:]+):\s*(.*)/);if(c){const f=c[1],d=c[2];h=`<strong>${f}:</strong> ${d}`}}else o==="image"?h=`<img src="${s.replace(/^\[i\]/i,"")}" alt="Storyboard image" style="max-width: 100%; height: auto; border: 1px solid #ccc; margin: 0.5em 0;" />`:o==="audio"?h=`<audio controls style="width: 100%; margin: 0.5em 0;"><source src="${s.replace(/^\[a\]/i,"")}" type="audio/mpeg">Your browser does not support the audio element.</audio>`:o==="page_break"?h="<hr />":o==="transition"?h=s.replace(/^> /,""):o==="character"||o==="dual_character"?h=s.replace(/^@/,""):o==="scene"?h=s.replace(/^\./,""):o==="centered"&&(h=`> ${s.replace(/^>|<$/g,"")} <`);n.push({id:`line-${i}`,text:h,index:i,type:o,className:a,speaker:u})}return n}function hA(t=""){const[e,n]=Te.useState([]),r=Te.useRef(null),[i,s]=Te.useState(!0);return Te.useEffect(()=>{if(!i){if(t){const o=Ja(t);n(o)}return}try{const o=`
// Simple worker that processes text into preview blocks
let currentText = ''

function processText(text) {
  const lines = text.split('\\n')
  const blocks = []
  
  // State machine like fountainMode
  let state = {
    character_extended: false,
    note: false
  }
  
  for (let i = 0; i < lines.length; i++) {
    const line = lines[i]
    const trimmed = line.trim()
    
    // Blank line resets character_extended state
    if (!trimmed) {
      state.character_extended = false
      blocks.push({
        id: \`line-\${i}\`,
        text: line,
        index: i,
        type: 'blank',
        className: 'blank-line',
        speaker: null
      })
      continue
    }
    
    let type = 'action'
    let className = 'action'
    let speaker = null
    
    // Note handling
    if (state.note) {
      if (trimmed.includes(']]')) {
        state.note = false
      }
      type = 'note'
      className = 'note'
    } else if (trimmed.includes('[[')) {
      state.note = !trimmed.includes(']]') // stays in note state if not closed
      type = 'note'
      className = 'note'
    }
    // Scene headings
    else if (/^(INT\\.|EXT\\.|EST\\.|I\\/E\\.|\\.)/.test(trimmed)) {
      state.character_extended = false
      type = 'scene'
      className = 'scene-heading'
    }
    // Transitions
    else if (/^(FADE IN:|FADE OUT\\.|FADE TO BLACK\\.|CUT TO:|CUT TO BLACK\\.|DISSOLVE TO:|SMASH CUT TO:)/.test(trimmed) || 
             /TO:$/.test(trimmed)) {
      state.character_extended = false
      type = 'transition'
      className = 'transition'
    }
    // Character lines - must be ALL CAPS and short (including dual dialogue with ^) OR start with @
    else if (((/^[A-Z][A-Z0-9#'\\s]*(\\^)?$/.test(trimmed) && 
             trimmed.replace('^', '').length < 50 && 
             trimmed.length > 1 &&
             !trimmed.includes('.') &&
             !trimmed.includes(',') &&
             !trimmed.includes('!') &&
             !trimmed.includes('?')) ||
             /^@[A-Za-z0-9'\\-. ][A-Za-z0-9'\\-.]*(?:\\^)?$/.test(trimmed))) {
      state.character_extended = true
      if (trimmed.includes('^')) {
        type = 'dual_character'
        className = 'dual-character'
      } else {
        type = 'character'
        className = 'character'
      }
      speaker = trimmed
    }
    // If we're in character_extended state, check for dialogue/parentheticals
    else if (state.character_extended) {
      if (/^\\(.*\\)$/.test(trimmed)) {
        type = 'parenthetical'
        className = 'parenthetical'
      } else {
        type = 'dialogue'
        className = 'dialogue'
      }
    }
    // Synopsis
    else if (/^= /.test(trimmed)) {
      state.character_extended = false
      type = 'synopsis'
      className = 'synopsis'
    }
    // Lyrics
    else if (/^~ /.test(trimmed)) {
      state.character_extended = false
      type = 'lyrics'
      className = 'lyrics'
    }
    // Milestone
    else if (/^- /.test(trimmed)) {
      state.character_extended = false
      type = 'milestone'
      className = 'milestone'
    }
    // Duration (mm:ss format, for #### panels only)
    else if (/^\\d{1,2}:\\d{2}$/.test(trimmed)) {
      state.character_extended = false
      type = 'duration'
      className = 'duration'
    }
    // Image [i]url
    else if (/^\\[i\\]https?:\\/\\/.+/.test(trimmed)) {
      state.character_extended = false
      type = 'image'
      className = 'image'
    }
    // Audio [a]url
    else if (/^\\[a\\]https?:\\/\\/.+/.test(trimmed)) {
      state.character_extended = false
      type = 'audio'
      className = 'audio'
    }
    // Title page elements
    else if (/^(title|credit|author[s]?|source|notes|draft date|date|contact|copyright):/.test(trimmed)) {
      state.character_extended = false
      const match = trimmed.match(/^(title|credit|author[s]?|source|notes|draft date|date|contact|copyright):/)
      if (match) {
        const key = match[1].toLowerCase()
        if (key === 'title') {
          type = 'title'
          className = 'title-page-title'
        } else {
          type = 'title_page'
          className = 'title-page-element'
        }
      }
    }
    // Section markers (# ## ### ####)
    else if (/^#{1,4}\\s/.test(trimmed)) {
      state.character_extended = false
      const level = trimmed.match(/^(#{1,4})/)[1].length
      type = 'section'
      className = \`section-\${level}\`
    }
    // Page break
    else if (/^={3,}$/.test(trimmed)) {
      state.character_extended = false
      type = 'page_break'
      className = 'page-break'
    }
    // Centered text >TEXT<
    else if (/^>.+<$/.test(trimmed)) {
      state.character_extended = false
      type = 'centered'
      className = 'centered'
    }
    // Default: action
    else {
      state.character_extended = false
      type = 'action'
      className = 'action'
    }
    
    let displayText = line
    
    // Special processing for different types
    if (type === 'title') {
      displayText = line.replace(/^title:\\s*/, '')
    } else if (type === 'title_page') {
      // Bold the key part for non-title elements
      const match = line.match(/^([^:]+):\\s*(.*)/)
      if (match) {
        const key = match[1]
        const value = match[2]
        displayText = \`<strong>\${key}:</strong> \${value}\`
      }
    } else if (type === 'image') {
      // Extract URL and create img tag
      const url = line.replace(/^\\[i\\]/, '')
      displayText = \`<img src="\${url}" alt="Storyboard image" style="max-width: 100%; height: auto; border: 1px solid #ccc; margin: 0.5em 0;" />\`
    } else if (type === 'audio') {
      // Extract URL and create audio tag
      const url = line.replace(/^\\[a\\]/, '')
      displayText = \`<audio controls style="width: 100%; margin: 0.5em 0;"><source src="\${url}" type="audio/mpeg">Your browser does not support the audio element.</audio>\`
    } else if (type === 'page_break') {
      // Render page break as hr element
      displayText = '<hr />'
    } else if (type === 'transition') {
      // Remove '> ' prefix for power user transitions
      displayText = line.replace(/^> /, '')
    } else if (type === 'character' || type === 'dual_character') {
      // Remove '@' prefix for power user characters
      displayText = line.replace(/^@/, '')
    } else if (type === 'scene') {
      // Remove leading period from scene headings like .MONTAGE
      displayText = line.replace(/^\\./, '')
    } else if (type === 'centered') {
      // Format centered text as "> TEXT <" with spaces
      const text = line.replace(/^>|<$/g, '')
      displayText = \`> \${text} <\`
    }
    
    blocks.push({
      id: \`line-\${i}\`,
      text: displayText,
      index: i,
      type,
      className,
      speaker
    })
  }
  
  return blocks
}

self.onmessage = function(e) {
  const { type, text } = e.data
  
  if (type === 'process') {
    const blocks = processText(text)
    
    self.postMessage({
      type: 'result',
      blocks
    })
  }
}
`,a=new Blob([o],{type:"application/javascript"}),u=URL.createObjectURL(a),h=new Worker(u);return h.onerror=c=>{console.error("Worker error, falling back to main thread processing:",c),s(!1)},h.onmessage=c=>{const{type:f,blocks:d}=c.data;f==="result"&&n(d||[])},r.current=h,t&&h.postMessage({type:"process",text:t}),()=>{h.terminate(),URL.revokeObjectURL(u)}}catch(o){console.error("Failed to create worker, using fallback:",o),s(!1)}},[i]),Te.useEffect(()=>{if(!i&&t){const o=Ja(t);n(o)}},[i,t]),{blocks:e,processText:o=>{if(i&&r.current)r.current.postMessage({type:"process",text:o});else{const a=Ja(o);n(a)}}}}const jp=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Heydid the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE  CODING AND COFFEE\r
\r
 Keys clack.  \r
 Tests blink green, then red, then righteous green again.  \r
 A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pingsjust shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing  preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open  payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.`;function cA(){const[t,e]=Te.useState(""),[n,r]=Te.useState(!1),{blocks:i,processText:s}=hA("");Te.useEffect(()=>{e(jp),s(jp)},[]);const l=o=>{e(o),s(o)};return Te.useEffect(()=>{console.log("App: blocks updated",i.length,i)},[i]),Te.useEffect(()=>{const o=a=>{a.key==="Escape"&&n&&r(!1)};if(n)return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[n]),w.jsxs("div",{className:"fountain-app",children:[w.jsx("button",{className:"help-button",onClick:()=>r(!0),title:"Fountain Format Help",children:"?"}),w.jsx("div",{className:"editor-layout",children:w.jsxs("div",{className:"columns is-gapless",children:[w.jsx("div",{className:"column is-half-desktop",children:w.jsxs("div",{className:"box editor-box",children:[w.jsx("h3",{className:"title is-6",children:"Fountain Editor"}),w.jsx(uA,{value:t,onChange:l,placeholder:"Type your fountain screenplay here..."})]})}),w.jsx("div",{className:"column is-half-desktop",children:w.jsxs("div",{className:"box preview-box",children:[w.jsx("h3",{className:"title is-6",children:"Live Preview"}),w.jsx("div",{className:"preview-content",children:i.length===0?w.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):i.map(o=>w.jsx("div",{className:`preview-line ${o.className||""}`,"data-type":o.type,children:o.type==="image"||o.type==="audio"||o.type==="title_page"||o.type==="page_break"?w.jsx("div",{dangerouslySetInnerHTML:{__html:o.text}}):o.text||""},o.id))})]})})]})}),n&&w.jsx("div",{className:"modal-overlay",onClick:()=>r(!1),children:w.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[w.jsxs("div",{className:"modal-header",children:[w.jsx("h2",{children:"Fountain Format Reference"}),w.jsx("button",{className:"modal-close",onClick:()=>r(!1),children:""})]}),w.jsxs("div",{className:"modal-body",children:[w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Title Page"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",w.jsx("br",{}),"Credit: Written by",w.jsx("br",{}),"Author: John Dope",w.jsx("br",{}),"Authors: John Dope and Jane Smith",w.jsx("br",{}),"Source: Based on the novel by Famous Writer",w.jsx("br",{}),"Draft Date: October 4, 2025",w.jsx("br",{}),"Date: 10/04/2025",w.jsx("br",{}),"Contact:",w.jsx("br",{}),"John Dope",w.jsx("br",{}),"555-123-4567",w.jsx("br",{}),"john@example.com",w.jsx("br",{}),"",w.jsx("br",{}),"Literary Agent",w.jsx("br",{}),"Agency Name",w.jsx("br",{}),"agent@agency.com",w.jsx("br",{}),"Notes: This is a sample script",w.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),w.jsx("p",{children:'Title page elements appear at the top of your script. All are optional. Use "Author" for single writer, "Authors" for multiple. Contact can be multi-line with indentation. End title page with === (page break).'})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Scene Headings"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["EXT. PARKING LOT - DAY",w.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",w.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),w.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Characters & Dialogue"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["MENTOR",w.jsx("br",{}),"Welcome to the team!",w.jsx("br",{}),w.jsx("br",{}),"@MENTOR",w.jsx("br",{}),"(power user syntax)",w.jsx("br",{}),w.jsx("br",{}),"USER #1",w.jsx("br",{}),"Thanks for having me.",w.jsx("br",{}),w.jsx("br",{}),"BOB O'SHAUNNESSY",w.jsx("br",{}),"(whispering)",w.jsx("br",{}),"This is a parenthetical."]}),w.jsx("p",{children:"Characters are ALL CAPS. Use @ for power user syntax. Parentheticals go under character names."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Dual Dialogue"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["ALICE^",w.jsx("br",{}),"BOB^",w.jsx("br",{}),"CHARLIE^",w.jsx("br",{}),"I can't believe it!",w.jsx("br",{}),w.jsx("br",{}),"CHARLIE ^",w.jsx("br",{}),"DAVE ^",w.jsx("br",{}),"(disgusted)",w.jsx("br",{}),"Eew. no it's nooot!",w.jsx("br",{}),w.jsx("br",{})]}),w.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Action Lines"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["Bob walks into the room and looks around nervously.",w.jsx("br",{}),w.jsx("br",{}),"The computer screen flickers to life."]}),w.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Transitions"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["FADE IN:",w.jsx("br",{}),"CUT TO:",w.jsx("br",{}),"FADE TO BLACK.",w.jsx("br",{}),"> CUT TO BLACK."]}),w.jsx("p",{children:"Transitions control scene changes. Use > for power user syntax."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Centered Text"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:[">INTERMISSION<",w.jsx("br",{}),">THE END<"]}),w.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["# Act I",w.jsx("br",{}),"## Scene 1: The Beginning",w.jsx("br",{}),"### Sequence A: Setup",w.jsx("br",{}),"#### Panel 1",w.jsx("br",{}),"02:30",w.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",w.jsx("br",{}),"[a]https://example.com/dialogue.mp3",w.jsx("br",{}),w.jsx("br",{}),"#### Panel 2",w.jsx("br",{}),"01:15",w.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),w.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Notes & Comments"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["[[This is a note for the writer]]",w.jsx("br",{}),w.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),w.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Special Elements"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["= Synopsis: Brief scene description",w.jsx("br",{}),w.jsx("br",{}),"===",w.jsx("br",{}),"(Page Break)",w.jsx("br",{}),w.jsx("br",{}),"~Lyrics:",w.jsx("br",{}),'~"Happy birthday to you"',w.jsx("br",{}),'~"Happy birthday to you"']}),w.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})})]})}Xa.createRoot(document.getElementById("root")).render(w.jsx(W1.StrictMode,{children:w.jsx(cA,{})}));
