import{p as ba,a as w1}from"./chunk-B1-1SDTH.js";function x1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dm={exports:{}},Yo={},pm={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vs=Symbol.for("react.element"),k1=Symbol.for("react.portal"),S1=Symbol.for("react.fragment"),C1=Symbol.for("react.strict_mode"),b1=Symbol.for("react.profiler"),A1=Symbol.for("react.provider"),E1=Symbol.for("react.context"),M1=Symbol.for("react.forward_ref"),T1=Symbol.for("react.suspense"),N1=Symbol.for("react.memo"),D1=Symbol.for("react.lazy"),Pf=Symbol.iterator;function O1(t){return t===null||typeof t!="object"?null:(t=Pf&&t[Pf]||t["@@iterator"],typeof t=="function"?t:null)}var mm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gm=Object.assign,ym={};function bi(t,e,n){this.props=t,this.context=e,this.refs=ym,this.updater=n||mm}bi.prototype.isReactComponent={};bi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vm(){}vm.prototype=bi.prototype;function ih(t,e,n){this.props=t,this.context=e,this.refs=ym,this.updater=n||mm}var sh=ih.prototype=new vm;sh.constructor=ih;gm(sh,bi.prototype);sh.isPureReactComponent=!0;var Lf=Array.isArray,wm=Object.prototype.hasOwnProperty,lh={current:null},xm={key:!0,ref:!0,__self:!0,__source:!0};function km(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)wm.call(e,r)&&!xm.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Vs,type:t,key:s,ref:l,props:i,_owner:lh.current}}function P1(t,e){return{$$typeof:Vs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function oh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vs}function L1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rf=/\/+/g;function Aa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?L1(""+t.key):e.toString(36)}function zl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Vs:case k1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+Aa(l,0):r,Lf(i)?(n="",t!=null&&(n=t.replace(Rf,"$&/")+"/"),zl(i,e,n,"",function(u){return u})):i!=null&&(oh(i)&&(i=P1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Rf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",Lf(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+Aa(s,o);l+=zl(s,e,n,a,i)}else if(a=O1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+Aa(s,o++),l+=zl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function rl(t,e,n){if(t==null)return t;var r=[],i=0;return zl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function R1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tt={current:null},Hl={transition:null},I1={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:Hl,ReactCurrentOwner:lh};function Sm(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:rl,forEach:function(t,e,n){rl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rl(t,function(){e++}),e},toArray:function(t){return rl(t,function(e){return e})||[]},only:function(t){if(!oh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=bi;Y.Fragment=S1;Y.Profiler=b1;Y.PureComponent=ih;Y.StrictMode=C1;Y.Suspense=T1;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I1;Y.act=Sm;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gm({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=lh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)wm.call(e,a)&&!xm.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Vs,type:t.type,key:i,ref:s,props:r,_owner:l}};Y.createContext=function(t){return t={$$typeof:E1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:A1,_context:t},t.Consumer=t};Y.createElement=km;Y.createFactory=function(t){var e=km.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:M1,render:t}};Y.isValidElement=oh;Y.lazy=function(t){return{$$typeof:D1,_payload:{_status:-1,_result:t},_init:R1}};Y.memo=function(t,e){return{$$typeof:N1,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=Hl.transition;Hl.transition={};try{t()}finally{Hl.transition=e}};Y.unstable_act=Sm;Y.useCallback=function(t,e){return tt.current.useCallback(t,e)};Y.useContext=function(t){return tt.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return tt.current.useDeferredValue(t)};Y.useEffect=function(t,e){return tt.current.useEffect(t,e)};Y.useId=function(){return tt.current.useId()};Y.useImperativeHandle=function(t,e,n){return tt.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return tt.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return tt.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return tt.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return tt.current.useReducer(t,e,n)};Y.useRef=function(t){return tt.current.useRef(t)};Y.useState=function(t){return tt.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return tt.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return tt.current.useTransition()};Y.version="18.3.1";pm.exports=Y;var I=pm.exports;const B1=x1(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j1=I,F1=Symbol.for("react.element"),_1=Symbol.for("react.fragment"),z1=Object.prototype.hasOwnProperty,H1=j1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W1={key:!0,ref:!0,__self:!0,__source:!0};function Cm(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)z1.call(e,r)&&!W1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:F1,type:t,key:s,ref:l,props:i,_owner:H1.current}}Yo.Fragment=_1;Yo.jsx=Cm;Yo.jsxs=Cm;dm.exports=Yo;var m=dm.exports,xu={},bm={exports:{}},kt={},Am={exports:{}},Em={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,_){var U=P.length;P.push(_);e:for(;0<U;){var q=U-1>>>1,O=P[q];if(0<i(O,_))P[q]=_,P[U]=O,U=q;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var _=P[0],U=P.pop();if(U!==_){P[0]=U;e:for(var q=0,O=P.length,Se=O>>>1;q<Se;){var ee=2*(q+1)-1,He=P[ee],Te=ee+1,Qt=P[Te];if(0>i(He,U))Te<O&&0>i(Qt,He)?(P[q]=Qt,P[Te]=U,q=Te):(P[q]=He,P[ee]=U,q=ee);else if(Te<O&&0>i(Qt,U))P[q]=Qt,P[Te]=U,q=Te;else break e}}return _}function i(P,_){var U=P.sortIndex-_.sortIndex;return U!==0?U:P.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],c=1,h=null,f=3,d=!1,g=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=P)r(u),_.sortIndex=_.expirationTime,e(a,_);else break;_=n(u)}}function S(P){if(w=!1,v(P),!g)if(n(a)!==null)g=!0,rt(C);else{var _=n(u);_!==null&&Ct(S,_.startTime-P)}}function C(P,_){g=!1,w&&(w=!1,p(N),N=-1),d=!0;var U=f;try{for(v(_),h=n(a);h!==null&&(!(h.expirationTime>_)||P&&!V());){var q=h.callback;if(typeof q=="function"){h.callback=null,f=h.priorityLevel;var O=q(h.expirationTime<=_);_=t.unstable_now(),typeof O=="function"?h.callback=O:h===n(a)&&r(a),v(_)}else r(a);h=n(a)}if(h!==null)var Se=!0;else{var ee=n(u);ee!==null&&Ct(S,ee.startTime-_),Se=!1}return Se}finally{h=null,f=U,d=!1}}var A=!1,b=null,N=-1,H=5,j=-1;function V(){return!(t.unstable_now()-j<H)}function W(){if(b!==null){var P=t.unstable_now();j=P;var _=!0;try{_=b(!0,P)}finally{_?Q():(A=!1,b=null)}}else A=!1}var Q;if(typeof y=="function")Q=function(){y(W)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,we=re.port2;re.port1.onmessage=W,Q=function(){we.postMessage(null)}}else Q=function(){x(W,0)};function rt(P){b=P,A||(A=!0,Q())}function Ct(P,_){N=x(function(){P(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||d||(g=!0,rt(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var _=3;break;default:_=f}var U=f;f=_;try{return P()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,_){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=f;f=P;try{return _()}finally{f=U}},t.unstable_scheduleCallback=function(P,_,U){var q=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?q+U:q):U=q,P){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=U+O,P={id:c++,callback:_,priorityLevel:P,startTime:U,expirationTime:O,sortIndex:-1},U>q?(P.sortIndex=U,e(u,P),n(a)===null&&P===n(u)&&(w?(p(N),N=-1):w=!0,Ct(S,U-q))):(P.sortIndex=O,e(a,P),g||d||(g=!0,rt(C))),P},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(P){var _=f;return function(){var U=f;f=_;try{return P.apply(this,arguments)}finally{f=U}}}})(Em);Am.exports=Em;var V1=Am.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1=I,vt=V1;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mm=new Set,ms={};function Pr(t,e){ci(t,e),ci(t+"Capture",e)}function ci(t,e){for(ms[t]=e,t=0;t<e.length;t++)Mm.add(e[t])}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ku=Object.prototype.hasOwnProperty,$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,If={},Bf={};function K1(t){return ku.call(Bf,t)?!0:ku.call(If,t)?!1:$1.test(t)?Bf[t]=!0:(If[t]=!0,!1)}function G1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q1(t,e,n,r){if(e===null||typeof e>"u"||G1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nt(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ze[t]=new nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ze[e]=new nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ze[t]=new nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ze[t]=new nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ze[t]=new nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ze[t]=new nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ze[t]=new nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ze[t]=new nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ze[t]=new nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ah=/[\-:]([a-z])/g;function uh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ah,uh);ze[e]=new nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ah,uh);ze[e]=new nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ah,uh);ze[e]=new nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ze[t]=new nt(t,1,!1,t.toLowerCase(),null,!1,!1)});ze.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ze[t]=new nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ch(t,e,n,r){var i=ze.hasOwnProperty(e)?ze[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(q1(e,n,i,r)&&(n=null),r||i===null?K1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var En=U1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,il=Symbol.for("react.element"),_r=Symbol.for("react.portal"),zr=Symbol.for("react.fragment"),hh=Symbol.for("react.strict_mode"),Su=Symbol.for("react.profiler"),Tm=Symbol.for("react.provider"),Nm=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),Cu=Symbol.for("react.suspense"),bu=Symbol.for("react.suspense_list"),dh=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),Dm=Symbol.for("react.offscreen"),jf=Symbol.iterator;function Li(t){return t===null||typeof t!="object"?null:(t=jf&&t[jf]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,Ea;function Ki(t){if(Ea===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ea=e&&e[1]||""}return`
`+Ea+t}var Ma=!1;function Ta(t,e){if(!t||Ma)return"";Ma=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{Ma=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ki(t):""}function Y1(t){switch(t.tag){case 5:return Ki(t.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 2:case 15:return t=Ta(t.type,!1),t;case 11:return t=Ta(t.type.render,!1),t;case 1:return t=Ta(t.type,!0),t;default:return""}}function Au(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zr:return"Fragment";case _r:return"Portal";case Su:return"Profiler";case hh:return"StrictMode";case Cu:return"Suspense";case bu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Nm:return(t.displayName||"Context")+".Consumer";case Tm:return(t._context.displayName||"Context")+".Provider";case fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dh:return e=t.displayName||null,e!==null?e:Au(t.type)||"Memo";case Nn:e=t._payload,t=t._init;try{return Au(t(e))}catch{}}return null}function Q1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Au(e);case 8:return e===hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Om(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function J1(t){var e=Om(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sl(t){t._valueTracker||(t._valueTracker=J1(t))}function Pm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Om(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function so(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Eu(t,e){var n=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ff(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Jn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lm(t,e){e=e.checked,e!=null&&ch(t,"checked",e,!1)}function Mu(t,e){Lm(t,e);var n=Jn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tu(t,e.type,Jn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _f(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tu(t,e,n){(e!=="number"||so(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gi=Array.isArray;function ei(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Jn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Gi(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jn(n)}}function Rm(t,e){var n=Jn(e.value),r=Jn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Im(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Du(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Im(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ll,Bm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ll=ll||document.createElement("div"),ll.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ll.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X1=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(t){X1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zi[e]=Zi[t]})});function jm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zi.hasOwnProperty(t)&&Zi[t]?(""+e).trim():e+"px"}function Fm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Z1=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ou(t,e){if(e){if(Z1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Pu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lu=null;function ph(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ru=null,ti=null,ni=null;function Wf(t){if(t=Ks(t)){if(typeof Ru!="function")throw Error(M(280));var e=t.stateNode;e&&(e=ea(e),Ru(t.stateNode,t.type,e))}}function _m(t){ti?ni?ni.push(t):ni=[t]:ti=t}function zm(){if(ti){var t=ti,e=ni;if(ni=ti=null,Wf(t),e)for(t=0;t<e.length;t++)Wf(e[t])}}function Hm(t,e){return t(e)}function Wm(){}var Na=!1;function Vm(t,e,n){if(Na)return t(e,n);Na=!0;try{return Hm(t,e,n)}finally{Na=!1,(ti!==null||ni!==null)&&(Wm(),zm())}}function ys(t,e){var n=t.stateNode;if(n===null)return null;var r=ea(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Iu=!1;if(kn)try{var Ri={};Object.defineProperty(Ri,"passive",{get:function(){Iu=!0}}),window.addEventListener("test",Ri,Ri),window.removeEventListener("test",Ri,Ri)}catch{Iu=!1}function ew(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var es=!1,lo=null,oo=!1,Bu=null,tw={onError:function(t){es=!0,lo=t}};function nw(t,e,n,r,i,s,l,o,a){es=!1,lo=null,ew.apply(tw,arguments)}function rw(t,e,n,r,i,s,l,o,a){if(nw.apply(this,arguments),es){if(es){var u=lo;es=!1,lo=null}else throw Error(M(198));oo||(oo=!0,Bu=u)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Um(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vf(t){if(Lr(t)!==t)throw Error(M(188))}function iw(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Vf(i),t;if(s===r)return Vf(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function $m(t){return t=iw(t),t!==null?Km(t):null}function Km(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Km(t);if(e!==null)return e;t=t.sibling}return null}var Gm=vt.unstable_scheduleCallback,Uf=vt.unstable_cancelCallback,sw=vt.unstable_shouldYield,lw=vt.unstable_requestPaint,ke=vt.unstable_now,ow=vt.unstable_getCurrentPriorityLevel,mh=vt.unstable_ImmediatePriority,qm=vt.unstable_UserBlockingPriority,ao=vt.unstable_NormalPriority,aw=vt.unstable_LowPriority,Ym=vt.unstable_IdlePriority,Qo=null,cn=null;function uw(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Qo,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:fw,cw=Math.log,hw=Math.LN2;function fw(t){return t>>>=0,t===0?32:31-(cw(t)/hw|0)|0}var ol=64,al=4194304;function qi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=qi(o):(s&=l,s!==0&&(r=qi(s)))}else l=n&~i,l!==0?r=qi(l):s!==0&&(r=qi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wt(e),i=1<<n,r|=t[n],e&=~i;return r}function dw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Wt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=dw(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function ju(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qm(){var t=ol;return ol<<=1,!(ol&4194240)&&(ol=64),t}function Da(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Us(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function mw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function gh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ie=0;function Jm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xm,yh,Zm,eg,tg,Fu=!1,ul=[],Wn=null,Vn=null,Un=null,vs=new Map,ws=new Map,Rn=[],gw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $f(t,e){switch(t){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":vs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(e.pointerId)}}function Ii(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ks(e),e!==null&&yh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function yw(t,e,n,r,i){switch(e){case"focusin":return Wn=Ii(Wn,t,e,n,r,i),!0;case"dragenter":return Vn=Ii(Vn,t,e,n,r,i),!0;case"mouseover":return Un=Ii(Un,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return vs.set(s,Ii(vs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ws.set(s,Ii(ws.get(s)||null,t,e,n,r,i)),!0}return!1}function ng(t){var e=pr(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=Um(n),e!==null){t.blockedOn=e,tg(t.priority,function(){Zm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_u(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lu=r,n.target.dispatchEvent(r),Lu=null}else return e=Ks(n),e!==null&&yh(e),t.blockedOn=n,!1;e.shift()}return!0}function Kf(t,e,n){Wl(t)&&n.delete(e)}function vw(){Fu=!1,Wn!==null&&Wl(Wn)&&(Wn=null),Vn!==null&&Wl(Vn)&&(Vn=null),Un!==null&&Wl(Un)&&(Un=null),vs.forEach(Kf),ws.forEach(Kf)}function Bi(t,e){t.blockedOn===e&&(t.blockedOn=null,Fu||(Fu=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,vw)))}function xs(t){function e(i){return Bi(i,t)}if(0<ul.length){Bi(ul[0],t);for(var n=1;n<ul.length;n++){var r=ul[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wn!==null&&Bi(Wn,t),Vn!==null&&Bi(Vn,t),Un!==null&&Bi(Un,t),vs.forEach(e),ws.forEach(e),n=0;n<Rn.length;n++)r=Rn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rn.length&&(n=Rn[0],n.blockedOn===null);)ng(n),n.blockedOn===null&&Rn.shift()}var ri=En.ReactCurrentBatchConfig,co=!0;function ww(t,e,n,r){var i=ie,s=ri.transition;ri.transition=null;try{ie=1,vh(t,e,n,r)}finally{ie=i,ri.transition=s}}function xw(t,e,n,r){var i=ie,s=ri.transition;ri.transition=null;try{ie=4,vh(t,e,n,r)}finally{ie=i,ri.transition=s}}function vh(t,e,n,r){if(co){var i=_u(t,e,n,r);if(i===null)za(t,e,r,ho,n),$f(t,r);else if(yw(i,t,e,n,r))r.stopPropagation();else if($f(t,r),e&4&&-1<gw.indexOf(t)){for(;i!==null;){var s=Ks(i);if(s!==null&&Xm(s),s=_u(t,e,n,r),s===null&&za(t,e,r,ho,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else za(t,e,r,null,n)}}var ho=null;function _u(t,e,n,r){if(ho=null,t=ph(r),t=pr(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Um(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ho=t,null}function rg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ow()){case mh:return 1;case qm:return 4;case ao:case aw:return 16;case Ym:return 536870912;default:return 16}default:return 16}}var jn=null,wh=null,Vl=null;function ig(){if(Vl)return Vl;var t,e=wh,n=e.length,r,i="value"in jn?jn.value:jn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Vl=i.slice(t,1<r?1-r:void 0)}function Ul(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cl(){return!0}function Gf(){return!1}function St(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cl:Gf,this.isPropagationStopped=Gf,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),e}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xh=St(Ai),$s=ye({},Ai,{view:0,detail:0}),kw=St($s),Oa,Pa,ji,Jo=ye({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ji&&(ji&&t.type==="mousemove"?(Oa=t.screenX-ji.screenX,Pa=t.screenY-ji.screenY):Pa=Oa=0,ji=t),Oa)},movementY:function(t){return"movementY"in t?t.movementY:Pa}}),qf=St(Jo),Sw=ye({},Jo,{dataTransfer:0}),Cw=St(Sw),bw=ye({},$s,{relatedTarget:0}),La=St(bw),Aw=ye({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),Ew=St(Aw),Mw=ye({},Ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tw=St(Mw),Nw=ye({},Ai,{data:0}),Yf=St(Nw),Dw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ow={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Pw[t])?!!e[t]:!1}function kh(){return Lw}var Rw=ye({},$s,{key:function(t){if(t.key){var e=Dw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ow[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kh,charCode:function(t){return t.type==="keypress"?Ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Iw=St(Rw),Bw=ye({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qf=St(Bw),jw=ye({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kh}),Fw=St(jw),_w=ye({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),zw=St(_w),Hw=ye({},Jo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ww=St(Hw),Vw=[9,13,27,32],Sh=kn&&"CompositionEvent"in window,ts=null;kn&&"documentMode"in document&&(ts=document.documentMode);var Uw=kn&&"TextEvent"in window&&!ts,sg=kn&&(!Sh||ts&&8<ts&&11>=ts),Jf=" ",Xf=!1;function lg(t,e){switch(t){case"keyup":return Vw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function og(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hr=!1;function $w(t,e){switch(t){case"compositionend":return og(e);case"keypress":return e.which!==32?null:(Xf=!0,Jf);case"textInput":return t=e.data,t===Jf&&Xf?null:t;default:return null}}function Kw(t,e){if(Hr)return t==="compositionend"||!Sh&&lg(t,e)?(t=ig(),Vl=wh=jn=null,Hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sg&&e.locale!=="ko"?null:e.data;default:return null}}var Gw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gw[t.type]:e==="textarea"}function ag(t,e,n,r){_m(r),e=fo(e,"onChange"),0<e.length&&(n=new xh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ns=null,ks=null;function qw(t){wg(t,0)}function Xo(t){var e=Ur(t);if(Pm(e))return t}function Yw(t,e){if(t==="change")return e}var ug=!1;if(kn){var Ra;if(kn){var Ia="oninput"in document;if(!Ia){var ed=document.createElement("div");ed.setAttribute("oninput","return;"),Ia=typeof ed.oninput=="function"}Ra=Ia}else Ra=!1;ug=Ra&&(!document.documentMode||9<document.documentMode)}function td(){ns&&(ns.detachEvent("onpropertychange",cg),ks=ns=null)}function cg(t){if(t.propertyName==="value"&&Xo(ks)){var e=[];ag(e,ks,t,ph(t)),Vm(qw,e)}}function Qw(t,e,n){t==="focusin"?(td(),ns=e,ks=n,ns.attachEvent("onpropertychange",cg)):t==="focusout"&&td()}function Jw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xo(ks)}function Xw(t,e){if(t==="click")return Xo(e)}function Zw(t,e){if(t==="input"||t==="change")return Xo(e)}function ex(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ut=typeof Object.is=="function"?Object.is:ex;function Ss(t,e){if(Ut(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ku.call(e,i)||!Ut(t[i],e[i]))return!1}return!0}function nd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rd(t,e){var n=nd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nd(n)}}function hg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fg(){for(var t=window,e=so();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=so(t.document)}return e}function Ch(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tx(t){var e=fg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hg(n.ownerDocument.documentElement,n)){if(r!==null&&Ch(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=rd(n,s);var l=rd(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nx=kn&&"documentMode"in document&&11>=document.documentMode,Wr=null,zu=null,rs=null,Hu=!1;function id(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hu||Wr==null||Wr!==so(r)||(r=Wr,"selectionStart"in r&&Ch(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rs&&Ss(rs,r)||(rs=r,r=fo(zu,"onSelect"),0<r.length&&(e=new xh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wr)))}function hl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vr={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},Ba={},dg={};kn&&(dg=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function Zo(t){if(Ba[t])return Ba[t];if(!Vr[t])return t;var e=Vr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dg)return Ba[t]=e[n];return t}var pg=Zo("animationend"),mg=Zo("animationiteration"),gg=Zo("animationstart"),yg=Zo("transitionend"),vg=new Map,sd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sr(t,e){vg.set(t,e),Pr(e,[t])}for(var ja=0;ja<sd.length;ja++){var Fa=sd[ja],rx=Fa.toLowerCase(),ix=Fa[0].toUpperCase()+Fa.slice(1);sr(rx,"on"+ix)}sr(pg,"onAnimationEnd");sr(mg,"onAnimationIteration");sr(gg,"onAnimationStart");sr("dblclick","onDoubleClick");sr("focusin","onFocus");sr("focusout","onBlur");sr(yg,"onTransitionEnd");ci("onMouseEnter",["mouseout","mouseover"]);ci("onMouseLeave",["mouseout","mouseover"]);ci("onPointerEnter",["pointerout","pointerover"]);ci("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function ld(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rw(r,e,void 0,t),t.currentTarget=null}function wg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;ld(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;ld(i,o,u),s=a}}}if(oo)throw t=Bu,oo=!1,Bu=null,t}function ue(t,e){var n=e[Ku];n===void 0&&(n=e[Ku]=new Set);var r=t+"__bubble";n.has(r)||(xg(e,t,2,!1),n.add(r))}function _a(t,e,n){var r=0;e&&(r|=4),xg(n,t,r,e)}var fl="_reactListening"+Math.random().toString(36).slice(2);function Cs(t){if(!t[fl]){t[fl]=!0,Mm.forEach(function(n){n!=="selectionchange"&&(sx.has(n)||_a(n,!1,t),_a(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fl]||(e[fl]=!0,_a("selectionchange",!1,e))}}function xg(t,e,n,r){switch(rg(e)){case 1:var i=ww;break;case 4:i=xw;break;default:i=vh}n=i.bind(null,e,n,t),i=void 0,!Iu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function za(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=pr(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Vm(function(){var u=s,c=ph(n),h=[];e:{var f=vg.get(t);if(f!==void 0){var d=xh,g=t;switch(t){case"keypress":if(Ul(n)===0)break e;case"keydown":case"keyup":d=Iw;break;case"focusin":g="focus",d=La;break;case"focusout":g="blur",d=La;break;case"beforeblur":case"afterblur":d=La;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=qf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Cw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Fw;break;case pg:case mg:case gg:d=Ew;break;case yg:d=zw;break;case"scroll":d=kw;break;case"wheel":d=Ww;break;case"copy":case"cut":case"paste":d=Tw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Qf}var w=(e&4)!==0,x=!w&&t==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var y=u,v;y!==null;){v=y;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,p!==null&&(S=ys(y,p),S!=null&&w.push(bs(y,S,v)))),x)break;y=y.return}0<w.length&&(f=new d(f,g,null,n,c),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==Lu&&(g=n.relatedTarget||n.fromElement)&&(pr(g)||g[Sn]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(g=n.relatedTarget||n.toElement,d=u,g=g?pr(g):null,g!==null&&(x=Lr(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=u),d!==g)){if(w=qf,S="onMouseLeave",p="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=Qf,S="onPointerLeave",p="onPointerEnter",y="pointer"),x=d==null?f:Ur(d),v=g==null?f:Ur(g),f=new w(S,y+"leave",d,n,c),f.target=x,f.relatedTarget=v,S=null,pr(c)===u&&(w=new w(p,y+"enter",g,n,c),w.target=v,w.relatedTarget=x,S=w),x=S,d&&g)t:{for(w=d,p=g,y=0,v=w;v;v=Rr(v))y++;for(v=0,S=p;S;S=Rr(S))v++;for(;0<y-v;)w=Rr(w),y--;for(;0<v-y;)p=Rr(p),v--;for(;y--;){if(w===p||p!==null&&w===p.alternate)break t;w=Rr(w),p=Rr(p)}w=null}else w=null;d!==null&&od(h,f,d,w,!1),g!==null&&x!==null&&od(h,x,g,w,!0)}}e:{if(f=u?Ur(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=Yw;else if(Zf(f))if(ug)C=Zw;else{C=Jw;var A=Qw}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Xw);if(C&&(C=C(t,u))){ag(h,C,n,c);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&Tu(f,"number",f.value)}switch(A=u?Ur(u):window,t){case"focusin":(Zf(A)||A.contentEditable==="true")&&(Wr=A,zu=u,rs=null);break;case"focusout":rs=zu=Wr=null;break;case"mousedown":Hu=!0;break;case"contextmenu":case"mouseup":case"dragend":Hu=!1,id(h,n,c);break;case"selectionchange":if(nx)break;case"keydown":case"keyup":id(h,n,c)}var b;if(Sh)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Hr?lg(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(sg&&n.locale!=="ko"&&(Hr||N!=="onCompositionStart"?N==="onCompositionEnd"&&Hr&&(b=ig()):(jn=c,wh="value"in jn?jn.value:jn.textContent,Hr=!0)),A=fo(u,N),0<A.length&&(N=new Yf(N,t,null,n,c),h.push({event:N,listeners:A}),b?N.data=b:(b=og(n),b!==null&&(N.data=b)))),(b=Uw?$w(t,n):Kw(t,n))&&(u=fo(u,"onBeforeInput"),0<u.length&&(c=new Yf("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=b))}wg(h,e)})}function bs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ys(t,n),s!=null&&r.unshift(bs(t,s,i)),s=ys(t,e),s!=null&&r.push(bs(t,s,i))),t=t.return}return r}function Rr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function od(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=ys(n,s),a!=null&&l.unshift(bs(n,a,o))):i||(a=ys(n,s),a!=null&&l.push(bs(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var lx=/\r\n?/g,ox=/\u0000|\uFFFD/g;function ad(t){return(typeof t=="string"?t:""+t).replace(lx,`
`).replace(ox,"")}function dl(t,e,n){if(e=ad(e),ad(t)!==e&&n)throw Error(M(425))}function po(){}var Wu=null,Vu=null;function Uu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $u=typeof setTimeout=="function"?setTimeout:void 0,ax=typeof clearTimeout=="function"?clearTimeout:void 0,ud=typeof Promise=="function"?Promise:void 0,ux=typeof queueMicrotask=="function"?queueMicrotask:typeof ud<"u"?function(t){return ud.resolve(null).then(t).catch(cx)}:$u;function cx(t){setTimeout(function(){throw t})}function Ha(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xs(e)}function $n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ei=Math.random().toString(36).slice(2),sn="__reactFiber$"+Ei,As="__reactProps$"+Ei,Sn="__reactContainer$"+Ei,Ku="__reactEvents$"+Ei,hx="__reactListeners$"+Ei,fx="__reactHandles$"+Ei;function pr(t){var e=t[sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sn]||n[sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cd(t);t!==null;){if(n=t[sn])return n;t=cd(t)}return e}t=n,n=t.parentNode}return null}function Ks(t){return t=t[sn]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ur(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function ea(t){return t[As]||null}var Gu=[],$r=-1;function lr(t){return{current:t}}function he(t){0>$r||(t.current=Gu[$r],Gu[$r]=null,$r--)}function oe(t,e){$r++,Gu[$r]=t.current,t.current=e}var Xn={},Ye=lr(Xn),ot=lr(!1),Sr=Xn;function hi(t,e){var n=t.type.contextTypes;if(!n)return Xn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function at(t){return t=t.childContextTypes,t!=null}function mo(){he(ot),he(Ye)}function hd(t,e,n){if(Ye.current!==Xn)throw Error(M(168));oe(Ye,e),oe(ot,n)}function kg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,Q1(t)||"Unknown",i));return ye({},n,r)}function go(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xn,Sr=Ye.current,oe(Ye,t),oe(ot,ot.current),!0}function fd(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=kg(t,e,Sr),r.__reactInternalMemoizedMergedChildContext=t,he(ot),he(Ye),oe(Ye,t)):he(ot),oe(ot,n)}var pn=null,ta=!1,Wa=!1;function Sg(t){pn===null?pn=[t]:pn.push(t)}function dx(t){ta=!0,Sg(t)}function or(){if(!Wa&&pn!==null){Wa=!0;var t=0,e=ie;try{var n=pn;for(ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pn=null,ta=!1}catch(i){throw pn!==null&&(pn=pn.slice(t+1)),Gm(mh,or),i}finally{ie=e,Wa=!1}}return null}var Kr=[],Gr=0,yo=null,vo=0,bt=[],At=0,Cr=null,gn=1,yn="";function hr(t,e){Kr[Gr++]=vo,Kr[Gr++]=yo,yo=t,vo=e}function Cg(t,e,n){bt[At++]=gn,bt[At++]=yn,bt[At++]=Cr,Cr=t;var r=gn;t=yn;var i=32-Wt(r)-1;r&=~(1<<i),n+=1;var s=32-Wt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,gn=1<<32-Wt(e)+i|n<<i|r,yn=s+t}else gn=1<<s|n<<i|r,yn=t}function bh(t){t.return!==null&&(hr(t,1),Cg(t,1,0))}function Ah(t){for(;t===yo;)yo=Kr[--Gr],Kr[Gr]=null,vo=Kr[--Gr],Kr[Gr]=null;for(;t===Cr;)Cr=bt[--At],bt[At]=null,yn=bt[--At],bt[At]=null,gn=bt[--At],bt[At]=null}var yt=null,gt=null,de=!1,zt=null;function bg(t,e){var n=Mt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yt=t,gt=$n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yt=t,gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cr!==null?{id:gn,overflow:yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yt=t,gt=null,!0):!1;default:return!1}}function qu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yu(t){if(de){var e=gt;if(e){var n=e;if(!dd(t,e)){if(qu(t))throw Error(M(418));e=$n(n.nextSibling);var r=yt;e&&dd(t,e)?bg(r,n):(t.flags=t.flags&-4097|2,de=!1,yt=t)}}else{if(qu(t))throw Error(M(418));t.flags=t.flags&-4097|2,de=!1,yt=t}}}function pd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yt=t}function pl(t){if(t!==yt)return!1;if(!de)return pd(t),de=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Uu(t.type,t.memoizedProps)),e&&(e=gt)){if(qu(t))throw Ag(),Error(M(418));for(;e;)bg(t,e),e=$n(e.nextSibling)}if(pd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gt=$n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gt=null}}else gt=yt?$n(t.stateNode.nextSibling):null;return!0}function Ag(){for(var t=gt;t;)t=$n(t.nextSibling)}function fi(){gt=yt=null,de=!1}function Eh(t){zt===null?zt=[t]:zt.push(t)}var px=En.ReactCurrentBatchConfig;function Fi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function ml(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function md(t){var e=t._init;return e(t._payload)}function Eg(t){function e(p,y){if(t){var v=p.deletions;v===null?(p.deletions=[y],p.flags|=16):v.push(y)}}function n(p,y){if(!t)return null;for(;y!==null;)e(p,y),y=y.sibling;return null}function r(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function i(p,y){return p=Yn(p,y),p.index=0,p.sibling=null,p}function s(p,y,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<y?(p.flags|=2,y):v):(p.flags|=2,y)):(p.flags|=1048576,y)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,y,v,S){return y===null||y.tag!==6?(y=Ya(v,p.mode,S),y.return=p,y):(y=i(y,v),y.return=p,y)}function a(p,y,v,S){var C=v.type;return C===zr?c(p,y,v.props.children,S,v.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Nn&&md(C)===y.type)?(S=i(y,v.props),S.ref=Fi(p,y,v),S.return=p,S):(S=Jl(v.type,v.key,v.props,null,p.mode,S),S.ref=Fi(p,y,v),S.return=p,S)}function u(p,y,v,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Qa(v,p.mode,S),y.return=p,y):(y=i(y,v.children||[]),y.return=p,y)}function c(p,y,v,S,C){return y===null||y.tag!==7?(y=xr(v,p.mode,S,C),y.return=p,y):(y=i(y,v),y.return=p,y)}function h(p,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ya(""+y,p.mode,v),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case il:return v=Jl(y.type,y.key,y.props,null,p.mode,v),v.ref=Fi(p,null,y),v.return=p,v;case _r:return y=Qa(y,p.mode,v),y.return=p,y;case Nn:var S=y._init;return h(p,S(y._payload),v)}if(Gi(y)||Li(y))return y=xr(y,p.mode,v,null),y.return=p,y;ml(p,y)}return null}function f(p,y,v,S){var C=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:o(p,y,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case il:return v.key===C?a(p,y,v,S):null;case _r:return v.key===C?u(p,y,v,S):null;case Nn:return C=v._init,f(p,y,C(v._payload),S)}if(Gi(v)||Li(v))return C!==null?null:c(p,y,v,S,null);ml(p,v)}return null}function d(p,y,v,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(v)||null,o(y,p,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case il:return p=p.get(S.key===null?v:S.key)||null,a(y,p,S,C);case _r:return p=p.get(S.key===null?v:S.key)||null,u(y,p,S,C);case Nn:var A=S._init;return d(p,y,v,A(S._payload),C)}if(Gi(S)||Li(S))return p=p.get(v)||null,c(y,p,S,C,null);ml(y,S)}return null}function g(p,y,v,S){for(var C=null,A=null,b=y,N=y=0,H=null;b!==null&&N<v.length;N++){b.index>N?(H=b,b=null):H=b.sibling;var j=f(p,b,v[N],S);if(j===null){b===null&&(b=H);break}t&&b&&j.alternate===null&&e(p,b),y=s(j,y,N),A===null?C=j:A.sibling=j,A=j,b=H}if(N===v.length)return n(p,b),de&&hr(p,N),C;if(b===null){for(;N<v.length;N++)b=h(p,v[N],S),b!==null&&(y=s(b,y,N),A===null?C=b:A.sibling=b,A=b);return de&&hr(p,N),C}for(b=r(p,b);N<v.length;N++)H=d(b,p,N,v[N],S),H!==null&&(t&&H.alternate!==null&&b.delete(H.key===null?N:H.key),y=s(H,y,N),A===null?C=H:A.sibling=H,A=H);return t&&b.forEach(function(V){return e(p,V)}),de&&hr(p,N),C}function w(p,y,v,S){var C=Li(v);if(typeof C!="function")throw Error(M(150));if(v=C.call(v),v==null)throw Error(M(151));for(var A=C=null,b=y,N=y=0,H=null,j=v.next();b!==null&&!j.done;N++,j=v.next()){b.index>N?(H=b,b=null):H=b.sibling;var V=f(p,b,j.value,S);if(V===null){b===null&&(b=H);break}t&&b&&V.alternate===null&&e(p,b),y=s(V,y,N),A===null?C=V:A.sibling=V,A=V,b=H}if(j.done)return n(p,b),de&&hr(p,N),C;if(b===null){for(;!j.done;N++,j=v.next())j=h(p,j.value,S),j!==null&&(y=s(j,y,N),A===null?C=j:A.sibling=j,A=j);return de&&hr(p,N),C}for(b=r(p,b);!j.done;N++,j=v.next())j=d(b,p,N,j.value,S),j!==null&&(t&&j.alternate!==null&&b.delete(j.key===null?N:j.key),y=s(j,y,N),A===null?C=j:A.sibling=j,A=j);return t&&b.forEach(function(W){return e(p,W)}),de&&hr(p,N),C}function x(p,y,v,S){if(typeof v=="object"&&v!==null&&v.type===zr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case il:e:{for(var C=v.key,A=y;A!==null;){if(A.key===C){if(C=v.type,C===zr){if(A.tag===7){n(p,A.sibling),y=i(A,v.props.children),y.return=p,p=y;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Nn&&md(C)===A.type){n(p,A.sibling),y=i(A,v.props),y.ref=Fi(p,A,v),y.return=p,p=y;break e}n(p,A);break}else e(p,A);A=A.sibling}v.type===zr?(y=xr(v.props.children,p.mode,S,v.key),y.return=p,p=y):(S=Jl(v.type,v.key,v.props,null,p.mode,S),S.ref=Fi(p,y,v),S.return=p,p=S)}return l(p);case _r:e:{for(A=v.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(p,y.sibling),y=i(y,v.children||[]),y.return=p,p=y;break e}else{n(p,y);break}else e(p,y);y=y.sibling}y=Qa(v,p.mode,S),y.return=p,p=y}return l(p);case Nn:return A=v._init,x(p,y,A(v._payload),S)}if(Gi(v))return g(p,y,v,S);if(Li(v))return w(p,y,v,S);ml(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(p,y.sibling),y=i(y,v),y.return=p,p=y):(n(p,y),y=Ya(v,p.mode,S),y.return=p,p=y),l(p)):n(p,y)}return x}var di=Eg(!0),Mg=Eg(!1),wo=lr(null),xo=null,qr=null,Mh=null;function Th(){Mh=qr=xo=null}function Nh(t){var e=wo.current;he(wo),t._currentValue=e}function Qu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ii(t,e){xo=t,Mh=qr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(lt=!0),t.firstContext=null)}function Pt(t){var e=t._currentValue;if(Mh!==t)if(t={context:t,memoizedValue:e,next:null},qr===null){if(xo===null)throw Error(M(308));qr=t,xo.dependencies={lanes:0,firstContext:t}}else qr=qr.next=t;return e}var mr=null;function Dh(t){mr===null?mr=[t]:mr.push(t)}function Tg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Dh(e)):(n.next=i.next,i.next=n),e.interleaved=n,Cn(t,r)}function Cn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dn=!1;function Oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ng(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Kn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Z&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Cn(t,n)}return i=r.interleaved,i===null?(e.next=e,Dh(r)):(e.next=i.next,i.next=e),r.interleaved=e,Cn(t,n)}function $l(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gh(t,n)}}function gd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ko(t,e,n,r){var i=t.updateQueue;Dn=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==l&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;l=0,c=u=a=null,o=s;do{var f=o.lane,d=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,w=o;switch(f=e,d=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){h=g.call(d,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,f=typeof g=="function"?g.call(d,h,f):g,f==null)break e;h=ye({},h,f);break e;case 2:Dn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=d,a=h):c=c.next=d,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=h),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ar|=l,t.lanes=l,t.memoizedState=h}}function yd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var Gs={},hn=lr(Gs),Es=lr(Gs),Ms=lr(Gs);function gr(t){if(t===Gs)throw Error(M(174));return t}function Ph(t,e){switch(oe(Ms,e),oe(Es,t),oe(hn,Gs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Du(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Du(e,t)}he(hn),oe(hn,e)}function pi(){he(hn),he(Es),he(Ms)}function Dg(t){gr(Ms.current);var e=gr(hn.current),n=Du(e,t.type);e!==n&&(oe(Es,t),oe(hn,n))}function Lh(t){Es.current===t&&(he(hn),he(Es))}var pe=lr(0);function So(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Va=[];function Rh(){for(var t=0;t<Va.length;t++)Va[t]._workInProgressVersionPrimary=null;Va.length=0}var Kl=En.ReactCurrentDispatcher,Ua=En.ReactCurrentBatchConfig,br=0,ge=null,Ae=null,Ne=null,Co=!1,is=!1,Ts=0,mx=0;function Ve(){throw Error(M(321))}function Ih(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ut(t[n],e[n]))return!1;return!0}function Bh(t,e,n,r,i,s){if(br=s,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kl.current=t===null||t.memoizedState===null?wx:xx,t=n(r,i),is){s=0;do{if(is=!1,Ts=0,25<=s)throw Error(M(301));s+=1,Ne=Ae=null,e.updateQueue=null,Kl.current=kx,t=n(r,i)}while(is)}if(Kl.current=bo,e=Ae!==null&&Ae.next!==null,br=0,Ne=Ae=ge=null,Co=!1,e)throw Error(M(300));return t}function jh(){var t=Ts!==0;return Ts=0,t}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?ge.memoizedState=Ne=t:Ne=Ne.next=t,Ne}function Lt(){if(Ae===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Ae.next;var e=Ne===null?ge.memoizedState:Ne.next;if(e!==null)Ne=e,Ae=t;else{if(t===null)throw Error(M(310));Ae=t,t={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Ne===null?ge.memoizedState=Ne=t:Ne=Ne.next=t}return Ne}function Ns(t,e){return typeof e=="function"?e(t):e}function $a(t){var e=Lt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=Ae,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var c=u.lane;if((br&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=h,l=r):a=a.next=h,ge.lanes|=c,Ar|=c}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,Ut(r,e.memoizedState)||(lt=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ge.lanes|=s,Ar|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ka(t){var e=Lt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);Ut(s,e.memoizedState)||(lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Og(){}function Pg(t,e){var n=ge,r=Lt(),i=e(),s=!Ut(r.memoizedState,i);if(s&&(r.memoizedState=i,lt=!0),r=r.queue,Fh(Ig.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ne!==null&&Ne.memoizedState.tag&1){if(n.flags|=2048,Ds(9,Rg.bind(null,n,r,i,e),void 0,null),Oe===null)throw Error(M(349));br&30||Lg(n,e,i)}return i}function Lg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rg(t,e,n,r){e.value=n,e.getSnapshot=r,Bg(e)&&jg(t)}function Ig(t,e,n){return n(function(){Bg(e)&&jg(t)})}function Bg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ut(t,n)}catch{return!0}}function jg(t){var e=Cn(t,1);e!==null&&Vt(e,t,1,-1)}function vd(t){var e=rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:t},e.queue=t,t=t.dispatch=vx.bind(null,ge,t),[e.memoizedState,t]}function Ds(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Fg(){return Lt().memoizedState}function Gl(t,e,n,r){var i=rn();ge.flags|=t,i.memoizedState=Ds(1|e,n,void 0,r===void 0?null:r)}function na(t,e,n,r){var i=Lt();r=r===void 0?null:r;var s=void 0;if(Ae!==null){var l=Ae.memoizedState;if(s=l.destroy,r!==null&&Ih(r,l.deps)){i.memoizedState=Ds(e,n,s,r);return}}ge.flags|=t,i.memoizedState=Ds(1|e,n,s,r)}function wd(t,e){return Gl(8390656,8,t,e)}function Fh(t,e){return na(2048,8,t,e)}function _g(t,e){return na(4,2,t,e)}function zg(t,e){return na(4,4,t,e)}function Hg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wg(t,e,n){return n=n!=null?n.concat([t]):null,na(4,4,Hg.bind(null,e,t),n)}function _h(){}function Vg(t,e){var n=Lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ug(t,e){var n=Lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $g(t,e,n){return br&21?(Ut(n,e)||(n=Qm(),ge.lanes|=n,Ar|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,lt=!0),t.memoizedState=n)}function gx(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var r=Ua.transition;Ua.transition={};try{t(!1),e()}finally{ie=n,Ua.transition=r}}function Kg(){return Lt().memoizedState}function yx(t,e,n){var r=qn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gg(t))qg(e,n);else if(n=Tg(t,e,n,r),n!==null){var i=Ze();Vt(n,t,r,i),Yg(n,e,r)}}function vx(t,e,n){var r=qn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gg(t))qg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,Ut(o,l)){var a=e.interleaved;a===null?(i.next=i,Dh(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Tg(t,e,i,r),n!==null&&(i=Ze(),Vt(n,t,r,i),Yg(n,e,r))}}function Gg(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function qg(t,e){is=Co=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Yg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gh(t,n)}}var bo={readContext:Pt,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},wx={readContext:Pt,useCallback:function(t,e){return rn().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:wd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gl(4194308,4,Hg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gl(4,2,t,e)},useMemo:function(t,e){var n=rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yx.bind(null,ge,t),[r.memoizedState,t]},useRef:function(t){var e=rn();return t={current:t},e.memoizedState=t},useState:vd,useDebugValue:_h,useDeferredValue:function(t){return rn().memoizedState=t},useTransition:function(){var t=vd(!1),e=t[0];return t=gx.bind(null,t[1]),rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ge,i=rn();if(de){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Oe===null)throw Error(M(349));br&30||Lg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,wd(Ig.bind(null,r,s,t),[t]),r.flags|=2048,Ds(9,Rg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=rn(),e=Oe.identifierPrefix;if(de){var n=yn,r=gn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ts++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xx={readContext:Pt,useCallback:Vg,useContext:Pt,useEffect:Fh,useImperativeHandle:Wg,useInsertionEffect:_g,useLayoutEffect:zg,useMemo:Ug,useReducer:$a,useRef:Fg,useState:function(){return $a(Ns)},useDebugValue:_h,useDeferredValue:function(t){var e=Lt();return $g(e,Ae.memoizedState,t)},useTransition:function(){var t=$a(Ns)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:Og,useSyncExternalStore:Pg,useId:Kg,unstable_isNewReconciler:!1},kx={readContext:Pt,useCallback:Vg,useContext:Pt,useEffect:Fh,useImperativeHandle:Wg,useInsertionEffect:_g,useLayoutEffect:zg,useMemo:Ug,useReducer:Ka,useRef:Fg,useState:function(){return Ka(Ns)},useDebugValue:_h,useDeferredValue:function(t){var e=Lt();return Ae===null?e.memoizedState=t:$g(e,Ae.memoizedState,t)},useTransition:function(){var t=Ka(Ns)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:Og,useSyncExternalStore:Pg,useId:Kg,unstable_isNewReconciler:!1};function Ft(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ju(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ra={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ze(),i=qn(t),s=vn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Kn(t,s,i),e!==null&&(Vt(e,t,i,r),$l(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ze(),i=qn(t),s=vn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Kn(t,s,i),e!==null&&(Vt(e,t,i,r),$l(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ze(),r=qn(t),i=vn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Kn(t,i,r),e!==null&&(Vt(e,t,r,n),$l(e,t,r))}};function xd(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!Ss(n,r)||!Ss(i,s):!0}function Qg(t,e,n){var r=!1,i=Xn,s=e.contextType;return typeof s=="object"&&s!==null?s=Pt(s):(i=at(e)?Sr:Ye.current,r=e.contextTypes,s=(r=r!=null)?hi(t,i):Xn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ra,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function kd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ra.enqueueReplaceState(e,e.state,null)}function Xu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Oh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Pt(s):(s=at(e)?Sr:Ye.current,i.context=hi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ju(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ra.enqueueReplaceState(i,i.state,null),ko(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function mi(t,e){try{var n="",r=e;do n+=Y1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ga(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sx=typeof WeakMap=="function"?WeakMap:Map;function Jg(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Eo||(Eo=!0,uc=r),Zu(t,e)},n}function Xg(t,e,n){n=vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Zu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Zu(t,e),typeof r!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Sd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Sx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Bx.bind(null,t,e,n),e.then(t,t))}function Cd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,Kn(n,e,1))),n.lanes|=1),t)}var Cx=En.ReactCurrentOwner,lt=!1;function Xe(t,e,n,r){e.child=t===null?Mg(e,null,n,r):di(e,t.child,n,r)}function Ad(t,e,n,r,i){n=n.render;var s=e.ref;return ii(e,i),r=Bh(t,e,n,r,s,i),n=jh(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,bn(t,e,i)):(de&&n&&bh(e),e.flags|=1,Xe(t,e,r,i),e.child)}function Ed(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Gh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Zg(t,e,s,r,i)):(t=Jl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ss,n(l,r)&&t.ref===e.ref)return bn(t,e,i)}return e.flags|=1,t=Yn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Zg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ss(s,r)&&t.ref===e.ref)if(lt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(lt=!0);else return e.lanes=t.lanes,bn(t,e,i)}return ec(t,e,n,r,i)}function e0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Qr,dt),dt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(Qr,dt),dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,oe(Qr,dt),dt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,oe(Qr,dt),dt|=r;return Xe(t,e,i,n),e.child}function t0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ec(t,e,n,r,i){var s=at(n)?Sr:Ye.current;return s=hi(e,s),ii(e,i),n=Bh(t,e,n,r,s,i),r=jh(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,bn(t,e,i)):(de&&r&&bh(e),e.flags|=1,Xe(t,e,n,i),e.child)}function Md(t,e,n,r,i){if(at(n)){var s=!0;go(e)}else s=!1;if(ii(e,i),e.stateNode===null)ql(t,e),Qg(e,n,r),Xu(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Pt(u):(u=at(n)?Sr:Ye.current,u=hi(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&kd(e,l,r,u),Dn=!1;var f=e.memoizedState;l.state=f,ko(e,r,l,i),a=e.memoizedState,o!==r||f!==a||ot.current||Dn?(typeof c=="function"&&(Ju(e,n,c,r),a=e.memoizedState),(o=Dn||xd(e,n,o,r,f,a,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Ng(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Ft(e.type,o),l.props=u,h=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Pt(a):(a=at(n)?Sr:Ye.current,a=hi(e,a));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==a)&&kd(e,l,r,a),Dn=!1,f=e.memoizedState,l.state=f,ko(e,r,l,i);var g=e.memoizedState;o!==h||f!==g||ot.current||Dn?(typeof d=="function"&&(Ju(e,n,d,r),g=e.memoizedState),(u=Dn||xd(e,n,u,r,f,g,a)||!1)?(c||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,g,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,g,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),l.props=r,l.state=g,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return tc(t,e,n,r,s,i)}function tc(t,e,n,r,i,s){t0(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&fd(e,n,!1),bn(t,e,s);r=e.stateNode,Cx.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=di(e,t.child,null,s),e.child=di(e,null,o,s)):Xe(t,e,o,s),e.memoizedState=r.state,i&&fd(e,n,!0),e.child}function n0(t){var e=t.stateNode;e.pendingContext?hd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hd(t,e.context,!1),Ph(t,e.containerInfo)}function Td(t,e,n,r,i){return fi(),Eh(i),e.flags|=256,Xe(t,e,n,r),e.child}var nc={dehydrated:null,treeContext:null,retryLane:0};function rc(t){return{baseLanes:t,cachePool:null,transitions:null}}function r0(t,e,n){var r=e.pendingProps,i=pe.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),oe(pe,i&1),t===null)return Yu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=la(l,r,0,null),t=xr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rc(n),e.memoizedState=nc,t):zh(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return bx(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Yn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Yn(o,s):(s=xr(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?rc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=nc,r}return s=t.child,t=s.sibling,r=Yn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zh(t,e){return e=la({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gl(t,e,n,r){return r!==null&&Eh(r),di(e,t.child,null,n),t=zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bx(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=Ga(Error(M(422))),gl(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=la({mode:"visible",children:r.children},i,0,null),s=xr(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&di(e,t.child,null,l),e.child.memoizedState=rc(l),e.memoizedState=nc,s);if(!(e.mode&1))return gl(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(M(419)),r=Ga(s,r,void 0),gl(t,e,l,r)}if(o=(l&t.childLanes)!==0,lt||o){if(r=Oe,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Cn(t,i),Vt(r,t,i,-1))}return Kh(),r=Ga(Error(M(421))),gl(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,gt=$n(i.nextSibling),yt=e,de=!0,zt=null,t!==null&&(bt[At++]=gn,bt[At++]=yn,bt[At++]=Cr,gn=t.id,yn=t.overflow,Cr=e),e=zh(e,r.children),e.flags|=4096,e)}function Nd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qu(t.return,e,n)}function qa(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function i0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Xe(t,e,r.children,n),r=pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nd(t,n,e);else if(t.tag===19)Nd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(oe(pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&So(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qa(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&So(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qa(e,!0,n,null,s);break;case"together":qa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ql(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ar|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Yn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ax(t,e,n){switch(e.tag){case 3:n0(e),fi();break;case 5:Dg(e);break;case 1:at(e.type)&&go(e);break;case 4:Ph(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;oe(wo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(oe(pe,pe.current&1),e.flags|=128,null):n&e.child.childLanes?r0(t,e,n):(oe(pe,pe.current&1),t=bn(t,e,n),t!==null?t.sibling:null);oe(pe,pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return i0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),oe(pe,pe.current),r)break;return null;case 22:case 23:return e.lanes=0,e0(t,e,n)}return bn(t,e,n)}var s0,ic,l0,o0;s0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ic=function(){};l0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gr(hn.current);var s=null;switch(n){case"input":i=Eu(t,i),r=Eu(t,r),s=[];break;case"select":i=ye({},i,{value:void 0}),r=ye({},r,{value:void 0}),s=[];break;case"textarea":i=Nu(t,i),r=Nu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=po)}Ou(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ms.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ms.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&ue("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};o0=function(t,e,n,r){n!==r&&(e.flags|=4)};function _i(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ue(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ex(t,e,n){var r=e.pendingProps;switch(Ah(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(e),null;case 1:return at(e.type)&&mo(),Ue(e),null;case 3:return r=e.stateNode,pi(),he(ot),he(Ye),Rh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zt!==null&&(fc(zt),zt=null))),ic(t,e),Ue(e),null;case 5:Lh(e);var i=gr(Ms.current);if(n=e.type,t!==null&&e.stateNode!=null)l0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ue(e),null}if(t=gr(hn.current),pl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[sn]=e,r[As]=s,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(i=0;i<Yi.length;i++)ue(Yi[i],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":Ff(r,s),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ue("invalid",r);break;case"textarea":zf(r,s),ue("invalid",r)}Ou(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&dl(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&dl(r.textContent,o,t),i=["children",""+o]):ms.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ue("scroll",r)}switch(n){case"input":sl(r),_f(r,s,!0);break;case"textarea":sl(r),Hf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=po)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Im(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[sn]=e,t[As]=r,s0(t,e,!1,!1),e.stateNode=t;e:{switch(l=Pu(n,r),n){case"dialog":ue("cancel",t),ue("close",t),i=r;break;case"iframe":case"object":case"embed":ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yi.length;i++)ue(Yi[i],t);i=r;break;case"source":ue("error",t),i=r;break;case"img":case"image":case"link":ue("error",t),ue("load",t),i=r;break;case"details":ue("toggle",t),i=r;break;case"input":Ff(t,r),i=Eu(t,r),ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ye({},r,{value:void 0}),ue("invalid",t);break;case"textarea":zf(t,r),i=Nu(t,r),ue("invalid",t);break;default:i=r}Ou(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?Fm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Bm(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&gs(t,a):typeof a=="number"&&gs(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ms.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ue("scroll",t):a!=null&&ch(t,s,a,l))}switch(n){case"input":sl(t),_f(t,r,!1);break;case"textarea":sl(t),Hf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Jn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ei(t,!!r.multiple,s,!1):r.defaultValue!=null&&ei(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=po)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ue(e),null;case 6:if(t&&e.stateNode!=null)o0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=gr(Ms.current),gr(hn.current),pl(e)){if(r=e.stateNode,n=e.memoizedProps,r[sn]=e,(s=r.nodeValue!==n)&&(t=yt,t!==null))switch(t.tag){case 3:dl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sn]=e,e.stateNode=r}return Ue(e),null;case 13:if(he(pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&gt!==null&&e.mode&1&&!(e.flags&128))Ag(),fi(),e.flags|=98560,s=!1;else if(s=pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[sn]=e}else fi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ue(e),s=!1}else zt!==null&&(fc(zt),zt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pe.current&1?Ee===0&&(Ee=3):Kh())),e.updateQueue!==null&&(e.flags|=4),Ue(e),null);case 4:return pi(),ic(t,e),t===null&&Cs(e.stateNode.containerInfo),Ue(e),null;case 10:return Nh(e.type._context),Ue(e),null;case 17:return at(e.type)&&mo(),Ue(e),null;case 19:if(he(pe),s=e.memoizedState,s===null)return Ue(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)_i(s,!1);else{if(Ee!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=So(t),l!==null){for(e.flags|=128,_i(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return oe(pe,pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&ke()>gi&&(e.flags|=128,r=!0,_i(s,!1),e.lanes=4194304)}else{if(!r)if(t=So(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_i(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!de)return Ue(e),null}else 2*ke()-s.renderingStartTime>gi&&n!==1073741824&&(e.flags|=128,r=!0,_i(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ke(),e.sibling=null,n=pe.current,oe(pe,r?n&1|2:n&1),e):(Ue(e),null);case 22:case 23:return $h(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dt&1073741824&&(Ue(e),e.subtreeFlags&6&&(e.flags|=8192)):Ue(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Mx(t,e){switch(Ah(e),e.tag){case 1:return at(e.type)&&mo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pi(),he(ot),he(Ye),Rh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lh(e),null;case 13:if(he(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));fi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(pe),null;case 4:return pi(),null;case 10:return Nh(e.type._context),null;case 22:case 23:return $h(),null;case 24:return null;default:return null}}var yl=!1,Ke=!1,Tx=typeof WeakSet=="function"?WeakSet:Set,B=null;function Yr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(t,e,r)}else n.current=null}function sc(t,e,n){try{n()}catch(r){ve(t,e,r)}}var Dd=!1;function Nx(t,e){if(Wu=co,t=fg(),Ch(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(o=l+i),h!==s||r!==0&&h.nodeType!==3||(a=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++c===r&&(a=l),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vu={focusedElem:t,selectionRange:n},co=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,x=g.memoizedState,p=e.stateNode,y=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ft(e.type,w),x);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(S){ve(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return g=Dd,Dd=!1,g}function ss(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&sc(e,n,s)}i=i.next}while(i!==r)}}function ia(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function a0(t){var e=t.alternate;e!==null&&(t.alternate=null,a0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sn],delete e[As],delete e[Ku],delete e[hx],delete e[fx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function u0(t){return t.tag===5||t.tag===3||t.tag===4}function Od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||u0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function oc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=po));else if(r!==4&&(t=t.child,t!==null))for(oc(t,e,n),t=t.sibling;t!==null;)oc(t,e,n),t=t.sibling}function ac(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ac(t,e,n),t=t.sibling;t!==null;)ac(t,e,n),t=t.sibling}var Pe=null,_t=!1;function Tn(t,e,n){for(n=n.child;n!==null;)c0(t,e,n),n=n.sibling}function c0(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Qo,n)}catch{}switch(n.tag){case 5:Ke||Yr(n,e);case 6:var r=Pe,i=_t;Pe=null,Tn(t,e,n),Pe=r,_t=i,Pe!==null&&(_t?(t=Pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(_t?(t=Pe,n=n.stateNode,t.nodeType===8?Ha(t.parentNode,n):t.nodeType===1&&Ha(t,n),xs(t)):Ha(Pe,n.stateNode));break;case 4:r=Pe,i=_t,Pe=n.stateNode.containerInfo,_t=!0,Tn(t,e,n),Pe=r,_t=i;break;case 0:case 11:case 14:case 15:if(!Ke&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&sc(n,e,l),i=i.next}while(i!==r)}Tn(t,e,n);break;case 1:if(!Ke&&(Yr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ve(n,e,o)}Tn(t,e,n);break;case 21:Tn(t,e,n);break;case 22:n.mode&1?(Ke=(r=Ke)||n.memoizedState!==null,Tn(t,e,n),Ke=r):Tn(t,e,n);break;default:Tn(t,e,n)}}function Pd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Tx),e.forEach(function(r){var i=Fx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Pe=o.stateNode,_t=!1;break e;case 3:Pe=o.stateNode.containerInfo,_t=!0;break e;case 4:Pe=o.stateNode.containerInfo,_t=!0;break e}o=o.return}if(Pe===null)throw Error(M(160));c0(s,l,i),Pe=null,_t=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ve(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)h0(e,t),e=e.sibling}function h0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bt(e,t),Jt(t),r&4){try{ss(3,t,t.return),ia(3,t)}catch(w){ve(t,t.return,w)}try{ss(5,t,t.return)}catch(w){ve(t,t.return,w)}}break;case 1:Bt(e,t),Jt(t),r&512&&n!==null&&Yr(n,n.return);break;case 5:if(Bt(e,t),Jt(t),r&512&&n!==null&&Yr(n,n.return),t.flags&32){var i=t.stateNode;try{gs(i,"")}catch(w){ve(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Lm(i,s),Pu(o,l);var u=Pu(o,s);for(l=0;l<a.length;l+=2){var c=a[l],h=a[l+1];c==="style"?Fm(i,h):c==="dangerouslySetInnerHTML"?Bm(i,h):c==="children"?gs(i,h):ch(i,c,h,u)}switch(o){case"input":Mu(i,s);break;case"textarea":Rm(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?ei(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?ei(i,!!s.multiple,s.defaultValue,!0):ei(i,!!s.multiple,s.multiple?[]:"",!1))}i[As]=s}catch(w){ve(t,t.return,w)}}break;case 6:if(Bt(e,t),Jt(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){ve(t,t.return,w)}}break;case 3:if(Bt(e,t),Jt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xs(e.containerInfo)}catch(w){ve(t,t.return,w)}break;case 4:Bt(e,t),Jt(t);break;case 13:Bt(e,t),Jt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Vh=ke())),r&4&&Pd(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ke=(u=Ke)||c,Bt(e,t),Ke=u):Bt(e,t),Jt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(B=t,c=t.child;c!==null;){for(h=B=c;B!==null;){switch(f=B,d=f.child,f.tag){case 0:case 11:case 14:case 15:ss(4,f,f.return);break;case 1:Yr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(w){ve(r,n,w)}}break;case 5:Yr(f,f.return);break;case 22:if(f.memoizedState!==null){Rd(h);continue}}d!==null?(d.return=f,B=d):Rd(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=jm("display",l))}catch(w){ve(t,t.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){ve(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Bt(e,t),Jt(t),r&4&&Pd(t);break;case 21:break;default:Bt(e,t),Jt(t)}}function Jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(u0(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(gs(i,""),r.flags&=-33);var s=Od(t);ac(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=Od(t);oc(t,o,l);break;default:throw Error(M(161))}}catch(a){ve(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dx(t,e,n){B=t,f0(t)}function f0(t,e,n){for(var r=(t.mode&1)!==0;B!==null;){var i=B,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||yl;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Ke;o=yl;var u=Ke;if(yl=l,(Ke=a)&&!u)for(B=i;B!==null;)l=B,a=l.child,l.tag===22&&l.memoizedState!==null?Id(i):a!==null?(a.return=l,B=a):Id(i);for(;s!==null;)B=s,f0(s),s=s.sibling;B=i,yl=o,Ke=u}Ld(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,B=s):Ld(t)}}function Ld(t){for(;B!==null;){var e=B;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ke||ia(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ke)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ft(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yd(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&xs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ke||e.flags&512&&lc(e)}catch(f){ve(e,e.return,f)}}if(e===t){B=null;break}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}}function Rd(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var n=e.sibling;if(n!==null){n.return=e.return,B=n;break}B=e.return}}function Id(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ia(4,e)}catch(a){ve(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ve(e,i,a)}}var s=e.return;try{lc(e)}catch(a){ve(e,s,a)}break;case 5:var l=e.return;try{lc(e)}catch(a){ve(e,l,a)}}}catch(a){ve(e,e.return,a)}if(e===t){B=null;break}var o=e.sibling;if(o!==null){o.return=e.return,B=o;break}B=e.return}}var Ox=Math.ceil,Ao=En.ReactCurrentDispatcher,Hh=En.ReactCurrentOwner,Tt=En.ReactCurrentBatchConfig,Z=0,Oe=null,be=null,_e=0,dt=0,Qr=lr(0),Ee=0,Os=null,Ar=0,sa=0,Wh=0,ls=null,it=null,Vh=0,gi=1/0,dn=null,Eo=!1,uc=null,Gn=null,vl=!1,Fn=null,Mo=0,os=0,cc=null,Yl=-1,Ql=0;function Ze(){return Z&6?ke():Yl!==-1?Yl:Yl=ke()}function qn(t){return t.mode&1?Z&2&&_e!==0?_e&-_e:px.transition!==null?(Ql===0&&(Ql=Qm()),Ql):(t=ie,t!==0||(t=window.event,t=t===void 0?16:rg(t.type)),t):1}function Vt(t,e,n,r){if(50<os)throw os=0,cc=null,Error(M(185));Us(t,n,r),(!(Z&2)||t!==Oe)&&(t===Oe&&(!(Z&2)&&(sa|=n),Ee===4&&In(t,_e)),ut(t,r),n===1&&Z===0&&!(e.mode&1)&&(gi=ke()+500,ta&&or()))}function ut(t,e){var n=t.callbackNode;pw(t,e);var r=uo(t,t===Oe?_e:0);if(r===0)n!==null&&Uf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Uf(n),e===1)t.tag===0?dx(Bd.bind(null,t)):Sg(Bd.bind(null,t)),ux(function(){!(Z&6)&&or()}),n=null;else{switch(Jm(r)){case 1:n=mh;break;case 4:n=qm;break;case 16:n=ao;break;case 536870912:n=Ym;break;default:n=ao}n=x0(n,d0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function d0(t,e){if(Yl=-1,Ql=0,Z&6)throw Error(M(327));var n=t.callbackNode;if(si()&&t.callbackNode!==n)return null;var r=uo(t,t===Oe?_e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=To(t,r);else{e=r;var i=Z;Z|=2;var s=m0();(Oe!==t||_e!==e)&&(dn=null,gi=ke()+500,wr(t,e));do try{Rx();break}catch(o){p0(t,o)}while(!0);Th(),Ao.current=s,Z=i,be!==null?e=0:(Oe=null,_e=0,e=Ee)}if(e!==0){if(e===2&&(i=ju(t),i!==0&&(r=i,e=hc(t,i))),e===1)throw n=Os,wr(t,0),In(t,r),ut(t,ke()),n;if(e===6)In(t,r);else{if(i=t.current.alternate,!(r&30)&&!Px(i)&&(e=To(t,r),e===2&&(s=ju(t),s!==0&&(r=s,e=hc(t,s))),e===1))throw n=Os,wr(t,0),In(t,r),ut(t,ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:fr(t,it,dn);break;case 3:if(In(t,r),(r&130023424)===r&&(e=Vh+500-ke(),10<e)){if(uo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ze(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$u(fr.bind(null,t,it,dn),e);break}fr(t,it,dn);break;case 4:if(In(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Wt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ox(r/1960))-r,10<r){t.timeoutHandle=$u(fr.bind(null,t,it,dn),r);break}fr(t,it,dn);break;case 5:fr(t,it,dn);break;default:throw Error(M(329))}}}return ut(t,ke()),t.callbackNode===n?d0.bind(null,t):null}function hc(t,e){var n=ls;return t.current.memoizedState.isDehydrated&&(wr(t,e).flags|=256),t=To(t,e),t!==2&&(e=it,it=n,e!==null&&fc(e)),t}function fc(t){it===null?it=t:it.push.apply(it,t)}function Px(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ut(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function In(t,e){for(e&=~Wh,e&=~sa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),r=1<<n;t[n]=-1,e&=~r}}function Bd(t){if(Z&6)throw Error(M(327));si();var e=uo(t,0);if(!(e&1))return ut(t,ke()),null;var n=To(t,e);if(t.tag!==0&&n===2){var r=ju(t);r!==0&&(e=r,n=hc(t,r))}if(n===1)throw n=Os,wr(t,0),In(t,e),ut(t,ke()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fr(t,it,dn),ut(t,ke()),null}function Uh(t,e){var n=Z;Z|=1;try{return t(e)}finally{Z=n,Z===0&&(gi=ke()+500,ta&&or())}}function Er(t){Fn!==null&&Fn.tag===0&&!(Z&6)&&si();var e=Z;Z|=1;var n=Tt.transition,r=ie;try{if(Tt.transition=null,ie=1,t)return t()}finally{ie=r,Tt.transition=n,Z=e,!(Z&6)&&or()}}function $h(){dt=Qr.current,he(Qr)}function wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ax(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(Ah(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mo();break;case 3:pi(),he(ot),he(Ye),Rh();break;case 5:Lh(r);break;case 4:pi();break;case 13:he(pe);break;case 19:he(pe);break;case 10:Nh(r.type._context);break;case 22:case 23:$h()}n=n.return}if(Oe=t,be=t=Yn(t.current,null),_e=dt=e,Ee=0,Os=null,Wh=sa=Ar=0,it=ls=null,mr!==null){for(e=0;e<mr.length;e++)if(n=mr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}mr=null}return t}function p0(t,e){do{var n=be;try{if(Th(),Kl.current=bo,Co){for(var r=ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Co=!1}if(br=0,Ne=Ae=ge=null,is=!1,Ts=0,Hh.current=null,n===null||n.return===null){Ee=1,Os=e,be=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=_e,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=Cd(l);if(d!==null){d.flags&=-257,bd(d,l,o,s,e),d.mode&1&&Sd(s,u,e),e=d,a=u;var g=e.updateQueue;if(g===null){var w=new Set;w.add(a),e.updateQueue=w}else g.add(a);break e}else{if(!(e&1)){Sd(s,u,e),Kh();break e}a=Error(M(426))}}else if(de&&o.mode&1){var x=Cd(l);if(x!==null){!(x.flags&65536)&&(x.flags|=256),bd(x,l,o,s,e),Eh(mi(a,o));break e}}s=a=mi(a,o),Ee!==4&&(Ee=2),ls===null?ls=[s]:ls.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Jg(s,a,e);gd(s,p);break e;case 1:o=a;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Gn===null||!Gn.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=Xg(s,o,e);gd(s,S);break e}}s=s.return}while(s!==null)}y0(n)}catch(C){e=C,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function m0(){var t=Ao.current;return Ao.current=bo,t===null?bo:t}function Kh(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Oe===null||!(Ar&268435455)&&!(sa&268435455)||In(Oe,_e)}function To(t,e){var n=Z;Z|=2;var r=m0();(Oe!==t||_e!==e)&&(dn=null,wr(t,e));do try{Lx();break}catch(i){p0(t,i)}while(!0);if(Th(),Z=n,Ao.current=r,be!==null)throw Error(M(261));return Oe=null,_e=0,Ee}function Lx(){for(;be!==null;)g0(be)}function Rx(){for(;be!==null&&!sw();)g0(be)}function g0(t){var e=w0(t.alternate,t,dt);t.memoizedProps=t.pendingProps,e===null?y0(t):be=e,Hh.current=null}function y0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Mx(n,e),n!==null){n.flags&=32767,be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,be=null;return}}else if(n=Ex(n,e,dt),n!==null){be=n;return}if(e=e.sibling,e!==null){be=e;return}be=e=t}while(e!==null);Ee===0&&(Ee=5)}function fr(t,e,n){var r=ie,i=Tt.transition;try{Tt.transition=null,ie=1,Ix(t,e,n,r)}finally{Tt.transition=i,ie=r}return null}function Ix(t,e,n,r){do si();while(Fn!==null);if(Z&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(mw(t,s),t===Oe&&(be=Oe=null,_e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vl||(vl=!0,x0(ao,function(){return si(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tt.transition,Tt.transition=null;var l=ie;ie=1;var o=Z;Z|=4,Hh.current=null,Nx(t,n),h0(n,t),tx(Vu),co=!!Wu,Vu=Wu=null,t.current=n,Dx(n),lw(),Z=o,ie=l,Tt.transition=s}else t.current=n;if(vl&&(vl=!1,Fn=t,Mo=i),s=t.pendingLanes,s===0&&(Gn=null),uw(n.stateNode),ut(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Eo)throw Eo=!1,t=uc,uc=null,t;return Mo&1&&t.tag!==0&&si(),s=t.pendingLanes,s&1?t===cc?os++:(os=0,cc=t):os=0,or(),null}function si(){if(Fn!==null){var t=Jm(Mo),e=Tt.transition,n=ie;try{if(Tt.transition=null,ie=16>t?16:t,Fn===null)var r=!1;else{if(t=Fn,Fn=null,Mo=0,Z&6)throw Error(M(331));var i=Z;for(Z|=4,B=t.current;B!==null;){var s=B,l=s.child;if(B.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(B=u;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:ss(8,c,s)}var h=c.child;if(h!==null)h.return=c,B=h;else for(;B!==null;){c=B;var f=c.sibling,d=c.return;if(a0(c),c===u){B=null;break}if(f!==null){f.return=d,B=f;break}B=d}}}var g=s.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}B=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,B=l;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ss(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,B=p;break e}B=s.return}}var y=t.current;for(B=y;B!==null;){l=B;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,B=v;else e:for(l=y;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ia(9,o)}}catch(C){ve(o,o.return,C)}if(o===l){B=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,B=S;break e}B=o.return}}if(Z=i,or(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Qo,t)}catch{}r=!0}return r}finally{ie=n,Tt.transition=e}}return!1}function jd(t,e,n){e=mi(n,e),e=Jg(t,e,1),t=Kn(t,e,1),e=Ze(),t!==null&&(Us(t,1,e),ut(t,e))}function ve(t,e,n){if(t.tag===3)jd(t,t,n);else for(;e!==null;){if(e.tag===3){jd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gn===null||!Gn.has(r))){t=mi(n,t),t=Xg(e,t,1),e=Kn(e,t,1),t=Ze(),e!==null&&(Us(e,1,t),ut(e,t));break}}e=e.return}}function Bx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ze(),t.pingedLanes|=t.suspendedLanes&n,Oe===t&&(_e&n)===n&&(Ee===4||Ee===3&&(_e&130023424)===_e&&500>ke()-Vh?wr(t,0):Wh|=n),ut(t,e)}function v0(t,e){e===0&&(t.mode&1?(e=al,al<<=1,!(al&130023424)&&(al=4194304)):e=1);var n=Ze();t=Cn(t,e),t!==null&&(Us(t,e,n),ut(t,n))}function jx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),v0(t,n)}function Fx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),v0(t,n)}var w0;w0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ot.current)lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return lt=!1,Ax(t,e,n);lt=!!(t.flags&131072)}else lt=!1,de&&e.flags&1048576&&Cg(e,vo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ql(t,e),t=e.pendingProps;var i=hi(e,Ye.current);ii(e,n),i=Bh(null,e,r,t,i,n);var s=jh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,at(r)?(s=!0,go(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Oh(e),i.updater=ra,e.stateNode=i,i._reactInternals=e,Xu(e,r,t,n),e=tc(null,e,r,!0,s,n)):(e.tag=0,de&&s&&bh(e),Xe(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ql(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zx(r),t=Ft(r,t),i){case 0:e=ec(null,e,r,t,n);break e;case 1:e=Md(null,e,r,t,n);break e;case 11:e=Ad(null,e,r,t,n);break e;case 14:e=Ed(null,e,r,Ft(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),ec(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Md(t,e,r,i,n);case 3:e:{if(n0(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Ng(t,e),ko(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=mi(Error(M(423)),e),e=Td(t,e,r,n,i);break e}else if(r!==i){i=mi(Error(M(424)),e),e=Td(t,e,r,n,i);break e}else for(gt=$n(e.stateNode.containerInfo.firstChild),yt=e,de=!0,zt=null,n=Mg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fi(),r===i){e=bn(t,e,n);break e}Xe(t,e,r,n)}e=e.child}return e;case 5:return Dg(e),t===null&&Yu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Uu(r,i)?l=null:s!==null&&Uu(r,s)&&(e.flags|=32),t0(t,e),Xe(t,e,l,n),e.child;case 6:return t===null&&Yu(e),null;case 13:return r0(t,e,n);case 4:return Ph(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=di(e,null,r,n):Xe(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),Ad(t,e,r,i,n);case 7:return Xe(t,e,e.pendingProps,n),e.child;case 8:return Xe(t,e,e.pendingProps.children,n),e.child;case 12:return Xe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,oe(wo,r._currentValue),r._currentValue=l,s!==null)if(Ut(s.value,l)){if(s.children===i.children&&!ot.current){e=bn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=vn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Qu(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Qu(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Xe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ii(e,n),i=Pt(i),r=r(i),e.flags|=1,Xe(t,e,r,n),e.child;case 14:return r=e.type,i=Ft(r,e.pendingProps),i=Ft(r.type,i),Ed(t,e,r,i,n);case 15:return Zg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ft(r,i),ql(t,e),e.tag=1,at(r)?(t=!0,go(e)):t=!1,ii(e,n),Qg(e,r,i),Xu(e,r,i,n),tc(null,e,r,!0,t,n);case 19:return i0(t,e,n);case 22:return e0(t,e,n)}throw Error(M(156,e.tag))};function x0(t,e){return Gm(t,e)}function _x(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(t,e,n,r){return new _x(t,e,n,r)}function Gh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zx(t){if(typeof t=="function")return Gh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fh)return 11;if(t===dh)return 14}return 2}function Yn(t,e){var n=t.alternate;return n===null?(n=Mt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jl(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")Gh(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case zr:return xr(n.children,i,s,e);case hh:l=8,i|=8;break;case Su:return t=Mt(12,n,e,i|2),t.elementType=Su,t.lanes=s,t;case Cu:return t=Mt(13,n,e,i),t.elementType=Cu,t.lanes=s,t;case bu:return t=Mt(19,n,e,i),t.elementType=bu,t.lanes=s,t;case Dm:return la(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tm:l=10;break e;case Nm:l=9;break e;case fh:l=11;break e;case dh:l=14;break e;case Nn:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Mt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function xr(t,e,n,r){return t=Mt(7,t,r,e),t.lanes=n,t}function la(t,e,n,r){return t=Mt(22,t,r,e),t.elementType=Dm,t.lanes=n,t.stateNode={isHidden:!1},t}function Ya(t,e,n){return t=Mt(6,t,null,e),t.lanes=n,t}function Qa(t,e,n){return e=Mt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Da(0),this.expirationTimes=Da(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Da(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qh(t,e,n,r,i,s,l,o,a){return t=new Hx(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oh(s),t}function Wx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_r,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function k0(t){if(!t)return Xn;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(at(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(at(n))return kg(t,n,e)}return e}function S0(t,e,n,r,i,s,l,o,a){return t=qh(n,r,!0,t,i,s,l,o,a),t.context=k0(null),n=t.current,r=Ze(),i=qn(n),s=vn(r,i),s.callback=e??null,Kn(n,s,i),t.current.lanes=i,Us(t,i,r),ut(t,r),t}function oa(t,e,n,r){var i=e.current,s=Ze(),l=qn(i);return n=k0(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Kn(i,e,l),t!==null&&(Vt(t,i,l,s),$l(t,i,l)),l}function No(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yh(t,e){Fd(t,e),(t=t.alternate)&&Fd(t,e)}function Vx(){return null}var C0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qh(t){this._internalRoot=t}aa.prototype.render=Qh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));oa(t,e,null,null)};aa.prototype.unmount=Qh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Er(function(){oa(null,t,null,null)}),e[Sn]=null}};function aa(t){this._internalRoot=t}aa.prototype.unstable_scheduleHydration=function(t){if(t){var e=eg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rn.length&&e!==0&&e<Rn[n].priority;n++);Rn.splice(n,0,t),n===0&&ng(t)}};function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ua(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _d(){}function Ux(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=No(l);s.call(u)}}var l=S0(e,r,t,0,null,!1,!1,"",_d);return t._reactRootContainer=l,t[Sn]=l.current,Cs(t.nodeType===8?t.parentNode:t),Er(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=No(a);o.call(u)}}var a=qh(t,0,!1,null,null,!1,!1,"",_d);return t._reactRootContainer=a,t[Sn]=a.current,Cs(t.nodeType===8?t.parentNode:t),Er(function(){oa(e,a,n,r)}),a}function ca(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=No(l);o.call(a)}}oa(e,l,t,i)}else l=Ux(n,e,t,i,r);return No(l)}Xm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qi(e.pendingLanes);n!==0&&(gh(e,n|1),ut(e,ke()),!(Z&6)&&(gi=ke()+500,or()))}break;case 13:Er(function(){var r=Cn(t,1);if(r!==null){var i=Ze();Vt(r,t,1,i)}}),Yh(t,1)}};yh=function(t){if(t.tag===13){var e=Cn(t,134217728);if(e!==null){var n=Ze();Vt(e,t,134217728,n)}Yh(t,134217728)}};Zm=function(t){if(t.tag===13){var e=qn(t),n=Cn(t,e);if(n!==null){var r=Ze();Vt(n,t,e,r)}Yh(t,e)}};eg=function(){return ie};tg=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};Ru=function(t,e,n){switch(e){case"input":if(Mu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ea(r);if(!i)throw Error(M(90));Pm(r),Mu(r,i)}}}break;case"textarea":Rm(t,n);break;case"select":e=n.value,e!=null&&ei(t,!!n.multiple,e,!1)}};Hm=Uh;Wm=Er;var $x={usingClientEntryPoint:!1,Events:[Ks,Ur,ea,_m,zm,Uh]},zi={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kx={bundleType:zi.bundleType,version:zi.version,rendererPackageName:zi.rendererPackageName,rendererConfig:zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:En.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$m(t),t===null?null:t.stateNode},findFiberByHostInstance:zi.findFiberByHostInstance||Vx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{Qo=wl.inject(Kx),cn=wl}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$x;kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(e))throw Error(M(200));return Wx(t,e,null,n)};kt.createRoot=function(t,e){if(!Jh(t))throw Error(M(299));var n=!1,r="",i=C0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=qh(t,1,!1,null,null,n,!1,r,i),t[Sn]=e.current,Cs(t.nodeType===8?t.parentNode:t),new Qh(e)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=$m(e),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return Er(t)};kt.hydrate=function(t,e,n){if(!ua(e))throw Error(M(200));return ca(null,t,e,!0,n)};kt.hydrateRoot=function(t,e,n){if(!Jh(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=C0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=S0(e,null,t,1,n??null,i,!1,s,l),t[Sn]=e.current,Cs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new aa(e)};kt.render=function(t,e,n){if(!ua(e))throw Error(M(200));return ca(null,t,e,!1,n)};kt.unmountComponentAtNode=function(t){if(!ua(t))throw Error(M(40));return t._reactRootContainer?(Er(function(){ca(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1};kt.unstable_batchedUpdates=Uh;kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ua(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return ca(t,e,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function b0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b0)}catch(t){console.error(t)}}b0(),bm.exports=kt;var Gx=bm.exports,zd=Gx;xu.createRoot=zd.createRoot,xu.hydrateRoot=zd.hydrateRoot;let dc=[],A0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?A0:dc).push(n=n+t[e])})();function qx(t){if(t<768)return!1;for(let e=0,n=dc.length;;){let r=e+n>>1;if(t<dc[r])n=r;else if(t>=A0[r])e=r+1;else return!0;if(e==n)return!1}}function Hd(t){return t>=127462&&t<=127487}const Wd=8205;function Yx(t,e,n=!0,r=!0){return(n?E0:Qx)(t,e,r)}function E0(t,e,n){if(e==t.length)return e;e&&M0(t.charCodeAt(e))&&T0(t.charCodeAt(e-1))&&e--;let r=Ja(t,e);for(e+=Vd(r);e<t.length;){let i=Ja(t,e);if(r==Wd||i==Wd||n&&qx(i))e+=Vd(i),r=i;else if(Hd(i)){let s=0,l=e-2;for(;l>=0&&Hd(Ja(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function Qx(t,e,n){for(;e>0;){let r=E0(t,e-2,n);if(r<e)return r;e--}return 0}function Ja(t,e){let n=t.charCodeAt(e);if(!T0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return M0(r)?(n-55296<<10)+(r-56320)+65536:n}function M0(t){return t>=56320&&t<57344}function T0(t){return t>=55296&&t<56320}function Vd(t){return t<65536?1:2}class X{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=yi(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),ln.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=yi(this,e,n);let r=[];return this.decompose(e,n,r,0),ln.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new as(this),s=new as(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new as(this,e)}iterRange(e,n=this.length){return new N0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new D0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?X.empty:e.length<=32?new xe(e):ln.from(xe.split(e,[]))}}class xe extends X{constructor(e,n=Jx(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new Xx(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new xe(Ud(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=Xl(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new xe(o,l.length+s.length));else{let a=o.length>>1;r.push(new xe(o.slice(0,a)),new xe(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof xe))return super.replace(e,n,r);[e,n]=yi(this,e,n);let i=Xl(this.text,Xl(r.text,Ud(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new xe(i,s):ln.from(xe.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=yi(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new xe(r,i)),r=[],i=-1);return i>-1&&n.push(new xe(r,i)),n}}class ln extends X{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=yi(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new ln(c,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=yi(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof ln))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let g of e)g.flatten(d);return new xe(d,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,c=[];function h(d){let g;if(d.lines>s&&d instanceof ln)for(let w of d.children)h(w);else d.lines>l&&(a>l||!a)?(f(),o.push(d)):d instanceof xe&&a&&(g=c[c.length-1])instanceof xe&&d.lines+g.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new xe(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>i&&f(),a+=d.lines,u+=d.length+1,c.push(d))}function f(){a!=0&&(o.push(c.length==1?c[0]:ln.from(c,u)),u=-1,a=c.length=0)}for(let d of e)h(d);return f(),o.length==1?o[0]:new ln(o,n)}}X.empty=new xe([""],0);function Jx(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Xl(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function Ud(t,e,n){return Xl(t,[""],e,n)}class as{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof xe?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof xe?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof xe){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof xe?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class N0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new as(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class D0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(X.prototype[Symbol.iterator]=function(){return this.iter()},as.prototype[Symbol.iterator]=N0.prototype[Symbol.iterator]=D0.prototype[Symbol.iterator]=function(){return this});class Xx{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function yi(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function je(t,e,n=!0,r=!0){return Yx(t,e,n,r)}function Zx(t){return t>=56320&&t<57344}function ek(t){return t>=55296&&t<56320}function O0(t,e){let n=t.charCodeAt(e);if(!ek(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Zx(r)?(n-55296<<10)+(r-56320)+65536:n}function tk(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function P0(t){return t<65536?1:2}const pc=/\r\n?|\n/;var mt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(mt||(mt={}));class wn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){mc(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new wn(e)}composeDesc(e){return this.empty?e:e.empty?this:L0(this,e)}mapDesc(e,n=!1){return e.empty?this:gc(this,e,n)}mapPos(e,n=-1,r=mt.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=mt.Simple&&u>=e&&(r==mt.TrackDel&&i<e&&u>e||r==mt.TrackBefore&&i<e||r==mt.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new wn(e)}static create(e){return new wn(e)}}class De extends wn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return mc(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return gc(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(X.empty);r.push(l?e.slice(s,s+l):X.empty)}s+=l}return new De(n,r)}compose(e){return this.empty?e:e.empty?this:L0(this,e,!0)}map(e,n=!1){return e.empty?this:gc(this,e,n,!0)}iterChanges(e,n=!1){mc(this,e,n)}get desc(){return wn.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Ps(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-o);$e(i,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;$e(n,c,h),h>0&&_n(r,n,s.text),s.forward(c),o+=c}let u=e[l++];for(;o<u;){if(s.done)break e;let c=Math.min(s.len,u-o);$e(n,c,-1),$e(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),o+=c}}return{changes:new De(n,r),filtered:wn.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(c=!1){if(!c&&!i.length)return;l<n&&$e(i,n-l,-1);let h=new De(i,s);o=o?o.compose(h.map(o)):h,i=[],s=[],l=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof De){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),o=o?o.compose(c.map(o)):c}else{let{from:h,to:f=h,insert:d}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let g=d?typeof d=="string"?X.of(d.split(r||pc)):d:X.empty,w=g.length;if(h==f&&w==0)return;h<l&&a(),h>l&&$e(i,h-l,-1),$e(i,f-h,w),_n(s,i,g),l=f}}return u(e),a(!o),o}static empty(e){return new De(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(X.empty);r[i]=X.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new De(n,r)}static createSet(e,n){return new De(e,n)}}function $e(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function _n(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(X.empty);t.push(n)}}function mc(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,c=s,h=X.empty;for(;u+=o,c+=a,a&&r&&(h=h.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,c,h),i=u,s=c}}}function gc(t,e,n,r=!1){let i=[],s=r?[]:null,l=new Ps(t),o=new Ps(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);$e(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for($e(i,o.ins,-1);u;){let c=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=c&&($e(i,0,l.ins),s&&_n(s,i,l.text),a=l.i),l.forward(c),u-=c}o.next()}else if(l.ins>=0){let u=0,c=l.len;for(;c;)if(o.ins==-1){let h=Math.min(c,o.len);u+=h,c-=h,o.forward(h)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;$e(i,u,a<l.i?l.ins:0),s&&a<l.i&&_n(s,i,l.text),a=l.i,l.forward(l.len-c)}else{if(l.done&&o.done)return s?De.createSet(i,s):wn.create(i);throw new Error("Mismatched change set lengths")}}}function L0(t,e,n=!1){let r=[],i=n?[]:null,s=new Ps(t),l=new Ps(e);for(let o=!1;;){if(s.done&&l.done)return i?De.createSet(r,i):wn.create(r);if(s.ins==0)$e(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)$e(r,0,l.ins,o),i&&_n(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let c=l.ins==-1?-1:l.off?0:l.ins;$e(r,a,c,o),i&&c&&_n(i,r,l.text)}else l.ins==-1?($e(r,s.off?0:s.len,a,o),i&&_n(i,r,s.textBit(a))):($e(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&_n(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class Ps{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?X.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?X.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class yr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new yr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return E.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return E.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return E.range(e.anchor,e.head)}static create(e,n,r){return new yr(e,n,r)}}class E{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:E.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new E([this.main],0)}addRange(e,n=!0){return E.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,E.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new E(e.ranges.map(n=>yr.fromJSON(n)),e.main)}static single(e,n=e){return new E([E.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return E.normalized(e.slice(),n);r=s.to}return new E(e,n)}static cursor(e,n=0,r,i){return yr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?yr.create(n,e,48|s):yr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?E.range(a,o):E.range(o,a))}}return new E(e,n)}}function R0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Xh=0;class z{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Xh++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new z(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Zh),!!e.static,e.enables)}of(e){return new Zl([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Zl(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Zl(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Zh(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Zl{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Xh++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[l]=r(h),1},update(h,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||yc(h,c)){let d=r(h);if(o?!$d(d,h.values[l],i):!i(d,h.values[l]))return h.values[l]=d,1}return 0},reconfigure:(h,f)=>{let d,g=f.config.address[s];if(g!=null){let w=Oo(f,g);if(this.dependencies.every(x=>x instanceof z?f.facet(x)===h.facet(x):x instanceof Gt?f.field(x,!1)==h.field(x,!1):!0)||(o?$d(d=r(h),w,i):i(d=r(h),w)))return h.values[l]=w,0}else d=r(h);return h.values[l]=d,1}}}}function $d(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function yc(t,e){let n=!1;for(let r of e)us(t,r)&1&&(n=!0);return n}function nk(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let c=0;c<r.length;c++){let h=Oo(a,r[c]);if(i[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(a){for(let u of r)us(a,u);return a.values[l]=o(a),1},update(a,u){if(!yc(a,s))return 0;let c=o(a);return e.compare(c,a.values[l])?0:(a.values[l]=c,1)},reconfigure(a,u){let c=yc(a,r),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&Zh(n,h))return a.values[l]=f,0;let d=o(a);return e.compare(d,f)?(a.values[l]=f,0):(a.values[l]=d,1)}}}const xl=z.define({static:!0});class Gt{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Gt(Xh++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(xl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(xl),l=i.facet(xl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,xl.of({field:this,create:e})]}get extension(){return this}}const dr={lowest:4,low:3,default:2,high:1,highest:0};function Hi(t){return e=>new I0(e,t)}const ha={highest:Hi(dr.highest),high:Hi(dr.high),default:Hi(dr.default),low:Hi(dr.low),lowest:Hi(dr.lowest)};class I0{constructor(e,n){this.inner=e,this.prec=n}}class fa{of(e){return new vc(this,e)}reconfigure(e){return fa.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class vc{constructor(e,n){this.compartment=e,this.inner=n}}class Do{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of rk(e,n,l))f instanceof Gt?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(d=>f.slot(d));let c=r==null?void 0:r.config.facets;for(let f in s){let d=s[f],g=d[0].facet,w=c&&c[f]||[];if(d.every(x=>x.type==0))if(o[g.id]=a.length<<1|1,Zh(w,d))a.push(r.facet(g));else{let x=g.combine(d.map(p=>p.value));a.push(r&&g.compare(x,r.facet(g))?r.facet(g):x)}else{for(let x of d)x.type==0?(o[x.id]=a.length<<1|1,a.push(x.value)):(o[x.id]=u.length<<1,u.push(p=>x.dynamicSlot(p)));o[g.id]=u.length<<1,u.push(x=>nk(x,g,d))}}let h=u.map(f=>f(o));return new Do(e,l,h,o,a,s)}}function rk(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof vc&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof vc){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof I0)s(l.inner,l.prec);else if(l instanceof Gt)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof Zl)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,dr.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,dr.default),r.reduce((l,o)=>l.concat(o))}function us(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Oo(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const B0=z.define(),wc=z.define({combine:t=>t.some(e=>e),static:!0}),j0=z.define({combine:t=>t.length?t[0]:void 0,static:!0}),F0=z.define(),_0=z.define(),z0=z.define(),H0=z.define({combine:t=>t.length?t[0]:!1});class Mi{constructor(e,n){this.type=e,this.value=n}static define(){return new ik}}class ik{of(e){return new Mi(this,e)}}class sk{constructor(e){this.map=e}of(e){return new ae(this,e)}}class ae{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ae(this.type,n)}is(e){return this.type==e}static define(e={}){return new sk(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}ae.reconfigure=ae.define();ae.appendConfig=ae.define();class qe{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&R0(r,n.newLength),s.some(o=>o.type==qe.time)||(this.annotations=s.concat(qe.time.of(Date.now())))}static create(e,n,r,i,s,l){return new qe(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(qe.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}qe.time=Mi.define();qe.userEvent=Mi.define();qe.addToHistory=Mi.define();qe.remote=Mi.define();function lk(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function W0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=De.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:ae.mapEffects(t.effects,i).concat(ae.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function xc(t,e,n){let r=e.selection,i=li(e.annotations);return e.userEvent&&(i=i.concat(qe.userEvent.of(e.userEvent))),{changes:e.changes instanceof De?e.changes:De.of(e.changes||[],n,t.facet(j0)),selection:r&&(r instanceof E?r:E.single(r.anchor,r.head)),effects:li(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function V0(t,e,n){let r=xc(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=W0(r,xc(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=qe.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return ak(n?ok(i):i)}function ok(t){let e=t.startState,n=!0;for(let i of e.facet(F0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:lk(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=De.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=qe.create(e,i,t.selection&&t.selection.map(s),ae.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(_0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof qe?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof qe?t=s[0]:t=V0(e,li(s),!1)}return t}function ak(t){let e=t.startState,n=e.facet(z0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=W0(r,xc(e,s,t.changes.newLength),!0))}return r==t?t:qe.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const uk=[];function li(t){return t==null?uk:Array.isArray(t)?t:[t]}var Fe=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Fe||(Fe={}));const ck=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let kc;try{kc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hk(t){if(kc)return kc.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||ck.test(n)))return!0}return!1}function fk(t){return e=>{if(!/\S/.test(e))return Fe.Space;if(hk(e))return Fe.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Fe.Word;return Fe.Other}}class te{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)us(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return us(this,r),Oo(this,r)}update(...e){return V0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(fa.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(ae.reconfigure)?(n=null,r=o.value):o.is(ae.appendConfig)&&(n=null,r=li(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=Do.resolve(r,i,this),s=new te(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(wc)?e.newSelection:e.newSelection.asSingle();new te(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:E.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=li(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),c=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(c);let h=i.mapDesc(u,!0);s.push(a.range.map(h)),i=i.compose(c),l=ae.mapEffects(l,c).concat(ae.mapEffects(li(a.effects),h))}return{changes:i,selection:E.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof De?e:De.of(e,this.doc.length,this.facet(te.lineSeparator))}toText(e){return X.of(e.split(this.facet(te.lineSeparator)||pc))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(us(this,n),Oo(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Gt&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return te.create({doc:e.doc,selection:E.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Do.resolve(e.extensions||[],new Map),r=e.doc instanceof X?e.doc:X.of((e.doc||"").split(n.staticFacet(te.lineSeparator)||pc)),i=e.selection?e.selection instanceof E?e.selection:E.single(e.selection.anchor,e.selection.head):E.single(0);return R0(i,r.length),n.staticFacet(wc)||(i=i.asSingle()),new te(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(te.tabSize)}get lineBreak(){return this.facet(te.lineSeparator)||`
`}get readOnly(){return this.facet(H0)}phrase(e,...n){for(let r of this.facet(te.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(B0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return fk(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=je(n,l,!1);if(s(n.slice(a,l))!=Fe.Word)break;l=a}for(;o<i;){let a=je(n,o);if(s(n.slice(o,a))!=Fe.Word)break;o=a}return l==o?null:E.range(l+r,o+r)}}te.allowMultipleSelections=wc;te.tabSize=z.define({combine:t=>t.length?t[0]:4});te.lineSeparator=j0;te.readOnly=H0;te.phrases=z.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});te.languageData=B0;te.changeFilter=F0;te.transactionFilter=_0;te.transactionExtender=z0;fa.reconfigure=ae.define();function da(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class vi{eq(e){return this==e}range(e,n=e){return Sc.create(e,n,this)}}vi.prototype.startSide=vi.prototype.endSide=0;vi.prototype.point=!1;vi.prototype.mapMode=mt.TrackDel;let Sc=class U0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new U0(e,n,r)}};function Cc(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class ef{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,h=this.to[a]+e,f,d;if(c==h){let g=n.mapPos(c,u.startSide,u.mapMode);if(g==null||(f=d=g,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<f)))continue}else if(f=n.mapPos(c,u.startSide),d=n.mapPos(h,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,d-f)),r.push(u),i.push(f-l),s.push(d-l))}return{mapped:r.length?new ef(i,s,r,o):null,pos:l}}}class ne{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ne(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(Cc)),this.isEmpty)return n.length?ne.of(n):this;let o=new $0(this,null,-1).goto(0),a=0,u=[],c=new Mr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let h=n[a++];c.addInner(h.from,h.to,h.value)||u.push(h)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||u.push(Sc.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?ne.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:c,pos:h}=a.map(o,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new ne(r,n,s||ne.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Ls.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Ls.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),o=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=Kd(l,o,r),u=new Wi(l,a,s),c=new Wi(o,a,s);r.iterGaps((h,f,d)=>Gd(u,h,c,f,d,i)),r.empty&&r.length==0&&Gd(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),l=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=Kd(s,l),a=new Wi(s,o,0).goto(r),u=new Wi(l,o,0).goto(r);for(;;){if(a.to!=u.to||!bc(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new Wi(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let c=l.activeForPoint(l.to),h=l.pointFrom<n?c.length+1:l.point.startSide<0?c.length:Math.min(c.length,a);i.point(o,u,l.point,c,h,l.pointRank),a=Math.min(l.openEnd(u),c.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new Mr;for(let i of e instanceof Sc?[e]:n?dk(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ne.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ne.empty;i=i.nextLayer)n=new ne(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}ne.empty=new ne([],[],null,-1);function dk(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Cc(e,r)>0)return t.slice().sort(Cc);e=r}return t}ne.empty.nextLayer=ne.empty;class Mr{finishChunk(e){this.chunks.push(new ef(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Mr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ne.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ne.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Kd(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class $0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ls{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new $0(l,n,r,s));return i.length==1?i[0]:new Ls(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Xa(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Xa(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Xa(this.heap,0)}}}function Xa(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Wi{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ls.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){kl(this.active,e),kl(this.activeTo,e),kl(this.activeRank,e),this.minActive=qd(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Sl(this.active,n,r),Sl(this.activeTo,n,i),Sl(this.activeRank,n,s),e&&Sl(e,n,this.cursor.from),this.minActive=qd(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&kl(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Gd(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,h=c<0?t.to+a:n.to,f=Math.min(h,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&bc(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!bc(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),h>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),o=h,c<=0&&t.next(),c>=0&&n.next()}}function bc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function kl(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Sl(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function qd(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function pa(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=je(t,i));return r}function pk(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=je(t,i)}return t.length}const Ac="ͼ",Yd=typeof Symbol>"u"?"__"+Ac:Symbol.for(Ac),Ec=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Zn{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let c=[],h=/^@(\w+)\b/.exec(l[0]),f=h&&h[1]=="keyframes";if(h&&o==null)return a.push(l[0]+";");for(let d in o){let g=o[d];if(/&/.test(d))s(d.split(/,\s*/).map(w=>l.map(x=>w.replace(/&/,x))).reduce((w,x)=>w.concat(x)),g,a);else if(g&&typeof g=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),g,c,f)}else g!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+g+";")}(c.length||f)&&a.push((r&&!h&&!u?l.map(r):l).join(", ")+" {"+c.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Qd[Yd]||1;return Qd[Yd]=e+1,Ac+e.toString(36)}static mount(e,n,r){let i=e[Ec],s=r&&r.nonce;i?s&&i.setNonce(s):i=new mk(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let Jd=new Map;class mk{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=Jd.get(r);if(s)return e[Ec]=s;this.sheet=new i.CSSStyleSheet,Jd.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Ec]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var er={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Rs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gk=typeof navigator<"u"&&/Mac/.test(navigator.platform),yk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ie=0;Ie<10;Ie++)er[48+Ie]=er[96+Ie]=String(Ie);for(var Ie=1;Ie<=24;Ie++)er[Ie+111]="F"+Ie;for(var Ie=65;Ie<=90;Ie++)er[Ie]=String.fromCharCode(Ie+32),Rs[Ie]=String.fromCharCode(Ie);for(var Za in er)Rs.hasOwnProperty(Za)||(Rs[Za]=er[Za]);function vk(t){var e=gk&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||yk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Rs:er)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Le(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)K0(t,arguments[e]);return t}function K0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)K0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Is(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Mc(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function eo(t,e){if(!e.anchorNode)return!1;try{return Mc(t,e.anchorNode)}catch{return!1}}function Bs(t){return t.nodeType==3?Nr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function cs(t,e,n,r){return n?Xd(t,e,n,r,-1)||Xd(t,e,n,r,1):!1}function Tr(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Po(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Xd(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:fn(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Tr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?fn(t):0}else return!1}}function fn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ma(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function wk(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function G0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function xk(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,d=c==a.body,g=1,w=1;if(d)f=wk(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:g,scaleY:w}=G0(c,y)),f={left:y.left,right:y.left+c.clientWidth*g,top:y.top,bottom:y.top+c.clientHeight*w}}let x=0,p=0;if(i=="nearest")e.top<f.top?(p=e.top-(f.top+l),n>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,n<0&&e.top-p<f.top&&(p=e.top-(f.top+l)));else{let y=e.bottom-e.top,v=f.bottom-f.top;p=(i=="center"&&y<=v?e.top+y/2-v/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-v+l)-f.top}if(r=="nearest"?e.left<f.left?(x=e.left-(f.left+s),n>0&&e.right>f.right+x&&(x=e.right-f.right+s)):e.right>f.right&&(x=e.right-f.right+s,n<0&&e.left<f.left+x&&(x=e.left-(f.left+s))):x=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,x||p)if(d)u.scrollBy(x,p);else{let y=0,v=0;if(p){let S=c.scrollTop;c.scrollTop+=p/w,v=(c.scrollTop-S)*w}if(x){let S=c.scrollLeft;c.scrollLeft+=x/g,y=(c.scrollLeft-S)*g}e={left:e.left-y,top:e.top-v,right:e.right-y,bottom:e.bottom-v},y&&Math.abs(y-x)<1&&(r="nearest"),v&&Math.abs(v-p)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function kk(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class Sk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?fn(n):0),r,Math.min(e.focusOffset,r?fn(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Ir=null;function q0(t){if(t.setActive)return t.setActive();if(Ir)return t.focus(Ir);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Ir==null?{get preventScroll(){return Ir={preventScroll:!0},!0}}:void 0),!Ir){Ir=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Zd;function Nr(t,e,n=e){let r=Zd||(Zd=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function oi(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function Ck(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Y0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function bk(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,fn(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=fn(n))}else{if(n==t)return!0;r=Tr(n),n=n.parentNode}}function Q0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function J0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=fn(n)}else if(n.parentNode&&!Po(n))r=Tr(n),n=n.parentNode;else return null}}function X0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!Po(n))r=Tr(n)+1,n=n.parentNode;else return null}}class Ge{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Ge(e.parentNode,Tr(e),n)}static after(e,n){return new Ge(e.parentNode,Tr(e)+1,n)}}const tf=[];class le{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=le.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=ep(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=ep(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=fn(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!le.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,c=r;a<this.children.length;a++){let h=this.children[a],f=u+h.length;if(u<e&&f>n)return h.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&h.dom.parentNode==this.dom){l=a,o=c;break}c=f,u=f+h.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=tf){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Z0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}le.prototype.breakAfter=0;function ep(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Z0{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function ey(t,e,n,r,i,s,l,o,a){let{children:u}=t,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:l;if(!(e==r&&c&&!l&&!f&&s.length<2&&c.merge(n,i,s.length?h:null,n==0,o,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&(h!=null&&h.breakAfter))?(e==r&&(d=d.split(i),i=0),!f&&h&&d.merge(0,i,h,!0,0,a)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(h?h.breakAfter=1:l=1),r++}for(c&&(c.breakAfter=l,n>0&&(!l&&s.length&&c.merge(n,c.length,s[0],!1,o,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function ty(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:c}=l.findPos(e,-1),h=e-n;for(let f of r)h+=f.length;t.length+=h,ey(t,u,c,o,a,r,0,i,s)}let st=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Tc=typeof document<"u"?document:{documentElement:{style:{}}};const Nc=/Edge\/(\d+)/.exec(st.userAgent),ny=/MSIE \d/.test(st.userAgent),Dc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(st.userAgent),ga=!!(ny||Dc||Nc),tp=!ga&&/gecko\/(\d+)/i.test(st.userAgent),eu=!ga&&/Chrome\/(\d+)/.exec(st.userAgent),Ak="webkitFontSmoothing"in Tc.documentElement.style,ry=!ga&&/Apple Computer/.test(st.vendor),np=ry&&(/Mobile\/\w+/.test(st.userAgent)||st.maxTouchPoints>2);var R={mac:np||/Mac/.test(st.platform),windows:/Win/.test(st.platform),linux:/Linux|X11/.test(st.platform),ie:ga,ie_version:ny?Tc.documentMode||6:Dc?+Dc[1]:Nc?+Nc[1]:0,gecko:tp,gecko_version:tp?+(/Firefox\/(\d+)/.exec(st.userAgent)||[0,0])[1]:0,chrome:!!eu,chrome_version:eu?+eu[1]:0,ios:np,android:/Android\b/.test(st.userAgent),safari:ry,webkit_version:Ak?+(/\bAppleWebKit\/(\d+)/.exec(st.userAgent)||[0,0])[1]:0,tabSize:Tc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Ek=256;class $t extends le{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof $t)||this.length-(n-e)+r.length>Ek||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new $t(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Ge(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Mk(this.dom,e,n)}}class An extends le{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(Y0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof An&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(ty(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new An(this.mark,n,l)}domAtPos(e){return iy(this,e)}coordsAt(e,n){return ly(this,e,n)}}function Mk(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?R.chrome||R.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=Nr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return R.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?ma(a,l<0):a||null}class vr extends le{static create(e,n,r){return new vr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=vr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof vr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof vr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return X.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):X.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ge.before(this.dom):Ge.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return ma(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class wi extends le{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof wi&&e.side==this.side}split(){return new wi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ge.before(this.dom):Ge.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return X.empty}get isHidden(){return!0}}$t.prototype.children=vr.prototype.children=wi.prototype.children=tf;function iy(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new Ge(n,0)}function sy(t,e,n){let r,{children:i}=t;n>0&&e instanceof An&&i.length&&(r=i[i.length-1])instanceof An&&r.mark.eq(e.mark)?sy(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function ly(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let d=u.children[h],g=f+d.length;g>=c&&(d.children.length?o(d,c-f):(!s||s.isHidden&&(n>0||Nk(s,d)))&&(g>c||f==g&&d.getSide()>0)?(s=d,l=c-f):(f<c||f==g&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-f)),f=g}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):Tk(t)}function Tk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Bs(e);return n[n.length-1]||null}function Nk(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function Oc(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const rp=Object.create(null);function Lo(t,e,n){if(t==e)return!0;t||(t=rp),e||(e=rp);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Pc(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function Dk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class qs{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Nt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Nt||(Nt={}));class $ extends vi{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Ys(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new tr(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=oy(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new tr(e,r,i,n,e.widget||null,!0)}static line(e){return new Qs(e)}static set(e,n=!1){return ne.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}$.none=ne.empty;class Ys extends ${constructor(e){let{start:n,end:r}=oy(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Ys&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Lo(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Ys.prototype.point=!1;class Qs extends ${constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Qs&&this.spec.class==e.spec.class&&Lo(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Qs.prototype.mapMode=mt.TrackBefore;Qs.prototype.point=!0;class tr extends ${constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?mt.TrackBefore:mt.TrackAfter:mt.TrackDel}get type(){return this.startSide!=this.endSide?Nt.WidgetRange:this.startSide<=0?Nt.WidgetBefore:Nt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof tr&&Ok(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}tr.prototype.point=!0;function oy(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function Ok(t,e){return t==e||!!(t&&e&&t.compare(e))}function to(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Ce extends le{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof Ce))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),ty(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new Ce;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Lo(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){sy(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Oc(n,this.attrs||{})),r&&(this.attrs=Oc({class:r},this.attrs||{}))}domAtPos(e){return iy(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(Y0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Pc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&le.get(i)instanceof An;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=le.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!R.ios||!this.children.some(s=>s instanceof $t))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof $t)||/[^ -~]/.test(r.text))return null;let i=Bs(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=ly(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof Ce&&this.children.length==0&&e.children.length==0&&Lo(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof Ce)return s;if(l>n)break}i=l+s.breakAfter}return null}}class xn extends le{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof xn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Ge.before(this.dom):Ge.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new xn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return tf}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):X.empty}domBoundsAround(){return null}become(e){return e instanceof xn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof Lc?null:ma(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Lc extends qs{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class hs{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof xn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ce),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Cl(new wi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof xn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Cl(new $t(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof tr){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof tr)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new xn(r.widget||xi.block,o,r));else{let a=vr.create(r.widget||xi.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(Cl(new wi(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(Cl(a,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new hs(e,n,r,s);return l.openEnd=ne.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function Cl(t,e){for(let n of e)t=new An(n,[t],t.length);return t}class xi extends qs{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}xi.inline=new xi("span");xi.block=new xi("div");var Me=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Me||(Me={}));const Dr=Me.LTR,nf=Me.RTL;function ay(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Pk=ay("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Lk=ay("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Rc=Object.create(null),Xt=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Rc[e]=n,Rc[n]=-e}function uy(t){return t<=247?Pk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Lk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Rk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class zn{get dir(){return this.level%2?nf:Dr}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function cy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!cy(r.inner,i.inner))return!1}return!0}const se=[];function Ik(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,c=a,h=a;u<o;u++){let f=uy(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),se[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=l,c=a,h=a;u<o;u++){let f=se[u];if(f==128)u<o-1&&c==se[u+1]&&c&24?f=se[u]=c:se[u]=256;else if(f==64){let d=u+1;for(;d<o&&se[d]==64;)d++;let g=u&&c==8||d<n&&se[d]==8?h==1?1:8:256;for(let w=u;w<d;w++)se[w]=g;u=d-1}else f==8&&h==1&&(se[u]=1);c=f,f&7&&(h=f)}}}function Bk(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,c=l<r.length?r[l].from:n;for(let h=u,f,d,g;h<c;h++)if(d=Rc[f=t.charCodeAt(h)])if(d<0){for(let w=o-3;w>=0;w-=3)if(Xt[w+1]==-d){let x=Xt[w+2],p=x&2?i:x&4?x&1?s:i:0;p&&(se[h]=se[Xt[w]]=p),o=w;break}}else{if(Xt.length==189)break;Xt[o++]=h,Xt[o++]=f,Xt[o++]=a}else if((g=se[h])==2||g==1){let w=g==i;a=w?0:1;for(let x=o-3;x>=0;x-=3){let p=Xt[x+2];if(p&2)break;if(w)Xt[x+2]|=2;else{if(p&4)break;Xt[x+2]|=4}}}}}function jk(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=se[a];if(u==256){let c=a+1;for(;;)if(c==o){if(i==n.length)break;c=n[i++].to,o=i<n.length?n[i].from:e}else if(se[c]==256)c++;else break;let h=s==1,f=(c<e?se[c]:r)==1,d=h==f?h?1:2:r;for(let g=c,w=i,x=w?n[w-1].to:t;g>a;)g==x&&(g=n[--w].from,x=w?n[w-1].to:t),se[--g]=d;a=c}else s=u,a++}}}function Ic(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let c=!0,h=!1;if(u==s.length||a<s[u].from){let w=se[a];w!=o&&(c=!1,h=w==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,g=a;e:for(;;)if(u<s.length&&g==s[u].from){if(h)break e;let w=s[u];if(!c)for(let x=w.to,p=u+1;;){if(x==n)break e;if(p<s.length&&s[p].from==x)x=s[p++].to;else{if(se[x]==o)break e;break}}if(u++,f)f.push(w);else{w.from>a&&l.push(new zn(a,w.from,d));let x=w.direction==Dr!=!(d%2);Bc(t,x?r+1:r,i,w.inner,w.from,w.to,l),a=w.to}g=w.to}else{if(g==n||(c?se[g]!=o:se[g]==o))break;g++}f?Ic(t,a,g,r+1,i,f,l):a<g&&l.push(new zn(a,g,d)),a=g}else for(let a=n,u=s.length;a>e;){let c=!0,h=!1;if(!u||a>s[u-1].to){let w=se[a-1];w!=o&&(c=!1,h=w==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,g=a;e:for(;;)if(u&&g==s[u-1].to){if(h)break e;let w=s[--u];if(!c)for(let x=w.from,p=u;;){if(x==e)break e;if(p&&s[p-1].to==x)x=s[--p].from;else{if(se[x-1]==o)break e;break}}if(f)f.push(w);else{w.to<a&&l.push(new zn(w.to,a,d));let x=w.direction==Dr!=!(d%2);Bc(t,x?r+1:r,i,w.inner,w.from,w.to,l),a=w.from}g=w.from}else{if(g==e||(c?se[g-1]!=o:se[g-1]==o))break;g--}f?Ic(t,g,a,r+1,i,f,l):g<a&&l.push(new zn(g,a,d)),a=g}}function Bc(t,e,n,r,i,s,l){let o=e%2?2:1;Ik(t,i,s,r,o),Bk(t,i,s,r,o),jk(i,s,r,o),Ic(t,i,s,e,n,r,l)}function Fk(t,e,n){if(!t)return[new zn(0,0,e==nf?1:0)];if(e==Dr&&!n.length&&!Rk.test(t))return hy(t.length);if(n.length)for(;t.length>se.length;)se[se.length]=256;let r=[],i=e==Dr?0:1;return Bc(t,i,i,n,0,t.length,r),r}function hy(t){return[new zn(0,t,0)]}let fy="";function _k(t,e,n,r,i){var s;let l=r.head-t.from,o=zn.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let c=je(t.text,l,a.forward(i,n));(c<a.from||c>a.to)&&(c=u),fy=t.text.slice(Math.min(l,c),Math.max(l,c));let h=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<a.level?E.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):E.cursor(c+t.from,a.forward(i,n)?-1:1,a.level)}function zk(t,e,n){for(let r=e;r<n;r++){let i=uy(t.charCodeAt(r));if(i==1)return Dr;if(i==2||i==4)return nf}return Dr}const dy=z.define(),py=z.define(),my=z.define(),gy=z.define(),jc=z.define(),yy=z.define(),vy=z.define(),rf=z.define(),sf=z.define(),wy=z.define({combine:t=>t.some(e=>e)}),Hk=z.define({combine:t=>t.some(e=>e)}),xy=z.define();class ai{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new ai(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ai(E.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const bl=ae.define({map:(t,e)=>t.map(e)}),ky=ae.define();function an(t,e,n){let r=t.facet(gy);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const mn=z.define({combine:t=>t.length?t[0]:!0});let Wk=0;const Jr=z.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class wt{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Jr.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Jr.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new wt(Wk++,e,r,i,o=>{let a=[];return l&&a.push(js.of(u=>{let c=u.plugin(o);return c?l(c):$.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return wt.define((r,i)=>new e(r,i),n)}}class tu{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(an(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){an(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){an(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Sy=z.define(),lf=z.define(),js=z.define(),Cy=z.define(),Js=z.define(),by=z.define();function ip(t,e){let n=t.state.facet(by);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return ne.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,c=l-e.from,h=i;for(let f=o.length-1;f>=0;f--,a--){let d=o[f].spec.bidiIsolate,g;if(d==null&&(d=zk(e.text,u,c)),a>0&&h.length&&(g=h[h.length-1]).to==u&&g.direction==d)g.to=c,h=g.inner;else{let w={from:u,to:c,direction:d,inner:[]};h.push(w),h=w.inner}}}}),i}const Ay=z.define();function Ey(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(Ay)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Qi=z.define();class Dt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Dt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let h=n[s],f=n[s+1],d=Math.max(o,h),g=Math.min(c,f);if(d<=g&&new Dt(d+u,g+u,d,g).addToSet(r),f>c)break;s+=2}if(!a)return r;new Dt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class Ro{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=De.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new Dt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new Ro(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class sp extends le{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=$.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ce],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Dt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!Yk(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?Uk(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Dt(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(R.ie||R.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=Gk(l,o,e.changes);return r=Dt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=R.chrome||R.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof xn&&l.widget instanceof Lc&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:c,toB:h}=o,f,d,g,w;if(r&&r.range.fromB<h&&r.range.toB>c){let S=hs.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=hs.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);d=S.breakAtStart,g=S.openStart,w=C.openEnd;let A=this.compositionView(r);C.breakAtStart?A.breakAfter=1:C.content.length&&A.merge(A.length,A.length,C.content[0],!1,C.openStart,0)&&(A.breakAfter=C.content[0].breakAfter,C.content.shift()),S.content.length&&A.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(A).concat(C.content)}else({content:f,breakAtStart:d,openStart:g,openEnd:w}=hs.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:x,off:p}=s.findPos(u,1),{i:y,off:v}=s.findPos(a,-1);ey(this,y,v,x,p,f,d,g,w)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(ky)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new $t(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new An(i,[n],n.length);let r=new Ce;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=le.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(mn)||this.dom.tabIndex>-1)&&eo(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(R.gecko&&o.empty&&!this.hasComposition&&Vk(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=u=new Ge(h,0),l=!0}let c=this.view.observer.selectionRange;(l||!c.focusNode||(!cs(a.node,a.offset,c.anchorNode,c.anchorOffset)||!cs(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,o))&&(this.view.observer.ignore(()=>{R.android&&R.chrome&&this.dom.contains(c.focusNode)&&qk(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Is(this.view.root);if(h)if(o.empty){if(R.gecko){let f=$k(a.node,a.offset);if(f&&f!=3){let d=(f==1?J0:X0)(a.node,a.offset);d&&(a=new Ge(d.node,d.offset))}}h.collapse(a.node,a.offset),o.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=o.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Ge(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Ge(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&cs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Is(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=Ce.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=le.get(n.childNodes[i]);s instanceof Ce&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=le.get(n.childNodes[i]);s instanceof Ce&&(r=s.domAtPos(s.length))}return r?new Ge(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=le.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Ce)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof Ce&&!(r instanceof Ce&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof xn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Ce))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof $t))return null;let s=je(i.text,r);if(s==r)return null;let l=Nr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Me.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>i)break;if(u>=r){let d=h.dom.getBoundingClientRect();if(n.push(d.height),l){let g=h.dom.lastChild,w=g?Bs(g):[];if(w.length){let x=w[w.length-1],p=a?x.right-d.left:d.right-x.left;p>o&&(o=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Me.RTL:Me.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Ce){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Bs(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new Z0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push($.replace({widget:new Lc(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return $.set(e)}updateDeco(){let e=1,n=this.view.state.facet(js).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(Cy).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(ne.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(xy))try{if(u(this.view,e.range,e))return!0}catch(c){an(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=Ey(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;xk(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Me.LTR)}}function Vk(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function My(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=J0(n.focusNode,n.focusOffset),i=X0(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=le.get(i.node);if(!o||o instanceof $t&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=le.get(r.node);!a||a instanceof $t&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function Uk(t,e,n){let r=My(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new Dt(a.mapPos(s),a.mapPos(l),s,l),c=[];for(let h=i.parentNode;;h=h.parentNode){let f=le.get(h);if(f instanceof An)c.push({node:h,deco:f.mark});else{if(f instanceof Ce||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new Ys({inclusive:!0,attributes:Dk(h),tagName:h.tagName.toLowerCase()})});else return null}}}function $k(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Kk=class{constructor(){this.changes=[]}compareRange(e,n){to(e,n,this.changes)}comparePoint(e,n){to(e,n,this.changes)}boundChange(e){to(e,e,this.changes)}};function Gk(t,e,n){let r=new Kk;return ne.compare(t,e,n,r),r.changes}function qk(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Yk(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function Qk(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return E.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=je(i.text,s,!1):o=je(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=je(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=je(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return E.range(l+i.from,o+i.from)}function Jk(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Xk(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function nu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function lp(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function op(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Fc(t,e,n){let r,i,s,l,o=!1,a,u,c,h;for(let g=t.firstChild;g;g=g.nextSibling){let w=Bs(g);for(let x=0;x<w.length;x++){let p=w[x];i&&nu(i,p)&&(p=lp(op(p,i.bottom),i.top));let y=Jk(e,p),v=Xk(n,p);if(y==0&&v==0)return g.nodeType==3?ap(g,e,n):Fc(g,e,n);(!r||l>v||l==v&&s>y)&&(r=g,i=p,s=y,l=v,o=y?e<p.left?x>0:x<w.length-1:!0),y==0?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=g,c=p):n<p.top&&(!h||h.top>p.top)&&(u=g,h=p):c&&nu(c,p)?c=op(c,p.bottom):h&&nu(h,p)&&(h=lp(h,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):h&&h.top<=n&&(r=u,i=h),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return ap(r,f,n);if(o&&r.contentEditable!="false")return Fc(r,f,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function ap(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=Nr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;l||(l=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,d=f;if((R.chrome||R.gecko)&&Nr(t,o).getBoundingClientRect().left==c.right&&(d=!f),h<=0)return{node:t,offset:o+(d?1:0)};i=o+(d?1:0),s=h}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function Ty(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:h}=e,f=h-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(f),a.type!=Nt.Text;)for(;f=r>0?a.bottom+S:a.top-S,!(f>=0&&f<=u);){if(C)return n?null:0;C=!0,r=-r}h=o+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:up(t,l,a,c,h);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:up(t,l,a,c,h);let g=t.dom.ownerDocument,w=t.root.elementFromPoint?t.root:g,x=w.elementFromPoint(c,h);x&&!t.contentDOM.contains(x)&&(x=null),x||(c=Math.max(l.left+1,Math.min(l.right-1,c)),x=w.elementFromPoint(c,h),x&&!t.contentDOM.contains(x)&&(x=null));let p,y=-1;if(x&&((i=t.docView.nearest(x))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(c,h);S&&({offsetNode:p,offset:y}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(c,h);S&&({startContainer:p,startOffset:y}=S)}p&&(!t.contentDOM.contains(p)||R.safari&&Zk(p,y,c)||R.chrome&&eS(p,y,c))&&(p=void 0),p&&(y=Math.min(fn(p),y))}if(!p||!t.docView.dom.contains(p)){let S=Ce.find(t.docView,d);if(!S)return f>a.top+a.height/2?a.to:a.from;({node:p,offset:y}=Fc(S.dom,c,h))}let v=t.docView.nearest(p);if(!v)return null;if(v.isWidget&&((s=v.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=v.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(p,y)+v.posAtStart}function up(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+pk(l,s,t.state.tabSize)}function Ny(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return Nr(t,r-1,r).getBoundingClientRect().right>n}function Zk(t,e,n){return Ny(t,e,n)}function eS(t,e,n){if(e!=0)return Ny(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Nr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function tS(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Nt.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function nS(t,e,n,r){let i=tS(t,e.head,e.assoc||-1),s=!r||i.type!=Nt.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==Me.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return E.cursor(a,n?-1:1)}return E.cursor(n?i.to:i.from,n?-1:1)}function cp(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=_k(i,s,l,o,n),c=fy;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(c))return o}else{if(!r)return u;a=r(c)}o=u}}function rS(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==Fe.Space&&(i=l),i==l}}function iS(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return E.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),o=(s<0?d.top:d.bottom)+c}let h=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let g=o+(f+d)*s,w=Ty(t,{x:h,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?w<i:w>i)){let x=t.docView.coordsForChar(w),p=!x||g<x.top?-1:1;return E.cursor(w,p,void 0,l)}}}function fs(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function Dy(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=fs(t,i.from,0);l!=i.from&&(s=E.cursor(l,-1))}else{let l=fs(t,i.from,-1),o=fs(t,i.to,1);(l!=i.from||o!=i.to)&&(s=E.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?E.create(n,e.mainIndex):e}function ru(t,e,n){let r=fs(t.state.facet(Js).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:E.cursor(r,r<n.from?1:-1)}const Ji="￿";class sS{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(te.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ji}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=le.get(i),a=le.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:Po(i))||Po(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=le.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(lS(e,r.node,r.offset)?n:0))}}function lS(t,e,n){for(;;){if(!e||n<fn(e))return!1;if(e==t)return!0;n=Tr(e)+1,e=e.parentNode}}class hp{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class oS{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:cS(e),a=new sS(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=hS(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!Mc(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!Mc(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),c=e.viewport;if((R.ios||R.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(a,u),f=Math.max(a,u),d=c.from-h,g=c.to-f;(d==0||d==1||h==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=E.single(u,a)}}}function Oy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||R.android&&e.text.length<o-l)&&(a=i.to,u="end");let c=uS(t.state.doc.sliceString(l,o,Ji),e.text,a-l,u);c&&(R.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Ji+Ji&&c.toB--,n={from:l+c.from,to:l+c.toA,insert:X.of(e.text.slice(c.from,c.toB).split(Ji))})}else r&&(!t.hasFocus&&t.state.facet(mn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(R.mac||R.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:X.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:R.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:X.of([" "])}),n)return of(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=Dy(t.state.facet(Js).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function of(t,e,n,r=-1){if(R.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(R.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&oi(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&oi(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&oi(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=aS(t,e,n));return t.state.facet(yy).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function aS(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,c=fs(i.facet(Js).map(h=>h(t)),u,a);e.from==c&&(l=c)}if(l>-1)r={changes:e,selection:E.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),h,f=n&&My(t,n.main.head);if(f){let w=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-w}}else h=t.state.doc.lineAt(s.head);let d=s.to-e.to,g=s.to-s.from;r=i.changeByRange(w=>{if(w.from==s.from&&w.to==s.to)return{changes:a,range:u||w.map(a)};let x=w.to-d,p=x-c.length;if(w.to-w.from!=g||t.state.sliceDoc(p,x)!=c||w.to>=h.from&&w.from<=h.to)return{range:w};let y=i.changes({from:p,to:x,insert:e.insert}),v=w.to-s.to;return{changes:y,range:u?E.range(Math.max(0,u.anchor+v),Math.max(0,u.head+v)):w.map(y)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function uS(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function cS(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new hp(n,r)),(i!=n||s!=r)&&e.push(new hp(i,s))),e}function hS(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?E.single(n+e,r+e):null}class fS{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,R.safari&&e.contentDOM.addEventListener("input",()=>null),R.gecko&&TS(e.contentDOM.ownerDocument)}handleEvent(e){!xS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=dS(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Ly.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),R.android&&R.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return R.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Py.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||pS.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,oi(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:R.safari&&!R.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function fp(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){an(n.state,i)}}}function dS(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(fp(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(fp(r.value,a))}}for(let r in Kt)n(r).handlers.push(Kt[r]);for(let r in Rt)n(r).observers.push(Rt[r]);return e}const Py=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],pS="dthko",Ly=[16,17,18,20,91,92,224,225],Al=6;function El(t){return Math.max(0,t)*.7+8}function mS(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class gS{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=kk(e.contentDOM),this.atoms=e.state.facet(Js).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(te.allowMultipleSelections)&&yS(e,n),this.dragging=wS(e,n)&&By(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&mS(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=Ey(this.view);e.clientX-a.left<=i+Al?n=-El(i-e.clientX):e.clientX+a.right>=l-Al&&(n=El(e.clientX-l)),e.clientY-a.top<=s+Al?r=-El(s-e.clientY):e.clientY+a.bottom>=o-Al&&(r=El(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=Dy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function yS(t,e){let n=t.state.facet(dy);return n.length?n[0](e):R.mac?e.metaKey:e.ctrlKey}function vS(t,e){let n=t.state.facet(py);return n.length?n[0](e):R.mac?!e.altKey:!e.ctrlKey}function wS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Is(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function xS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=le.get(n))&&r.ignoreEvent(e))return!1;return!0}const Kt=Object.create(null),Rt=Object.create(null),Ry=R.ie&&R.ie_version<15||R.ios&&R.webkit_version<604;function kS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Iy(t,n.value)},50)}function ya(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function Iy(t,e){e=ya(t.state,rf,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(_c!=null&&n.selection.ranges.every(a=>a.empty)&&_c==s.toString()){let a=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let h=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:E.cursor(u.from+h.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:E.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Rt.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Kt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Rt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Rt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Kt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(my))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=bS(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new gS(t,e,n,r)),r&&t.observer.ignore(()=>{q0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function dp(t,e,n,r){if(r==1)return E.cursor(e,n);if(r==2)return Qk(t.state,e,n);{let i=Ce.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,E.range(l,o)}}let pp=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function SS(t,e,n,r){let i=Ce.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&pp(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&pp(n,r,o)?1:l&&l.bottom>=r?-1:1}function mp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:SS(t,n,e.clientX,e.clientY)}}const CS=R.ie&&R.ie_version<=11;let gp=null,yp=0,vp=0;function By(t){if(!CS)return t.detail;let e=gp,n=vp;return gp=t,vp=Date.now(),yp=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(yp+1)%3:1}function bS(t,e){let n=mp(t,e),r=By(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=mp(t,s),u,c=dp(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let h=dp(t,n.pos,n.bias,r),f=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=f<c.from?E.range(f,d):E.range(d,f)}return l?i.replaceRange(i.main.extend(c.from,c.to)):o&&r==1&&i.ranges.length>1&&(u=AS(i,a.pos))?u:o?i.addRange(c):E.create([c])}}}function AS(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return E.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Kt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=E.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",ya(t.state,sf,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Kt.dragend=t=>(t.inputState.draggedContent=null,!1);function wp(t,e,n,r){if(n=ya(t.state,rf,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&vS(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Kt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&wp(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return wp(t,e,r,!0),!0}return!1};Kt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Ry?null:e.clipboardData;return n?(Iy(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(kS(t),!1)};function ES(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function MS(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:ya(t,sf,e.join(t.lineBreak)),ranges:n,linewise:r}}let _c=null;Kt.copy=Kt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=MS(t.state);if(!n&&!i)return!1;_c=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=Ry?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(ES(t,n),!1)};const jy=Mi.define();function Fy(t,e){let n=[];for(let r of t.facet(vy)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:jy.of(!0)}):null}function _y(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Fy(t.state,e);n?t.dispatch(n):t.update([])}},10)}Rt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),_y(t)};Rt.blur=t=>{t.observer.clearSelectionRange(),_y(t)};Rt.compositionstart=Rt.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Rt.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,R.chrome&&R.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Rt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Kt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return of(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(R.chrome&&R.android&&(i=Py.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return R.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),R.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Rt.compositionend(t,e),20),!1};const xp=new Set;function TS(t){xp.has(t)||(xp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const kp=["pre-wrap","normal","pre-line","break-spaces"];let ki=!1;function Sp(){ki=!1}class NS{constructor(e){this.lineWrapping=e,this.doc=X.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return kp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=kp.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let c=l[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class DS{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class on{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Nt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof tr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new on(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var ce=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ce||(ce={}));const no=.001;class et{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>no&&(ki=!0),this.height=e)}replace(e,n,r){return et.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:c,toB:h}=i[o],f=s.lineAt(a,ce.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,ce.ByPosNoHeight,r,0,0);for(h+=d.to-u,u=d.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,ce.ByPosNoHeight,r,0,0));c+=f.from-a,a=f.from;let g=af.build(r.setDoc(l),e,c,h);s=Io(s,s.replace(a,u,g))}return s.updateHeight(r,0)}static empty(){return new pt(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new OS(et.of(e.slice(0,n)),l,et.of(e.slice(r)))}}function Io(t,e){return t==e?t:(t.constructor!=e.constructor&&(ki=!0),e)}et.prototype.size=1;class zy extends et{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new on(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class pt extends zy{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new on(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof pt||i instanceof Re&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Re?i=new pt(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):et.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Re extends et{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),h=o+c.length*a,f=Math.max(r,e-h/2);return new on(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:c,length:h}=n.doc.line(s+u);return new on(c,h,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==ce.ByHeight)return this.blockAt(e,r,i,s);if(n==ce.ByPosNoHeight){let{from:d,to:g}=r.doc.lineAt(e);return new on(d,g-d,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=o+u.length*a,h=u.number-l,f=i+o*h+a*(u.from-s-h);return new on(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let c=e,h=i;c<=n;){let f=r.doc.lineAt(c);if(c==e){let g=f.number-o;h+=a*g+u*(e-s-g)}let d=a+u*f.length;l(new on(f.from,f.length,h,d,0)),h+=d,c=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Re?r[r.length-1]=new Re(s.length+i):r.push(null,new Re(i-1))}if(e>0){let s=r[0];s instanceof Re?r[0]=new Re(e+s.length):r.unshift(new Re(e-1),null)}return et.of(r)}decomposeLeft(e,n){n.push(new Re(e-1),null)}decomposeRight(e,n){n.push(null,new Re(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Re(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let c=e.doc.lineAt(o).length;l.length&&l.push(null);let h=i.heights[i.index++];a==-1?a=h:Math.abs(h-a)>=no&&(a=-2);let f=new pt(c,h);f.outdated=!1,l.push(f),o+=c+1}o<=s&&l.push(null,new Re(s-o).updateHeight(e,o));let u=et.of(l);return(a<0||Math.abs(u.height-this.height)>=no||Math.abs(a-this.heightMetrics(e,n).perLine)>=no)&&(ki=!0),Io(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class OS extends et{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==ce.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let c=n==ce.ByPosNoHeight?ce.ByPosNoHeight:ce.ByPos;return a?u.join(this.right.lineAt(o,c,r,l,o)):this.left.lineAt(o,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,ce.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&Cp(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),Cp(s,o)}return et.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?et.of(this.break?[e,null,n]:[e,n]):(this.left=Io(this.left,e),this.right=Io(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Cp(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Re&&(r=t[e+1])instanceof Re&&t.splice(e-1,3,new Re(n.length+1+r.length))}const PS=5;class af{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof pt?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new pt(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new zy(l,i,r)):(l||s||i>=PS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new pt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Re(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof pt)return e;let n=new pt(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof pt)&&!this.isCovered?this.nodes.push(new pt(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof pt&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new af(r,e);return ne.spans(n,r,i,s,0),s.finish(r)}}function LS(t,e,n){let r=new RS;return ne.compare(t,e,n,r,0),r.changes}class RS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&to(e,n,this.changes,5)}}function IS(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function BS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function jS(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class iu{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return $.replace({widget:new FS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class FS extends qs{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class bp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Ap,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Me.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(lf).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new NS(n),this.stateDeco=e.facet(js).filter(r=>typeof r!="function"),this.heightMap=et.empty().applyChanges(this.stateDeco,X.empty,this.heightOracle.setDoc(e.doc),[new Dt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=$.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new Ml(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Ap:new uf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Xi(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(js).filter(c=>typeof c!="function");let i=e.changedRanges,s=Dt.extendWithRanges(i,LS(r,this.stateDeco,e?e.changes:De.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Sp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||ki)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Hk)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Me.RTL:Me.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,c=0;if(o.width&&o.height){let{scaleX:S,scaleY:C}=G0(n,o);(S>.005&&Math.abs(this.scaleX-S)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=S,this.scaleY=C,u|=16,l=a=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=Q0(e.scrollDOM);let g=(this.printing?jS:IS)(n,this.paddingTop),w=g.top-this.pixelViewport.top,x=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!BS(e.dom))return 0;let y=o.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(l=!0),l||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:A,textHeight:b}=e.docView.measureTextSize();l=C>0&&i.refresh(s,C,A,b,Math.max(5,y/A),S),l&&(e.docView.minWidth=0,u|=16)}w>0&&x>0?c=Math.max(w,x):w<0&&x<0&&(c=Math.min(w,x)),Sp();for(let C of this.viewports){let A=C.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?et.empty().applyChanges(this.stateDeco,X.empty,this.heightOracle,[new Dt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new DS(C.from,A))}ki&&(u|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new Ml(i.lineAt(l-r*1e3,ce.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,ce.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,ce.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=h.top:f=h.bottom-c,a=new Ml(i.lineAt(f-1e3/2,ce.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,ce.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Ml(this.heightMap.lineAt(r,ce.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ce.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ce.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,ce.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new iu(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=Me.LTR&&!r)return[];let o=[],a=(c,h,f,d)=>{if(h-c<s)return;let g=this.state.selection.main,w=[g.from];g.empty||w.push(g.to);for(let p of w)if(p>c&&p<h){a(c,p-10,f,d),a(p+10,h,f,d);return}let x=zS(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-c)<s&&Math.abs(p.to-h)<s&&!w.some(y=>p.from<y&&p.to>y));if(!x){if(h<f.to&&n&&r&&n.visibleRanges.some(v=>v.from<=h&&v.to>=h)){let v=n.moveToLineBoundary(E.cursor(h),!1,!0).head;v>c&&(h=v)}let p=this.gapSize(f,c,h,d),y=r||p<2e6?p:2e6;x=new iu(c,h,p,y)}o.push(x)},u=c=>{if(c.length<l||c.type!=Nt.Text)return;let h=_S(c.from,c.to,this.stateDeco);if(h.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,g;if(r){let w=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,p;if(f!=null){let y=Nl(h,f),v=((this.visibleBottom-this.visibleTop)/2+w)/c.height;x=y-v,p=y+v}else x=(this.visibleTop-c.top-w)/c.height,p=(this.visibleBottom-c.top+w)/c.height;d=Tl(h,x),g=Tl(h,p)}else{let w=h.total*this.heightOracle.charWidth,x=i*this.heightOracle.charWidth,p=0;if(w>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=A.size-A.displaySize);let y=this.pixelViewport.left+p,v=this.pixelViewport.right+p,S,C;if(f!=null){let A=Nl(h,f),b=((v-y)/2+x)/w;S=A-b,C=A+b}else S=(y-x)/w,C=(v+x)/w;d=Tl(h,S),g=Tl(h,C)}d>c.from&&a(c.from,d,c,h),g<c.to&&a(g,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return o}gapSize(e,n,r,i){let s=Nl(i,r)-Nl(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){iu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=$.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];ne.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Xi(this.heightMap.lineAt(e,ce.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Xi(this.heightMap.lineAt(this.scaler.fromDOM(e),ce.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Xi(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ml{constructor(e,n){this.from=e,this.to=n}}function _S(t,e,n){let r=[],i=t,s=0;return ne.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Tl({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function Nl(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function zS(t,e){for(let n of t)if(e(n))return n}const Ap={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class uf{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,ce.ByPos,e,0,0).top,c=n.lineAt(a,ce.ByPos,e,0,0).bottom;return i+=c-u,{from:o,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof uf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Xi(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new on(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Xi(i,e)):t._content)}const Dl=z.define({combine:t=>t.join(" ")}),zc=z.define({combine:t=>t.indexOf(!0)>-1}),Hc=Zn.newName(),Hy=Zn.newName(),Wy=Zn.newName(),Vy={"&light":"."+Hy,"&dark":"."+Wy};function Wc(t,e,n){return new Zn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const HS=Wc("."+Hc,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Vy),WS={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},su=R.ie&&R.ie_version<=11;class VS{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Sk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(R.ie&&R.ie_version<=11||R.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&R.android&&e.constructor.EDIT_CONTEXT!==!1&&!(R.chrome&&R.chrome_version<126)&&(this.editContext=new $S(e),e.state.facet(mn)&&(e.contentDOM.editContext=this.editContext.editContext)),su&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(mn)?r.root.activeElement!=this.dom:!eo(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(R.ie&&R.ie_version<=11||R.android&&R.chrome)&&!r.state.selection.main.empty&&i.focusNode&&cs(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Is(e.root);if(!n)return!1;let r=R.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&US(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=eo(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&bk(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,WS),su&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),su&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&oi(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&eo(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new oS(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=Oy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=Ep(n,e.previousSibling||e.target.previousSibling,-1),i=Ep(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(mn)!=e.state.facet(mn)&&(e.view.contentDOM.editContext=e.state.facet(mn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Ep(t,e,n){for(;e;){let r=le.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Mp(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return cs(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function US(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Mp(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?Mp(t,n):null}class $S{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:X.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=E.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((R.mac||R.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:X.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);of(e,u,E.single(this.toEditorPos(r.selectionStart,c),this.toEditorPos(r.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push($.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:ky.of($.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Is(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let c=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class F{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Ck(e.parent)||document,this.viewState=new bp(e.state||te.create(e)),e.scrollTo&&e.scrollTo.is(bl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Jr).map(i=>new tu(i));for(let i of this.plugins)i.update(this);this.observer=new VS(this),this.inputState=new fS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new sp(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof qe?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(jy))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=Fy(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(te.phrases)!=this.state.facet(te.phrases))return this.setState(s);i=Ro.create(this,s,e),i.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new ai(d.empty?d:E.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(bl)&&(h=d.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=Bo.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Qi)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Dl)!=i.state.facet(Dl)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(jc))try{f(i)}catch(d){an(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Oy(this,c)&&u.force&&oi(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new bp(e),this.plugins=e.facet(Jr).map(r=>new tu(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new sp(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Jr),r=e.state.facet(Jr);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new tu(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){an(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(Q0(r))s=-1,l=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,l=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(g){return an(this.state,g),Tp}}),h=Ro.create(this,this.state,[]),f=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=Tp)try{let g=u[d];g.write&&g.write(c[d],this)}catch(g){an(this.state,g)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(g>1||g<-1){i=i+g,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(jc))o(n)}get themeClasses(){return Hc+" "+(this.state.facet(zc)?Wy:Hy)+" "+this.state.facet(Dl)}updateAttrs(){let e=Np(this,Sy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(mn)?"true":"false",class:"cm-content",style:`${R.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Np(this,lf,n);let r=this.observer.ignore(()=>{let i=Pc(this.contentDOM,this.contentAttrs,n),s=Pc(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(F.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Qi);let e=this.state.facet(F.cspNonce);Zn.mount(this.root,this.styleModules.concat(HS).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return ru(this,e,cp(this,e,n,r))}moveByGroup(e,n){return ru(this,e,cp(this,e,n,r=>rS(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return E.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return nS(this,e,n,r)}moveVertically(e,n,r){return ru(this,e,iS(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Ty(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[zn.find(s,e-i.from,-1,n)];return ma(r,l.dir==Me.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(wy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>KS)return hy(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||cy(s.isolates,r=ip(this,e))))return s.order;r||(r=ip(this,e));let i=Fk(e.text,n,r);return this.bidiCache.push(new Bo(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||R.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{q0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return bl.of(new ai(typeof e=="number"?E.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return bl.of(new ai(E.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return wt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return wt.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Zn.newName(),i=[Dl.of(r),Qi.of(Wc(`.${r}`,e))];return n&&n.dark&&i.push(zc.of(!0)),i}static baseTheme(e){return ha.lowest(Qi.of(Wc("."+Hc,e,Vy)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&le.get(r)||le.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}F.styleModule=Qi;F.inputHandler=yy;F.clipboardInputFilter=rf;F.clipboardOutputFilter=sf;F.scrollHandler=xy;F.focusChangeEffect=vy;F.perLineTextDirection=wy;F.exceptionSink=gy;F.updateListener=jc;F.editable=mn;F.mouseSelectionStyle=my;F.dragMovesSelection=py;F.clickAddsSelectionRange=dy;F.decorations=js;F.outerDecorations=Cy;F.atomicRanges=Js;F.bidiIsolatedRanges=by;F.scrollMargins=Ay;F.darkTheme=zc;F.cspNonce=z.define({combine:t=>t.length?t[0]:""});F.contentAttributes=lf;F.editorAttributes=Sy;F.lineWrapping=F.contentAttributes.of({class:"cm-lineWrapping"});F.announce=ae.define();const KS=4096,Tp={};class Bo{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Me.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new Bo(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function Np(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&Oc(l,n)}return n}const GS=R.mac?"mac":R.windows?"win":R.linux?"linux":"key";function qS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function Ol(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const YS=ha.default(F.domEventHandlers({keydown(t,e){return Ky($y(e.state),t,e,"editor")}})),Uy=z.define({enables:YS}),Dp=new WeakMap;function $y(t){let e=t.facet(Uy),n=Dp.get(e);return n||Dp.set(e,n=XS(e.reduce((r,i)=>r.concat(i),[]))),n}function QS(t,e,n){return Ky($y(t.state),e,t,n)}let Bn=null;const JS=4e3;function XS(t,e=GS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,c)=>{var h,f;let d=n[l]||(n[l]=Object.create(null)),g=o.split(/ (?!$)/).map(p=>qS(p,e));for(let p=1;p<g.length;p++){let y=g.slice(0,p).join(" ");i(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[v=>{let S=Bn={view:v,prefix:y,scope:l};return setTimeout(()=>{Bn==S&&(Bn=null)},JS),!0}]})}let w=g.join(" ");i(w,!1);let x=d[w]||(d[w]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});a&&x.run.push(a),u&&(x.preventDefault=!0),c&&(x.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=l;for(let f in c)c[f].run.push(d=>h(d,Vc))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Vc=null;function Ky(t,e,n,r){Vc=e;let i=vk(e),s=O0(i,0),l=P0(s)==i.length&&i!=" ",o="",a=!1,u=!1,c=!1;Bn&&Bn.view==n&&Bn.scope==r&&(o=Bn.prefix+" ",Ly.indexOf(e.keyCode)<0&&(u=!0,Bn=null));let h=new Set,f=x=>{if(x){for(let p of x.run)if(!h.has(p)&&(h.add(p),p(n)))return x.stopPropagation&&(c=!0),!0;x.preventDefault&&(x.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],g,w;return d&&(f(d[o+Ol(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(R.windows&&e.ctrlKey&&e.altKey)&&!(R.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=er[e.keyCode])&&g!=i?(f(d[o+Ol(g,e,!0)])||e.shiftKey&&(w=Rs[e.keyCode])!=i&&w!=g&&f(d[o+Ol(w,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(d[o+Ol(i,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),Vc=null,a}function ZS(){return tC}const eC=$.line({class:"cm-activeLine"}),tC=wt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(eC.range(i.from)),e=i.from)}return $.set(n)}},{decorations:t=>t.decorations}),Op=z.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function jo(t,e){let n=t.plugin(Gy),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Gy=wt.fromClass(class{constructor(t){this.input=t.state.facet(Fo),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(Op);this.top=new Pl(t,!0,e.topContainer),this.bottom=new Pl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(Op);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Pl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Pl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Fo);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),o.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:l).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>F.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Pl{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Pp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Pp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Pp(t){let e=t.nextSibling;return t.remove(),e}const Fo=z.define({enables:Gy});class nr extends vi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}nr.prototype.elementClass="";nr.prototype.toDOM=void 0;nr.prototype.mapMode=mt.TrackBefore;nr.prototype.startSide=nr.prototype.endSide=-1;nr.prototype.point=!0;const lu=z.define(),nC=z.define(),rC={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ne.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ds=z.define();function iC(t){return[qy(),ds.of({...rC,...t})]}const Lp=z.define({combine:t=>t.some(e=>e)});function qy(t){return[sC]}const sC=wt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ds).map(e=>new Ip(t,e)),this.fixed=!t.state.facet(Lp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Lp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=ne.iter(this.view.state.facet(lu),this.view.viewport.from),r=[],i=this.gutters.map(s=>new lC(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==Nt.Text&&l){Uc(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==Nt.Text){Uc(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ds),n=t.state.facet(ds),r=t.docChanged||t.heightChanged||t.viewportChanged||!ne.eq(t.startState.facet(lu),t.state.facet(lu),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new Ip(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>F.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Me.LTR?{left:r,right:i}:{right:r,left:i}})});function Rp(t){return Array.isArray(t)?t:[t]}function Uc(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class lC{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ne.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new Yy(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Uc(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(nC)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Ip{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=Rp(n.markers(e)),n.initialSpacer&&(this.spacer=new Yy(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=Rp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ne.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Yy{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),oC(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let h=l;h<this.markers.length;h++)if(this.markers[h].compare(a)){o=h,u=!0;break}}else o=this.markers.length;for(;l<o;){let c=this.markers[l++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function oC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const aC=z.define(),uC=z.define(),Xr=z.define({combine(t){return da(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class ou extends nr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function au(t,e){return t.state.facet(Xr).formatNumber(e,t.state)}const cC=ds.compute([Xr],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(aC)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new ou(au(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(uC)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Xr)!=e.state.facet(Xr),initialSpacer(e){return new ou(au(e,Bp(e.state.doc.lines)))},updateSpacer(e,n){let r=au(n.view,Bp(n.view.state.doc.lines));return r==e.number?e:new ou(r)},domEventHandlers:t.facet(Xr).domEventHandlers,side:"before"}));function hC(t={}){return[Xr.of(t),qy(),cC]}function Bp(t){let e=9;for(;e<t;)e=e*10+9;return e}const fC=1024;let dC=0;class uu{constructor(e,n){this.from=e,this.to=n}}class J{constructor(e={}){this.id=dC++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ct.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}J.closedBy=new J({deserialize:t=>t.split(" ")});J.openedBy=new J({deserialize:t=>t.split(" ")});J.group=new J({deserialize:t=>t.split(" ")});J.isolate=new J({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});J.contextHash=new J({perNode:!0});J.lookAhead=new J({perNode:!0});J.mounted=new J({perNode:!0});class _o{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[J.mounted.id]}}const pC=Object.create(null);class ct{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):pC,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ct(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(J.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(J.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}ct.none=new ct("",Object.create(null),0,8);class cf{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new ct(r.name,i,r.id,r.flags):r)}return new cf(n)}}const Ll=new WeakMap,jp=new WeakMap;var Be;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Be||(Be={}));class me{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=_o.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Kc(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Ll.get(this)||this.topNode,s=new Kc(i);return s.moveTo(e,n),Ll.set(this,s._tree),s}get topNode(){return new Ot(this,0,0,null)}resolve(e,n=0){let r=Fs(Ll.get(this)||this.topNode,e,n,!1);return Ll.set(this,r),r}resolveInner(e,n=0){let r=Fs(jp.get(this)||this.topNode,e,n,!0);return jp.set(this,r),r}resolveStack(e,n=0){return yC(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&Be.IncludeAnonymous)>0;for(let a=this.cursor(l|Be.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:df(ct.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new me(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new me(ct.none,n,r,i)))}static build(e){return vC(e)}}me.empty=new me(ct.none,[],[],0);class hf{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new hf(this.buffer,this.index)}}class rr{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return ct.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(Qy(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new rr(s,l,this.set)}}function Qy(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Fs(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Ot&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:Be.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Ot&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class Jy{cursor(e=0){return new Kc(this,e)}getChild(e,n=null,r=null){let i=Fp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Fp(this,e,n,r)}resolve(e,n=0){return Fs(this,e,n,!1)}resolveInner(e,n=0){return Fs(this,e,n,!0)}matchContext(e){return $c(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Ot extends Jy{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let c=o[e],h=a[e]+l.from;if(Qy(i,r,h,h+c.length)){if(c instanceof rr){if(s&Be.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,r-h,i);if(f>-1)return new Hn(new mC(l,c,e,h),null,f)}else if(s&Be.IncludeAnonymous||!c.type.isAnonymous||ff(c)){let f;if(!(s&Be.IgnoreMounts)&&(f=_o.get(c))&&!f.overlay)return new Ot(f.tree,h,e,l);let d=new Ot(c,h,e,l);return s&Be.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&Be.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Be.IgnoreOverlays)&&(i=_o.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Ot(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Fp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function $c(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class mC{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Hn extends Jy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Hn(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Be.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Hn(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Hn(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Hn(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new me(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Xy(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Ot&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new gC(i,n)}class gC{constructor(e,n){this.heads=e,this.node=n}get next(){return Xy(this.heads)}}function yC(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Ot?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=_o.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Ot(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Fs(o,e,n,!1))}}return i?Xy(i):r}class Kc{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ot)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ot?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Be.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Be.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Be.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&Be.IncludeAnonymous||o instanceof rr||!o.type.isAnonymous||ff(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Hn(this.buffer,n,this.stack[i]);return this.bufferNode=new Hn(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return $c(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return $c(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function ff(t){return t.children.some(e=>e instanceof rr||!e.type.isAnonymous||ff(e))}function vC(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=fC,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new hf(n,n.length):n,a=r.types,u=0,c=0;function h(C,A,b,N,H,j){let{id:V,start:W,end:Q,size:re}=o,we=c,rt=u;for(;re<0;)if(o.next(),re==-1){let q=s[V];b.push(q),N.push(W-C);return}else if(re==-3){u=V;return}else if(re==-4){c=V;return}else throw new RangeError(`Unrecognized record size: ${re}`);let Ct=a[V],P,_,U=W-C;if(Q-W<=i&&(_=x(o.pos-A,H))){let q=new Uint16Array(_.size-_.skip),O=o.pos-_.size,Se=q.length;for(;o.pos>O;)Se=p(_.start,q,Se);P=new rr(q,Q-_.start,r),U=_.start-C}else{let q=o.pos-re;o.next();let O=[],Se=[],ee=V>=l?V:-1,He=0,Te=Q;for(;o.pos>q;)ee>=0&&o.id==ee&&o.size>=0?(o.end<=Te-i&&(g(O,Se,W,He,o.end,Te,ee,we,rt),He=O.length,Te=o.end),o.next()):j>2500?f(W,q,O,Se):h(W,q,O,Se,ee,j+1);if(ee>=0&&He>0&&He<O.length&&g(O,Se,W,He,W,Te,ee,we,rt),O.reverse(),Se.reverse(),ee>-1&&He>0){let Qt=d(Ct,rt);P=df(Ct,O,Se,0,O.length,0,Q-W,Qt,Qt)}else P=w(Ct,O,Se,Q-W,we-Q,rt)}b.push(P),N.push(U)}function f(C,A,b,N){let H=[],j=0,V=-1;for(;o.pos>A;){let{id:W,start:Q,end:re,size:we}=o;if(we>4)o.next();else{if(V>-1&&Q<V)break;V<0&&(V=re-i),H.push(W,Q,re),j++,o.next()}}if(j){let W=new Uint16Array(j*4),Q=H[H.length-2];for(let re=H.length-3,we=0;re>=0;re-=3)W[we++]=H[re],W[we++]=H[re+1]-Q,W[we++]=H[re+2]-Q,W[we++]=we;b.push(new rr(W,H[2]-Q,r)),N.push(Q-C)}}function d(C,A){return(b,N,H)=>{let j=0,V=b.length-1,W,Q;if(V>=0&&(W=b[V])instanceof me){if(!V&&W.type==C&&W.length==H)return W;(Q=W.prop(J.lookAhead))&&(j=N[V]+W.length+Q)}return w(C,b,N,H,j,A)}}function g(C,A,b,N,H,j,V,W,Q){let re=[],we=[];for(;C.length>N;)re.push(C.pop()),we.push(A.pop()+b-H);C.push(w(r.types[V],re,we,j-H,W-j,Q)),A.push(H-b)}function w(C,A,b,N,H,j,V){if(j){let W=[J.contextHash,j];V=V?[W].concat(V):[W]}if(H>25){let W=[J.lookAhead,H];V=V?[W].concat(V):[W]}return new me(C,A,b,N,V)}function x(C,A){let b=o.fork(),N=0,H=0,j=0,V=b.end-i,W={size:0,start:0,skip:0};e:for(let Q=b.pos-C;b.pos>Q;){let re=b.size;if(b.id==A&&re>=0){W.size=N,W.start=H,W.skip=j,j+=4,N+=4,b.next();continue}let we=b.pos-re;if(re<0||we<Q||b.start<V)break;let rt=b.id>=l?4:0,Ct=b.start;for(b.next();b.pos>we;){if(b.size<0)if(b.size==-3)rt+=4;else break e;else b.id>=l&&(rt+=4);b.next()}H=Ct,N+=re,j+=rt}return(A<0||N==C)&&(W.size=N,W.start=H,W.skip=j),W.size>4?W:void 0}function p(C,A,b){let{id:N,start:H,end:j,size:V}=o;if(o.next(),V>=0&&N<l){let W=b;if(V>4){let Q=o.pos-(V-4);for(;o.pos>Q;)b=p(C,A,b)}A[--b]=W,A[--b]=j-C,A[--b]=H-C,A[--b]=N}else V==-3?u=N:V==-4&&(c=N);return b}let y=[],v=[];for(;o.pos>0;)h(t.start||0,t.bufferStart||0,y,v,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:y.length?v[0]+y[0].length:0;return new me(a[t.topID],y.reverse(),v.reverse(),S)}const _p=new WeakMap;function ro(t,e){if(!t.isAnonymous||e instanceof rr||e.type!=t)return 1;let n=_p.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof me)){n=1;break}n+=ro(t,r)}_p.set(e,n)}return n}function df(t,e,n,r,i,s,l,o,a){let u=0;for(let g=r;g<i;g++)u+=ro(t,e[g]);let c=Math.ceil(u*1.5/8),h=[],f=[];function d(g,w,x,p,y){for(let v=x;v<p;){let S=v,C=w[v],A=ro(t,g[v]);for(v++;v<p;v++){let b=ro(t,g[v]);if(A+b>=c)break;A+=b}if(v==S+1){if(A>c){let b=g[S];d(b.children,b.positions,0,b.children.length,w[S]+y);continue}h.push(g[S])}else{let b=w[v-1]+g[v-1].length-C;h.push(df(t,g,w,S,v,C,b,null,a))}f.push(C+y-s)}}return d(e,n,r,i,0),(o||a)(h,f,l)}class kr{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new kr(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let c=o<n.length?n[o]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;l&&l.from<h;){let f=l;if(a>=f.from||h<=f.to||u){let d=Math.max(f.from,a)-u,g=Math.min(f.to,h)-u;f=d>=g?null:new kr(d,g,f.tree,f.offset+u,o>0,!!c)}if(f&&i.push(f),l.to>h)break;l=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}}class Zy{startParse(e,n,r){return typeof e=="string"&&(e=new wC(e)),r=r?r.length?r.map(i=>new uu(i.from,i.to)):[new uu(0,0)]:[new uu(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class wC{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new J({perNode:!0});let xC=0;class Et{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=xC++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Et&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new Et(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new zo(e);return r=>r.modified.indexOf(n)>-1?r:zo.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let kC=0;class zo{constructor(e){this.name=e,this.instances=[],this.id=kC++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&SC(n,o.modified));if(r)return r;let i=[],s=new Et(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=CC(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(zo.get(o,a));return s}}function SC(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function CC(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function bC(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let h=0;;){if(o=="..."&&h>0&&h+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let d=i[h++];if(h==i.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);o=i.slice(h)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new Ho(r,l,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return ev.add(e)}const ev=new J;class Ho{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ho.empty=new Ho([],2,null);function tv(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function AC(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function EC(t,e,n,r=0,i=t.length){let s=new MC(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class MC{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(l)));let u=i,c=TC(e)||Ho.empty,h=AC(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,o),u),c.opaque)return;let f=e.tree&&e.tree.prop(J.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+o,1),g=this.highlighters.filter(x=>!x.scope||x.scope(f.tree.type)),w=e.firstChild();for(let x=0,p=o;;x++){let y=x<f.overlay.length?f.overlay[x]:null,v=y?y.from+o:a,S=Math.max(n,p),C=Math.min(r,v);if(S<C&&w)for(;e.from<C&&(this.highlightRange(e,S,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=v||!e.nextSibling())););if(!y||v>r)break;p=y.to+o,p>n&&(this.highlightRange(d.cursor(),Math.max(n,y.from+o),Math.min(r,p),"",g),this.startSpan(Math.min(r,p),u))}w&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function TC(t){let e=t.type.prop(ev);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const D=Et.define,Rl=D(),On=D(),zp=D(On),Hp=D(On),Pn=D(),Il=D(Pn),cu=D(Pn),tn=D(),cr=D(tn),Zt=D(),en=D(),Gc=D(),Vi=D(Gc),Bl=D(),T={comment:Rl,lineComment:D(Rl),blockComment:D(Rl),docComment:D(Rl),name:On,variableName:D(On),typeName:zp,tagName:D(zp),propertyName:Hp,attributeName:D(Hp),className:D(On),labelName:D(On),namespace:D(On),macroName:D(On),literal:Pn,string:Il,docString:D(Il),character:D(Il),attributeValue:D(Il),number:cu,integer:D(cu),float:D(cu),bool:D(Pn),regexp:D(Pn),escape:D(Pn),color:D(Pn),url:D(Pn),keyword:Zt,self:D(Zt),null:D(Zt),atom:D(Zt),unit:D(Zt),modifier:D(Zt),operatorKeyword:D(Zt),controlKeyword:D(Zt),definitionKeyword:D(Zt),moduleKeyword:D(Zt),operator:en,derefOperator:D(en),arithmeticOperator:D(en),logicOperator:D(en),bitwiseOperator:D(en),compareOperator:D(en),updateOperator:D(en),definitionOperator:D(en),typeOperator:D(en),controlOperator:D(en),punctuation:Gc,separator:D(Gc),bracket:Vi,angleBracket:D(Vi),squareBracket:D(Vi),paren:D(Vi),brace:D(Vi),content:tn,heading:cr,heading1:D(cr),heading2:D(cr),heading3:D(cr),heading4:D(cr),heading5:D(cr),heading6:D(cr),contentSeparator:D(tn),list:D(tn),quote:D(tn),emphasis:D(tn),strong:D(tn),link:D(tn),monospace:D(tn),strikethrough:D(tn),inserted:D(),deleted:D(),changed:D(),invalid:D(),meta:Bl,documentMeta:D(Bl),annotation:D(Bl),processingInstruction:D(Bl),definition:Et.defineModifier("definition"),constant:Et.defineModifier("constant"),function:Et.defineModifier("function"),standard:Et.defineModifier("standard"),local:Et.defineModifier("local"),special:Et.defineModifier("special")};for(let t in T){let e=T[t];e instanceof Et&&(e.name=t)}tv([{tag:T.link,class:"tok-link"},{tag:T.heading,class:"tok-heading"},{tag:T.emphasis,class:"tok-emphasis"},{tag:T.strong,class:"tok-strong"},{tag:T.keyword,class:"tok-keyword"},{tag:T.atom,class:"tok-atom"},{tag:T.bool,class:"tok-bool"},{tag:T.url,class:"tok-url"},{tag:T.labelName,class:"tok-labelName"},{tag:T.inserted,class:"tok-inserted"},{tag:T.deleted,class:"tok-deleted"},{tag:T.literal,class:"tok-literal"},{tag:T.string,class:"tok-string"},{tag:T.number,class:"tok-number"},{tag:[T.regexp,T.escape,T.special(T.string)],class:"tok-string2"},{tag:T.variableName,class:"tok-variableName"},{tag:T.local(T.variableName),class:"tok-variableName tok-local"},{tag:T.definition(T.variableName),class:"tok-variableName tok-definition"},{tag:T.special(T.variableName),class:"tok-variableName2"},{tag:T.definition(T.propertyName),class:"tok-propertyName tok-definition"},{tag:T.typeName,class:"tok-typeName"},{tag:T.namespace,class:"tok-namespace"},{tag:T.className,class:"tok-className"},{tag:T.macroName,class:"tok-macroName"},{tag:T.propertyName,class:"tok-propertyName"},{tag:T.operator,class:"tok-operator"},{tag:T.comment,class:"tok-comment"},{tag:T.meta,class:"tok-meta"},{tag:T.invalid,class:"tok-invalid"},{tag:T.punctuation,class:"tok-punctuation"}]);var hu;const Zr=new J;function NC(t){return z.define({combine:t?e=>e.concat(t):void 0})}const DC=new J;class Ht{constructor(e,n,r=[],i=""){this.data=e,this.name=i,te.prototype.hasOwnProperty("tree")||Object.defineProperty(te.prototype,"tree",{get(){return xt(this)}}),this.parser=n,this.extension=[ir.of(this),te.languageData.of((s,l,o)=>{let a=Wp(s,l,o),u=a.type.prop(Zr);if(!u)return[];let c=s.facet(u),h=a.type.prop(DC);if(h){let f=a.resolve(l-a.from,o);for(let d of h)if(d.test(f,s)){let g=s.facet(d.facet);return d.type=="replace"?g:g.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return Wp(e,n,r).type.prop(Zr)==this.data}findRegions(e){let n=e.facet(ir);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(Zr)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(J.mounted);if(o){if(o.tree.prop(Zr)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof me&&i(u,s.positions[a]+l)}};return i(xt(e),0),r}get allowsNesting(){return!0}}Ht.setState=ae.define();function Wp(t,e,n){let r=t.facet(ir),i=xt(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Be.ExcludeBuffers))s.type.isTop&&(i=s);return i}function xt(t){let e=t.field(Ht.state,!1);return e?e.tree:me.empty}class OC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ui=null;class Si{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Si(e,n,[],me.empty,0,r,[],null)}startParse(){return this.parser.startParse(new OC(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=me.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(kr.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(kr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ui;Ui=this;try{return e()}finally{Ui=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Vp(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,h,f)=>a.push({fromA:u,toA:c,fromB:h,toB:f})),r=kr.applyChanges(r,a),i=me.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&o.push({from:c,to:h})}}}return new Si(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Vp(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Zy{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Ui;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new me(ct.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ui}}function Vp(t,e,n){return kr.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Ci{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Ci(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Si.create(e.facet(ir).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Ci(r)}}Ht.state=Gt.define({create:Ci.init,update(t,e){for(let n of e.effects)if(n.is(Ht.setState))return n.value;return e.startState.facet(ir)!=e.state.facet(ir)?Ci.init(e.state):t.apply(e)}});let nv=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(nv=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const fu=typeof navigator<"u"&&(!((hu=navigator.scheduling)===null||hu===void 0)&&hu.isInputPending)?()=>navigator.scheduling.isInputPending():null,PC=wt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Ht.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Ht.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=nv(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Ht.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!fu?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>fu&&fu()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Ht.setState.of(new Ci(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>an(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ir=z.define({combine(t){return t.length?t[0]:null},enables:t=>[Ht.state,PC,F.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),LC=z.define(),pf=z.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Or(t){let e=t.facet(pf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function _s(t,e){let n="",r=t.tabSize,i=t.facet(pf)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function mf(t,e){t instanceof te&&(t=new va(t));for(let r of t.state.facet(LC)){let i=r(t,e);if(i!==void 0)return i}let n=xt(t.state);return n.length>=e?RC(t,n,e):null}class va{constructor(e,n={}){this.state=e,this.options=n,this.unit=Or(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return pa(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const rv=new J;function RC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return iv(r,t,n)}function iv(t,e,n){for(let r=t;r;r=r.next){let i=BC(r.node);if(i)return i(gf.create(e,n,r))}return 0}function IC(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function BC(t){let e=t.type.prop(rv);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(J.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>zC(l,!0,1,void 0,s&&!IC(l)?i.from:void 0)}return t.parent==null?jC:null}function jC(){return 0}class gf extends va{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new gf(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(FC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return iv(this.context.next,this.base,this.pos)}}function FC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function _C(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function zC(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=_C(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const HC=200;function WC(){return te.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+HC)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let c=l.doc.lineAt(u);if(c.from==o)continue;o=c.from;let h=mf(l,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],d=_s(l,h);f!=d&&a.push({from:c.from,to:c.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const VC=z.define(),UC=new J;function $C(t,e,n){let r=xt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(UC);if(a&&(o.to<r.length-50||r.length==t.doc.length||!KC(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function KC(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Up(t,e,n){for(let r of t.facet(VC)){let i=r(t,e,n);if(i)return i}return $C(t,e,n)}function sv(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const lv=ae.define({map:sv}),yf=ae.define({map:sv}),Wo=Gt.define({create(){return $.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=$p(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(lv)&&!GC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(ov),i=r?$.replace({widget:new QC(r(e.state,n.value))}):Kp;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(yf)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=$p(t,e.selection.main.head)),t},provide:t=>F.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Kp.range(r,i))}return $.set(e,!0)}});function $p(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function qc(t,e,n){var r;let i=null;return(r=t.field(Wo,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function GC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const qC={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},ov=z.define({combine(t){return da(t,qC)}});function YC(t){return[Wo,ZC]}function av(t,e){let{state:n}=t,r=n.facet(ov),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=qc(t.state,o.from,o.to);a&&t.dispatch({effects:yf.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const Kp=$.replace({widget:new class extends qs{toDOM(t){return av(t,null)}}});class QC extends qs{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return av(e,this.value)}}const JC={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class du extends nr{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function XC(t={}){let e={...JC,...t},n=new du(e,!0),r=new du(e,!1),i=wt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(ir)!=l.state.facet(ir)||l.startState.field(Wo,!1)!=l.state.field(Wo,!1)||xt(l.startState)!=xt(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new Mr;for(let a of l.viewportLineBlocks){let u=qc(l.state,a.from,a.to)?r:Up(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,iC({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||ne.empty},initialSpacer(){return new du(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=qc(l.state,o.from,o.to);if(u)return l.dispatch({effects:yf.of(u)}),!0;let c=Up(l.state,o.from,o.to);return c?(l.dispatch({effects:lv.of(c)}),!0):!1}}}),YC()]}const ZC=F.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class wa{constructor(e,n){this.specs=e;let r;function i(o){let a=Zn.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof Ht?o=>o.prop(Zr)==l.data:l?o=>o==l:void 0,this.style=tv(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new Zn(r):null,this.themeType=n.themeType}static define(e,n){return new wa(e,n||{})}}const Yc=z.define(),e2=z.define({combine(t){return t.length?[t[0]]:null}});function pu(t){let e=t.facet(Yc);return e.length?e:t.facet(e2)}function t2(t,e){let n=[r2],r;return t instanceof wa&&(t.module&&n.push(F.styleModule.of(t.module)),r=t.themeType),r?n.push(Yc.computeN([F.darkTheme],i=>i.facet(F.darkTheme)==(r=="dark")?[t]:[])):n.push(Yc.of(t)),n}class n2{constructor(e){this.markCache=Object.create(null),this.tree=xt(e.state),this.decorations=this.buildDeco(e,pu(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=xt(e.state),r=pu(e.state),i=r!=pu(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return $.none;let r=new Mr;for(let{from:i,to:s}of e.visibleRanges)EC(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=$.mark({class:a})))},i,s);return r.finish()}}const r2=ha.high(wt.fromClass(n2,{decorations:t=>t.decorations})),i2=F.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),uv=1e4,cv="()[]{}",hv=z.define({combine(t){return da(t,{afterCursor:!0,brackets:cv,maxScanDistance:uv,renderMatch:o2})}}),s2=$.mark({class:"cm-matchingBracket"}),l2=$.mark({class:"cm-nonmatchingBracket"});function o2(t){let e=[],n=t.matched?s2:l2;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const a2=Gt.define({create(){return $.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(hv);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=un(e.state,i.head,-1,r)||i.head>0&&un(e.state,i.head-1,1,r)||r.afterCursor&&(un(e.state,i.head,1,r)||i.head<e.state.doc.length&&un(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return $.set(n,!0)},provide:t=>F.decorations.from(t)}),u2=[a2,i2];function c2(t={}){return[hv.of(t),u2]}const h2=new J;function Qc(t,e,n){let r=t.prop(e<0?J.openedBy:J.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Jc(t){let e=t.type.prop(h2);return e?e(t.node):t}function un(t,e,n,r={}){let i=r.maxScanDistance||uv,s=r.brackets||cv,l=xt(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=Qc(a.type,n,s);if(u&&a.from<a.to){let c=Jc(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return f2(t,e,n,a,c,u,s)}}return d2(t,e,n,l,o.type,i,s)}function f2(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,c=o==null?void 0:o.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=Jc(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(Qc(c.type,n,l))u++;else if(Qc(c.type,-n,l)){if(u==0){let h=Jc(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function d2(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;n<0&&(f+=d.length);let g=e+f*n;for(let w=n>0?0:d.length-1,x=n>0?d.length:-1;w!=x;w+=n){let p=l.indexOf(d[w]);if(!(p<0||r.resolveInner(g+w,1).type!=i))if(p%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:g+w,to:g+w+1},matched:p>>1==a>>1};h--}}n>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}function Gp(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class fv{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Gp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Gp(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function p2(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||m2,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||xf,mergeTokens:t.mergeTokens!==!1}}function m2(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const qp=new WeakMap;class vf extends Ht{constructor(e){let n=NC(e.languageData),r=p2(e),i,s=new class extends Zy{createParse(l,o,a){return new y2(i,l,o,a)}};super(n,s,[],e.name),this.topNode=x2(n,this),i=this,this.streamParser=r,this.stateAfter=new J({perNode:!0}),this.tokenTable=e.tokenTable?new gv(r.tokenTable):w2}static define(e){return new vf(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=qp.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=wf(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let c=r?r(a.from):-1,h=new fv(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;h.pos<u-a.from;)pv(this.streamParser.token,h,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&qp.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function wf(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof me&&a<i&&wf(t,o,a,r,i);if(u)return u}return null}function dv(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof me){if(!(a=dv(t,o,n-l,r-l,i)))break;return i?new me(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function g2(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&wf(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=dv(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Or(i):4),tree:me.empty}}class y2{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=Si.get(),l=i[0].from,{state:o,tree:a}=g2(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Or(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Si.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new fv(n,e?e.state.tabSize:4,e?Or(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=pv(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=me.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:v2,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new me(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new me(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function pv(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const xf=Object.create(null),zs=[ct.none],v2=new cf(zs),Yp=[],Qp=Object.create(null),mv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])mv[t]=yv(xf,e);class gv{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),mv)}resolve(e){return e?this.table[e]||(this.table[e]=yv(this.extra,e)):0}}const w2=new gv(xf);function mu(t,e){Yp.indexOf(t)>-1||(Yp.push(t),console.warn(e))}function yv(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let c=t[u]||T[u];c?typeof c=="function"?a.length?a=a.map(c):mu(u,`Modifier ${u} used at start of tag`):a.length?mu(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:mu(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=Qp[i];if(s)return s.id;let l=Qp[i]=ct.define({id:zs.length,name:r,props:[bC({[r]:n})]});return zs.push(l),l.id}function x2(t,e){let n=ct.define({id:zs.length,name:"Document",props:[Zr.add(()=>t),rv.add(()=>r=>e.getIndent(r))],top:!0});return zs.push(n),n}Me.RTL,Me.LTR;const k2="#e5c07b",Jp="#e06c75",S2="#56b6c2",C2="#ffffff",io="#abb2bf",Xc="#7d8799",b2="#61afef",A2="#98c379",Xp="#d19a66",E2="#c678dd",M2="#21252b",Zp="#2c313a",em="#282c34",gu="#353a42",T2="#3E4451",tm="#528bff",N2=F.theme({"&":{color:io,backgroundColor:em},".cm-content":{caretColor:tm},".cm-cursor, .cm-dropCursor":{borderLeftColor:tm},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:T2},".cm-panels":{backgroundColor:M2,color:io},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:em,color:Xc,border:"none"},".cm-activeLineGutter":{backgroundColor:Zp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:gu},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:gu,borderBottomColor:gu},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Zp,color:io}}},{dark:!0}),D2=wa.define([{tag:T.keyword,color:E2},{tag:[T.name,T.deleted,T.character,T.propertyName,T.macroName],color:Jp},{tag:[T.function(T.variableName),T.labelName],color:b2},{tag:[T.color,T.constant(T.name),T.standard(T.name)],color:Xp},{tag:[T.definition(T.name),T.separator],color:io},{tag:[T.typeName,T.className,T.number,T.changed,T.annotation,T.modifier,T.self,T.namespace],color:k2},{tag:[T.operator,T.operatorKeyword,T.url,T.escape,T.regexp,T.link,T.special(T.string)],color:S2},{tag:[T.meta,T.comment],color:Xc},{tag:T.strong,fontWeight:"bold"},{tag:T.emphasis,fontStyle:"italic"},{tag:T.strikethrough,textDecoration:"line-through"},{tag:T.link,color:Xc,textDecoration:"underline"},{tag:T.heading,fontWeight:"bold",color:Jp},{tag:[T.atom,T.bool,T.special(T.variableName)],color:Xp},{tag:[T.processingInstruction,T.string,T.inserted],color:A2},{tag:T.invalid,color:C2}]),O2=[N2,t2(D2)],P2=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=Sf(t.state,n.from);return r.line?L2(t):r.block?I2(t):!1};function kf(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const L2=kf(F2,0),R2=kf(vv,0),I2=kf((t,e)=>vv(t,e,j2(e)),0);function Sf(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const $i=50;function B2(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-$i,r),l=t.sliceDoc(i,i+$i),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let c,h;i-r<=2*$i?c=h=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+$i),h=t.sliceDoc(i-$i,i));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(h)[0].length,g=h.length-d-n.length;return c.slice(f,f+e.length)==e&&h.slice(g,g+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(h.charAt(g-1))?1:0}}:null}function j2(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function vv(t,e,n=e.selection.ranges){let r=n.map(s=>Sf(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>B2(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:c}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function F2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=Sf(e,s).line;if(u){for(let c=s;c<=l;){let h=e.doc.lineAt(c);if(h.from>i&&(s==l||l>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,g=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),r.push({line:h,comment:g,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(a<1e9)for(let c=o;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:c,single:h}of r)(h||!c)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,c=u+a.length;l.text[c-l.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}function Ti(t,e){return E.create(t.ranges.map(e),t.mainIndex)}function qt(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Yt({state:t,dispatch:e},n){let r=Ti(t.selection,n);return r.eq(t.selection,!0)?!1:(e(qt(t,r)),!0)}function xa(t,e){return E.cursor(e?t.to:t.from)}function wv(t,e){return Yt(t,n=>n.empty?t.moveByChar(n,e):xa(n,e))}function Qe(t){return t.textDirectionAt(t.state.selection.main.head)==Me.LTR}const xv=t=>wv(t,!Qe(t)),kv=t=>wv(t,Qe(t));function Sv(t,e){return Yt(t,n=>n.empty?t.moveByGroup(n,e):xa(n,e))}const _2=t=>Sv(t,!Qe(t)),z2=t=>Sv(t,Qe(t));function H2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function ka(t,e,n){let r=xt(t).resolveInner(e.head),i=n?J.closedBy:J.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;H2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?un(t,r.from,1):un(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,E.cursor(o,n?-1:1)}const W2=t=>Yt(t,e=>ka(t.state,e,!Qe(t))),V2=t=>Yt(t,e=>ka(t.state,e,Qe(t)));function Cv(t,e){return Yt(t,n=>{if(!n.empty)return xa(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const bv=t=>Cv(t,!1),Av=t=>Cv(t,!0);function Ev(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(F.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function Mv(t,e){let n=Ev(t),{state:r}=t,i=Ti(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):xa(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=F.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(qt(r,i),{effects:s}),!0}const nm=t=>Mv(t,!1),Zc=t=>Mv(t,!0);function ar(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=E.cursor(r.from+s))}return i}const U2=t=>Yt(t,e=>ar(t,e,!0)),$2=t=>Yt(t,e=>ar(t,e,!1)),K2=t=>Yt(t,e=>ar(t,e,!Qe(t))),G2=t=>Yt(t,e=>ar(t,e,Qe(t))),q2=t=>Yt(t,e=>E.cursor(t.lineBlockAt(e.head).from,1)),Y2=t=>Yt(t,e=>E.cursor(t.lineBlockAt(e.head).to,-1));function Q2(t,e,n){let r=!1,i=Ti(t.selection,s=>{let l=un(t,s.head,-1)||un(t,s.head,1)||s.head>0&&un(t,s.head-1,1)||s.head<t.doc.length&&un(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return E.cursor(o)});return r?(e(qt(t,i)),!0):!1}const J2=({state:t,dispatch:e})=>Q2(t,e);function It(t,e){let n=Ti(t.state.selection,r=>{let i=e(r);return E.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(qt(t.state,n)),!0)}function Tv(t,e){return It(t,n=>t.moveByChar(n,e))}const Nv=t=>Tv(t,!Qe(t)),Dv=t=>Tv(t,Qe(t));function Ov(t,e){return It(t,n=>t.moveByGroup(n,e))}const X2=t=>Ov(t,!Qe(t)),Z2=t=>Ov(t,Qe(t)),eb=t=>It(t,e=>ka(t.state,e,!Qe(t))),tb=t=>It(t,e=>ka(t.state,e,Qe(t)));function Pv(t,e){return It(t,n=>t.moveVertically(n,e))}const Lv=t=>Pv(t,!1),Rv=t=>Pv(t,!0);function Iv(t,e){return It(t,n=>t.moveVertically(n,e,Ev(t).height))}const rm=t=>Iv(t,!1),im=t=>Iv(t,!0),nb=t=>It(t,e=>ar(t,e,!0)),rb=t=>It(t,e=>ar(t,e,!1)),ib=t=>It(t,e=>ar(t,e,!Qe(t))),sb=t=>It(t,e=>ar(t,e,Qe(t))),lb=t=>It(t,e=>E.cursor(t.lineBlockAt(e.head).from)),ob=t=>It(t,e=>E.cursor(t.lineBlockAt(e.head).to)),sm=({state:t,dispatch:e})=>(e(qt(t,{anchor:0})),!0),lm=({state:t,dispatch:e})=>(e(qt(t,{anchor:t.doc.length})),!0),om=({state:t,dispatch:e})=>(e(qt(t,{anchor:t.selection.main.anchor,head:0})),!0),am=({state:t,dispatch:e})=>(e(qt(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),ab=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),ub=({state:t,dispatch:e})=>{let n=Sa(t).map(({from:r,to:i})=>E.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:E.create(n),userEvent:"select"})),!0},cb=({state:t,dispatch:e})=>{let n=Ti(t.selection,r=>{let i=xt(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return E.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(qt(t,n)),!0)};function Bv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(qt(n,E.create(i,i.length-1))),!0)}const hb=t=>Bv(t,!1),fb=t=>Bv(t,!0),db=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=E.create([n.main]):n.main.empty||(r=E.create([E.cursor(n.main.head)])),r?(e(qt(t,r)),!0):!1};function Xs(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=jl(t,a,!1)):a>l&&(n="delete.forward",a=jl(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=jl(t,l,!1),o=jl(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:E.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?F.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function jl(t,e,n){if(t instanceof F)for(let r of t.state.facet(F.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const jv=(t,e,n)=>Xs(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=pa(o,s.tabSize),c=u%Or(s)||Or(s);for(let h=0;h<c&&o[o.length-1-h]==" ";h++)i--;a=i}else a=je(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=je(l.text,a-l.from,!1,!1)+l.from);return a}),eh=t=>jv(t,!1,!0),Fv=t=>jv(t,!0,!1),_v=(t,e)=>Xs(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=je(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=l(u);if(o!=null&&c!=o)break;(u!=" "||r!=n.head)&&(o=c),r=a}return r}),zv=t=>_v(t,!1),pb=t=>_v(t,!0),mb=t=>Xs(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),gb=t=>Xs(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),yb=t=>Xs(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),vb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:X.of(["",""])},range:E.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},wb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:je(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:je(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:E.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Sa(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Hv(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of Sa(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(E.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(E.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:E.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const xb=({state:t,dispatch:e})=>Hv(t,e,!1),kb=({state:t,dispatch:e})=>Hv(t,e,!0);function Wv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Sa(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Sb=({state:t,dispatch:e})=>Wv(t,e,!1),Cb=({state:t,dispatch:e})=>Wv(t,e,!0),bb=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Sa(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Ti(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Ab(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=xt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(J.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const um=Vv(!1),Eb=Vv(!0);function Vv(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&Ab(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new va(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=mf(u,s);for(c==null&&(c=pa(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let h=["",_s(e,c)];return a&&h.push(_s(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:X.of(h)},range:E.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Cf(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:E.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const Mb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new va(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=Cf(t,(s,l,o)=>{let a=mf(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],c=_s(t,a);(u!=c||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},Tb=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Cf(t,(n,r)=>{r.push({from:n.from,insert:t.facet(pf)})}),{userEvent:"input.indent"})),!0),Nb=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Cf(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=pa(i,t.tabSize),l=0,o=_s(t,Math.max(0,s-Or(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),Db=t=>(t.setTabFocusMode(),!0),Ob=[{key:"Ctrl-b",run:xv,shift:Nv,preventDefault:!0},{key:"Ctrl-f",run:kv,shift:Dv},{key:"Ctrl-p",run:bv,shift:Lv},{key:"Ctrl-n",run:Av,shift:Rv},{key:"Ctrl-a",run:q2,shift:lb},{key:"Ctrl-e",run:Y2,shift:ob},{key:"Ctrl-d",run:Fv},{key:"Ctrl-h",run:eh},{key:"Ctrl-k",run:mb},{key:"Ctrl-Alt-h",run:zv},{key:"Ctrl-o",run:vb},{key:"Ctrl-t",run:wb},{key:"Ctrl-v",run:Zc}],Pb=[{key:"ArrowLeft",run:xv,shift:Nv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:_2,shift:X2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:K2,shift:ib,preventDefault:!0},{key:"ArrowRight",run:kv,shift:Dv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:z2,shift:Z2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:G2,shift:sb,preventDefault:!0},{key:"ArrowUp",run:bv,shift:Lv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:sm,shift:om},{mac:"Ctrl-ArrowUp",run:nm,shift:rm},{key:"ArrowDown",run:Av,shift:Rv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:lm,shift:am},{mac:"Ctrl-ArrowDown",run:Zc,shift:im},{key:"PageUp",run:nm,shift:rm},{key:"PageDown",run:Zc,shift:im},{key:"Home",run:$2,shift:rb,preventDefault:!0},{key:"Mod-Home",run:sm,shift:om},{key:"End",run:U2,shift:nb,preventDefault:!0},{key:"Mod-End",run:lm,shift:am},{key:"Enter",run:um,shift:um},{key:"Mod-a",run:ab},{key:"Backspace",run:eh,shift:eh,preventDefault:!0},{key:"Delete",run:Fv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:zv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:pb,preventDefault:!0},{mac:"Mod-Backspace",run:gb,preventDefault:!0},{mac:"Mod-Delete",run:yb,preventDefault:!0}].concat(Ob.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Lb=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:W2,shift:eb},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:V2,shift:tb},{key:"Alt-ArrowUp",run:xb},{key:"Shift-Alt-ArrowUp",run:Sb},{key:"Alt-ArrowDown",run:kb},{key:"Shift-Alt-ArrowDown",run:Cb},{key:"Mod-Alt-ArrowUp",run:hb},{key:"Mod-Alt-ArrowDown",run:fb},{key:"Escape",run:db},{key:"Mod-Enter",run:Eb},{key:"Alt-l",mac:"Ctrl-l",run:ub},{key:"Mod-i",run:cb,preventDefault:!0},{key:"Mod-[",run:Nb},{key:"Mod-]",run:Tb},{key:"Mod-Alt-\\",run:Mb},{key:"Shift-Mod-k",run:bb},{key:"Shift-Mod-\\",run:J2},{key:"Mod-/",run:P2},{key:"Alt-A",run:R2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Db}].concat(Pb),cm=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Hs{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(cm(o)):cm,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return O0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=tk(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=P0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Hs.prototype[Symbol.iterator]=function(){return this});const Uv={from:-1,to:-1,match:/.*/.exec("")},bf="gm"+(/x/.unicode==null?"":"u");class $v{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Uv,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Kv(e,n,r,i,s);this.re=new RegExp(n,bf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=Vo(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Vo(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const yu=new WeakMap;class ui{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=yu.get(e);if(!i||i.from>=r||i.to<=n){let o=new ui(n,e.sliceString(n,r));return yu.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),yu.set(e,new ui(l,s)),new ui(n,s.slice(n-l,r-l))}}class Kv{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=Uv,this.matchPos=Vo(e,i),this.re=new RegExp(n,bf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=ui.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Vo(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ui.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&($v.prototype[Symbol.iterator]=Kv.prototype[Symbol.iterator]=function(){return this});function Rb(t){try{return new RegExp(t,bf),!0}catch{return!1}}function Vo(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function th(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Le("input",{class:"cm-textfield",name:"line",value:e}),r=Le("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:ps.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Le("label",t.state.phrase("Go to line"),": ",n)," ",Le("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Le("button",{name:"close",onclick:()=>{t.dispatch({effects:ps.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,c,h]=s,f=c?+c.slice(1):0,d=u?+u:o.number;if(u&&h){let x=d/100;a&&(x=x*(a=="-"?-1:1)+o.number/l.doc.lines),d=Math.round(l.doc.lines*x)}else u&&a&&(d=d*(a=="-"?-1:1)+o.number);let g=l.doc.line(Math.max(1,Math.min(l.doc.lines,d))),w=E.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[ps.of(!1),F.scrollIntoView(w.from,{y:"center"})],selection:w}),t.focus()}return{dom:r}}const ps=ae.define(),hm=Gt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(ps)&&(t=n.value);return t},provide:t=>Fo.from(t,e=>e?th:null)}),Ib=t=>{let e=jo(t,th);if(!e){let n=[ps.of(!0)];t.state.field(hm,!1)==null&&n.push(ae.appendConfig.of([hm,Bb])),t.dispatch({effects:n}),e=jo(t,th)}return e&&e.dom.querySelector("input").select(),!0},Bb=F.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),jb=({state:t,dispatch:e})=>{let{selection:n}=t,r=E.create(n.ranges.map(i=>t.wordAt(i.head)||E.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Fb(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Hs(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Hs(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const _b=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return jb({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=Fb(t,r);return i?(e(t.update({selection:t.selection.addRange(E.range(i.from,i.to),!1),effects:F.scrollIntoView(i.to)})),!0):!1},Ni=z.define({combine(t){return da(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Jb(e),scrollToMatch:e=>F.scrollIntoView(e)})}});class Gv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Rb(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Vb(this):new Hb(this)}getCursor(e,n=0,r){let i=e.doc?e:te.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?jr(this,i,n,r):Br(this,i,n,r)}}class qv{constructor(e){this.spec=e}}function Br(t,e,n,r){return new Hs(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?zb(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function zb(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Uo(i,n-s))!=Fe.Word||e($o(i,n-s))!=Fe.Word)&&(e($o(i,r-s))!=Fe.Word||e(Uo(i,r-s))!=Fe.Word))}class Hb extends qv{constructor(e){super(e)}nextMatch(e,n,r){let i=Br(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Br(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Br(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Br(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Br(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function jr(t,e,n,r){return new $v(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Wb(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Uo(t,e){return t.slice(je(t,e,!1),e)}function $o(t,e){return t.slice(e,je(t,e))}function Wb(t){return(e,n,r)=>!r[0].length||(t(Uo(r.input,r.index))!=Fe.Word||t($o(r.input,r.index))!=Fe.Word)&&(t($o(r.input,r.index+r[0].length))!=Fe.Word||t(Uo(r.input,r.index+r[0].length))!=Fe.Word)}class Vb extends qv{nextMatch(e,n,r){let i=jr(this.spec,e,r,e.doc.length).next();return i.done&&(i=jr(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=jr(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=jr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=jr(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Ws=ae.define(),Af=ae.define(),Qn=Gt.define({create(t){return new vu(nh(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ws)?t=new vu(n.value.create(),t.panel):n.is(Af)&&(t=new vu(t.query,n.value?Ef:null));return t},provide:t=>Fo.from(t,e=>e.panel)});class vu{constructor(e,n){this.query=e,this.panel=n}}const Ub=$.mark({class:"cm-searchMatch"}),$b=$.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Kb=wt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Qn))}update(t){let e=t.state.field(Qn);(e!=t.startState.field(Qn)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return $.none;let{view:n}=this,r=new Mr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,c)=>{let h=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,h?$b:Ub)})}return r.finish()}},{decorations:t=>t.decorations});function Zs(t){return e=>{let n=e.state.field(Qn,!1);return n&&n.query.spec.valid?t(e,n):Jv(e)}}const Ko=Zs((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=E.single(r.from,r.to),s=t.state.facet(Ni);return t.dispatch({selection:i,effects:[Mf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),Qv(t),!0}),Go=Zs((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=E.single(i.from,i.to),l=t.state.facet(Ni);return t.dispatch({selection:s,effects:[Mf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),Qv(t),!0}),Gb=Zs((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:E.create(n.map(r=>E.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),qb=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Hs(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(E.range(o.value.from,o.value.to))}return e(t.update({selection:E.create(s,l),userEvent:"select.search.matches"})),!0},fm=Zs((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,c=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),c.push(F.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(o);return l&&(a=E.single(l.from,l.to).map(h),c.push(Mf(t,l)),c.push(n.facet(Ni).scrollToMatch(a.main,t))),t.dispatch({changes:h,selection:a,effects:c,userEvent:"input.replace"}),!0}),Yb=Zs((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:F.announce.of(r),userEvent:"input.replace.all"}),!0});function Ef(t){return t.state.facet(Ni).createPanel(t)}function nh(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(Ni);return new Gv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function Yv(t){let e=jo(t,Ef);return e&&e.dom.querySelector("[main-field]")}function Qv(t){let e=Yv(t);e&&e==t.root.activeElement&&e.select()}const Jv=t=>{let e=t.state.field(Qn,!1);if(e&&e.panel){let n=Yv(t);if(n&&n!=t.root.activeElement){let r=nh(t.state,e.query.spec);r.valid&&t.dispatch({effects:Ws.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Af.of(!0),e?Ws.of(nh(t.state,e.query.spec)):ae.appendConfig.of(Zb)]});return!0},Xv=t=>{let e=t.state.field(Qn,!1);if(!e||!e.panel)return!1;let n=jo(t,Ef);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Af.of(!1)}),!0},Qb=[{key:"Mod-f",run:Jv,scope:"editor search-panel"},{key:"F3",run:Ko,shift:Go,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ko,shift:Go,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Xv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:qb},{key:"Mod-Alt-g",run:Ib},{key:"Mod-d",run:_b,preventDefault:!0}];class Jb{constructor(e){this.view=e;let n=this.query=e.state.field(Qn).query.spec;this.commit=this.commit.bind(this),this.searchField=Le("input",{value:n.search,placeholder:ft(e,"Find"),"aria-label":ft(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Le("input",{value:n.replace,placeholder:ft(e,"Replace"),"aria-label":ft(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Le("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Le("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Le("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return Le("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=Le("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Ko(e),[ft(e,"next")]),r("prev",()=>Go(e),[ft(e,"previous")]),r("select",()=>Gb(e),[ft(e,"all")]),Le("label",null,[this.caseField,ft(e,"match case")]),Le("label",null,[this.reField,ft(e,"regexp")]),Le("label",null,[this.wordField,ft(e,"by word")]),...e.state.readOnly?[]:[Le("br"),this.replaceField,r("replace",()=>fm(e),[ft(e,"replace")]),r("replaceAll",()=>Yb(e),[ft(e,"replace all")])],Le("button",{name:"close",onclick:()=>Xv(e),"aria-label":ft(e,"close"),type:"button"},["×"])])}commit(){let e=new Gv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ws.of(e)}))}keydown(e){QS(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Go:Ko)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),fm(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Ws)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ni).top}}function ft(t,e){return t.state.phrase(e)}const Fl=30,_l=/[\s\.,:;?!]/;function Mf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Fl),l=Math.min(i,n+Fl),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<Fl;a++)if(!_l.test(o[a+1])&&_l.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-Fl;a--)if(!_l.test(o[a-1])&&_l.test(o[a])){o=o.slice(0,a);break}}return F.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const Xb=F.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Zb=[Qn,ha.low(Kb),Xb],jt={PAGE_BREAK:/^\={3,}$/,CHARACTER:/^([A-Z][A-Z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,CHARACTER_POWER_USER:/^(?:@)([A-Za-z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,SCENE:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,TRANSITION:/^((?:FADE (?:IN|TO BLACK|OUT)|CUT TO BLACK)[\:\.]?|.+ TO\:)/i,TRANSITION_POWER_USER:/^(?:> )(.+)/i,TITLE:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,SECTION:/^(#{1,4})\ (.*)/,MILESTONE:/^(?:\ +)?-\ (.+)/,IMAGE:/^(\[i\]https:\/\/(.+))/i,AUDIO:/^(\[a\]https:\/\/(.+))/i},eA=vf.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(jt.TRANSITION)||t.match(jt.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(jt.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(jt.CHARACTER))||(n=t.match(jt.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(jt.IMAGE)||t.match(jt.AUDIO)?"link":t.match(jt.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(jt.TITLE))return t.skipTo(":"),t.next(),"def";if(n=t.match(jt.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(jt.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),tA=wt.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push($.line({class:"cm-keyword"}).range(s.from)),e.push($.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push($.line({class:"cm-header"}).range(s.from)),e.push($.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push($.line({class:"cm-atom"}).range(s.from)),e.push($.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push($.line({class:"cm-synopsis"}).range(s.from)),e.push($.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push($.line({class:"cm-number"}).range(s.from)),e.push($.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push($.line({class:"cm-variable"}).range(s.from)),e.push($.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return $.set(e)}},{decorations:t=>t.decorations}),Zv=I.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=I.useRef(null),l=I.useRef(null);return I.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:F.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),I.useEffect(()=>{if(!s.current)return;const o=[hC(),ZS(),XC(),c2(),WC(),F.lineWrapping,eA,tA,F.domEventHandlers({mouseup:(c,h)=>{setTimeout(()=>{const f=h.state.selection.main.head,d=h.state.doc.lineAt(f);n(d.number-1)},10)}}),O2,Uy.of([...Lb,...Qb]),F.updateListener.of(c=>{if(c.docChanged&&e(c.state.doc.toString()),c.selectionSet&&!c.docChanged){const h=c.state.selection.main.head,f=c.state.doc.lineAt(h);n(f.number-1)}}),F.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=te.create({doc:t,extensions:o}),u=new F({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),I.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),m.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});Zv.displayName="CodeMirrorEditor";const nA={VITE_GOOGLE_CLIENT_ID:"332933508693-u0f8kifpkma08osh7cscdcdbgsqi4ir1.apps.googleusercontent.com"};let Ln="";function rA(){return new Promise(t=>{if(window.google)return t();const e=setInterval(()=>{window.google&&(clearInterval(e),t())},50)})}async function rh(t){if(Ln&&!(t&&t.prompt==="consent"))return Ln;await rA();const e=window.google,n=nA||{},r=e.accounts.oauth2.initTokenClient({client_id:n.VITE_GOOGLE_CLIENT_ID,scope:["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly"].join(" "),callback:i=>{Ln=i.access_token}});return new Promise((i,s)=>{r.callback=o=>{if(o&&o.error)return s(o);Ln=o&&o.access_token?o.access_token:Ln,i(Ln)};const l=t&&t.prompt==="consent"?"consent":"";try{r.requestAccessToken({prompt:l})}catch(o){s(o)}})}async function qo(t,e={},n=!1){var s;const r=await rh(),i=await fetch(t,{...e,headers:{...e.headers||{},Authorization:`Bearer ${r}`}});if(!i.ok)try{const o=await i.clone().text().catch(()=>"<could not read body>");console.debug("authedFetch non-OK response",{url:((s=t==null?void 0:t.toString)==null?void 0:s.call(t))||t,status:i.status,bodyPreview:o.slice(0,200)})}catch(l){console.debug("authedFetch: failed to read non-OK response body",l)}if(i.status===401)return Ln="",qo(t,e,n);if(i.status===403&&!n)try{return console.debug("authedFetch: 403 received, attempting re-consent and retry"),Ln="",await rh({prompt:"consent"}),qo(t,e,!0)}catch(l){console.debug("authedFetch: re-consent attempt failed",l)}return i}const Tf="fountain:driveState";function nn(){try{return JSON.parse(localStorage.getItem(Tf)||"{}")}catch{return{}}}function iA(t){localStorage.setItem(Tf,JSON.stringify(t))}function sA(){localStorage.removeItem(Tf)}function Fr(t){try{try{console.log("persistDriveState: about to save",t)}catch{}iA(t);try{const e="fountain:driveState",n=localStorage.getItem(e);console.log("persistDriveState: saved to localStorage",{key:e,valuePreview:n&&n.slice?n.slice(0,1e3):n})}catch{}}catch(e){console.error("persistDriveState failed",e)}}const lA={VITE_GCP_PROJECT_NUMBER:"332933508693",VITE_GOOGLE_API_KEY:"AIzaSyBNuoxiWJI0jd68umAFLH0QYfuJdyAHUUs"};function oA(t=3e3){return new Promise((e,n)=>{if(window.gapi)return e();const r=Date.now(),i=setInterval(()=>{if(window.gapi)return clearInterval(i),e();if(Date.now()-r>t)return clearInterval(i),n(new Error("gapi did not load"))},50)})}function aA(){return new Promise(async(t,e)=>{try{await oA()}catch{return e(new Error("Google API library (gapi) not loaded. Ensure https://apis.google.com/js/api.js is included."))}try{window.gapi.load("picker",()=>{if(!window.google||!window.google.picker)return e(new Error("Google Picker API not available on window.google.picker. Make sure the Picker API is enabled in Google Cloud Console."));t()})}catch(n){e(n)}})}async function uA(){await aA();const t=await rh(),e=window.google,n=new e.picker.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder");return new Promise(r=>{const i=lA||{};new e.picker.PickerBuilder().setAppId(i.VITE_GCP_PROJECT_NUMBER).setDeveloperKey(i.VITE_GOOGLE_API_KEY).setOAuthToken(t).addView(n).setTitle("Choose a Drive Folder").setCallback(l=>{var o;if(l.action===e.picker.Action.PICKED&&((o=l.docs)!=null&&o.length)){console.log("Google Picker selected folder:",l.docs[0]);try{const a=new CustomEvent("fountain:drive:folderSelected",{detail:l.docs[0]});window.dispatchEvent(a)}catch(a){console.warn("picker: could not dispatch folderSelected event",a)}try{const a={...nn(),folderId:l.docs[0].id,folderName:l.docs[0].name,folder:l.docs[0]};Fr(a)}catch(a){console.warn("picker: failed to persist folder as fallback",a)}r({id:l.docs[0].id,name:l.docs[0].name})}else r(null)}).build().setVisible(!0)})}async function cA(t){if(!t)return[];const e=`'${t}' in parents and trashed = false`,r=`https://www.googleapis.com/drive/v3/files?${new URLSearchParams({q:e,fields:"files(id,name,mimeType)",pageSize:"200"}).toString()}`,i=await qo(r);if(!i.ok)throw new Error(`Drive list failed: ${i.status}`);return((await i.json()).files||[]).map(l=>({id:l.id,name:l.name,mimeType:l.mimeType}))}async function hA(t){if(!t)throw new Error("fileId required");const e=`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,n=await qo(e);if(!n.ok)throw new Error(`Failed to fetch file content: ${n.status}`);return await n.text()}function fA(t=""){const[e,n]=I.useState([]),[r,i]=I.useState([]),[s,l]=I.useState(new Map),o=I.useRef(null),[a,u]=I.useState(!0);return I.useEffect(()=>{if(!a){if(t){const h=ba(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}return}(function(){try{const h=new Worker(new URL("/assets/previewWorker-D6jE4gsy.js",import.meta.url),{type:"module"});return h.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},h.onmessage=f=>{const{type:d,blocks:g,characters:w,characterLineCounts:x}=f.data;d==="result"?(n(g||[]),i(w||[]),l(x||new Map)):d==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=h,t&&h.postMessage({type:"process",text:t}),()=>{try{h.terminate()}catch{}}}catch(h){console.error("Failed to create module worker, falling back to main-thread parsing:",h),u(!1)}})()},[a]),I.useEffect(()=>{if(!a&&t){const h=ba(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:h=>{if(a&&o.current)o.current.postMessage({type:"process",text:h});else{const f=ba(h);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let dA=1;function pA(){const t=I.useRef(null),e=I.useRef(new Map),[n,r]=I.useState([]),i=I.useRef(!1);I.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=I.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-PCay-oew.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:c,requestId:h,message:f}=a.data||{};if(h&&e.current.has(h)){const{resolve:d,reject:g}=e.current.get(h);if(e.current.delete(h),u==="panels")try{d(c)}catch{}else if(u==="error")try{g(new Error(f||"worker error"))}catch{}else try{g(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(c)&&r(c)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=I.useCallback(o=>{const a=s();if(!a)try{const c=w1(o);return r(c),Promise.resolve(c)}catch(c){return Promise.reject(c)}const u=String(dA++);return new Promise((c,h)=>{e.current.set(u,{resolve:c,reject:h});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),h(f)}}).then(c=>(i.current&&r(c),c))},[s]);return{panels:n,parsePanels:l}}const wu=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Hey—did the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE – CODING AND COFFEE\r
\r
— Keys clack.  \r
— Tests blink green, then red, then righteous green again.  \r
— A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pings—just shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing → preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open → payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function mA(){const[t,e]=I.useState(!1),[n,r]=I.useState(""),[i,s]=I.useState(!1),[l,o]=I.useState(!1),[a,u]=I.useState("edit"),[c,h]=I.useState(0),[f,d]=I.useState(!1),[g,w]=I.useState(null),[x,p]=I.useState(!1),[y,v]=I.useState(()=>nn()),S={...nn()||{},...y||{}};I.useEffect(()=>{const k=K=>{try{const G=K&&K.detail?K.detail:null;if(G&&G.id){const fe={...nn(),fileId:G.id,fileName:G.name,file:G};try{Fr(fe)}catch(Je){console.error("App: persistDriveState failed",Je)}v(fe)}}catch(G){console.error("App: fileSelected handler failed",G)}},L=()=>{try{const G={...nn()||{},fileId:void 0,fileName:void 0,file:void 0};try{Fr(G)}catch(fe){console.error("App: persistDriveState failed",fe)}v(G)}catch(K){console.error("App: fileCleared handler failed",K)}};return window.addEventListener("fountain:drive:fileSelected",k),window.addEventListener("fountain:drive:fileCleared",L),()=>{window.removeEventListener("fountain:drive:fileSelected",k),window.removeEventListener("fountain:drive:fileCleared",L)}},[]);const C=!!(y&&(y.folderId||y.folderName)),A=I.useRef(null),b=I.useRef(null),N=I.useRef([]),H=I.useRef(null),[j,V]=I.useState(!1),[W,Q]=I.useState(!1),[re,we]=I.useState([]),[rt,Ct]=I.useState(!1);I.useEffect(()=>{try{console.log("App: driveState changed",y)}catch{}},[y]),I.useEffect(()=>{const k=localStorage.getItem("fountain-script");let L=wu;if(k)try{const K=JSON.parse(k);L=K.content,d(!0),w(new Date(K.savedAt))}catch(K){console.error("Error parsing saved script:",K),localStorage.removeItem("fountain-script")}r(L),q(L);try{typeof Se=="function"&&Se(L)}catch{}},[]),I.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const L=navigator.userAgent||"",K=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(L),G=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,fe=(window.innerWidth||screen.width||0)<1024;(K||G&&fe)&&e(!0)}catch{}},[]),I.useEffect(()=>{const k=L=>{(L.ctrlKey||L.metaKey)&&String(L.key).toLowerCase()==="g"&&(L.preventDefault(),p(K=>!K))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[]),I.useEffect(()=>{const k=K=>{try{const G=K&&K.detail?K.detail:null;if(G&&G.id){const fe={...nn(),folderId:G.id,folderName:G.name,folder:G};try{Fr(fe)}catch(Je){console.error("App: persistDriveState failed",Je)}v(fe)}else v(nn())}catch(G){console.error("App: failed to load drive state",G)}},L=()=>v({});return window.addEventListener("fountain:drive:folderSelected",k),window.addEventListener("fountain:drive:cleared",L),()=>{window.removeEventListener("fountain:drive:folderSelected",k),window.removeEventListener("fountain:drive:cleared",L)}},[]);const{blocks:P,characters:_,characterLineCounts:U,processText:q}=fA(""),{panels:O,parsePanels:Se}=pA(),[ee,He]=I.useState(0),[Te,Qt]=I.useState("screenplay"),We=I.useRef(null),[Di,Mn]=I.useState(!1),el=I.useRef(null),ht=I.useRef(null),[Nf,Oi]=I.useState(!1),ur=I.useRef(null),[Df,tl]=I.useState(!1);I.useEffect(()=>{N.current=P},[P]);const e1=k=>{r(k),q(k);try{typeof Se=="function"&&Se(k)}catch{}},t1=()=>{!Array.isArray(O)||O.length===0||(Ca(),Oi(!1),ur.current="user",He(k=>{const L=O.length;return((k-1)%L+L)%L}))},Of=(k=!0)=>{!Array.isArray(O)||O.length===0||(ur.current=k?"user":"auto",k&&(Ca(),Oi(!1)),He(L=>{const K=O.length;return(L+1)%K}))},n1=async()=>{Nf&&(He(0),Oi(!1));try{We.current&&We.current.paused&&(We.current.currentTime=0)}catch{}Mn(!0)},r1=()=>{if(We.current){ur.current="user";try{We.current.pause()}catch{}Mn(!1)}},i1=()=>{Ca(),Oi(!1);try{He(0)}catch{}};function Ca(){try{ht.current&&(clearTimeout(ht.current),ht.current=null)}catch{}try{We.current&&(ur.current="user",We.current.pause(),We.current.currentTime=0)}catch{}Mn(!1)}I.useEffect(()=>{const k=We.current;if(!k)return;const L=()=>Mn(!0),K=()=>{ur.current==="user"&&Mn(!1)},G=()=>{Of(!1)};return k.addEventListener("play",L),k.addEventListener("pause",K),k.addEventListener("ended",G),()=>{k.removeEventListener("play",L),k.removeEventListener("pause",K),k.removeEventListener("ended",G)}},[ee,O]),I.useEffect(()=>{if(ht.current&&(clearTimeout(ht.current),ht.current=null),!Di)return;const k=O&&O.length>0?O[ee]||O[0]:null;if(!k){Mn(!1);return}try{We.current&&We.current.play().catch(()=>{})}catch{}const L=Math.max(1e3,typeof k.duration=="number"?k.duration*1e3:3e3);return ht.current=setTimeout(()=>{!O||ee>=O.length-1?(Mn(!1),Oi(!0),ht.current=null):He(K=>K+1)},L),()=>{ht.current&&(clearTimeout(ht.current),ht.current=null)}},[Di,ee,O]),I.useEffect(()=>{if(We.current)try{ur.current==="user"&&(We.current.pause(),We.current.currentTime=0,Mn(!1))}catch{}ur.current=null;try{el.current&&typeof el.current.scrollTo=="function"&&el.current.scrollTo({top:0,behavior:"smooth"})}catch{}},[ee]),I.useEffect(()=>()=>{try{ht.current&&clearTimeout(ht.current)}catch{}},[]),I.useEffect(()=>{try{const k=O&&O.length>0&&O[ee]?O[ee]:null}catch{}},[O,ee]),I.useEffect(()=>{tl(!1)},[ee]);const s1=()=>{if(n.trim()){const k={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(k)),d(!0),w(new Date)}},l1=async()=>{try{if(!await uA())return}catch(k){console.error("Folder pick failed",k),alert("Could not open folder picker. Check console for details.")}},o1=async()=>{try{const k=nn(),L=k&&k.folderId?k.folderId:null;if(!L){alert("No Drive folder selected. Use Change Folder first.");return}Q(!0),Ct(!0);const G=(await cA(L)||[]).filter(fe=>typeof fe.name=="string"&&fe.name.toLowerCase().endsWith(".fountain"));we(G)}catch(k){console.error("openGDriveLoad failed",k),alert("Could not list files from Drive. Check console for details.")}finally{Ct(!1)}},a1=()=>{const k=localStorage.getItem("fountain-script");if(k)try{const L=JSON.parse(k);r(L.content),q(L.content),w(new Date(L.savedAt))}catch(L){console.error("Error loading saved script:",L)}},u1=()=>{localStorage.removeItem("fountain-script"),d(!1),w(null),r(wu),q(wu)},c1=async()=>{try{await navigator.clipboard.writeText(n)}catch{const L=document.createElement("textarea");L.value=n,document.body.appendChild(L),L.select(),document.execCommand("copy"),document.body.removeChild(L)}},h1=async()=>{try{const k=await navigator.clipboard.readText();r(k),q(k)}catch(k){console.error("Error pasting from clipboard:",k)}},f1=()=>{r(""),q("");try{b.current&&b.current.focus&&b.current.focus()}catch{}},d1=I.useCallback(k=>{const L=N.current;if(h(k),A.current&&L.length>0){let K=null;for(let G=L.length-1;G>=0;G--)if(L[G].index<=k){K=L[G];break}if(K){const G=A.current.querySelector(`[data-line-id="${K.id}"]`);if(G){const fe=A.current,Je=fe.getBoundingClientRect(),Pi=G.getBoundingClientRect(),nl=Pi.top-Je.top,g1=Je.height,y1=Pi.height,v1=fe.scrollTop+nl-g1/2+y1/2;fe.scrollTo({top:v1,behavior:"smooth"})}}}},[]),p1=I.useCallback(k=>{b.current&&b.current.scrollToLine&&b.current.scrollToLine(k)},[]);I.useEffect(()=>{const k=L=>{L.key==="Escape"&&(i?s(!1):l&&o(!1))};if(i||l)return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[i,l]),I.useEffect(()=>{const k=()=>{V(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",k),()=>document.removeEventListener("fullscreenchange",k)},[]);const m1=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),V(!1)):H.current&&H.current.requestFullscreen?(await H.current.requestFullscreen(),V(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),V(!0))}catch(k){console.error("Fullscreen toggle failed",k)}};return m.jsxs("div",{className:"fountain-app",ref:H,children:[t&&m.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),m.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"×"})]}),m.jsxs("div",{className:"modal-body",children:[m.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),m.jsxs("p",{style:{marginTop:"1rem"},children:[m.jsx("strong",{children:"How to:"}),' open your browser menu (⋮) and choose "Desktop site" or "Request desktop site".']})]}),m.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:m.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"Got it"})})]})}),m.jsxs("div",{className:"persistence-toolbar",children:[m.jsxs("div",{className:"toolbar-group",children:[x?m.jsxs(m.Fragment,{children:[m.jsxs("button",{className:"toolbar-btn",onClick:l1,title:"Change Drive folder",children:[m.jsx("i",{className:"fas fa-folder-open"})," Change Folder"]}),m.jsxs("button",{className:`toolbar-btn ${!n.trim()||!C?"disabled":""}`,onClick:()=>alert("GDrive Save — not implemented yet"),disabled:!n.trim()||!C,title:"Save to Google Drive",children:[m.jsx("i",{className:"fab fa-google-drive"})," GDrive Save"]}),m.jsxs("button",{className:`toolbar-btn ${!n.trim()||!C?"disabled":""}`,onClick:()=>alert("GDrive Save As — not implemented yet"),disabled:!n.trim()||!C,title:"Save as to Google Drive",children:[m.jsx("i",{className:"fas fa-file-export"})," GDrive Save As"]}),m.jsxs("button",{className:`toolbar-btn ${!f||!C?"disabled":""}`,onClick:o1,disabled:!f||!C,title:"Load from Google Drive",children:[m.jsx("i",{className:"fas fa-download"})," GDrive Load"]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("button",{className:`toolbar-btn ${n.trim()?"":"disabled"}`,onClick:s1,disabled:!n.trim(),title:"Save current script to browser storage",children:[m.jsx("i",{className:"fas fa-save"}),"Save"]}),m.jsxs("button",{className:`toolbar-btn ${f?"":"disabled"}`,onClick:a1,disabled:!f,title:g?`Load saved script (${g.toLocaleDateString()} ${g.toLocaleTimeString()})`:"Load saved script",children:[m.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),m.jsxs("button",{className:"toolbar-btn",onClick:c1,title:"Copy editor contents to clipboard",children:[m.jsx("i",{className:"fas fa-copy"}),"Copy"]}),m.jsxs("button",{className:"toolbar-btn",onClick:h1,title:"Paste from clipboard to editor",children:[m.jsx("i",{className:"fas fa-paste"}),"Paste"]})]}),!x&&m.jsxs("button",{className:`toolbar-btn danger ${n.trim()?"":"disabled"}`,onClick:f1,disabled:!n.trim(),title:"Clear editor contents",children:[m.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),x?m.jsx("div",{style:{fontSize:12,color:"#f5f5f5"},children:S&&S.folderName?m.jsxs("div",{children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Folder:"})," ",S.folderName,m.jsx("a",{href:"#",onClick:k=>{k.preventDefault();try{sA(),v({}),window.dispatchEvent(new CustomEvent("fountain:drive:cleared")),console.log("App: cleared drive state")}catch(L){console.error("App: failed to clear drive state",L)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:"Clear"})]}),S&&S.fileName?m.jsxs("div",{style:{marginTop:4},children:[m.jsxs("span",{style:{fontSize:12,color:"#ddd"},children:[m.jsx("strong",{children:"File:"})," ",S.fileName]}),m.jsx("a",{href:"#",onClick:k=>{k.preventDefault();try{const L={...nn(),fileId:void 0,fileName:void 0,file:void 0};Fr(L),v(L),window.dispatchEvent(new CustomEvent("fountain:drive:fileCleared"))}catch(L){console.error("App: failed to clear file selection",L)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:"Clear file"})]}):null]}):"No folder selected"}):m.jsxs("button",{className:`toolbar-btn danger ${f?"":"disabled"}`,onClick:u1,disabled:!f,title:"Clear saved script from storage",children:[m.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),m.jsx("div",{className:"toolbar-divider"}),m.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>s(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[m.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),m.jsxs("button",{className:`toolbar-btn character-btn ${_.length===0?"disabled":""}`,onClick:()=>_.length>0&&o(!0),title:_.length>0?"Character List":"No characters found",disabled:_.length===0,children:[m.jsx("i",{className:"fas fa-user"}),"Characters",_.length>0&&m.jsx("span",{className:"character-count-badge",children:_.length})]})]}),g&&m.jsxs("div",{className:"last-saved",children:["Last saved: ",g.toLocaleDateString()," at ",g.toLocaleTimeString()]})]}),m.jsx("div",{className:"mobile-view-toggle",children:m.jsx("div",{className:"tabs is-centered",children:m.jsxs("ul",{children:[m.jsx("li",{className:a==="edit"?"is-active":"",children:m.jsxs("a",{onClick:()=>u("edit"),children:[m.jsx("span",{className:"icon is-small",children:m.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),m.jsx("span",{children:"Edit"})]})}),m.jsx("li",{className:a==="preview"?"is-active":"",children:m.jsxs("a",{onClick:()=>u("preview"),children:[m.jsx("span",{className:"icon is-small",children:m.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),m.jsx("span",{children:"Preview"})]})})]})})}),m.jsxs("div",{className:"editor-layout",children:[m.jsx("button",{className:`toolbar-btn fullscreen-btn ${j?"is-active":""}`,onClick:m1,title:j?"Exit fullscreen":"Enter fullscreen","aria-label":j?"Exit fullscreen":"Enter fullscreen",children:m.jsx("i",{className:`fas ${j?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),m.jsxs("div",{className:"columns is-gapless",children:[m.jsx("div",{className:`column is-half-desktop ${a==="preview"?"mobile-hidden":""}`,children:m.jsxs("div",{className:"box editor-box",children:[m.jsx("h3",{className:"title is-6",children:"Editor"}),m.jsx(Zv,{ref:b,value:n,onChange:e1,onCursorChange:d1,placeholder:"Type your fountain screenplay here..."})]})}),m.jsx("div",{className:`column is-half-desktop ${a==="edit"?"mobile-hidden":""}`,children:m.jsxs("div",{className:"box preview-box",children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[m.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview:"}),m.jsxs("div",{className:"pane-toggle",style:{display:"flex"},children:[m.jsx("button",{className:`toolbar-btn pane-toggle-btn ${Te==="screenplay"?"is-active":""}`,onClick:()=>Qt("screenplay"),"aria-pressed":Te==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),m.jsx("button",{className:`toolbar-btn pane-toggle-btn ${Te==="player"?"is-active":""}`,onClick:()=>Qt("player"),"aria-pressed":Te==="player",title:"Show media player",children:"Player"})]})]}),m.jsx("div",{})]}),Te==="screenplay"?m.jsx("div",{className:"preview-content",ref:A,children:P.length===0?m.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):P.map(k=>m.jsx("div",{className:`preview-line ${k.className||""} ${k.index===c?"current-line":""}`,"data-type":k.type,"data-line-id":k.id,"data-line-index":k.index,onClick:()=>p1(k.index),style:{cursor:"pointer"},children:k.type==="image"||k.type==="audio"||k.type==="title_page"||k.type==="page_break"||k.type==="page_number"?m.jsx("div",{dangerouslySetInnerHTML:{__html:k.text}}):k.text||" "},k.id))}):m.jsxs("div",{className:"media-player",ref:el,style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const k=O&&O.length>0?O[ee]||O[0]:null,L=k&&typeof k.duration=="number"?k.duration:null,K=O&&O.length?O.length:0,G=k&&k.title?String(k.title):"";let fe="untitled";return G&&G.trim()&&(fe=G.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),fe||(fe="untitled")),m.jsxs("div",{className:"player-header",style:{marginBottom:"0.5rem",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[m.jsxs("div",{className:"panel-title-wrapper",style:{position:"relative",display:"inline-block"},children:[m.jsx("div",{className:"panel-title",style:{fontSize:"1.05rem",fontWeight:700},onMouseEnter:()=>tl(!0),onMouseLeave:()=>tl(!1),onClick:()=>tl(Je=>!Je),"aria-haspopup":"true","aria-expanded":Df,children:fe}),k&&k.nesting&&Df?m.jsxs("div",{className:"panel-nesting-tooltip",role:"tooltip",children:[k.nesting.act?m.jsxs("div",{children:[m.jsx("strong",{children:"Act:"})," ",k.nesting.act]}):null,k.nesting.scene?m.jsxs("div",{children:[m.jsx("strong",{children:"Scene:"})," ",k.nesting.scene]}):null,k.nesting.sequence?m.jsxs("div",{children:[m.jsx("strong",{children:"Sequence:"})," ",k.nesting.sequence]}):null,!k.nesting.act&&!k.nesting.sequence&&!k.nesting.scene?m.jsx("div",{style:{color:"#999"},children:"No nesting"}):null]}):null]}),m.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${ee+1} / ${K})`})]}),m.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:m.jsxs("div",{style:{color:"#999"},children:["lines ",k&&typeof k.startLine=="number"?k.startLine:"?","–",k&&typeof k.endLine=="number"?k.endLine:"?"]})})]}),m.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[m.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[m.jsx("span",{style:{fontSize:"0.95rem"},children:"⏱"}),L?`${L}s`:"n/a"]}),m.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:i1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏹"}),m.jsxs("button",{className:`toolbar-btn ${Di?"is-active":""}`,title:"Play","aria-label":"Play",onClick:n1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[Di?m.jsx("span",{className:"playing-indicator","aria-hidden":"true"}):null,"▶︎"]}),m.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:r1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏸"}),m.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:t1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏮"}),m.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:Of,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏭"})]})]}),Di&&(()=>{const Je=O&&O.length>0?O[ee]||O[0]:null,Pi=Je&&typeof Je.duration=="number"?Je.duration:null,nl=Math.max(1e3,typeof Pi=="number"?Pi*1e3:3e3);return m.jsx("div",{className:"player-header-progress-wrapper",style:{position:"relative"},children:m.jsx("div",{className:"player-progress",style:{animationDuration:`${nl}ms`},"aria-hidden":"true"},`player-progress-${ee}-${nl}`)})})()]})})(),(()=>{if(Nf)return m.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:m.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#000",aspectRatio:"16/9"}})});const k=O&&O.length>0?O[ee]||O[0]:null,L=k&&k.imageUrl?k.imageUrl:null;return m.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:L?m.jsx("img",{src:L,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):m.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:m.jsx("span",{children:"No image"})})})})(),(()=>{const k=O&&O.length>0?O[ee]||O[0]:null,L=k&&k.audioUrl?k.audioUrl:null;return m.jsx("div",{style:{marginBottom:"0.75rem"},children:L?m.jsx("audio",{ref:We,controls:!0,src:L,style:{width:"100%"}}):m.jsx("audio",{ref:We,controls:!0,disabled:!0,style:{width:"100%"}})})})(),m.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!O||O.length===0?m.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const k=O&&O.length>0?O[ee]||O[0]:null;return m.jsx("div",{children:m.jsx("div",{style:{padding:"0.5rem"},children:m.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:k&&k.blocks&&k.blocks.length>0?k.blocks.map(L=>m.jsx("div",{className:`preview-line ${L.className||""}`,dangerouslySetInnerHTML:{__html:L.text||" "}},L.id)):k&&k.snippet?k.snippet.split(/\r?\n/).map((L,K)=>m.jsx("div",{style:{whiteSpace:"pre-wrap"},children:L||" "},K)):m.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),i&&m.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Fountain.ext Format Reference"}),m.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:"×"})]}),m.jsxs("div",{className:"modal-body",children:[m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Title Page"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",m.jsx("br",{}),"Credit: Written by",m.jsx("br",{}),"Author: John Dope",m.jsx("br",{}),"Authors: John Dope and Jane Smith",m.jsx("br",{}),"Source: Based on the novel by Famous Writer",m.jsx("br",{}),"Draft Date: October 4, 2025",m.jsx("br",{}),"Date: 10/04/2025",m.jsx("br",{}),"Contact:",m.jsx("br",{}),"    John Dope",m.jsx("br",{}),"    555-123-4567",m.jsx("br",{}),"    john@example.com",m.jsx("br",{}),"    ",m.jsx("br",{}),"    Literary Agent",m.jsx("br",{}),"    Agency Name",m.jsx("br",{}),"    agent@agency.com",m.jsx("br",{}),"Notes: This is a sample script",m.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),m.jsx("p",{children:'Title page elements appear at the top of your script. All are optional. Use "Author" for single writer, "Authors" for multiple. Contact can be multi-line with indentation. End title page with === (page break).'})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Scene Headings"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["EXT. PARKING LOT - DAY",m.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",m.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),m.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Characters & Dialogue"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["MENTOR",m.jsx("br",{}),"Welcome to the team!",m.jsx("br",{}),m.jsx("br",{}),"@MENTOR",m.jsx("br",{}),"(power user syntax)",m.jsx("br",{}),m.jsx("br",{}),"USER #1",m.jsx("br",{}),"Thanks for having me.",m.jsx("br",{}),m.jsx("br",{}),"BOB O'SHAUNNESSY",m.jsx("br",{}),"(whispering)",m.jsx("br",{}),"This is a parenthetical."]}),m.jsx("p",{children:'Characters are ALL CAPS. Use @ for power user syntax or mixed-case names like "@John Doe". Names with @ in front will be counted as characters. Parentheticals go under character names.'})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Dual Dialogue"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["ALICE^",m.jsx("br",{}),"BOB^",m.jsx("br",{}),"CHARLIE^",m.jsx("br",{}),"I can't believe it!",m.jsx("br",{}),m.jsx("br",{}),"CHARLIE ^",m.jsx("br",{}),"DAVE ^",m.jsx("br",{}),"(disgusted)",m.jsx("br",{}),"Eew. no it's nooot!",m.jsx("br",{}),m.jsx("br",{})]}),m.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Action Lines"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["Bob walks into the room and looks around nervously.",m.jsx("br",{}),m.jsx("br",{}),"The computer screen flickers to life."]}),m.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Transitions"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["FADE IN:",m.jsx("br",{}),"CUT TO:",m.jsx("br",{}),"FADE TO BLACK.",m.jsx("br",{}),"> CUT TO BLACK."]}),m.jsx("p",{children:"Transitions control scene changes. Use > for power user syntax."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Centered Text"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:[">INTERMISSION<",m.jsx("br",{}),">THE END<"]}),m.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["# Act I",m.jsx("br",{}),"## Scene 1: The Beginning",m.jsx("br",{}),"### Sequence A: Setup",m.jsx("br",{}),"#### Panel 1",m.jsx("br",{}),"02:30",m.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",m.jsx("br",{}),"[a]https://example.com/dialogue.mp3",m.jsx("br",{}),m.jsx("br",{}),"#### Panel 2",m.jsx("br",{}),"01:15",m.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),m.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Notes & Comments"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["[[This is a note for the writer]]",m.jsx("br",{}),m.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),m.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Special Elements"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["= Synopsis: Brief scene description",m.jsx("br",{}),m.jsx("br",{}),"===",m.jsx("br",{}),"(Page Break)",m.jsx("br",{}),m.jsx("br",{}),"~Lyrics:",m.jsx("br",{}),'~"Happy birthday to you"',m.jsx("br",{}),'~"Happy birthday to you"']}),m.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),W&&m.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Open .fountain from Drive"}),m.jsx("button",{className:"modal-close",onClick:()=>Q(!1),children:"×"})]}),m.jsx("div",{className:"modal-body",children:rt?m.jsx("div",{children:"Loading..."}):m.jsx("div",{children:re&&re.length>0?m.jsx("ul",{children:re.map(k=>m.jsx("li",{style:{padding:"6px 0"},children:m.jsx("a",{href:"#",onClick:async L=>{L.preventDefault();try{const K=await hA(k.id);r(K);try{q(K)}catch(G){console.error("processText failed",G)}try{const fe={...nn()||{},fileId:k.id,fileName:k.name,file:k};try{console.log("App: before persist, localStorage=",localStorage.getItem("fountain:driveState"))}catch{}Fr(fe);try{console.log("App: after persist, localStorage=",localStorage.getItem("fountain:driveState"))}catch{}v(fe);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:k}))}catch{}}catch(G){console.error("Failed to persist selected file",G)}Q(!1)}catch(K){console.error("Failed to load file from Drive",K),alert("Could not load file from Drive. Check console for details.")}},children:k.name})},k.id))}):m.jsx("div",{children:"No .fountain files found in this folder."})})}),m.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:m.jsx("button",{className:"toolbar-btn",onClick:()=>Q(!1),children:"Close"})})]})}),l&&m.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Character List"}),m.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:"×"})]}),m.jsx("div",{className:"modal-body",children:_.length===0?m.jsx("p",{children:"No characters found in the script."}):m.jsx("div",{className:"character-list",children:_.map(k=>m.jsxs("div",{className:"character-item",children:[m.jsx("div",{className:"character-name",children:k}),m.jsxs("div",{className:"character-count",children:[U.get(k)||0," dialogue lines"]})]},k))})})]})})]})}xu.createRoot(document.getElementById("root")).render(m.jsx(B1.StrictMode,{children:m.jsx(mA,{})}));
