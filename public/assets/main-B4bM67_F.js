import{p as ma,a as a1}from"./chunk-B1-1SDTH.js";function u1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nm={exports:{}},_o={},rm={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Is=Symbol.for("react.element"),c1=Symbol.for("react.portal"),h1=Symbol.for("react.fragment"),f1=Symbol.for("react.strict_mode"),d1=Symbol.for("react.profiler"),p1=Symbol.for("react.provider"),m1=Symbol.for("react.context"),g1=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),v1=Symbol.for("react.memo"),w1=Symbol.for("react.lazy"),xf=Symbol.iterator;function x1(t){return t===null||typeof t!="object"?null:(t=xf&&t[xf]||t["@@iterator"],typeof t=="function"?t:null)}var im={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sm=Object.assign,lm={};function vi(t,e,n){this.props=t,this.context=e,this.refs=lm,this.updater=n||im}vi.prototype.isReactComponent={};vi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function om(){}om.prototype=vi.prototype;function qc(t,e,n){this.props=t,this.context=e,this.refs=lm,this.updater=n||im}var Yc=qc.prototype=new om;Yc.constructor=qc;sm(Yc,vi.prototype);Yc.isPureReactComponent=!0;var kf=Array.isArray,am=Object.prototype.hasOwnProperty,Qc={current:null},um={key:!0,ref:!0,__self:!0,__source:!0};function cm(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)am.call(e,r)&&!um.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Is,type:t,key:s,ref:l,props:i,_owner:Qc.current}}function k1(t,e){return{$$typeof:Is,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Is}function S1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sf=/\/+/g;function ga(t,e){return typeof t=="object"&&t!==null&&t.key!=null?S1(""+t.key):e.toString(36)}function Dl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Is:case c1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+ga(l,0):r,kf(i)?(n="",t!=null&&(n=t.replace(Sf,"$&/")+"/"),Dl(i,e,n,"",function(u){return u})):i!=null&&(Jc(i)&&(i=k1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Sf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",kf(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+ga(s,o);l+=Dl(s,e,n,a,i)}else if(a=x1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+ga(s,o++),l+=Dl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Ys(t,e,n){if(t==null)return t;var r=[],i=0;return Dl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function C1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var et={current:null},Ll={transition:null},A1={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Ll,ReactCurrentOwner:Qc};function hm(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:Ys,forEach:function(t,e,n){Ys(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ys(t,function(){e++}),e},toArray:function(t){return Ys(t,function(e){return e})||[]},only:function(t){if(!Jc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=vi;q.Fragment=h1;q.Profiler=d1;q.PureComponent=qc;q.StrictMode=f1;q.Suspense=y1;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A1;q.act=hm;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sm({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=Qc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)am.call(e,a)&&!um.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Is,type:t.type,key:i,ref:s,props:r,_owner:l}};q.createContext=function(t){return t={$$typeof:m1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:p1,_context:t},t.Consumer=t};q.createElement=cm;q.createFactory=function(t){var e=cm.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:g1,render:t}};q.isValidElement=Jc;q.lazy=function(t){return{$$typeof:w1,_payload:{_status:-1,_result:t},_init:C1}};q.memo=function(t,e){return{$$typeof:v1,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=Ll.transition;Ll.transition={};try{t()}finally{Ll.transition=e}};q.unstable_act=hm;q.useCallback=function(t,e){return et.current.useCallback(t,e)};q.useContext=function(t){return et.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return et.current.useDeferredValue(t)};q.useEffect=function(t,e){return et.current.useEffect(t,e)};q.useId=function(){return et.current.useId()};q.useImperativeHandle=function(t,e,n){return et.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return et.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return et.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return et.current.useMemo(t,e)};q.useReducer=function(t,e,n){return et.current.useReducer(t,e,n)};q.useRef=function(t){return et.current.useRef(t)};q.useState=function(t){return et.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return et.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return et.current.useTransition()};q.version="18.3.1";rm.exports=q;var I=rm.exports;const b1=u1(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1=I,M1=Symbol.for("react.element"),T1=Symbol.for("react.fragment"),N1=Object.prototype.hasOwnProperty,O1=E1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P1={key:!0,ref:!0,__self:!0,__source:!0};function fm(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)N1.call(e,r)&&!P1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:M1,type:t,key:s,ref:l,props:i,_owner:O1.current}}_o.Fragment=T1;_o.jsx=fm;_o.jsxs=fm;nm.exports=_o;var y=nm.exports,hu={},dm={exports:{}},wt={},pm={exports:{}},mm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,H){var $=P.length;P.push(H);e:for(;0<$;){var U=$-1>>>1,G=P[U];if(0<i(G,H))P[U]=H,P[$]=G,$=U;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var H=P[0],$=P.pop();if($!==H){P[0]=$;e:for(var U=0,G=P.length,fe=G>>>1;U<fe;){var Se=2*(U+1)-1,de=P[Se],Qe=Se+1,ut=P[Qe];if(0>i(de,$))Qe<G&&0>i(ut,de)?(P[U]=ut,P[Qe]=$,U=Qe):(P[U]=de,P[Se]=$,U=Se);else if(Qe<G&&0>i(ut,$))P[U]=ut,P[Qe]=$,U=Qe;else break e}}return H}function i(P,H){var $=P.sortIndex-H.sortIndex;return $!==0?$:P.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],c=1,h=null,f=3,d=!1,m=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(P){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=P)r(u),H.sortIndex=H.expirationTime,e(a,H);else break;H=n(u)}}function k(P){if(v=!1,w(P),!m)if(n(a)!==null)m=!0,De(C);else{var H=n(u);H!==null&&se(k,H.startTime-P)}}function C(P,H){m=!1,v&&(v=!1,p(N),N=-1),d=!0;var $=f;try{for(w(H),h=n(a);h!==null&&(!(h.expirationTime>H)||P&&!V());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var G=U(h.expirationTime<=H);H=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(a)&&r(a),w(H)}else r(a);h=n(a)}if(h!==null)var fe=!0;else{var Se=n(u);Se!==null&&se(k,Se.startTime-H),fe=!1}return fe}finally{h=null,f=$,d=!1}}var b=!1,A=null,N=-1,W=5,B=-1;function V(){return!(t.unstable_now()-B<W)}function F(){if(A!==null){var P=t.unstable_now();B=P;var H=!0;try{H=A(!0,P)}finally{H?Z():(b=!1,A=null)}}else b=!1}var Z;if(typeof g=="function")Z=function(){g(F)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,R=Q.port2;Q.port1.onmessage=F,Z=function(){R.postMessage(null)}}else Z=function(){x(F,0)};function De(P){A=P,b||(b=!0,Z())}function se(P,H){N=x(function(){P(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){m||d||(m=!0,De(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var $=f;f=H;try{return P()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,H){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var $=f;f=P;try{return H()}finally{f=$}},t.unstable_scheduleCallback=function(P,H,$){var U=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?U+$:U):$=U,P){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=$+G,P={id:c++,callback:H,priorityLevel:P,startTime:$,expirationTime:G,sortIndex:-1},$>U?(P.sortIndex=$,e(u,P),n(a)===null&&P===n(u)&&(v?(p(N),N=-1):v=!0,se(k,$-U))):(P.sortIndex=G,e(a,P),m||d||(m=!0,De(C))),P},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(P){var H=f;return function(){var $=f;f=H;try{return P.apply(this,arguments)}finally{f=$}}}})(mm);pm.exports=mm;var D1=pm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1=I,gt=D1;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gm=new Set,as={};function Mr(t,e){ii(t,e),ii(t+"Capture",e)}function ii(t,e){for(as[t]=e,t=0;t<e.length;t++)gm.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fu=Object.prototype.hasOwnProperty,R1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cf={},Af={};function B1(t){return fu.call(Af,t)?!0:fu.call(Cf,t)?!1:R1.test(t)?Af[t]=!0:(Cf[t]=!0,!1)}function I1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j1(t,e,n,r){if(e===null||typeof e>"u"||I1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tt(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){He[t]=new tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];He[e]=new tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){He[t]=new tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){He[t]=new tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){He[t]=new tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){He[t]=new tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){He[t]=new tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){He[t]=new tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){He[t]=new tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xc=/[\-:]([a-z])/g;function Zc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xc,Zc);He[e]=new tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xc,Zc);He[e]=new tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xc,Zc);He[e]=new tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){He[t]=new tt(t,1,!1,t.toLowerCase(),null,!1,!1)});He.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){He[t]=new tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function eh(t,e,n,r){var i=He.hasOwnProperty(e)?He[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j1(e,n,i,r)&&(n=null),r||i===null?B1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sn=L1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qs=Symbol.for("react.element"),Lr=Symbol.for("react.portal"),Rr=Symbol.for("react.fragment"),th=Symbol.for("react.strict_mode"),du=Symbol.for("react.profiler"),ym=Symbol.for("react.provider"),vm=Symbol.for("react.context"),nh=Symbol.for("react.forward_ref"),pu=Symbol.for("react.suspense"),mu=Symbol.for("react.suspense_list"),rh=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),wm=Symbol.for("react.offscreen"),bf=Symbol.iterator;function bi(t){return t===null||typeof t!="object"?null:(t=bf&&t[bf]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,ya;function zi(t){if(ya===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ya=e&&e[1]||""}return`
`+ya+t}var va=!1;function wa(t,e){if(!t||va)return"";va=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{va=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zi(t):""}function F1(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=wa(t.type,!1),t;case 11:return t=wa(t.type.render,!1),t;case 1:return t=wa(t.type,!0),t;default:return""}}function gu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rr:return"Fragment";case Lr:return"Portal";case du:return"Profiler";case th:return"StrictMode";case pu:return"Suspense";case mu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vm:return(t.displayName||"Context")+".Consumer";case ym:return(t._context.displayName||"Context")+".Provider";case nh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rh:return e=t.displayName||null,e!==null?e:gu(t.type)||"Memo";case bn:e=t._payload,t=t._init;try{return gu(t(e))}catch{}}return null}function z1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gu(e);case 8:return e===th?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _1(t){var e=xm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Js(t){t._valueTracker||(t._valueTracker=_1(t))}function km(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yu(t,e){var n=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ef(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sm(t,e){e=e.checked,e!=null&&eh(t,"checked",e,!1)}function vu(t,e){Sm(t,e);var n=Kn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wu(t,e.type,n):e.hasOwnProperty("defaultValue")&&wu(t,e.type,Kn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wu(t,e,n){(e!=="number"||Jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _i=Array.isArray;function qr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(_i(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kn(n)}}function Cm(t,e){var n=Kn(e.value),r=Kn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Am(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ku(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Am(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xs,bm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xs=Xs||document.createElement("div"),Xs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function us(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H1=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(t){H1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ki[e]=Ki[t]})});function Em(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ki.hasOwnProperty(t)&&Ki[t]?(""+e).trim():e+"px"}function Mm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Em(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var W1=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Su(t,e){if(e){if(W1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Cu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Au=null;function ih(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bu=null,Yr=null,Qr=null;function Of(t){if(t=zs(t)){if(typeof bu!="function")throw Error(M(280));var e=t.stateNode;e&&(e=$o(e),bu(t.stateNode,t.type,e))}}function Tm(t){Yr?Qr?Qr.push(t):Qr=[t]:Yr=t}function Nm(){if(Yr){var t=Yr,e=Qr;if(Qr=Yr=null,Of(t),e)for(t=0;t<e.length;t++)Of(e[t])}}function Om(t,e){return t(e)}function Pm(){}var xa=!1;function Dm(t,e,n){if(xa)return t(e,n);xa=!0;try{return Om(t,e,n)}finally{xa=!1,(Yr!==null||Qr!==null)&&(Pm(),Nm())}}function cs(t,e){var n=t.stateNode;if(n===null)return null;var r=$o(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Eu=!1;if(yn)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){Eu=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{Eu=!1}function V1(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Gi=!1,Xl=null,Zl=!1,Mu=null,U1={onError:function(t){Gi=!0,Xl=t}};function $1(t,e,n,r,i,s,l,o,a){Gi=!1,Xl=null,V1.apply(U1,arguments)}function K1(t,e,n,r,i,s,l,o,a){if($1.apply(this,arguments),Gi){if(Gi){var u=Xl;Gi=!1,Xl=null}else throw Error(M(198));Zl||(Zl=!0,Mu=u)}}function Tr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Lm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pf(t){if(Tr(t)!==t)throw Error(M(188))}function G1(t){var e=t.alternate;if(!e){if(e=Tr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Pf(i),t;if(s===r)return Pf(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function Rm(t){return t=G1(t),t!==null?Bm(t):null}function Bm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Bm(t);if(e!==null)return e;t=t.sibling}return null}var Im=gt.unstable_scheduleCallback,Df=gt.unstable_cancelCallback,q1=gt.unstable_shouldYield,Y1=gt.unstable_requestPaint,ke=gt.unstable_now,Q1=gt.unstable_getCurrentPriorityLevel,sh=gt.unstable_ImmediatePriority,jm=gt.unstable_UserBlockingPriority,eo=gt.unstable_NormalPriority,J1=gt.unstable_LowPriority,Fm=gt.unstable_IdlePriority,Ho=null,ln=null;function X1(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Ho,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:tw,Z1=Math.log,ew=Math.LN2;function tw(t){return t>>>=0,t===0?32:31-(Z1(t)/ew|0)|0}var Zs=64,el=4194304;function Hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function to(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=Hi(o):(s&=l,s!==0&&(r=Hi(s)))}else l=n&~i,l!==0?r=Hi(l):s!==0&&(r=Hi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zt(e),i=1<<n,r|=t[n],e&=~i;return r}function nw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-zt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=nw(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Tu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zm(){var t=Zs;return Zs<<=1,!(Zs&4194240)&&(Zs=64),t}function ka(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function js(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=n}function iw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function lh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ne=0;function _m(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hm,oh,Wm,Vm,Um,Nu=!1,tl=[],jn=null,Fn=null,zn=null,hs=new Map,fs=new Map,Nn=[],sw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lf(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":hs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fs.delete(e.pointerId)}}function Mi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=zs(e),e!==null&&oh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lw(t,e,n,r,i){switch(e){case"focusin":return jn=Mi(jn,t,e,n,r,i),!0;case"dragenter":return Fn=Mi(Fn,t,e,n,r,i),!0;case"mouseover":return zn=Mi(zn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return hs.set(s,Mi(hs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,fs.set(s,Mi(fs.get(s)||null,t,e,n,r,i)),!0}return!1}function $m(t){var e=ur(t.target);if(e!==null){var n=Tr(e);if(n!==null){if(e=n.tag,e===13){if(e=Lm(n),e!==null){t.blockedOn=e,Um(t.priority,function(){Wm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ou(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Au=r,n.target.dispatchEvent(r),Au=null}else return e=zs(n),e!==null&&oh(e),t.blockedOn=n,!1;e.shift()}return!0}function Rf(t,e,n){Rl(t)&&n.delete(e)}function ow(){Nu=!1,jn!==null&&Rl(jn)&&(jn=null),Fn!==null&&Rl(Fn)&&(Fn=null),zn!==null&&Rl(zn)&&(zn=null),hs.forEach(Rf),fs.forEach(Rf)}function Ti(t,e){t.blockedOn===e&&(t.blockedOn=null,Nu||(Nu=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,ow)))}function ds(t){function e(i){return Ti(i,t)}if(0<tl.length){Ti(tl[0],t);for(var n=1;n<tl.length;n++){var r=tl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jn!==null&&Ti(jn,t),Fn!==null&&Ti(Fn,t),zn!==null&&Ti(zn,t),hs.forEach(e),fs.forEach(e),n=0;n<Nn.length;n++)r=Nn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)$m(n),n.blockedOn===null&&Nn.shift()}var Jr=Sn.ReactCurrentBatchConfig,no=!0;function aw(t,e,n,r){var i=ne,s=Jr.transition;Jr.transition=null;try{ne=1,ah(t,e,n,r)}finally{ne=i,Jr.transition=s}}function uw(t,e,n,r){var i=ne,s=Jr.transition;Jr.transition=null;try{ne=4,ah(t,e,n,r)}finally{ne=i,Jr.transition=s}}function ah(t,e,n,r){if(no){var i=Ou(t,e,n,r);if(i===null)Pa(t,e,r,ro,n),Lf(t,r);else if(lw(i,t,e,n,r))r.stopPropagation();else if(Lf(t,r),e&4&&-1<sw.indexOf(t)){for(;i!==null;){var s=zs(i);if(s!==null&&Hm(s),s=Ou(t,e,n,r),s===null&&Pa(t,e,r,ro,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pa(t,e,r,null,n)}}var ro=null;function Ou(t,e,n,r){if(ro=null,t=ih(r),t=ur(t),t!==null)if(e=Tr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Lm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ro=t,null}function Km(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q1()){case sh:return 1;case jm:return 4;case eo:case J1:return 16;case Fm:return 536870912;default:return 16}default:return 16}}var Dn=null,uh=null,Bl=null;function Gm(){if(Bl)return Bl;var t,e=uh,n=e.length,r,i="value"in Dn?Dn.value:Dn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Bl=i.slice(t,1<r?1-r:void 0)}function Il(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nl(){return!0}function Bf(){return!1}function xt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nl:Bf,this.isPropagationStopped=Bf,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nl)},persist:function(){},isPersistent:nl}),e}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ch=xt(wi),Fs=ve({},wi,{view:0,detail:0}),cw=xt(Fs),Sa,Ca,Ni,Wo=ve({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ni&&(Ni&&t.type==="mousemove"?(Sa=t.screenX-Ni.screenX,Ca=t.screenY-Ni.screenY):Ca=Sa=0,Ni=t),Sa)},movementY:function(t){return"movementY"in t?t.movementY:Ca}}),If=xt(Wo),hw=ve({},Wo,{dataTransfer:0}),fw=xt(hw),dw=ve({},Fs,{relatedTarget:0}),Aa=xt(dw),pw=ve({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),mw=xt(pw),gw=ve({},wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yw=xt(gw),vw=ve({},wi,{data:0}),jf=xt(vw),ww={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kw[t])?!!e[t]:!1}function hh(){return Sw}var Cw=ve({},Fs,{key:function(t){if(t.key){var e=ww[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Il(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hh,charCode:function(t){return t.type==="keypress"?Il(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Il(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Aw=xt(Cw),bw=ve({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=xt(bw),Ew=ve({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hh}),Mw=xt(Ew),Tw=ve({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nw=xt(Tw),Ow=ve({},Wo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pw=xt(Ow),Dw=[9,13,27,32],fh=yn&&"CompositionEvent"in window,qi=null;yn&&"documentMode"in document&&(qi=document.documentMode);var Lw=yn&&"TextEvent"in window&&!qi,qm=yn&&(!fh||qi&&8<qi&&11>=qi),zf=" ",_f=!1;function Ym(t,e){switch(t){case"keyup":return Dw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Br=!1;function Rw(t,e){switch(t){case"compositionend":return Qm(e);case"keypress":return e.which!==32?null:(_f=!0,zf);case"textInput":return t=e.data,t===zf&&_f?null:t;default:return null}}function Bw(t,e){if(Br)return t==="compositionend"||!fh&&Ym(t,e)?(t=Gm(),Bl=uh=Dn=null,Br=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qm&&e.locale!=="ko"?null:e.data;default:return null}}var Iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Iw[t.type]:e==="textarea"}function Jm(t,e,n,r){Tm(r),e=io(e,"onChange"),0<e.length&&(n=new ch("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yi=null,ps=null;function jw(t){ag(t,0)}function Vo(t){var e=Fr(t);if(km(e))return t}function Fw(t,e){if(t==="change")return e}var Xm=!1;if(yn){var ba;if(yn){var Ea="oninput"in document;if(!Ea){var Wf=document.createElement("div");Wf.setAttribute("oninput","return;"),Ea=typeof Wf.oninput=="function"}ba=Ea}else ba=!1;Xm=ba&&(!document.documentMode||9<document.documentMode)}function Vf(){Yi&&(Yi.detachEvent("onpropertychange",Zm),ps=Yi=null)}function Zm(t){if(t.propertyName==="value"&&Vo(ps)){var e=[];Jm(e,ps,t,ih(t)),Dm(jw,e)}}function zw(t,e,n){t==="focusin"?(Vf(),Yi=e,ps=n,Yi.attachEvent("onpropertychange",Zm)):t==="focusout"&&Vf()}function _w(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vo(ps)}function Hw(t,e){if(t==="click")return Vo(e)}function Ww(t,e){if(t==="input"||t==="change")return Vo(e)}function Vw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:Vw;function ms(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fu.call(e,i)||!Ht(t[i],e[i]))return!1}return!0}function Uf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $f(t,e){var n=Uf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uf(n)}}function eg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tg(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function dh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Uw(t){var e=tg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eg(n.ownerDocument.documentElement,n)){if(r!==null&&dh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=$f(n,s);var l=$f(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $w=yn&&"documentMode"in document&&11>=document.documentMode,Ir=null,Pu=null,Qi=null,Du=!1;function Kf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Du||Ir==null||Ir!==Jl(r)||(r=Ir,"selectionStart"in r&&dh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qi&&ms(Qi,r)||(Qi=r,r=io(Pu,"onSelect"),0<r.length&&(e=new ch("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ir)))}function rl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var jr={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionend:rl("Transition","TransitionEnd")},Ma={},ng={};yn&&(ng=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);function Uo(t){if(Ma[t])return Ma[t];if(!jr[t])return t;var e=jr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ng)return Ma[t]=e[n];return t}var rg=Uo("animationend"),ig=Uo("animationiteration"),sg=Uo("animationstart"),lg=Uo("transitionend"),og=new Map,Gf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(t,e){og.set(t,e),Mr(e,[t])}for(var Ta=0;Ta<Gf.length;Ta++){var Na=Gf[Ta],Kw=Na.toLowerCase(),Gw=Na[0].toUpperCase()+Na.slice(1);er(Kw,"on"+Gw)}er(rg,"onAnimationEnd");er(ig,"onAnimationIteration");er(sg,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(lg,"onTransitionEnd");ii("onMouseEnter",["mouseout","mouseover"]);ii("onMouseLeave",["mouseout","mouseover"]);ii("onPointerEnter",["pointerout","pointerover"]);ii("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function qf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,K1(r,e,void 0,t),t.currentTarget=null}function ag(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;qf(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;qf(i,o,u),s=a}}}if(Zl)throw t=Mu,Zl=!1,Mu=null,t}function ue(t,e){var n=e[ju];n===void 0&&(n=e[ju]=new Set);var r=t+"__bubble";n.has(r)||(ug(e,t,2,!1),n.add(r))}function Oa(t,e,n){var r=0;e&&(r|=4),ug(n,t,r,e)}var il="_reactListening"+Math.random().toString(36).slice(2);function gs(t){if(!t[il]){t[il]=!0,gm.forEach(function(n){n!=="selectionchange"&&(qw.has(n)||Oa(n,!1,t),Oa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[il]||(e[il]=!0,Oa("selectionchange",!1,e))}}function ug(t,e,n,r){switch(Km(e)){case 1:var i=aw;break;case 4:i=uw;break;default:i=ah}n=i.bind(null,e,n,t),i=void 0,!Eu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pa(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=ur(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Dm(function(){var u=s,c=ih(n),h=[];e:{var f=og.get(t);if(f!==void 0){var d=ch,m=t;switch(t){case"keypress":if(Il(n)===0)break e;case"keydown":case"keyup":d=Aw;break;case"focusin":m="focus",d=Aa;break;case"focusout":m="blur",d=Aa;break;case"beforeblur":case"afterblur":d=Aa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=If;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=fw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Mw;break;case rg:case ig:case sg:d=mw;break;case lg:d=Nw;break;case"scroll":d=cw;break;case"wheel":d=Pw;break;case"copy":case"cut":case"paste":d=yw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Ff}var v=(e&4)!==0,x=!v&&t==="scroll",p=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,w;g!==null;){w=g;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,p!==null&&(k=cs(g,p),k!=null&&v.push(ys(g,k,w)))),x)break;g=g.return}0<v.length&&(f=new d(f,m,null,n,c),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==Au&&(m=n.relatedTarget||n.fromElement)&&(ur(m)||m[vn]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(m=n.relatedTarget||n.toElement,d=u,m=m?ur(m):null,m!==null&&(x=Tr(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=u),d!==m)){if(v=If,k="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Ff,k="onPointerLeave",p="onPointerEnter",g="pointer"),x=d==null?f:Fr(d),w=m==null?f:Fr(m),f=new v(k,g+"leave",d,n,c),f.target=x,f.relatedTarget=w,k=null,ur(c)===u&&(v=new v(p,g+"enter",m,n,c),v.target=w,v.relatedTarget=x,k=v),x=k,d&&m)t:{for(v=d,p=m,g=0,w=v;w;w=Nr(w))g++;for(w=0,k=p;k;k=Nr(k))w++;for(;0<g-w;)v=Nr(v),g--;for(;0<w-g;)p=Nr(p),w--;for(;g--;){if(v===p||p!==null&&v===p.alternate)break t;v=Nr(v),p=Nr(p)}v=null}else v=null;d!==null&&Yf(h,f,d,v,!1),m!==null&&x!==null&&Yf(h,x,m,v,!0)}}e:{if(f=u?Fr(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=Fw;else if(Hf(f))if(Xm)C=Ww;else{C=_w;var b=zw}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Hw);if(C&&(C=C(t,u))){Jm(h,C,n,c);break e}b&&b(t,f,u),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&wu(f,"number",f.value)}switch(b=u?Fr(u):window,t){case"focusin":(Hf(b)||b.contentEditable==="true")&&(Ir=b,Pu=u,Qi=null);break;case"focusout":Qi=Pu=Ir=null;break;case"mousedown":Du=!0;break;case"contextmenu":case"mouseup":case"dragend":Du=!1,Kf(h,n,c);break;case"selectionchange":if($w)break;case"keydown":case"keyup":Kf(h,n,c)}var A;if(fh)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Br?Ym(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(qm&&n.locale!=="ko"&&(Br||N!=="onCompositionStart"?N==="onCompositionEnd"&&Br&&(A=Gm()):(Dn=c,uh="value"in Dn?Dn.value:Dn.textContent,Br=!0)),b=io(u,N),0<b.length&&(N=new jf(N,t,null,n,c),h.push({event:N,listeners:b}),A?N.data=A:(A=Qm(n),A!==null&&(N.data=A)))),(A=Lw?Rw(t,n):Bw(t,n))&&(u=io(u,"onBeforeInput"),0<u.length&&(c=new jf("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=A))}ag(h,e)})}function ys(t,e,n){return{instance:t,listener:e,currentTarget:n}}function io(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=cs(t,n),s!=null&&r.unshift(ys(t,s,i)),s=cs(t,e),s!=null&&r.push(ys(t,s,i))),t=t.return}return r}function Nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yf(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=cs(n,s),a!=null&&l.unshift(ys(n,a,o))):i||(a=cs(n,s),a!=null&&l.push(ys(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Yw=/\r\n?/g,Qw=/\u0000|\uFFFD/g;function Qf(t){return(typeof t=="string"?t:""+t).replace(Yw,`
`).replace(Qw,"")}function sl(t,e,n){if(e=Qf(e),Qf(t)!==e&&n)throw Error(M(425))}function so(){}var Lu=null,Ru=null;function Bu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Iu=typeof setTimeout=="function"?setTimeout:void 0,Jw=typeof clearTimeout=="function"?clearTimeout:void 0,Jf=typeof Promise=="function"?Promise:void 0,Xw=typeof queueMicrotask=="function"?queueMicrotask:typeof Jf<"u"?function(t){return Jf.resolve(null).then(t).catch(Zw)}:Iu;function Zw(t){setTimeout(function(){throw t})}function Da(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ds(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ds(e)}function _n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xi=Math.random().toString(36).slice(2),en="__reactFiber$"+xi,vs="__reactProps$"+xi,vn="__reactContainer$"+xi,ju="__reactEvents$"+xi,ex="__reactListeners$"+xi,tx="__reactHandles$"+xi;function ur(t){var e=t[en];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[en]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xf(t);t!==null;){if(n=t[en])return n;t=Xf(t)}return e}t=n,n=t.parentNode}return null}function zs(t){return t=t[en]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function $o(t){return t[vs]||null}var Fu=[],zr=-1;function tr(t){return{current:t}}function he(t){0>zr||(t.current=Fu[zr],Fu[zr]=null,zr--)}function oe(t,e){zr++,Fu[zr]=t.current,t.current=e}var Gn={},qe=tr(Gn),st=tr(!1),yr=Gn;function si(t,e){var n=t.type.contextTypes;if(!n)return Gn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function lt(t){return t=t.childContextTypes,t!=null}function lo(){he(st),he(qe)}function Zf(t,e,n){if(qe.current!==Gn)throw Error(M(168));oe(qe,e),oe(st,n)}function cg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,z1(t)||"Unknown",i));return ve({},n,r)}function oo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gn,yr=qe.current,oe(qe,t),oe(st,st.current),!0}function ed(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=cg(t,e,yr),r.__reactInternalMemoizedMergedChildContext=t,he(st),he(qe),oe(qe,t)):he(st),oe(st,n)}var cn=null,Ko=!1,La=!1;function hg(t){cn===null?cn=[t]:cn.push(t)}function nx(t){Ko=!0,hg(t)}function nr(){if(!La&&cn!==null){La=!0;var t=0,e=ne;try{var n=cn;for(ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}cn=null,Ko=!1}catch(i){throw cn!==null&&(cn=cn.slice(t+1)),Im(sh,nr),i}finally{ne=e,La=!1}}return null}var _r=[],Hr=0,ao=null,uo=0,kt=[],St=0,vr=null,fn=1,dn="";function lr(t,e){_r[Hr++]=uo,_r[Hr++]=ao,ao=t,uo=e}function fg(t,e,n){kt[St++]=fn,kt[St++]=dn,kt[St++]=vr,vr=t;var r=fn;t=dn;var i=32-zt(r)-1;r&=~(1<<i),n+=1;var s=32-zt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,fn=1<<32-zt(e)+i|n<<i|r,dn=s+t}else fn=1<<s|n<<i|r,dn=t}function ph(t){t.return!==null&&(lr(t,1),fg(t,1,0))}function mh(t){for(;t===ao;)ao=_r[--Hr],_r[Hr]=null,uo=_r[--Hr],_r[Hr]=null;for(;t===vr;)vr=kt[--St],kt[St]=null,dn=kt[--St],kt[St]=null,fn=kt[--St],kt[St]=null}var mt=null,pt=null,pe=!1,jt=null;function dg(t,e){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function td(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mt=t,pt=_n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mt=t,pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vr!==null?{id:fn,overflow:dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mt=t,pt=null,!0):!1;default:return!1}}function zu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _u(t){if(pe){var e=pt;if(e){var n=e;if(!td(t,e)){if(zu(t))throw Error(M(418));e=_n(n.nextSibling);var r=mt;e&&td(t,e)?dg(r,n):(t.flags=t.flags&-4097|2,pe=!1,mt=t)}}else{if(zu(t))throw Error(M(418));t.flags=t.flags&-4097|2,pe=!1,mt=t}}}function nd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mt=t}function ll(t){if(t!==mt)return!1;if(!pe)return nd(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bu(t.type,t.memoizedProps)),e&&(e=pt)){if(zu(t))throw pg(),Error(M(418));for(;e;)dg(t,e),e=_n(e.nextSibling)}if(nd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pt=_n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pt=null}}else pt=mt?_n(t.stateNode.nextSibling):null;return!0}function pg(){for(var t=pt;t;)t=_n(t.nextSibling)}function li(){pt=mt=null,pe=!1}function gh(t){jt===null?jt=[t]:jt.push(t)}var rx=Sn.ReactCurrentBatchConfig;function Oi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function ol(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rd(t){var e=t._init;return e(t._payload)}function mg(t){function e(p,g){if(t){var w=p.deletions;w===null?(p.deletions=[g],p.flags|=16):w.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Un(p,g),p.index=0,p.sibling=null,p}function s(p,g,w){return p.index=w,t?(w=p.alternate,w!==null?(w=w.index,w<g?(p.flags|=2,g):w):(p.flags|=2,g)):(p.flags|=1048576,g)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,g,w,k){return g===null||g.tag!==6?(g=_a(w,p.mode,k),g.return=p,g):(g=i(g,w),g.return=p,g)}function a(p,g,w,k){var C=w.type;return C===Rr?c(p,g,w.props.children,k,w.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===bn&&rd(C)===g.type)?(k=i(g,w.props),k.ref=Oi(p,g,w),k.return=p,k):(k=Vl(w.type,w.key,w.props,null,p.mode,k),k.ref=Oi(p,g,w),k.return=p,k)}function u(p,g,w,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Ha(w,p.mode,k),g.return=p,g):(g=i(g,w.children||[]),g.return=p,g)}function c(p,g,w,k,C){return g===null||g.tag!==7?(g=mr(w,p.mode,k,C),g.return=p,g):(g=i(g,w),g.return=p,g)}function h(p,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=_a(""+g,p.mode,w),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Qs:return w=Vl(g.type,g.key,g.props,null,p.mode,w),w.ref=Oi(p,null,g),w.return=p,w;case Lr:return g=Ha(g,p.mode,w),g.return=p,g;case bn:var k=g._init;return h(p,k(g._payload),w)}if(_i(g)||bi(g))return g=mr(g,p.mode,w,null),g.return=p,g;ol(p,g)}return null}function f(p,g,w,k){var C=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:o(p,g,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qs:return w.key===C?a(p,g,w,k):null;case Lr:return w.key===C?u(p,g,w,k):null;case bn:return C=w._init,f(p,g,C(w._payload),k)}if(_i(w)||bi(w))return C!==null?null:c(p,g,w,k,null);ol(p,w)}return null}function d(p,g,w,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return p=p.get(w)||null,o(g,p,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Qs:return p=p.get(k.key===null?w:k.key)||null,a(g,p,k,C);case Lr:return p=p.get(k.key===null?w:k.key)||null,u(g,p,k,C);case bn:var b=k._init;return d(p,g,w,b(k._payload),C)}if(_i(k)||bi(k))return p=p.get(w)||null,c(g,p,k,C,null);ol(g,k)}return null}function m(p,g,w,k){for(var C=null,b=null,A=g,N=g=0,W=null;A!==null&&N<w.length;N++){A.index>N?(W=A,A=null):W=A.sibling;var B=f(p,A,w[N],k);if(B===null){A===null&&(A=W);break}t&&A&&B.alternate===null&&e(p,A),g=s(B,g,N),b===null?C=B:b.sibling=B,b=B,A=W}if(N===w.length)return n(p,A),pe&&lr(p,N),C;if(A===null){for(;N<w.length;N++)A=h(p,w[N],k),A!==null&&(g=s(A,g,N),b===null?C=A:b.sibling=A,b=A);return pe&&lr(p,N),C}for(A=r(p,A);N<w.length;N++)W=d(A,p,N,w[N],k),W!==null&&(t&&W.alternate!==null&&A.delete(W.key===null?N:W.key),g=s(W,g,N),b===null?C=W:b.sibling=W,b=W);return t&&A.forEach(function(V){return e(p,V)}),pe&&lr(p,N),C}function v(p,g,w,k){var C=bi(w);if(typeof C!="function")throw Error(M(150));if(w=C.call(w),w==null)throw Error(M(151));for(var b=C=null,A=g,N=g=0,W=null,B=w.next();A!==null&&!B.done;N++,B=w.next()){A.index>N?(W=A,A=null):W=A.sibling;var V=f(p,A,B.value,k);if(V===null){A===null&&(A=W);break}t&&A&&V.alternate===null&&e(p,A),g=s(V,g,N),b===null?C=V:b.sibling=V,b=V,A=W}if(B.done)return n(p,A),pe&&lr(p,N),C;if(A===null){for(;!B.done;N++,B=w.next())B=h(p,B.value,k),B!==null&&(g=s(B,g,N),b===null?C=B:b.sibling=B,b=B);return pe&&lr(p,N),C}for(A=r(p,A);!B.done;N++,B=w.next())B=d(A,p,N,B.value,k),B!==null&&(t&&B.alternate!==null&&A.delete(B.key===null?N:B.key),g=s(B,g,N),b===null?C=B:b.sibling=B,b=B);return t&&A.forEach(function(F){return e(p,F)}),pe&&lr(p,N),C}function x(p,g,w,k){if(typeof w=="object"&&w!==null&&w.type===Rr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Qs:e:{for(var C=w.key,b=g;b!==null;){if(b.key===C){if(C=w.type,C===Rr){if(b.tag===7){n(p,b.sibling),g=i(b,w.props.children),g.return=p,p=g;break e}}else if(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===bn&&rd(C)===b.type){n(p,b.sibling),g=i(b,w.props),g.ref=Oi(p,b,w),g.return=p,p=g;break e}n(p,b);break}else e(p,b);b=b.sibling}w.type===Rr?(g=mr(w.props.children,p.mode,k,w.key),g.return=p,p=g):(k=Vl(w.type,w.key,w.props,null,p.mode,k),k.ref=Oi(p,g,w),k.return=p,p=k)}return l(p);case Lr:e:{for(b=w.key;g!==null;){if(g.key===b)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(p,g.sibling),g=i(g,w.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Ha(w,p.mode,k),g.return=p,p=g}return l(p);case bn:return b=w._init,x(p,g,b(w._payload),k)}if(_i(w))return m(p,g,w,k);if(bi(w))return v(p,g,w,k);ol(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(p,g.sibling),g=i(g,w),g.return=p,p=g):(n(p,g),g=_a(w,p.mode,k),g.return=p,p=g),l(p)):n(p,g)}return x}var oi=mg(!0),gg=mg(!1),co=tr(null),ho=null,Wr=null,yh=null;function vh(){yh=Wr=ho=null}function wh(t){var e=co.current;he(co),t._currentValue=e}function Hu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xr(t,e){ho=t,yh=Wr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(it=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(yh!==t)if(t={context:t,memoizedValue:e,next:null},Wr===null){if(ho===null)throw Error(M(308));Wr=t,ho.dependencies={lanes:0,firstContext:t}}else Wr=Wr.next=t;return e}var cr=null;function xh(t){cr===null?cr=[t]:cr.push(t)}function yg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,xh(e)):(n.next=i.next,i.next=n),e.interleaved=n,wn(t,r)}function wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var En=!1;function kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wn(t,n)}return i=r.interleaved,i===null?(e.next=e,xh(r)):(e.next=i.next,i.next=e),r.interleaved=e,wn(t,n)}function jl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lh(t,n)}}function id(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fo(t,e,n,r){var i=t.updateQueue;En=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==l&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;l=0,c=u=a=null,o=s;do{var f=o.lane,d=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,v=o;switch(f=e,d=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(d,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(d,h,f):m,f==null)break e;h=ve({},h,f);break e;case 2:En=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=d,a=h):c=c.next=d,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=h),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xr|=l,t.lanes=l,t.memoizedState=h}}function sd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var _s={},on=tr(_s),ws=tr(_s),xs=tr(_s);function hr(t){if(t===_s)throw Error(M(174));return t}function Sh(t,e){switch(oe(xs,e),oe(ws,t),oe(on,_s),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ku(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ku(e,t)}he(on),oe(on,e)}function ai(){he(on),he(ws),he(xs)}function wg(t){hr(xs.current);var e=hr(on.current),n=ku(e,t.type);e!==n&&(oe(ws,t),oe(on,n))}function Ch(t){ws.current===t&&(he(on),he(ws))}var me=tr(0);function po(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ra=[];function Ah(){for(var t=0;t<Ra.length;t++)Ra[t]._workInProgressVersionPrimary=null;Ra.length=0}var Fl=Sn.ReactCurrentDispatcher,Ba=Sn.ReactCurrentBatchConfig,wr=0,ye=null,be=null,Ne=null,mo=!1,Ji=!1,ks=0,ix=0;function We(){throw Error(M(321))}function bh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function Eh(t,e,n,r,i,s){if(wr=s,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fl.current=t===null||t.memoizedState===null?ax:ux,t=n(r,i),Ji){s=0;do{if(Ji=!1,ks=0,25<=s)throw Error(M(301));s+=1,Ne=be=null,e.updateQueue=null,Fl.current=cx,t=n(r,i)}while(Ji)}if(Fl.current=go,e=be!==null&&be.next!==null,wr=0,Ne=be=ye=null,mo=!1,e)throw Error(M(300));return t}function Mh(){var t=ks!==0;return ks=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?ye.memoizedState=Ne=t:Ne=Ne.next=t,Ne}function Ot(){if(be===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Ne===null?ye.memoizedState:Ne.next;if(e!==null)Ne=e,be=t;else{if(t===null)throw Error(M(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Ne===null?ye.memoizedState=Ne=t:Ne=Ne.next=t}return Ne}function Ss(t,e){return typeof e=="function"?e(t):e}function Ia(t){var e=Ot(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=be,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var c=u.lane;if((wr&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=h,l=r):a=a.next=h,ye.lanes|=c,xr|=c}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,Ht(r,e.memoizedState)||(it=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ye.lanes|=s,xr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ja(t){var e=Ot(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);Ht(s,e.memoizedState)||(it=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xg(){}function kg(t,e){var n=ye,r=Ot(),i=e(),s=!Ht(r.memoizedState,i);if(s&&(r.memoizedState=i,it=!0),r=r.queue,Th(Ag.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ne!==null&&Ne.memoizedState.tag&1){if(n.flags|=2048,Cs(9,Cg.bind(null,n,r,i,e),void 0,null),Pe===null)throw Error(M(349));wr&30||Sg(n,e,i)}return i}function Sg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cg(t,e,n,r){e.value=n,e.getSnapshot=r,bg(e)&&Eg(t)}function Ag(t,e,n){return n(function(){bg(e)&&Eg(t)})}function bg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function Eg(t){var e=wn(t,1);e!==null&&_t(e,t,1,-1)}function ld(t){var e=Zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:t},e.queue=t,t=t.dispatch=ox.bind(null,ye,t),[e.memoizedState,t]}function Cs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Mg(){return Ot().memoizedState}function zl(t,e,n,r){var i=Zt();ye.flags|=t,i.memoizedState=Cs(1|e,n,void 0,r===void 0?null:r)}function Go(t,e,n,r){var i=Ot();r=r===void 0?null:r;var s=void 0;if(be!==null){var l=be.memoizedState;if(s=l.destroy,r!==null&&bh(r,l.deps)){i.memoizedState=Cs(e,n,s,r);return}}ye.flags|=t,i.memoizedState=Cs(1|e,n,s,r)}function od(t,e){return zl(8390656,8,t,e)}function Th(t,e){return Go(2048,8,t,e)}function Tg(t,e){return Go(4,2,t,e)}function Ng(t,e){return Go(4,4,t,e)}function Og(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pg(t,e,n){return n=n!=null?n.concat([t]):null,Go(4,4,Og.bind(null,e,t),n)}function Nh(){}function Dg(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lg(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Rg(t,e,n){return wr&21?(Ht(n,e)||(n=zm(),ye.lanes|=n,xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,it=!0),t.memoizedState=n)}function sx(t,e){var n=ne;ne=n!==0&&4>n?n:4,t(!0);var r=Ba.transition;Ba.transition={};try{t(!1),e()}finally{ne=n,Ba.transition=r}}function Bg(){return Ot().memoizedState}function lx(t,e,n){var r=Vn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ig(t))jg(e,n);else if(n=yg(t,e,n,r),n!==null){var i=Xe();_t(n,t,r,i),Fg(n,e,r)}}function ox(t,e,n){var r=Vn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ig(t))jg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,Ht(o,l)){var a=e.interleaved;a===null?(i.next=i,xh(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=yg(t,e,i,r),n!==null&&(i=Xe(),_t(n,t,r,i),Fg(n,e,r))}}function Ig(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function jg(t,e){Ji=mo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lh(t,n)}}var go={readContext:Nt,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},ax={readContext:Nt,useCallback:function(t,e){return Zt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:od,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zl(4194308,4,Og.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zl(4194308,4,t,e)},useInsertionEffect:function(t,e){return zl(4,2,t,e)},useMemo:function(t,e){var n=Zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lx.bind(null,ye,t),[r.memoizedState,t]},useRef:function(t){var e=Zt();return t={current:t},e.memoizedState=t},useState:ld,useDebugValue:Nh,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=ld(!1),e=t[0];return t=sx.bind(null,t[1]),Zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ye,i=Zt();if(pe){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Pe===null)throw Error(M(349));wr&30||Sg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,od(Ag.bind(null,r,s,t),[t]),r.flags|=2048,Cs(9,Cg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zt(),e=Pe.identifierPrefix;if(pe){var n=dn,r=fn;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ks++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ix++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ux={readContext:Nt,useCallback:Dg,useContext:Nt,useEffect:Th,useImperativeHandle:Pg,useInsertionEffect:Tg,useLayoutEffect:Ng,useMemo:Lg,useReducer:Ia,useRef:Mg,useState:function(){return Ia(Ss)},useDebugValue:Nh,useDeferredValue:function(t){var e=Ot();return Rg(e,be.memoizedState,t)},useTransition:function(){var t=Ia(Ss)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:xg,useSyncExternalStore:kg,useId:Bg,unstable_isNewReconciler:!1},cx={readContext:Nt,useCallback:Dg,useContext:Nt,useEffect:Th,useImperativeHandle:Pg,useInsertionEffect:Tg,useLayoutEffect:Ng,useMemo:Lg,useReducer:ja,useRef:Mg,useState:function(){return ja(Ss)},useDebugValue:Nh,useDeferredValue:function(t){var e=Ot();return be===null?e.memoizedState=t:Rg(e,be.memoizedState,t)},useTransition:function(){var t=ja(Ss)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:xg,useSyncExternalStore:kg,useId:Bg,unstable_isNewReconciler:!1};function Bt(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qo={isMounted:function(t){return(t=t._reactInternals)?Tr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xe(),i=Vn(t),s=pn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,i),e!==null&&(_t(e,t,i,r),jl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xe(),i=Vn(t),s=pn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,i),e!==null&&(_t(e,t,i,r),jl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xe(),r=Vn(t),i=pn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hn(t,i,r),e!==null&&(_t(e,t,r,n),jl(e,t,r))}};function ad(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!ms(n,r)||!ms(i,s):!0}function zg(t,e,n){var r=!1,i=Gn,s=e.contextType;return typeof s=="object"&&s!==null?s=Nt(s):(i=lt(e)?yr:qe.current,r=e.contextTypes,s=(r=r!=null)?si(t,i):Gn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ud(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qo.enqueueReplaceState(e,e.state,null)}function Vu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},kh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nt(s):(s=lt(e)?yr:qe.current,i.context=si(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Wu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qo.enqueueReplaceState(i,i.state,null),fo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ui(t,e){try{var n="",r=e;do n+=F1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Fa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Uu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hx=typeof WeakMap=="function"?WeakMap:Map;function _g(t,e,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vo||(vo=!0,ec=r),Uu(t,e)},n}function Hg(t,e,n){n=pn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Uu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Uu(t,e),typeof r!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function cd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=bx.bind(null,t,e,n),e.then(t,t))}function hd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pn(-1,1),e.tag=2,Hn(n,e,1))),n.lanes|=1),t)}var fx=Sn.ReactCurrentOwner,it=!1;function Je(t,e,n,r){e.child=t===null?gg(e,null,n,r):oi(e,t.child,n,r)}function dd(t,e,n,r,i){n=n.render;var s=e.ref;return Xr(e,i),r=Eh(t,e,n,r,s,i),n=Mh(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xn(t,e,i)):(pe&&n&&ph(e),e.flags|=1,Je(t,e,r,i),e.child)}function pd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!jh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Wg(t,e,s,r,i)):(t=Vl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:ms,n(l,r)&&t.ref===e.ref)return xn(t,e,i)}return e.flags|=1,t=Un(s,r),t.ref=e.ref,t.return=e,e.child=t}function Wg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ms(s,r)&&t.ref===e.ref)if(it=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(it=!0);else return e.lanes=t.lanes,xn(t,e,i)}return $u(t,e,n,r,i)}function Vg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Ur,ht),ht|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(Ur,ht),ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,oe(Ur,ht),ht|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,oe(Ur,ht),ht|=r;return Je(t,e,i,n),e.child}function Ug(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $u(t,e,n,r,i){var s=lt(n)?yr:qe.current;return s=si(e,s),Xr(e,i),n=Eh(t,e,n,r,s,i),r=Mh(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xn(t,e,i)):(pe&&r&&ph(e),e.flags|=1,Je(t,e,n,i),e.child)}function md(t,e,n,r,i){if(lt(n)){var s=!0;oo(e)}else s=!1;if(Xr(e,i),e.stateNode===null)_l(t,e),zg(e,n,r),Vu(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Nt(u):(u=lt(n)?yr:qe.current,u=si(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&ud(e,l,r,u),En=!1;var f=e.memoizedState;l.state=f,fo(e,r,l,i),a=e.memoizedState,o!==r||f!==a||st.current||En?(typeof c=="function"&&(Wu(e,n,c,r),a=e.memoizedState),(o=En||ad(e,n,o,r,f,a,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,vg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Bt(e.type,o),l.props=u,h=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Nt(a):(a=lt(n)?yr:qe.current,a=si(e,a));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==a)&&ud(e,l,r,a),En=!1,f=e.memoizedState,l.state=f,fo(e,r,l,i);var m=e.memoizedState;o!==h||f!==m||st.current||En?(typeof d=="function"&&(Wu(e,n,d,r),m=e.memoizedState),(u=En||ad(e,n,u,r,f,m,a)||!1)?(c||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),l.props=r,l.state=m,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ku(t,e,n,r,s,i)}function Ku(t,e,n,r,i,s){Ug(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&ed(e,n,!1),xn(t,e,s);r=e.stateNode,fx.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=oi(e,t.child,null,s),e.child=oi(e,null,o,s)):Je(t,e,o,s),e.memoizedState=r.state,i&&ed(e,n,!0),e.child}function $g(t){var e=t.stateNode;e.pendingContext?Zf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zf(t,e.context,!1),Sh(t,e.containerInfo)}function gd(t,e,n,r,i){return li(),gh(i),e.flags|=256,Je(t,e,n,r),e.child}var Gu={dehydrated:null,treeContext:null,retryLane:0};function qu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kg(t,e,n){var r=e.pendingProps,i=me.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),oe(me,i&1),t===null)return _u(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Jo(l,r,0,null),t=mr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qu(n),e.memoizedState=Gu,t):Oh(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return dx(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Un(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Un(o,s):(s=mr(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?qu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Gu,r}return s=t.child,t=s.sibling,r=Un(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Oh(t,e){return e=Jo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function al(t,e,n,r){return r!==null&&gh(r),oi(e,t.child,null,n),t=Oh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dx(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=Fa(Error(M(422))),al(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Jo({mode:"visible",children:r.children},i,0,null),s=mr(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&oi(e,t.child,null,l),e.child.memoizedState=qu(l),e.memoizedState=Gu,s);if(!(e.mode&1))return al(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(M(419)),r=Fa(s,r,void 0),al(t,e,l,r)}if(o=(l&t.childLanes)!==0,it||o){if(r=Pe,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wn(t,i),_t(r,t,i,-1))}return Ih(),r=Fa(Error(M(421))),al(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ex.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,pt=_n(i.nextSibling),mt=e,pe=!0,jt=null,t!==null&&(kt[St++]=fn,kt[St++]=dn,kt[St++]=vr,fn=t.id,dn=t.overflow,vr=e),e=Oh(e,r.children),e.flags|=4096,e)}function yd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hu(t.return,e,n)}function za(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Gg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Je(t,e,r.children,n),r=me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yd(t,n,e);else if(t.tag===19)yd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(oe(me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&po(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),za(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&po(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}za(e,!0,n,null,s);break;case"together":za(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Un(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Un(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function px(t,e,n){switch(e.tag){case 3:$g(e),li();break;case 5:wg(e);break;case 1:lt(e.type)&&oo(e);break;case 4:Sh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;oe(co,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(oe(me,me.current&1),e.flags|=128,null):n&e.child.childLanes?Kg(t,e,n):(oe(me,me.current&1),t=xn(t,e,n),t!==null?t.sibling:null);oe(me,me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),oe(me,me.current),r)break;return null;case 22:case 23:return e.lanes=0,Vg(t,e,n)}return xn(t,e,n)}var qg,Yu,Yg,Qg;qg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yu=function(){};Yg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,hr(on.current);var s=null;switch(n){case"input":i=yu(t,i),r=yu(t,r),s=[];break;case"select":i=ve({},i,{value:void 0}),r=ve({},r,{value:void 0}),s=[];break;case"textarea":i=xu(t,i),r=xu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=so)}Su(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(as.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(as.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&ue("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Qg=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pi(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ve(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mx(t,e,n){var r=e.pendingProps;switch(mh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(e),null;case 1:return lt(e.type)&&lo(),Ve(e),null;case 3:return r=e.stateNode,ai(),he(st),he(qe),Ah(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ll(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jt!==null&&(rc(jt),jt=null))),Yu(t,e),Ve(e),null;case 5:Ch(e);var i=hr(xs.current);if(n=e.type,t!==null&&e.stateNode!=null)Yg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ve(e),null}if(t=hr(on.current),ll(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[en]=e,r[vs]=s,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(i=0;i<Wi.length;i++)ue(Wi[i],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":Ef(r,s),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ue("invalid",r);break;case"textarea":Tf(r,s),ue("invalid",r)}Su(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&sl(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&sl(r.textContent,o,t),i=["children",""+o]):as.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ue("scroll",r)}switch(n){case"input":Js(r),Mf(r,s,!0);break;case"textarea":Js(r),Nf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=so)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Am(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[en]=e,t[vs]=r,qg(t,e,!1,!1),e.stateNode=t;e:{switch(l=Cu(n,r),n){case"dialog":ue("cancel",t),ue("close",t),i=r;break;case"iframe":case"object":case"embed":ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wi.length;i++)ue(Wi[i],t);i=r;break;case"source":ue("error",t),i=r;break;case"img":case"image":case"link":ue("error",t),ue("load",t),i=r;break;case"details":ue("toggle",t),i=r;break;case"input":Ef(t,r),i=yu(t,r),ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ve({},r,{value:void 0}),ue("invalid",t);break;case"textarea":Tf(t,r),i=xu(t,r),ue("invalid",t);break;default:i=r}Su(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?Mm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&bm(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&us(t,a):typeof a=="number"&&us(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(as.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ue("scroll",t):a!=null&&eh(t,s,a,l))}switch(n){case"input":Js(t),Mf(t,r,!1);break;case"textarea":Js(t),Nf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?qr(t,!!r.multiple,s,!1):r.defaultValue!=null&&qr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=so)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ve(e),null;case 6:if(t&&e.stateNode!=null)Qg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=hr(xs.current),hr(on.current),ll(e)){if(r=e.stateNode,n=e.memoizedProps,r[en]=e,(s=r.nodeValue!==n)&&(t=mt,t!==null))switch(t.tag){case 3:sl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[en]=e,e.stateNode=r}return Ve(e),null;case 13:if(he(me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&pt!==null&&e.mode&1&&!(e.flags&128))pg(),li(),e.flags|=98560,s=!1;else if(s=ll(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[en]=e}else li(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ve(e),s=!1}else jt!==null&&(rc(jt),jt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?Ee===0&&(Ee=3):Ih())),e.updateQueue!==null&&(e.flags|=4),Ve(e),null);case 4:return ai(),Yu(t,e),t===null&&gs(e.stateNode.containerInfo),Ve(e),null;case 10:return wh(e.type._context),Ve(e),null;case 17:return lt(e.type)&&lo(),Ve(e),null;case 19:if(he(me),s=e.memoizedState,s===null)return Ve(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Pi(s,!1);else{if(Ee!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=po(t),l!==null){for(e.flags|=128,Pi(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return oe(me,me.current&1|2),e.child}t=t.sibling}s.tail!==null&&ke()>ci&&(e.flags|=128,r=!0,Pi(s,!1),e.lanes=4194304)}else{if(!r)if(t=po(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!pe)return Ve(e),null}else 2*ke()-s.renderingStartTime>ci&&n!==1073741824&&(e.flags|=128,r=!0,Pi(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ke(),e.sibling=null,n=me.current,oe(me,r?n&1|2:n&1),e):(Ve(e),null);case 22:case 23:return Bh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ht&1073741824&&(Ve(e),e.subtreeFlags&6&&(e.flags|=8192)):Ve(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function gx(t,e){switch(mh(e),e.tag){case 1:return lt(e.type)&&lo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ai(),he(st),he(qe),Ah(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ch(e),null;case 13:if(he(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));li()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(me),null;case 4:return ai(),null;case 10:return wh(e.type._context),null;case 22:case 23:return Bh(),null;case 24:return null;default:return null}}var ul=!1,$e=!1,yx=typeof WeakSet=="function"?WeakSet:Set,L=null;function Vr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(t,e,r)}else n.current=null}function Qu(t,e,n){try{n()}catch(r){we(t,e,r)}}var vd=!1;function vx(t,e){if(Lu=no,t=tg(),dh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(o=l+i),h!==s||r!==0&&h.nodeType!==3||(a=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++c===r&&(a=l),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ru={focusedElem:t,selectionRange:n},no=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,x=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:Bt(e.type,v),x);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(k){we(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return m=vd,vd=!1,m}function Xi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qu(e,n,s)}i=i.next}while(i!==r)}}function Yo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ju(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jg(t){var e=t.alternate;e!==null&&(t.alternate=null,Jg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[en],delete e[vs],delete e[ju],delete e[ex],delete e[tx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xg(t){return t.tag===5||t.tag===3||t.tag===4}function wd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=so));else if(r!==4&&(t=t.child,t!==null))for(Xu(t,e,n),t=t.sibling;t!==null;)Xu(t,e,n),t=t.sibling}function Zu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zu(t,e,n),t=t.sibling;t!==null;)Zu(t,e,n),t=t.sibling}var Le=null,It=!1;function An(t,e,n){for(n=n.child;n!==null;)Zg(t,e,n),n=n.sibling}function Zg(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Ho,n)}catch{}switch(n.tag){case 5:$e||Vr(n,e);case 6:var r=Le,i=It;Le=null,An(t,e,n),Le=r,It=i,Le!==null&&(It?(t=Le,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(It?(t=Le,n=n.stateNode,t.nodeType===8?Da(t.parentNode,n):t.nodeType===1&&Da(t,n),ds(t)):Da(Le,n.stateNode));break;case 4:r=Le,i=It,Le=n.stateNode.containerInfo,It=!0,An(t,e,n),Le=r,It=i;break;case 0:case 11:case 14:case 15:if(!$e&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Qu(n,e,l),i=i.next}while(i!==r)}An(t,e,n);break;case 1:if(!$e&&(Vr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){we(n,e,o)}An(t,e,n);break;case 21:An(t,e,n);break;case 22:n.mode&1?($e=(r=$e)||n.memoizedState!==null,An(t,e,n),$e=r):An(t,e,n);break;default:An(t,e,n)}}function xd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yx),e.forEach(function(r){var i=Mx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Le=o.stateNode,It=!1;break e;case 3:Le=o.stateNode.containerInfo,It=!0;break e;case 4:Le=o.stateNode.containerInfo,It=!0;break e}o=o.return}if(Le===null)throw Error(M(160));Zg(s,l,i),Le=null,It=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){we(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)e0(e,t),e=e.sibling}function e0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),qt(t),r&4){try{Xi(3,t,t.return),Yo(3,t)}catch(v){we(t,t.return,v)}try{Xi(5,t,t.return)}catch(v){we(t,t.return,v)}}break;case 1:Lt(e,t),qt(t),r&512&&n!==null&&Vr(n,n.return);break;case 5:if(Lt(e,t),qt(t),r&512&&n!==null&&Vr(n,n.return),t.flags&32){var i=t.stateNode;try{us(i,"")}catch(v){we(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Sm(i,s),Cu(o,l);var u=Cu(o,s);for(l=0;l<a.length;l+=2){var c=a[l],h=a[l+1];c==="style"?Mm(i,h):c==="dangerouslySetInnerHTML"?bm(i,h):c==="children"?us(i,h):eh(i,c,h,u)}switch(o){case"input":vu(i,s);break;case"textarea":Cm(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?qr(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?qr(i,!!s.multiple,s.defaultValue,!0):qr(i,!!s.multiple,s.multiple?[]:"",!1))}i[vs]=s}catch(v){we(t,t.return,v)}}break;case 6:if(Lt(e,t),qt(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){we(t,t.return,v)}}break;case 3:if(Lt(e,t),qt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ds(e.containerInfo)}catch(v){we(t,t.return,v)}break;case 4:Lt(e,t),qt(t);break;case 13:Lt(e,t),qt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lh=ke())),r&4&&xd(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?($e=(u=$e)||c,Lt(e,t),$e=u):Lt(e,t),qt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(L=t,c=t.child;c!==null;){for(h=L=c;L!==null;){switch(f=L,d=f.child,f.tag){case 0:case 11:case 14:case 15:Xi(4,f,f.return);break;case 1:Vr(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){we(r,n,v)}}break;case 5:Vr(f,f.return);break;case 22:if(f.memoizedState!==null){Sd(h);continue}}d!==null?(d.return=f,L=d):Sd(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=Em("display",l))}catch(v){we(t,t.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){we(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Lt(e,t),qt(t),r&4&&xd(t);break;case 21:break;default:Lt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xg(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(us(i,""),r.flags&=-33);var s=wd(t);Zu(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=wd(t);Xu(t,o,l);break;default:throw Error(M(161))}}catch(a){we(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wx(t,e,n){L=t,t0(t)}function t0(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||ul;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||$e;o=ul;var u=$e;if(ul=l,($e=a)&&!u)for(L=i;L!==null;)l=L,a=l.child,l.tag===22&&l.memoizedState!==null?Cd(i):a!==null?(a.return=l,L=a):Cd(i);for(;s!==null;)L=s,t0(s),s=s.sibling;L=i,ul=o,$e=u}kd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):kd(t)}}function kd(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$e||Yo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$e)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Bt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sd(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&ds(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}$e||e.flags&512&&Ju(e)}catch(f){we(e,e.return,f)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function Sd(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function Cd(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yo(4,e)}catch(a){we(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){we(e,i,a)}}var s=e.return;try{Ju(e)}catch(a){we(e,s,a)}break;case 5:var l=e.return;try{Ju(e)}catch(a){we(e,l,a)}}}catch(a){we(e,e.return,a)}if(e===t){L=null;break}var o=e.sibling;if(o!==null){o.return=e.return,L=o;break}L=e.return}}var xx=Math.ceil,yo=Sn.ReactCurrentDispatcher,Ph=Sn.ReactCurrentOwner,bt=Sn.ReactCurrentBatchConfig,X=0,Pe=null,Ae=null,_e=0,ht=0,Ur=tr(0),Ee=0,As=null,xr=0,Qo=0,Dh=0,Zi=null,nt=null,Lh=0,ci=1/0,un=null,vo=!1,ec=null,Wn=null,cl=!1,Ln=null,wo=0,es=0,tc=null,Hl=-1,Wl=0;function Xe(){return X&6?ke():Hl!==-1?Hl:Hl=ke()}function Vn(t){return t.mode&1?X&2&&_e!==0?_e&-_e:rx.transition!==null?(Wl===0&&(Wl=zm()),Wl):(t=ne,t!==0||(t=window.event,t=t===void 0?16:Km(t.type)),t):1}function _t(t,e,n,r){if(50<es)throw es=0,tc=null,Error(M(185));js(t,n,r),(!(X&2)||t!==Pe)&&(t===Pe&&(!(X&2)&&(Qo|=n),Ee===4&&On(t,_e)),ot(t,r),n===1&&X===0&&!(e.mode&1)&&(ci=ke()+500,Ko&&nr()))}function ot(t,e){var n=t.callbackNode;rw(t,e);var r=to(t,t===Pe?_e:0);if(r===0)n!==null&&Df(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Df(n),e===1)t.tag===0?nx(Ad.bind(null,t)):hg(Ad.bind(null,t)),Xw(function(){!(X&6)&&nr()}),n=null;else{switch(_m(r)){case 1:n=sh;break;case 4:n=jm;break;case 16:n=eo;break;case 536870912:n=Fm;break;default:n=eo}n=u0(n,n0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function n0(t,e){if(Hl=-1,Wl=0,X&6)throw Error(M(327));var n=t.callbackNode;if(Zr()&&t.callbackNode!==n)return null;var r=to(t,t===Pe?_e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xo(t,r);else{e=r;var i=X;X|=2;var s=i0();(Pe!==t||_e!==e)&&(un=null,ci=ke()+500,pr(t,e));do try{Cx();break}catch(o){r0(t,o)}while(!0);vh(),yo.current=s,X=i,Ae!==null?e=0:(Pe=null,_e=0,e=Ee)}if(e!==0){if(e===2&&(i=Tu(t),i!==0&&(r=i,e=nc(t,i))),e===1)throw n=As,pr(t,0),On(t,r),ot(t,ke()),n;if(e===6)On(t,r);else{if(i=t.current.alternate,!(r&30)&&!kx(i)&&(e=xo(t,r),e===2&&(s=Tu(t),s!==0&&(r=s,e=nc(t,s))),e===1))throw n=As,pr(t,0),On(t,r),ot(t,ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:or(t,nt,un);break;case 3:if(On(t,r),(r&130023424)===r&&(e=Lh+500-ke(),10<e)){if(to(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Iu(or.bind(null,t,nt,un),e);break}or(t,nt,un);break;case 4:if(On(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-zt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xx(r/1960))-r,10<r){t.timeoutHandle=Iu(or.bind(null,t,nt,un),r);break}or(t,nt,un);break;case 5:or(t,nt,un);break;default:throw Error(M(329))}}}return ot(t,ke()),t.callbackNode===n?n0.bind(null,t):null}function nc(t,e){var n=Zi;return t.current.memoizedState.isDehydrated&&(pr(t,e).flags|=256),t=xo(t,e),t!==2&&(e=nt,nt=n,e!==null&&rc(e)),t}function rc(t){nt===null?nt=t:nt.push.apply(nt,t)}function kx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ht(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~Dh,e&=~Qo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zt(e),r=1<<n;t[n]=-1,e&=~r}}function Ad(t){if(X&6)throw Error(M(327));Zr();var e=to(t,0);if(!(e&1))return ot(t,ke()),null;var n=xo(t,e);if(t.tag!==0&&n===2){var r=Tu(t);r!==0&&(e=r,n=nc(t,r))}if(n===1)throw n=As,pr(t,0),On(t,e),ot(t,ke()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,or(t,nt,un),ot(t,ke()),null}function Rh(t,e){var n=X;X|=1;try{return t(e)}finally{X=n,X===0&&(ci=ke()+500,Ko&&nr())}}function kr(t){Ln!==null&&Ln.tag===0&&!(X&6)&&Zr();var e=X;X|=1;var n=bt.transition,r=ne;try{if(bt.transition=null,ne=1,t)return t()}finally{ne=r,bt.transition=n,X=e,!(X&6)&&nr()}}function Bh(){ht=Ur.current,he(Ur)}function pr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Jw(n)),Ae!==null)for(n=Ae.return;n!==null;){var r=n;switch(mh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lo();break;case 3:ai(),he(st),he(qe),Ah();break;case 5:Ch(r);break;case 4:ai();break;case 13:he(me);break;case 19:he(me);break;case 10:wh(r.type._context);break;case 22:case 23:Bh()}n=n.return}if(Pe=t,Ae=t=Un(t.current,null),_e=ht=e,Ee=0,As=null,Dh=Qo=xr=0,nt=Zi=null,cr!==null){for(e=0;e<cr.length;e++)if(n=cr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}cr=null}return t}function r0(t,e){do{var n=Ae;try{if(vh(),Fl.current=go,mo){for(var r=ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mo=!1}if(wr=0,Ne=be=ye=null,Ji=!1,ks=0,Ph.current=null,n===null||n.return===null){Ee=1,As=e,Ae=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=_e,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=hd(l);if(d!==null){d.flags&=-257,fd(d,l,o,s,e),d.mode&1&&cd(s,u,e),e=d,a=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(a),e.updateQueue=v}else m.add(a);break e}else{if(!(e&1)){cd(s,u,e),Ih();break e}a=Error(M(426))}}else if(pe&&o.mode&1){var x=hd(l);if(x!==null){!(x.flags&65536)&&(x.flags|=256),fd(x,l,o,s,e),gh(ui(a,o));break e}}s=a=ui(a,o),Ee!==4&&(Ee=2),Zi===null?Zi=[s]:Zi.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=_g(s,a,e);id(s,p);break e;case 1:o=a;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wn===null||!Wn.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=Hg(s,o,e);id(s,k);break e}}s=s.return}while(s!==null)}l0(n)}catch(C){e=C,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function i0(){var t=yo.current;return yo.current=go,t===null?go:t}function Ih(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Pe===null||!(xr&268435455)&&!(Qo&268435455)||On(Pe,_e)}function xo(t,e){var n=X;X|=2;var r=i0();(Pe!==t||_e!==e)&&(un=null,pr(t,e));do try{Sx();break}catch(i){r0(t,i)}while(!0);if(vh(),X=n,yo.current=r,Ae!==null)throw Error(M(261));return Pe=null,_e=0,Ee}function Sx(){for(;Ae!==null;)s0(Ae)}function Cx(){for(;Ae!==null&&!q1();)s0(Ae)}function s0(t){var e=a0(t.alternate,t,ht);t.memoizedProps=t.pendingProps,e===null?l0(t):Ae=e,Ph.current=null}function l0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gx(n,e),n!==null){n.flags&=32767,Ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,Ae=null;return}}else if(n=mx(n,e,ht),n!==null){Ae=n;return}if(e=e.sibling,e!==null){Ae=e;return}Ae=e=t}while(e!==null);Ee===0&&(Ee=5)}function or(t,e,n){var r=ne,i=bt.transition;try{bt.transition=null,ne=1,Ax(t,e,n,r)}finally{bt.transition=i,ne=r}return null}function Ax(t,e,n,r){do Zr();while(Ln!==null);if(X&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(iw(t,s),t===Pe&&(Ae=Pe=null,_e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cl||(cl=!0,u0(eo,function(){return Zr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=bt.transition,bt.transition=null;var l=ne;ne=1;var o=X;X|=4,Ph.current=null,vx(t,n),e0(n,t),Uw(Ru),no=!!Lu,Ru=Lu=null,t.current=n,wx(n),Y1(),X=o,ne=l,bt.transition=s}else t.current=n;if(cl&&(cl=!1,Ln=t,wo=i),s=t.pendingLanes,s===0&&(Wn=null),X1(n.stateNode),ot(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vo)throw vo=!1,t=ec,ec=null,t;return wo&1&&t.tag!==0&&Zr(),s=t.pendingLanes,s&1?t===tc?es++:(es=0,tc=t):es=0,nr(),null}function Zr(){if(Ln!==null){var t=_m(wo),e=bt.transition,n=ne;try{if(bt.transition=null,ne=16>t?16:t,Ln===null)var r=!1;else{if(t=Ln,Ln=null,wo=0,X&6)throw Error(M(331));var i=X;for(X|=4,L=t.current;L!==null;){var s=L,l=s.child;if(L.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(L=u;L!==null;){var c=L;switch(c.tag){case 0:case 11:case 15:Xi(8,c,s)}var h=c.child;if(h!==null)h.return=c,L=h;else for(;L!==null;){c=L;var f=c.sibling,d=c.return;if(Jg(c),c===u){L=null;break}if(f!==null){f.return=d,L=f;break}L=d}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}L=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,L=l;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Xi(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,L=p;break e}L=s.return}}var g=t.current;for(L=g;L!==null;){l=L;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,L=w;else e:for(l=g;L!==null;){if(o=L,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Yo(9,o)}}catch(C){we(o,o.return,C)}if(o===l){L=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,L=k;break e}L=o.return}}if(X=i,nr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Ho,t)}catch{}r=!0}return r}finally{ne=n,bt.transition=e}}return!1}function bd(t,e,n){e=ui(n,e),e=_g(t,e,1),t=Hn(t,e,1),e=Xe(),t!==null&&(js(t,1,e),ot(t,e))}function we(t,e,n){if(t.tag===3)bd(t,t,n);else for(;e!==null;){if(e.tag===3){bd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wn===null||!Wn.has(r))){t=ui(n,t),t=Hg(e,t,1),e=Hn(e,t,1),t=Xe(),e!==null&&(js(e,1,t),ot(e,t));break}}e=e.return}}function bx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xe(),t.pingedLanes|=t.suspendedLanes&n,Pe===t&&(_e&n)===n&&(Ee===4||Ee===3&&(_e&130023424)===_e&&500>ke()-Lh?pr(t,0):Dh|=n),ot(t,e)}function o0(t,e){e===0&&(t.mode&1?(e=el,el<<=1,!(el&130023424)&&(el=4194304)):e=1);var n=Xe();t=wn(t,e),t!==null&&(js(t,e,n),ot(t,n))}function Ex(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),o0(t,n)}function Mx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),o0(t,n)}var a0;a0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||st.current)it=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return it=!1,px(t,e,n);it=!!(t.flags&131072)}else it=!1,pe&&e.flags&1048576&&fg(e,uo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_l(t,e),t=e.pendingProps;var i=si(e,qe.current);Xr(e,n),i=Eh(null,e,r,t,i,n);var s=Mh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(r)?(s=!0,oo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kh(e),i.updater=qo,e.stateNode=i,i._reactInternals=e,Vu(e,r,t,n),e=Ku(null,e,r,!0,s,n)):(e.tag=0,pe&&s&&ph(e),Je(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_l(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Nx(r),t=Bt(r,t),i){case 0:e=$u(null,e,r,t,n);break e;case 1:e=md(null,e,r,t,n);break e;case 11:e=dd(null,e,r,t,n);break e;case 14:e=pd(null,e,r,Bt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),$u(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),md(t,e,r,i,n);case 3:e:{if($g(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,vg(t,e),fo(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ui(Error(M(423)),e),e=gd(t,e,r,n,i);break e}else if(r!==i){i=ui(Error(M(424)),e),e=gd(t,e,r,n,i);break e}else for(pt=_n(e.stateNode.containerInfo.firstChild),mt=e,pe=!0,jt=null,n=gg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(li(),r===i){e=xn(t,e,n);break e}Je(t,e,r,n)}e=e.child}return e;case 5:return wg(e),t===null&&_u(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Bu(r,i)?l=null:s!==null&&Bu(r,s)&&(e.flags|=32),Ug(t,e),Je(t,e,l,n),e.child;case 6:return t===null&&_u(e),null;case 13:return Kg(t,e,n);case 4:return Sh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oi(e,null,r,n):Je(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),dd(t,e,r,i,n);case 7:return Je(t,e,e.pendingProps,n),e.child;case 8:return Je(t,e,e.pendingProps.children,n),e.child;case 12:return Je(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,oe(co,r._currentValue),r._currentValue=l,s!==null)if(Ht(s.value,l)){if(s.children===i.children&&!st.current){e=xn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=pn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Hu(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Hu(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Je(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Xr(e,n),i=Nt(i),r=r(i),e.flags|=1,Je(t,e,r,n),e.child;case 14:return r=e.type,i=Bt(r,e.pendingProps),i=Bt(r.type,i),pd(t,e,r,i,n);case 15:return Wg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),_l(t,e),e.tag=1,lt(r)?(t=!0,oo(e)):t=!1,Xr(e,n),zg(e,r,i),Vu(e,r,i,n),Ku(null,e,r,!0,t,n);case 19:return Gg(t,e,n);case 22:return Vg(t,e,n)}throw Error(M(156,e.tag))};function u0(t,e){return Im(t,e)}function Tx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(t,e,n,r){return new Tx(t,e,n,r)}function jh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nx(t){if(typeof t=="function")return jh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nh)return 11;if(t===rh)return 14}return 2}function Un(t,e){var n=t.alternate;return n===null?(n=At(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vl(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")jh(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Rr:return mr(n.children,i,s,e);case th:l=8,i|=8;break;case du:return t=At(12,n,e,i|2),t.elementType=du,t.lanes=s,t;case pu:return t=At(13,n,e,i),t.elementType=pu,t.lanes=s,t;case mu:return t=At(19,n,e,i),t.elementType=mu,t.lanes=s,t;case wm:return Jo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ym:l=10;break e;case vm:l=9;break e;case nh:l=11;break e;case rh:l=14;break e;case bn:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=At(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function mr(t,e,n,r){return t=At(7,t,r,e),t.lanes=n,t}function Jo(t,e,n,r){return t=At(22,t,r,e),t.elementType=wm,t.lanes=n,t.stateNode={isHidden:!1},t}function _a(t,e,n){return t=At(6,t,null,e),t.lanes=n,t}function Ha(t,e,n){return e=At(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ox(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ka(0),this.expirationTimes=ka(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ka(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fh(t,e,n,r,i,s,l,o,a){return t=new Ox(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=At(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(s),t}function Px(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function c0(t){if(!t)return Gn;t=t._reactInternals;e:{if(Tr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(lt(n))return cg(t,n,e)}return e}function h0(t,e,n,r,i,s,l,o,a){return t=Fh(n,r,!0,t,i,s,l,o,a),t.context=c0(null),n=t.current,r=Xe(),i=Vn(n),s=pn(r,i),s.callback=e??null,Hn(n,s,i),t.current.lanes=i,js(t,i,r),ot(t,r),t}function Xo(t,e,n,r){var i=e.current,s=Xe(),l=Vn(i);return n=c0(n),e.context===null?e.context=n:e.pendingContext=n,e=pn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hn(i,e,l),t!==null&&(_t(t,i,l,s),jl(t,i,l)),l}function ko(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ed(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zh(t,e){Ed(t,e),(t=t.alternate)&&Ed(t,e)}function Dx(){return null}var f0=typeof reportError=="function"?reportError:function(t){console.error(t)};function _h(t){this._internalRoot=t}Zo.prototype.render=_h.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Xo(t,e,null,null)};Zo.prototype.unmount=_h.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kr(function(){Xo(null,t,null,null)}),e[vn]=null}};function Zo(t){this._internalRoot=t}Zo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nn.length&&e!==0&&e<Nn[n].priority;n++);Nn.splice(n,0,t),n===0&&$m(t)}};function Hh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ea(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Md(){}function Lx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ko(l);s.call(u)}}var l=h0(e,r,t,0,null,!1,!1,"",Md);return t._reactRootContainer=l,t[vn]=l.current,gs(t.nodeType===8?t.parentNode:t),kr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=ko(a);o.call(u)}}var a=Fh(t,0,!1,null,null,!1,!1,"",Md);return t._reactRootContainer=a,t[vn]=a.current,gs(t.nodeType===8?t.parentNode:t),kr(function(){Xo(e,a,n,r)}),a}function ta(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=ko(l);o.call(a)}}Xo(e,l,t,i)}else l=Lx(n,e,t,i,r);return ko(l)}Hm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hi(e.pendingLanes);n!==0&&(lh(e,n|1),ot(e,ke()),!(X&6)&&(ci=ke()+500,nr()))}break;case 13:kr(function(){var r=wn(t,1);if(r!==null){var i=Xe();_t(r,t,1,i)}}),zh(t,1)}};oh=function(t){if(t.tag===13){var e=wn(t,134217728);if(e!==null){var n=Xe();_t(e,t,134217728,n)}zh(t,134217728)}};Wm=function(t){if(t.tag===13){var e=Vn(t),n=wn(t,e);if(n!==null){var r=Xe();_t(n,t,e,r)}zh(t,e)}};Vm=function(){return ne};Um=function(t,e){var n=ne;try{return ne=t,e()}finally{ne=n}};bu=function(t,e,n){switch(e){case"input":if(vu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=$o(r);if(!i)throw Error(M(90));km(r),vu(r,i)}}}break;case"textarea":Cm(t,n);break;case"select":e=n.value,e!=null&&qr(t,!!n.multiple,e,!1)}};Om=Rh;Pm=kr;var Rx={usingClientEntryPoint:!1,Events:[zs,Fr,$o,Tm,Nm,Rh]},Di={findFiberByHostInstance:ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bx={bundleType:Di.bundleType,version:Di.version,rendererPackageName:Di.rendererPackageName,rendererConfig:Di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rm(t),t===null?null:t.stateNode},findFiberByHostInstance:Di.findFiberByHostInstance||Dx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{Ho=hl.inject(Bx),ln=hl}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rx;wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hh(e))throw Error(M(200));return Px(t,e,null,n)};wt.createRoot=function(t,e){if(!Hh(t))throw Error(M(299));var n=!1,r="",i=f0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Fh(t,1,!1,null,null,n,!1,r,i),t[vn]=e.current,gs(t.nodeType===8?t.parentNode:t),new _h(e)};wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=Rm(e),t=t===null?null:t.stateNode,t};wt.flushSync=function(t){return kr(t)};wt.hydrate=function(t,e,n){if(!ea(e))throw Error(M(200));return ta(null,t,e,!0,n)};wt.hydrateRoot=function(t,e,n){if(!Hh(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=f0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=h0(e,null,t,1,n??null,i,!1,s,l),t[vn]=e.current,gs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zo(e)};wt.render=function(t,e,n){if(!ea(e))throw Error(M(200));return ta(null,t,e,!1,n)};wt.unmountComponentAtNode=function(t){if(!ea(t))throw Error(M(40));return t._reactRootContainer?(kr(function(){ta(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};wt.unstable_batchedUpdates=Rh;wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ea(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return ta(t,e,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function d0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d0)}catch(t){console.error(t)}}d0(),dm.exports=wt;var Ix=dm.exports,Td=Ix;hu.createRoot=Td.createRoot,hu.hydrateRoot=Td.hydrateRoot;let ic=[],p0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?p0:ic).push(n=n+t[e])})();function jx(t){if(t<768)return!1;for(let e=0,n=ic.length;;){let r=e+n>>1;if(t<ic[r])n=r;else if(t>=p0[r])e=r+1;else return!0;if(e==n)return!1}}function Nd(t){return t>=127462&&t<=127487}const Od=8205;function Fx(t,e,n=!0,r=!0){return(n?m0:zx)(t,e,r)}function m0(t,e,n){if(e==t.length)return e;e&&g0(t.charCodeAt(e))&&y0(t.charCodeAt(e-1))&&e--;let r=Wa(t,e);for(e+=Pd(r);e<t.length;){let i=Wa(t,e);if(r==Od||i==Od||n&&jx(i))e+=Pd(i),r=i;else if(Nd(i)){let s=0,l=e-2;for(;l>=0&&Nd(Wa(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function zx(t,e,n){for(;e>0;){let r=m0(t,e-2,n);if(r<e)return r;e--}return 0}function Wa(t,e){let n=t.charCodeAt(e);if(!y0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return g0(r)?(n-55296<<10)+(r-56320)+65536:n}function g0(t){return t>=56320&&t<57344}function y0(t){return t>=55296&&t<56320}function Pd(t){return t<65536?1:2}class J{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=hi(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),tn.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=hi(this,e,n);let r=[];return this.decompose(e,n,r,0),tn.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new ts(this),s=new ts(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new ts(this,e)}iterRange(e,n=this.length){return new v0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new w0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?J.empty:e.length<=32?new xe(e):tn.from(xe.split(e,[]))}}class xe extends J{constructor(e,n=_x(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new Hx(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new xe(Dd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=Ul(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new xe(o,l.length+s.length));else{let a=o.length>>1;r.push(new xe(o.slice(0,a)),new xe(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof xe))return super.replace(e,n,r);[e,n]=hi(this,e,n);let i=Ul(this.text,Ul(r.text,Dd(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new xe(i,s):tn.from(xe.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=hi(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new xe(r,i)),r=[],i=-1);return i>-1&&n.push(new xe(r,i)),n}}class tn extends J{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=hi(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new tn(c,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=hi(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof tn))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let m of e)m.flatten(d);return new xe(d,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,c=[];function h(d){let m;if(d.lines>s&&d instanceof tn)for(let v of d.children)h(v);else d.lines>l&&(a>l||!a)?(f(),o.push(d)):d instanceof xe&&a&&(m=c[c.length-1])instanceof xe&&d.lines+m.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new xe(m.text.concat(d.text),m.length+1+d.length)):(a+d.lines>i&&f(),a+=d.lines,u+=d.length+1,c.push(d))}function f(){a!=0&&(o.push(c.length==1?c[0]:tn.from(c,u)),u=-1,a=c.length=0)}for(let d of e)h(d);return f(),o.length==1?o[0]:new tn(o,n)}}J.empty=new xe([""],0);function _x(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Ul(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function Dd(t,e,n){return Ul(t,[""],e,n)}class ts{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof xe?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof xe?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof xe){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof xe?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class v0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new ts(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class w0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(J.prototype[Symbol.iterator]=function(){return this.iter()},ts.prototype[Symbol.iterator]=v0.prototype[Symbol.iterator]=w0.prototype[Symbol.iterator]=function(){return this});class Hx{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function hi(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Fe(t,e,n=!0,r=!0){return Fx(t,e,n,r)}function Wx(t){return t>=56320&&t<57344}function Vx(t){return t>=55296&&t<56320}function x0(t,e){let n=t.charCodeAt(e);if(!Vx(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Wx(r)?(n-55296<<10)+(r-56320)+65536:n}function Ux(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function k0(t){return t<65536?1:2}const sc=/\r\n?|\n/;var dt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(dt||(dt={}));class mn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){lc(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new mn(e)}composeDesc(e){return this.empty?e:e.empty?this:S0(this,e)}mapDesc(e,n=!1){return e.empty?this:oc(this,e,n)}mapPos(e,n=-1,r=dt.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=dt.Simple&&u>=e&&(r==dt.TrackDel&&i<e&&u>e||r==dt.TrackBefore&&i<e||r==dt.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new mn(e)}static create(e){return new mn(e)}}class Oe extends mn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return lc(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return oc(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(J.empty);r.push(l?e.slice(s,s+l):J.empty)}s+=l}return new Oe(n,r)}compose(e){return this.empty?e:e.empty?this:S0(this,e,!0)}map(e,n=!1){return e.empty?this:oc(this,e,n,!0)}iterChanges(e,n=!1){lc(this,e,n)}get desc(){return mn.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new bs(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-o);Ue(i,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Ue(n,c,h),h>0&&Rn(r,n,s.text),s.forward(c),o+=c}let u=e[l++];for(;o<u;){if(s.done)break e;let c=Math.min(s.len,u-o);Ue(n,c,-1),Ue(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),o+=c}}return{changes:new Oe(n,r),filtered:mn.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(c=!1){if(!c&&!i.length)return;l<n&&Ue(i,n-l,-1);let h=new Oe(i,s);o=o?o.compose(h.map(o)):h,i=[],s=[],l=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Oe){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),o=o?o.compose(c.map(o)):c}else{let{from:h,to:f=h,insert:d}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let m=d?typeof d=="string"?J.of(d.split(r||sc)):d:J.empty,v=m.length;if(h==f&&v==0)return;h<l&&a(),h>l&&Ue(i,h-l,-1),Ue(i,f-h,v),Rn(s,i,m),l=f}}return u(e),a(!o),o}static empty(e){return new Oe(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(J.empty);r[i]=J.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Oe(n,r)}static createSet(e,n){return new Oe(e,n)}}function Ue(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Rn(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(J.empty);t.push(n)}}function lc(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,c=s,h=J.empty;for(;u+=o,c+=a,a&&r&&(h=h.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,c,h),i=u,s=c}}}function oc(t,e,n,r=!1){let i=[],s=r?[]:null,l=new bs(t),o=new bs(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);Ue(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(Ue(i,o.ins,-1);u;){let c=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=c&&(Ue(i,0,l.ins),s&&Rn(s,i,l.text),a=l.i),l.forward(c),u-=c}o.next()}else if(l.ins>=0){let u=0,c=l.len;for(;c;)if(o.ins==-1){let h=Math.min(c,o.len);u+=h,c-=h,o.forward(h)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;Ue(i,u,a<l.i?l.ins:0),s&&a<l.i&&Rn(s,i,l.text),a=l.i,l.forward(l.len-c)}else{if(l.done&&o.done)return s?Oe.createSet(i,s):mn.create(i);throw new Error("Mismatched change set lengths")}}}function S0(t,e,n=!1){let r=[],i=n?[]:null,s=new bs(t),l=new bs(e);for(let o=!1;;){if(s.done&&l.done)return i?Oe.createSet(r,i):mn.create(r);if(s.ins==0)Ue(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)Ue(r,0,l.ins,o),i&&Rn(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let c=l.ins==-1?-1:l.off?0:l.ins;Ue(r,a,c,o),i&&c&&Rn(i,r,l.text)}else l.ins==-1?(Ue(r,s.off?0:s.len,a,o),i&&Rn(i,r,s.textBit(a))):(Ue(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Rn(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class bs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?J.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?J.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class fr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new fr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return E.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return E.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return E.range(e.anchor,e.head)}static create(e,n,r){return new fr(e,n,r)}}class E{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:E.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new E([this.main],0)}addRange(e,n=!0){return E.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,E.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new E(e.ranges.map(n=>fr.fromJSON(n)),e.main)}static single(e,n=e){return new E([E.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return E.normalized(e.slice(),n);r=s.to}return new E(e,n)}static cursor(e,n=0,r,i){return fr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?fr.create(n,e,48|s):fr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?E.range(a,o):E.range(o,a))}}return new E(e,n)}}function C0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Wh=0;class _{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Wh++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new _(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Vh),!!e.static,e.enables)}of(e){return new $l([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new $l(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new $l(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Vh(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class $l{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Wh++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[l]=r(h),1},update(h,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||ac(h,c)){let d=r(h);if(o?!Ld(d,h.values[l],i):!i(d,h.values[l]))return h.values[l]=d,1}return 0},reconfigure:(h,f)=>{let d,m=f.config.address[s];if(m!=null){let v=Co(f,m);if(this.dependencies.every(x=>x instanceof _?f.facet(x)===h.facet(x):x instanceof Ut?f.field(x,!1)==h.field(x,!1):!0)||(o?Ld(d=r(h),v,i):i(d=r(h),v)))return h.values[l]=v,0}else d=r(h);return h.values[l]=d,1}}}}function Ld(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function ac(t,e){let n=!1;for(let r of e)ns(t,r)&1&&(n=!0);return n}function $x(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let c=0;c<r.length;c++){let h=Co(a,r[c]);if(i[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(a){for(let u of r)ns(a,u);return a.values[l]=o(a),1},update(a,u){if(!ac(a,s))return 0;let c=o(a);return e.compare(c,a.values[l])?0:(a.values[l]=c,1)},reconfigure(a,u){let c=ac(a,r),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&Vh(n,h))return a.values[l]=f,0;let d=o(a);return e.compare(d,f)?(a.values[l]=f,0):(a.values[l]=d,1)}}}const fl=_.define({static:!0});class Ut{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Ut(Wh++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(fl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(fl),l=i.facet(fl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,fl.of({field:this,create:e})]}get extension(){return this}}const ar={lowest:4,low:3,default:2,high:1,highest:0};function Li(t){return e=>new A0(e,t)}const na={highest:Li(ar.highest),high:Li(ar.high),default:Li(ar.default),low:Li(ar.low),lowest:Li(ar.lowest)};class A0{constructor(e,n){this.inner=e,this.prec=n}}class ra{of(e){return new uc(this,e)}reconfigure(e){return ra.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class uc{constructor(e,n){this.compartment=e,this.inner=n}}class So{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of Kx(e,n,l))f instanceof Ut?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(d=>f.slot(d));let c=r==null?void 0:r.config.facets;for(let f in s){let d=s[f],m=d[0].facet,v=c&&c[f]||[];if(d.every(x=>x.type==0))if(o[m.id]=a.length<<1|1,Vh(v,d))a.push(r.facet(m));else{let x=m.combine(d.map(p=>p.value));a.push(r&&m.compare(x,r.facet(m))?r.facet(m):x)}else{for(let x of d)x.type==0?(o[x.id]=a.length<<1|1,a.push(x.value)):(o[x.id]=u.length<<1,u.push(p=>x.dynamicSlot(p)));o[m.id]=u.length<<1,u.push(x=>$x(x,m,d))}}let h=u.map(f=>f(o));return new So(e,l,h,o,a,s)}}function Kx(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof uc&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof uc){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof A0)s(l.inner,l.prec);else if(l instanceof Ut)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof $l)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,ar.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,ar.default),r.reduce((l,o)=>l.concat(o))}function ns(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Co(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const b0=_.define(),cc=_.define({combine:t=>t.some(e=>e),static:!0}),E0=_.define({combine:t=>t.length?t[0]:void 0,static:!0}),M0=_.define(),T0=_.define(),N0=_.define(),O0=_.define({combine:t=>t.length?t[0]:!1});class ki{constructor(e,n){this.type=e,this.value=n}static define(){return new Gx}}class Gx{of(e){return new ki(this,e)}}class qx{constructor(e){this.map=e}of(e){return new ae(this,e)}}class ae{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ae(this.type,n)}is(e){return this.type==e}static define(e={}){return new qx(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}ae.reconfigure=ae.define();ae.appendConfig=ae.define();class Ge{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&C0(r,n.newLength),s.some(o=>o.type==Ge.time)||(this.annotations=s.concat(Ge.time.of(Date.now())))}static create(e,n,r,i,s,l){return new Ge(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ge.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ge.time=ki.define();Ge.userEvent=ki.define();Ge.addToHistory=ki.define();Ge.remote=ki.define();function Yx(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function P0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Oe.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:ae.mapEffects(t.effects,i).concat(ae.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function hc(t,e,n){let r=e.selection,i=ei(e.annotations);return e.userEvent&&(i=i.concat(Ge.userEvent.of(e.userEvent))),{changes:e.changes instanceof Oe?e.changes:Oe.of(e.changes||[],n,t.facet(E0)),selection:r&&(r instanceof E?r:E.single(r.anchor,r.head)),effects:ei(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function D0(t,e,n){let r=hc(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=P0(r,hc(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=Ge.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Jx(n?Qx(i):i)}function Qx(t){let e=t.startState,n=!0;for(let i of e.facet(M0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:Yx(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Oe.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=Ge.create(e,i,t.selection&&t.selection.map(s),ae.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(T0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Ge?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ge?t=s[0]:t=D0(e,ei(s),!1)}return t}function Jx(t){let e=t.startState,n=e.facet(N0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=P0(r,hc(e,s,t.changes.newLength),!0))}return r==t?t:Ge.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const Xx=[];function ei(t){return t==null?Xx:Array.isArray(t)?t:[t]}var ze=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ze||(ze={}));const Zx=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let fc;try{fc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function ek(t){if(fc)return fc.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Zx.test(n)))return!0}return!1}function tk(t){return e=>{if(!/\S/.test(e))return ze.Space;if(ek(e))return ze.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ze.Word;return ze.Other}}class ee{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)ns(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return ns(this,r),Co(this,r)}update(...e){return D0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(ra.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(ae.reconfigure)?(n=null,r=o.value):o.is(ae.appendConfig)&&(n=null,r=ei(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=So.resolve(r,i,this),s=new ee(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(cc)?e.newSelection:e.newSelection.asSingle();new ee(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:E.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=ei(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),c=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(c);let h=i.mapDesc(u,!0);s.push(a.range.map(h)),i=i.compose(c),l=ae.mapEffects(l,c).concat(ae.mapEffects(ei(a.effects),h))}return{changes:i,selection:E.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Oe?e:Oe.of(e,this.doc.length,this.facet(ee.lineSeparator))}toText(e){return J.of(e.split(this.facet(ee.lineSeparator)||sc))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ns(this,n),Co(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Ut&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return ee.create({doc:e.doc,selection:E.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=So.resolve(e.extensions||[],new Map),r=e.doc instanceof J?e.doc:J.of((e.doc||"").split(n.staticFacet(ee.lineSeparator)||sc)),i=e.selection?e.selection instanceof E?e.selection:E.single(e.selection.anchor,e.selection.head):E.single(0);return C0(i,r.length),n.staticFacet(cc)||(i=i.asSingle()),new ee(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(ee.tabSize)}get lineBreak(){return this.facet(ee.lineSeparator)||`
`}get readOnly(){return this.facet(O0)}phrase(e,...n){for(let r of this.facet(ee.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(b0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return tk(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=Fe(n,l,!1);if(s(n.slice(a,l))!=ze.Word)break;l=a}for(;o<i;){let a=Fe(n,o);if(s(n.slice(o,a))!=ze.Word)break;o=a}return l==o?null:E.range(l+r,o+r)}}ee.allowMultipleSelections=cc;ee.tabSize=_.define({combine:t=>t.length?t[0]:4});ee.lineSeparator=E0;ee.readOnly=O0;ee.phrases=_.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});ee.languageData=b0;ee.changeFilter=M0;ee.transactionFilter=T0;ee.transactionExtender=N0;ra.reconfigure=ae.define();function ia(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class fi{eq(e){return this==e}range(e,n=e){return dc.create(e,n,this)}}fi.prototype.startSide=fi.prototype.endSide=0;fi.prototype.point=!1;fi.prototype.mapMode=dt.TrackDel;let dc=class L0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new L0(e,n,r)}};function pc(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Uh{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,h=this.to[a]+e,f,d;if(c==h){let m=n.mapPos(c,u.startSide,u.mapMode);if(m==null||(f=d=m,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<f)))continue}else if(f=n.mapPos(c,u.startSide),d=n.mapPos(h,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,d-f)),r.push(u),i.push(f-l),s.push(d-l))}return{mapped:r.length?new Uh(i,s,r,o):null,pos:l}}}class te{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new te(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(pc)),this.isEmpty)return n.length?te.of(n):this;let o=new R0(this,null,-1).goto(0),a=0,u=[],c=new Sr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let h=n[a++];c.addInner(h.from,h.to,h.value)||u.push(h)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||u.push(dc.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?te.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:c,pos:h}=a.map(o,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new te(r,n,s||te.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Es.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Es.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),o=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=Rd(l,o,r),u=new Ri(l,a,s),c=new Ri(o,a,s);r.iterGaps((h,f,d)=>Bd(u,h,c,f,d,i)),r.empty&&r.length==0&&Bd(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),l=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=Rd(s,l),a=new Ri(s,o,0).goto(r),u=new Ri(l,o,0).goto(r);for(;;){if(a.to!=u.to||!mc(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new Ri(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let c=l.activeForPoint(l.to),h=l.pointFrom<n?c.length+1:l.point.startSide<0?c.length:Math.min(c.length,a);i.point(o,u,l.point,c,h,l.pointRank),a=Math.min(l.openEnd(u),c.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new Sr;for(let i of e instanceof dc?[e]:n?nk(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return te.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=te.empty;i=i.nextLayer)n=new te(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}te.empty=new te([],[],null,-1);function nk(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(pc(e,r)>0)return t.slice().sort(pc);e=r}return t}te.empty.nextLayer=te.empty;class Sr{finishChunk(e){this.chunks.push(new Uh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Sr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(te.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=te.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Rd(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class R0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Es{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new R0(l,n,r,s));return i.length==1?i[0]:new Es(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Va(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Va(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Va(this.heap,0)}}}function Va(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Ri{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Es.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){dl(this.active,e),dl(this.activeTo,e),dl(this.activeRank,e),this.minActive=Id(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;pl(this.active,n,r),pl(this.activeTo,n,i),pl(this.activeRank,n,s),e&&pl(e,n,this.cursor.from),this.minActive=Id(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&dl(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Bd(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,h=c<0?t.to+a:n.to,f=Math.min(h,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&mc(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!mc(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),h>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),o=h,c<=0&&t.next(),c>=0&&n.next()}}function mc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function dl(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function pl(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Id(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function sa(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Fe(t,i));return r}function rk(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Fe(t,i)}return t.length}const gc="ͼ",jd=typeof Symbol>"u"?"__"+gc:Symbol.for(gc),yc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class qn{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let c=[],h=/^@(\w+)\b/.exec(l[0]),f=h&&h[1]=="keyframes";if(h&&o==null)return a.push(l[0]+";");for(let d in o){let m=o[d];if(/&/.test(d))s(d.split(/,\s*/).map(v=>l.map(x=>v.replace(/&/,x))).reduce((v,x)=>v.concat(x)),m,a);else if(m&&typeof m=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),m,c,f)}else m!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+m+";")}(c.length||f)&&a.push((r&&!h&&!u?l.map(r):l).join(", ")+" {"+c.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Fd[jd]||1;return Fd[jd]=e+1,gc+e.toString(36)}static mount(e,n,r){let i=e[yc],s=r&&r.nonce;i?s&&i.setNonce(s):i=new ik(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let zd=new Map;class ik{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=zd.get(r);if(s)return e[yc]=s;this.sheet=new i.CSSStyleSheet,zd.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[yc]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Yn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ms={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},sk=typeof navigator<"u"&&/Mac/.test(navigator.platform),lk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ie=0;Ie<10;Ie++)Yn[48+Ie]=Yn[96+Ie]=String(Ie);for(var Ie=1;Ie<=24;Ie++)Yn[Ie+111]="F"+Ie;for(var Ie=65;Ie<=90;Ie++)Yn[Ie]=String.fromCharCode(Ie+32),Ms[Ie]=String.fromCharCode(Ie);for(var Ua in Yn)Ms.hasOwnProperty(Ua)||(Ms[Ua]=Yn[Ua]);function ok(t){var e=sk&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||lk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ms:Yn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Re(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)B0(t,arguments[e]);return t}function B0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)B0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Ts(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function vc(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Kl(t,e){if(!e.anchorNode)return!1;try{return vc(t,e.anchorNode)}catch{return!1}}function Ns(t){return t.nodeType==3?Ar(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function rs(t,e,n,r){return n?_d(t,e,n,r,-1)||_d(t,e,n,r,1):!1}function Cr(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Ao(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function _d(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:an(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Cr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?an(t):0}else return!1}}function an(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function la(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function ak(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function I0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function uk(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,d=c==a.body,m=1,v=1;if(d)f=ak(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let g=c.getBoundingClientRect();({scaleX:m,scaleY:v}=I0(c,g)),f={left:g.left,right:g.left+c.clientWidth*m,top:g.top,bottom:g.top+c.clientHeight*v}}let x=0,p=0;if(i=="nearest")e.top<f.top?(p=e.top-(f.top+l),n>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,n<0&&e.top-p<f.top&&(p=e.top-(f.top+l)));else{let g=e.bottom-e.top,w=f.bottom-f.top;p=(i=="center"&&g<=w?e.top+g/2-w/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-w+l)-f.top}if(r=="nearest"?e.left<f.left?(x=e.left-(f.left+s),n>0&&e.right>f.right+x&&(x=e.right-f.right+s)):e.right>f.right&&(x=e.right-f.right+s,n<0&&e.left<f.left+x&&(x=e.left-(f.left+s))):x=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,x||p)if(d)u.scrollBy(x,p);else{let g=0,w=0;if(p){let k=c.scrollTop;c.scrollTop+=p/v,w=(c.scrollTop-k)*v}if(x){let k=c.scrollLeft;c.scrollLeft+=x/m,g=(c.scrollLeft-k)*m}e={left:e.left-g,top:e.top-w,right:e.right-g,bottom:e.bottom-w},g&&Math.abs(g-x)<1&&(r="nearest"),w&&Math.abs(w-p)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function ck(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class hk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?an(n):0),r,Math.min(e.focusOffset,r?an(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Or=null;function j0(t){if(t.setActive)return t.setActive();if(Or)return t.focus(Or);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Or==null?{get preventScroll(){return Or={preventScroll:!0},!0}}:void 0),!Or){Or=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Hd;function Ar(t,e,n=e){let r=Hd||(Hd=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function ti(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function fk(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function F0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function dk(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,an(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=an(n))}else{if(n==t)return!0;r=Cr(n),n=n.parentNode}}function z0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function _0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=an(n)}else if(n.parentNode&&!Ao(n))r=Cr(n),n=n.parentNode;else return null}}function H0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!Ao(n))r=Cr(n)+1,n=n.parentNode;else return null}}class Ke{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Ke(e.parentNode,Cr(e),n)}static after(e,n){return new Ke(e.parentNode,Cr(e)+1,n)}}const $h=[];class ie{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=ie.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=Wd(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=Wd(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=an(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ie.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,c=r;a<this.children.length;a++){let h=this.children[a],f=u+h.length;if(u<e&&f>n)return h.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&h.dom.parentNode==this.dom){l=a,o=c;break}c=f,u=f+h.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=$h){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new W0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ie.prototype.breakAfter=0;function Wd(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class W0{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function V0(t,e,n,r,i,s,l,o,a){let{children:u}=t,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:l;if(!(e==r&&c&&!l&&!f&&s.length<2&&c.merge(n,i,s.length?h:null,n==0,o,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&(h!=null&&h.breakAfter))?(e==r&&(d=d.split(i),i=0),!f&&h&&d.merge(0,i,h,!0,0,a)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(h?h.breakAfter=1:l=1),r++}for(c&&(c.breakAfter=l,n>0&&(!l&&s.length&&c.merge(n,c.length,s[0],!1,o,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function U0(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:c}=l.findPos(e,-1),h=e-n;for(let f of r)h+=f.length;t.length+=h,V0(t,u,c,o,a,r,0,i,s)}let rt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},wc=typeof document<"u"?document:{documentElement:{style:{}}};const xc=/Edge\/(\d+)/.exec(rt.userAgent),$0=/MSIE \d/.test(rt.userAgent),kc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rt.userAgent),oa=!!($0||kc||xc),Vd=!oa&&/gecko\/(\d+)/i.test(rt.userAgent),$a=!oa&&/Chrome\/(\d+)/.exec(rt.userAgent),pk="webkitFontSmoothing"in wc.documentElement.style,K0=!oa&&/Apple Computer/.test(rt.vendor),Ud=K0&&(/Mobile\/\w+/.test(rt.userAgent)||rt.maxTouchPoints>2);var D={mac:Ud||/Mac/.test(rt.platform),windows:/Win/.test(rt.platform),linux:/Linux|X11/.test(rt.platform),ie:oa,ie_version:$0?wc.documentMode||6:kc?+kc[1]:xc?+xc[1]:0,gecko:Vd,gecko_version:Vd?+(/Firefox\/(\d+)/.exec(rt.userAgent)||[0,0])[1]:0,chrome:!!$a,chrome_version:$a?+$a[1]:0,ios:Ud,android:/Android\b/.test(rt.userAgent),safari:K0,webkit_version:pk?+(/\bAppleWebKit\/(\d+)/.exec(rt.userAgent)||[0,0])[1]:0,tabSize:wc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const mk=256;class Wt extends ie{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Wt)||this.length-(n-e)+r.length>mk||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Wt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Ke(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return gk(this.dom,e,n)}}class kn extends ie{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(F0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof kn&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(U0(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new kn(this.mark,n,l)}domAtPos(e){return G0(this,e)}coordsAt(e,n){return Y0(this,e,n)}}function gk(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?D.chrome||D.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=Ar(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return D.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?la(a,l<0):a||null}class dr extends ie{static create(e,n,r){return new dr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=dr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof dr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof dr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return J.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):J.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ke.before(this.dom):Ke.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return la(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class di extends ie{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof di&&e.side==this.side}split(){return new di(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ke.before(this.dom):Ke.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return J.empty}get isHidden(){return!0}}Wt.prototype.children=dr.prototype.children=di.prototype.children=$h;function G0(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new Ke(n,0)}function q0(t,e,n){let r,{children:i}=t;n>0&&e instanceof kn&&i.length&&(r=i[i.length-1])instanceof kn&&r.mark.eq(e.mark)?q0(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function Y0(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let d=u.children[h],m=f+d.length;m>=c&&(d.children.length?o(d,c-f):(!s||s.isHidden&&(n>0||vk(s,d)))&&(m>c||f==m&&d.getSide()>0)?(s=d,l=c-f):(f<c||f==m&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-f)),f=m}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):yk(t)}function yk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Ns(e);return n[n.length-1]||null}function vk(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function Sc(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const $d=Object.create(null);function bo(t,e,n){if(t==e)return!0;t||(t=$d),e||(e=$d);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Cc(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function wk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Hs{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Et=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Et||(Et={}));class K extends fi{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Ws(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Qn(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=Q0(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new Qn(e,r,i,n,e.widget||null,!0)}static line(e){return new Vs(e)}static set(e,n=!1){return te.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}K.none=te.empty;class Ws extends K{constructor(e){let{start:n,end:r}=Q0(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Ws&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&bo(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Ws.prototype.point=!1;class Vs extends K{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Vs&&this.spec.class==e.spec.class&&bo(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Vs.prototype.mapMode=dt.TrackBefore;Vs.prototype.point=!0;class Qn extends K{constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?dt.TrackBefore:dt.TrackAfter:dt.TrackDel}get type(){return this.startSide!=this.endSide?Et.WidgetRange:this.startSide<=0?Et.WidgetBefore:Et.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Qn&&xk(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Qn.prototype.point=!0;function Q0(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function xk(t,e){return t==e||!!(t&&e&&t.compare(e))}function Gl(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Ce extends ie{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof Ce))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),U0(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new Ce;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){bo(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){q0(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Sc(n,this.attrs||{})),r&&(this.attrs=Sc({class:r},this.attrs||{}))}domAtPos(e){return G0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(F0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Cc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&ie.get(i)instanceof kn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ie.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!D.ios||!this.children.some(s=>s instanceof Wt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Wt)||/[^ -~]/.test(r.text))return null;let i=Ns(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=Y0(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof Ce&&this.children.length==0&&e.children.length==0&&bo(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof Ce)return s;if(l>n)break}i=l+s.breakAfter}return null}}class gn extends ie{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof gn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Ke.before(this.dom):Ke.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new gn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return $h}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):J.empty}domBoundsAround(){return null}become(e){return e instanceof gn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof Ac?null:la(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Ac extends Hs{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class is{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof gn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ce),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ml(new di(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof gn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(ml(new Wt(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof Qn){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof Qn)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new gn(r.widget||pi.block,o,r));else{let a=dr.create(r.widget||pi.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(ml(new di(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(ml(a,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new is(e,n,r,s);return l.openEnd=te.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function ml(t,e){for(let n of e)t=new kn(n,[t],t.length);return t}class pi extends Hs{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}pi.inline=new pi("span");pi.block=new pi("div");var Me=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Me||(Me={}));const br=Me.LTR,Kh=Me.RTL;function J0(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const kk=J0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Sk=J0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),bc=Object.create(null),Yt=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);bc[e]=n,bc[n]=-e}function X0(t){return t<=247?kk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Sk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Ck=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Bn{get dir(){return this.level%2?Kh:br}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function Z0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!Z0(r.inner,i.inner))return!1}return!0}const re=[];function Ak(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,c=a,h=a;u<o;u++){let f=X0(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),re[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=l,c=a,h=a;u<o;u++){let f=re[u];if(f==128)u<o-1&&c==re[u+1]&&c&24?f=re[u]=c:re[u]=256;else if(f==64){let d=u+1;for(;d<o&&re[d]==64;)d++;let m=u&&c==8||d<n&&re[d]==8?h==1?1:8:256;for(let v=u;v<d;v++)re[v]=m;u=d-1}else f==8&&h==1&&(re[u]=1);c=f,f&7&&(h=f)}}}function bk(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,c=l<r.length?r[l].from:n;for(let h=u,f,d,m;h<c;h++)if(d=bc[f=t.charCodeAt(h)])if(d<0){for(let v=o-3;v>=0;v-=3)if(Yt[v+1]==-d){let x=Yt[v+2],p=x&2?i:x&4?x&1?s:i:0;p&&(re[h]=re[Yt[v]]=p),o=v;break}}else{if(Yt.length==189)break;Yt[o++]=h,Yt[o++]=f,Yt[o++]=a}else if((m=re[h])==2||m==1){let v=m==i;a=v?0:1;for(let x=o-3;x>=0;x-=3){let p=Yt[x+2];if(p&2)break;if(v)Yt[x+2]|=2;else{if(p&4)break;Yt[x+2]|=4}}}}}function Ek(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=re[a];if(u==256){let c=a+1;for(;;)if(c==o){if(i==n.length)break;c=n[i++].to,o=i<n.length?n[i].from:e}else if(re[c]==256)c++;else break;let h=s==1,f=(c<e?re[c]:r)==1,d=h==f?h?1:2:r;for(let m=c,v=i,x=v?n[v-1].to:t;m>a;)m==x&&(m=n[--v].from,x=v?n[v-1].to:t),re[--m]=d;a=c}else s=u,a++}}}function Ec(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let c=!0,h=!1;if(u==s.length||a<s[u].from){let v=re[a];v!=o&&(c=!1,h=v==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,m=a;e:for(;;)if(u<s.length&&m==s[u].from){if(h)break e;let v=s[u];if(!c)for(let x=v.to,p=u+1;;){if(x==n)break e;if(p<s.length&&s[p].from==x)x=s[p++].to;else{if(re[x]==o)break e;break}}if(u++,f)f.push(v);else{v.from>a&&l.push(new Bn(a,v.from,d));let x=v.direction==br!=!(d%2);Mc(t,x?r+1:r,i,v.inner,v.from,v.to,l),a=v.to}m=v.to}else{if(m==n||(c?re[m]!=o:re[m]==o))break;m++}f?Ec(t,a,m,r+1,i,f,l):a<m&&l.push(new Bn(a,m,d)),a=m}else for(let a=n,u=s.length;a>e;){let c=!0,h=!1;if(!u||a>s[u-1].to){let v=re[a-1];v!=o&&(c=!1,h=v==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,m=a;e:for(;;)if(u&&m==s[u-1].to){if(h)break e;let v=s[--u];if(!c)for(let x=v.from,p=u;;){if(x==e)break e;if(p&&s[p-1].to==x)x=s[--p].from;else{if(re[x-1]==o)break e;break}}if(f)f.push(v);else{v.to<a&&l.push(new Bn(v.to,a,d));let x=v.direction==br!=!(d%2);Mc(t,x?r+1:r,i,v.inner,v.from,v.to,l),a=v.from}m=v.from}else{if(m==e||(c?re[m-1]!=o:re[m-1]==o))break;m--}f?Ec(t,m,a,r+1,i,f,l):m<a&&l.push(new Bn(m,a,d)),a=m}}function Mc(t,e,n,r,i,s,l){let o=e%2?2:1;Ak(t,i,s,r,o),bk(t,i,s,r,o),Ek(i,s,r,o),Ec(t,i,s,e,n,r,l)}function Mk(t,e,n){if(!t)return[new Bn(0,0,e==Kh?1:0)];if(e==br&&!n.length&&!Ck.test(t))return ey(t.length);if(n.length)for(;t.length>re.length;)re[re.length]=256;let r=[],i=e==br?0:1;return Mc(t,i,i,n,0,t.length,r),r}function ey(t){return[new Bn(0,t,0)]}let ty="";function Tk(t,e,n,r,i){var s;let l=r.head-t.from,o=Bn.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let c=Fe(t.text,l,a.forward(i,n));(c<a.from||c>a.to)&&(c=u),ty=t.text.slice(Math.min(l,c),Math.max(l,c));let h=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<a.level?E.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):E.cursor(c+t.from,a.forward(i,n)?-1:1,a.level)}function Nk(t,e,n){for(let r=e;r<n;r++){let i=X0(t.charCodeAt(r));if(i==1)return br;if(i==2||i==4)return Kh}return br}const ny=_.define(),ry=_.define(),iy=_.define(),sy=_.define(),Tc=_.define(),ly=_.define(),oy=_.define(),Gh=_.define(),qh=_.define(),ay=_.define({combine:t=>t.some(e=>e)}),Ok=_.define({combine:t=>t.some(e=>e)}),uy=_.define();class ni{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new ni(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ni(E.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const gl=ae.define({map:(t,e)=>t.map(e)}),cy=ae.define();function rn(t,e,n){let r=t.facet(sy);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const hn=_.define({combine:t=>t.length?t[0]:!0});let Pk=0;const $r=_.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class yt{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat($r.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat($r.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new yt(Pk++,e,r,i,o=>{let a=[];return l&&a.push(Os.of(u=>{let c=u.plugin(o);return c?l(c):K.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return yt.define((r,i)=>new e(r,i),n)}}class Ka{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(rn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){rn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){rn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const hy=_.define(),Yh=_.define(),Os=_.define(),fy=_.define(),Us=_.define(),dy=_.define();function Kd(t,e){let n=t.state.facet(dy);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return te.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,c=l-e.from,h=i;for(let f=o.length-1;f>=0;f--,a--){let d=o[f].spec.bidiIsolate,m;if(d==null&&(d=Nk(e.text,u,c)),a>0&&h.length&&(m=h[h.length-1]).to==u&&m.direction==d)m.to=c,h=m.inner;else{let v={from:u,to:c,direction:d,inner:[]};h.push(v),h=v.inner}}}}),i}const py=_.define();function my(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(py)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Vi=_.define();class Mt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Mt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let h=n[s],f=n[s+1],d=Math.max(o,h),m=Math.min(c,f);if(d<=m&&new Mt(d+u,m+u,d,m).addToSet(r),f>c)break;s+=2}if(!a)return r;new Mt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class Eo{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Oe.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new Mt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new Eo(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Gd extends ie{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=K.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ce],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Mt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!Fk(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?Lk(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Mt(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(D.ie||D.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=Ik(l,o,e.changes);return r=Mt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=D.chrome||D.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof gn&&l.widget instanceof Ac&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:c,toB:h}=o,f,d,m,v;if(r&&r.range.fromB<h&&r.range.toB>c){let k=is.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=is.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);d=k.breakAtStart,m=k.openStart,v=C.openEnd;let b=this.compositionView(r);C.breakAtStart?b.breakAfter=1:C.content.length&&b.merge(b.length,b.length,C.content[0],!1,C.openStart,0)&&(b.breakAfter=C.content[0].breakAfter,C.content.shift()),k.content.length&&b.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(b).concat(C.content)}else({content:f,breakAtStart:d,openStart:m,openEnd:v}=is.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:x,off:p}=s.findPos(u,1),{i:g,off:w}=s.findPos(a,-1);V0(this,g,w,x,p,f,d,m,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(cy)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Wt(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new kn(i,[n],n.length);let r=new Ce;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=ie.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(hn)||this.dom.tabIndex>-1)&&Kl(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(D.gecko&&o.empty&&!this.hasComposition&&Dk(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=u=new Ke(h,0),l=!0}let c=this.view.observer.selectionRange;(l||!c.focusNode||(!rs(a.node,a.offset,c.anchorNode,c.anchorOffset)||!rs(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,o))&&(this.view.observer.ignore(()=>{D.android&&D.chrome&&this.dom.contains(c.focusNode)&&jk(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Ts(this.view.root);if(h)if(o.empty){if(D.gecko){let f=Rk(a.node,a.offset);if(f&&f!=3){let d=(f==1?_0:H0)(a.node,a.offset);d&&(a=new Ke(d.node,d.offset))}}h.collapse(a.node,a.offset),o.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=o.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Ke(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Ke(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&rs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Ts(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=Ce.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=ie.get(n.childNodes[i]);s instanceof Ce&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=ie.get(n.childNodes[i]);s instanceof Ce&&(r=s.domAtPos(s.length))}return r?new Ke(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=ie.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Ce)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof Ce&&!(r instanceof Ce&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof gn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Ce))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Wt))return null;let s=Fe(i.text,r);if(s==r)return null;let l=Ar(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Me.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>i)break;if(u>=r){let d=h.dom.getBoundingClientRect();if(n.push(d.height),l){let m=h.dom.lastChild,v=m?Ns(m):[];if(v.length){let x=v[v.length-1],p=a?x.right-d.left:d.right-x.left;p>o&&(o=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Me.RTL:Me.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Ce){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Ns(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new W0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(K.replace({widget:new Ac(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return K.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Os).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(fy).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(te.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(uy))try{if(u(this.view,e.range,e))return!0}catch(c){rn(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=my(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;uk(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Me.LTR)}}function Dk(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function gy(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=_0(n.focusNode,n.focusOffset),i=H0(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=ie.get(i.node);if(!o||o instanceof Wt&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=ie.get(r.node);!a||a instanceof Wt&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function Lk(t,e,n){let r=gy(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new Mt(a.mapPos(s),a.mapPos(l),s,l),c=[];for(let h=i.parentNode;;h=h.parentNode){let f=ie.get(h);if(f instanceof kn)c.push({node:h,deco:f.mark});else{if(f instanceof Ce||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new Ws({inclusive:!0,attributes:wk(h),tagName:h.tagName.toLowerCase()})});else return null}}}function Rk(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Bk=class{constructor(){this.changes=[]}compareRange(e,n){Gl(e,n,this.changes)}comparePoint(e,n){Gl(e,n,this.changes)}boundChange(e){Gl(e,e,this.changes)}};function Ik(t,e,n){let r=new Bk;return te.compare(t,e,n,r),r.changes}function jk(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Fk(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function zk(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return E.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=Fe(i.text,s,!1):o=Fe(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=Fe(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=Fe(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return E.range(l+i.from,o+i.from)}function _k(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Hk(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Ga(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function qd(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Yd(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Nc(t,e,n){let r,i,s,l,o=!1,a,u,c,h;for(let m=t.firstChild;m;m=m.nextSibling){let v=Ns(m);for(let x=0;x<v.length;x++){let p=v[x];i&&Ga(i,p)&&(p=qd(Yd(p,i.bottom),i.top));let g=_k(e,p),w=Hk(n,p);if(g==0&&w==0)return m.nodeType==3?Qd(m,e,n):Nc(m,e,n);(!r||l>w||l==w&&s>g)&&(r=m,i=p,s=g,l=w,o=g?e<p.left?x>0:x<v.length-1:!0),g==0?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=m,c=p):n<p.top&&(!h||h.top>p.top)&&(u=m,h=p):c&&Ga(c,p)?c=Yd(c,p.bottom):h&&Ga(h,p)&&(h=qd(h,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):h&&h.top<=n&&(r=u,i=h),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Qd(r,f,n);if(o&&r.contentEditable!="false")return Nc(r,f,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function Qd(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=Ar(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;l||(l=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,d=f;if((D.chrome||D.gecko)&&Ar(t,o).getBoundingClientRect().left==c.right&&(d=!f),h<=0)return{node:t,offset:o+(d?1:0)};i=o+(d?1:0),s=h}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function yy(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:h}=e,f=h-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(f),a.type!=Et.Text;)for(;f=r>0?a.bottom+k:a.top-k,!(f>=0&&f<=u);){if(C)return n?null:0;C=!0,r=-r}h=o+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:Jd(t,l,a,c,h);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Jd(t,l,a,c,h);let m=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:m,x=v.elementFromPoint(c,h);x&&!t.contentDOM.contains(x)&&(x=null),x||(c=Math.max(l.left+1,Math.min(l.right-1,c)),x=v.elementFromPoint(c,h),x&&!t.contentDOM.contains(x)&&(x=null));let p,g=-1;if(x&&((i=t.docView.nearest(x))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let k=m.caretPositionFromPoint(c,h);k&&({offsetNode:p,offset:g}=k)}else if(m.caretRangeFromPoint){let k=m.caretRangeFromPoint(c,h);k&&({startContainer:p,startOffset:g}=k)}p&&(!t.contentDOM.contains(p)||D.safari&&Wk(p,g,c)||D.chrome&&Vk(p,g,c))&&(p=void 0),p&&(g=Math.min(an(p),g))}if(!p||!t.docView.dom.contains(p)){let k=Ce.find(t.docView,d);if(!k)return f>a.top+a.height/2?a.to:a.from;({node:p,offset:g}=Nc(k.dom,c,h))}let w=t.docView.nearest(p);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=w.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(p,g)+w.posAtStart}function Jd(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+rk(l,s,t.state.tabSize)}function vy(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return Ar(t,r-1,r).getBoundingClientRect().right>n}function Wk(t,e,n){return vy(t,e,n)}function Vk(t,e,n){if(e!=0)return vy(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Ar(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function Uk(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Et.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function $k(t,e,n,r){let i=Uk(t,e.head,e.assoc||-1),s=!r||i.type!=Et.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==Me.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return E.cursor(a,n?-1:1)}return E.cursor(n?i.to:i.from,n?-1:1)}function Xd(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Tk(i,s,l,o,n),c=ty;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(c))return o}else{if(!r)return u;a=r(c)}o=u}}function Kk(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==ze.Space&&(i=l),i==l}}function Gk(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return E.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),o=(s<0?d.top:d.bottom)+c}let h=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let m=o+(f+d)*s,v=yy(t,{x:h,y:m},!1,s);if(m<a.top||m>a.bottom||(s<0?v<i:v>i)){let x=t.docView.coordsForChar(v),p=!x||m<x.top?-1:1;return E.cursor(v,p,void 0,l)}}}function ss(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function wy(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=ss(t,i.from,0);l!=i.from&&(s=E.cursor(l,-1))}else{let l=ss(t,i.from,-1),o=ss(t,i.to,1);(l!=i.from||o!=i.to)&&(s=E.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?E.create(n,e.mainIndex):e}function qa(t,e,n){let r=ss(t.state.facet(Us).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:E.cursor(r,r<n.from?1:-1)}const Ui="￿";class qk{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ee.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ui}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=ie.get(i),a=ie.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:Ao(i))||Ao(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=ie.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(Yk(e,r.node,r.offset)?n:0))}}function Yk(t,e,n){for(;;){if(!e||n<an(e))return!1;if(e==t)return!0;n=Cr(e)+1,e=e.parentNode}}class Zd{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Qk{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:Zk(e),a=new qk(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=eS(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!vc(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!vc(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),c=e.viewport;if((D.ios||D.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(a,u),f=Math.max(a,u),d=c.from-h,m=c.to-f;(d==0||d==1||h==0)&&(m==0||m==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=E.single(u,a)}}}function xy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||D.android&&e.text.length<o-l)&&(a=i.to,u="end");let c=Xk(t.state.doc.sliceString(l,o,Ui),e.text,a-l,u);c&&(D.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Ui+Ui&&c.toB--,n={from:l+c.from,to:l+c.toA,insert:J.of(e.text.slice(c.from,c.toB).split(Ui))})}else r&&(!t.hasFocus&&t.state.facet(hn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(D.mac||D.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:J.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:D.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:J.of([" "])}),n)return Qh(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=wy(t.state.facet(Us).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function Qh(t,e,n,r=-1){if(D.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(D.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ti(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&ti(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&ti(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=Jk(t,e,n));return t.state.facet(ly).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function Jk(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,c=ss(i.facet(Us).map(h=>h(t)),u,a);e.from==c&&(l=c)}if(l>-1)r={changes:e,selection:E.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),h,f=n&&gy(t,n.main.head);if(f){let v=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-v}}else h=t.state.doc.lineAt(s.head);let d=s.to-e.to,m=s.to-s.from;r=i.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:u||v.map(a)};let x=v.to-d,p=x-c.length;if(v.to-v.from!=m||t.state.sliceDoc(p,x)!=c||v.to>=h.from&&v.from<=h.to)return{range:v};let g=i.changes({from:p,to:x,insert:e.insert}),w=v.to-s.to;return{changes:g,range:u?E.range(Math.max(0,u.anchor+w),Math.max(0,u.head+w)):v.map(g)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function Xk(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function Zk(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Zd(n,r)),(i!=n||s!=r)&&e.push(new Zd(i,s))),e}function eS(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?E.single(n+e,r+e):null}class tS{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,D.safari&&e.contentDOM.addEventListener("input",()=>null),D.gecko&&yS(e.contentDOM.ownerDocument)}handleEvent(e){!uS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=nS(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Sy.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),D.android&&D.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return D.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=ky.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||rS.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ti(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:D.safari&&!D.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function ep(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){rn(n.state,i)}}}function nS(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(ep(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(ep(r.value,a))}}for(let r in Vt)n(r).handlers.push(Vt[r]);for(let r in Pt)n(r).observers.push(Pt[r]);return e}const ky=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],rS="dthko",Sy=[16,17,18,20,91,92,224,225],yl=6;function vl(t){return Math.max(0,t)*.7+8}function iS(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class sS{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=ck(e.contentDOM),this.atoms=e.state.facet(Us).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ee.allowMultipleSelections)&&lS(e,n),this.dragging=aS(e,n)&&by(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&iS(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=my(this.view);e.clientX-a.left<=i+yl?n=-vl(i-e.clientX):e.clientX+a.right>=l-yl&&(n=vl(e.clientX-l)),e.clientY-a.top<=s+yl?r=-vl(s-e.clientY):e.clientY+a.bottom>=o-yl&&(r=vl(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=wy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function lS(t,e){let n=t.state.facet(ny);return n.length?n[0](e):D.mac?e.metaKey:e.ctrlKey}function oS(t,e){let n=t.state.facet(ry);return n.length?n[0](e):D.mac?!e.altKey:!e.ctrlKey}function aS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Ts(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function uS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ie.get(n))&&r.ignoreEvent(e))return!1;return!0}const Vt=Object.create(null),Pt=Object.create(null),Cy=D.ie&&D.ie_version<15||D.ios&&D.webkit_version<604;function cS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Ay(t,n.value)},50)}function aa(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function Ay(t,e){e=aa(t.state,Gh,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(Oc!=null&&n.selection.ranges.every(a=>a.empty)&&Oc==s.toString()){let a=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let h=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:E.cursor(u.from+h.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:E.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Pt.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Vt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Pt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Pt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Vt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(iy))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=dS(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new sS(t,e,n,r)),r&&t.observer.ignore(()=>{j0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function tp(t,e,n,r){if(r==1)return E.cursor(e,n);if(r==2)return zk(t.state,e,n);{let i=Ce.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,E.range(l,o)}}let np=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function hS(t,e,n,r){let i=Ce.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&np(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&np(n,r,o)?1:l&&l.bottom>=r?-1:1}function rp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:hS(t,n,e.clientX,e.clientY)}}const fS=D.ie&&D.ie_version<=11;let ip=null,sp=0,lp=0;function by(t){if(!fS)return t.detail;let e=ip,n=lp;return ip=t,lp=Date.now(),sp=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(sp+1)%3:1}function dS(t,e){let n=rp(t,e),r=by(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=rp(t,s),u,c=tp(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let h=tp(t,n.pos,n.bias,r),f=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=f<c.from?E.range(f,d):E.range(d,f)}return l?i.replaceRange(i.main.extend(c.from,c.to)):o&&r==1&&i.ranges.length>1&&(u=pS(i,a.pos))?u:o?i.addRange(c):E.create([c])}}}function pS(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return E.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Vt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=E.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",aa(t.state,qh,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Vt.dragend=t=>(t.inputState.draggedContent=null,!1);function op(t,e,n,r){if(n=aa(t.state,Gh,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&oS(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Vt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&op(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return op(t,e,r,!0),!0}return!1};Vt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Cy?null:e.clipboardData;return n?(Ay(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(cS(t),!1)};function mS(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function gS(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:aa(t,qh,e.join(t.lineBreak)),ranges:n,linewise:r}}let Oc=null;Vt.copy=Vt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=gS(t.state);if(!n&&!i)return!1;Oc=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=Cy?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(mS(t,n),!1)};const Ey=ki.define();function My(t,e){let n=[];for(let r of t.facet(oy)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:Ey.of(!0)}):null}function Ty(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=My(t.state,e);n?t.dispatch(n):t.update([])}},10)}Pt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Ty(t)};Pt.blur=t=>{t.observer.clearSelectionRange(),Ty(t)};Pt.compositionstart=Pt.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Pt.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,D.chrome&&D.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Pt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Vt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return Qh(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(D.chrome&&D.android&&(i=ky.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return D.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),D.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Pt.compositionend(t,e),20),!1};const ap=new Set;function yS(t){ap.has(t)||(ap.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const up=["pre-wrap","normal","pre-line","break-spaces"];let mi=!1;function cp(){mi=!1}class vS{constructor(e){this.lineWrapping=e,this.doc=J.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return up.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=up.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let c=l[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class wS{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class nn{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Et.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Qn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new nn(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var ce=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ce||(ce={}));const ql=.001;class Ze{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>ql&&(mi=!0),this.height=e)}replace(e,n,r){return Ze.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:c,toB:h}=i[o],f=s.lineAt(a,ce.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,ce.ByPosNoHeight,r,0,0);for(h+=d.to-u,u=d.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,ce.ByPosNoHeight,r,0,0));c+=f.from-a,a=f.from;let m=Jh.build(r.setDoc(l),e,c,h);s=Mo(s,s.replace(a,u,m))}return s.updateHeight(r,0)}static empty(){return new ft(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new xS(Ze.of(e.slice(0,n)),l,Ze.of(e.slice(r)))}}function Mo(t,e){return t==e?t:(t.constructor!=e.constructor&&(mi=!0),e)}Ze.prototype.size=1;class Ny extends Ze{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new nn(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ft extends Ny{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new nn(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof ft||i instanceof Be&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Be?i=new ft(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ze.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Be extends Ze{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),h=o+c.length*a,f=Math.max(r,e-h/2);return new nn(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:c,length:h}=n.doc.line(s+u);return new nn(c,h,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==ce.ByHeight)return this.blockAt(e,r,i,s);if(n==ce.ByPosNoHeight){let{from:d,to:m}=r.doc.lineAt(e);return new nn(d,m-d,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=o+u.length*a,h=u.number-l,f=i+o*h+a*(u.from-s-h);return new nn(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let c=e,h=i;c<=n;){let f=r.doc.lineAt(c);if(c==e){let m=f.number-o;h+=a*m+u*(e-s-m)}let d=a+u*f.length;l(new nn(f.from,f.length,h,d,0)),h+=d,c=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Be?r[r.length-1]=new Be(s.length+i):r.push(null,new Be(i-1))}if(e>0){let s=r[0];s instanceof Be?r[0]=new Be(e+s.length):r.unshift(new Be(e-1),null)}return Ze.of(r)}decomposeLeft(e,n){n.push(new Be(e-1),null)}decomposeRight(e,n){n.push(null,new Be(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Be(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let c=e.doc.lineAt(o).length;l.length&&l.push(null);let h=i.heights[i.index++];a==-1?a=h:Math.abs(h-a)>=ql&&(a=-2);let f=new ft(c,h);f.outdated=!1,l.push(f),o+=c+1}o<=s&&l.push(null,new Be(s-o).updateHeight(e,o));let u=Ze.of(l);return(a<0||Math.abs(u.height-this.height)>=ql||Math.abs(a-this.heightMetrics(e,n).perLine)>=ql)&&(mi=!0),Mo(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class xS extends Ze{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==ce.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let c=n==ce.ByPosNoHeight?ce.ByPosNoHeight:ce.ByPos;return a?u.join(this.right.lineAt(o,c,r,l,o)):this.left.lineAt(o,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,ce.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&hp(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),hp(s,o)}return Ze.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Ze.of(this.break?[e,null,n]:[e,n]):(this.left=Mo(this.left,e),this.right=Mo(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function hp(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Be&&(r=t[e+1])instanceof Be&&t.splice(e-1,3,new Be(n.length+1+r.length))}const kS=5;class Jh{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof ft?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new ft(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new Ny(l,i,r)):(l||s||i>=kS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ft(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Be(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ft)return e;let n=new ft(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof ft)&&!this.isCovered?this.nodes.push(new ft(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof ft&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new Jh(r,e);return te.spans(n,r,i,s,0),s.finish(r)}}function SS(t,e,n){let r=new CS;return te.compare(t,e,n,r,0),r.changes}class CS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&Gl(e,n,this.changes,5)}}function AS(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function bS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function ES(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Ya{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return K.replace({widget:new MS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class MS extends Hs{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class fp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=dp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Me.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Yh).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new vS(n),this.stateDeco=e.facet(Os).filter(r=>typeof r!="function"),this.heightMap=Ze.empty().applyChanges(this.stateDeco,J.empty,this.heightOracle.setDoc(e.doc),[new Mt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=K.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new wl(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?dp:new Xh(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push($i(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Os).filter(c=>typeof c!="function");let i=e.changedRanges,s=Mt.extendWithRanges(i,SS(r,this.stateDeco,e?e.changes:Oe.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);cp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||mi)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Ok)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Me.RTL:Me.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,c=0;if(o.width&&o.height){let{scaleX:k,scaleY:C}=I0(n,o);(k>.005&&Math.abs(this.scaleX-k)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=k,this.scaleY=C,u|=16,l=a=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=z0(e.scrollDOM);let m=(this.printing?ES:AS)(n,this.paddingTop),v=m.top-this.pixelViewport.top,x=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!bS(e.dom))return 0;let g=o.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let k=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(k)&&(l=!0),l||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:b,textHeight:A}=e.docView.measureTextSize();l=C>0&&i.refresh(s,C,b,A,Math.max(5,g/b),k),l&&(e.docView.minWidth=0,u|=16)}v>0&&x>0?c=Math.max(v,x):v<0&&x<0&&(c=Math.min(v,x)),cp();for(let C of this.viewports){let b=C.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?Ze.empty().applyChanges(this.stateDeco,J.empty,this.heightOracle,[new Mt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new wS(C.from,b))}mi&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new wl(i.lineAt(l-r*1e3,ce.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,ce.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,ce.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=h.top:f=h.bottom-c,a=new wl(i.lineAt(f-1e3/2,ce.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,ce.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new wl(this.heightMap.lineAt(r,ce.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ce.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ce.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,ce.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Ya(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=Me.LTR&&!r)return[];let o=[],a=(c,h,f,d)=>{if(h-c<s)return;let m=this.state.selection.main,v=[m.from];m.empty||v.push(m.to);for(let p of v)if(p>c&&p<h){a(c,p-10,f,d),a(p+10,h,f,d);return}let x=NS(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-c)<s&&Math.abs(p.to-h)<s&&!v.some(g=>p.from<g&&p.to>g));if(!x){if(h<f.to&&n&&r&&n.visibleRanges.some(w=>w.from<=h&&w.to>=h)){let w=n.moveToLineBoundary(E.cursor(h),!1,!0).head;w>c&&(h=w)}let p=this.gapSize(f,c,h,d),g=r||p<2e6?p:2e6;x=new Ya(c,h,p,g)}o.push(x)},u=c=>{if(c.length<l||c.type!=Et.Text)return;let h=TS(c.from,c.to,this.stateDeco);if(h.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,m;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,p;if(f!=null){let g=kl(h,f),w=((this.visibleBottom-this.visibleTop)/2+v)/c.height;x=g-w,p=g+w}else x=(this.visibleTop-c.top-v)/c.height,p=(this.visibleBottom-c.top+v)/c.height;d=xl(h,x),m=xl(h,p)}else{let v=h.total*this.heightOracle.charWidth,x=i*this.heightOracle.charWidth,p=0;if(v>2e6)for(let b of e)b.from>=c.from&&b.from<c.to&&b.size!=b.displaySize&&b.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=b.size-b.displaySize);let g=this.pixelViewport.left+p,w=this.pixelViewport.right+p,k,C;if(f!=null){let b=kl(h,f),A=((w-g)/2+x)/v;k=b-A,C=b+A}else k=(g-x)/v,C=(w+x)/v;d=xl(h,k),m=xl(h,C)}d>c.from&&a(c.from,d,c,h),m<c.to&&a(m,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return o}gapSize(e,n,r,i){let s=kl(i,r)-kl(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Ya.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=K.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];te.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||$i(this.heightMap.lineAt(e,ce.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||$i(this.heightMap.lineAt(this.scaler.fromDOM(e),ce.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return $i(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class wl{constructor(e,n){this.from=e,this.to=n}}function TS(t,e,n){let r=[],i=t,s=0;return te.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function xl({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function kl(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function NS(t,e){for(let n of t)if(e(n))return n}const dp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Xh{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,ce.ByPos,e,0,0).top,c=n.lineAt(a,ce.ByPos,e,0,0).bottom;return i+=c-u,{from:o,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof Xh?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function $i(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new nn(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>$i(i,e)):t._content)}const Sl=_.define({combine:t=>t.join(" ")}),Pc=_.define({combine:t=>t.indexOf(!0)>-1}),Dc=qn.newName(),Oy=qn.newName(),Py=qn.newName(),Dy={"&light":"."+Oy,"&dark":"."+Py};function Lc(t,e,n){return new qn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const OS=Lc("."+Dc,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Dy),PS={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Qa=D.ie&&D.ie_version<=11;class DS{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new hk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(D.ie&&D.ie_version<=11||D.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&D.android&&e.constructor.EDIT_CONTEXT!==!1&&!(D.chrome&&D.chrome_version<126)&&(this.editContext=new RS(e),e.state.facet(hn)&&(e.contentDOM.editContext=this.editContext.editContext)),Qa&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(hn)?r.root.activeElement!=this.dom:!Kl(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(D.ie&&D.ie_version<=11||D.android&&D.chrome)&&!r.state.selection.main.empty&&i.focusNode&&rs(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ts(e.root);if(!n)return!1;let r=D.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&LS(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=Kl(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&dk(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,PS),Qa&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Qa&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&ti(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Kl(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Qk(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=xy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=pp(n,e.previousSibling||e.target.previousSibling,-1),i=pp(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(hn)!=e.state.facet(hn)&&(e.view.contentDOM.editContext=e.state.facet(hn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function pp(t,e,n){for(;e;){let r=ie.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function mp(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return rs(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function LS(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return mp(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?mp(t,n):null}class RS{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:J.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=E.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((D.mac||D.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:J.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);Qh(e,u,E.single(this.toEditorPos(r.selectionStart,c),this.toEditorPos(r.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(K.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:cy.of(K.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Ts(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let c=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class z{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||fk(e.parent)||document,this.viewState=new fp(e.state||ee.create(e)),e.scrollTo&&e.scrollTo.is(gl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet($r).map(i=>new Ka(i));for(let i of this.plugins)i.update(this);this.observer=new DS(this),this.inputState=new tS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Gd(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Ge?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(Ey))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=My(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(ee.phrases)!=this.state.facet(ee.phrases))return this.setState(s);i=Eo.create(this,s,e),i.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new ni(d.empty?d:E.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(gl)&&(h=d.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=To.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Vi)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Sl)!=i.state.facet(Sl)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(Tc))try{f(i)}catch(d){rn(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!xy(this,c)&&u.force&&ti(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new fp(e),this.plugins=e.facet($r).map(r=>new Ka(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new Gd(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet($r),r=e.state.facet($r);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new Ka(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){rn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(z0(r))s=-1,l=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,l=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(m){return rn(this.state,m),gp}}),h=Eo.create(this,this.state,[]),f=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=gp)try{let m=u[d];m.write&&m.write(c[d],this)}catch(m){rn(this.state,m)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(Tc))o(n)}get themeClasses(){return Dc+" "+(this.state.facet(Pc)?Py:Oy)+" "+this.state.facet(Sl)}updateAttrs(){let e=yp(this,hy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(hn)?"true":"false",class:"cm-content",style:`${D.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),yp(this,Yh,n);let r=this.observer.ignore(()=>{let i=Cc(this.contentDOM,this.contentAttrs,n),s=Cc(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(z.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Vi);let e=this.state.facet(z.cspNonce);qn.mount(this.root,this.styleModules.concat(OS).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return qa(this,e,Xd(this,e,n,r))}moveByGroup(e,n){return qa(this,e,Xd(this,e,n,r=>Kk(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return E.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return $k(this,e,n,r)}moveVertically(e,n,r){return qa(this,e,Gk(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),yy(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[Bn.find(s,e-i.from,-1,n)];return la(r,l.dir==Me.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(ay)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>BS)return ey(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||Z0(s.isolates,r=Kd(this,e))))return s.order;r||(r=Kd(this,e));let i=Mk(e.text,n,r);return this.bidiCache.push(new To(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||D.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{j0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return gl.of(new ni(typeof e=="number"?E.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return gl.of(new ni(E.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return yt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return yt.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=qn.newName(),i=[Sl.of(r),Vi.of(Lc(`.${r}`,e))];return n&&n.dark&&i.push(Pc.of(!0)),i}static baseTheme(e){return na.lowest(Vi.of(Lc("."+Dc,e,Dy)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ie.get(r)||ie.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}z.styleModule=Vi;z.inputHandler=ly;z.clipboardInputFilter=Gh;z.clipboardOutputFilter=qh;z.scrollHandler=uy;z.focusChangeEffect=oy;z.perLineTextDirection=ay;z.exceptionSink=sy;z.updateListener=Tc;z.editable=hn;z.mouseSelectionStyle=iy;z.dragMovesSelection=ry;z.clickAddsSelectionRange=ny;z.decorations=Os;z.outerDecorations=fy;z.atomicRanges=Us;z.bidiIsolatedRanges=dy;z.scrollMargins=py;z.darkTheme=Pc;z.cspNonce=_.define({combine:t=>t.length?t[0]:""});z.contentAttributes=Yh;z.editorAttributes=hy;z.lineWrapping=z.contentAttributes.of({class:"cm-lineWrapping"});z.announce=ae.define();const BS=4096,gp={};class To{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Me.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new To(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function yp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&Sc(l,n)}return n}const IS=D.mac?"mac":D.windows?"win":D.linux?"linux":"key";function jS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function Cl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const FS=na.default(z.domEventHandlers({keydown(t,e){return By(Ry(e.state),t,e,"editor")}})),Ly=_.define({enables:FS}),vp=new WeakMap;function Ry(t){let e=t.facet(Ly),n=vp.get(e);return n||vp.set(e,n=HS(e.reduce((r,i)=>r.concat(i),[]))),n}function zS(t,e,n){return By(Ry(t.state),e,t,n)}let Pn=null;const _S=4e3;function HS(t,e=IS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,c)=>{var h,f;let d=n[l]||(n[l]=Object.create(null)),m=o.split(/ (?!$)/).map(p=>jS(p,e));for(let p=1;p<m.length;p++){let g=m.slice(0,p).join(" ");i(g,!0),d[g]||(d[g]={preventDefault:!0,stopPropagation:!1,run:[w=>{let k=Pn={view:w,prefix:g,scope:l};return setTimeout(()=>{Pn==k&&(Pn=null)},_S),!0}]})}let v=m.join(" ");i(v,!1);let x=d[v]||(d[v]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});a&&x.run.push(a),u&&(x.preventDefault=!0),c&&(x.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=l;for(let f in c)c[f].run.push(d=>h(d,Rc))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Rc=null;function By(t,e,n,r){Rc=e;let i=ok(e),s=x0(i,0),l=k0(s)==i.length&&i!=" ",o="",a=!1,u=!1,c=!1;Pn&&Pn.view==n&&Pn.scope==r&&(o=Pn.prefix+" ",Sy.indexOf(e.keyCode)<0&&(u=!0,Pn=null));let h=new Set,f=x=>{if(x){for(let p of x.run)if(!h.has(p)&&(h.add(p),p(n)))return x.stopPropagation&&(c=!0),!0;x.preventDefault&&(x.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],m,v;return d&&(f(d[o+Cl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(D.windows&&e.ctrlKey&&e.altKey)&&!(D.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(m=Yn[e.keyCode])&&m!=i?(f(d[o+Cl(m,e,!0)])||e.shiftKey&&(v=Ms[e.keyCode])!=i&&v!=m&&f(d[o+Cl(v,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(d[o+Cl(i,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),Rc=null,a}function WS(){return US}const VS=K.line({class:"cm-activeLine"}),US=yt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(VS.range(i.from)),e=i.from)}return K.set(n)}},{decorations:t=>t.decorations}),wp=_.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function No(t,e){let n=t.plugin(Iy),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Iy=yt.fromClass(class{constructor(t){this.input=t.state.facet(Oo),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(wp);this.top=new Al(t,!0,e.topContainer),this.bottom=new Al(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(wp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Al(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Al(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Oo);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),o.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:l).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>z.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Al{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=xp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=xp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function xp(t){let e=t.nextSibling;return t.remove(),e}const Oo=_.define({enables:Iy});class Jn extends fi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Jn.prototype.elementClass="";Jn.prototype.toDOM=void 0;Jn.prototype.mapMode=dt.TrackBefore;Jn.prototype.startSide=Jn.prototype.endSide=-1;Jn.prototype.point=!0;const Ja=_.define(),$S=_.define(),KS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>te.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ls=_.define();function GS(t){return[jy(),ls.of({...KS,...t})]}const kp=_.define({combine:t=>t.some(e=>e)});function jy(t){return[qS]}const qS=yt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ls).map(e=>new Cp(t,e)),this.fixed=!t.state.facet(kp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(kp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=te.iter(this.view.state.facet(Ja),this.view.viewport.from),r=[],i=this.gutters.map(s=>new YS(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==Et.Text&&l){Bc(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==Et.Text){Bc(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ls),n=t.state.facet(ls),r=t.docChanged||t.heightChanged||t.viewportChanged||!te.eq(t.startState.facet(Ja),t.state.facet(Ja),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new Cp(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>z.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Me.LTR?{left:r,right:i}:{right:r,left:i}})});function Sp(t){return Array.isArray(t)?t:[t]}function Bc(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class YS{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=te.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new Fy(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Bc(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet($S)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Cp{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=Sp(n.markers(e)),n.initialSpacer&&(this.spacer=new Fy(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=Sp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!te.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Fy{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),QS(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let h=l;h<this.markers.length;h++)if(this.markers[h].compare(a)){o=h,u=!0;break}}else o=this.markers.length;for(;l<o;){let c=this.markers[l++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function QS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const JS=_.define(),XS=_.define(),Kr=_.define({combine(t){return ia(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class Xa extends Jn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Za(t,e){return t.state.facet(Kr).formatNumber(e,t.state)}const ZS=ls.compute([Kr],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(JS)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new Xa(Za(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(XS)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Kr)!=e.state.facet(Kr),initialSpacer(e){return new Xa(Za(e,Ap(e.state.doc.lines)))},updateSpacer(e,n){let r=Za(n.view,Ap(n.view.state.doc.lines));return r==e.number?e:new Xa(r)},domEventHandlers:t.facet(Kr).domEventHandlers,side:"before"}));function eC(t={}){return[Kr.of(t),jy(),ZS]}function Ap(t){let e=9;for(;e<t;)e=e*10+9;return e}const tC=1024;let nC=0;class eu{constructor(e,n){this.from=e,this.to=n}}class Y{constructor(e={}){this.id=nC++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=at.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Y.closedBy=new Y({deserialize:t=>t.split(" ")});Y.openedBy=new Y({deserialize:t=>t.split(" ")});Y.group=new Y({deserialize:t=>t.split(" ")});Y.isolate=new Y({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Y.contextHash=new Y({perNode:!0});Y.lookAhead=new Y({perNode:!0});Y.mounted=new Y({perNode:!0});class Po{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[Y.mounted.id]}}const rC=Object.create(null);class at{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):rC,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new at(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Y.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Y.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}at.none=new at("",Object.create(null),0,8);class Zh{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new at(r.name,i,r.id,r.flags):r)}return new Zh(n)}}const bl=new WeakMap,bp=new WeakMap;var je;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(je||(je={}));class ge{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=Po.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new jc(this.topNode,e)}cursorAt(e,n=0,r=0){let i=bl.get(this)||this.topNode,s=new jc(i);return s.moveTo(e,n),bl.set(this,s._tree),s}get topNode(){return new Tt(this,0,0,null)}resolve(e,n=0){let r=Ps(bl.get(this)||this.topNode,e,n,!1);return bl.set(this,r),r}resolveInner(e,n=0){let r=Ps(bp.get(this)||this.topNode,e,n,!0);return bp.set(this,r),r}resolveStack(e,n=0){return lC(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&je.IncludeAnonymous)>0;for(let a=this.cursor(l|je.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:nf(at.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new ge(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new ge(at.none,n,r,i)))}static build(e){return oC(e)}}ge.empty=new ge(at.none,[],[],0);class ef{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ef(this.buffer,this.index)}}class Xn{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return at.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(zy(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new Xn(s,l,this.set)}}function zy(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ps(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Tt&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:je.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Tt&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class _y{cursor(e=0){return new jc(this,e)}getChild(e,n=null,r=null){let i=Ep(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Ep(this,e,n,r)}resolve(e,n=0){return Ps(this,e,n,!1)}resolveInner(e,n=0){return Ps(this,e,n,!0)}matchContext(e){return Ic(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Tt extends _y{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let c=o[e],h=a[e]+l.from;if(zy(i,r,h,h+c.length)){if(c instanceof Xn){if(s&je.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,r-h,i);if(f>-1)return new In(new iC(l,c,e,h),null,f)}else if(s&je.IncludeAnonymous||!c.type.isAnonymous||tf(c)){let f;if(!(s&je.IgnoreMounts)&&(f=Po.get(c))&&!f.overlay)return new Tt(f.tree,h,e,l);let d=new Tt(c,h,e,l);return s&je.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&je.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&je.IgnoreOverlays)&&(i=Po.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Tt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Ep(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Ic(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class iC{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class In extends _y{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new In(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&je.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new In(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new In(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new In(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new ge(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Hy(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Tt&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new sC(i,n)}class sC{constructor(e,n){this.heads=e,this.node=n}get next(){return Hy(this.heads)}}function lC(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Tt?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=Po.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Tt(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Ps(o,e,n,!1))}}return i?Hy(i):r}class jc{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Tt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Tt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&je.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&je.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&je.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&je.IncludeAnonymous||o instanceof Xn||!o.type.isAnonymous||tf(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new In(this.buffer,n,this.stack[i]);return this.bufferNode=new In(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ic(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Ic(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function tf(t){return t.children.some(e=>e instanceof Xn||!e.type.isAnonymous||tf(e))}function oC(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=tC,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new ef(n,n.length):n,a=r.types,u=0,c=0;function h(C,b,A,N,W,B){let{id:V,start:F,end:Z,size:Q}=o,R=c,De=u;for(;Q<0;)if(o.next(),Q==-1){let U=s[V];A.push(U),N.push(F-C);return}else if(Q==-3){u=V;return}else if(Q==-4){c=V;return}else throw new RangeError(`Unrecognized record size: ${Q}`);let se=a[V],P,H,$=F-C;if(Z-F<=i&&(H=x(o.pos-b,W))){let U=new Uint16Array(H.size-H.skip),G=o.pos-H.size,fe=U.length;for(;o.pos>G;)fe=p(H.start,U,fe);P=new Xn(U,Z-H.start,r),$=H.start-C}else{let U=o.pos-Q;o.next();let G=[],fe=[],Se=V>=l?V:-1,de=0,Qe=Z;for(;o.pos>U;)Se>=0&&o.id==Se&&o.size>=0?(o.end<=Qe-i&&(m(G,fe,F,de,o.end,Qe,Se,R,De),de=G.length,Qe=o.end),o.next()):B>2500?f(F,U,G,fe):h(F,U,G,fe,Se,B+1);if(Se>=0&&de>0&&de<G.length&&m(G,fe,F,de,F,Qe,Se,R,De),G.reverse(),fe.reverse(),Se>-1&&de>0){let ut=d(se,De);P=nf(se,G,fe,0,G.length,0,Z-F,ut,ut)}else P=v(se,G,fe,Z-F,R-Z,De)}A.push(P),N.push($)}function f(C,b,A,N){let W=[],B=0,V=-1;for(;o.pos>b;){let{id:F,start:Z,end:Q,size:R}=o;if(R>4)o.next();else{if(V>-1&&Z<V)break;V<0&&(V=Q-i),W.push(F,Z,Q),B++,o.next()}}if(B){let F=new Uint16Array(B*4),Z=W[W.length-2];for(let Q=W.length-3,R=0;Q>=0;Q-=3)F[R++]=W[Q],F[R++]=W[Q+1]-Z,F[R++]=W[Q+2]-Z,F[R++]=R;A.push(new Xn(F,W[2]-Z,r)),N.push(Z-C)}}function d(C,b){return(A,N,W)=>{let B=0,V=A.length-1,F,Z;if(V>=0&&(F=A[V])instanceof ge){if(!V&&F.type==C&&F.length==W)return F;(Z=F.prop(Y.lookAhead))&&(B=N[V]+F.length+Z)}return v(C,A,N,W,B,b)}}function m(C,b,A,N,W,B,V,F,Z){let Q=[],R=[];for(;C.length>N;)Q.push(C.pop()),R.push(b.pop()+A-W);C.push(v(r.types[V],Q,R,B-W,F-B,Z)),b.push(W-A)}function v(C,b,A,N,W,B,V){if(B){let F=[Y.contextHash,B];V=V?[F].concat(V):[F]}if(W>25){let F=[Y.lookAhead,W];V=V?[F].concat(V):[F]}return new ge(C,b,A,N,V)}function x(C,b){let A=o.fork(),N=0,W=0,B=0,V=A.end-i,F={size:0,start:0,skip:0};e:for(let Z=A.pos-C;A.pos>Z;){let Q=A.size;if(A.id==b&&Q>=0){F.size=N,F.start=W,F.skip=B,B+=4,N+=4,A.next();continue}let R=A.pos-Q;if(Q<0||R<Z||A.start<V)break;let De=A.id>=l?4:0,se=A.start;for(A.next();A.pos>R;){if(A.size<0)if(A.size==-3)De+=4;else break e;else A.id>=l&&(De+=4);A.next()}W=se,N+=Q,B+=De}return(b<0||N==C)&&(F.size=N,F.start=W,F.skip=B),F.size>4?F:void 0}function p(C,b,A){let{id:N,start:W,end:B,size:V}=o;if(o.next(),V>=0&&N<l){let F=A;if(V>4){let Z=o.pos-(V-4);for(;o.pos>Z;)A=p(C,b,A)}b[--A]=F,b[--A]=B-C,b[--A]=W-C,b[--A]=N}else V==-3?u=N:V==-4&&(c=N);return A}let g=[],w=[];for(;o.pos>0;)h(t.start||0,t.bufferStart||0,g,w,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:g.length?w[0]+g[0].length:0;return new ge(a[t.topID],g.reverse(),w.reverse(),k)}const Mp=new WeakMap;function Yl(t,e){if(!t.isAnonymous||e instanceof Xn||e.type!=t)return 1;let n=Mp.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof ge)){n=1;break}n+=Yl(t,r)}Mp.set(e,n)}return n}function nf(t,e,n,r,i,s,l,o,a){let u=0;for(let m=r;m<i;m++)u+=Yl(t,e[m]);let c=Math.ceil(u*1.5/8),h=[],f=[];function d(m,v,x,p,g){for(let w=x;w<p;){let k=w,C=v[w],b=Yl(t,m[w]);for(w++;w<p;w++){let A=Yl(t,m[w]);if(b+A>=c)break;b+=A}if(w==k+1){if(b>c){let A=m[k];d(A.children,A.positions,0,A.children.length,v[k]+g);continue}h.push(m[k])}else{let A=v[w-1]+m[w-1].length-C;h.push(nf(t,m,v,k,w,C,A,null,a))}f.push(C+g-s)}}return d(e,n,r,i,0),(o||a)(h,f,l)}class gr{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new gr(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let c=o<n.length?n[o]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;l&&l.from<h;){let f=l;if(a>=f.from||h<=f.to||u){let d=Math.max(f.from,a)-u,m=Math.min(f.to,h)-u;f=d>=m?null:new gr(d,m,f.tree,f.offset+u,o>0,!!c)}if(f&&i.push(f),l.to>h)break;l=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}}class Wy{startParse(e,n,r){return typeof e=="string"&&(e=new aC(e)),r=r?r.length?r.map(i=>new eu(i.from,i.to)):[new eu(0,0)]:[new eu(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class aC{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Y({perNode:!0});let uC=0;class Ct{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=uC++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Ct&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new Ct(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Do(e);return r=>r.modified.indexOf(n)>-1?r:Do.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let cC=0;class Do{constructor(e){this.name=e,this.instances=[],this.id=cC++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&hC(n,o.modified));if(r)return r;let i=[],s=new Ct(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=fC(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(Do.get(o,a));return s}}function hC(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function fC(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function dC(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let h=0;;){if(o=="..."&&h>0&&h+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let d=i[h++];if(h==i.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);o=i.slice(h)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new Lo(r,l,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return Vy.add(e)}const Vy=new Y;class Lo{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Lo.empty=new Lo([],2,null);function Uy(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function pC(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function mC(t,e,n,r=0,i=t.length){let s=new gC(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class gC{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(l)));let u=i,c=yC(e)||Lo.empty,h=pC(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,o),u),c.opaque)return;let f=e.tree&&e.tree.prop(Y.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+o,1),m=this.highlighters.filter(x=>!x.scope||x.scope(f.tree.type)),v=e.firstChild();for(let x=0,p=o;;x++){let g=x<f.overlay.length?f.overlay[x]:null,w=g?g.from+o:a,k=Math.max(n,p),C=Math.min(r,w);if(k<C&&v)for(;e.from<C&&(this.highlightRange(e,k,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=w||!e.nextSibling())););if(!g||w>r)break;p=g.to+o,p>n&&(this.highlightRange(d.cursor(),Math.max(n,g.from+o),Math.min(r,p),"",m),this.startSpan(Math.min(r,p),u))}v&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function yC(t){let e=t.type.prop(Vy);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const O=Ct.define,El=O(),Mn=O(),Tp=O(Mn),Np=O(Mn),Tn=O(),Ml=O(Tn),tu=O(Tn),Xt=O(),sr=O(Xt),Qt=O(),Jt=O(),Fc=O(),Bi=O(Fc),Tl=O(),T={comment:El,lineComment:O(El),blockComment:O(El),docComment:O(El),name:Mn,variableName:O(Mn),typeName:Tp,tagName:O(Tp),propertyName:Np,attributeName:O(Np),className:O(Mn),labelName:O(Mn),namespace:O(Mn),macroName:O(Mn),literal:Tn,string:Ml,docString:O(Ml),character:O(Ml),attributeValue:O(Ml),number:tu,integer:O(tu),float:O(tu),bool:O(Tn),regexp:O(Tn),escape:O(Tn),color:O(Tn),url:O(Tn),keyword:Qt,self:O(Qt),null:O(Qt),atom:O(Qt),unit:O(Qt),modifier:O(Qt),operatorKeyword:O(Qt),controlKeyword:O(Qt),definitionKeyword:O(Qt),moduleKeyword:O(Qt),operator:Jt,derefOperator:O(Jt),arithmeticOperator:O(Jt),logicOperator:O(Jt),bitwiseOperator:O(Jt),compareOperator:O(Jt),updateOperator:O(Jt),definitionOperator:O(Jt),typeOperator:O(Jt),controlOperator:O(Jt),punctuation:Fc,separator:O(Fc),bracket:Bi,angleBracket:O(Bi),squareBracket:O(Bi),paren:O(Bi),brace:O(Bi),content:Xt,heading:sr,heading1:O(sr),heading2:O(sr),heading3:O(sr),heading4:O(sr),heading5:O(sr),heading6:O(sr),contentSeparator:O(Xt),list:O(Xt),quote:O(Xt),emphasis:O(Xt),strong:O(Xt),link:O(Xt),monospace:O(Xt),strikethrough:O(Xt),inserted:O(),deleted:O(),changed:O(),invalid:O(),meta:Tl,documentMeta:O(Tl),annotation:O(Tl),processingInstruction:O(Tl),definition:Ct.defineModifier("definition"),constant:Ct.defineModifier("constant"),function:Ct.defineModifier("function"),standard:Ct.defineModifier("standard"),local:Ct.defineModifier("local"),special:Ct.defineModifier("special")};for(let t in T){let e=T[t];e instanceof Ct&&(e.name=t)}Uy([{tag:T.link,class:"tok-link"},{tag:T.heading,class:"tok-heading"},{tag:T.emphasis,class:"tok-emphasis"},{tag:T.strong,class:"tok-strong"},{tag:T.keyword,class:"tok-keyword"},{tag:T.atom,class:"tok-atom"},{tag:T.bool,class:"tok-bool"},{tag:T.url,class:"tok-url"},{tag:T.labelName,class:"tok-labelName"},{tag:T.inserted,class:"tok-inserted"},{tag:T.deleted,class:"tok-deleted"},{tag:T.literal,class:"tok-literal"},{tag:T.string,class:"tok-string"},{tag:T.number,class:"tok-number"},{tag:[T.regexp,T.escape,T.special(T.string)],class:"tok-string2"},{tag:T.variableName,class:"tok-variableName"},{tag:T.local(T.variableName),class:"tok-variableName tok-local"},{tag:T.definition(T.variableName),class:"tok-variableName tok-definition"},{tag:T.special(T.variableName),class:"tok-variableName2"},{tag:T.definition(T.propertyName),class:"tok-propertyName tok-definition"},{tag:T.typeName,class:"tok-typeName"},{tag:T.namespace,class:"tok-namespace"},{tag:T.className,class:"tok-className"},{tag:T.macroName,class:"tok-macroName"},{tag:T.propertyName,class:"tok-propertyName"},{tag:T.operator,class:"tok-operator"},{tag:T.comment,class:"tok-comment"},{tag:T.meta,class:"tok-meta"},{tag:T.invalid,class:"tok-invalid"},{tag:T.punctuation,class:"tok-punctuation"}]);var nu;const Gr=new Y;function vC(t){return _.define({combine:t?e=>e.concat(t):void 0})}const wC=new Y;class Ft{constructor(e,n,r=[],i=""){this.data=e,this.name=i,ee.prototype.hasOwnProperty("tree")||Object.defineProperty(ee.prototype,"tree",{get(){return vt(this)}}),this.parser=n,this.extension=[Zn.of(this),ee.languageData.of((s,l,o)=>{let a=Op(s,l,o),u=a.type.prop(Gr);if(!u)return[];let c=s.facet(u),h=a.type.prop(wC);if(h){let f=a.resolve(l-a.from,o);for(let d of h)if(d.test(f,s)){let m=s.facet(d.facet);return d.type=="replace"?m:m.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return Op(e,n,r).type.prop(Gr)==this.data}findRegions(e){let n=e.facet(Zn);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(Gr)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(Y.mounted);if(o){if(o.tree.prop(Gr)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof ge&&i(u,s.positions[a]+l)}};return i(vt(e),0),r}get allowsNesting(){return!0}}Ft.setState=ae.define();function Op(t,e,n){let r=t.facet(Zn),i=vt(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,je.ExcludeBuffers))s.type.isTop&&(i=s);return i}function vt(t){let e=t.field(Ft.state,!1);return e?e.tree:ge.empty}class xC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ii=null;class gi{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new gi(e,n,[],ge.empty,0,r,[],null)}startParse(){return this.parser.startParse(new xC(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=ge.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(gr.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(gr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ii;Ii=this;try{return e()}finally{Ii=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Pp(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,h,f)=>a.push({fromA:u,toA:c,fromB:h,toB:f})),r=gr.applyChanges(r,a),i=ge.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&o.push({from:c,to:h})}}}return new gi(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Pp(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Wy{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Ii;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new ge(at.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ii}}function Pp(t,e,n){return gr.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class yi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new yi(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=gi.create(e.facet(Zn).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new yi(r)}}Ft.state=Ut.define({create:yi.init,update(t,e){for(let n of e.effects)if(n.is(Ft.setState))return n.value;return e.startState.facet(Zn)!=e.state.facet(Zn)?yi.init(e.state):t.apply(e)}});let $y=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&($y=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const ru=typeof navigator<"u"&&(!((nu=navigator.scheduling)===null||nu===void 0)&&nu.isInputPending)?()=>navigator.scheduling.isInputPending():null,kC=yt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Ft.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Ft.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=$y(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Ft.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!ru?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>ru&&ru()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Ft.setState.of(new yi(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>rn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Zn=_.define({combine(t){return t.length?t[0]:null},enables:t=>[Ft.state,kC,z.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),SC=_.define(),rf=_.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Er(t){let e=t.facet(rf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Ds(t,e){let n="",r=t.tabSize,i=t.facet(rf)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function sf(t,e){t instanceof ee&&(t=new ua(t));for(let r of t.state.facet(SC)){let i=r(t,e);if(i!==void 0)return i}let n=vt(t.state);return n.length>=e?CC(t,n,e):null}class ua{constructor(e,n={}){this.state=e,this.options=n,this.unit=Er(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return sa(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Ky=new Y;function CC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return Gy(r,t,n)}function Gy(t,e,n){for(let r=t;r;r=r.next){let i=bC(r.node);if(i)return i(lf.create(e,n,r))}return 0}function AC(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function bC(t){let e=t.type.prop(Ky);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Y.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>NC(l,!0,1,void 0,s&&!AC(l)?i.from:void 0)}return t.parent==null?EC:null}function EC(){return 0}class lf extends ua{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new lf(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(MC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return Gy(this.context.next,this.base,this.pos)}}function MC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function TC(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function NC(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=TC(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const OC=200;function PC(){return ee.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+OC)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let c=l.doc.lineAt(u);if(c.from==o)continue;o=c.from;let h=sf(l,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],d=Ds(l,h);f!=d&&a.push({from:c.from,to:c.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const DC=_.define(),LC=new Y;function RC(t,e,n){let r=vt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(LC);if(a&&(o.to<r.length-50||r.length==t.doc.length||!BC(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function BC(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Dp(t,e,n){for(let r of t.facet(DC)){let i=r(t,e,n);if(i)return i}return RC(t,e,n)}function qy(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Yy=ae.define({map:qy}),of=ae.define({map:qy}),Ro=Ut.define({create(){return K.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=Lp(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Yy)&&!IC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(Qy),i=r?K.replace({widget:new zC(r(e.state,n.value))}):Rp;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(of)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=Lp(t,e.selection.main.head)),t},provide:t=>z.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Rp.range(r,i))}return K.set(e,!0)}});function Lp(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function zc(t,e,n){var r;let i=null;return(r=t.field(Ro,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function IC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const jC={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Qy=_.define({combine(t){return ia(t,jC)}});function FC(t){return[Ro,WC]}function Jy(t,e){let{state:n}=t,r=n.facet(Qy),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=zc(t.state,o.from,o.to);a&&t.dispatch({effects:of.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const Rp=K.replace({widget:new class extends Hs{toDOM(t){return Jy(t,null)}}});class zC extends Hs{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Jy(e,this.value)}}const _C={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class iu extends Jn{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function HC(t={}){let e={..._C,...t},n=new iu(e,!0),r=new iu(e,!1),i=yt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(Zn)!=l.state.facet(Zn)||l.startState.field(Ro,!1)!=l.state.field(Ro,!1)||vt(l.startState)!=vt(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new Sr;for(let a of l.viewportLineBlocks){let u=zc(l.state,a.from,a.to)?r:Dp(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,GS({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||te.empty},initialSpacer(){return new iu(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=zc(l.state,o.from,o.to);if(u)return l.dispatch({effects:of.of(u)}),!0;let c=Dp(l.state,o.from,o.to);return c?(l.dispatch({effects:Yy.of(c)}),!0):!1}}}),FC()]}const WC=z.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ca{constructor(e,n){this.specs=e;let r;function i(o){let a=qn.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof Ft?o=>o.prop(Gr)==l.data:l?o=>o==l:void 0,this.style=Uy(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new qn(r):null,this.themeType=n.themeType}static define(e,n){return new ca(e,n||{})}}const _c=_.define(),VC=_.define({combine(t){return t.length?[t[0]]:null}});function su(t){let e=t.facet(_c);return e.length?e:t.facet(VC)}function UC(t,e){let n=[KC],r;return t instanceof ca&&(t.module&&n.push(z.styleModule.of(t.module)),r=t.themeType),r?n.push(_c.computeN([z.darkTheme],i=>i.facet(z.darkTheme)==(r=="dark")?[t]:[])):n.push(_c.of(t)),n}class $C{constructor(e){this.markCache=Object.create(null),this.tree=vt(e.state),this.decorations=this.buildDeco(e,su(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=vt(e.state),r=su(e.state),i=r!=su(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return K.none;let r=new Sr;for(let{from:i,to:s}of e.visibleRanges)mC(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=K.mark({class:a})))},i,s);return r.finish()}}const KC=na.high(yt.fromClass($C,{decorations:t=>t.decorations})),GC=z.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Xy=1e4,Zy="()[]{}",ev=_.define({combine(t){return ia(t,{afterCursor:!0,brackets:Zy,maxScanDistance:Xy,renderMatch:QC})}}),qC=K.mark({class:"cm-matchingBracket"}),YC=K.mark({class:"cm-nonmatchingBracket"});function QC(t){let e=[],n=t.matched?qC:YC;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const JC=Ut.define({create(){return K.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(ev);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=sn(e.state,i.head,-1,r)||i.head>0&&sn(e.state,i.head-1,1,r)||r.afterCursor&&(sn(e.state,i.head,1,r)||i.head<e.state.doc.length&&sn(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return K.set(n,!0)},provide:t=>z.decorations.from(t)}),XC=[JC,GC];function ZC(t={}){return[ev.of(t),XC]}const e2=new Y;function Hc(t,e,n){let r=t.prop(e<0?Y.openedBy:Y.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Wc(t){let e=t.type.prop(e2);return e?e(t.node):t}function sn(t,e,n,r={}){let i=r.maxScanDistance||Xy,s=r.brackets||Zy,l=vt(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=Hc(a.type,n,s);if(u&&a.from<a.to){let c=Wc(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return t2(t,e,n,a,c,u,s)}}return n2(t,e,n,l,o.type,i,s)}function t2(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,c=o==null?void 0:o.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=Wc(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(Hc(c.type,n,l))u++;else if(Hc(c.type,-n,l)){if(u==0){let h=Wc(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function n2(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;n<0&&(f+=d.length);let m=e+f*n;for(let v=n>0?0:d.length-1,x=n>0?d.length:-1;v!=x;v+=n){let p=l.indexOf(d[v]);if(!(p<0||r.resolveInner(m+v,1).type!=i))if(p%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:m+v,to:m+v+1},matched:p>>1==a>>1};h--}}n>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}function Bp(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class tv{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Bp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Bp(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function r2(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||i2,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||cf,mergeTokens:t.mergeTokens!==!1}}function i2(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const Ip=new WeakMap;class af extends Ft{constructor(e){let n=vC(e.languageData),r=r2(e),i,s=new class extends Wy{createParse(l,o,a){return new l2(i,l,o,a)}};super(n,s,[],e.name),this.topNode=u2(n,this),i=this,this.streamParser=r,this.stateAfter=new Y({perNode:!0}),this.tokenTable=e.tokenTable?new sv(r.tokenTable):a2}static define(e){return new af(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=Ip.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=uf(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let c=r?r(a.from):-1,h=new tv(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;h.pos<u-a.from;)rv(this.streamParser.token,h,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&Ip.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function uf(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof ge&&a<i&&uf(t,o,a,r,i);if(u)return u}return null}function nv(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof ge){if(!(a=nv(t,o,n-l,r-l,i)))break;return i?new ge(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function s2(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&uf(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=nv(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Er(i):4),tree:ge.empty}}class l2{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=gi.get(),l=i[0].from,{state:o,tree:a}=s2(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Er(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=gi.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new tv(n,e?e.state.tabSize:4,e?Er(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=rv(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=ge.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:o2,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new ge(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new ge(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function rv(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const cf=Object.create(null),Ls=[at.none],o2=new Zh(Ls),jp=[],Fp=Object.create(null),iv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])iv[t]=lv(cf,e);class sv{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),iv)}resolve(e){return e?this.table[e]||(this.table[e]=lv(this.extra,e)):0}}const a2=new sv(cf);function lu(t,e){jp.indexOf(t)>-1||(jp.push(t),console.warn(e))}function lv(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let c=t[u]||T[u];c?typeof c=="function"?a.length?a=a.map(c):lu(u,`Modifier ${u} used at start of tag`):a.length?lu(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:lu(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=Fp[i];if(s)return s.id;let l=Fp[i]=at.define({id:Ls.length,name:r,props:[dC({[r]:n})]});return Ls.push(l),l.id}function u2(t,e){let n=at.define({id:Ls.length,name:"Document",props:[Gr.add(()=>t),Ky.add(()=>r=>e.getIndent(r))],top:!0});return Ls.push(n),n}Me.RTL,Me.LTR;const c2="#e5c07b",zp="#e06c75",h2="#56b6c2",f2="#ffffff",Ql="#abb2bf",Vc="#7d8799",d2="#61afef",p2="#98c379",_p="#d19a66",m2="#c678dd",g2="#21252b",Hp="#2c313a",Wp="#282c34",ou="#353a42",y2="#3E4451",Vp="#528bff",v2=z.theme({"&":{color:Ql,backgroundColor:Wp},".cm-content":{caretColor:Vp},".cm-cursor, .cm-dropCursor":{borderLeftColor:Vp},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:y2},".cm-panels":{backgroundColor:g2,color:Ql},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Wp,color:Vc,border:"none"},".cm-activeLineGutter":{backgroundColor:Hp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:ou},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ou,borderBottomColor:ou},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Hp,color:Ql}}},{dark:!0}),w2=ca.define([{tag:T.keyword,color:m2},{tag:[T.name,T.deleted,T.character,T.propertyName,T.macroName],color:zp},{tag:[T.function(T.variableName),T.labelName],color:d2},{tag:[T.color,T.constant(T.name),T.standard(T.name)],color:_p},{tag:[T.definition(T.name),T.separator],color:Ql},{tag:[T.typeName,T.className,T.number,T.changed,T.annotation,T.modifier,T.self,T.namespace],color:c2},{tag:[T.operator,T.operatorKeyword,T.url,T.escape,T.regexp,T.link,T.special(T.string)],color:h2},{tag:[T.meta,T.comment],color:Vc},{tag:T.strong,fontWeight:"bold"},{tag:T.emphasis,fontStyle:"italic"},{tag:T.strikethrough,textDecoration:"line-through"},{tag:T.link,color:Vc,textDecoration:"underline"},{tag:T.heading,fontWeight:"bold",color:zp},{tag:[T.atom,T.bool,T.special(T.variableName)],color:_p},{tag:[T.processingInstruction,T.string,T.inserted],color:p2},{tag:T.invalid,color:f2}]),x2=[v2,UC(w2)],k2=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=ff(t.state,n.from);return r.line?S2(t):r.block?A2(t):!1};function hf(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const S2=hf(M2,0),C2=hf(ov,0),A2=hf((t,e)=>ov(t,e,E2(e)),0);function ff(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const ji=50;function b2(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-ji,r),l=t.sliceDoc(i,i+ji),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let c,h;i-r<=2*ji?c=h=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+ji),h=t.sliceDoc(i-ji,i));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(h)[0].length,m=h.length-d-n.length;return c.slice(f,f+e.length)==e&&h.slice(m,m+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(h.charAt(m-1))?1:0}}:null}function E2(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function ov(t,e,n=e.selection.ranges){let r=n.map(s=>ff(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>b2(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:c}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function M2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=ff(e,s).line;if(u){for(let c=s;c<=l;){let h=e.doc.lineAt(c);if(h.from>i&&(s==l||l>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,m=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),r.push({line:h,comment:m,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(a<1e9)for(let c=o;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:c,single:h}of r)(h||!c)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,c=u+a.length;l.text[c-l.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}function Si(t,e){return E.create(t.ranges.map(e),t.mainIndex)}function $t(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Kt({state:t,dispatch:e},n){let r=Si(t.selection,n);return r.eq(t.selection,!0)?!1:(e($t(t,r)),!0)}function ha(t,e){return E.cursor(e?t.to:t.from)}function av(t,e){return Kt(t,n=>n.empty?t.moveByChar(n,e):ha(n,e))}function Ye(t){return t.textDirectionAt(t.state.selection.main.head)==Me.LTR}const uv=t=>av(t,!Ye(t)),cv=t=>av(t,Ye(t));function hv(t,e){return Kt(t,n=>n.empty?t.moveByGroup(n,e):ha(n,e))}const T2=t=>hv(t,!Ye(t)),N2=t=>hv(t,Ye(t));function O2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function fa(t,e,n){let r=vt(t).resolveInner(e.head),i=n?Y.closedBy:Y.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;O2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?sn(t,r.from,1):sn(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,E.cursor(o,n?-1:1)}const P2=t=>Kt(t,e=>fa(t.state,e,!Ye(t))),D2=t=>Kt(t,e=>fa(t.state,e,Ye(t)));function fv(t,e){return Kt(t,n=>{if(!n.empty)return ha(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const dv=t=>fv(t,!1),pv=t=>fv(t,!0);function mv(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(z.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function gv(t,e){let n=mv(t),{state:r}=t,i=Si(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):ha(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=z.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch($t(r,i),{effects:s}),!0}const Up=t=>gv(t,!1),Uc=t=>gv(t,!0);function rr(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=E.cursor(r.from+s))}return i}const L2=t=>Kt(t,e=>rr(t,e,!0)),R2=t=>Kt(t,e=>rr(t,e,!1)),B2=t=>Kt(t,e=>rr(t,e,!Ye(t))),I2=t=>Kt(t,e=>rr(t,e,Ye(t))),j2=t=>Kt(t,e=>E.cursor(t.lineBlockAt(e.head).from,1)),F2=t=>Kt(t,e=>E.cursor(t.lineBlockAt(e.head).to,-1));function z2(t,e,n){let r=!1,i=Si(t.selection,s=>{let l=sn(t,s.head,-1)||sn(t,s.head,1)||s.head>0&&sn(t,s.head-1,1)||s.head<t.doc.length&&sn(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return E.cursor(o)});return r?(e($t(t,i)),!0):!1}const _2=({state:t,dispatch:e})=>z2(t,e);function Dt(t,e){let n=Si(t.state.selection,r=>{let i=e(r);return E.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch($t(t.state,n)),!0)}function yv(t,e){return Dt(t,n=>t.moveByChar(n,e))}const vv=t=>yv(t,!Ye(t)),wv=t=>yv(t,Ye(t));function xv(t,e){return Dt(t,n=>t.moveByGroup(n,e))}const H2=t=>xv(t,!Ye(t)),W2=t=>xv(t,Ye(t)),V2=t=>Dt(t,e=>fa(t.state,e,!Ye(t))),U2=t=>Dt(t,e=>fa(t.state,e,Ye(t)));function kv(t,e){return Dt(t,n=>t.moveVertically(n,e))}const Sv=t=>kv(t,!1),Cv=t=>kv(t,!0);function Av(t,e){return Dt(t,n=>t.moveVertically(n,e,mv(t).height))}const $p=t=>Av(t,!1),Kp=t=>Av(t,!0),$2=t=>Dt(t,e=>rr(t,e,!0)),K2=t=>Dt(t,e=>rr(t,e,!1)),G2=t=>Dt(t,e=>rr(t,e,!Ye(t))),q2=t=>Dt(t,e=>rr(t,e,Ye(t))),Y2=t=>Dt(t,e=>E.cursor(t.lineBlockAt(e.head).from)),Q2=t=>Dt(t,e=>E.cursor(t.lineBlockAt(e.head).to)),Gp=({state:t,dispatch:e})=>(e($t(t,{anchor:0})),!0),qp=({state:t,dispatch:e})=>(e($t(t,{anchor:t.doc.length})),!0),Yp=({state:t,dispatch:e})=>(e($t(t,{anchor:t.selection.main.anchor,head:0})),!0),Qp=({state:t,dispatch:e})=>(e($t(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),J2=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),X2=({state:t,dispatch:e})=>{let n=da(t).map(({from:r,to:i})=>E.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:E.create(n),userEvent:"select"})),!0},Z2=({state:t,dispatch:e})=>{let n=Si(t.selection,r=>{let i=vt(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return E.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e($t(t,n)),!0)};function bv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch($t(n,E.create(i,i.length-1))),!0)}const eA=t=>bv(t,!1),tA=t=>bv(t,!0),nA=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=E.create([n.main]):n.main.empty||(r=E.create([E.cursor(n.main.head)])),r?(e($t(t,r)),!0):!1};function $s(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=Nl(t,a,!1)):a>l&&(n="delete.forward",a=Nl(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=Nl(t,l,!1),o=Nl(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:E.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?z.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Nl(t,e,n){if(t instanceof z)for(let r of t.state.facet(z.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Ev=(t,e,n)=>$s(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=sa(o,s.tabSize),c=u%Er(s)||Er(s);for(let h=0;h<c&&o[o.length-1-h]==" ";h++)i--;a=i}else a=Fe(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=Fe(l.text,a-l.from,!1,!1)+l.from);return a}),$c=t=>Ev(t,!1,!0),Mv=t=>Ev(t,!0,!1),Tv=(t,e)=>$s(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=Fe(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=l(u);if(o!=null&&c!=o)break;(u!=" "||r!=n.head)&&(o=c),r=a}return r}),Nv=t=>Tv(t,!1),rA=t=>Tv(t,!0),iA=t=>$s(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),sA=t=>$s(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),lA=t=>$s(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),oA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:J.of(["",""])},range:E.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},aA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:Fe(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:Fe(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:E.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function da(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Ov(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of da(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(E.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(E.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:E.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const uA=({state:t,dispatch:e})=>Ov(t,e,!1),cA=({state:t,dispatch:e})=>Ov(t,e,!0);function Pv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of da(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const hA=({state:t,dispatch:e})=>Pv(t,e,!1),fA=({state:t,dispatch:e})=>Pv(t,e,!0),dA=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(da(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Si(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function pA(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=vt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Y.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const Jp=Dv(!1),mA=Dv(!0);function Dv(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&pA(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new ua(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=sf(u,s);for(c==null&&(c=sa(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let h=["",Ds(e,c)];return a&&h.push(Ds(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:J.of(h)},range:E.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function df(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:E.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const gA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new ua(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=df(t,(s,l,o)=>{let a=sf(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],c=Ds(t,a);(u!=c||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},yA=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(df(t,(n,r)=>{r.push({from:n.from,insert:t.facet(rf)})}),{userEvent:"input.indent"})),!0),vA=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(df(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=sa(i,t.tabSize),l=0,o=Ds(t,Math.max(0,s-Er(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),wA=t=>(t.setTabFocusMode(),!0),xA=[{key:"Ctrl-b",run:uv,shift:vv,preventDefault:!0},{key:"Ctrl-f",run:cv,shift:wv},{key:"Ctrl-p",run:dv,shift:Sv},{key:"Ctrl-n",run:pv,shift:Cv},{key:"Ctrl-a",run:j2,shift:Y2},{key:"Ctrl-e",run:F2,shift:Q2},{key:"Ctrl-d",run:Mv},{key:"Ctrl-h",run:$c},{key:"Ctrl-k",run:iA},{key:"Ctrl-Alt-h",run:Nv},{key:"Ctrl-o",run:oA},{key:"Ctrl-t",run:aA},{key:"Ctrl-v",run:Uc}],kA=[{key:"ArrowLeft",run:uv,shift:vv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:T2,shift:H2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:B2,shift:G2,preventDefault:!0},{key:"ArrowRight",run:cv,shift:wv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:N2,shift:W2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:I2,shift:q2,preventDefault:!0},{key:"ArrowUp",run:dv,shift:Sv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Gp,shift:Yp},{mac:"Ctrl-ArrowUp",run:Up,shift:$p},{key:"ArrowDown",run:pv,shift:Cv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:qp,shift:Qp},{mac:"Ctrl-ArrowDown",run:Uc,shift:Kp},{key:"PageUp",run:Up,shift:$p},{key:"PageDown",run:Uc,shift:Kp},{key:"Home",run:R2,shift:K2,preventDefault:!0},{key:"Mod-Home",run:Gp,shift:Yp},{key:"End",run:L2,shift:$2,preventDefault:!0},{key:"Mod-End",run:qp,shift:Qp},{key:"Enter",run:Jp,shift:Jp},{key:"Mod-a",run:J2},{key:"Backspace",run:$c,shift:$c,preventDefault:!0},{key:"Delete",run:Mv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Nv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:rA,preventDefault:!0},{mac:"Mod-Backspace",run:sA,preventDefault:!0},{mac:"Mod-Delete",run:lA,preventDefault:!0}].concat(xA.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),SA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:P2,shift:V2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:D2,shift:U2},{key:"Alt-ArrowUp",run:uA},{key:"Shift-Alt-ArrowUp",run:hA},{key:"Alt-ArrowDown",run:cA},{key:"Shift-Alt-ArrowDown",run:fA},{key:"Mod-Alt-ArrowUp",run:eA},{key:"Mod-Alt-ArrowDown",run:tA},{key:"Escape",run:nA},{key:"Mod-Enter",run:mA},{key:"Alt-l",mac:"Ctrl-l",run:X2},{key:"Mod-i",run:Z2,preventDefault:!0},{key:"Mod-[",run:vA},{key:"Mod-]",run:yA},{key:"Mod-Alt-\\",run:gA},{key:"Shift-Mod-k",run:dA},{key:"Shift-Mod-\\",run:_2},{key:"Mod-/",run:k2},{key:"Alt-A",run:C2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:wA}].concat(kA),Xp=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Rs{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(Xp(o)):Xp,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return x0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Ux(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=k0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Rs.prototype[Symbol.iterator]=function(){return this});const Lv={from:-1,to:-1,match:/.*/.exec("")},pf="gm"+(/x/.unicode==null?"":"u");class Rv{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Lv,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Bv(e,n,r,i,s);this.re=new RegExp(n,pf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=Bo(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Bo(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const au=new WeakMap;class ri{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=au.get(e);if(!i||i.from>=r||i.to<=n){let o=new ri(n,e.sliceString(n,r));return au.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),au.set(e,new ri(l,s)),new ri(n,s.slice(n-l,r-l))}}class Bv{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=Lv,this.matchPos=Bo(e,i),this.re=new RegExp(n,pf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=ri.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Bo(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ri.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Rv.prototype[Symbol.iterator]=Bv.prototype[Symbol.iterator]=function(){return this});function CA(t){try{return new RegExp(t,pf),!0}catch{return!1}}function Bo(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Kc(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Re("input",{class:"cm-textfield",name:"line",value:e}),r=Re("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:os.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Re("label",t.state.phrase("Go to line"),": ",n)," ",Re("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Re("button",{name:"close",onclick:()=>{t.dispatch({effects:os.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,c,h]=s,f=c?+c.slice(1):0,d=u?+u:o.number;if(u&&h){let x=d/100;a&&(x=x*(a=="-"?-1:1)+o.number/l.doc.lines),d=Math.round(l.doc.lines*x)}else u&&a&&(d=d*(a=="-"?-1:1)+o.number);let m=l.doc.line(Math.max(1,Math.min(l.doc.lines,d))),v=E.cursor(m.from+Math.max(0,Math.min(f,m.length)));t.dispatch({effects:[os.of(!1),z.scrollIntoView(v.from,{y:"center"})],selection:v}),t.focus()}return{dom:r}}const os=ae.define(),Zp=Ut.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(os)&&(t=n.value);return t},provide:t=>Oo.from(t,e=>e?Kc:null)}),AA=t=>{let e=No(t,Kc);if(!e){let n=[os.of(!0)];t.state.field(Zp,!1)==null&&n.push(ae.appendConfig.of([Zp,bA])),t.dispatch({effects:n}),e=No(t,Kc)}return e&&e.dom.querySelector("input").select(),!0},bA=z.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),EA=({state:t,dispatch:e})=>{let{selection:n}=t,r=E.create(n.ranges.map(i=>t.wordAt(i.head)||E.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function MA(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Rs(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Rs(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const TA=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return EA({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=MA(t,r);return i?(e(t.update({selection:t.selection.addRange(E.range(i.from,i.to),!1),effects:z.scrollIntoView(i.to)})),!0):!1},Ci=_.define({combine(t){return ia(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new _A(e),scrollToMatch:e=>z.scrollIntoView(e)})}});class Iv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||CA(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new DA(this):new OA(this)}getCursor(e,n=0,r){let i=e.doc?e:ee.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Dr(this,i,n,r):Pr(this,i,n,r)}}class jv{constructor(e){this.spec=e}}function Pr(t,e,n,r){return new Rs(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?NA(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function NA(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Io(i,n-s))!=ze.Word||e(jo(i,n-s))!=ze.Word)&&(e(jo(i,r-s))!=ze.Word||e(Io(i,r-s))!=ze.Word))}class OA extends jv{constructor(e){super(e)}nextMatch(e,n,r){let i=Pr(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Pr(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Pr(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Pr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Pr(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Dr(t,e,n,r){return new Rv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?PA(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Io(t,e){return t.slice(Fe(t,e,!1),e)}function jo(t,e){return t.slice(e,Fe(t,e))}function PA(t){return(e,n,r)=>!r[0].length||(t(Io(r.input,r.index))!=ze.Word||t(jo(r.input,r.index))!=ze.Word)&&(t(jo(r.input,r.index+r[0].length))!=ze.Word||t(Io(r.input,r.index+r[0].length))!=ze.Word)}class DA extends jv{nextMatch(e,n,r){let i=Dr(this.spec,e,r,e.doc.length).next();return i.done&&(i=Dr(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Dr(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Dr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Dr(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Bs=ae.define(),mf=ae.define(),$n=Ut.define({create(t){return new uu(Gc(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Bs)?t=new uu(n.value.create(),t.panel):n.is(mf)&&(t=new uu(t.query,n.value?gf:null));return t},provide:t=>Oo.from(t,e=>e.panel)});class uu{constructor(e,n){this.query=e,this.panel=n}}const LA=K.mark({class:"cm-searchMatch"}),RA=K.mark({class:"cm-searchMatch cm-searchMatch-selected"}),BA=yt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field($n))}update(t){let e=t.state.field($n);(e!=t.startState.field($n)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return K.none;let{view:n}=this,r=new Sr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,c)=>{let h=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,h?RA:LA)})}return r.finish()}},{decorations:t=>t.decorations});function Ks(t){return e=>{let n=e.state.field($n,!1);return n&&n.query.spec.valid?t(e,n):_v(e)}}const Fo=Ks((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=E.single(r.from,r.to),s=t.state.facet(Ci);return t.dispatch({selection:i,effects:[yf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),zv(t),!0}),zo=Ks((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=E.single(i.from,i.to),l=t.state.facet(Ci);return t.dispatch({selection:s,effects:[yf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),zv(t),!0}),IA=Ks((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:E.create(n.map(r=>E.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),jA=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Rs(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(E.range(o.value.from,o.value.to))}return e(t.update({selection:E.create(s,l),userEvent:"select.search.matches"})),!0},em=Ks((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,c=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),c.push(z.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(o);return l&&(a=E.single(l.from,l.to).map(h),c.push(yf(t,l)),c.push(n.facet(Ci).scrollToMatch(a.main,t))),t.dispatch({changes:h,selection:a,effects:c,userEvent:"input.replace"}),!0}),FA=Ks((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:z.announce.of(r),userEvent:"input.replace.all"}),!0});function gf(t){return t.state.facet(Ci).createPanel(t)}function Gc(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(Ci);return new Iv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function Fv(t){let e=No(t,gf);return e&&e.dom.querySelector("[main-field]")}function zv(t){let e=Fv(t);e&&e==t.root.activeElement&&e.select()}const _v=t=>{let e=t.state.field($n,!1);if(e&&e.panel){let n=Fv(t);if(n&&n!=t.root.activeElement){let r=Gc(t.state,e.query.spec);r.valid&&t.dispatch({effects:Bs.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[mf.of(!0),e?Bs.of(Gc(t.state,e.query.spec)):ae.appendConfig.of(WA)]});return!0},Hv=t=>{let e=t.state.field($n,!1);if(!e||!e.panel)return!1;let n=No(t,gf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:mf.of(!1)}),!0},zA=[{key:"Mod-f",run:_v,scope:"editor search-panel"},{key:"F3",run:Fo,shift:zo,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Fo,shift:zo,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Hv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:jA},{key:"Mod-Alt-g",run:AA},{key:"Mod-d",run:TA,preventDefault:!0}];class _A{constructor(e){this.view=e;let n=this.query=e.state.field($n).query.spec;this.commit=this.commit.bind(this),this.searchField=Re("input",{value:n.search,placeholder:ct(e,"Find"),"aria-label":ct(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Re("input",{value:n.replace,placeholder:ct(e,"Replace"),"aria-label":ct(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Re("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Re("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Re("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return Re("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=Re("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Fo(e),[ct(e,"next")]),r("prev",()=>zo(e),[ct(e,"previous")]),r("select",()=>IA(e),[ct(e,"all")]),Re("label",null,[this.caseField,ct(e,"match case")]),Re("label",null,[this.reField,ct(e,"regexp")]),Re("label",null,[this.wordField,ct(e,"by word")]),...e.state.readOnly?[]:[Re("br"),this.replaceField,r("replace",()=>em(e),[ct(e,"replace")]),r("replaceAll",()=>FA(e),[ct(e,"replace all")])],Re("button",{name:"close",onclick:()=>Hv(e),"aria-label":ct(e,"close"),type:"button"},["×"])])}commit(){let e=new Iv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Bs.of(e)}))}keydown(e){zS(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?zo:Fo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),em(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Bs)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ci).top}}function ct(t,e){return t.state.phrase(e)}const Ol=30,Pl=/[\s\.,:;?!]/;function yf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Ol),l=Math.min(i,n+Ol),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<Ol;a++)if(!Pl.test(o[a+1])&&Pl.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-Ol;a--)if(!Pl.test(o[a-1])&&Pl.test(o[a])){o=o.slice(0,a);break}}return z.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const HA=z.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),WA=[$n,na.low(BA),HA],Rt={PAGE_BREAK:/^\={3,}$/,CHARACTER:/^([A-Z][A-Z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,CHARACTER_POWER_USER:/^(?:@)([A-Za-z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,SCENE:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,TRANSITION:/^((?:FADE (?:IN|TO BLACK|OUT)|CUT TO BLACK)[\:\.]?|.+ TO\:)/i,TRANSITION_POWER_USER:/^(?:> )(.+)/i,TITLE:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,SECTION:/^(#{1,4})\ (.*)/,MILESTONE:/^(?:\ +)?-\ (.+)/,IMAGE:/^(\[i\]https:\/\/(.+))/i,AUDIO:/^(\[a\]https:\/\/(.+))/i},VA=af.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(Rt.TRANSITION)||t.match(Rt.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(Rt.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(Rt.CHARACTER))||(n=t.match(Rt.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(Rt.IMAGE)||t.match(Rt.AUDIO)?"link":t.match(Rt.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(Rt.TITLE))return t.skipTo(":"),t.next(),"def";if(n=t.match(Rt.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(Rt.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),UA=yt.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push(K.line({class:"cm-keyword"}).range(s.from)),e.push(K.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push(K.line({class:"cm-header"}).range(s.from)),e.push(K.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push(K.line({class:"cm-atom"}).range(s.from)),e.push(K.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push(K.line({class:"cm-synopsis"}).range(s.from)),e.push(K.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push(K.line({class:"cm-number"}).range(s.from)),e.push(K.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push(K.line({class:"cm-variable"}).range(s.from)),e.push(K.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return K.set(e)}},{decorations:t=>t.decorations}),Wv=I.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=I.useRef(null),l=I.useRef(null);return I.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:z.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),I.useEffect(()=>{if(!s.current)return;const o=[eC(),WS(),HC(),ZC(),PC(),z.lineWrapping,VA,UA,z.domEventHandlers({mouseup:(c,h)=>{setTimeout(()=>{const f=h.state.selection.main.head,d=h.state.doc.lineAt(f);n(d.number-1)},10)}}),x2,Ly.of([...SA,...zA]),z.updateListener.of(c=>{if(c.docChanged&&e(c.state.doc.toString()),c.selectionSet&&!c.docChanged){const h=c.state.selection.main.head,f=c.state.doc.lineAt(h);n(f.number-1)}}),z.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=ee.create({doc:t,extensions:o}),u=new z({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),I.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),y.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});Wv.displayName="CodeMirrorEditor";let Fi="";function $A(){return new Promise(t=>{if(window.google)return t();const e=setInterval(()=>{window.google&&(clearInterval(e),t())},50)})}async function KA(){if(Fi)return Fi;await $A();const e=window.google.accounts.oauth2.initTokenClient({client_id:"332933508693-u0f8kifpkma08osh7cscdcdbgsqi4ir1.apps.googleusercontent.com",scope:["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly"].join(" "),callback:n=>{Fi=n.access_token}});return new Promise((n,r)=>{e.callback=i=>{i.error?r(i):(Fi=i.access_token,n(Fi))},e.requestAccessToken({prompt:""})})}const GA={VITE_GCP_PROJECT_NUMBER:"332933508693",VITE_GOOGLE_API_KEY:"AIzaSyBNuoxiWJI0jd68umAFLH0QYfuJdyAHUUs"};function qA(t=3e3){return new Promise((e,n)=>{if(window.gapi)return e();const r=Date.now(),i=setInterval(()=>{if(window.gapi)return clearInterval(i),e();if(Date.now()-r>t)return clearInterval(i),n(new Error("gapi did not load"))},50)})}function YA(){return new Promise(async(t,e)=>{try{await qA()}catch{return e(new Error("Google API library (gapi) not loaded. Ensure https://apis.google.com/js/api.js is included."))}try{window.gapi.load("picker",()=>{if(!window.google||!window.google.picker)return e(new Error("Google Picker API not available on window.google.picker. Make sure the Picker API is enabled in Google Cloud Console."));t()})}catch(n){e(n)}})}async function QA(){await YA();const t=await KA(),e=window.google,n=new e.picker.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder");return new Promise(r=>{const i=GA||{};new e.picker.PickerBuilder().setAppId(i.VITE_GCP_PROJECT_NUMBER).setDeveloperKey(i.VITE_GOOGLE_API_KEY).setOAuthToken(t).addView(n).setTitle("Choose a Drive Folder").setCallback(l=>{var o;if(l.action===e.picker.Action.PICKED&&((o=l.docs)!=null&&o.length)){console.log("Google Picker selected folder:",l.docs[0]);try{const a=new CustomEvent("fountain:drive:folderSelected",{detail:l.docs[0]});window.dispatchEvent(a)}catch(a){console.warn("picker: could not dispatch folderSelected event",a)}r({id:l.docs[0].id,name:l.docs[0].name})}else r(null)}).build().setVisible(!0)})}const Vv="fountain:driveState";function tm(){try{return JSON.parse(localStorage.getItem(Vv)||"{}")}catch{return{}}}function JA(){localStorage.removeItem(Vv)}function XA(t=""){const[e,n]=I.useState([]),[r,i]=I.useState([]),[s,l]=I.useState(new Map),o=I.useRef(null),[a,u]=I.useState(!0);return I.useEffect(()=>{if(!a){if(t){const h=ma(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}return}(function(){try{const h=new Worker(new URL("/assets/previewWorker-D6jE4gsy.js",import.meta.url),{type:"module"});return h.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},h.onmessage=f=>{const{type:d,blocks:m,characters:v,characterLineCounts:x}=f.data;d==="result"?(n(m||[]),i(v||[]),l(x||new Map)):d==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=h,t&&h.postMessage({type:"process",text:t}),()=>{try{h.terminate()}catch{}}}catch(h){console.error("Failed to create module worker, falling back to main-thread parsing:",h),u(!1)}})()},[a]),I.useEffect(()=>{if(!a&&t){const h=ma(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:h=>{if(a&&o.current)o.current.postMessage({type:"process",text:h});else{const f=ma(h);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let ZA=1;function eb(){const t=I.useRef(null),e=I.useRef(new Map),[n,r]=I.useState([]),i=I.useRef(!1);I.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=I.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-PCay-oew.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:c,requestId:h,message:f}=a.data||{};if(h&&e.current.has(h)){const{resolve:d,reject:m}=e.current.get(h);if(e.current.delete(h),u==="panels")try{d(c)}catch{}else if(u==="error")try{m(new Error(f||"worker error"))}catch{}else try{m(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(c)&&r(c)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=I.useCallback(o=>{const a=s();if(!a)try{const c=a1(o);return r(c),Promise.resolve(c)}catch(c){return Promise.reject(c)}const u=String(ZA++);return new Promise((c,h)=>{e.current.set(u,{resolve:c,reject:h});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),h(f)}}).then(c=>(i.current&&r(c),c))},[s]);return{panels:n,parsePanels:l}}const cu=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Hey—did the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE – CODING AND COFFEE\r
\r
— Keys clack.  \r
— Tests blink green, then red, then righteous green again.  \r
— A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pings—just shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing → preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open → payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function tb(){const[t,e]=I.useState(!1),[n,r]=I.useState(""),[i,s]=I.useState(!1),[l,o]=I.useState(!1),[a,u]=I.useState("edit"),[c,h]=I.useState(0),[f,d]=I.useState(!1),[m,v]=I.useState(null),[x,p]=I.useState(!1),[g,w]=I.useState(()=>tm()),k=!!(g&&(g.folderId||g.folderName)),C=I.useRef(null),b=I.useRef(null),A=I.useRef([]),N=I.useRef(null),[W,B]=I.useState(!1);I.useEffect(()=>{const S=localStorage.getItem("fountain-script");let j=cu;if(S)try{const le=JSON.parse(S);j=le.content,d(!0),v(new Date(le.savedAt))}catch(le){console.error("Error parsing saved script:",le),localStorage.removeItem("fountain-script")}r(j),Q(j);try{typeof De=="function"&&De(j)}catch{}},[]),I.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const j=navigator.userAgent||"",le=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(j),Te=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,Gt=(window.innerWidth||screen.width||0)<1024;(le||Te&&Gt)&&e(!0)}catch{}},[]),I.useEffect(()=>{const S=j=>{(j.ctrlKey||j.metaKey)&&String(j.key).toLowerCase()==="g"&&(j.preventDefault(),p(le=>!le))};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[]),I.useEffect(()=>{const S=le=>{try{w(tm())}catch(Te){console.error("App: failed to load drive state",Te)}},j=()=>w({});return window.addEventListener("fountain:drive:folderSelected",S),window.addEventListener("fountain:drive:cleared",j),()=>{window.removeEventListener("fountain:drive:folderSelected",S),window.removeEventListener("fountain:drive:cleared",j)}},[]);const{blocks:V,characters:F,characterLineCounts:Z,processText:Q}=XA(""),{panels:R,parsePanels:De}=eb(),[se,P]=I.useState(0),[H,$]=I.useState("screenplay"),U=I.useRef(null),[G,fe]=I.useState(!1),Se=I.useRef(null),de=I.useRef(null),[Qe,ut]=I.useState(!1),ir=I.useRef(null),[vf,Gs]=I.useState(!1);I.useEffect(()=>{A.current=V},[V]);const Uv=S=>{r(S),Q(S);try{typeof De=="function"&&De(S)}catch{}},$v=()=>{!Array.isArray(R)||R.length===0||(pa(),ut(!1),ir.current="user",P(S=>{const j=R.length;return((S-1)%j+j)%j}))},wf=(S=!0)=>{!Array.isArray(R)||R.length===0||(ir.current=S?"user":"auto",S&&(pa(),ut(!1)),P(j=>{const le=R.length;return(j+1)%le}))},Kv=async()=>{Qe&&(P(0),ut(!1));try{U.current&&U.current.paused&&(U.current.currentTime=0)}catch{}fe(!0)},Gv=()=>{if(U.current){ir.current="user";try{U.current.pause()}catch{}fe(!1)}},qv=()=>{pa(),ut(!1);try{P(0)}catch{}};function pa(){try{de.current&&(clearTimeout(de.current),de.current=null)}catch{}try{U.current&&(ir.current="user",U.current.pause(),U.current.currentTime=0)}catch{}fe(!1)}I.useEffect(()=>{const S=U.current;if(!S)return;const j=()=>fe(!0),le=()=>{ir.current==="user"&&fe(!1)},Te=()=>{wf(!1)};return S.addEventListener("play",j),S.addEventListener("pause",le),S.addEventListener("ended",Te),()=>{S.removeEventListener("play",j),S.removeEventListener("pause",le),S.removeEventListener("ended",Te)}},[se,R]),I.useEffect(()=>{if(de.current&&(clearTimeout(de.current),de.current=null),!G)return;const S=R&&R.length>0?R[se]||R[0]:null;if(!S){fe(!1);return}try{U.current&&U.current.play().catch(()=>{})}catch{}const j=Math.max(1e3,typeof S.duration=="number"?S.duration*1e3:3e3);return de.current=setTimeout(()=>{!R||se>=R.length-1?(fe(!1),ut(!0),de.current=null):P(le=>le+1)},j),()=>{de.current&&(clearTimeout(de.current),de.current=null)}},[G,se,R]),I.useEffect(()=>{if(U.current)try{ir.current==="user"&&(U.current.pause(),U.current.currentTime=0,fe(!1))}catch{}ir.current=null;try{Se.current&&typeof Se.current.scrollTo=="function"&&Se.current.scrollTo({top:0,behavior:"smooth"})}catch{}},[se]),I.useEffect(()=>()=>{try{de.current&&clearTimeout(de.current)}catch{}},[]),I.useEffect(()=>{try{const S=R&&R.length>0&&R[se]?R[se]:null}catch{}},[R,se]),I.useEffect(()=>{Gs(!1)},[se]);const Yv=()=>{if(n.trim()){const S={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(S)),d(!0),v(new Date)}},Qv=async()=>{try{if(!await QA())return}catch(S){console.error("Folder pick failed",S),alert("Could not open folder picker. Check console for details.")}},Jv=()=>{const S=localStorage.getItem("fountain-script");if(S)try{const j=JSON.parse(S);r(j.content),Q(j.content),v(new Date(j.savedAt))}catch(j){console.error("Error loading saved script:",j)}},Xv=()=>{localStorage.removeItem("fountain-script"),d(!1),v(null),r(cu),Q(cu)},Zv=async()=>{try{await navigator.clipboard.writeText(n)}catch{const j=document.createElement("textarea");j.value=n,document.body.appendChild(j),j.select(),document.execCommand("copy"),document.body.removeChild(j)}},e1=async()=>{try{const S=await navigator.clipboard.readText();r(S),Q(S)}catch(S){console.error("Error pasting from clipboard:",S)}},t1=()=>{r(""),Q("");try{b.current&&b.current.focus&&b.current.focus()}catch{}},n1=I.useCallback(S=>{const j=A.current;if(h(S),C.current&&j.length>0){let le=null;for(let Te=j.length-1;Te>=0;Te--)if(j[Te].index<=S){le=j[Te];break}if(le){const Te=C.current.querySelector(`[data-line-id="${le.id}"]`);if(Te){const Gt=C.current,Cn=Gt.getBoundingClientRect(),Ai=Te.getBoundingClientRect(),qs=Ai.top-Cn.top,s1=Cn.height,l1=Ai.height,o1=Gt.scrollTop+qs-s1/2+l1/2;Gt.scrollTo({top:o1,behavior:"smooth"})}}}},[]),r1=I.useCallback(S=>{b.current&&b.current.scrollToLine&&b.current.scrollToLine(S)},[]);I.useEffect(()=>{const S=j=>{j.key==="Escape"&&(i?s(!1):l&&o(!1))};if(i||l)return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[i,l]),I.useEffect(()=>{const S=()=>{B(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",S),()=>document.removeEventListener("fullscreenchange",S)},[]);const i1=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),B(!1)):N.current&&N.current.requestFullscreen?(await N.current.requestFullscreen(),B(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),B(!0))}catch(S){console.error("Fullscreen toggle failed",S)}};return y.jsxs("div",{className:"fountain-app",ref:N,children:[t&&y.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:y.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),y.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"×"})]}),y.jsxs("div",{className:"modal-body",children:[y.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),y.jsxs("p",{style:{marginTop:"1rem"},children:[y.jsx("strong",{children:"How to:"}),' open your browser menu (⋮) and choose "Desktop site" or "Request desktop site".']})]}),y.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:y.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"Got it"})})]})}),y.jsxs("div",{className:"persistence-toolbar",children:[y.jsxs("div",{className:"toolbar-group",children:[x?y.jsxs(y.Fragment,{children:[y.jsxs("button",{className:"toolbar-btn",onClick:Qv,title:"Choose Drive folder",children:[y.jsx("i",{className:"fas fa-folder-open"})," Choose Folder"]}),y.jsxs("button",{className:`toolbar-btn ${!n.trim()||!k?"disabled":""}`,onClick:()=>alert("GDrive Save — not implemented yet"),disabled:!n.trim()||!k,title:"Save to Google Drive",children:[y.jsx("i",{className:"fab fa-google-drive"})," GDrive Save"]}),y.jsxs("button",{className:`toolbar-btn ${!n.trim()||!k?"disabled":""}`,onClick:()=>alert("GDrive Save As — not implemented yet"),disabled:!n.trim()||!k,title:"Save as to Google Drive",children:[y.jsx("i",{className:"fas fa-file-export"})," GDrive Save As"]}),y.jsxs("button",{className:`toolbar-btn ${f?"":"disabled"}`,onClick:()=>alert("GDrive Load — not implemented yet"),disabled:!f,title:"Load from Google Drive",children:[y.jsx("i",{className:"fas fa-download"})," GDrive Load"]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("button",{className:`toolbar-btn ${n.trim()?"":"disabled"}`,onClick:Yv,disabled:!n.trim(),title:"Save current script to browser storage",children:[y.jsx("i",{className:"fas fa-save"}),"Save"]}),y.jsxs("button",{className:`toolbar-btn ${f?"":"disabled"}`,onClick:Jv,disabled:!f,title:m?`Load saved script (${m.toLocaleDateString()} ${m.toLocaleTimeString()})`:"Load saved script",children:[y.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),y.jsxs("button",{className:"toolbar-btn",onClick:Zv,title:"Copy editor contents to clipboard",children:[y.jsx("i",{className:"fas fa-copy"}),"Copy"]}),y.jsxs("button",{className:"toolbar-btn",onClick:e1,title:"Paste from clipboard to editor",children:[y.jsx("i",{className:"fas fa-paste"}),"Paste"]})]}),!x&&y.jsxs("button",{className:`toolbar-btn danger ${n.trim()?"":"disabled"}`,onClick:t1,disabled:!n.trim(),title:"Clear editor contents",children:[y.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),x?y.jsx("div",{style:{fontSize:12,color:"#f5f5f5"},children:g&&g.folderName?y.jsxs("span",{children:[y.jsx("strong",{children:"Folder:"})," ",g.folderName,y.jsx("a",{href:"#",onClick:S=>{S.preventDefault();try{JA(),w({}),window.dispatchEvent(new CustomEvent("fountain:drive:cleared")),console.log("App: cleared drive state")}catch(j){console.error("App: failed to clear drive state",j)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:"Clear"})]}):"No folder selected"}):y.jsxs("button",{className:`toolbar-btn danger ${f?"":"disabled"}`,onClick:Xv,disabled:!f,title:"Clear saved script from storage",children:[y.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),y.jsx("div",{className:"toolbar-divider"}),y.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>s(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[y.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),y.jsxs("button",{className:`toolbar-btn character-btn ${F.length===0?"disabled":""}`,onClick:()=>F.length>0&&o(!0),title:F.length>0?"Character List":"No characters found",disabled:F.length===0,children:[y.jsx("i",{className:"fas fa-user"}),"Characters",F.length>0&&y.jsx("span",{className:"character-count-badge",children:F.length})]})]}),m&&y.jsxs("div",{className:"last-saved",children:["Last saved: ",m.toLocaleDateString()," at ",m.toLocaleTimeString()]})]}),y.jsx("div",{className:"mobile-view-toggle",children:y.jsx("div",{className:"tabs is-centered",children:y.jsxs("ul",{children:[y.jsx("li",{className:a==="edit"?"is-active":"",children:y.jsxs("a",{onClick:()=>u("edit"),children:[y.jsx("span",{className:"icon is-small",children:y.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),y.jsx("span",{children:"Edit"})]})}),y.jsx("li",{className:a==="preview"?"is-active":"",children:y.jsxs("a",{onClick:()=>u("preview"),children:[y.jsx("span",{className:"icon is-small",children:y.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),y.jsx("span",{children:"Preview"})]})})]})})}),y.jsxs("div",{className:"editor-layout",children:[y.jsx("button",{className:`toolbar-btn fullscreen-btn ${W?"is-active":""}`,onClick:i1,title:W?"Exit fullscreen":"Enter fullscreen","aria-label":W?"Exit fullscreen":"Enter fullscreen",children:y.jsx("i",{className:`fas ${W?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),y.jsxs("div",{className:"columns is-gapless",children:[y.jsx("div",{className:`column is-half-desktop ${a==="preview"?"mobile-hidden":""}`,children:y.jsxs("div",{className:"box editor-box",children:[y.jsx("h3",{className:"title is-6",children:"Editor"}),y.jsx(Wv,{ref:b,value:n,onChange:Uv,onCursorChange:n1,placeholder:"Type your fountain screenplay here..."})]})}),y.jsx("div",{className:`column is-half-desktop ${a==="edit"?"mobile-hidden":""}`,children:y.jsxs("div",{className:"box preview-box",children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[y.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview:"}),y.jsxs("div",{className:"pane-toggle",style:{display:"flex"},children:[y.jsx("button",{className:`toolbar-btn pane-toggle-btn ${H==="screenplay"?"is-active":""}`,onClick:()=>$("screenplay"),"aria-pressed":H==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),y.jsx("button",{className:`toolbar-btn pane-toggle-btn ${H==="player"?"is-active":""}`,onClick:()=>$("player"),"aria-pressed":H==="player",title:"Show media player",children:"Player"})]})]}),y.jsx("div",{})]}),H==="screenplay"?y.jsx("div",{className:"preview-content",ref:C,children:V.length===0?y.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):V.map(S=>y.jsx("div",{className:`preview-line ${S.className||""} ${S.index===c?"current-line":""}`,"data-type":S.type,"data-line-id":S.id,"data-line-index":S.index,onClick:()=>r1(S.index),style:{cursor:"pointer"},children:S.type==="image"||S.type==="audio"||S.type==="title_page"||S.type==="page_break"||S.type==="page_number"?y.jsx("div",{dangerouslySetInnerHTML:{__html:S.text}}):S.text||" "},S.id))}):y.jsxs("div",{className:"media-player",ref:Se,style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const S=R&&R.length>0?R[se]||R[0]:null,j=S&&typeof S.duration=="number"?S.duration:null,le=R&&R.length?R.length:0,Te=S&&S.title?String(S.title):"";let Gt="untitled";return Te&&Te.trim()&&(Gt=Te.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),Gt||(Gt="untitled")),y.jsxs("div",{className:"player-header",style:{marginBottom:"0.5rem",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[y.jsxs("div",{children:[y.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[y.jsxs("div",{className:"panel-title-wrapper",style:{position:"relative",display:"inline-block"},children:[y.jsx("div",{className:"panel-title",style:{fontSize:"1.05rem",fontWeight:700},onMouseEnter:()=>Gs(!0),onMouseLeave:()=>Gs(!1),onClick:()=>Gs(Cn=>!Cn),"aria-haspopup":"true","aria-expanded":vf,children:Gt}),S&&S.nesting&&vf?y.jsxs("div",{className:"panel-nesting-tooltip",role:"tooltip",children:[S.nesting.act?y.jsxs("div",{children:[y.jsx("strong",{children:"Act:"})," ",S.nesting.act]}):null,S.nesting.scene?y.jsxs("div",{children:[y.jsx("strong",{children:"Scene:"})," ",S.nesting.scene]}):null,S.nesting.sequence?y.jsxs("div",{children:[y.jsx("strong",{children:"Sequence:"})," ",S.nesting.sequence]}):null,!S.nesting.act&&!S.nesting.sequence&&!S.nesting.scene?y.jsx("div",{style:{color:"#999"},children:"No nesting"}):null]}):null]}),y.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${se+1} / ${le})`})]}),y.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:y.jsxs("div",{style:{color:"#999"},children:["lines ",S&&typeof S.startLine=="number"?S.startLine:"?","–",S&&typeof S.endLine=="number"?S.endLine:"?"]})})]}),y.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[y.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[y.jsx("span",{style:{fontSize:"0.95rem"},children:"⏱"}),j?`${j}s`:"n/a"]}),y.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:qv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏹"}),y.jsxs("button",{className:`toolbar-btn ${G?"is-active":""}`,title:"Play","aria-label":"Play",onClick:Kv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[G?y.jsx("span",{className:"playing-indicator","aria-hidden":"true"}):null,"▶︎"]}),y.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:Gv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏸"}),y.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:$v,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏮"}),y.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:wf,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏭"})]})]}),G&&(()=>{const Cn=R&&R.length>0?R[se]||R[0]:null,Ai=Cn&&typeof Cn.duration=="number"?Cn.duration:null,qs=Math.max(1e3,typeof Ai=="number"?Ai*1e3:3e3);return y.jsx("div",{className:"player-header-progress-wrapper",style:{position:"relative"},children:y.jsx("div",{className:"player-progress",style:{animationDuration:`${qs}ms`},"aria-hidden":"true"},`player-progress-${se}-${qs}`)})})()]})})(),(()=>{if(Qe)return y.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:y.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#000",aspectRatio:"16/9"}})});const S=R&&R.length>0?R[se]||R[0]:null,j=S&&S.imageUrl?S.imageUrl:null;return y.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:j?y.jsx("img",{src:j,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):y.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:y.jsx("span",{children:"No image"})})})})(),(()=>{const S=R&&R.length>0?R[se]||R[0]:null,j=S&&S.audioUrl?S.audioUrl:null;return y.jsx("div",{style:{marginBottom:"0.75rem"},children:j?y.jsx("audio",{ref:U,controls:!0,src:j,style:{width:"100%"}}):y.jsx("audio",{ref:U,controls:!0,disabled:!0,style:{width:"100%"}})})})(),y.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!R||R.length===0?y.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const S=R&&R.length>0?R[se]||R[0]:null;return y.jsx("div",{children:y.jsx("div",{style:{padding:"0.5rem"},children:y.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:S&&S.blocks&&S.blocks.length>0?S.blocks.map(j=>y.jsx("div",{className:`preview-line ${j.className||""}`,dangerouslySetInnerHTML:{__html:j.text||" "}},j.id)):S&&S.snippet?S.snippet.split(/\r?\n/).map((j,le)=>y.jsx("div",{style:{whiteSpace:"pre-wrap"},children:j||" "},le)):y.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),i&&y.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:y.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{children:"Fountain.ext Format Reference"}),y.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:"×"})]}),y.jsxs("div",{className:"modal-body",children:[y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Title Page"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",y.jsx("br",{}),"Credit: Written by",y.jsx("br",{}),"Author: John Dope",y.jsx("br",{}),"Authors: John Dope and Jane Smith",y.jsx("br",{}),"Source: Based on the novel by Famous Writer",y.jsx("br",{}),"Draft Date: October 4, 2025",y.jsx("br",{}),"Date: 10/04/2025",y.jsx("br",{}),"Contact:",y.jsx("br",{}),"    John Dope",y.jsx("br",{}),"    555-123-4567",y.jsx("br",{}),"    john@example.com",y.jsx("br",{}),"    ",y.jsx("br",{}),"    Literary Agent",y.jsx("br",{}),"    Agency Name",y.jsx("br",{}),"    agent@agency.com",y.jsx("br",{}),"Notes: This is a sample script",y.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),y.jsx("p",{children:'Title page elements appear at the top of your script. All are optional. Use "Author" for single writer, "Authors" for multiple. Contact can be multi-line with indentation. End title page with === (page break).'})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Scene Headings"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["EXT. PARKING LOT - DAY",y.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",y.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),y.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Characters & Dialogue"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["MENTOR",y.jsx("br",{}),"Welcome to the team!",y.jsx("br",{}),y.jsx("br",{}),"@MENTOR",y.jsx("br",{}),"(power user syntax)",y.jsx("br",{}),y.jsx("br",{}),"USER #1",y.jsx("br",{}),"Thanks for having me.",y.jsx("br",{}),y.jsx("br",{}),"BOB O'SHAUNNESSY",y.jsx("br",{}),"(whispering)",y.jsx("br",{}),"This is a parenthetical."]}),y.jsx("p",{children:'Characters are ALL CAPS. Use @ for power user syntax or mixed-case names like "@John Doe". Names with @ in front will be counted as characters. Parentheticals go under character names.'})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Dual Dialogue"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["ALICE^",y.jsx("br",{}),"BOB^",y.jsx("br",{}),"CHARLIE^",y.jsx("br",{}),"I can't believe it!",y.jsx("br",{}),y.jsx("br",{}),"CHARLIE ^",y.jsx("br",{}),"DAVE ^",y.jsx("br",{}),"(disgusted)",y.jsx("br",{}),"Eew. no it's nooot!",y.jsx("br",{}),y.jsx("br",{})]}),y.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Action Lines"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["Bob walks into the room and looks around nervously.",y.jsx("br",{}),y.jsx("br",{}),"The computer screen flickers to life."]}),y.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Transitions"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["FADE IN:",y.jsx("br",{}),"CUT TO:",y.jsx("br",{}),"FADE TO BLACK.",y.jsx("br",{}),"> CUT TO BLACK."]}),y.jsx("p",{children:"Transitions control scene changes. Use > for power user syntax."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Centered Text"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:[">INTERMISSION<",y.jsx("br",{}),">THE END<"]}),y.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["# Act I",y.jsx("br",{}),"## Scene 1: The Beginning",y.jsx("br",{}),"### Sequence A: Setup",y.jsx("br",{}),"#### Panel 1",y.jsx("br",{}),"02:30",y.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",y.jsx("br",{}),"[a]https://example.com/dialogue.mp3",y.jsx("br",{}),y.jsx("br",{}),"#### Panel 2",y.jsx("br",{}),"01:15",y.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),y.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Notes & Comments"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["[[This is a note for the writer]]",y.jsx("br",{}),y.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),y.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Special Elements"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["= Synopsis: Brief scene description",y.jsx("br",{}),y.jsx("br",{}),"===",y.jsx("br",{}),"(Page Break)",y.jsx("br",{}),y.jsx("br",{}),"~Lyrics:",y.jsx("br",{}),'~"Happy birthday to you"',y.jsx("br",{}),'~"Happy birthday to you"']}),y.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),l&&y.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:y.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{children:"Character List"}),y.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:"×"})]}),y.jsx("div",{className:"modal-body",children:F.length===0?y.jsx("p",{children:"No characters found in the script."}):y.jsx("div",{className:"character-list",children:F.map(S=>y.jsxs("div",{className:"character-item",children:[y.jsx("div",{className:"character-name",children:S}),y.jsxs("div",{className:"character-count",children:[Z.get(S)||0," dialogue lines"]})]},S))})})]})})]})}hu.createRoot(document.getElementById("root")).render(y.jsx(b1.StrictMode,{children:y.jsx(tb,{})}));
