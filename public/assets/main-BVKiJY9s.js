import{p as Ea,a as k1}from"./chunk-B1-1SDTH.js";function S1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ym={exports:{}},Jo={},vm={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gs=Symbol.for("react.element"),C1=Symbol.for("react.portal"),b1=Symbol.for("react.fragment"),A1=Symbol.for("react.strict_mode"),E1=Symbol.for("react.profiler"),T1=Symbol.for("react.provider"),M1=Symbol.for("react.context"),N1=Symbol.for("react.forward_ref"),D1=Symbol.for("react.suspense"),O1=Symbol.for("react.memo"),P1=Symbol.for("react.lazy"),Bf=Symbol.iterator;function L1(t){return t===null||typeof t!="object"?null:(t=Bf&&t[Bf]||t["@@iterator"],typeof t=="function"?t:null)}var wm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xm=Object.assign,km={};function Ti(t,e,n){this.props=t,this.context=e,this.refs=km,this.updater=n||wm}Ti.prototype.isReactComponent={};Ti.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ti.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sm(){}Sm.prototype=Ti.prototype;function lh(t,e,n){this.props=t,this.context=e,this.refs=km,this.updater=n||wm}var oh=lh.prototype=new Sm;oh.constructor=lh;xm(oh,Ti.prototype);oh.isPureReactComponent=!0;var jf=Array.isArray,Cm=Object.prototype.hasOwnProperty,ah={current:null},bm={key:!0,ref:!0,__self:!0,__source:!0};function Am(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)Cm.call(e,r)&&!bm.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Gs,type:t,key:s,ref:l,props:i,_owner:ah.current}}function R1(t,e){return{$$typeof:Gs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gs}function I1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ff=/\/+/g;function Ta(t,e){return typeof t=="object"&&t!==null&&t.key!=null?I1(""+t.key):e.toString(36)}function Vl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Gs:case C1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+Ta(l,0):r,jf(i)?(n="",t!=null&&(n=t.replace(Ff,"$&/")+"/"),Vl(i,e,n,"",function(u){return u})):i!=null&&(uh(i)&&(i=R1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Ff,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",jf(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+Ta(s,o);l+=Vl(s,e,n,a,i)}else if(a=L1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+Ta(s,o++),l+=Vl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ll(t,e,n){if(t==null)return t;var r=[],i=0;return Vl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function B1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rt={current:null},Ul={transition:null},j1={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:Ul,ReactCurrentOwner:ah};function Em(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:ll,forEach:function(t,e,n){ll(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ll(t,function(){e++}),e},toArray:function(t){return ll(t,function(e){return e})||[]},only:function(t){if(!uh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=Ti;Y.Fragment=b1;Y.Profiler=E1;Y.PureComponent=lh;Y.StrictMode=A1;Y.Suspense=D1;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j1;Y.act=Em;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xm({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=ah.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)Cm.call(e,a)&&!bm.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Gs,type:t.type,key:i,ref:s,props:r,_owner:l}};Y.createContext=function(t){return t={$$typeof:M1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:T1,_context:t},t.Consumer=t};Y.createElement=Am;Y.createFactory=function(t){var e=Am.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:N1,render:t}};Y.isValidElement=uh;Y.lazy=function(t){return{$$typeof:P1,_payload:{_status:-1,_result:t},_init:B1}};Y.memo=function(t,e){return{$$typeof:O1,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=Ul.transition;Ul.transition={};try{t()}finally{Ul.transition=e}};Y.unstable_act=Em;Y.useCallback=function(t,e){return rt.current.useCallback(t,e)};Y.useContext=function(t){return rt.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return rt.current.useDeferredValue(t)};Y.useEffect=function(t,e){return rt.current.useEffect(t,e)};Y.useId=function(){return rt.current.useId()};Y.useImperativeHandle=function(t,e,n){return rt.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return rt.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return rt.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return rt.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return rt.current.useReducer(t,e,n)};Y.useRef=function(t){return rt.current.useRef(t)};Y.useState=function(t){return rt.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return rt.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return rt.current.useTransition()};Y.version="18.3.1";vm.exports=Y;var L=vm.exports;const F1=S1(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1=L,z1=Symbol.for("react.element"),H1=Symbol.for("react.fragment"),W1=Object.prototype.hasOwnProperty,V1=_1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U1={key:!0,ref:!0,__self:!0,__source:!0};function Tm(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)W1.call(e,r)&&!U1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:z1,type:t,key:s,ref:l,props:i,_owner:V1.current}}Jo.Fragment=H1;Jo.jsx=Tm;Jo.jsxs=Tm;ym.exports=Jo;var m=ym.exports,Su={},Mm={exports:{}},bt={},Nm={exports:{}},Dm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,W){var $=P.length;P.push(W);e:for(;0<$;){var q=$-1>>>1,X=P[q];if(0<i(X,W))P[q]=W,P[$]=X,$=q;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var W=P[0],$=P.pop();if($!==W){P[0]=$;e:for(var q=0,X=P.length,me=X>>>1;q<me;){var j=2*(q+1)-1,Ze=P[j],se=j+1,ft=P[se];if(0>i(Ze,$))se<X&&0>i(ft,Ze)?(P[q]=ft,P[se]=$,q=se):(P[q]=Ze,P[j]=$,q=j);else if(se<X&&0>i(ft,$))P[q]=ft,P[se]=$,q=se;else break e}}return W}function i(P,W){var $=P.sortIndex-W.sortIndex;return $!==0?$:P.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],c=1,h=null,f=3,d=!1,g=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=P)r(u),W.sortIndex=W.expirationTime,e(a,W);else break;W=n(u)}}function S(P){if(w=!1,v(P),!g)if(n(a)!==null)g=!0,Xe(C);else{var W=n(u);W!==null&&Ft(S,W.startTime-P)}}function C(P,W){g=!1,w&&(w=!1,p(D),D=-1),d=!0;var $=f;try{for(v(W),h=n(a);h!==null&&(!(h.expirationTime>W)||P&&!V());){var q=h.callback;if(typeof q=="function"){h.callback=null,f=h.priorityLevel;var X=q(h.expirationTime<=W);W=t.unstable_now(),typeof X=="function"?h.callback=X:h===n(a)&&r(a),v(W)}else r(a);h=n(a)}if(h!==null)var me=!0;else{var j=n(u);j!==null&&Ft(S,j.startTime-W),me=!1}return me}finally{h=null,f=$,d=!1}}var A=!1,b=null,D=-1,z=5,B=-1;function V(){return!(t.unstable_now()-B<z)}function H(){if(b!==null){var P=t.unstable_now();B=P;var W=!0;try{W=b(!0,P)}finally{W?Q():(A=!1,b=null)}}else A=!1}var Q;if(typeof y=="function")Q=function(){y(H)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Se=ie.port2;ie.port1.onmessage=H,Q=function(){Se.postMessage(null)}}else Q=function(){x(H,0)};function Xe(P){b=P,A||(A=!0,Q())}function Ft(P,W){D=x(function(){P(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||d||(g=!0,Xe(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var $=f;f=W;try{return P()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,W){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var $=f;f=P;try{return W()}finally{f=$}},t.unstable_scheduleCallback=function(P,W,$){var q=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?q+$:q):$=q,P){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=$+X,P={id:c++,callback:W,priorityLevel:P,startTime:$,expirationTime:X,sortIndex:-1},$>q?(P.sortIndex=$,e(u,P),n(a)===null&&P===n(u)&&(w?(p(D),D=-1):w=!0,Ft(S,$-q))):(P.sortIndex=X,e(a,P),g||d||(g=!0,Xe(C))),P},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(P){var W=f;return function(){var $=f;f=W;try{return P.apply(this,arguments)}finally{f=$}}}})(Dm);Nm.exports=Dm;var $1=Nm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K1=L,kt=$1;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Om=new Set,ws={};function Br(t,e){di(t,e),di(t+"Capture",e)}function di(t,e){for(ws[t]=e,t=0;t<e.length;t++)Om.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cu=Object.prototype.hasOwnProperty,G1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_f={},zf={};function q1(t){return Cu.call(zf,t)?!0:Cu.call(_f,t)?!1:G1.test(t)?zf[t]=!0:(_f[t]=!0,!1)}function Y1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Q1(t,e,n,r){if(e===null||typeof e>"u"||Y1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function it(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new it(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new it(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new it(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new it(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new it(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new it(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new it(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new it(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new it(t,5,!1,t.toLowerCase(),null,!1,!1)});var ch=/[\-:]([a-z])/g;function hh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ch,hh);We[e]=new it(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ch,hh);We[e]=new it(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ch,hh);We[e]=new it(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new it(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new it(t,1,!1,t.toLowerCase(),null,!0,!0)});function fh(t,e,n,r){var i=We.hasOwnProperty(e)?We[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Q1(e,n,i,r)&&(n=null),r||i===null?q1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mn=K1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ol=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),Vr=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),bu=Symbol.for("react.profiler"),Pm=Symbol.for("react.provider"),Lm=Symbol.for("react.context"),ph=Symbol.for("react.forward_ref"),Au=Symbol.for("react.suspense"),Eu=Symbol.for("react.suspense_list"),mh=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),Rm=Symbol.for("react.offscreen"),Hf=Symbol.iterator;function ji(t){return t===null||typeof t!="object"?null:(t=Hf&&t[Hf]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,Ma;function Qi(t){if(Ma===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ma=e&&e[1]||""}return`
`+Ma+t}var Na=!1;function Da(t,e){if(!t||Na)return"";Na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{Na=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qi(t):""}function J1(t){switch(t.tag){case 5:return Qi(t.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 2:case 15:return t=Da(t.type,!1),t;case 11:return t=Da(t.type.render,!1),t;case 1:return t=Da(t.type,!0),t;default:return""}}function Tu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vr:return"Fragment";case Wr:return"Portal";case bu:return"Profiler";case dh:return"StrictMode";case Au:return"Suspense";case Eu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lm:return(t.displayName||"Context")+".Consumer";case Pm:return(t._context.displayName||"Context")+".Provider";case ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mh:return e=t.displayName||null,e!==null?e:Tu(t.type)||"Memo";case Pn:e=t._payload,t=t._init;try{return Tu(t(e))}catch{}}return null}function X1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tu(e);case 8:return e===dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Im(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Z1(t){var e=Im(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function al(t){t._valueTracker||(t._valueTracker=Z1(t))}function Bm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Im(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ao(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mu(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=er(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jm(t,e){e=e.checked,e!=null&&fh(t,"checked",e,!1)}function Nu(t,e){jm(t,e);var n=er(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Du(t,e.type,n):e.hasOwnProperty("defaultValue")&&Du(t,e.type,er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Du(t,e,n){(e!=="number"||ao(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ji=Array.isArray;function ri(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+er(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ou(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(Ji(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:er(n)}}function Fm(t,e){var n=er(e.value),r=er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $f(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _m(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_m(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ul,zm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ul=ul||document.createElement("div"),ul.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ul.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ew=["Webkit","ms","Moz","O"];Object.keys(rs).forEach(function(t){ew.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rs[e]=rs[t]})});function Hm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rs.hasOwnProperty(t)&&rs[t]?(""+e).trim():e+"px"}function Wm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Hm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tw=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lu(t,e){if(e){if(tw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function Ru(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iu=null;function gh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bu=null,ii=null,si=null;function Kf(t){if(t=Qs(t)){if(typeof Bu!="function")throw Error(T(280));var e=t.stateNode;e&&(e=na(e),Bu(t.stateNode,t.type,e))}}function Vm(t){ii?si?si.push(t):si=[t]:ii=t}function Um(){if(ii){var t=ii,e=si;if(si=ii=null,Kf(t),e)for(t=0;t<e.length;t++)Kf(e[t])}}function $m(t,e){return t(e)}function Km(){}var Oa=!1;function Gm(t,e,n){if(Oa)return t(e,n);Oa=!0;try{return $m(t,e,n)}finally{Oa=!1,(ii!==null||si!==null)&&(Km(),Um())}}function ks(t,e){var n=t.stateNode;if(n===null)return null;var r=na(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var ju=!1;if(Cn)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){ju=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{ju=!1}function nw(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var is=!1,uo=null,co=!1,Fu=null,rw={onError:function(t){is=!0,uo=t}};function iw(t,e,n,r,i,s,l,o,a){is=!1,uo=null,nw.apply(rw,arguments)}function sw(t,e,n,r,i,s,l,o,a){if(iw.apply(this,arguments),is){if(is){var u=uo;is=!1,uo=null}else throw Error(T(198));co||(co=!0,Fu=u)}}function jr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gf(t){if(jr(t)!==t)throw Error(T(188))}function lw(t){var e=t.alternate;if(!e){if(e=jr(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Gf(i),t;if(s===r)return Gf(i),e;s=s.sibling}throw Error(T(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function Ym(t){return t=lw(t),t!==null?Qm(t):null}function Qm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qm(t);if(e!==null)return e;t=t.sibling}return null}var Jm=kt.unstable_scheduleCallback,qf=kt.unstable_cancelCallback,ow=kt.unstable_shouldYield,aw=kt.unstable_requestPaint,Ae=kt.unstable_now,uw=kt.unstable_getCurrentPriorityLevel,yh=kt.unstable_ImmediatePriority,Xm=kt.unstable_UserBlockingPriority,ho=kt.unstable_NormalPriority,cw=kt.unstable_LowPriority,Zm=kt.unstable_IdlePriority,Xo=null,fn=null;function hw(t){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Xo,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:pw,fw=Math.log,dw=Math.LN2;function pw(t){return t>>>=0,t===0?32:31-(fw(t)/dw|0)|0}var cl=64,hl=4194304;function Xi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=Xi(o):(s&=l,s!==0&&(r=Xi(s)))}else l=n&~i,l!==0?r=Xi(l):s!==0&&(r=Xi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kt(e),i=1<<n,r|=t[n],e&=~i;return r}function mw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Kt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=mw(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function _u(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eg(){var t=cl;return cl<<=1,!(cl&4194240)&&(cl=64),t}function Pa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kt(e),t[e]=n}function yw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var le=0;function tg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ng,wh,rg,ig,sg,zu=!1,fl=[],$n=null,Kn=null,Gn=null,Ss=new Map,Cs=new Map,jn=[],vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yf(t,e){switch(t){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Ss.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cs.delete(e.pointerId)}}function _i(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Qs(e),e!==null&&wh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ww(t,e,n,r,i){switch(e){case"focusin":return $n=_i($n,t,e,n,r,i),!0;case"dragenter":return Kn=_i(Kn,t,e,n,r,i),!0;case"mouseover":return Gn=_i(Gn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ss.set(s,_i(Ss.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Cs.set(s,_i(Cs.get(s)||null,t,e,n,r,i)),!0}return!1}function lg(t){var e=yr(t.target);if(e!==null){var n=jr(e);if(n!==null){if(e=n.tag,e===13){if(e=qm(n),e!==null){t.blockedOn=e,sg(t.priority,function(){rg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $l(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Iu=r,n.target.dispatchEvent(r),Iu=null}else return e=Qs(n),e!==null&&wh(e),t.blockedOn=n,!1;e.shift()}return!0}function Qf(t,e,n){$l(t)&&n.delete(e)}function xw(){zu=!1,$n!==null&&$l($n)&&($n=null),Kn!==null&&$l(Kn)&&(Kn=null),Gn!==null&&$l(Gn)&&(Gn=null),Ss.forEach(Qf),Cs.forEach(Qf)}function zi(t,e){t.blockedOn===e&&(t.blockedOn=null,zu||(zu=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,xw)))}function bs(t){function e(i){return zi(i,t)}if(0<fl.length){zi(fl[0],t);for(var n=1;n<fl.length;n++){var r=fl[n];r.blockedOn===t&&(r.blockedOn=null)}}for($n!==null&&zi($n,t),Kn!==null&&zi(Kn,t),Gn!==null&&zi(Gn,t),Ss.forEach(e),Cs.forEach(e),n=0;n<jn.length;n++)r=jn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jn.length&&(n=jn[0],n.blockedOn===null);)lg(n),n.blockedOn===null&&jn.shift()}var li=Mn.ReactCurrentBatchConfig,po=!0;function kw(t,e,n,r){var i=le,s=li.transition;li.transition=null;try{le=1,xh(t,e,n,r)}finally{le=i,li.transition=s}}function Sw(t,e,n,r){var i=le,s=li.transition;li.transition=null;try{le=4,xh(t,e,n,r)}finally{le=i,li.transition=s}}function xh(t,e,n,r){if(po){var i=Hu(t,e,n,r);if(i===null)Wa(t,e,r,mo,n),Yf(t,r);else if(ww(i,t,e,n,r))r.stopPropagation();else if(Yf(t,r),e&4&&-1<vw.indexOf(t)){for(;i!==null;){var s=Qs(i);if(s!==null&&ng(s),s=Hu(t,e,n,r),s===null&&Wa(t,e,r,mo,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wa(t,e,r,null,n)}}var mo=null;function Hu(t,e,n,r){if(mo=null,t=gh(r),t=yr(t),t!==null)if(e=jr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mo=t,null}function og(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uw()){case yh:return 1;case Xm:return 4;case ho:case cw:return 16;case Zm:return 536870912;default:return 16}default:return 16}}var zn=null,kh=null,Kl=null;function ag(){if(Kl)return Kl;var t,e=kh,n=e.length,r,i="value"in zn?zn.value:zn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Kl=i.slice(t,1<r?1-r:void 0)}function Gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dl(){return!0}function Jf(){return!1}function At(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?dl:Jf,this.isPropagationStopped=Jf,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),e}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sh=At(Mi),Ys=xe({},Mi,{view:0,detail:0}),Cw=At(Ys),La,Ra,Hi,Zo=xe({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ch,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hi&&(Hi&&t.type==="mousemove"?(La=t.screenX-Hi.screenX,Ra=t.screenY-Hi.screenY):Ra=La=0,Hi=t),La)},movementY:function(t){return"movementY"in t?t.movementY:Ra}}),Xf=At(Zo),bw=xe({},Zo,{dataTransfer:0}),Aw=At(bw),Ew=xe({},Ys,{relatedTarget:0}),Ia=At(Ew),Tw=xe({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),Mw=At(Tw),Nw=xe({},Mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dw=At(Nw),Ow=xe({},Mi,{data:0}),Zf=At(Ow),Pw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Rw[t])?!!e[t]:!1}function Ch(){return Iw}var Bw=xe({},Ys,{key:function(t){if(t.key){var e=Pw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ch,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jw=At(Bw),Fw=xe({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=At(Fw),_w=xe({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ch}),zw=At(_w),Hw=xe({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ww=At(Hw),Vw=xe({},Zo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Uw=At(Vw),$w=[9,13,27,32],bh=Cn&&"CompositionEvent"in window,ss=null;Cn&&"documentMode"in document&&(ss=document.documentMode);var Kw=Cn&&"TextEvent"in window&&!ss,ug=Cn&&(!bh||ss&&8<ss&&11>=ss),td=" ",nd=!1;function cg(t,e){switch(t){case"keyup":return $w.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ur=!1;function Gw(t,e){switch(t){case"compositionend":return hg(e);case"keypress":return e.which!==32?null:(nd=!0,td);case"textInput":return t=e.data,t===td&&nd?null:t;default:return null}}function qw(t,e){if(Ur)return t==="compositionend"||!bh&&cg(t,e)?(t=ag(),Kl=kh=zn=null,Ur=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ug&&e.locale!=="ko"?null:e.data;default:return null}}var Yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yw[t.type]:e==="textarea"}function fg(t,e,n,r){Vm(r),e=go(e,"onChange"),0<e.length&&(n=new Sh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ls=null,As=null;function Qw(t){Cg(t,0)}function ea(t){var e=Gr(t);if(Bm(e))return t}function Jw(t,e){if(t==="change")return e}var dg=!1;if(Cn){var Ba;if(Cn){var ja="oninput"in document;if(!ja){var id=document.createElement("div");id.setAttribute("oninput","return;"),ja=typeof id.oninput=="function"}Ba=ja}else Ba=!1;dg=Ba&&(!document.documentMode||9<document.documentMode)}function sd(){ls&&(ls.detachEvent("onpropertychange",pg),As=ls=null)}function pg(t){if(t.propertyName==="value"&&ea(As)){var e=[];fg(e,As,t,gh(t)),Gm(Qw,e)}}function Xw(t,e,n){t==="focusin"?(sd(),ls=e,As=n,ls.attachEvent("onpropertychange",pg)):t==="focusout"&&sd()}function Zw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ea(As)}function ex(t,e){if(t==="click")return ea(e)}function tx(t,e){if(t==="input"||t==="change")return ea(e)}function nx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qt=typeof Object.is=="function"?Object.is:nx;function Es(t,e){if(qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Cu.call(e,i)||!qt(t[i],e[i]))return!1}return!0}function ld(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function od(t,e){var n=ld(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ld(n)}}function mg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gg(){for(var t=window,e=ao();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ao(t.document)}return e}function Ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rx(t){var e=gg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mg(n.ownerDocument.documentElement,n)){if(r!==null&&Ah(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=od(n,s);var l=od(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ix=Cn&&"documentMode"in document&&11>=document.documentMode,$r=null,Wu=null,os=null,Vu=!1;function ad(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vu||$r==null||$r!==ao(r)||(r=$r,"selectionStart"in r&&Ah(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),os&&Es(os,r)||(os=r,r=go(Wu,"onSelect"),0<r.length&&(e=new Sh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$r)))}function pl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Kr={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionend:pl("Transition","TransitionEnd")},Fa={},yg={};Cn&&(yg=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function ta(t){if(Fa[t])return Fa[t];if(!Kr[t])return t;var e=Kr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yg)return Fa[t]=e[n];return t}var vg=ta("animationend"),wg=ta("animationiteration"),xg=ta("animationstart"),kg=ta("transitionend"),Sg=new Map,ud="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(t,e){Sg.set(t,e),Br(e,[t])}for(var _a=0;_a<ud.length;_a++){var za=ud[_a],sx=za.toLowerCase(),lx=za[0].toUpperCase()+za.slice(1);ar(sx,"on"+lx)}ar(vg,"onAnimationEnd");ar(wg,"onAnimationIteration");ar(xg,"onAnimationStart");ar("dblclick","onDoubleClick");ar("focusin","onFocus");ar("focusout","onBlur");ar(kg,"onTransitionEnd");di("onMouseEnter",["mouseout","mouseover"]);di("onMouseLeave",["mouseout","mouseover"]);di("onPointerEnter",["pointerout","pointerover"]);di("onPointerLeave",["pointerout","pointerover"]);Br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Br("onBeforeInput",["compositionend","keypress","textInput","paste"]);Br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ox=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function cd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sw(r,e,void 0,t),t.currentTarget=null}function Cg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;cd(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;cd(i,o,u),s=a}}}if(co)throw t=Fu,co=!1,Fu=null,t}function he(t,e){var n=e[qu];n===void 0&&(n=e[qu]=new Set);var r=t+"__bubble";n.has(r)||(bg(e,t,2,!1),n.add(r))}function Ha(t,e,n){var r=0;e&&(r|=4),bg(n,t,r,e)}var ml="_reactListening"+Math.random().toString(36).slice(2);function Ts(t){if(!t[ml]){t[ml]=!0,Om.forEach(function(n){n!=="selectionchange"&&(ox.has(n)||Ha(n,!1,t),Ha(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ml]||(e[ml]=!0,Ha("selectionchange",!1,e))}}function bg(t,e,n,r){switch(og(e)){case 1:var i=kw;break;case 4:i=Sw;break;default:i=xh}n=i.bind(null,e,n,t),i=void 0,!ju||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wa(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=yr(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Gm(function(){var u=s,c=gh(n),h=[];e:{var f=Sg.get(t);if(f!==void 0){var d=Sh,g=t;switch(t){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":d=jw;break;case"focusin":g="focus",d=Ia;break;case"focusout":g="blur",d=Ia;break;case"beforeblur":case"afterblur":d=Ia;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Aw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=zw;break;case vg:case wg:case xg:d=Mw;break;case kg:d=Ww;break;case"scroll":d=Cw;break;case"wheel":d=Uw;break;case"copy":case"cut":case"paste":d=Dw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=ed}var w=(e&4)!==0,x=!w&&t==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var y=u,v;y!==null;){v=y;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,p!==null&&(S=ks(y,p),S!=null&&w.push(Ms(y,S,v)))),x)break;y=y.return}0<w.length&&(f=new d(f,g,null,n,c),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==Iu&&(g=n.relatedTarget||n.fromElement)&&(yr(g)||g[bn]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(g=n.relatedTarget||n.toElement,d=u,g=g?yr(g):null,g!==null&&(x=jr(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=u),d!==g)){if(w=Xf,S="onMouseLeave",p="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=ed,S="onPointerLeave",p="onPointerEnter",y="pointer"),x=d==null?f:Gr(d),v=g==null?f:Gr(g),f=new w(S,y+"leave",d,n,c),f.target=x,f.relatedTarget=v,S=null,yr(c)===u&&(w=new w(p,y+"enter",g,n,c),w.target=v,w.relatedTarget=x,S=w),x=S,d&&g)t:{for(w=d,p=g,y=0,v=w;v;v=Fr(v))y++;for(v=0,S=p;S;S=Fr(S))v++;for(;0<y-v;)w=Fr(w),y--;for(;0<v-y;)p=Fr(p),v--;for(;y--;){if(w===p||p!==null&&w===p.alternate)break t;w=Fr(w),p=Fr(p)}w=null}else w=null;d!==null&&hd(h,f,d,w,!1),g!==null&&x!==null&&hd(h,x,g,w,!0)}}e:{if(f=u?Gr(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=Jw;else if(rd(f))if(dg)C=tx;else{C=Zw;var A=Xw}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=ex);if(C&&(C=C(t,u))){fg(h,C,n,c);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&Du(f,"number",f.value)}switch(A=u?Gr(u):window,t){case"focusin":(rd(A)||A.contentEditable==="true")&&($r=A,Wu=u,os=null);break;case"focusout":os=Wu=$r=null;break;case"mousedown":Vu=!0;break;case"contextmenu":case"mouseup":case"dragend":Vu=!1,ad(h,n,c);break;case"selectionchange":if(ix)break;case"keydown":case"keyup":ad(h,n,c)}var b;if(bh)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Ur?cg(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(ug&&n.locale!=="ko"&&(Ur||D!=="onCompositionStart"?D==="onCompositionEnd"&&Ur&&(b=ag()):(zn=c,kh="value"in zn?zn.value:zn.textContent,Ur=!0)),A=go(u,D),0<A.length&&(D=new Zf(D,t,null,n,c),h.push({event:D,listeners:A}),b?D.data=b:(b=hg(n),b!==null&&(D.data=b)))),(b=Kw?Gw(t,n):qw(t,n))&&(u=go(u,"onBeforeInput"),0<u.length&&(c=new Zf("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=b))}Cg(h,e)})}function Ms(t,e,n){return{instance:t,listener:e,currentTarget:n}}function go(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ks(t,n),s!=null&&r.unshift(Ms(t,s,i)),s=ks(t,e),s!=null&&r.push(Ms(t,s,i))),t=t.return}return r}function Fr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hd(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=ks(n,s),a!=null&&l.unshift(Ms(n,a,o))):i||(a=ks(n,s),a!=null&&l.push(Ms(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var ax=/\r\n?/g,ux=/\u0000|\uFFFD/g;function fd(t){return(typeof t=="string"?t:""+t).replace(ax,`
`).replace(ux,"")}function gl(t,e,n){if(e=fd(e),fd(t)!==e&&n)throw Error(T(425))}function yo(){}var Uu=null,$u=null;function Ku(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gu=typeof setTimeout=="function"?setTimeout:void 0,cx=typeof clearTimeout=="function"?clearTimeout:void 0,dd=typeof Promise=="function"?Promise:void 0,hx=typeof queueMicrotask=="function"?queueMicrotask:typeof dd<"u"?function(t){return dd.resolve(null).then(t).catch(fx)}:Gu;function fx(t){setTimeout(function(){throw t})}function Va(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),bs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);bs(e)}function qn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),on="__reactFiber$"+Ni,Ns="__reactProps$"+Ni,bn="__reactContainer$"+Ni,qu="__reactEvents$"+Ni,dx="__reactListeners$"+Ni,px="__reactHandles$"+Ni;function yr(t){var e=t[on];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bn]||n[on]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pd(t);t!==null;){if(n=t[on])return n;t=pd(t)}return e}t=n,n=t.parentNode}return null}function Qs(t){return t=t[on]||t[bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function na(t){return t[Ns]||null}var Yu=[],qr=-1;function ur(t){return{current:t}}function de(t){0>qr||(t.current=Yu[qr],Yu[qr]=null,qr--)}function ue(t,e){qr++,Yu[qr]=t.current,t.current=e}var tr={},Qe=ur(tr),at=ur(!1),Ar=tr;function pi(t,e){var n=t.type.contextTypes;if(!n)return tr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ut(t){return t=t.childContextTypes,t!=null}function vo(){de(at),de(Qe)}function md(t,e,n){if(Qe.current!==tr)throw Error(T(168));ue(Qe,e),ue(at,n)}function Ag(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(T(108,X1(t)||"Unknown",i));return xe({},n,r)}function wo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tr,Ar=Qe.current,ue(Qe,t),ue(at,at.current),!0}function gd(t,e,n){var r=t.stateNode;if(!r)throw Error(T(169));n?(t=Ag(t,e,Ar),r.__reactInternalMemoizedMergedChildContext=t,de(at),de(Qe),ue(Qe,t)):de(at),ue(at,n)}var gn=null,ra=!1,Ua=!1;function Eg(t){gn===null?gn=[t]:gn.push(t)}function mx(t){ra=!0,Eg(t)}function cr(){if(!Ua&&gn!==null){Ua=!0;var t=0,e=le;try{var n=gn;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gn=null,ra=!1}catch(i){throw gn!==null&&(gn=gn.slice(t+1)),Jm(yh,cr),i}finally{le=e,Ua=!1}}return null}var Yr=[],Qr=0,xo=null,ko=0,Et=[],Tt=0,Er=null,vn=1,wn="";function pr(t,e){Yr[Qr++]=ko,Yr[Qr++]=xo,xo=t,ko=e}function Tg(t,e,n){Et[Tt++]=vn,Et[Tt++]=wn,Et[Tt++]=Er,Er=t;var r=vn;t=wn;var i=32-Kt(r)-1;r&=~(1<<i),n+=1;var s=32-Kt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,vn=1<<32-Kt(e)+i|n<<i|r,wn=s+t}else vn=1<<s|n<<i|r,wn=t}function Eh(t){t.return!==null&&(pr(t,1),Tg(t,1,0))}function Th(t){for(;t===xo;)xo=Yr[--Qr],Yr[Qr]=null,ko=Yr[--Qr],Yr[Qr]=null;for(;t===Er;)Er=Et[--Tt],Et[Tt]=null,wn=Et[--Tt],Et[Tt]=null,vn=Et[--Tt],Et[Tt]=null}var xt=null,wt=null,pe=!1,Ut=null;function Mg(t,e){var n=Nt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xt=t,wt=qn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xt=t,wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Er!==null?{id:vn,overflow:wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xt=t,wt=null,!0):!1;default:return!1}}function Qu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ju(t){if(pe){var e=wt;if(e){var n=e;if(!yd(t,e)){if(Qu(t))throw Error(T(418));e=qn(n.nextSibling);var r=xt;e&&yd(t,e)?Mg(r,n):(t.flags=t.flags&-4097|2,pe=!1,xt=t)}}else{if(Qu(t))throw Error(T(418));t.flags=t.flags&-4097|2,pe=!1,xt=t}}}function vd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xt=t}function yl(t){if(t!==xt)return!1;if(!pe)return vd(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ku(t.type,t.memoizedProps)),e&&(e=wt)){if(Qu(t))throw Ng(),Error(T(418));for(;e;)Mg(t,e),e=qn(e.nextSibling)}if(vd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wt=qn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wt=null}}else wt=xt?qn(t.stateNode.nextSibling):null;return!0}function Ng(){for(var t=wt;t;)t=qn(t.nextSibling)}function mi(){wt=xt=null,pe=!1}function Mh(t){Ut===null?Ut=[t]:Ut.push(t)}var gx=Mn.ReactCurrentBatchConfig;function Wi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function vl(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wd(t){var e=t._init;return e(t._payload)}function Dg(t){function e(p,y){if(t){var v=p.deletions;v===null?(p.deletions=[y],p.flags|=16):v.push(y)}}function n(p,y){if(!t)return null;for(;y!==null;)e(p,y),y=y.sibling;return null}function r(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function i(p,y){return p=Xn(p,y),p.index=0,p.sibling=null,p}function s(p,y,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<y?(p.flags|=2,y):v):(p.flags|=2,y)):(p.flags|=1048576,y)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,y,v,S){return y===null||y.tag!==6?(y=Ja(v,p.mode,S),y.return=p,y):(y=i(y,v),y.return=p,y)}function a(p,y,v,S){var C=v.type;return C===Vr?c(p,y,v.props.children,S,v.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Pn&&wd(C)===y.type)?(S=i(y,v.props),S.ref=Wi(p,y,v),S.return=p,S):(S=eo(v.type,v.key,v.props,null,p.mode,S),S.ref=Wi(p,y,v),S.return=p,S)}function u(p,y,v,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Xa(v,p.mode,S),y.return=p,y):(y=i(y,v.children||[]),y.return=p,y)}function c(p,y,v,S,C){return y===null||y.tag!==7?(y=Cr(v,p.mode,S,C),y.return=p,y):(y=i(y,v),y.return=p,y)}function h(p,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ja(""+y,p.mode,v),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ol:return v=eo(y.type,y.key,y.props,null,p.mode,v),v.ref=Wi(p,null,y),v.return=p,v;case Wr:return y=Xa(y,p.mode,v),y.return=p,y;case Pn:var S=y._init;return h(p,S(y._payload),v)}if(Ji(y)||ji(y))return y=Cr(y,p.mode,v,null),y.return=p,y;vl(p,y)}return null}function f(p,y,v,S){var C=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:o(p,y,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ol:return v.key===C?a(p,y,v,S):null;case Wr:return v.key===C?u(p,y,v,S):null;case Pn:return C=v._init,f(p,y,C(v._payload),S)}if(Ji(v)||ji(v))return C!==null?null:c(p,y,v,S,null);vl(p,v)}return null}function d(p,y,v,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(v)||null,o(y,p,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ol:return p=p.get(S.key===null?v:S.key)||null,a(y,p,S,C);case Wr:return p=p.get(S.key===null?v:S.key)||null,u(y,p,S,C);case Pn:var A=S._init;return d(p,y,v,A(S._payload),C)}if(Ji(S)||ji(S))return p=p.get(v)||null,c(y,p,S,C,null);vl(y,S)}return null}function g(p,y,v,S){for(var C=null,A=null,b=y,D=y=0,z=null;b!==null&&D<v.length;D++){b.index>D?(z=b,b=null):z=b.sibling;var B=f(p,b,v[D],S);if(B===null){b===null&&(b=z);break}t&&b&&B.alternate===null&&e(p,b),y=s(B,y,D),A===null?C=B:A.sibling=B,A=B,b=z}if(D===v.length)return n(p,b),pe&&pr(p,D),C;if(b===null){for(;D<v.length;D++)b=h(p,v[D],S),b!==null&&(y=s(b,y,D),A===null?C=b:A.sibling=b,A=b);return pe&&pr(p,D),C}for(b=r(p,b);D<v.length;D++)z=d(b,p,D,v[D],S),z!==null&&(t&&z.alternate!==null&&b.delete(z.key===null?D:z.key),y=s(z,y,D),A===null?C=z:A.sibling=z,A=z);return t&&b.forEach(function(V){return e(p,V)}),pe&&pr(p,D),C}function w(p,y,v,S){var C=ji(v);if(typeof C!="function")throw Error(T(150));if(v=C.call(v),v==null)throw Error(T(151));for(var A=C=null,b=y,D=y=0,z=null,B=v.next();b!==null&&!B.done;D++,B=v.next()){b.index>D?(z=b,b=null):z=b.sibling;var V=f(p,b,B.value,S);if(V===null){b===null&&(b=z);break}t&&b&&V.alternate===null&&e(p,b),y=s(V,y,D),A===null?C=V:A.sibling=V,A=V,b=z}if(B.done)return n(p,b),pe&&pr(p,D),C;if(b===null){for(;!B.done;D++,B=v.next())B=h(p,B.value,S),B!==null&&(y=s(B,y,D),A===null?C=B:A.sibling=B,A=B);return pe&&pr(p,D),C}for(b=r(p,b);!B.done;D++,B=v.next())B=d(b,p,D,B.value,S),B!==null&&(t&&B.alternate!==null&&b.delete(B.key===null?D:B.key),y=s(B,y,D),A===null?C=B:A.sibling=B,A=B);return t&&b.forEach(function(H){return e(p,H)}),pe&&pr(p,D),C}function x(p,y,v,S){if(typeof v=="object"&&v!==null&&v.type===Vr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ol:e:{for(var C=v.key,A=y;A!==null;){if(A.key===C){if(C=v.type,C===Vr){if(A.tag===7){n(p,A.sibling),y=i(A,v.props.children),y.return=p,p=y;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Pn&&wd(C)===A.type){n(p,A.sibling),y=i(A,v.props),y.ref=Wi(p,A,v),y.return=p,p=y;break e}n(p,A);break}else e(p,A);A=A.sibling}v.type===Vr?(y=Cr(v.props.children,p.mode,S,v.key),y.return=p,p=y):(S=eo(v.type,v.key,v.props,null,p.mode,S),S.ref=Wi(p,y,v),S.return=p,p=S)}return l(p);case Wr:e:{for(A=v.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(p,y.sibling),y=i(y,v.children||[]),y.return=p,p=y;break e}else{n(p,y);break}else e(p,y);y=y.sibling}y=Xa(v,p.mode,S),y.return=p,p=y}return l(p);case Pn:return A=v._init,x(p,y,A(v._payload),S)}if(Ji(v))return g(p,y,v,S);if(ji(v))return w(p,y,v,S);vl(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(p,y.sibling),y=i(y,v),y.return=p,p=y):(n(p,y),y=Ja(v,p.mode,S),y.return=p,p=y),l(p)):n(p,y)}return x}var gi=Dg(!0),Og=Dg(!1),So=ur(null),Co=null,Jr=null,Nh=null;function Dh(){Nh=Jr=Co=null}function Oh(t){var e=So.current;de(So),t._currentValue=e}function Xu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oi(t,e){Co=t,Nh=Jr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ot=!0),t.firstContext=null)}function Rt(t){var e=t._currentValue;if(Nh!==t)if(t={context:t,memoizedValue:e,next:null},Jr===null){if(Co===null)throw Error(T(308));Jr=t,Co.dependencies={lanes:0,firstContext:t}}else Jr=Jr.next=t;return e}var vr=null;function Ph(t){vr===null?vr=[t]:vr.push(t)}function Pg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ph(e)):(n.next=i.next,i.next=n),e.interleaved=n,An(t,r)}function An(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ln=!1;function Lh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,An(t,n)}return i=r.interleaved,i===null?(e.next=e,Ph(r)):(e.next=i.next,i.next=e),r.interleaved=e,An(t,n)}function ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}function xd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bo(t,e,n,r){var i=t.updateQueue;Ln=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==l&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;l=0,c=u=a=null,o=s;do{var f=o.lane,d=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,w=o;switch(f=e,d=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){h=g.call(d,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,f=typeof g=="function"?g.call(d,h,f):g,f==null)break e;h=xe({},h,f);break e;case 2:Ln=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=d,a=h):c=c.next=d,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=h),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Mr|=l,t.lanes=l,t.memoizedState=h}}function kd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(T(191,i));i.call(r)}}}var Js={},dn=ur(Js),Ds=ur(Js),Os=ur(Js);function wr(t){if(t===Js)throw Error(T(174));return t}function Rh(t,e){switch(ue(Os,e),ue(Ds,t),ue(dn,Js),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pu(e,t)}de(dn),ue(dn,e)}function yi(){de(dn),de(Ds),de(Os)}function Rg(t){wr(Os.current);var e=wr(dn.current),n=Pu(e,t.type);e!==n&&(ue(Ds,t),ue(dn,n))}function Ih(t){Ds.current===t&&(de(dn),de(Ds))}var ye=ur(0);function Ao(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $a=[];function Bh(){for(var t=0;t<$a.length;t++)$a[t]._workInProgressVersionPrimary=null;$a.length=0}var Yl=Mn.ReactCurrentDispatcher,Ka=Mn.ReactCurrentBatchConfig,Tr=0,we=null,Me=null,Oe=null,Eo=!1,as=!1,Ps=0,yx=0;function Ue(){throw Error(T(321))}function jh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qt(t[n],e[n]))return!1;return!0}function Fh(t,e,n,r,i,s){if(Tr=s,we=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?kx:Sx,t=n(r,i),as){s=0;do{if(as=!1,Ps=0,25<=s)throw Error(T(301));s+=1,Oe=Me=null,e.updateQueue=null,Yl.current=Cx,t=n(r,i)}while(as)}if(Yl.current=To,e=Me!==null&&Me.next!==null,Tr=0,Oe=Me=we=null,Eo=!1,e)throw Error(T(300));return t}function _h(){var t=Ps!==0;return Ps=0,t}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?we.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function It(){if(Me===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=Oe===null?we.memoizedState:Oe.next;if(e!==null)Oe=e,Me=t;else{if(t===null)throw Error(T(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Oe===null?we.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function Ls(t,e){return typeof e=="function"?e(t):e}function Ga(t){var e=It(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=Me,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var c=u.lane;if((Tr&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=h,l=r):a=a.next=h,we.lanes|=c,Mr|=c}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,qt(r,e.memoizedState)||(ot=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,we.lanes|=s,Mr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qa(t){var e=It(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);qt(s,e.memoizedState)||(ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ig(){}function Bg(t,e){var n=we,r=It(),i=e(),s=!qt(r.memoizedState,i);if(s&&(r.memoizedState=i,ot=!0),r=r.queue,zh(_g.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,Rs(9,Fg.bind(null,n,r,i,e),void 0,null),Le===null)throw Error(T(349));Tr&30||jg(n,e,i)}return i}function jg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fg(t,e,n,r){e.value=n,e.getSnapshot=r,zg(e)&&Hg(t)}function _g(t,e,n){return n(function(){zg(e)&&Hg(t)})}function zg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qt(t,n)}catch{return!0}}function Hg(t){var e=An(t,1);e!==null&&Gt(e,t,1,-1)}function Sd(t){var e=ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:t},e.queue=t,t=t.dispatch=xx.bind(null,we,t),[e.memoizedState,t]}function Rs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Wg(){return It().memoizedState}function Ql(t,e,n,r){var i=ln();we.flags|=t,i.memoizedState=Rs(1|e,n,void 0,r===void 0?null:r)}function ia(t,e,n,r){var i=It();r=r===void 0?null:r;var s=void 0;if(Me!==null){var l=Me.memoizedState;if(s=l.destroy,r!==null&&jh(r,l.deps)){i.memoizedState=Rs(e,n,s,r);return}}we.flags|=t,i.memoizedState=Rs(1|e,n,s,r)}function Cd(t,e){return Ql(8390656,8,t,e)}function zh(t,e){return ia(2048,8,t,e)}function Vg(t,e){return ia(4,2,t,e)}function Ug(t,e){return ia(4,4,t,e)}function $g(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kg(t,e,n){return n=n!=null?n.concat([t]):null,ia(4,4,$g.bind(null,e,t),n)}function Hh(){}function Gg(t,e){var n=It();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qg(t,e){var n=It();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Yg(t,e,n){return Tr&21?(qt(n,e)||(n=eg(),we.lanes|=n,Mr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ot=!0),t.memoizedState=n)}function vx(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=Ka.transition;Ka.transition={};try{t(!1),e()}finally{le=n,Ka.transition=r}}function Qg(){return It().memoizedState}function wx(t,e,n){var r=Jn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jg(t))Xg(e,n);else if(n=Pg(t,e,n,r),n!==null){var i=tt();Gt(n,t,r,i),Zg(n,e,r)}}function xx(t,e,n){var r=Jn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jg(t))Xg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,qt(o,l)){var a=e.interleaved;a===null?(i.next=i,Ph(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Pg(t,e,i,r),n!==null&&(i=tt(),Gt(n,t,r,i),Zg(n,e,r))}}function Jg(t){var e=t.alternate;return t===we||e!==null&&e===we}function Xg(t,e){as=Eo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Zg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}var To={readContext:Rt,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},kx={readContext:Rt,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:Rt,useEffect:Cd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ql(4194308,4,$g.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ql(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ql(4,2,t,e)},useMemo:function(t,e){var n=ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wx.bind(null,we,t),[r.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:Sd,useDebugValue:Hh,useDeferredValue:function(t){return ln().memoizedState=t},useTransition:function(){var t=Sd(!1),e=t[0];return t=vx.bind(null,t[1]),ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=we,i=ln();if(pe){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),Le===null)throw Error(T(349));Tr&30||jg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Cd(_g.bind(null,r,s,t),[t]),r.flags|=2048,Rs(9,Fg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ln(),e=Le.identifierPrefix;if(pe){var n=wn,r=vn;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ps++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sx={readContext:Rt,useCallback:Gg,useContext:Rt,useEffect:zh,useImperativeHandle:Kg,useInsertionEffect:Vg,useLayoutEffect:Ug,useMemo:qg,useReducer:Ga,useRef:Wg,useState:function(){return Ga(Ls)},useDebugValue:Hh,useDeferredValue:function(t){var e=It();return Yg(e,Me.memoizedState,t)},useTransition:function(){var t=Ga(Ls)[0],e=It().memoizedState;return[t,e]},useMutableSource:Ig,useSyncExternalStore:Bg,useId:Qg,unstable_isNewReconciler:!1},Cx={readContext:Rt,useCallback:Gg,useContext:Rt,useEffect:zh,useImperativeHandle:Kg,useInsertionEffect:Vg,useLayoutEffect:Ug,useMemo:qg,useReducer:qa,useRef:Wg,useState:function(){return qa(Ls)},useDebugValue:Hh,useDeferredValue:function(t){var e=It();return Me===null?e.memoizedState=t:Yg(e,Me.memoizedState,t)},useTransition:function(){var t=qa(Ls)[0],e=It().memoizedState;return[t,e]},useMutableSource:Ig,useSyncExternalStore:Bg,useId:Qg,unstable_isNewReconciler:!1};function Wt(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sa={isMounted:function(t){return(t=t._reactInternals)?jr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tt(),i=Jn(t),s=xn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Yn(t,s,i),e!==null&&(Gt(e,t,i,r),ql(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tt(),i=Jn(t),s=xn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yn(t,s,i),e!==null&&(Gt(e,t,i,r),ql(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tt(),r=Jn(t),i=xn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yn(t,i,r),e!==null&&(Gt(e,t,r,n),ql(e,t,r))}};function bd(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!Es(n,r)||!Es(i,s):!0}function e0(t,e,n){var r=!1,i=tr,s=e.contextType;return typeof s=="object"&&s!==null?s=Rt(s):(i=ut(e)?Ar:Qe.current,r=e.contextTypes,s=(r=r!=null)?pi(t,i):tr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ad(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sa.enqueueReplaceState(e,e.state,null)}function ec(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Lh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rt(s):(s=ut(e)?Ar:Qe.current,i.context=pi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sa.enqueueReplaceState(i,i.state,null),bo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function vi(t,e){try{var n="",r=e;do n+=J1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ya(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bx=typeof WeakMap=="function"?WeakMap:Map;function t0(t,e,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){No||(No=!0,hc=r),tc(t,e)},n}function n0(t,e,n){n=xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tc(t,e),typeof r!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Ed(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Fx.bind(null,t,e,n),e.then(t,t))}function Td(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Md(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xn(-1,1),e.tag=2,Yn(n,e,1))),n.lanes|=1),t)}var Ax=Mn.ReactCurrentOwner,ot=!1;function et(t,e,n,r){e.child=t===null?Og(e,null,n,r):gi(e,t.child,n,r)}function Nd(t,e,n,r,i){n=n.render;var s=e.ref;return oi(e,i),r=Fh(t,e,n,r,s,i),n=_h(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(pe&&n&&Eh(e),e.flags|=1,et(t,e,r,i),e.child)}function Dd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Yh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,r0(t,e,s,r,i)):(t=eo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:Es,n(l,r)&&t.ref===e.ref)return En(t,e,i)}return e.flags|=1,t=Xn(s,r),t.ref=e.ref,t.return=e,e.child=t}function r0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Es(s,r)&&t.ref===e.ref)if(ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ot=!0);else return e.lanes=t.lanes,En(t,e,i)}return nc(t,e,n,r,i)}function i0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(Zr,gt),gt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(Zr,gt),gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(Zr,gt),gt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ue(Zr,gt),gt|=r;return et(t,e,i,n),e.child}function s0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nc(t,e,n,r,i){var s=ut(n)?Ar:Qe.current;return s=pi(e,s),oi(e,i),n=Fh(t,e,n,r,s,i),r=_h(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(pe&&r&&Eh(e),e.flags|=1,et(t,e,n,i),e.child)}function Od(t,e,n,r,i){if(ut(n)){var s=!0;wo(e)}else s=!1;if(oi(e,i),e.stateNode===null)Jl(t,e),e0(e,n,r),ec(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Rt(u):(u=ut(n)?Ar:Qe.current,u=pi(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&Ad(e,l,r,u),Ln=!1;var f=e.memoizedState;l.state=f,bo(e,r,l,i),a=e.memoizedState,o!==r||f!==a||at.current||Ln?(typeof c=="function"&&(Zu(e,n,c,r),a=e.memoizedState),(o=Ln||bd(e,n,o,r,f,a,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Lg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Wt(e.type,o),l.props=u,h=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Rt(a):(a=ut(n)?Ar:Qe.current,a=pi(e,a));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==a)&&Ad(e,l,r,a),Ln=!1,f=e.memoizedState,l.state=f,bo(e,r,l,i);var g=e.memoizedState;o!==h||f!==g||at.current||Ln?(typeof d=="function"&&(Zu(e,n,d,r),g=e.memoizedState),(u=Ln||bd(e,n,u,r,f,g,a)||!1)?(c||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,g,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,g,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),l.props=r,l.state=g,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return rc(t,e,n,r,s,i)}function rc(t,e,n,r,i,s){s0(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&gd(e,n,!1),En(t,e,s);r=e.stateNode,Ax.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=gi(e,t.child,null,s),e.child=gi(e,null,o,s)):et(t,e,o,s),e.memoizedState=r.state,i&&gd(e,n,!0),e.child}function l0(t){var e=t.stateNode;e.pendingContext?md(t,e.pendingContext,e.pendingContext!==e.context):e.context&&md(t,e.context,!1),Rh(t,e.containerInfo)}function Pd(t,e,n,r,i){return mi(),Mh(i),e.flags|=256,et(t,e,n,r),e.child}var ic={dehydrated:null,treeContext:null,retryLane:0};function sc(t){return{baseLanes:t,cachePool:null,transitions:null}}function o0(t,e,n){var r=e.pendingProps,i=ye.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(ye,i&1),t===null)return Ju(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=aa(l,r,0,null),t=Cr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sc(n),e.memoizedState=ic,t):Wh(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Ex(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Xn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Xn(o,s):(s=Cr(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?sc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=ic,r}return s=t.child,t=s.sibling,r=Xn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wh(t,e){return e=aa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wl(t,e,n,r){return r!==null&&Mh(r),gi(e,t.child,null,n),t=Wh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ex(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=Ya(Error(T(422))),wl(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=aa({mode:"visible",children:r.children},i,0,null),s=Cr(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&gi(e,t.child,null,l),e.child.memoizedState=sc(l),e.memoizedState=ic,s);if(!(e.mode&1))return wl(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(T(419)),r=Ya(s,r,void 0),wl(t,e,l,r)}if(o=(l&t.childLanes)!==0,ot||o){if(r=Le,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,An(t,i),Gt(r,t,i,-1))}return qh(),r=Ya(Error(T(421))),wl(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=_x.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,wt=qn(i.nextSibling),xt=e,pe=!0,Ut=null,t!==null&&(Et[Tt++]=vn,Et[Tt++]=wn,Et[Tt++]=Er,vn=t.id,wn=t.overflow,Er=e),e=Wh(e,r.children),e.flags|=4096,e)}function Ld(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xu(t.return,e,n)}function Qa(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function a0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(et(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ld(t,n,e);else if(t.tag===19)Ld(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ao(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qa(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ao(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qa(e,!0,n,null,s);break;case"together":Qa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=Xn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Tx(t,e,n){switch(e.tag){case 3:l0(e),mi();break;case 5:Rg(e);break;case 1:ut(e.type)&&wo(e);break;case 4:Rh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ue(So,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?o0(t,e,n):(ue(ye,ye.current&1),t=En(t,e,n),t!==null?t.sibling:null);ue(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return a0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,i0(t,e,n)}return En(t,e,n)}var u0,lc,c0,h0;u0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lc=function(){};c0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,wr(dn.current);var s=null;switch(n){case"input":i=Mu(t,i),r=Mu(t,r),s=[];break;case"select":i=xe({},i,{value:void 0}),r=xe({},r,{value:void 0}),s=[];break;case"textarea":i=Ou(t,i),r=Ou(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yo)}Lu(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ws.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ws.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&he("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};h0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vi(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $e(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Mx(t,e,n){var r=e.pendingProps;switch(Th(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(e),null;case 1:return ut(e.type)&&vo(),$e(e),null;case 3:return r=e.stateNode,yi(),de(at),de(Qe),Bh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ut!==null&&(pc(Ut),Ut=null))),lc(t,e),$e(e),null;case 5:Ih(e);var i=wr(Os.current);if(n=e.type,t!==null&&e.stateNode!=null)c0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(T(166));return $e(e),null}if(t=wr(dn.current),yl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[on]=e,r[Ns]=s,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(i=0;i<Zi.length;i++)he(Zi[i],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Wf(r,s),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},he("invalid",r);break;case"textarea":Uf(r,s),he("invalid",r)}Lu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&gl(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&gl(r.textContent,o,t),i=["children",""+o]):ws.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&he("scroll",r)}switch(n){case"input":al(r),Vf(r,s,!0);break;case"textarea":al(r),$f(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_m(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[on]=e,t[Ns]=r,u0(t,e,!1,!1),e.stateNode=t;e:{switch(l=Ru(n,r),n){case"dialog":he("cancel",t),he("close",t),i=r;break;case"iframe":case"object":case"embed":he("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zi.length;i++)he(Zi[i],t);i=r;break;case"source":he("error",t),i=r;break;case"img":case"image":case"link":he("error",t),he("load",t),i=r;break;case"details":he("toggle",t),i=r;break;case"input":Wf(t,r),i=Mu(t,r),he("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=xe({},r,{value:void 0}),he("invalid",t);break;case"textarea":Uf(t,r),i=Ou(t,r),he("invalid",t);break;default:i=r}Lu(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?Wm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&zm(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&xs(t,a):typeof a=="number"&&xs(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ws.hasOwnProperty(s)?a!=null&&s==="onScroll"&&he("scroll",t):a!=null&&fh(t,s,a,l))}switch(n){case"input":al(t),Vf(t,r,!1);break;case"textarea":al(t),$f(t);break;case"option":r.value!=null&&t.setAttribute("value",""+er(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ri(t,!!r.multiple,s,!1):r.defaultValue!=null&&ri(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $e(e),null;case 6:if(t&&e.stateNode!=null)h0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(T(166));if(n=wr(Os.current),wr(dn.current),yl(e)){if(r=e.stateNode,n=e.memoizedProps,r[on]=e,(s=r.nodeValue!==n)&&(t=xt,t!==null))switch(t.tag){case 3:gl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[on]=e,e.stateNode=r}return $e(e),null;case 13:if(de(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&wt!==null&&e.mode&1&&!(e.flags&128))Ng(),mi(),e.flags|=98560,s=!1;else if(s=yl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(T(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(T(317));s[on]=e}else mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$e(e),s=!1}else Ut!==null&&(pc(Ut),Ut=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?Ne===0&&(Ne=3):qh())),e.updateQueue!==null&&(e.flags|=4),$e(e),null);case 4:return yi(),lc(t,e),t===null&&Ts(e.stateNode.containerInfo),$e(e),null;case 10:return Oh(e.type._context),$e(e),null;case 17:return ut(e.type)&&vo(),$e(e),null;case 19:if(de(ye),s=e.memoizedState,s===null)return $e(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Vi(s,!1);else{if(Ne!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Ao(t),l!==null){for(e.flags|=128,Vi(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(ye,ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ae()>wi&&(e.flags|=128,r=!0,Vi(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ao(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!pe)return $e(e),null}else 2*Ae()-s.renderingStartTime>wi&&n!==1073741824&&(e.flags|=128,r=!0,Vi(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ae(),e.sibling=null,n=ye.current,ue(ye,r?n&1|2:n&1),e):($e(e),null);case 22:case 23:return Gh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gt&1073741824&&($e(e),e.subtreeFlags&6&&(e.flags|=8192)):$e(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function Nx(t,e){switch(Th(e),e.tag){case 1:return ut(e.type)&&vo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yi(),de(at),de(Qe),Bh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ih(e),null;case 13:if(de(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(ye),null;case 4:return yi(),null;case 10:return Oh(e.type._context),null;case 22:case 23:return Gh(),null;case 24:return null;default:return null}}var xl=!1,Ge=!1,Dx=typeof WeakSet=="function"?WeakSet:Set,I=null;function Xr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function oc(t,e,n){try{n()}catch(r){ke(t,e,r)}}var Rd=!1;function Ox(t,e){if(Uu=po,t=gg(),Ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(o=l+i),h!==s||r!==0&&h.nodeType!==3||(a=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++c===r&&(a=l),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for($u={focusedElem:t,selectionRange:n},po=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,x=g.memoizedState,p=e.stateNode,y=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:Wt(e.type,w),x);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(S){ke(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return g=Rd,Rd=!1,g}function us(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&oc(e,n,s)}i=i.next}while(i!==r)}}function la(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ac(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function f0(t){var e=t.alternate;e!==null&&(t.alternate=null,f0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[on],delete e[Ns],delete e[qu],delete e[dx],delete e[px])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function d0(t){return t.tag===5||t.tag===3||t.tag===4}function Id(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yo));else if(r!==4&&(t=t.child,t!==null))for(uc(t,e,n),t=t.sibling;t!==null;)uc(t,e,n),t=t.sibling}function cc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(cc(t,e,n),t=t.sibling;t!==null;)cc(t,e,n),t=t.sibling}var Re=null,Vt=!1;function Dn(t,e,n){for(n=n.child;n!==null;)p0(t,e,n),n=n.sibling}function p0(t,e,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Xo,n)}catch{}switch(n.tag){case 5:Ge||Xr(n,e);case 6:var r=Re,i=Vt;Re=null,Dn(t,e,n),Re=r,Vt=i,Re!==null&&(Vt?(t=Re,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Re.removeChild(n.stateNode));break;case 18:Re!==null&&(Vt?(t=Re,n=n.stateNode,t.nodeType===8?Va(t.parentNode,n):t.nodeType===1&&Va(t,n),bs(t)):Va(Re,n.stateNode));break;case 4:r=Re,i=Vt,Re=n.stateNode.containerInfo,Vt=!0,Dn(t,e,n),Re=r,Vt=i;break;case 0:case 11:case 14:case 15:if(!Ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&oc(n,e,l),i=i.next}while(i!==r)}Dn(t,e,n);break;case 1:if(!Ge&&(Xr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ke(n,e,o)}Dn(t,e,n);break;case 21:Dn(t,e,n);break;case 22:n.mode&1?(Ge=(r=Ge)||n.memoizedState!==null,Dn(t,e,n),Ge=r):Dn(t,e,n);break;default:Dn(t,e,n)}}function Bd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Dx),e.forEach(function(r){var i=zx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Re=o.stateNode,Vt=!1;break e;case 3:Re=o.stateNode.containerInfo,Vt=!0;break e;case 4:Re=o.stateNode.containerInfo,Vt=!0;break e}o=o.return}if(Re===null)throw Error(T(160));p0(s,l,i),Re=null,Vt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ke(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)m0(e,t),e=e.sibling}function m0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_t(e,t),en(t),r&4){try{us(3,t,t.return),la(3,t)}catch(w){ke(t,t.return,w)}try{us(5,t,t.return)}catch(w){ke(t,t.return,w)}}break;case 1:_t(e,t),en(t),r&512&&n!==null&&Xr(n,n.return);break;case 5:if(_t(e,t),en(t),r&512&&n!==null&&Xr(n,n.return),t.flags&32){var i=t.stateNode;try{xs(i,"")}catch(w){ke(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&jm(i,s),Ru(o,l);var u=Ru(o,s);for(l=0;l<a.length;l+=2){var c=a[l],h=a[l+1];c==="style"?Wm(i,h):c==="dangerouslySetInnerHTML"?zm(i,h):c==="children"?xs(i,h):fh(i,c,h,u)}switch(o){case"input":Nu(i,s);break;case"textarea":Fm(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?ri(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?ri(i,!!s.multiple,s.defaultValue,!0):ri(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ns]=s}catch(w){ke(t,t.return,w)}}break;case 6:if(_t(e,t),en(t),r&4){if(t.stateNode===null)throw Error(T(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){ke(t,t.return,w)}}break;case 3:if(_t(e,t),en(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bs(e.containerInfo)}catch(w){ke(t,t.return,w)}break;case 4:_t(e,t),en(t);break;case 13:_t(e,t),en(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($h=Ae())),r&4&&Bd(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ge=(u=Ge)||c,_t(e,t),Ge=u):_t(e,t),en(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(I=t,c=t.child;c!==null;){for(h=I=c;I!==null;){switch(f=I,d=f.child,f.tag){case 0:case 11:case 14:case 15:us(4,f,f.return);break;case 1:Xr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(w){ke(r,n,w)}}break;case 5:Xr(f,f.return);break;case 22:if(f.memoizedState!==null){Fd(h);continue}}d!==null?(d.return=f,I=d):Fd(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=Hm("display",l))}catch(w){ke(t,t.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){ke(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_t(e,t),en(t),r&4&&Bd(t);break;case 21:break;default:_t(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(d0(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xs(i,""),r.flags&=-33);var s=Id(t);cc(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=Id(t);uc(t,o,l);break;default:throw Error(T(161))}}catch(a){ke(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Px(t,e,n){I=t,g0(t)}function g0(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||xl;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Ge;o=xl;var u=Ge;if(xl=l,(Ge=a)&&!u)for(I=i;I!==null;)l=I,a=l.child,l.tag===22&&l.memoizedState!==null?_d(i):a!==null?(a.return=l,I=a):_d(i);for(;s!==null;)I=s,g0(s),s=s.sibling;I=i,xl=o,Ge=u}jd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):jd(t)}}function jd(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ge||la(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ge)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Wt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kd(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&bs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Ge||e.flags&512&&ac(e)}catch(f){ke(e,e.return,f)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function Fd(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function _d(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{la(4,e)}catch(a){ke(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ke(e,i,a)}}var s=e.return;try{ac(e)}catch(a){ke(e,s,a)}break;case 5:var l=e.return;try{ac(e)}catch(a){ke(e,l,a)}}}catch(a){ke(e,e.return,a)}if(e===t){I=null;break}var o=e.sibling;if(o!==null){o.return=e.return,I=o;break}I=e.return}}var Lx=Math.ceil,Mo=Mn.ReactCurrentDispatcher,Vh=Mn.ReactCurrentOwner,Dt=Mn.ReactCurrentBatchConfig,ee=0,Le=null,Te=null,He=0,gt=0,Zr=ur(0),Ne=0,Is=null,Mr=0,oa=0,Uh=0,cs=null,st=null,$h=0,wi=1/0,mn=null,No=!1,hc=null,Qn=null,kl=!1,Hn=null,Do=0,hs=0,fc=null,Xl=-1,Zl=0;function tt(){return ee&6?Ae():Xl!==-1?Xl:Xl=Ae()}function Jn(t){return t.mode&1?ee&2&&He!==0?He&-He:gx.transition!==null?(Zl===0&&(Zl=eg()),Zl):(t=le,t!==0||(t=window.event,t=t===void 0?16:og(t.type)),t):1}function Gt(t,e,n,r){if(50<hs)throw hs=0,fc=null,Error(T(185));qs(t,n,r),(!(ee&2)||t!==Le)&&(t===Le&&(!(ee&2)&&(oa|=n),Ne===4&&Fn(t,He)),ct(t,r),n===1&&ee===0&&!(e.mode&1)&&(wi=Ae()+500,ra&&cr()))}function ct(t,e){var n=t.callbackNode;gw(t,e);var r=fo(t,t===Le?He:0);if(r===0)n!==null&&qf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qf(n),e===1)t.tag===0?mx(zd.bind(null,t)):Eg(zd.bind(null,t)),hx(function(){!(ee&6)&&cr()}),n=null;else{switch(tg(r)){case 1:n=yh;break;case 4:n=Xm;break;case 16:n=ho;break;case 536870912:n=Zm;break;default:n=ho}n=b0(n,y0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function y0(t,e){if(Xl=-1,Zl=0,ee&6)throw Error(T(327));var n=t.callbackNode;if(ai()&&t.callbackNode!==n)return null;var r=fo(t,t===Le?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Oo(t,r);else{e=r;var i=ee;ee|=2;var s=w0();(Le!==t||He!==e)&&(mn=null,wi=Ae()+500,Sr(t,e));do try{Bx();break}catch(o){v0(t,o)}while(!0);Dh(),Mo.current=s,ee=i,Te!==null?e=0:(Le=null,He=0,e=Ne)}if(e!==0){if(e===2&&(i=_u(t),i!==0&&(r=i,e=dc(t,i))),e===1)throw n=Is,Sr(t,0),Fn(t,r),ct(t,Ae()),n;if(e===6)Fn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Rx(i)&&(e=Oo(t,r),e===2&&(s=_u(t),s!==0&&(r=s,e=dc(t,s))),e===1))throw n=Is,Sr(t,0),Fn(t,r),ct(t,Ae()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(T(345));case 2:mr(t,st,mn);break;case 3:if(Fn(t,r),(r&130023424)===r&&(e=$h+500-Ae(),10<e)){if(fo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gu(mr.bind(null,t,st,mn),e);break}mr(t,st,mn);break;case 4:if(Fn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Kt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lx(r/1960))-r,10<r){t.timeoutHandle=Gu(mr.bind(null,t,st,mn),r);break}mr(t,st,mn);break;case 5:mr(t,st,mn);break;default:throw Error(T(329))}}}return ct(t,Ae()),t.callbackNode===n?y0.bind(null,t):null}function dc(t,e){var n=cs;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=Oo(t,e),t!==2&&(e=st,st=n,e!==null&&pc(e)),t}function pc(t){st===null?st=t:st.push.apply(st,t)}function Rx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!qt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fn(t,e){for(e&=~Uh,e&=~oa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kt(e),r=1<<n;t[n]=-1,e&=~r}}function zd(t){if(ee&6)throw Error(T(327));ai();var e=fo(t,0);if(!(e&1))return ct(t,Ae()),null;var n=Oo(t,e);if(t.tag!==0&&n===2){var r=_u(t);r!==0&&(e=r,n=dc(t,r))}if(n===1)throw n=Is,Sr(t,0),Fn(t,e),ct(t,Ae()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mr(t,st,mn),ct(t,Ae()),null}function Kh(t,e){var n=ee;ee|=1;try{return t(e)}finally{ee=n,ee===0&&(wi=Ae()+500,ra&&cr())}}function Nr(t){Hn!==null&&Hn.tag===0&&!(ee&6)&&ai();var e=ee;ee|=1;var n=Dt.transition,r=le;try{if(Dt.transition=null,le=1,t)return t()}finally{le=r,Dt.transition=n,ee=e,!(ee&6)&&cr()}}function Gh(){gt=Zr.current,de(Zr)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cx(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(Th(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vo();break;case 3:yi(),de(at),de(Qe),Bh();break;case 5:Ih(r);break;case 4:yi();break;case 13:de(ye);break;case 19:de(ye);break;case 10:Oh(r.type._context);break;case 22:case 23:Gh()}n=n.return}if(Le=t,Te=t=Xn(t.current,null),He=gt=e,Ne=0,Is=null,Uh=oa=Mr=0,st=cs=null,vr!==null){for(e=0;e<vr.length;e++)if(n=vr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}vr=null}return t}function v0(t,e){do{var n=Te;try{if(Dh(),Yl.current=To,Eo){for(var r=we.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Eo=!1}if(Tr=0,Oe=Me=we=null,as=!1,Ps=0,Vh.current=null,n===null||n.return===null){Ne=1,Is=e,Te=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=He,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=Td(l);if(d!==null){d.flags&=-257,Md(d,l,o,s,e),d.mode&1&&Ed(s,u,e),e=d,a=u;var g=e.updateQueue;if(g===null){var w=new Set;w.add(a),e.updateQueue=w}else g.add(a);break e}else{if(!(e&1)){Ed(s,u,e),qh();break e}a=Error(T(426))}}else if(pe&&o.mode&1){var x=Td(l);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Md(x,l,o,s,e),Mh(vi(a,o));break e}}s=a=vi(a,o),Ne!==4&&(Ne=2),cs===null?cs=[s]:cs.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=t0(s,a,e);xd(s,p);break e;case 1:o=a;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Qn===null||!Qn.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=n0(s,o,e);xd(s,S);break e}}s=s.return}while(s!==null)}k0(n)}catch(C){e=C,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function w0(){var t=Mo.current;return Mo.current=To,t===null?To:t}function qh(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Le===null||!(Mr&268435455)&&!(oa&268435455)||Fn(Le,He)}function Oo(t,e){var n=ee;ee|=2;var r=w0();(Le!==t||He!==e)&&(mn=null,Sr(t,e));do try{Ix();break}catch(i){v0(t,i)}while(!0);if(Dh(),ee=n,Mo.current=r,Te!==null)throw Error(T(261));return Le=null,He=0,Ne}function Ix(){for(;Te!==null;)x0(Te)}function Bx(){for(;Te!==null&&!ow();)x0(Te)}function x0(t){var e=C0(t.alternate,t,gt);t.memoizedProps=t.pendingProps,e===null?k0(t):Te=e,Vh.current=null}function k0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Nx(n,e),n!==null){n.flags&=32767,Te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ne=6,Te=null;return}}else if(n=Mx(n,e,gt),n!==null){Te=n;return}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);Ne===0&&(Ne=5)}function mr(t,e,n){var r=le,i=Dt.transition;try{Dt.transition=null,le=1,jx(t,e,n,r)}finally{Dt.transition=i,le=r}return null}function jx(t,e,n,r){do ai();while(Hn!==null);if(ee&6)throw Error(T(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yw(t,s),t===Le&&(Te=Le=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||kl||(kl=!0,b0(ho,function(){return ai(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dt.transition,Dt.transition=null;var l=le;le=1;var o=ee;ee|=4,Vh.current=null,Ox(t,n),m0(n,t),rx($u),po=!!Uu,$u=Uu=null,t.current=n,Px(n),aw(),ee=o,le=l,Dt.transition=s}else t.current=n;if(kl&&(kl=!1,Hn=t,Do=i),s=t.pendingLanes,s===0&&(Qn=null),hw(n.stateNode),ct(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(No)throw No=!1,t=hc,hc=null,t;return Do&1&&t.tag!==0&&ai(),s=t.pendingLanes,s&1?t===fc?hs++:(hs=0,fc=t):hs=0,cr(),null}function ai(){if(Hn!==null){var t=tg(Do),e=Dt.transition,n=le;try{if(Dt.transition=null,le=16>t?16:t,Hn===null)var r=!1;else{if(t=Hn,Hn=null,Do=0,ee&6)throw Error(T(331));var i=ee;for(ee|=4,I=t.current;I!==null;){var s=I,l=s.child;if(I.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(I=u;I!==null;){var c=I;switch(c.tag){case 0:case 11:case 15:us(8,c,s)}var h=c.child;if(h!==null)h.return=c,I=h;else for(;I!==null;){c=I;var f=c.sibling,d=c.return;if(f0(c),c===u){I=null;break}if(f!==null){f.return=d,I=f;break}I=d}}}var g=s.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}I=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,I=l;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:us(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,I=p;break e}I=s.return}}var y=t.current;for(I=y;I!==null;){l=I;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,I=v;else e:for(l=y;I!==null;){if(o=I,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:la(9,o)}}catch(C){ke(o,o.return,C)}if(o===l){I=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,I=S;break e}I=o.return}}if(ee=i,cr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Xo,t)}catch{}r=!0}return r}finally{le=n,Dt.transition=e}}return!1}function Hd(t,e,n){e=vi(n,e),e=t0(t,e,1),t=Yn(t,e,1),e=tt(),t!==null&&(qs(t,1,e),ct(t,e))}function ke(t,e,n){if(t.tag===3)Hd(t,t,n);else for(;e!==null;){if(e.tag===3){Hd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qn===null||!Qn.has(r))){t=vi(n,t),t=n0(e,t,1),e=Yn(e,t,1),t=tt(),e!==null&&(qs(e,1,t),ct(e,t));break}}e=e.return}}function Fx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tt(),t.pingedLanes|=t.suspendedLanes&n,Le===t&&(He&n)===n&&(Ne===4||Ne===3&&(He&130023424)===He&&500>Ae()-$h?Sr(t,0):Uh|=n),ct(t,e)}function S0(t,e){e===0&&(t.mode&1?(e=hl,hl<<=1,!(hl&130023424)&&(hl=4194304)):e=1);var n=tt();t=An(t,e),t!==null&&(qs(t,e,n),ct(t,n))}function _x(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),S0(t,n)}function zx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(e),S0(t,n)}var C0;C0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||at.current)ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ot=!1,Tx(t,e,n);ot=!!(t.flags&131072)}else ot=!1,pe&&e.flags&1048576&&Tg(e,ko,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jl(t,e),t=e.pendingProps;var i=pi(e,Qe.current);oi(e,n),i=Fh(null,e,r,t,i,n);var s=_h();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ut(r)?(s=!0,wo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Lh(e),i.updater=sa,e.stateNode=i,i._reactInternals=e,ec(e,r,t,n),e=rc(null,e,r,!0,s,n)):(e.tag=0,pe&&s&&Eh(e),et(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Wx(r),t=Wt(r,t),i){case 0:e=nc(null,e,r,t,n);break e;case 1:e=Od(null,e,r,t,n);break e;case 11:e=Nd(null,e,r,t,n);break e;case 14:e=Dd(null,e,r,Wt(r.type,t),n);break e}throw Error(T(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wt(r,i),nc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wt(r,i),Od(t,e,r,i,n);case 3:e:{if(l0(e),t===null)throw Error(T(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Lg(t,e),bo(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=vi(Error(T(423)),e),e=Pd(t,e,r,n,i);break e}else if(r!==i){i=vi(Error(T(424)),e),e=Pd(t,e,r,n,i);break e}else for(wt=qn(e.stateNode.containerInfo.firstChild),xt=e,pe=!0,Ut=null,n=Og(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mi(),r===i){e=En(t,e,n);break e}et(t,e,r,n)}e=e.child}return e;case 5:return Rg(e),t===null&&Ju(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Ku(r,i)?l=null:s!==null&&Ku(r,s)&&(e.flags|=32),s0(t,e),et(t,e,l,n),e.child;case 6:return t===null&&Ju(e),null;case 13:return o0(t,e,n);case 4:return Rh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gi(e,null,r,n):et(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wt(r,i),Nd(t,e,r,i,n);case 7:return et(t,e,e.pendingProps,n),e.child;case 8:return et(t,e,e.pendingProps.children,n),e.child;case 12:return et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,ue(So,r._currentValue),r._currentValue=l,s!==null)if(qt(s.value,l)){if(s.children===i.children&&!at.current){e=En(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=xn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Xu(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(T(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Xu(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}et(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,oi(e,n),i=Rt(i),r=r(i),e.flags|=1,et(t,e,r,n),e.child;case 14:return r=e.type,i=Wt(r,e.pendingProps),i=Wt(r.type,i),Dd(t,e,r,i,n);case 15:return r0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wt(r,i),Jl(t,e),e.tag=1,ut(r)?(t=!0,wo(e)):t=!1,oi(e,n),e0(e,r,i),ec(e,r,i,n),rc(null,e,r,!0,t,n);case 19:return a0(t,e,n);case 22:return i0(t,e,n)}throw Error(T(156,e.tag))};function b0(t,e){return Jm(t,e)}function Hx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(t,e,n,r){return new Hx(t,e,n,r)}function Yh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wx(t){if(typeof t=="function")return Yh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ph)return 11;if(t===mh)return 14}return 2}function Xn(t,e){var n=t.alternate;return n===null?(n=Nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function eo(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")Yh(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Vr:return Cr(n.children,i,s,e);case dh:l=8,i|=8;break;case bu:return t=Nt(12,n,e,i|2),t.elementType=bu,t.lanes=s,t;case Au:return t=Nt(13,n,e,i),t.elementType=Au,t.lanes=s,t;case Eu:return t=Nt(19,n,e,i),t.elementType=Eu,t.lanes=s,t;case Rm:return aa(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pm:l=10;break e;case Lm:l=9;break e;case ph:l=11;break e;case mh:l=14;break e;case Pn:l=16,r=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=Nt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Cr(t,e,n,r){return t=Nt(7,t,r,e),t.lanes=n,t}function aa(t,e,n,r){return t=Nt(22,t,r,e),t.elementType=Rm,t.lanes=n,t.stateNode={isHidden:!1},t}function Ja(t,e,n){return t=Nt(6,t,null,e),t.lanes=n,t}function Xa(t,e,n){return e=Nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pa(0),this.expirationTimes=Pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pa(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qh(t,e,n,r,i,s,l,o,a){return t=new Vx(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lh(s),t}function Ux(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function A0(t){if(!t)return tr;t=t._reactInternals;e:{if(jr(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(ut(n))return Ag(t,n,e)}return e}function E0(t,e,n,r,i,s,l,o,a){return t=Qh(n,r,!0,t,i,s,l,o,a),t.context=A0(null),n=t.current,r=tt(),i=Jn(n),s=xn(r,i),s.callback=e??null,Yn(n,s,i),t.current.lanes=i,qs(t,i,r),ct(t,r),t}function ua(t,e,n,r){var i=e.current,s=tt(),l=Jn(i);return n=A0(n),e.context===null?e.context=n:e.pendingContext=n,e=xn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yn(i,e,l),t!==null&&(Gt(t,i,l,s),ql(t,i,l)),l}function Po(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jh(t,e){Wd(t,e),(t=t.alternate)&&Wd(t,e)}function $x(){return null}var T0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xh(t){this._internalRoot=t}ca.prototype.render=Xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));ua(t,e,null,null)};ca.prototype.unmount=Xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nr(function(){ua(null,t,null,null)}),e[bn]=null}};function ca(t){this._internalRoot=t}ca.prototype.unstable_scheduleHydration=function(t){if(t){var e=ig();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jn.length&&e!==0&&e<jn[n].priority;n++);jn.splice(n,0,t),n===0&&lg(t)}};function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ha(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vd(){}function Kx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Po(l);s.call(u)}}var l=E0(e,r,t,0,null,!1,!1,"",Vd);return t._reactRootContainer=l,t[bn]=l.current,Ts(t.nodeType===8?t.parentNode:t),Nr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Po(a);o.call(u)}}var a=Qh(t,0,!1,null,null,!1,!1,"",Vd);return t._reactRootContainer=a,t[bn]=a.current,Ts(t.nodeType===8?t.parentNode:t),Nr(function(){ua(e,a,n,r)}),a}function fa(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=Po(l);o.call(a)}}ua(e,l,t,i)}else l=Kx(n,e,t,i,r);return Po(l)}ng=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xi(e.pendingLanes);n!==0&&(vh(e,n|1),ct(e,Ae()),!(ee&6)&&(wi=Ae()+500,cr()))}break;case 13:Nr(function(){var r=An(t,1);if(r!==null){var i=tt();Gt(r,t,1,i)}}),Jh(t,1)}};wh=function(t){if(t.tag===13){var e=An(t,134217728);if(e!==null){var n=tt();Gt(e,t,134217728,n)}Jh(t,134217728)}};rg=function(t){if(t.tag===13){var e=Jn(t),n=An(t,e);if(n!==null){var r=tt();Gt(n,t,e,r)}Jh(t,e)}};ig=function(){return le};sg=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};Bu=function(t,e,n){switch(e){case"input":if(Nu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=na(r);if(!i)throw Error(T(90));Bm(r),Nu(r,i)}}}break;case"textarea":Fm(t,n);break;case"select":e=n.value,e!=null&&ri(t,!!n.multiple,e,!1)}};$m=Kh;Km=Nr;var Gx={usingClientEntryPoint:!1,Events:[Qs,Gr,na,Vm,Um,Kh]},Ui={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qx={bundleType:Ui.bundleType,version:Ui.version,rendererPackageName:Ui.rendererPackageName,rendererConfig:Ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ym(t),t===null?null:t.stateNode},findFiberByHostInstance:Ui.findFiberByHostInstance||$x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{Xo=Sl.inject(qx),fn=Sl}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx;bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(e))throw Error(T(200));return Ux(t,e,null,n)};bt.createRoot=function(t,e){if(!Zh(t))throw Error(T(299));var n=!1,r="",i=T0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Qh(t,1,!1,null,null,n,!1,r,i),t[bn]=e.current,Ts(t.nodeType===8?t.parentNode:t),new Xh(e)};bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Ym(e),t=t===null?null:t.stateNode,t};bt.flushSync=function(t){return Nr(t)};bt.hydrate=function(t,e,n){if(!ha(e))throw Error(T(200));return fa(null,t,e,!0,n)};bt.hydrateRoot=function(t,e,n){if(!Zh(t))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=T0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=E0(e,null,t,1,n??null,i,!1,s,l),t[bn]=e.current,Ts(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ca(e)};bt.render=function(t,e,n){if(!ha(e))throw Error(T(200));return fa(null,t,e,!1,n)};bt.unmountComponentAtNode=function(t){if(!ha(t))throw Error(T(40));return t._reactRootContainer?(Nr(function(){fa(null,null,t,!1,function(){t._reactRootContainer=null,t[bn]=null})}),!0):!1};bt.unstable_batchedUpdates=Kh;bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ha(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return fa(t,e,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function M0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M0)}catch(t){console.error(t)}}M0(),Mm.exports=bt;var Yx=Mm.exports,Ud=Yx;Su.createRoot=Ud.createRoot,Su.hydrateRoot=Ud.hydrateRoot;let mc=[],N0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?N0:mc).push(n=n+t[e])})();function Qx(t){if(t<768)return!1;for(let e=0,n=mc.length;;){let r=e+n>>1;if(t<mc[r])n=r;else if(t>=N0[r])e=r+1;else return!0;if(e==n)return!1}}function $d(t){return t>=127462&&t<=127487}const Kd=8205;function Jx(t,e,n=!0,r=!0){return(n?D0:Xx)(t,e,r)}function D0(t,e,n){if(e==t.length)return e;e&&O0(t.charCodeAt(e))&&P0(t.charCodeAt(e-1))&&e--;let r=Za(t,e);for(e+=Gd(r);e<t.length;){let i=Za(t,e);if(r==Kd||i==Kd||n&&Qx(i))e+=Gd(i),r=i;else if($d(i)){let s=0,l=e-2;for(;l>=0&&$d(Za(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function Xx(t,e,n){for(;e>0;){let r=D0(t,e-2,n);if(r<e)return r;e--}return 0}function Za(t,e){let n=t.charCodeAt(e);if(!P0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return O0(r)?(n-55296<<10)+(r-56320)+65536:n}function O0(t){return t>=56320&&t<57344}function P0(t){return t>=55296&&t<56320}function Gd(t){return t<65536?1:2}class Z{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=xi(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),an.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=xi(this,e,n);let r=[];return this.decompose(e,n,r,0),an.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new fs(this),s=new fs(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new fs(this,e)}iterRange(e,n=this.length){return new L0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new R0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Z.empty:e.length<=32?new be(e):an.from(be.split(e,[]))}}class be extends Z{constructor(e,n=Zx(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new ek(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new be(qd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=to(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new be(o,l.length+s.length));else{let a=o.length>>1;r.push(new be(o.slice(0,a)),new be(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof be))return super.replace(e,n,r);[e,n]=xi(this,e,n);let i=to(this.text,to(r.text,qd(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new be(i,s):an.from(be.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=xi(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new be(r,i)),r=[],i=-1);return i>-1&&n.push(new be(r,i)),n}}class an extends Z{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=xi(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new an(c,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=xi(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof an))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let g of e)g.flatten(d);return new be(d,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,c=[];function h(d){let g;if(d.lines>s&&d instanceof an)for(let w of d.children)h(w);else d.lines>l&&(a>l||!a)?(f(),o.push(d)):d instanceof be&&a&&(g=c[c.length-1])instanceof be&&d.lines+g.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new be(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>i&&f(),a+=d.lines,u+=d.length+1,c.push(d))}function f(){a!=0&&(o.push(c.length==1?c[0]:an.from(c,u)),u=-1,a=c.length=0)}for(let d of e)h(d);return f(),o.length==1?o[0]:new an(o,n)}}Z.empty=new be([""],0);function Zx(t){let e=-1;for(let n of t)e+=n.length+1;return e}function to(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function qd(t,e,n){return to(t,[""],e,n)}class fs{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof be?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof be?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof be){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof be?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class L0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new fs(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class R0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Z.prototype[Symbol.iterator]=function(){return this.iter()},fs.prototype[Symbol.iterator]=L0.prototype[Symbol.iterator]=R0.prototype[Symbol.iterator]=function(){return this});class ek{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function xi(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function _e(t,e,n=!0,r=!0){return Jx(t,e,n,r)}function tk(t){return t>=56320&&t<57344}function nk(t){return t>=55296&&t<56320}function I0(t,e){let n=t.charCodeAt(e);if(!nk(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return tk(r)?(n-55296<<10)+(r-56320)+65536:n}function rk(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function B0(t){return t<65536?1:2}const gc=/\r\n?|\n/;var vt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(vt||(vt={}));class kn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){yc(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new kn(e)}composeDesc(e){return this.empty?e:e.empty?this:j0(this,e)}mapDesc(e,n=!1){return e.empty?this:vc(this,e,n)}mapPos(e,n=-1,r=vt.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=vt.Simple&&u>=e&&(r==vt.TrackDel&&i<e&&u>e||r==vt.TrackBefore&&i<e||r==vt.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new kn(e)}static create(e){return new kn(e)}}class Pe extends kn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return yc(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return vc(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(Z.empty);r.push(l?e.slice(s,s+l):Z.empty)}s+=l}return new Pe(n,r)}compose(e){return this.empty?e:e.empty?this:j0(this,e,!0)}map(e,n=!1){return e.empty?this:vc(this,e,n,!0)}iterChanges(e,n=!1){yc(this,e,n)}get desc(){return kn.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Bs(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-o);Ke(i,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Ke(n,c,h),h>0&&Wn(r,n,s.text),s.forward(c),o+=c}let u=e[l++];for(;o<u;){if(s.done)break e;let c=Math.min(s.len,u-o);Ke(n,c,-1),Ke(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),o+=c}}return{changes:new Pe(n,r),filtered:kn.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(c=!1){if(!c&&!i.length)return;l<n&&Ke(i,n-l,-1);let h=new Pe(i,s);o=o?o.compose(h.map(o)):h,i=[],s=[],l=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Pe){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),o=o?o.compose(c.map(o)):c}else{let{from:h,to:f=h,insert:d}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let g=d?typeof d=="string"?Z.of(d.split(r||gc)):d:Z.empty,w=g.length;if(h==f&&w==0)return;h<l&&a(),h>l&&Ke(i,h-l,-1),Ke(i,f-h,w),Wn(s,i,g),l=f}}return u(e),a(!o),o}static empty(e){return new Pe(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(Z.empty);r[i]=Z.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Pe(n,r)}static createSet(e,n){return new Pe(e,n)}}function Ke(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Wn(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Z.empty);t.push(n)}}function yc(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,c=s,h=Z.empty;for(;u+=o,c+=a,a&&r&&(h=h.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,c,h),i=u,s=c}}}function vc(t,e,n,r=!1){let i=[],s=r?[]:null,l=new Bs(t),o=new Bs(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);Ke(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(Ke(i,o.ins,-1);u;){let c=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=c&&(Ke(i,0,l.ins),s&&Wn(s,i,l.text),a=l.i),l.forward(c),u-=c}o.next()}else if(l.ins>=0){let u=0,c=l.len;for(;c;)if(o.ins==-1){let h=Math.min(c,o.len);u+=h,c-=h,o.forward(h)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;Ke(i,u,a<l.i?l.ins:0),s&&a<l.i&&Wn(s,i,l.text),a=l.i,l.forward(l.len-c)}else{if(l.done&&o.done)return s?Pe.createSet(i,s):kn.create(i);throw new Error("Mismatched change set lengths")}}}function j0(t,e,n=!1){let r=[],i=n?[]:null,s=new Bs(t),l=new Bs(e);for(let o=!1;;){if(s.done&&l.done)return i?Pe.createSet(r,i):kn.create(r);if(s.ins==0)Ke(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)Ke(r,0,l.ins,o),i&&Wn(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let c=l.ins==-1?-1:l.off?0:l.ins;Ke(r,a,c,o),i&&c&&Wn(i,r,l.text)}else l.ins==-1?(Ke(r,s.off?0:s.len,a,o),i&&Wn(i,r,s.textBit(a))):(Ke(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Wn(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class Bs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Z.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Z.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class xr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new xr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return E.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return E.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return E.range(e.anchor,e.head)}static create(e,n,r){return new xr(e,n,r)}}class E{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:E.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new E([this.main],0)}addRange(e,n=!0){return E.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,E.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new E(e.ranges.map(n=>xr.fromJSON(n)),e.main)}static single(e,n=e){return new E([E.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return E.normalized(e.slice(),n);r=s.to}return new E(e,n)}static cursor(e,n=0,r,i){return xr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?xr.create(n,e,48|s):xr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?E.range(a,o):E.range(o,a))}}return new E(e,n)}}function F0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let ef=0;class _{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=ef++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new _(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:tf),!!e.static,e.enables)}of(e){return new no([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new no(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new no(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function tf(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class no{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=ef++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[l]=r(h),1},update(h,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||wc(h,c)){let d=r(h);if(o?!Yd(d,h.values[l],i):!i(d,h.values[l]))return h.values[l]=d,1}return 0},reconfigure:(h,f)=>{let d,g=f.config.address[s];if(g!=null){let w=Ro(f,g);if(this.dependencies.every(x=>x instanceof _?f.facet(x)===h.facet(x):x instanceof Jt?f.field(x,!1)==h.field(x,!1):!0)||(o?Yd(d=r(h),w,i):i(d=r(h),w)))return h.values[l]=w,0}else d=r(h);return h.values[l]=d,1}}}}function Yd(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function wc(t,e){let n=!1;for(let r of e)ds(t,r)&1&&(n=!0);return n}function ik(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let c=0;c<r.length;c++){let h=Ro(a,r[c]);if(i[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(a){for(let u of r)ds(a,u);return a.values[l]=o(a),1},update(a,u){if(!wc(a,s))return 0;let c=o(a);return e.compare(c,a.values[l])?0:(a.values[l]=c,1)},reconfigure(a,u){let c=wc(a,r),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&tf(n,h))return a.values[l]=f,0;let d=o(a);return e.compare(d,f)?(a.values[l]=f,0):(a.values[l]=d,1)}}}const Cl=_.define({static:!0});class Jt{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Jt(ef++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Cl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(Cl),l=i.facet(Cl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Cl.of({field:this,create:e})]}get extension(){return this}}const gr={lowest:4,low:3,default:2,high:1,highest:0};function $i(t){return e=>new _0(e,t)}const da={highest:$i(gr.highest),high:$i(gr.high),default:$i(gr.default),low:$i(gr.low),lowest:$i(gr.lowest)};class _0{constructor(e,n){this.inner=e,this.prec=n}}class pa{of(e){return new xc(this,e)}reconfigure(e){return pa.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class xc{constructor(e,n){this.compartment=e,this.inner=n}}class Lo{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of sk(e,n,l))f instanceof Jt?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(d=>f.slot(d));let c=r==null?void 0:r.config.facets;for(let f in s){let d=s[f],g=d[0].facet,w=c&&c[f]||[];if(d.every(x=>x.type==0))if(o[g.id]=a.length<<1|1,tf(w,d))a.push(r.facet(g));else{let x=g.combine(d.map(p=>p.value));a.push(r&&g.compare(x,r.facet(g))?r.facet(g):x)}else{for(let x of d)x.type==0?(o[x.id]=a.length<<1|1,a.push(x.value)):(o[x.id]=u.length<<1,u.push(p=>x.dynamicSlot(p)));o[g.id]=u.length<<1,u.push(x=>ik(x,g,d))}}let h=u.map(f=>f(o));return new Lo(e,l,h,o,a,s)}}function sk(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof xc&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof xc){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof _0)s(l.inner,l.prec);else if(l instanceof Jt)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof no)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,gr.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,gr.default),r.reduce((l,o)=>l.concat(o))}function ds(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Ro(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const z0=_.define(),kc=_.define({combine:t=>t.some(e=>e),static:!0}),H0=_.define({combine:t=>t.length?t[0]:void 0,static:!0}),W0=_.define(),V0=_.define(),U0=_.define(),$0=_.define({combine:t=>t.length?t[0]:!1});class Di{constructor(e,n){this.type=e,this.value=n}static define(){return new lk}}class lk{of(e){return new Di(this,e)}}class ok{constructor(e){this.map=e}of(e){return new ce(this,e)}}class ce{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ce(this.type,n)}is(e){return this.type==e}static define(e={}){return new ok(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}ce.reconfigure=ce.define();ce.appendConfig=ce.define();class Ye{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&F0(r,n.newLength),s.some(o=>o.type==Ye.time)||(this.annotations=s.concat(Ye.time.of(Date.now())))}static create(e,n,r,i,s,l){return new Ye(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ye.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ye.time=Di.define();Ye.userEvent=Di.define();Ye.addToHistory=Di.define();Ye.remote=Di.define();function ak(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function K0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Pe.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:ce.mapEffects(t.effects,i).concat(ce.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Sc(t,e,n){let r=e.selection,i=ui(e.annotations);return e.userEvent&&(i=i.concat(Ye.userEvent.of(e.userEvent))),{changes:e.changes instanceof Pe?e.changes:Pe.of(e.changes||[],n,t.facet(H0)),selection:r&&(r instanceof E?r:E.single(r.anchor,r.head)),effects:ui(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function G0(t,e,n){let r=Sc(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=K0(r,Sc(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=Ye.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return ck(n?uk(i):i)}function uk(t){let e=t.startState,n=!0;for(let i of e.facet(W0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:ak(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Pe.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=Ye.create(e,i,t.selection&&t.selection.map(s),ce.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(V0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Ye?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ye?t=s[0]:t=G0(e,ui(s),!1)}return t}function ck(t){let e=t.startState,n=e.facet(U0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=K0(r,Sc(e,s,t.changes.newLength),!0))}return r==t?t:Ye.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const hk=[];function ui(t){return t==null?hk:Array.isArray(t)?t:[t]}var ze=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ze||(ze={}));const fk=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Cc;try{Cc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function dk(t){if(Cc)return Cc.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||fk.test(n)))return!0}return!1}function pk(t){return e=>{if(!/\S/.test(e))return ze.Space;if(dk(e))return ze.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ze.Word;return ze.Other}}class te{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)ds(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return ds(this,r),Ro(this,r)}update(...e){return G0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(pa.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(ce.reconfigure)?(n=null,r=o.value):o.is(ce.appendConfig)&&(n=null,r=ui(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=Lo.resolve(r,i,this),s=new te(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(kc)?e.newSelection:e.newSelection.asSingle();new te(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:E.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=ui(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),c=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(c);let h=i.mapDesc(u,!0);s.push(a.range.map(h)),i=i.compose(c),l=ce.mapEffects(l,c).concat(ce.mapEffects(ui(a.effects),h))}return{changes:i,selection:E.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Pe?e:Pe.of(e,this.doc.length,this.facet(te.lineSeparator))}toText(e){return Z.of(e.split(this.facet(te.lineSeparator)||gc))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ds(this,n),Ro(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Jt&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return te.create({doc:e.doc,selection:E.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Lo.resolve(e.extensions||[],new Map),r=e.doc instanceof Z?e.doc:Z.of((e.doc||"").split(n.staticFacet(te.lineSeparator)||gc)),i=e.selection?e.selection instanceof E?e.selection:E.single(e.selection.anchor,e.selection.head):E.single(0);return F0(i,r.length),n.staticFacet(kc)||(i=i.asSingle()),new te(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(te.tabSize)}get lineBreak(){return this.facet(te.lineSeparator)||`
`}get readOnly(){return this.facet($0)}phrase(e,...n){for(let r of this.facet(te.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(z0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return pk(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=_e(n,l,!1);if(s(n.slice(a,l))!=ze.Word)break;l=a}for(;o<i;){let a=_e(n,o);if(s(n.slice(o,a))!=ze.Word)break;o=a}return l==o?null:E.range(l+r,o+r)}}te.allowMultipleSelections=kc;te.tabSize=_.define({combine:t=>t.length?t[0]:4});te.lineSeparator=H0;te.readOnly=$0;te.phrases=_.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});te.languageData=z0;te.changeFilter=W0;te.transactionFilter=V0;te.transactionExtender=U0;pa.reconfigure=ce.define();function ma(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class ki{eq(e){return this==e}range(e,n=e){return bc.create(e,n,this)}}ki.prototype.startSide=ki.prototype.endSide=0;ki.prototype.point=!1;ki.prototype.mapMode=vt.TrackDel;let bc=class q0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new q0(e,n,r)}};function Ac(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class nf{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,h=this.to[a]+e,f,d;if(c==h){let g=n.mapPos(c,u.startSide,u.mapMode);if(g==null||(f=d=g,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<f)))continue}else if(f=n.mapPos(c,u.startSide),d=n.mapPos(h,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,d-f)),r.push(u),i.push(f-l),s.push(d-l))}return{mapped:r.length?new nf(i,s,r,o):null,pos:l}}}class re{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new re(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(Ac)),this.isEmpty)return n.length?re.of(n):this;let o=new Y0(this,null,-1).goto(0),a=0,u=[],c=new Dr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let h=n[a++];c.addInner(h.from,h.to,h.value)||u.push(h)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||u.push(bc.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?re.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:c,pos:h}=a.map(o,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new re(r,n,s||re.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return js.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return js.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),o=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=Qd(l,o,r),u=new Ki(l,a,s),c=new Ki(o,a,s);r.iterGaps((h,f,d)=>Jd(u,h,c,f,d,i)),r.empty&&r.length==0&&Jd(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),l=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=Qd(s,l),a=new Ki(s,o,0).goto(r),u=new Ki(l,o,0).goto(r);for(;;){if(a.to!=u.to||!Ec(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new Ki(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let c=l.activeForPoint(l.to),h=l.pointFrom<n?c.length+1:l.point.startSide<0?c.length:Math.min(c.length,a);i.point(o,u,l.point,c,h,l.pointRank),a=Math.min(l.openEnd(u),c.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new Dr;for(let i of e instanceof bc?[e]:n?mk(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return re.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=re.empty;i=i.nextLayer)n=new re(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}re.empty=new re([],[],null,-1);function mk(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Ac(e,r)>0)return t.slice().sort(Ac);e=r}return t}re.empty.nextLayer=re.empty;class Dr{finishChunk(e){this.chunks.push(new nf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Dr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(re.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=re.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Qd(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class Y0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class js{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new Y0(l,n,r,s));return i.length==1?i[0]:new js(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)eu(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)eu(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),eu(this.heap,0)}}}function eu(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Ki{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=js.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){bl(this.active,e),bl(this.activeTo,e),bl(this.activeRank,e),this.minActive=Xd(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Al(this.active,n,r),Al(this.activeTo,n,i),Al(this.activeRank,n,s),e&&Al(e,n,this.cursor.from),this.minActive=Xd(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&bl(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Jd(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,h=c<0?t.to+a:n.to,f=Math.min(h,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Ec(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!Ec(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),h>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),o=h,c<=0&&t.next(),c>=0&&n.next()}}function Ec(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function bl(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Al(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Xd(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function ga(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=_e(t,i));return r}function gk(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=_e(t,i)}return t.length}const Tc="ͼ",Zd=typeof Symbol>"u"?"__"+Tc:Symbol.for(Tc),Mc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ep=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class nr{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let c=[],h=/^@(\w+)\b/.exec(l[0]),f=h&&h[1]=="keyframes";if(h&&o==null)return a.push(l[0]+";");for(let d in o){let g=o[d];if(/&/.test(d))s(d.split(/,\s*/).map(w=>l.map(x=>w.replace(/&/,x))).reduce((w,x)=>w.concat(x)),g,a);else if(g&&typeof g=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),g,c,f)}else g!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+g+";")}(c.length||f)&&a.push((r&&!h&&!u?l.map(r):l).join(", ")+" {"+c.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ep[Zd]||1;return ep[Zd]=e+1,Tc+e.toString(36)}static mount(e,n,r){let i=e[Mc],s=r&&r.nonce;i?s&&i.setNonce(s):i=new yk(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let tp=new Map;class yk{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=tp.get(r);if(s)return e[Mc]=s;this.sheet=new i.CSSStyleSheet,tp.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Mc]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var rr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Fs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},vk=typeof navigator<"u"&&/Mac/.test(navigator.platform),wk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var je=0;je<10;je++)rr[48+je]=rr[96+je]=String(je);for(var je=1;je<=24;je++)rr[je+111]="F"+je;for(var je=65;je<=90;je++)rr[je]=String.fromCharCode(je+32),Fs[je]=String.fromCharCode(je);for(var tu in rr)Fs.hasOwnProperty(tu)||(Fs[tu]=rr[tu]);function xk(t){var e=vk&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||wk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Fs:rr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Ie(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)Q0(t,arguments[e]);return t}function Q0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Q0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function _s(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Nc(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function ro(t,e){if(!e.anchorNode)return!1;try{return Nc(t,e.anchorNode)}catch{return!1}}function zs(t){return t.nodeType==3?Pr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function ps(t,e,n,r){return n?np(t,e,n,r,-1)||np(t,e,n,r,1):!1}function Or(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Io(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function np(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:pn(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Or(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?pn(t):0}else return!1}}function pn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ya(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function kk(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function J0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function Sk(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,d=c==a.body,g=1,w=1;if(d)f=kk(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:g,scaleY:w}=J0(c,y)),f={left:y.left,right:y.left+c.clientWidth*g,top:y.top,bottom:y.top+c.clientHeight*w}}let x=0,p=0;if(i=="nearest")e.top<f.top?(p=e.top-(f.top+l),n>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,n<0&&e.top-p<f.top&&(p=e.top-(f.top+l)));else{let y=e.bottom-e.top,v=f.bottom-f.top;p=(i=="center"&&y<=v?e.top+y/2-v/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-v+l)-f.top}if(r=="nearest"?e.left<f.left?(x=e.left-(f.left+s),n>0&&e.right>f.right+x&&(x=e.right-f.right+s)):e.right>f.right&&(x=e.right-f.right+s,n<0&&e.left<f.left+x&&(x=e.left-(f.left+s))):x=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,x||p)if(d)u.scrollBy(x,p);else{let y=0,v=0;if(p){let S=c.scrollTop;c.scrollTop+=p/w,v=(c.scrollTop-S)*w}if(x){let S=c.scrollLeft;c.scrollLeft+=x/g,y=(c.scrollLeft-S)*g}e={left:e.left-y,top:e.top-v,right:e.right-y,bottom:e.bottom-v},y&&Math.abs(y-x)<1&&(r="nearest"),v&&Math.abs(v-p)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function Ck(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class bk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?pn(n):0),r,Math.min(e.focusOffset,r?pn(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let _r=null;function X0(t){if(t.setActive)return t.setActive();if(_r)return t.focus(_r);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(_r==null?{get preventScroll(){return _r={preventScroll:!0},!0}}:void 0),!_r){_r=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let rp;function Pr(t,e,n=e){let r=rp||(rp=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function ci(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function Ak(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Z0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Ek(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,pn(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=pn(n))}else{if(n==t)return!0;r=Or(n),n=n.parentNode}}function ey(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function ty(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=pn(n)}else if(n.parentNode&&!Io(n))r=Or(n),n=n.parentNode;else return null}}function ny(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!Io(n))r=Or(n)+1,n=n.parentNode;else return null}}class qe{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new qe(e.parentNode,Or(e),n)}static after(e,n){return new qe(e.parentNode,Or(e)+1,n)}}const rf=[];class ae{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=ae.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=ip(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=ip(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=pn(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ae.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,c=r;a<this.children.length;a++){let h=this.children[a],f=u+h.length;if(u<e&&f>n)return h.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&h.dom.parentNode==this.dom){l=a,o=c;break}c=f,u=f+h.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=rf){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ry(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ae.prototype.breakAfter=0;function ip(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class ry{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function iy(t,e,n,r,i,s,l,o,a){let{children:u}=t,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:l;if(!(e==r&&c&&!l&&!f&&s.length<2&&c.merge(n,i,s.length?h:null,n==0,o,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&(h!=null&&h.breakAfter))?(e==r&&(d=d.split(i),i=0),!f&&h&&d.merge(0,i,h,!0,0,a)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(h?h.breakAfter=1:l=1),r++}for(c&&(c.breakAfter=l,n>0&&(!l&&s.length&&c.merge(n,c.length,s[0],!1,o,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function sy(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:c}=l.findPos(e,-1),h=e-n;for(let f of r)h+=f.length;t.length+=h,iy(t,u,c,o,a,r,0,i,s)}let lt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Dc=typeof document<"u"?document:{documentElement:{style:{}}};const Oc=/Edge\/(\d+)/.exec(lt.userAgent),ly=/MSIE \d/.test(lt.userAgent),Pc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(lt.userAgent),va=!!(ly||Pc||Oc),sp=!va&&/gecko\/(\d+)/i.test(lt.userAgent),nu=!va&&/Chrome\/(\d+)/.exec(lt.userAgent),Tk="webkitFontSmoothing"in Dc.documentElement.style,oy=!va&&/Apple Computer/.test(lt.vendor),lp=oy&&(/Mobile\/\w+/.test(lt.userAgent)||lt.maxTouchPoints>2);var R={mac:lp||/Mac/.test(lt.platform),windows:/Win/.test(lt.platform),linux:/Linux|X11/.test(lt.platform),ie:va,ie_version:ly?Dc.documentMode||6:Pc?+Pc[1]:Oc?+Oc[1]:0,gecko:sp,gecko_version:sp?+(/Firefox\/(\d+)/.exec(lt.userAgent)||[0,0])[1]:0,chrome:!!nu,chrome_version:nu?+nu[1]:0,ios:lp,android:/Android\b/.test(lt.userAgent),safari:oy,webkit_version:Tk?+(/\bAppleWebKit\/(\d+)/.exec(lt.userAgent)||[0,0])[1]:0,tabSize:Dc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Mk=256;class Yt extends ae{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Yt)||this.length-(n-e)+r.length>Mk||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Yt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new qe(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Nk(this.dom,e,n)}}class Tn extends ae{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(Z0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof Tn&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(sy(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Tn(this.mark,n,l)}domAtPos(e){return ay(this,e)}coordsAt(e,n){return cy(this,e,n)}}function Nk(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?R.chrome||R.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=Pr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return R.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?ya(a,l<0):a||null}class kr extends ae{static create(e,n,r){return new kr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=kr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof kr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof kr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Z.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Z.empty}domAtPos(e){return(this.length?e==0:this.side>0)?qe.before(this.dom):qe.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return ya(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Si extends ae{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Si&&e.side==this.side}split(){return new Si(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?qe.before(this.dom):qe.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Z.empty}get isHidden(){return!0}}Yt.prototype.children=kr.prototype.children=Si.prototype.children=rf;function ay(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new qe(n,0)}function uy(t,e,n){let r,{children:i}=t;n>0&&e instanceof Tn&&i.length&&(r=i[i.length-1])instanceof Tn&&r.mark.eq(e.mark)?uy(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function cy(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let d=u.children[h],g=f+d.length;g>=c&&(d.children.length?o(d,c-f):(!s||s.isHidden&&(n>0||Ok(s,d)))&&(g>c||f==g&&d.getSide()>0)?(s=d,l=c-f):(f<c||f==g&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-f)),f=g}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):Dk(t)}function Dk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=zs(e);return n[n.length-1]||null}function Ok(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function Lc(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const op=Object.create(null);function Bo(t,e,n){if(t==e)return!0;t||(t=op),e||(e=op);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Rc(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function Pk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Xs{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ot=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Ot||(Ot={}));class G extends ki{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Zs(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new ir(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=hy(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new ir(e,r,i,n,e.widget||null,!0)}static line(e){return new el(e)}static set(e,n=!1){return re.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}G.none=re.empty;class Zs extends G{constructor(e){let{start:n,end:r}=hy(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Zs&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Bo(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Zs.prototype.point=!1;class el extends G{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof el&&this.spec.class==e.spec.class&&Bo(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}el.prototype.mapMode=vt.TrackBefore;el.prototype.point=!0;class ir extends G{constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?vt.TrackBefore:vt.TrackAfter:vt.TrackDel}get type(){return this.startSide!=this.endSide?Ot.WidgetRange:this.startSide<=0?Ot.WidgetBefore:Ot.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ir&&Lk(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}ir.prototype.point=!0;function hy(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function Lk(t,e){return t==e||!!(t&&e&&t.compare(e))}function io(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Ee extends ae{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof Ee))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),sy(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new Ee;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Bo(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){uy(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Lc(n,this.attrs||{})),r&&(this.attrs=Lc({class:r},this.attrs||{}))}domAtPos(e){return ay(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(Z0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Rc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&ae.get(i)instanceof Tn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ae.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!R.ios||!this.children.some(s=>s instanceof Yt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Yt)||/[^ -~]/.test(r.text))return null;let i=zs(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=cy(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof Ee&&this.children.length==0&&e.children.length==0&&Bo(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof Ee)return s;if(l>n)break}i=l+s.breakAfter}return null}}class Sn extends ae{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof Sn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?qe.before(this.dom):qe.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Sn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return rf}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Z.empty}domBoundsAround(){return null}become(e){return e instanceof Sn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof Ic?null:ya(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Ic extends Xs{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ms{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Sn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ee),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(El(new Si(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Sn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(El(new Yt(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof ir){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof ir)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Sn(r.widget||Ci.block,o,r));else{let a=kr.create(r.widget||Ci.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(El(new Si(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(El(a,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new ms(e,n,r,s);return l.openEnd=re.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function El(t,e){for(let n of e)t=new Tn(n,[t],t.length);return t}class Ci extends Xs{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ci.inline=new Ci("span");Ci.block=new Ci("div");var De=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(De||(De={}));const Lr=De.LTR,sf=De.RTL;function fy(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Rk=fy("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Ik=fy("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Bc=Object.create(null),tn=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Bc[e]=n,Bc[n]=-e}function dy(t){return t<=247?Rk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Ik[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Bk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Vn{get dir(){return this.level%2?sf:Lr}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function py(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!py(r.inner,i.inner))return!1}return!0}const oe=[];function jk(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,c=a,h=a;u<o;u++){let f=dy(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),oe[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=l,c=a,h=a;u<o;u++){let f=oe[u];if(f==128)u<o-1&&c==oe[u+1]&&c&24?f=oe[u]=c:oe[u]=256;else if(f==64){let d=u+1;for(;d<o&&oe[d]==64;)d++;let g=u&&c==8||d<n&&oe[d]==8?h==1?1:8:256;for(let w=u;w<d;w++)oe[w]=g;u=d-1}else f==8&&h==1&&(oe[u]=1);c=f,f&7&&(h=f)}}}function Fk(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,c=l<r.length?r[l].from:n;for(let h=u,f,d,g;h<c;h++)if(d=Bc[f=t.charCodeAt(h)])if(d<0){for(let w=o-3;w>=0;w-=3)if(tn[w+1]==-d){let x=tn[w+2],p=x&2?i:x&4?x&1?s:i:0;p&&(oe[h]=oe[tn[w]]=p),o=w;break}}else{if(tn.length==189)break;tn[o++]=h,tn[o++]=f,tn[o++]=a}else if((g=oe[h])==2||g==1){let w=g==i;a=w?0:1;for(let x=o-3;x>=0;x-=3){let p=tn[x+2];if(p&2)break;if(w)tn[x+2]|=2;else{if(p&4)break;tn[x+2]|=4}}}}}function _k(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=oe[a];if(u==256){let c=a+1;for(;;)if(c==o){if(i==n.length)break;c=n[i++].to,o=i<n.length?n[i].from:e}else if(oe[c]==256)c++;else break;let h=s==1,f=(c<e?oe[c]:r)==1,d=h==f?h?1:2:r;for(let g=c,w=i,x=w?n[w-1].to:t;g>a;)g==x&&(g=n[--w].from,x=w?n[w-1].to:t),oe[--g]=d;a=c}else s=u,a++}}}function jc(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let c=!0,h=!1;if(u==s.length||a<s[u].from){let w=oe[a];w!=o&&(c=!1,h=w==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,g=a;e:for(;;)if(u<s.length&&g==s[u].from){if(h)break e;let w=s[u];if(!c)for(let x=w.to,p=u+1;;){if(x==n)break e;if(p<s.length&&s[p].from==x)x=s[p++].to;else{if(oe[x]==o)break e;break}}if(u++,f)f.push(w);else{w.from>a&&l.push(new Vn(a,w.from,d));let x=w.direction==Lr!=!(d%2);Fc(t,x?r+1:r,i,w.inner,w.from,w.to,l),a=w.to}g=w.to}else{if(g==n||(c?oe[g]!=o:oe[g]==o))break;g++}f?jc(t,a,g,r+1,i,f,l):a<g&&l.push(new Vn(a,g,d)),a=g}else for(let a=n,u=s.length;a>e;){let c=!0,h=!1;if(!u||a>s[u-1].to){let w=oe[a-1];w!=o&&(c=!1,h=w==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,g=a;e:for(;;)if(u&&g==s[u-1].to){if(h)break e;let w=s[--u];if(!c)for(let x=w.from,p=u;;){if(x==e)break e;if(p&&s[p-1].to==x)x=s[--p].from;else{if(oe[x-1]==o)break e;break}}if(f)f.push(w);else{w.to<a&&l.push(new Vn(w.to,a,d));let x=w.direction==Lr!=!(d%2);Fc(t,x?r+1:r,i,w.inner,w.from,w.to,l),a=w.from}g=w.from}else{if(g==e||(c?oe[g-1]!=o:oe[g-1]==o))break;g--}f?jc(t,g,a,r+1,i,f,l):g<a&&l.push(new Vn(g,a,d)),a=g}}function Fc(t,e,n,r,i,s,l){let o=e%2?2:1;jk(t,i,s,r,o),Fk(t,i,s,r,o),_k(i,s,r,o),jc(t,i,s,e,n,r,l)}function zk(t,e,n){if(!t)return[new Vn(0,0,e==sf?1:0)];if(e==Lr&&!n.length&&!Bk.test(t))return my(t.length);if(n.length)for(;t.length>oe.length;)oe[oe.length]=256;let r=[],i=e==Lr?0:1;return Fc(t,i,i,n,0,t.length,r),r}function my(t){return[new Vn(0,t,0)]}let gy="";function Hk(t,e,n,r,i){var s;let l=r.head-t.from,o=Vn.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let c=_e(t.text,l,a.forward(i,n));(c<a.from||c>a.to)&&(c=u),gy=t.text.slice(Math.min(l,c),Math.max(l,c));let h=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<a.level?E.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):E.cursor(c+t.from,a.forward(i,n)?-1:1,a.level)}function Wk(t,e,n){for(let r=e;r<n;r++){let i=dy(t.charCodeAt(r));if(i==1)return Lr;if(i==2||i==4)return sf}return Lr}const yy=_.define(),vy=_.define(),wy=_.define(),xy=_.define(),_c=_.define(),ky=_.define(),Sy=_.define(),lf=_.define(),of=_.define(),Cy=_.define({combine:t=>t.some(e=>e)}),Vk=_.define({combine:t=>t.some(e=>e)}),by=_.define();class hi{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new hi(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new hi(E.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Tl=ce.define({map:(t,e)=>t.map(e)}),Ay=ce.define();function cn(t,e,n){let r=t.facet(xy);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const yn=_.define({combine:t=>t.length?t[0]:!0});let Uk=0;const ei=_.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class St{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(ei.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ei.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new St(Uk++,e,r,i,o=>{let a=[];return l&&a.push(Hs.of(u=>{let c=u.plugin(o);return c?l(c):G.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return St.define((r,i)=>new e(r,i),n)}}class ru{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(cn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){cn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){cn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ey=_.define(),af=_.define(),Hs=_.define(),Ty=_.define(),tl=_.define(),My=_.define();function ap(t,e){let n=t.state.facet(My);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return re.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,c=l-e.from,h=i;for(let f=o.length-1;f>=0;f--,a--){let d=o[f].spec.bidiIsolate,g;if(d==null&&(d=Wk(e.text,u,c)),a>0&&h.length&&(g=h[h.length-1]).to==u&&g.direction==d)g.to=c,h=g.inner;else{let w={from:u,to:c,direction:d,inner:[]};h.push(w),h=w.inner}}}}),i}const Ny=_.define();function Dy(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(Ny)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const es=_.define();class Pt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Pt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let h=n[s],f=n[s+1],d=Math.max(o,h),g=Math.min(c,f);if(d<=g&&new Pt(d+u,g+u,d,g).addToSet(r),f>c)break;s+=2}if(!a)return r;new Pt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class jo{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Pe.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new Pt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new jo(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class up extends ae{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=G.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ee],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Pt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!Jk(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?Kk(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Pt(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(R.ie||R.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=Yk(l,o,e.changes);return r=Pt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=R.chrome||R.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof Sn&&l.widget instanceof Ic&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:c,toB:h}=o,f,d,g,w;if(r&&r.range.fromB<h&&r.range.toB>c){let S=ms.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=ms.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);d=S.breakAtStart,g=S.openStart,w=C.openEnd;let A=this.compositionView(r);C.breakAtStart?A.breakAfter=1:C.content.length&&A.merge(A.length,A.length,C.content[0],!1,C.openStart,0)&&(A.breakAfter=C.content[0].breakAfter,C.content.shift()),S.content.length&&A.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(A).concat(C.content)}else({content:f,breakAtStart:d,openStart:g,openEnd:w}=ms.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:x,off:p}=s.findPos(u,1),{i:y,off:v}=s.findPos(a,-1);iy(this,y,v,x,p,f,d,g,w)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(Ay)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Yt(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Tn(i,[n],n.length);let r=new Ee;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=ae.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(yn)||this.dom.tabIndex>-1)&&ro(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(R.gecko&&o.empty&&!this.hasComposition&&$k(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=u=new qe(h,0),l=!0}let c=this.view.observer.selectionRange;(l||!c.focusNode||(!ps(a.node,a.offset,c.anchorNode,c.anchorOffset)||!ps(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,o))&&(this.view.observer.ignore(()=>{R.android&&R.chrome&&this.dom.contains(c.focusNode)&&Qk(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=_s(this.view.root);if(h)if(o.empty){if(R.gecko){let f=Gk(a.node,a.offset);if(f&&f!=3){let d=(f==1?ty:ny)(a.node,a.offset);d&&(a=new qe(d.node,d.offset))}}h.collapse(a.node,a.offset),o.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=o.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new qe(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new qe(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&ps(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=_s(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=Ee.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=ae.get(n.childNodes[i]);s instanceof Ee&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=ae.get(n.childNodes[i]);s instanceof Ee&&(r=s.domAtPos(s.length))}return r?new qe(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=ae.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Ee)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof Ee&&!(r instanceof Ee&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof Sn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Ee))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Yt))return null;let s=_e(i.text,r);if(s==r)return null;let l=Pr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==De.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>i)break;if(u>=r){let d=h.dom.getBoundingClientRect();if(n.push(d.height),l){let g=h.dom.lastChild,w=g?zs(g):[];if(w.length){let x=w[w.length-1],p=a?x.right-d.left:d.right-x.left;p>o&&(o=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?De.RTL:De.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Ee){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=zs(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new ry(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(G.replace({widget:new Ic(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return G.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Hs).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(Ty).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(re.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(by))try{if(u(this.view,e.range,e))return!0}catch(c){cn(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=Dy(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;Sk(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==De.LTR)}}function $k(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Oy(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=ty(n.focusNode,n.focusOffset),i=ny(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=ae.get(i.node);if(!o||o instanceof Yt&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=ae.get(r.node);!a||a instanceof Yt&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function Kk(t,e,n){let r=Oy(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new Pt(a.mapPos(s),a.mapPos(l),s,l),c=[];for(let h=i.parentNode;;h=h.parentNode){let f=ae.get(h);if(f instanceof Tn)c.push({node:h,deco:f.mark});else{if(f instanceof Ee||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new Zs({inclusive:!0,attributes:Pk(h),tagName:h.tagName.toLowerCase()})});else return null}}}function Gk(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let qk=class{constructor(){this.changes=[]}compareRange(e,n){io(e,n,this.changes)}comparePoint(e,n){io(e,n,this.changes)}boundChange(e){io(e,e,this.changes)}};function Yk(t,e,n){let r=new qk;return re.compare(t,e,n,r),r.changes}function Qk(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Jk(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function Xk(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return E.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=_e(i.text,s,!1):o=_e(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=_e(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=_e(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return E.range(l+i.from,o+i.from)}function Zk(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function eS(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function iu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function cp(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function hp(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function zc(t,e,n){let r,i,s,l,o=!1,a,u,c,h;for(let g=t.firstChild;g;g=g.nextSibling){let w=zs(g);for(let x=0;x<w.length;x++){let p=w[x];i&&iu(i,p)&&(p=cp(hp(p,i.bottom),i.top));let y=Zk(e,p),v=eS(n,p);if(y==0&&v==0)return g.nodeType==3?fp(g,e,n):zc(g,e,n);(!r||l>v||l==v&&s>y)&&(r=g,i=p,s=y,l=v,o=y?e<p.left?x>0:x<w.length-1:!0),y==0?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=g,c=p):n<p.top&&(!h||h.top>p.top)&&(u=g,h=p):c&&iu(c,p)?c=hp(c,p.bottom):h&&iu(h,p)&&(h=cp(h,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):h&&h.top<=n&&(r=u,i=h),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return fp(r,f,n);if(o&&r.contentEditable!="false")return zc(r,f,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function fp(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=Pr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;l||(l=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,d=f;if((R.chrome||R.gecko)&&Pr(t,o).getBoundingClientRect().left==c.right&&(d=!f),h<=0)return{node:t,offset:o+(d?1:0)};i=o+(d?1:0),s=h}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function Py(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:h}=e,f=h-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(f),a.type!=Ot.Text;)for(;f=r>0?a.bottom+S:a.top-S,!(f>=0&&f<=u);){if(C)return n?null:0;C=!0,r=-r}h=o+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:dp(t,l,a,c,h);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:dp(t,l,a,c,h);let g=t.dom.ownerDocument,w=t.root.elementFromPoint?t.root:g,x=w.elementFromPoint(c,h);x&&!t.contentDOM.contains(x)&&(x=null),x||(c=Math.max(l.left+1,Math.min(l.right-1,c)),x=w.elementFromPoint(c,h),x&&!t.contentDOM.contains(x)&&(x=null));let p,y=-1;if(x&&((i=t.docView.nearest(x))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(c,h);S&&({offsetNode:p,offset:y}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(c,h);S&&({startContainer:p,startOffset:y}=S)}p&&(!t.contentDOM.contains(p)||R.safari&&tS(p,y,c)||R.chrome&&nS(p,y,c))&&(p=void 0),p&&(y=Math.min(pn(p),y))}if(!p||!t.docView.dom.contains(p)){let S=Ee.find(t.docView,d);if(!S)return f>a.top+a.height/2?a.to:a.from;({node:p,offset:y}=zc(S.dom,c,h))}let v=t.docView.nearest(p);if(!v)return null;if(v.isWidget&&((s=v.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=v.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(p,y)+v.posAtStart}function dp(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+gk(l,s,t.state.tabSize)}function Ly(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return Pr(t,r-1,r).getBoundingClientRect().right>n}function tS(t,e,n){return Ly(t,e,n)}function nS(t,e,n){if(e!=0)return Ly(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Pr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function rS(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Ot.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function iS(t,e,n,r){let i=rS(t,e.head,e.assoc||-1),s=!r||i.type!=Ot.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==De.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return E.cursor(a,n?-1:1)}return E.cursor(n?i.to:i.from,n?-1:1)}function pp(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Hk(i,s,l,o,n),c=gy;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(c))return o}else{if(!r)return u;a=r(c)}o=u}}function sS(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==ze.Space&&(i=l),i==l}}function lS(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return E.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),o=(s<0?d.top:d.bottom)+c}let h=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let g=o+(f+d)*s,w=Py(t,{x:h,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?w<i:w>i)){let x=t.docView.coordsForChar(w),p=!x||g<x.top?-1:1;return E.cursor(w,p,void 0,l)}}}function gs(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function Ry(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=gs(t,i.from,0);l!=i.from&&(s=E.cursor(l,-1))}else{let l=gs(t,i.from,-1),o=gs(t,i.to,1);(l!=i.from||o!=i.to)&&(s=E.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?E.create(n,e.mainIndex):e}function su(t,e,n){let r=gs(t.state.facet(tl).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:E.cursor(r,r<n.from?1:-1)}const ts="￿";class oS{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(te.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ts}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=ae.get(i),a=ae.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:Io(i))||Io(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=ae.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(aS(e,r.node,r.offset)?n:0))}}function aS(t,e,n){for(;;){if(!e||n<pn(e))return!1;if(e==t)return!0;n=Or(e)+1,e=e.parentNode}}class mp{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class uS{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:fS(e),a=new oS(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=dS(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!Nc(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!Nc(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),c=e.viewport;if((R.ios||R.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(a,u),f=Math.max(a,u),d=c.from-h,g=c.to-f;(d==0||d==1||h==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=E.single(u,a)}}}function Iy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||R.android&&e.text.length<o-l)&&(a=i.to,u="end");let c=hS(t.state.doc.sliceString(l,o,ts),e.text,a-l,u);c&&(R.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==ts+ts&&c.toB--,n={from:l+c.from,to:l+c.toA,insert:Z.of(e.text.slice(c.from,c.toB).split(ts))})}else r&&(!t.hasFocus&&t.state.facet(yn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(R.mac||R.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Z.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:R.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Z.of([" "])}),n)return uf(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=Ry(t.state.facet(tl).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function uf(t,e,n,r=-1){if(R.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(R.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ci(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&ci(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&ci(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=cS(t,e,n));return t.state.facet(ky).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function cS(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,c=gs(i.facet(tl).map(h=>h(t)),u,a);e.from==c&&(l=c)}if(l>-1)r={changes:e,selection:E.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),h,f=n&&Oy(t,n.main.head);if(f){let w=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-w}}else h=t.state.doc.lineAt(s.head);let d=s.to-e.to,g=s.to-s.from;r=i.changeByRange(w=>{if(w.from==s.from&&w.to==s.to)return{changes:a,range:u||w.map(a)};let x=w.to-d,p=x-c.length;if(w.to-w.from!=g||t.state.sliceDoc(p,x)!=c||w.to>=h.from&&w.from<=h.to)return{range:w};let y=i.changes({from:p,to:x,insert:e.insert}),v=w.to-s.to;return{changes:y,range:u?E.range(Math.max(0,u.anchor+v),Math.max(0,u.head+v)):w.map(y)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function hS(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function fS(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new mp(n,r)),(i!=n||s!=r)&&e.push(new mp(i,s))),e}function dS(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?E.single(n+e,r+e):null}class pS{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,R.safari&&e.contentDOM.addEventListener("input",()=>null),R.gecko&&DS(e.contentDOM.ownerDocument)}handleEvent(e){!SS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=mS(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&jy.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),R.android&&R.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return R.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=By.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||gS.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ci(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:R.safari&&!R.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function gp(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){cn(n.state,i)}}}function mS(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(gp(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(gp(r.value,a))}}for(let r in Qt)n(r).handlers.push(Qt[r]);for(let r in Bt)n(r).observers.push(Bt[r]);return e}const By=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],gS="dthko",jy=[16,17,18,20,91,92,224,225],Ml=6;function Nl(t){return Math.max(0,t)*.7+8}function yS(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class vS{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Ck(e.contentDOM),this.atoms=e.state.facet(tl).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(te.allowMultipleSelections)&&wS(e,n),this.dragging=kS(e,n)&&zy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&yS(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=Dy(this.view);e.clientX-a.left<=i+Ml?n=-Nl(i-e.clientX):e.clientX+a.right>=l-Ml&&(n=Nl(e.clientX-l)),e.clientY-a.top<=s+Ml?r=-Nl(s-e.clientY):e.clientY+a.bottom>=o-Ml&&(r=Nl(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=Ry(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function wS(t,e){let n=t.state.facet(yy);return n.length?n[0](e):R.mac?e.metaKey:e.ctrlKey}function xS(t,e){let n=t.state.facet(vy);return n.length?n[0](e):R.mac?!e.altKey:!e.ctrlKey}function kS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=_s(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function SS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ae.get(n))&&r.ignoreEvent(e))return!1;return!0}const Qt=Object.create(null),Bt=Object.create(null),Fy=R.ie&&R.ie_version<15||R.ios&&R.webkit_version<604;function CS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),_y(t,n.value)},50)}function wa(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function _y(t,e){e=wa(t.state,lf,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(Hc!=null&&n.selection.ranges.every(a=>a.empty)&&Hc==s.toString()){let a=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let h=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:E.cursor(u.from+h.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:E.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Bt.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Qt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Bt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Bt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Qt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(wy))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=ES(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new vS(t,e,n,r)),r&&t.observer.ignore(()=>{X0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function yp(t,e,n,r){if(r==1)return E.cursor(e,n);if(r==2)return Xk(t.state,e,n);{let i=Ee.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,E.range(l,o)}}let vp=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function bS(t,e,n,r){let i=Ee.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&vp(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&vp(n,r,o)?1:l&&l.bottom>=r?-1:1}function wp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:bS(t,n,e.clientX,e.clientY)}}const AS=R.ie&&R.ie_version<=11;let xp=null,kp=0,Sp=0;function zy(t){if(!AS)return t.detail;let e=xp,n=Sp;return xp=t,Sp=Date.now(),kp=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(kp+1)%3:1}function ES(t,e){let n=wp(t,e),r=zy(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=wp(t,s),u,c=yp(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let h=yp(t,n.pos,n.bias,r),f=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=f<c.from?E.range(f,d):E.range(d,f)}return l?i.replaceRange(i.main.extend(c.from,c.to)):o&&r==1&&i.ranges.length>1&&(u=TS(i,a.pos))?u:o?i.addRange(c):E.create([c])}}}function TS(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return E.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Qt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=E.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",wa(t.state,of,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Qt.dragend=t=>(t.inputState.draggedContent=null,!1);function Cp(t,e,n,r){if(n=wa(t.state,lf,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&xS(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Qt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&Cp(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return Cp(t,e,r,!0),!0}return!1};Qt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Fy?null:e.clipboardData;return n?(_y(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(CS(t),!1)};function MS(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function NS(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:wa(t,of,e.join(t.lineBreak)),ranges:n,linewise:r}}let Hc=null;Qt.copy=Qt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=NS(t.state);if(!n&&!i)return!1;Hc=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=Fy?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(MS(t,n),!1)};const Hy=Di.define();function Wy(t,e){let n=[];for(let r of t.facet(Sy)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:Hy.of(!0)}):null}function Vy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Wy(t.state,e);n?t.dispatch(n):t.update([])}},10)}Bt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Vy(t)};Bt.blur=t=>{t.observer.clearSelectionRange(),Vy(t)};Bt.compositionstart=Bt.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Bt.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,R.chrome&&R.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Bt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Qt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return uf(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(R.chrome&&R.android&&(i=By.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return R.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),R.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Bt.compositionend(t,e),20),!1};const bp=new Set;function DS(t){bp.has(t)||(bp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Ap=["pre-wrap","normal","pre-line","break-spaces"];let bi=!1;function Ep(){bi=!1}class OS{constructor(e){this.lineWrapping=e,this.doc=Z.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Ap.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=Ap.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let c=l[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class PS{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class un{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Ot.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ir?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new un(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var fe=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(fe||(fe={}));const so=.001;class nt{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>so&&(bi=!0),this.height=e)}replace(e,n,r){return nt.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:c,toB:h}=i[o],f=s.lineAt(a,fe.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,fe.ByPosNoHeight,r,0,0);for(h+=d.to-u,u=d.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,fe.ByPosNoHeight,r,0,0));c+=f.from-a,a=f.from;let g=cf.build(r.setDoc(l),e,c,h);s=Fo(s,s.replace(a,u,g))}return s.updateHeight(r,0)}static empty(){return new yt(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new LS(nt.of(e.slice(0,n)),l,nt.of(e.slice(r)))}}function Fo(t,e){return t==e?t:(t.constructor!=e.constructor&&(bi=!0),e)}nt.prototype.size=1;class Uy extends nt{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new un(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class yt extends Uy{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new un(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof yt||i instanceof Be&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Be?i=new yt(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):nt.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Be extends nt{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),h=o+c.length*a,f=Math.max(r,e-h/2);return new un(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:c,length:h}=n.doc.line(s+u);return new un(c,h,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==fe.ByHeight)return this.blockAt(e,r,i,s);if(n==fe.ByPosNoHeight){let{from:d,to:g}=r.doc.lineAt(e);return new un(d,g-d,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=o+u.length*a,h=u.number-l,f=i+o*h+a*(u.from-s-h);return new un(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let c=e,h=i;c<=n;){let f=r.doc.lineAt(c);if(c==e){let g=f.number-o;h+=a*g+u*(e-s-g)}let d=a+u*f.length;l(new un(f.from,f.length,h,d,0)),h+=d,c=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Be?r[r.length-1]=new Be(s.length+i):r.push(null,new Be(i-1))}if(e>0){let s=r[0];s instanceof Be?r[0]=new Be(e+s.length):r.unshift(new Be(e-1),null)}return nt.of(r)}decomposeLeft(e,n){n.push(new Be(e-1),null)}decomposeRight(e,n){n.push(null,new Be(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Be(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let c=e.doc.lineAt(o).length;l.length&&l.push(null);let h=i.heights[i.index++];a==-1?a=h:Math.abs(h-a)>=so&&(a=-2);let f=new yt(c,h);f.outdated=!1,l.push(f),o+=c+1}o<=s&&l.push(null,new Be(s-o).updateHeight(e,o));let u=nt.of(l);return(a<0||Math.abs(u.height-this.height)>=so||Math.abs(a-this.heightMetrics(e,n).perLine)>=so)&&(bi=!0),Fo(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class LS extends nt{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==fe.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let c=n==fe.ByPosNoHeight?fe.ByPosNoHeight:fe.ByPos;return a?u.join(this.right.lineAt(o,c,r,l,o)):this.left.lineAt(o,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,fe.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&Tp(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),Tp(s,o)}return nt.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?nt.of(this.break?[e,null,n]:[e,n]):(this.left=Fo(this.left,e),this.right=Fo(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Tp(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Be&&(r=t[e+1])instanceof Be&&t.splice(e-1,3,new Be(n.length+1+r.length))}const RS=5;class cf{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof yt?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new yt(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new Uy(l,i,r)):(l||s||i>=RS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new yt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Be(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof yt)return e;let n=new yt(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof yt)&&!this.isCovered?this.nodes.push(new yt(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof yt&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new cf(r,e);return re.spans(n,r,i,s,0),s.finish(r)}}function IS(t,e,n){let r=new BS;return re.compare(t,e,n,r,0),r.changes}class BS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&io(e,n,this.changes,5)}}function jS(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function FS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function _S(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class lu{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return G.replace({widget:new zS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class zS extends Xs{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Mp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Np,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=De.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(af).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new OS(n),this.stateDeco=e.facet(Hs).filter(r=>typeof r!="function"),this.heightMap=nt.empty().applyChanges(this.stateDeco,Z.empty,this.heightOracle.setDoc(e.doc),[new Pt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=G.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new Dl(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Np:new hf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ns(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Hs).filter(c=>typeof c!="function");let i=e.changedRanges,s=Pt.extendWithRanges(i,IS(r,this.stateDeco,e?e.changes:Pe.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Ep(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||bi)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Vk)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?De.RTL:De.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,c=0;if(o.width&&o.height){let{scaleX:S,scaleY:C}=J0(n,o);(S>.005&&Math.abs(this.scaleX-S)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=S,this.scaleY=C,u|=16,l=a=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=ey(e.scrollDOM);let g=(this.printing?_S:jS)(n,this.paddingTop),w=g.top-this.pixelViewport.top,x=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!FS(e.dom))return 0;let y=o.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(l=!0),l||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:A,textHeight:b}=e.docView.measureTextSize();l=C>0&&i.refresh(s,C,A,b,Math.max(5,y/A),S),l&&(e.docView.minWidth=0,u|=16)}w>0&&x>0?c=Math.max(w,x):w<0&&x<0&&(c=Math.min(w,x)),Ep();for(let C of this.viewports){let A=C.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?nt.empty().applyChanges(this.stateDeco,Z.empty,this.heightOracle,[new Pt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new PS(C.from,A))}bi&&(u|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new Dl(i.lineAt(l-r*1e3,fe.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,fe.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,fe.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=h.top:f=h.bottom-c,a=new Dl(i.lineAt(f-1e3/2,fe.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,fe.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Dl(this.heightMap.lineAt(r,fe.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,fe.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,fe.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,fe.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new lu(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=De.LTR&&!r)return[];let o=[],a=(c,h,f,d)=>{if(h-c<s)return;let g=this.state.selection.main,w=[g.from];g.empty||w.push(g.to);for(let p of w)if(p>c&&p<h){a(c,p-10,f,d),a(p+10,h,f,d);return}let x=WS(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-c)<s&&Math.abs(p.to-h)<s&&!w.some(y=>p.from<y&&p.to>y));if(!x){if(h<f.to&&n&&r&&n.visibleRanges.some(v=>v.from<=h&&v.to>=h)){let v=n.moveToLineBoundary(E.cursor(h),!1,!0).head;v>c&&(h=v)}let p=this.gapSize(f,c,h,d),y=r||p<2e6?p:2e6;x=new lu(c,h,p,y)}o.push(x)},u=c=>{if(c.length<l||c.type!=Ot.Text)return;let h=HS(c.from,c.to,this.stateDeco);if(h.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,g;if(r){let w=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,p;if(f!=null){let y=Pl(h,f),v=((this.visibleBottom-this.visibleTop)/2+w)/c.height;x=y-v,p=y+v}else x=(this.visibleTop-c.top-w)/c.height,p=(this.visibleBottom-c.top+w)/c.height;d=Ol(h,x),g=Ol(h,p)}else{let w=h.total*this.heightOracle.charWidth,x=i*this.heightOracle.charWidth,p=0;if(w>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=A.size-A.displaySize);let y=this.pixelViewport.left+p,v=this.pixelViewport.right+p,S,C;if(f!=null){let A=Pl(h,f),b=((v-y)/2+x)/w;S=A-b,C=A+b}else S=(y-x)/w,C=(v+x)/w;d=Ol(h,S),g=Ol(h,C)}d>c.from&&a(c.from,d,c,h),g<c.to&&a(g,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return o}gapSize(e,n,r,i){let s=Pl(i,r)-Pl(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){lu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=G.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];re.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||ns(this.heightMap.lineAt(e,fe.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||ns(this.heightMap.lineAt(this.scaler.fromDOM(e),fe.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return ns(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Dl{constructor(e,n){this.from=e,this.to=n}}function HS(t,e,n){let r=[],i=t,s=0;return re.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Ol({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function Pl(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function WS(t,e){for(let n of t)if(e(n))return n}const Np={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class hf{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,fe.ByPos,e,0,0).top,c=n.lineAt(a,fe.ByPos,e,0,0).bottom;return i+=c-u,{from:o,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof hf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function ns(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new un(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>ns(i,e)):t._content)}const Ll=_.define({combine:t=>t.join(" ")}),Wc=_.define({combine:t=>t.indexOf(!0)>-1}),Vc=nr.newName(),$y=nr.newName(),Ky=nr.newName(),Gy={"&light":"."+$y,"&dark":"."+Ky};function Uc(t,e,n){return new nr(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const VS=Uc("."+Vc,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Gy),US={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ou=R.ie&&R.ie_version<=11;class $S{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new bk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(R.ie&&R.ie_version<=11||R.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&R.android&&e.constructor.EDIT_CONTEXT!==!1&&!(R.chrome&&R.chrome_version<126)&&(this.editContext=new GS(e),e.state.facet(yn)&&(e.contentDOM.editContext=this.editContext.editContext)),ou&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(yn)?r.root.activeElement!=this.dom:!ro(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(R.ie&&R.ie_version<=11||R.android&&R.chrome)&&!r.state.selection.main.empty&&i.focusNode&&ps(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=_s(e.root);if(!n)return!1;let r=R.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&KS(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=ro(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Ek(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,US),ou&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ou&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&ci(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&ro(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new uS(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=Iy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=Dp(n,e.previousSibling||e.target.previousSibling,-1),i=Dp(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(yn)!=e.state.facet(yn)&&(e.view.contentDOM.editContext=e.state.facet(yn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Dp(t,e,n){for(;e;){let r=ae.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Op(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return ps(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function KS(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Op(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?Op(t,n):null}class GS{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:Z.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=E.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((R.mac||R.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:Z.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);uf(e,u,E.single(this.toEditorPos(r.selectionStart,c),this.toEditorPos(r.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(G.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:Ay.of(G.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=_s(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let c=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class F{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Ak(e.parent)||document,this.viewState=new Mp(e.state||te.create(e)),e.scrollTo&&e.scrollTo.is(Tl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ei).map(i=>new ru(i));for(let i of this.plugins)i.update(this);this.observer=new $S(this),this.inputState=new pS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new up(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Ye?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(Hy))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=Wy(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(te.phrases)!=this.state.facet(te.phrases))return this.setState(s);i=jo.create(this,s,e),i.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new hi(d.empty?d:E.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(Tl)&&(h=d.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=_o.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(es)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Ll)!=i.state.facet(Ll)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(_c))try{f(i)}catch(d){cn(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Iy(this,c)&&u.force&&ci(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Mp(e),this.plugins=e.facet(ei).map(r=>new ru(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new up(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(ei),r=e.state.facet(ei);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new ru(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){cn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(ey(r))s=-1,l=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,l=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(g){return cn(this.state,g),Pp}}),h=jo.create(this,this.state,[]),f=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=Pp)try{let g=u[d];g.write&&g.write(c[d],this)}catch(g){cn(this.state,g)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(g>1||g<-1){i=i+g,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(_c))o(n)}get themeClasses(){return Vc+" "+(this.state.facet(Wc)?Ky:$y)+" "+this.state.facet(Ll)}updateAttrs(){let e=Lp(this,Ey,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(yn)?"true":"false",class:"cm-content",style:`${R.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Lp(this,af,n);let r=this.observer.ignore(()=>{let i=Rc(this.contentDOM,this.contentAttrs,n),s=Rc(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(F.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(es);let e=this.state.facet(F.cspNonce);nr.mount(this.root,this.styleModules.concat(VS).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return su(this,e,pp(this,e,n,r))}moveByGroup(e,n){return su(this,e,pp(this,e,n,r=>sS(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return E.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return iS(this,e,n,r)}moveVertically(e,n,r){return su(this,e,lS(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Py(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[Vn.find(s,e-i.from,-1,n)];return ya(r,l.dir==De.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Cy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>qS)return my(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||py(s.isolates,r=ap(this,e))))return s.order;r||(r=ap(this,e));let i=zk(e.text,n,r);return this.bidiCache.push(new _o(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||R.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{X0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Tl.of(new hi(typeof e=="number"?E.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Tl.of(new hi(E.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return St.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return St.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=nr.newName(),i=[Ll.of(r),es.of(Uc(`.${r}`,e))];return n&&n.dark&&i.push(Wc.of(!0)),i}static baseTheme(e){return da.lowest(es.of(Uc("."+Vc,e,Gy)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ae.get(r)||ae.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}F.styleModule=es;F.inputHandler=ky;F.clipboardInputFilter=lf;F.clipboardOutputFilter=of;F.scrollHandler=by;F.focusChangeEffect=Sy;F.perLineTextDirection=Cy;F.exceptionSink=xy;F.updateListener=_c;F.editable=yn;F.mouseSelectionStyle=wy;F.dragMovesSelection=vy;F.clickAddsSelectionRange=yy;F.decorations=Hs;F.outerDecorations=Ty;F.atomicRanges=tl;F.bidiIsolatedRanges=My;F.scrollMargins=Ny;F.darkTheme=Wc;F.cspNonce=_.define({combine:t=>t.length?t[0]:""});F.contentAttributes=af;F.editorAttributes=Ey;F.lineWrapping=F.contentAttributes.of({class:"cm-lineWrapping"});F.announce=ce.define();const qS=4096,Pp={};class _o{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:De.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new _o(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function Lp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&Lc(l,n)}return n}const YS=R.mac?"mac":R.windows?"win":R.linux?"linux":"key";function QS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function Rl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const JS=da.default(F.domEventHandlers({keydown(t,e){return Qy(Yy(e.state),t,e,"editor")}})),qy=_.define({enables:JS}),Rp=new WeakMap;function Yy(t){let e=t.facet(qy),n=Rp.get(e);return n||Rp.set(e,n=eC(e.reduce((r,i)=>r.concat(i),[]))),n}function XS(t,e,n){return Qy(Yy(t.state),e,t,n)}let _n=null;const ZS=4e3;function eC(t,e=YS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,c)=>{var h,f;let d=n[l]||(n[l]=Object.create(null)),g=o.split(/ (?!$)/).map(p=>QS(p,e));for(let p=1;p<g.length;p++){let y=g.slice(0,p).join(" ");i(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[v=>{let S=_n={view:v,prefix:y,scope:l};return setTimeout(()=>{_n==S&&(_n=null)},ZS),!0}]})}let w=g.join(" ");i(w,!1);let x=d[w]||(d[w]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});a&&x.run.push(a),u&&(x.preventDefault=!0),c&&(x.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=l;for(let f in c)c[f].run.push(d=>h(d,$c))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let $c=null;function Qy(t,e,n,r){$c=e;let i=xk(e),s=I0(i,0),l=B0(s)==i.length&&i!=" ",o="",a=!1,u=!1,c=!1;_n&&_n.view==n&&_n.scope==r&&(o=_n.prefix+" ",jy.indexOf(e.keyCode)<0&&(u=!0,_n=null));let h=new Set,f=x=>{if(x){for(let p of x.run)if(!h.has(p)&&(h.add(p),p(n)))return x.stopPropagation&&(c=!0),!0;x.preventDefault&&(x.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],g,w;return d&&(f(d[o+Rl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(R.windows&&e.ctrlKey&&e.altKey)&&!(R.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=rr[e.keyCode])&&g!=i?(f(d[o+Rl(g,e,!0)])||e.shiftKey&&(w=Fs[e.keyCode])!=i&&w!=g&&f(d[o+Rl(w,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(d[o+Rl(i,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),$c=null,a}function tC(){return rC}const nC=G.line({class:"cm-activeLine"}),rC=St.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(nC.range(i.from)),e=i.from)}return G.set(n)}},{decorations:t=>t.decorations}),Ip=_.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function zo(t,e){let n=t.plugin(Jy),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Jy=St.fromClass(class{constructor(t){this.input=t.state.facet(Ho),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(Ip);this.top=new Il(t,!0,e.topContainer),this.bottom=new Il(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(Ip);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Il(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Il(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Ho);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),o.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:l).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>F.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Il{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Bp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Bp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Bp(t){let e=t.nextSibling;return t.remove(),e}const Ho=_.define({enables:Jy});class sr extends ki{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}sr.prototype.elementClass="";sr.prototype.toDOM=void 0;sr.prototype.mapMode=vt.TrackBefore;sr.prototype.startSide=sr.prototype.endSide=-1;sr.prototype.point=!0;const au=_.define(),iC=_.define(),sC={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>re.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ys=_.define();function lC(t){return[Xy(),ys.of({...sC,...t})]}const jp=_.define({combine:t=>t.some(e=>e)});function Xy(t){return[oC]}const oC=St.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ys).map(e=>new _p(t,e)),this.fixed=!t.state.facet(jp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(jp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=re.iter(this.view.state.facet(au),this.view.viewport.from),r=[],i=this.gutters.map(s=>new aC(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==Ot.Text&&l){Kc(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==Ot.Text){Kc(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ys),n=t.state.facet(ys),r=t.docChanged||t.heightChanged||t.viewportChanged||!re.eq(t.startState.facet(au),t.state.facet(au),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new _p(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>F.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==De.LTR?{left:r,right:i}:{right:r,left:i}})});function Fp(t){return Array.isArray(t)?t:[t]}function Kc(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class aC{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=re.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new Zy(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Kc(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(iC)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class _p{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=Fp(n.markers(e)),n.initialSpacer&&(this.spacer=new Zy(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=Fp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!re.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Zy{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),uC(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let h=l;h<this.markers.length;h++)if(this.markers[h].compare(a)){o=h,u=!0;break}}else o=this.markers.length;for(;l<o;){let c=this.markers[l++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function uC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const cC=_.define(),hC=_.define(),ti=_.define({combine(t){return ma(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class uu extends sr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function cu(t,e){return t.state.facet(ti).formatNumber(e,t.state)}const fC=ys.compute([ti],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(cC)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new uu(cu(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(hC)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(ti)!=e.state.facet(ti),initialSpacer(e){return new uu(cu(e,zp(e.state.doc.lines)))},updateSpacer(e,n){let r=cu(n.view,zp(n.view.state.doc.lines));return r==e.number?e:new uu(r)},domEventHandlers:t.facet(ti).domEventHandlers,side:"before"}));function dC(t={}){return[ti.of(t),Xy(),fC]}function zp(t){let e=9;for(;e<t;)e=e*10+9;return e}const pC=1024;let mC=0;class hu{constructor(e,n){this.from=e,this.to=n}}class J{constructor(e={}){this.id=mC++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ht.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}J.closedBy=new J({deserialize:t=>t.split(" ")});J.openedBy=new J({deserialize:t=>t.split(" ")});J.group=new J({deserialize:t=>t.split(" ")});J.isolate=new J({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});J.contextHash=new J({perNode:!0});J.lookAhead=new J({perNode:!0});J.mounted=new J({perNode:!0});class Wo{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[J.mounted.id]}}const gC=Object.create(null);class ht{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):gC,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ht(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(J.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(J.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}ht.none=new ht("",Object.create(null),0,8);class ff{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new ht(r.name,i,r.id,r.flags):r)}return new ff(n)}}const Bl=new WeakMap,Hp=new WeakMap;var Fe;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Fe||(Fe={}));class ve{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=Wo.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new qc(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Bl.get(this)||this.topNode,s=new qc(i);return s.moveTo(e,n),Bl.set(this,s._tree),s}get topNode(){return new Lt(this,0,0,null)}resolve(e,n=0){let r=Ws(Bl.get(this)||this.topNode,e,n,!1);return Bl.set(this,r),r}resolveInner(e,n=0){let r=Ws(Hp.get(this)||this.topNode,e,n,!0);return Hp.set(this,r),r}resolveStack(e,n=0){return wC(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&Fe.IncludeAnonymous)>0;for(let a=this.cursor(l|Fe.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:mf(ht.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new ve(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new ve(ht.none,n,r,i)))}static build(e){return xC(e)}}ve.empty=new ve(ht.none,[],[],0);class df{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new df(this.buffer,this.index)}}class lr{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return ht.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(ev(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new lr(s,l,this.set)}}function ev(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ws(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Lt&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:Fe.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Lt&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class tv{cursor(e=0){return new qc(this,e)}getChild(e,n=null,r=null){let i=Wp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Wp(this,e,n,r)}resolve(e,n=0){return Ws(this,e,n,!1)}resolveInner(e,n=0){return Ws(this,e,n,!0)}matchContext(e){return Gc(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Lt extends tv{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let c=o[e],h=a[e]+l.from;if(ev(i,r,h,h+c.length)){if(c instanceof lr){if(s&Fe.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,r-h,i);if(f>-1)return new Un(new yC(l,c,e,h),null,f)}else if(s&Fe.IncludeAnonymous||!c.type.isAnonymous||pf(c)){let f;if(!(s&Fe.IgnoreMounts)&&(f=Wo.get(c))&&!f.overlay)return new Lt(f.tree,h,e,l);let d=new Lt(c,h,e,l);return s&Fe.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&Fe.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Fe.IgnoreOverlays)&&(i=Wo.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Lt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Wp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Gc(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class yC{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Un extends tv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Un(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Fe.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Un(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Un(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Un(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new ve(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function nv(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Lt&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new vC(i,n)}class vC{constructor(e,n){this.heads=e,this.node=n}get next(){return nv(this.heads)}}function wC(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Lt?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=Wo.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Lt(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Ws(o,e,n,!1))}}return i?nv(i):r}class qc{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Lt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Lt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Fe.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Fe.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Fe.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&Fe.IncludeAnonymous||o instanceof lr||!o.type.isAnonymous||pf(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Un(this.buffer,n,this.stack[i]);return this.bufferNode=new Un(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Gc(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Gc(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function pf(t){return t.children.some(e=>e instanceof lr||!e.type.isAnonymous||pf(e))}function xC(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=pC,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new df(n,n.length):n,a=r.types,u=0,c=0;function h(C,A,b,D,z,B){let{id:V,start:H,end:Q,size:ie}=o,Se=c,Xe=u;for(;ie<0;)if(o.next(),ie==-1){let q=s[V];b.push(q),D.push(H-C);return}else if(ie==-3){u=V;return}else if(ie==-4){c=V;return}else throw new RangeError(`Unrecognized record size: ${ie}`);let Ft=a[V],P,W,$=H-C;if(Q-H<=i&&(W=x(o.pos-A,z))){let q=new Uint16Array(W.size-W.skip),X=o.pos-W.size,me=q.length;for(;o.pos>X;)me=p(W.start,q,me);P=new lr(q,Q-W.start,r),$=W.start-C}else{let q=o.pos-ie;o.next();let X=[],me=[],j=V>=l?V:-1,Ze=0,se=Q;for(;o.pos>q;)j>=0&&o.id==j&&o.size>=0?(o.end<=se-i&&(g(X,me,H,Ze,o.end,se,j,Se,Xe),Ze=X.length,se=o.end),o.next()):B>2500?f(H,q,X,me):h(H,q,X,me,j,B+1);if(j>=0&&Ze>0&&Ze<X.length&&g(X,me,H,Ze,H,se,j,Se,Xe),X.reverse(),me.reverse(),j>-1&&Ze>0){let ft=d(Ft,Xe);P=mf(Ft,X,me,0,X.length,0,Q-H,ft,ft)}else P=w(Ft,X,me,Q-H,Se-Q,Xe)}b.push(P),D.push($)}function f(C,A,b,D){let z=[],B=0,V=-1;for(;o.pos>A;){let{id:H,start:Q,end:ie,size:Se}=o;if(Se>4)o.next();else{if(V>-1&&Q<V)break;V<0&&(V=ie-i),z.push(H,Q,ie),B++,o.next()}}if(B){let H=new Uint16Array(B*4),Q=z[z.length-2];for(let ie=z.length-3,Se=0;ie>=0;ie-=3)H[Se++]=z[ie],H[Se++]=z[ie+1]-Q,H[Se++]=z[ie+2]-Q,H[Se++]=Se;b.push(new lr(H,z[2]-Q,r)),D.push(Q-C)}}function d(C,A){return(b,D,z)=>{let B=0,V=b.length-1,H,Q;if(V>=0&&(H=b[V])instanceof ve){if(!V&&H.type==C&&H.length==z)return H;(Q=H.prop(J.lookAhead))&&(B=D[V]+H.length+Q)}return w(C,b,D,z,B,A)}}function g(C,A,b,D,z,B,V,H,Q){let ie=[],Se=[];for(;C.length>D;)ie.push(C.pop()),Se.push(A.pop()+b-z);C.push(w(r.types[V],ie,Se,B-z,H-B,Q)),A.push(z-b)}function w(C,A,b,D,z,B,V){if(B){let H=[J.contextHash,B];V=V?[H].concat(V):[H]}if(z>25){let H=[J.lookAhead,z];V=V?[H].concat(V):[H]}return new ve(C,A,b,D,V)}function x(C,A){let b=o.fork(),D=0,z=0,B=0,V=b.end-i,H={size:0,start:0,skip:0};e:for(let Q=b.pos-C;b.pos>Q;){let ie=b.size;if(b.id==A&&ie>=0){H.size=D,H.start=z,H.skip=B,B+=4,D+=4,b.next();continue}let Se=b.pos-ie;if(ie<0||Se<Q||b.start<V)break;let Xe=b.id>=l?4:0,Ft=b.start;for(b.next();b.pos>Se;){if(b.size<0)if(b.size==-3)Xe+=4;else break e;else b.id>=l&&(Xe+=4);b.next()}z=Ft,D+=ie,B+=Xe}return(A<0||D==C)&&(H.size=D,H.start=z,H.skip=B),H.size>4?H:void 0}function p(C,A,b){let{id:D,start:z,end:B,size:V}=o;if(o.next(),V>=0&&D<l){let H=b;if(V>4){let Q=o.pos-(V-4);for(;o.pos>Q;)b=p(C,A,b)}A[--b]=H,A[--b]=B-C,A[--b]=z-C,A[--b]=D}else V==-3?u=D:V==-4&&(c=D);return b}let y=[],v=[];for(;o.pos>0;)h(t.start||0,t.bufferStart||0,y,v,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:y.length?v[0]+y[0].length:0;return new ve(a[t.topID],y.reverse(),v.reverse(),S)}const Vp=new WeakMap;function lo(t,e){if(!t.isAnonymous||e instanceof lr||e.type!=t)return 1;let n=Vp.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof ve)){n=1;break}n+=lo(t,r)}Vp.set(e,n)}return n}function mf(t,e,n,r,i,s,l,o,a){let u=0;for(let g=r;g<i;g++)u+=lo(t,e[g]);let c=Math.ceil(u*1.5/8),h=[],f=[];function d(g,w,x,p,y){for(let v=x;v<p;){let S=v,C=w[v],A=lo(t,g[v]);for(v++;v<p;v++){let b=lo(t,g[v]);if(A+b>=c)break;A+=b}if(v==S+1){if(A>c){let b=g[S];d(b.children,b.positions,0,b.children.length,w[S]+y);continue}h.push(g[S])}else{let b=w[v-1]+g[v-1].length-C;h.push(mf(t,g,w,S,v,C,b,null,a))}f.push(C+y-s)}}return d(e,n,r,i,0),(o||a)(h,f,l)}class br{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new br(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let c=o<n.length?n[o]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;l&&l.from<h;){let f=l;if(a>=f.from||h<=f.to||u){let d=Math.max(f.from,a)-u,g=Math.min(f.to,h)-u;f=d>=g?null:new br(d,g,f.tree,f.offset+u,o>0,!!c)}if(f&&i.push(f),l.to>h)break;l=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}}class rv{startParse(e,n,r){return typeof e=="string"&&(e=new kC(e)),r=r?r.length?r.map(i=>new hu(i.from,i.to)):[new hu(0,0)]:[new hu(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class kC{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new J({perNode:!0});let SC=0;class Mt{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=SC++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Mt&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new Mt(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Vo(e);return r=>r.modified.indexOf(n)>-1?r:Vo.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let CC=0;class Vo{constructor(e){this.name=e,this.instances=[],this.id=CC++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&bC(n,o.modified));if(r)return r;let i=[],s=new Mt(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=AC(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(Vo.get(o,a));return s}}function bC(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function AC(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function EC(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let h=0;;){if(o=="..."&&h>0&&h+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let d=i[h++];if(h==i.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);o=i.slice(h)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new Uo(r,l,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return iv.add(e)}const iv=new J;class Uo{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Uo.empty=new Uo([],2,null);function sv(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function TC(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function MC(t,e,n,r=0,i=t.length){let s=new NC(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class NC{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(l)));let u=i,c=DC(e)||Uo.empty,h=TC(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,o),u),c.opaque)return;let f=e.tree&&e.tree.prop(J.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+o,1),g=this.highlighters.filter(x=>!x.scope||x.scope(f.tree.type)),w=e.firstChild();for(let x=0,p=o;;x++){let y=x<f.overlay.length?f.overlay[x]:null,v=y?y.from+o:a,S=Math.max(n,p),C=Math.min(r,v);if(S<C&&w)for(;e.from<C&&(this.highlightRange(e,S,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=v||!e.nextSibling())););if(!y||v>r)break;p=y.to+o,p>n&&(this.highlightRange(d.cursor(),Math.max(n,y.from+o),Math.min(r,p),"",g),this.startSpan(Math.min(r,p),u))}w&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function DC(t){let e=t.type.prop(iv);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const O=Mt.define,jl=O(),Rn=O(),Up=O(Rn),$p=O(Rn),In=O(),Fl=O(In),fu=O(In),sn=O(),dr=O(sn),nn=O(),rn=O(),Yc=O(),Gi=O(Yc),_l=O(),M={comment:jl,lineComment:O(jl),blockComment:O(jl),docComment:O(jl),name:Rn,variableName:O(Rn),typeName:Up,tagName:O(Up),propertyName:$p,attributeName:O($p),className:O(Rn),labelName:O(Rn),namespace:O(Rn),macroName:O(Rn),literal:In,string:Fl,docString:O(Fl),character:O(Fl),attributeValue:O(Fl),number:fu,integer:O(fu),float:O(fu),bool:O(In),regexp:O(In),escape:O(In),color:O(In),url:O(In),keyword:nn,self:O(nn),null:O(nn),atom:O(nn),unit:O(nn),modifier:O(nn),operatorKeyword:O(nn),controlKeyword:O(nn),definitionKeyword:O(nn),moduleKeyword:O(nn),operator:rn,derefOperator:O(rn),arithmeticOperator:O(rn),logicOperator:O(rn),bitwiseOperator:O(rn),compareOperator:O(rn),updateOperator:O(rn),definitionOperator:O(rn),typeOperator:O(rn),controlOperator:O(rn),punctuation:Yc,separator:O(Yc),bracket:Gi,angleBracket:O(Gi),squareBracket:O(Gi),paren:O(Gi),brace:O(Gi),content:sn,heading:dr,heading1:O(dr),heading2:O(dr),heading3:O(dr),heading4:O(dr),heading5:O(dr),heading6:O(dr),contentSeparator:O(sn),list:O(sn),quote:O(sn),emphasis:O(sn),strong:O(sn),link:O(sn),monospace:O(sn),strikethrough:O(sn),inserted:O(),deleted:O(),changed:O(),invalid:O(),meta:_l,documentMeta:O(_l),annotation:O(_l),processingInstruction:O(_l),definition:Mt.defineModifier("definition"),constant:Mt.defineModifier("constant"),function:Mt.defineModifier("function"),standard:Mt.defineModifier("standard"),local:Mt.defineModifier("local"),special:Mt.defineModifier("special")};for(let t in M){let e=M[t];e instanceof Mt&&(e.name=t)}sv([{tag:M.link,class:"tok-link"},{tag:M.heading,class:"tok-heading"},{tag:M.emphasis,class:"tok-emphasis"},{tag:M.strong,class:"tok-strong"},{tag:M.keyword,class:"tok-keyword"},{tag:M.atom,class:"tok-atom"},{tag:M.bool,class:"tok-bool"},{tag:M.url,class:"tok-url"},{tag:M.labelName,class:"tok-labelName"},{tag:M.inserted,class:"tok-inserted"},{tag:M.deleted,class:"tok-deleted"},{tag:M.literal,class:"tok-literal"},{tag:M.string,class:"tok-string"},{tag:M.number,class:"tok-number"},{tag:[M.regexp,M.escape,M.special(M.string)],class:"tok-string2"},{tag:M.variableName,class:"tok-variableName"},{tag:M.local(M.variableName),class:"tok-variableName tok-local"},{tag:M.definition(M.variableName),class:"tok-variableName tok-definition"},{tag:M.special(M.variableName),class:"tok-variableName2"},{tag:M.definition(M.propertyName),class:"tok-propertyName tok-definition"},{tag:M.typeName,class:"tok-typeName"},{tag:M.namespace,class:"tok-namespace"},{tag:M.className,class:"tok-className"},{tag:M.macroName,class:"tok-macroName"},{tag:M.propertyName,class:"tok-propertyName"},{tag:M.operator,class:"tok-operator"},{tag:M.comment,class:"tok-comment"},{tag:M.meta,class:"tok-meta"},{tag:M.invalid,class:"tok-invalid"},{tag:M.punctuation,class:"tok-punctuation"}]);var du;const ni=new J;function OC(t){return _.define({combine:t?e=>e.concat(t):void 0})}const PC=new J;class $t{constructor(e,n,r=[],i=""){this.data=e,this.name=i,te.prototype.hasOwnProperty("tree")||Object.defineProperty(te.prototype,"tree",{get(){return Ct(this)}}),this.parser=n,this.extension=[or.of(this),te.languageData.of((s,l,o)=>{let a=Kp(s,l,o),u=a.type.prop(ni);if(!u)return[];let c=s.facet(u),h=a.type.prop(PC);if(h){let f=a.resolve(l-a.from,o);for(let d of h)if(d.test(f,s)){let g=s.facet(d.facet);return d.type=="replace"?g:g.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return Kp(e,n,r).type.prop(ni)==this.data}findRegions(e){let n=e.facet(or);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(ni)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(J.mounted);if(o){if(o.tree.prop(ni)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof ve&&i(u,s.positions[a]+l)}};return i(Ct(e),0),r}get allowsNesting(){return!0}}$t.setState=ce.define();function Kp(t,e,n){let r=t.facet(or),i=Ct(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Fe.ExcludeBuffers))s.type.isTop&&(i=s);return i}function Ct(t){let e=t.field($t.state,!1);return e?e.tree:ve.empty}class LC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let qi=null;class Ai{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Ai(e,n,[],ve.empty,0,r,[],null)}startParse(){return this.parser.startParse(new LC(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=ve.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(br.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(br.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=qi;qi=this;try{return e()}finally{qi=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Gp(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,h,f)=>a.push({fromA:u,toA:c,fromB:h,toB:f})),r=br.applyChanges(r,a),i=ve.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&o.push({from:c,to:h})}}}return new Ai(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Gp(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends rv{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=qi;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new ve(ht.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return qi}}function Gp(t,e,n){return br.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Ei{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Ei(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Ai.create(e.facet(or).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Ei(r)}}$t.state=Jt.define({create:Ei.init,update(t,e){for(let n of e.effects)if(n.is($t.setState))return n.value;return e.startState.facet(or)!=e.state.facet(or)?Ei.init(e.state):t.apply(e)}});let lv=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(lv=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const pu=typeof navigator<"u"&&(!((du=navigator.scheduling)===null||du===void 0)&&du.isInputPending)?()=>navigator.scheduling.isInputPending():null,RC=St.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field($t.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field($t.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=lv(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field($t.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!pu?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>pu&&pu()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:$t.setState.of(new Ei(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>cn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),or=_.define({combine(t){return t.length?t[0]:null},enables:t=>[$t.state,RC,F.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),IC=_.define(),gf=_.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Rr(t){let e=t.facet(gf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Vs(t,e){let n="",r=t.tabSize,i=t.facet(gf)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function yf(t,e){t instanceof te&&(t=new xa(t));for(let r of t.state.facet(IC)){let i=r(t,e);if(i!==void 0)return i}let n=Ct(t.state);return n.length>=e?BC(t,n,e):null}class xa{constructor(e,n={}){this.state=e,this.options=n,this.unit=Rr(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return ga(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const ov=new J;function BC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return av(r,t,n)}function av(t,e,n){for(let r=t;r;r=r.next){let i=FC(r.node);if(i)return i(vf.create(e,n,r))}return 0}function jC(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function FC(t){let e=t.type.prop(ov);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(J.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>WC(l,!0,1,void 0,s&&!jC(l)?i.from:void 0)}return t.parent==null?_C:null}function _C(){return 0}class vf extends xa{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new vf(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(zC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return av(this.context.next,this.base,this.pos)}}function zC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function HC(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function WC(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=HC(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const VC=200;function UC(){return te.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+VC)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let c=l.doc.lineAt(u);if(c.from==o)continue;o=c.from;let h=yf(l,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],d=Vs(l,h);f!=d&&a.push({from:c.from,to:c.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const $C=_.define(),KC=new J;function GC(t,e,n){let r=Ct(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(KC);if(a&&(o.to<r.length-50||r.length==t.doc.length||!qC(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function qC(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function qp(t,e,n){for(let r of t.facet($C)){let i=r(t,e,n);if(i)return i}return GC(t,e,n)}function uv(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const cv=ce.define({map:uv}),wf=ce.define({map:uv}),$o=Jt.define({create(){return G.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=Yp(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(cv)&&!YC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(hv),i=r?G.replace({widget:new XC(r(e.state,n.value))}):Qp;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(wf)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=Yp(t,e.selection.main.head)),t},provide:t=>F.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Qp.range(r,i))}return G.set(e,!0)}});function Yp(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function Qc(t,e,n){var r;let i=null;return(r=t.field($o,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function YC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const QC={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},hv=_.define({combine(t){return ma(t,QC)}});function JC(t){return[$o,t2]}function fv(t,e){let{state:n}=t,r=n.facet(hv),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=Qc(t.state,o.from,o.to);a&&t.dispatch({effects:wf.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const Qp=G.replace({widget:new class extends Xs{toDOM(t){return fv(t,null)}}});class XC extends Xs{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return fv(e,this.value)}}const ZC={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class mu extends sr{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function e2(t={}){let e={...ZC,...t},n=new mu(e,!0),r=new mu(e,!1),i=St.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(or)!=l.state.facet(or)||l.startState.field($o,!1)!=l.state.field($o,!1)||Ct(l.startState)!=Ct(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new Dr;for(let a of l.viewportLineBlocks){let u=Qc(l.state,a.from,a.to)?r:qp(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,lC({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||re.empty},initialSpacer(){return new mu(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=Qc(l.state,o.from,o.to);if(u)return l.dispatch({effects:wf.of(u)}),!0;let c=qp(l.state,o.from,o.to);return c?(l.dispatch({effects:cv.of(c)}),!0):!1}}}),JC()]}const t2=F.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ka{constructor(e,n){this.specs=e;let r;function i(o){let a=nr.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof $t?o=>o.prop(ni)==l.data:l?o=>o==l:void 0,this.style=sv(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new nr(r):null,this.themeType=n.themeType}static define(e,n){return new ka(e,n||{})}}const Jc=_.define(),n2=_.define({combine(t){return t.length?[t[0]]:null}});function gu(t){let e=t.facet(Jc);return e.length?e:t.facet(n2)}function r2(t,e){let n=[s2],r;return t instanceof ka&&(t.module&&n.push(F.styleModule.of(t.module)),r=t.themeType),r?n.push(Jc.computeN([F.darkTheme],i=>i.facet(F.darkTheme)==(r=="dark")?[t]:[])):n.push(Jc.of(t)),n}class i2{constructor(e){this.markCache=Object.create(null),this.tree=Ct(e.state),this.decorations=this.buildDeco(e,gu(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Ct(e.state),r=gu(e.state),i=r!=gu(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return G.none;let r=new Dr;for(let{from:i,to:s}of e.visibleRanges)MC(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=G.mark({class:a})))},i,s);return r.finish()}}const s2=da.high(St.fromClass(i2,{decorations:t=>t.decorations})),l2=F.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),dv=1e4,pv="()[]{}",mv=_.define({combine(t){return ma(t,{afterCursor:!0,brackets:pv,maxScanDistance:dv,renderMatch:u2})}}),o2=G.mark({class:"cm-matchingBracket"}),a2=G.mark({class:"cm-nonmatchingBracket"});function u2(t){let e=[],n=t.matched?o2:a2;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const c2=Jt.define({create(){return G.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(mv);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=hn(e.state,i.head,-1,r)||i.head>0&&hn(e.state,i.head-1,1,r)||r.afterCursor&&(hn(e.state,i.head,1,r)||i.head<e.state.doc.length&&hn(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return G.set(n,!0)},provide:t=>F.decorations.from(t)}),h2=[c2,l2];function f2(t={}){return[mv.of(t),h2]}const d2=new J;function Xc(t,e,n){let r=t.prop(e<0?J.openedBy:J.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Zc(t){let e=t.type.prop(d2);return e?e(t.node):t}function hn(t,e,n,r={}){let i=r.maxScanDistance||dv,s=r.brackets||pv,l=Ct(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=Xc(a.type,n,s);if(u&&a.from<a.to){let c=Zc(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return p2(t,e,n,a,c,u,s)}}return m2(t,e,n,l,o.type,i,s)}function p2(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,c=o==null?void 0:o.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=Zc(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(Xc(c.type,n,l))u++;else if(Xc(c.type,-n,l)){if(u==0){let h=Zc(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function m2(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;n<0&&(f+=d.length);let g=e+f*n;for(let w=n>0?0:d.length-1,x=n>0?d.length:-1;w!=x;w+=n){let p=l.indexOf(d[w]);if(!(p<0||r.resolveInner(g+w,1).type!=i))if(p%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:g+w,to:g+w+1},matched:p>>1==a>>1};h--}}n>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}function Jp(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class gv{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Jp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Jp(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function g2(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||y2,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Sf,mergeTokens:t.mergeTokens!==!1}}function y2(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const Xp=new WeakMap;class xf extends $t{constructor(e){let n=OC(e.languageData),r=g2(e),i,s=new class extends rv{createParse(l,o,a){return new w2(i,l,o,a)}};super(n,s,[],e.name),this.topNode=S2(n,this),i=this,this.streamParser=r,this.stateAfter=new J({perNode:!0}),this.tokenTable=e.tokenTable?new xv(r.tokenTable):k2}static define(e){return new xf(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=Xp.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=kf(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let c=r?r(a.from):-1,h=new gv(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;h.pos<u-a.from;)vv(this.streamParser.token,h,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&Xp.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function kf(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof ve&&a<i&&kf(t,o,a,r,i);if(u)return u}return null}function yv(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof ve){if(!(a=yv(t,o,n-l,r-l,i)))break;return i?new ve(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function v2(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&kf(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=yv(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Rr(i):4),tree:ve.empty}}class w2{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=Ai.get(),l=i[0].from,{state:o,tree:a}=v2(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Rr(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Ai.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new gv(n,e?e.state.tabSize:4,e?Rr(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=vv(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=ve.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:x2,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new ve(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new ve(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function vv(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const Sf=Object.create(null),Us=[ht.none],x2=new ff(Us),Zp=[],em=Object.create(null),wv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])wv[t]=kv(Sf,e);class xv{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),wv)}resolve(e){return e?this.table[e]||(this.table[e]=kv(this.extra,e)):0}}const k2=new xv(Sf);function yu(t,e){Zp.indexOf(t)>-1||(Zp.push(t),console.warn(e))}function kv(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let c=t[u]||M[u];c?typeof c=="function"?a.length?a=a.map(c):yu(u,`Modifier ${u} used at start of tag`):a.length?yu(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:yu(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=em[i];if(s)return s.id;let l=em[i]=ht.define({id:Us.length,name:r,props:[EC({[r]:n})]});return Us.push(l),l.id}function S2(t,e){let n=ht.define({id:Us.length,name:"Document",props:[ni.add(()=>t),ov.add(()=>r=>e.getIndent(r))],top:!0});return Us.push(n),n}De.RTL,De.LTR;const C2="#e5c07b",tm="#e06c75",b2="#56b6c2",A2="#ffffff",oo="#abb2bf",eh="#7d8799",E2="#61afef",T2="#98c379",nm="#d19a66",M2="#c678dd",N2="#21252b",rm="#2c313a",im="#282c34",vu="#353a42",D2="#3E4451",sm="#528bff",O2=F.theme({"&":{color:oo,backgroundColor:im},".cm-content":{caretColor:sm},".cm-cursor, .cm-dropCursor":{borderLeftColor:sm},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:D2},".cm-panels":{backgroundColor:N2,color:oo},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:im,color:eh,border:"none"},".cm-activeLineGutter":{backgroundColor:rm},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:vu},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:vu,borderBottomColor:vu},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:rm,color:oo}}},{dark:!0}),P2=ka.define([{tag:M.keyword,color:M2},{tag:[M.name,M.deleted,M.character,M.propertyName,M.macroName],color:tm},{tag:[M.function(M.variableName),M.labelName],color:E2},{tag:[M.color,M.constant(M.name),M.standard(M.name)],color:nm},{tag:[M.definition(M.name),M.separator],color:oo},{tag:[M.typeName,M.className,M.number,M.changed,M.annotation,M.modifier,M.self,M.namespace],color:C2},{tag:[M.operator,M.operatorKeyword,M.url,M.escape,M.regexp,M.link,M.special(M.string)],color:b2},{tag:[M.meta,M.comment],color:eh},{tag:M.strong,fontWeight:"bold"},{tag:M.emphasis,fontStyle:"italic"},{tag:M.strikethrough,textDecoration:"line-through"},{tag:M.link,color:eh,textDecoration:"underline"},{tag:M.heading,fontWeight:"bold",color:tm},{tag:[M.atom,M.bool,M.special(M.variableName)],color:nm},{tag:[M.processingInstruction,M.string,M.inserted],color:T2},{tag:M.invalid,color:A2}]),L2=[O2,r2(P2)],R2=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=bf(t.state,n.from);return r.line?I2(t):r.block?j2(t):!1};function Cf(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const I2=Cf(z2,0),B2=Cf(Sv,0),j2=Cf((t,e)=>Sv(t,e,_2(e)),0);function bf(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Yi=50;function F2(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Yi,r),l=t.sliceDoc(i,i+Yi),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let c,h;i-r<=2*Yi?c=h=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+Yi),h=t.sliceDoc(i-Yi,i));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(h)[0].length,g=h.length-d-n.length;return c.slice(f,f+e.length)==e&&h.slice(g,g+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(h.charAt(g-1))?1:0}}:null}function _2(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Sv(t,e,n=e.selection.ranges){let r=n.map(s=>bf(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>F2(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:c}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function z2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=bf(e,s).line;if(u){for(let c=s;c<=l;){let h=e.doc.lineAt(c);if(h.from>i&&(s==l||l>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,g=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),r.push({line:h,comment:g,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(a<1e9)for(let c=o;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:c,single:h}of r)(h||!c)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,c=u+a.length;l.text[c-l.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}function Oi(t,e){return E.create(t.ranges.map(e),t.mainIndex)}function Xt(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Zt({state:t,dispatch:e},n){let r=Oi(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Xt(t,r)),!0)}function Sa(t,e){return E.cursor(e?t.to:t.from)}function Cv(t,e){return Zt(t,n=>n.empty?t.moveByChar(n,e):Sa(n,e))}function Je(t){return t.textDirectionAt(t.state.selection.main.head)==De.LTR}const bv=t=>Cv(t,!Je(t)),Av=t=>Cv(t,Je(t));function Ev(t,e){return Zt(t,n=>n.empty?t.moveByGroup(n,e):Sa(n,e))}const H2=t=>Ev(t,!Je(t)),W2=t=>Ev(t,Je(t));function V2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Ca(t,e,n){let r=Ct(t).resolveInner(e.head),i=n?J.closedBy:J.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;V2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?hn(t,r.from,1):hn(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,E.cursor(o,n?-1:1)}const U2=t=>Zt(t,e=>Ca(t.state,e,!Je(t))),$2=t=>Zt(t,e=>Ca(t.state,e,Je(t)));function Tv(t,e){return Zt(t,n=>{if(!n.empty)return Sa(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const Mv=t=>Tv(t,!1),Nv=t=>Tv(t,!0);function Dv(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(F.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function Ov(t,e){let n=Dv(t),{state:r}=t,i=Oi(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):Sa(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=F.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(Xt(r,i),{effects:s}),!0}const lm=t=>Ov(t,!1),th=t=>Ov(t,!0);function hr(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=E.cursor(r.from+s))}return i}const K2=t=>Zt(t,e=>hr(t,e,!0)),G2=t=>Zt(t,e=>hr(t,e,!1)),q2=t=>Zt(t,e=>hr(t,e,!Je(t))),Y2=t=>Zt(t,e=>hr(t,e,Je(t))),Q2=t=>Zt(t,e=>E.cursor(t.lineBlockAt(e.head).from,1)),J2=t=>Zt(t,e=>E.cursor(t.lineBlockAt(e.head).to,-1));function X2(t,e,n){let r=!1,i=Oi(t.selection,s=>{let l=hn(t,s.head,-1)||hn(t,s.head,1)||s.head>0&&hn(t,s.head-1,1)||s.head<t.doc.length&&hn(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return E.cursor(o)});return r?(e(Xt(t,i)),!0):!1}const Z2=({state:t,dispatch:e})=>X2(t,e);function jt(t,e){let n=Oi(t.state.selection,r=>{let i=e(r);return E.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Xt(t.state,n)),!0)}function Pv(t,e){return jt(t,n=>t.moveByChar(n,e))}const Lv=t=>Pv(t,!Je(t)),Rv=t=>Pv(t,Je(t));function Iv(t,e){return jt(t,n=>t.moveByGroup(n,e))}const eb=t=>Iv(t,!Je(t)),tb=t=>Iv(t,Je(t)),nb=t=>jt(t,e=>Ca(t.state,e,!Je(t))),rb=t=>jt(t,e=>Ca(t.state,e,Je(t)));function Bv(t,e){return jt(t,n=>t.moveVertically(n,e))}const jv=t=>Bv(t,!1),Fv=t=>Bv(t,!0);function _v(t,e){return jt(t,n=>t.moveVertically(n,e,Dv(t).height))}const om=t=>_v(t,!1),am=t=>_v(t,!0),ib=t=>jt(t,e=>hr(t,e,!0)),sb=t=>jt(t,e=>hr(t,e,!1)),lb=t=>jt(t,e=>hr(t,e,!Je(t))),ob=t=>jt(t,e=>hr(t,e,Je(t))),ab=t=>jt(t,e=>E.cursor(t.lineBlockAt(e.head).from)),ub=t=>jt(t,e=>E.cursor(t.lineBlockAt(e.head).to)),um=({state:t,dispatch:e})=>(e(Xt(t,{anchor:0})),!0),cm=({state:t,dispatch:e})=>(e(Xt(t,{anchor:t.doc.length})),!0),hm=({state:t,dispatch:e})=>(e(Xt(t,{anchor:t.selection.main.anchor,head:0})),!0),fm=({state:t,dispatch:e})=>(e(Xt(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),cb=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),hb=({state:t,dispatch:e})=>{let n=ba(t).map(({from:r,to:i})=>E.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:E.create(n),userEvent:"select"})),!0},fb=({state:t,dispatch:e})=>{let n=Oi(t.selection,r=>{let i=Ct(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return E.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(Xt(t,n)),!0)};function zv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(Xt(n,E.create(i,i.length-1))),!0)}const db=t=>zv(t,!1),pb=t=>zv(t,!0),mb=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=E.create([n.main]):n.main.empty||(r=E.create([E.cursor(n.main.head)])),r?(e(Xt(t,r)),!0):!1};function nl(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=zl(t,a,!1)):a>l&&(n="delete.forward",a=zl(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=zl(t,l,!1),o=zl(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:E.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?F.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function zl(t,e,n){if(t instanceof F)for(let r of t.state.facet(F.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Hv=(t,e,n)=>nl(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=ga(o,s.tabSize),c=u%Rr(s)||Rr(s);for(let h=0;h<c&&o[o.length-1-h]==" ";h++)i--;a=i}else a=_e(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=_e(l.text,a-l.from,!1,!1)+l.from);return a}),nh=t=>Hv(t,!1,!0),Wv=t=>Hv(t,!0,!1),Vv=(t,e)=>nl(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=_e(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=l(u);if(o!=null&&c!=o)break;(u!=" "||r!=n.head)&&(o=c),r=a}return r}),Uv=t=>Vv(t,!1),gb=t=>Vv(t,!0),yb=t=>nl(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),vb=t=>nl(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),wb=t=>nl(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),xb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Z.of(["",""])},range:E.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},kb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:_e(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:_e(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:E.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ba(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function $v(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of ba(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(E.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(E.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:E.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Sb=({state:t,dispatch:e})=>$v(t,e,!1),Cb=({state:t,dispatch:e})=>$v(t,e,!0);function Kv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of ba(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const bb=({state:t,dispatch:e})=>Kv(t,e,!1),Ab=({state:t,dispatch:e})=>Kv(t,e,!0),Eb=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(ba(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Oi(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Tb(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Ct(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(J.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const dm=Gv(!1),Mb=Gv(!0);function Gv(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&Tb(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new xa(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=yf(u,s);for(c==null&&(c=ga(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let h=["",Vs(e,c)];return a&&h.push(Vs(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:Z.of(h)},range:E.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Af(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:E.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const Nb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new xa(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=Af(t,(s,l,o)=>{let a=yf(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],c=Vs(t,a);(u!=c||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},Db=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Af(t,(n,r)=>{r.push({from:n.from,insert:t.facet(gf)})}),{userEvent:"input.indent"})),!0),Ob=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Af(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=ga(i,t.tabSize),l=0,o=Vs(t,Math.max(0,s-Rr(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),Pb=t=>(t.setTabFocusMode(),!0),Lb=[{key:"Ctrl-b",run:bv,shift:Lv,preventDefault:!0},{key:"Ctrl-f",run:Av,shift:Rv},{key:"Ctrl-p",run:Mv,shift:jv},{key:"Ctrl-n",run:Nv,shift:Fv},{key:"Ctrl-a",run:Q2,shift:ab},{key:"Ctrl-e",run:J2,shift:ub},{key:"Ctrl-d",run:Wv},{key:"Ctrl-h",run:nh},{key:"Ctrl-k",run:yb},{key:"Ctrl-Alt-h",run:Uv},{key:"Ctrl-o",run:xb},{key:"Ctrl-t",run:kb},{key:"Ctrl-v",run:th}],Rb=[{key:"ArrowLeft",run:bv,shift:Lv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:H2,shift:eb,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:q2,shift:lb,preventDefault:!0},{key:"ArrowRight",run:Av,shift:Rv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:W2,shift:tb,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Y2,shift:ob,preventDefault:!0},{key:"ArrowUp",run:Mv,shift:jv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:um,shift:hm},{mac:"Ctrl-ArrowUp",run:lm,shift:om},{key:"ArrowDown",run:Nv,shift:Fv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cm,shift:fm},{mac:"Ctrl-ArrowDown",run:th,shift:am},{key:"PageUp",run:lm,shift:om},{key:"PageDown",run:th,shift:am},{key:"Home",run:G2,shift:sb,preventDefault:!0},{key:"Mod-Home",run:um,shift:hm},{key:"End",run:K2,shift:ib,preventDefault:!0},{key:"Mod-End",run:cm,shift:fm},{key:"Enter",run:dm,shift:dm},{key:"Mod-a",run:cb},{key:"Backspace",run:nh,shift:nh,preventDefault:!0},{key:"Delete",run:Wv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Uv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:gb,preventDefault:!0},{mac:"Mod-Backspace",run:vb,preventDefault:!0},{mac:"Mod-Delete",run:wb,preventDefault:!0}].concat(Lb.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Ib=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:U2,shift:nb},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:$2,shift:rb},{key:"Alt-ArrowUp",run:Sb},{key:"Shift-Alt-ArrowUp",run:bb},{key:"Alt-ArrowDown",run:Cb},{key:"Shift-Alt-ArrowDown",run:Ab},{key:"Mod-Alt-ArrowUp",run:db},{key:"Mod-Alt-ArrowDown",run:pb},{key:"Escape",run:mb},{key:"Mod-Enter",run:Mb},{key:"Alt-l",mac:"Ctrl-l",run:hb},{key:"Mod-i",run:fb,preventDefault:!0},{key:"Mod-[",run:Ob},{key:"Mod-]",run:Db},{key:"Mod-Alt-\\",run:Nb},{key:"Shift-Mod-k",run:Eb},{key:"Shift-Mod-\\",run:Z2},{key:"Mod-/",run:R2},{key:"Alt-A",run:B2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Pb}].concat(Rb),pm=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class $s{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(pm(o)):pm,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return I0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=rk(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=B0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&($s.prototype[Symbol.iterator]=function(){return this});const qv={from:-1,to:-1,match:/.*/.exec("")},Ef="gm"+(/x/.unicode==null?"":"u");class Yv{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=qv,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Qv(e,n,r,i,s);this.re=new RegExp(n,Ef+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=Ko(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Ko(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const wu=new WeakMap;class fi{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=wu.get(e);if(!i||i.from>=r||i.to<=n){let o=new fi(n,e.sliceString(n,r));return wu.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),wu.set(e,new fi(l,s)),new fi(n,s.slice(n-l,r-l))}}class Qv{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=qv,this.matchPos=Ko(e,i),this.re=new RegExp(n,Ef+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=fi.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Ko(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=fi.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Yv.prototype[Symbol.iterator]=Qv.prototype[Symbol.iterator]=function(){return this});function Bb(t){try{return new RegExp(t,Ef),!0}catch{return!1}}function Ko(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function rh(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Ie("input",{class:"cm-textfield",name:"line",value:e}),r=Ie("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:vs.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Ie("label",t.state.phrase("Go to line"),": ",n)," ",Ie("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Ie("button",{name:"close",onclick:()=>{t.dispatch({effects:vs.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,c,h]=s,f=c?+c.slice(1):0,d=u?+u:o.number;if(u&&h){let x=d/100;a&&(x=x*(a=="-"?-1:1)+o.number/l.doc.lines),d=Math.round(l.doc.lines*x)}else u&&a&&(d=d*(a=="-"?-1:1)+o.number);let g=l.doc.line(Math.max(1,Math.min(l.doc.lines,d))),w=E.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[vs.of(!1),F.scrollIntoView(w.from,{y:"center"})],selection:w}),t.focus()}return{dom:r}}const vs=ce.define(),mm=Jt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(vs)&&(t=n.value);return t},provide:t=>Ho.from(t,e=>e?rh:null)}),jb=t=>{let e=zo(t,rh);if(!e){let n=[vs.of(!0)];t.state.field(mm,!1)==null&&n.push(ce.appendConfig.of([mm,Fb])),t.dispatch({effects:n}),e=zo(t,rh)}return e&&e.dom.querySelector("input").select(),!0},Fb=F.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),_b=({state:t,dispatch:e})=>{let{selection:n}=t,r=E.create(n.ranges.map(i=>t.wordAt(i.head)||E.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function zb(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new $s(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new $s(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const Hb=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return _b({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=zb(t,r);return i?(e(t.update({selection:t.selection.addRange(E.range(i.from,i.to),!1),effects:F.scrollIntoView(i.to)})),!0):!1},Pi=_.define({combine(t){return ma(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Zb(e),scrollToMatch:e=>F.scrollIntoView(e)})}});class Jv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Bb(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new $b(this):new Vb(this)}getCursor(e,n=0,r){let i=e.doc?e:te.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Hr(this,i,n,r):zr(this,i,n,r)}}class Xv{constructor(e){this.spec=e}}function zr(t,e,n,r){return new $s(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?Wb(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Wb(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Go(i,n-s))!=ze.Word||e(qo(i,n-s))!=ze.Word)&&(e(qo(i,r-s))!=ze.Word||e(Go(i,r-s))!=ze.Word))}class Vb extends Xv{constructor(e){super(e)}nextMatch(e,n,r){let i=zr(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=zr(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=zr(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=zr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=zr(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Hr(t,e,n,r){return new Yv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Ub(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Go(t,e){return t.slice(_e(t,e,!1),e)}function qo(t,e){return t.slice(e,_e(t,e))}function Ub(t){return(e,n,r)=>!r[0].length||(t(Go(r.input,r.index))!=ze.Word||t(qo(r.input,r.index))!=ze.Word)&&(t(qo(r.input,r.index+r[0].length))!=ze.Word||t(Go(r.input,r.index+r[0].length))!=ze.Word)}class $b extends Xv{nextMatch(e,n,r){let i=Hr(this.spec,e,r,e.doc.length).next();return i.done&&(i=Hr(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Hr(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Hr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Hr(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Ks=ce.define(),Tf=ce.define(),Zn=Jt.define({create(t){return new xu(ih(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ks)?t=new xu(n.value.create(),t.panel):n.is(Tf)&&(t=new xu(t.query,n.value?Mf:null));return t},provide:t=>Ho.from(t,e=>e.panel)});class xu{constructor(e,n){this.query=e,this.panel=n}}const Kb=G.mark({class:"cm-searchMatch"}),Gb=G.mark({class:"cm-searchMatch cm-searchMatch-selected"}),qb=St.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Zn))}update(t){let e=t.state.field(Zn);(e!=t.startState.field(Zn)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return G.none;let{view:n}=this,r=new Dr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,c)=>{let h=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,h?Gb:Kb)})}return r.finish()}},{decorations:t=>t.decorations});function rl(t){return e=>{let n=e.state.field(Zn,!1);return n&&n.query.spec.valid?t(e,n):t1(e)}}const Yo=rl((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=E.single(r.from,r.to),s=t.state.facet(Pi);return t.dispatch({selection:i,effects:[Nf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),e1(t),!0}),Qo=rl((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=E.single(i.from,i.to),l=t.state.facet(Pi);return t.dispatch({selection:s,effects:[Nf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),e1(t),!0}),Yb=rl((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:E.create(n.map(r=>E.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Qb=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new $s(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(E.range(o.value.from,o.value.to))}return e(t.update({selection:E.create(s,l),userEvent:"select.search.matches"})),!0},gm=rl((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,c=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),c.push(F.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(o);return l&&(a=E.single(l.from,l.to).map(h),c.push(Nf(t,l)),c.push(n.facet(Pi).scrollToMatch(a.main,t))),t.dispatch({changes:h,selection:a,effects:c,userEvent:"input.replace"}),!0}),Jb=rl((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:F.announce.of(r),userEvent:"input.replace.all"}),!0});function Mf(t){return t.state.facet(Pi).createPanel(t)}function ih(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(Pi);return new Jv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function Zv(t){let e=zo(t,Mf);return e&&e.dom.querySelector("[main-field]")}function e1(t){let e=Zv(t);e&&e==t.root.activeElement&&e.select()}const t1=t=>{let e=t.state.field(Zn,!1);if(e&&e.panel){let n=Zv(t);if(n&&n!=t.root.activeElement){let r=ih(t.state,e.query.spec);r.valid&&t.dispatch({effects:Ks.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Tf.of(!0),e?Ks.of(ih(t.state,e.query.spec)):ce.appendConfig.of(tA)]});return!0},n1=t=>{let e=t.state.field(Zn,!1);if(!e||!e.panel)return!1;let n=zo(t,Mf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Tf.of(!1)}),!0},Xb=[{key:"Mod-f",run:t1,scope:"editor search-panel"},{key:"F3",run:Yo,shift:Qo,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Yo,shift:Qo,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:n1,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Qb},{key:"Mod-Alt-g",run:jb},{key:"Mod-d",run:Hb,preventDefault:!0}];class Zb{constructor(e){this.view=e;let n=this.query=e.state.field(Zn).query.spec;this.commit=this.commit.bind(this),this.searchField=Ie("input",{value:n.search,placeholder:mt(e,"Find"),"aria-label":mt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ie("input",{value:n.replace,placeholder:mt(e,"Replace"),"aria-label":mt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ie("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Ie("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Ie("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return Ie("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=Ie("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Yo(e),[mt(e,"next")]),r("prev",()=>Qo(e),[mt(e,"previous")]),r("select",()=>Yb(e),[mt(e,"all")]),Ie("label",null,[this.caseField,mt(e,"match case")]),Ie("label",null,[this.reField,mt(e,"regexp")]),Ie("label",null,[this.wordField,mt(e,"by word")]),...e.state.readOnly?[]:[Ie("br"),this.replaceField,r("replace",()=>gm(e),[mt(e,"replace")]),r("replaceAll",()=>Jb(e),[mt(e,"replace all")])],Ie("button",{name:"close",onclick:()=>n1(e),"aria-label":mt(e,"close"),type:"button"},["×"])])}commit(){let e=new Jv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ks.of(e)}))}keydown(e){XS(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Qo:Yo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),gm(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Ks)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Pi).top}}function mt(t,e){return t.state.phrase(e)}const Hl=30,Wl=/[\s\.,:;?!]/;function Nf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Hl),l=Math.min(i,n+Hl),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<Hl;a++)if(!Wl.test(o[a+1])&&Wl.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-Hl;a--)if(!Wl.test(o[a-1])&&Wl.test(o[a])){o=o.slice(0,a);break}}return F.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const eA=F.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),tA=[Zn,da.low(qb),eA],zt={PAGE_BREAK:/^\={3,}$/,CHARACTER:/^([A-Z][A-Z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,CHARACTER_POWER_USER:/^(?:@)([A-Za-z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,SCENE:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,TRANSITION:/^((?:FADE (?:IN|TO BLACK|OUT)|CUT TO BLACK)[\:\.]?|.+ TO\:)/i,TRANSITION_POWER_USER:/^(?:> )(.+)/i,TITLE:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,SECTION:/^(#{1,4})\ (.*)/,MILESTONE:/^(?:\ +)?-\ (.+)/,IMAGE:/^(\[i\]https:\/\/(.+))/i,AUDIO:/^(\[a\]https:\/\/(.+))/i},nA=xf.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(zt.TRANSITION)||t.match(zt.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(zt.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(zt.CHARACTER))||(n=t.match(zt.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(zt.IMAGE)||t.match(zt.AUDIO)?"link":t.match(zt.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(zt.TITLE))return t.skipTo(":"),t.next(),"def";if(n=t.match(zt.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(zt.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),rA=St.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push(G.line({class:"cm-keyword"}).range(s.from)),e.push(G.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push(G.line({class:"cm-header"}).range(s.from)),e.push(G.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push(G.line({class:"cm-atom"}).range(s.from)),e.push(G.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push(G.line({class:"cm-synopsis"}).range(s.from)),e.push(G.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push(G.line({class:"cm-number"}).range(s.from)),e.push(G.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push(G.line({class:"cm-variable"}).range(s.from)),e.push(G.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return G.set(e)}},{decorations:t=>t.decorations}),r1=L.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=L.useRef(null),l=L.useRef(null);return L.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:F.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),L.useEffect(()=>{if(!s.current)return;const o=[dC(),tC(),e2(),f2(),UC(),F.lineWrapping,nA,rA,F.domEventHandlers({mouseup:(c,h)=>{setTimeout(()=>{const f=h.state.selection.main.head,d=h.state.doc.lineAt(f);n(d.number-1)},10)}}),L2,qy.of([...Ib,...Xb]),F.updateListener.of(c=>{if(c.docChanged&&e(c.state.doc.toString()),c.selectionSet&&!c.docChanged){const h=c.state.selection.main.head,f=c.state.doc.lineAt(h);n(f.number-1)}}),F.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=te.create({doc:t,extensions:o}),u=new F({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),L.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),m.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});r1.displayName="CodeMirrorEditor";const iA={VITE_GOOGLE_CLIENT_ID:"332933508693-u0f8kifpkma08osh7cscdcdbgsqi4ir1.apps.googleusercontent.com"};let Bn="";function sA(){return new Promise(t=>{if(window.google)return t();const e=setInterval(()=>{window.google&&(clearInterval(e),t())},50)})}async function sh(t){if(Bn&&!(t&&t.prompt==="consent"))return Bn;await sA();const e=window.google,n=iA||{},r=["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly"],i=Array.from(new Set([...t&&t.extraScopes?t.extraScopes:[],...r])),s=e.accounts.oauth2.initTokenClient({client_id:n.VITE_GOOGLE_CLIENT_ID,scope:i.join(" "),callback:l=>{Bn=l.access_token}});return new Promise((l,o)=>{s.callback=u=>{if(u&&u.error)return o(u);Bn=u&&u.access_token?u.access_token:Bn,l(Bn)};const a=t&&t.prompt==="consent"?"consent":"";try{s.requestAccessToken({prompt:a})}catch(u){o(u)}})}async function Ir(t,e={},n=!1){var s;const r=await sh(),i=await fetch(t,{...e,headers:{...e.headers||{},Authorization:`Bearer ${r}`}});if(!i.ok)try{const o=await i.clone().text().catch(()=>"<could not read body>");console.debug("authedFetch non-OK response",{url:((s=t==null?void 0:t.toString)==null?void 0:s.call(t))||t,status:i.status,bodyPreview:o.slice(0,200)})}catch(l){console.debug("authedFetch: failed to read non-OK response body",l)}if(i.status===401)return Bn="",Ir(t,e,n);if(i.status===403&&!n)try{return console.debug("authedFetch: 403 received, attempting re-consent with broader Drive scope and retry"),Bn="",await sh({prompt:"consent",extraScopes:["https://www.googleapis.com/auth/drive"]}),Ir(t,e,!0)}catch(l){console.debug("authedFetch: re-consent attempt failed",l)}return i}const Df="fountain:driveState";function Ht(){try{return JSON.parse(localStorage.getItem(Df)||"{}")}catch{return{}}}function lA(t){localStorage.setItem(Df,JSON.stringify(t))}function oA(){localStorage.removeItem(Df)}function On(t){try{try{console.log("persistDriveState: about to save",t)}catch{}lA(t);try{const e="fountain:driveState",n=localStorage.getItem(e);console.log("persistDriveState: saved to localStorage",{key:e,valuePreview:n&&n.slice?n.slice(0,1e3):n})}catch{}}catch(e){console.error("persistDriveState failed",e)}}const aA={VITE_GCP_PROJECT_NUMBER:"332933508693",VITE_GOOGLE_API_KEY:"AIzaSyBNuoxiWJI0jd68umAFLH0QYfuJdyAHUUs"};function uA(t=3e3){return new Promise((e,n)=>{if(window.gapi)return e();const r=Date.now(),i=setInterval(()=>{if(window.gapi)return clearInterval(i),e();if(Date.now()-r>t)return clearInterval(i),n(new Error("gapi did not load"))},50)})}function cA(){return new Promise(async(t,e)=>{try{await uA()}catch{return e(new Error("Google API library (gapi) not loaded. Ensure https://apis.google.com/js/api.js is included."))}try{window.gapi.load("picker",()=>{if(!window.google||!window.google.picker)return e(new Error("Google Picker API not available on window.google.picker. Make sure the Picker API is enabled in Google Cloud Console."));t()})}catch(n){e(n)}})}async function hA(){await cA();const t=await sh(),e=window.google,n=new e.picker.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder");return new Promise(r=>{const i=aA||{};new e.picker.PickerBuilder().setAppId(i.VITE_GCP_PROJECT_NUMBER).setDeveloperKey(i.VITE_GOOGLE_API_KEY).setOAuthToken(t).addView(n).setTitle("Choose a Drive Folder").setCallback(l=>{var o;if(l.action===e.picker.Action.PICKED&&((o=l.docs)!=null&&o.length)){console.log("Google Picker selected folder:",l.docs[0]);try{const a=new CustomEvent("fountain:drive:folderSelected",{detail:l.docs[0]});window.dispatchEvent(a)}catch(a){console.warn("picker: could not dispatch folderSelected event",a)}try{const a={...Ht(),folderId:l.docs[0].id,folderName:l.docs[0].name,folder:l.docs[0]};On(a)}catch(a){console.warn("picker: failed to persist folder as fallback",a)}r({id:l.docs[0].id,name:l.docs[0].name})}else r(null)}).build().setVisible(!0)})}async function fA(t){if(!t)return[];const e=`'${t}' in parents and trashed = false`,r=`https://www.googleapis.com/drive/v3/files?${new URLSearchParams({q:e,fields:"files(id,name,mimeType,modifiedTime)",pageSize:"200"}).toString()}`,i=await Ir(r);if(!i.ok)throw new Error(`Drive list failed: ${i.status}`);const s=await i.json();try{console.log("Drive: files in folder",t,s.files)}catch{}return(s.files||[]).map(l=>({id:l.id,name:l.name,mimeType:l.mimeType,modifiedTime:l.modifiedTime}))}async function dA(t){if(!t)throw new Error("fileId required");const e=`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,n=await Ir(e);if(!n.ok)throw new Error(`Failed to fetch file content: ${n.status}`);return await n.text()}async function pA(t,e,n){if(!t)throw new Error("folderId required");const r="-------fountainupload"+Date.now(),s=`--${r}\r
Content-Type: application/json; charset=UTF-8\r
\r
${JSON.stringify({name:e,parents:[t]})}\r
--${r}\r
Content-Type: text/plain\r
\r
${n}\r
--${r}--`,o=await Ir("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,mimeType,modifiedTime",{method:"POST",headers:{"Content-Type":`multipart/related; boundary=${r}`},body:s});if(!o.ok)throw new Error(`Failed to create file: ${o.status}`);return await o.json()}async function mA(t,e){if(!t)throw new Error("fileId required");const n=`https://www.googleapis.com/upload/drive/v3/files/${t}?uploadType=media&fields=id,name,mimeType,modifiedTime`,r=await Ir(n,{method:"PATCH",headers:{"Content-Type":"text/plain"},body:e});if(!r.ok)throw new Error(`Failed to update file content: ${r.status}`);try{return await r.json()}catch{const s=await Ir(`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,mimeType,modifiedTime`);if(!s.ok)throw new Error(`Failed to fetch updated file metadata: ${s.status}`);return await s.json()}}function gA(t=""){const[e,n]=L.useState([]),[r,i]=L.useState([]),[s,l]=L.useState(new Map),o=L.useRef(null),[a,u]=L.useState(!0);return L.useEffect(()=>{if(!a){if(t){const h=Ea(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}return}(function(){try{const h=new Worker(new URL("/assets/previewWorker-D6jE4gsy.js",import.meta.url),{type:"module"});return h.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},h.onmessage=f=>{const{type:d,blocks:g,characters:w,characterLineCounts:x}=f.data;d==="result"?(n(g||[]),i(w||[]),l(x||new Map)):d==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=h,t&&h.postMessage({type:"process",text:t}),()=>{try{h.terminate()}catch{}}}catch(h){console.error("Failed to create module worker, falling back to main-thread parsing:",h),u(!1)}})()},[a]),L.useEffect(()=>{if(!a&&t){const h=Ea(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:h=>{if(a&&o.current)o.current.postMessage({type:"process",text:h});else{const f=Ea(h);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let yA=1;function vA(){const t=L.useRef(null),e=L.useRef(new Map),[n,r]=L.useState([]),i=L.useRef(!1);L.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=L.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-PCay-oew.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:c,requestId:h,message:f}=a.data||{};if(h&&e.current.has(h)){const{resolve:d,reject:g}=e.current.get(h);if(e.current.delete(h),u==="panels")try{d(c)}catch{}else if(u==="error")try{g(new Error(f||"worker error"))}catch{}else try{g(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(c)&&r(c)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=L.useCallback(o=>{const a=s();if(!a)try{const c=k1(o);return r(c),Promise.resolve(c)}catch(c){return Promise.reject(c)}const u=String(yA++);return new Promise((c,h)=>{e.current.set(u,{resolve:c,reject:h});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),h(f)}}).then(c=>(i.current&&r(c),c))},[s]);return{panels:n,parsePanels:l}}const ku=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Hey—did the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE – CODING AND COFFEE\r
\r
— Keys clack.  \r
— Tests blink green, then red, then righteous green again.  \r
— A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pings—just shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing → preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open → payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function wA(){const[t,e]=L.useState(!1),[n,r]=L.useState(""),[i,s]=L.useState(!1),[l,o]=L.useState(!1),[a,u]=L.useState("edit"),[c,h]=L.useState(0),[f,d]=L.useState(!1),[g,w]=L.useState(null),[x,p]=L.useState(!1),[y,v]=L.useState(()=>Ht()),S={...Ht()||{},...y||{}};L.useEffect(()=>{const k=K=>{try{const U=K&&K.detail?K.detail:null;if(U&&U.id){const ne={...Ht(),fileId:U.id,fileName:U.name,file:U};try{On(ne)}catch(ge){console.error("App: persistDriveState failed",ge)}v(ne)}}catch(U){console.error("App: fileSelected handler failed",U)}},N=()=>{try{const U={...Ht()||{},fileId:void 0,fileName:void 0,file:void 0};try{On(U)}catch(ne){console.error("App: persistDriveState failed",ne)}v(U)}catch(K){console.error("App: fileCleared handler failed",K)}};return window.addEventListener("fountain:drive:fileSelected",k),window.addEventListener("fountain:drive:fileCleared",N),()=>{window.removeEventListener("fountain:drive:fileSelected",k),window.removeEventListener("fountain:drive:fileCleared",N)}},[]);const C=!!(S&&(S.folderId||S.folderName)),A=L.useRef(null),b=L.useRef(null),D=L.useRef([]),z=L.useRef(null),[B,V]=L.useState(!1),[H,Q]=L.useState(!1),[ie,Se]=L.useState([]),[Xe,Ft]=L.useState(null),[P,W]=L.useState(!1);L.useEffect(()=>{try{console.log("App: driveState changed",y)}catch{}},[y]),L.useEffect(()=>{const k=localStorage.getItem("fountain-script");let N=ku;if(k)try{const K=JSON.parse(k);N=K.content,d(!0),w(new Date(K.savedAt))}catch(K){console.error("Error parsing saved script:",K),localStorage.removeItem("fountain-script")}r(N),me(N);try{typeof Ze=="function"&&Ze(N)}catch{}},[]),L.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const N=navigator.userAgent||"",K=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(N),U=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,ne=(window.innerWidth||screen.width||0)<1024;(K||U&&ne)&&e(!0)}catch{}},[]),L.useEffect(()=>{const k=N=>{(N.ctrlKey||N.metaKey)&&String(N.key).toLowerCase()==="g"&&(N.preventDefault(),p(K=>!K))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[]),L.useEffect(()=>{const k=K=>{try{const U=K&&K.detail?K.detail:null;if(U&&U.id){const ne={...Ht(),folderId:U.id,folderName:U.name,folder:U};try{On(ne)}catch(ge){console.error("App: persistDriveState failed",ge)}v(ne)}else v(Ht())}catch(U){console.error("App: failed to load drive state",U)}},N=()=>v({});return window.addEventListener("fountain:drive:folderSelected",k),window.addEventListener("fountain:drive:cleared",N),()=>{window.removeEventListener("fountain:drive:folderSelected",k),window.removeEventListener("fountain:drive:cleared",N)}},[]);const{blocks:$,characters:q,characterLineCounts:X,processText:me}=gA(""),{panels:j,parsePanels:Ze}=vA(),[se,ft]=L.useState(0),[Li,Of]=L.useState("screenplay"),Ve=L.useRef(null),[Ri,Nn]=L.useState(!1),il=L.useRef(null),dt=L.useRef(null),[Pf,Ii]=L.useState(!1),fr=L.useRef(null),[Lf,sl]=L.useState(!1);L.useEffect(()=>{D.current=$},[$]);const i1=k=>{r(k),me(k);try{typeof Ze=="function"&&Ze(k)}catch{}},s1=()=>{!Array.isArray(j)||j.length===0||(Aa(),Ii(!1),fr.current="user",ft(k=>{const N=j.length;return((k-1)%N+N)%N}))},Rf=(k=!0)=>{!Array.isArray(j)||j.length===0||(fr.current=k?"user":"auto",k&&(Aa(),Ii(!1)),ft(N=>{const K=j.length;return(N+1)%K}))},l1=async()=>{Pf&&(ft(0),Ii(!1));try{Ve.current&&Ve.current.paused&&(Ve.current.currentTime=0)}catch{}Nn(!0)},o1=()=>{if(Ve.current){fr.current="user";try{Ve.current.pause()}catch{}Nn(!1)}},a1=()=>{Aa(),Ii(!1);try{ft(0)}catch{}};function Aa(){try{dt.current&&(clearTimeout(dt.current),dt.current=null)}catch{}try{Ve.current&&(fr.current="user",Ve.current.pause(),Ve.current.currentTime=0)}catch{}Nn(!1)}L.useEffect(()=>{const k=Ve.current;if(!k)return;const N=()=>Nn(!0),K=()=>{fr.current==="user"&&Nn(!1)},U=()=>{Rf(!1)};return k.addEventListener("play",N),k.addEventListener("pause",K),k.addEventListener("ended",U),()=>{k.removeEventListener("play",N),k.removeEventListener("pause",K),k.removeEventListener("ended",U)}},[se,j]),L.useEffect(()=>{if(dt.current&&(clearTimeout(dt.current),dt.current=null),!Ri)return;const k=j&&j.length>0?j[se]||j[0]:null;if(!k){Nn(!1);return}try{Ve.current&&Ve.current.play().catch(()=>{})}catch{}const N=Math.max(1e3,typeof k.duration=="number"?k.duration*1e3:3e3);return dt.current=setTimeout(()=>{!j||se>=j.length-1?(Nn(!1),Ii(!0),dt.current=null):ft(K=>K+1)},N),()=>{dt.current&&(clearTimeout(dt.current),dt.current=null)}},[Ri,se,j]),L.useEffect(()=>{if(Ve.current)try{fr.current==="user"&&(Ve.current.pause(),Ve.current.currentTime=0,Nn(!1))}catch{}fr.current=null;try{il.current&&typeof il.current.scrollTo=="function"&&il.current.scrollTo({top:0,behavior:"smooth"})}catch{}},[se]),L.useEffect(()=>()=>{try{dt.current&&clearTimeout(dt.current)}catch{}},[]),L.useEffect(()=>{try{const k=j&&j.length>0&&j[se]?j[se]:null}catch{}},[j,se]),L.useEffect(()=>{sl(!1)},[se]);const If=()=>{if(n.trim()){try{const N=Ht()||{},K=N&&N.fileId?N.fileId:null,U=N&&N.folderId?N.folderId:null,ne=N.fileName||`script-${new Date().toISOString().replace(/[:.]/g,"-")}.fountain`;if(K){console.log("Saving to existing Drive file",K),mA(K,n).then(Ce=>{console.log("Saved script to Drive (updated):",Ce);const pt={...N,fileId:Ce.id,fileName:Ce.name,file:Ce};try{On(pt)}catch{}v(pt);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:pt}))}catch{}}).catch(Ce=>{console.error("Drive update failed",Ce)});const ge={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(ge)),d(!0),w(new Date);return}if(x&&U){console.log("Creating new Drive file in folder",U),pA(U,ne,n).then(Ce=>{console.log("Saved script to Drive (created):",Ce);const pt={...N,fileId:Ce.id,fileName:Ce.name,file:Ce};try{On(pt)}catch{}v(pt);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:pt}))}catch{}}).catch(Ce=>{console.error("Drive create failed",Ce)});const ge={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(ge)),d(!0),w(new Date);return}}catch(N){console.error("GDrive save attempt failed",N)}const k={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(k)),d(!0),w(new Date)}},u1=async()=>{try{if(!await hA())return}catch(k){console.error("Folder pick failed",k),alert("Could not open folder picker. Check console for details.")}},c1=async()=>{try{const k=Ht(),N=k&&k.folderId?k.folderId:null;if(!N){alert("No Drive folder selected. Use Change Folder first.");return}Q(!0),Ft(k&&k.folderName?k.folderName:null),W(!0);const U=(await fA(N)||[]).filter(ne=>ne&&(ne.mimeType==="application/octet-stream"||ne.mimeType==="text/plain"));U.sort((ne,ge)=>{const Ce=ne&&ne.modifiedTime?new Date(ne.modifiedTime).getTime():0;return(ge&&ge.modifiedTime?new Date(ge.modifiedTime).getTime():0)-Ce}),Se(U)}catch(k){console.error("openGDriveLoad failed",k),alert("Could not list files from Drive. Check console for details.")}finally{W(!1)}},h1=()=>{const k=localStorage.getItem("fountain-script");if(k)try{const N=JSON.parse(k);r(N.content),me(N.content),w(new Date(N.savedAt))}catch(N){console.error("Error loading saved script:",N)}},f1=()=>{localStorage.removeItem("fountain-script"),d(!1),w(null),r(ku),me(ku)},d1=async()=>{try{await navigator.clipboard.writeText(n)}catch{const N=document.createElement("textarea");N.value=n,document.body.appendChild(N),N.select(),document.execCommand("copy"),document.body.removeChild(N)}},p1=async()=>{try{const k=await navigator.clipboard.readText();r(k),me(k)}catch(k){console.error("Error pasting from clipboard:",k)}},m1=()=>{r(""),me("");try{b.current&&b.current.focus&&b.current.focus()}catch{}},g1=L.useCallback(k=>{const N=D.current;if(h(k),A.current&&N.length>0){let K=null;for(let U=N.length-1;U>=0;U--)if(N[U].index<=k){K=N[U];break}if(K){const U=A.current.querySelector(`[data-line-id="${K.id}"]`);if(U){const ne=A.current,ge=ne.getBoundingClientRect(),Ce=U.getBoundingClientRect(),pt=Ce.top-ge.top,Bi=ge.height,w1=Ce.height,x1=ne.scrollTop+pt-Bi/2+w1/2;ne.scrollTo({top:x1,behavior:"smooth"})}}}},[]),y1=L.useCallback(k=>{b.current&&b.current.scrollToLine&&b.current.scrollToLine(k)},[]);L.useEffect(()=>{const k=N=>{N.key==="Escape"&&(i?s(!1):l&&o(!1))};if(i||l)return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[i,l]),L.useEffect(()=>{const k=()=>{V(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",k),()=>document.removeEventListener("fullscreenchange",k)},[]);const v1=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),V(!1)):z.current&&z.current.requestFullscreen?(await z.current.requestFullscreen(),V(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),V(!0))}catch(k){console.error("Fullscreen toggle failed",k)}};return m.jsxs("div",{className:"fountain-app",ref:z,children:[t&&m.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),m.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"×"})]}),m.jsxs("div",{className:"modal-body",children:[m.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),m.jsxs("p",{style:{marginTop:"1rem"},children:[m.jsx("strong",{children:"How to:"}),' open your browser menu (⋮) and choose "Desktop site" or "Request desktop site".']})]}),m.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:m.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"Got it"})})]})}),m.jsxs("div",{className:"persistence-toolbar",children:[m.jsxs("div",{className:"toolbar-group",children:[x?m.jsxs(m.Fragment,{children:[m.jsxs("button",{className:"toolbar-btn",onClick:u1,title:"Change Drive folder",children:[m.jsx("i",{className:"fas fa-folder-open"})," Change Folder"]}),m.jsxs("button",{className:`toolbar-btn ${!n.trim()||!C?"disabled":""}`,onClick:If,disabled:!n.trim()||!C,title:"Save to Google Drive",children:[m.jsx("i",{className:"fab fa-google-drive"})," GDrive Save"]}),m.jsxs("button",{className:`toolbar-btn ${!n.trim()||!C?"disabled":""}`,onClick:()=>alert("GDrive Save As — not implemented yet"),disabled:!n.trim()||!C,title:"Save as to Google Drive",children:[m.jsx("i",{className:"fas fa-file-export"})," GDrive Save As"]}),m.jsxs("button",{className:`toolbar-btn ${C?"":"disabled"}`,onClick:c1,disabled:!C,title:"Load from Google Drive",children:[m.jsx("i",{className:"fas fa-download"})," GDrive Load"]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("button",{className:`toolbar-btn ${n.trim()?"":"disabled"}`,onClick:If,disabled:!n.trim(),title:"Save current script to browser storage",children:[m.jsx("i",{className:"fas fa-save"}),"Save"]}),m.jsxs("button",{className:`toolbar-btn ${f?"":"disabled"}`,onClick:h1,disabled:!f,title:g?`Load saved script (${g.toLocaleDateString()} ${g.toLocaleTimeString()})`:"Load saved script",children:[m.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),m.jsxs("button",{className:"toolbar-btn",onClick:d1,title:"Copy editor contents to clipboard",children:[m.jsx("i",{className:"fas fa-copy"}),"Copy"]}),m.jsxs("button",{className:"toolbar-btn",onClick:p1,title:"Paste from clipboard to editor",children:[m.jsx("i",{className:"fas fa-paste"}),"Paste"]})]}),!x&&m.jsxs("button",{className:`toolbar-btn danger ${n.trim()?"":"disabled"}`,onClick:m1,disabled:!n.trim(),title:"Clear editor contents",children:[m.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),x?m.jsx("div",{style:{fontSize:12,color:"#f5f5f5"},children:S&&S.folderName?m.jsxs("div",{children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Folder:"})," ",S.folderName,m.jsx("a",{href:"#",onClick:k=>{k.preventDefault();try{oA(),v({}),window.dispatchEvent(new CustomEvent("fountain:drive:cleared")),console.log("App: cleared drive state")}catch(N){console.error("App: failed to clear drive state",N)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:"Clear"})]}),S&&S.fileName?m.jsxs("div",{style:{marginTop:4},children:[m.jsxs("span",{style:{fontSize:12,color:"#ddd"},children:[m.jsx("strong",{children:"File:"})," ",S.fileName]}),m.jsx("a",{href:"#",onClick:k=>{k.preventDefault();try{const N={...Ht(),fileId:void 0,fileName:void 0,file:void 0};On(N),v(N),window.dispatchEvent(new CustomEvent("fountain:drive:fileCleared"))}catch(N){console.error("App: failed to clear file selection",N)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:"Clear file"})]}):null]}):"No folder selected"}):m.jsxs("button",{className:`toolbar-btn danger ${f?"":"disabled"}`,onClick:f1,disabled:!f,title:"Clear saved script from storage",children:[m.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),m.jsx("div",{className:"toolbar-divider"}),m.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>s(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[m.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),m.jsxs("button",{className:`toolbar-btn character-btn ${q.length===0?"disabled":""}`,onClick:()=>q.length>0&&o(!0),title:q.length>0?"Character List":"No characters found",disabled:q.length===0,children:[m.jsx("i",{className:"fas fa-user"}),"Characters",q.length>0&&m.jsx("span",{className:"character-count-badge",children:q.length})]})]}),g&&m.jsxs("div",{className:"last-saved",children:["Last saved: ",g.toLocaleDateString()," at ",g.toLocaleTimeString()]})]}),m.jsx("div",{className:"mobile-view-toggle",children:m.jsx("div",{className:"tabs is-centered",children:m.jsxs("ul",{children:[m.jsx("li",{className:a==="edit"?"is-active":"",children:m.jsxs("a",{onClick:()=>u("edit"),children:[m.jsx("span",{className:"icon is-small",children:m.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),m.jsx("span",{children:"Edit"})]})}),m.jsx("li",{className:a==="preview"?"is-active":"",children:m.jsxs("a",{onClick:()=>u("preview"),children:[m.jsx("span",{className:"icon is-small",children:m.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),m.jsx("span",{children:"Preview"})]})})]})})}),m.jsxs("div",{className:"editor-layout",children:[m.jsx("button",{className:`toolbar-btn fullscreen-btn ${B?"is-active":""}`,onClick:v1,title:B?"Exit fullscreen":"Enter fullscreen","aria-label":B?"Exit fullscreen":"Enter fullscreen",children:m.jsx("i",{className:`fas ${B?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),m.jsxs("div",{className:"columns is-gapless",children:[m.jsx("div",{className:`column is-half-desktop ${a==="preview"?"mobile-hidden":""}`,children:m.jsxs("div",{className:"box editor-box",children:[m.jsx("h3",{className:"title is-6",children:"Editor"}),m.jsx(r1,{ref:b,value:n,onChange:i1,onCursorChange:g1,placeholder:"Type your fountain screenplay here..."})]})}),m.jsx("div",{className:`column is-half-desktop ${a==="edit"?"mobile-hidden":""}`,children:m.jsxs("div",{className:"box preview-box",children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[m.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview:"}),m.jsxs("div",{className:"pane-toggle",style:{display:"flex"},children:[m.jsx("button",{className:`toolbar-btn pane-toggle-btn ${Li==="screenplay"?"is-active":""}`,onClick:()=>Of("screenplay"),"aria-pressed":Li==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),m.jsx("button",{className:`toolbar-btn pane-toggle-btn ${Li==="player"?"is-active":""}`,onClick:()=>Of("player"),"aria-pressed":Li==="player",title:"Show media player",children:"Player"})]})]}),m.jsx("div",{})]}),Li==="screenplay"?m.jsx("div",{className:"preview-content",ref:A,children:$.length===0?m.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):$.map(k=>m.jsx("div",{className:`preview-line ${k.className||""} ${k.index===c?"current-line":""}`,"data-type":k.type,"data-line-id":k.id,"data-line-index":k.index,onClick:()=>y1(k.index),style:{cursor:"pointer"},children:k.type==="image"||k.type==="audio"||k.type==="title_page"||k.type==="page_break"||k.type==="page_number"?m.jsx("div",{dangerouslySetInnerHTML:{__html:k.text}}):k.text||" "},k.id))}):m.jsxs("div",{className:"media-player",ref:il,style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const k=j&&j.length>0?j[se]||j[0]:null,N=k&&typeof k.duration=="number"?k.duration:null,K=j&&j.length?j.length:0,U=k&&k.title?String(k.title):"";let ne="untitled";return U&&U.trim()&&(ne=U.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),ne||(ne="untitled")),m.jsxs("div",{className:"player-header",style:{marginBottom:"0.5rem",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[m.jsxs("div",{className:"panel-title-wrapper",style:{position:"relative",display:"inline-block"},children:[m.jsx("div",{className:"panel-title",style:{fontSize:"1.05rem",fontWeight:700},onMouseEnter:()=>sl(!0),onMouseLeave:()=>sl(!1),onClick:()=>sl(ge=>!ge),"aria-haspopup":"true","aria-expanded":Lf,children:ne}),k&&k.nesting&&Lf?m.jsxs("div",{className:"panel-nesting-tooltip",role:"tooltip",children:[k.nesting.act?m.jsxs("div",{children:[m.jsx("strong",{children:"Act:"})," ",k.nesting.act]}):null,k.nesting.scene?m.jsxs("div",{children:[m.jsx("strong",{children:"Scene:"})," ",k.nesting.scene]}):null,k.nesting.sequence?m.jsxs("div",{children:[m.jsx("strong",{children:"Sequence:"})," ",k.nesting.sequence]}):null,!k.nesting.act&&!k.nesting.sequence&&!k.nesting.scene?m.jsx("div",{style:{color:"#999"},children:"No nesting"}):null]}):null]}),m.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${se+1} / ${K})`})]}),m.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:m.jsxs("div",{style:{color:"#999"},children:["lines ",k&&typeof k.startLine=="number"?k.startLine:"?","–",k&&typeof k.endLine=="number"?k.endLine:"?"]})})]}),m.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[m.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[m.jsx("span",{style:{fontSize:"0.95rem"},children:"⏱"}),N?`${N}s`:"n/a"]}),m.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:a1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏹"}),m.jsxs("button",{className:`toolbar-btn ${Ri?"is-active":""}`,title:"Play","aria-label":"Play",onClick:l1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[Ri?m.jsx("span",{className:"playing-indicator","aria-hidden":"true"}):null,"▶︎"]}),m.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:o1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏸"}),m.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:s1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏮"}),m.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:Rf,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏭"})]})]}),Ri&&(()=>{const ge=j&&j.length>0?j[se]||j[0]:null,Ce=ge&&typeof ge.duration=="number"?ge.duration:null,pt=Math.max(1e3,typeof Ce=="number"?Ce*1e3:3e3);return m.jsx("div",{className:"player-header-progress-wrapper",style:{position:"relative"},children:m.jsx("div",{className:"player-progress",style:{animationDuration:`${pt}ms`},"aria-hidden":"true"},`player-progress-${se}-${pt}`)})})()]})})(),(()=>{if(Pf)return m.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:m.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#000",aspectRatio:"16/9"}})});const k=j&&j.length>0?j[se]||j[0]:null,N=k&&k.imageUrl?k.imageUrl:null;return m.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:N?m.jsx("img",{src:N,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):m.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:m.jsx("span",{children:"No image"})})})})(),(()=>{const k=j&&j.length>0?j[se]||j[0]:null,N=k&&k.audioUrl?k.audioUrl:null;return m.jsx("div",{style:{marginBottom:"0.75rem"},children:N?m.jsx("audio",{ref:Ve,controls:!0,src:N,style:{width:"100%"}}):m.jsx("audio",{ref:Ve,controls:!0,disabled:!0,style:{width:"100%"}})})})(),m.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!j||j.length===0?m.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const k=j&&j.length>0?j[se]||j[0]:null;return m.jsx("div",{children:m.jsx("div",{style:{padding:"0.5rem"},children:m.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:k&&k.blocks&&k.blocks.length>0?k.blocks.map(N=>m.jsx("div",{className:`preview-line ${N.className||""}`,dangerouslySetInnerHTML:{__html:N.text||" "}},N.id)):k&&k.snippet?k.snippet.split(/\r?\n/).map((N,K)=>m.jsx("div",{style:{whiteSpace:"pre-wrap"},children:N||" "},K)):m.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),i&&m.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Fountain.ext Format Reference"}),m.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:"×"})]}),m.jsxs("div",{className:"modal-body",children:[m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Title Page"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",m.jsx("br",{}),"Credit: Written by",m.jsx("br",{}),"Author: John Dope",m.jsx("br",{}),"Authors: John Dope and Jane Smith",m.jsx("br",{}),"Source: Based on the novel by Famous Writer",m.jsx("br",{}),"Draft Date: October 4, 2025",m.jsx("br",{}),"Date: 10/04/2025",m.jsx("br",{}),"Contact:",m.jsx("br",{}),"    John Dope",m.jsx("br",{}),"    555-123-4567",m.jsx("br",{}),"    john@example.com",m.jsx("br",{}),"    ",m.jsx("br",{}),"    Literary Agent",m.jsx("br",{}),"    Agency Name",m.jsx("br",{}),"    agent@agency.com",m.jsx("br",{}),"Notes: This is a sample script",m.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),m.jsx("p",{children:'Title page elements appear at the top of your script. All are optional. Use "Author" for single writer, "Authors" for multiple. Contact can be multi-line with indentation. End title page with === (page break).'})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Scene Headings"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["EXT. PARKING LOT - DAY",m.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",m.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),m.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Characters & Dialogue"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["MENTOR",m.jsx("br",{}),"Welcome to the team!",m.jsx("br",{}),m.jsx("br",{}),"@MENTOR",m.jsx("br",{}),"(power user syntax)",m.jsx("br",{}),m.jsx("br",{}),"USER #1",m.jsx("br",{}),"Thanks for having me.",m.jsx("br",{}),m.jsx("br",{}),"BOB O'SHAUNNESSY",m.jsx("br",{}),"(whispering)",m.jsx("br",{}),"This is a parenthetical."]}),m.jsx("p",{children:'Characters are ALL CAPS. Use @ for power user syntax or mixed-case names like "@John Doe". Names with @ in front will be counted as characters. Parentheticals go under character names.'})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Dual Dialogue"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["ALICE^",m.jsx("br",{}),"BOB^",m.jsx("br",{}),"CHARLIE^",m.jsx("br",{}),"I can't believe it!",m.jsx("br",{}),m.jsx("br",{}),"CHARLIE ^",m.jsx("br",{}),"DAVE ^",m.jsx("br",{}),"(disgusted)",m.jsx("br",{}),"Eew. no it's nooot!",m.jsx("br",{}),m.jsx("br",{})]}),m.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Action Lines"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["Bob walks into the room and looks around nervously.",m.jsx("br",{}),m.jsx("br",{}),"The computer screen flickers to life."]}),m.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Transitions"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["FADE IN:",m.jsx("br",{}),"CUT TO:",m.jsx("br",{}),"FADE TO BLACK.",m.jsx("br",{}),"> CUT TO BLACK."]}),m.jsx("p",{children:"Transitions control scene changes. Use > for power user syntax."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Centered Text"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:[">INTERMISSION<",m.jsx("br",{}),">THE END<"]}),m.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["# Act I",m.jsx("br",{}),"## Scene 1: The Beginning",m.jsx("br",{}),"### Sequence A: Setup",m.jsx("br",{}),"#### Panel 1",m.jsx("br",{}),"02:30",m.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",m.jsx("br",{}),"[a]https://example.com/dialogue.mp3",m.jsx("br",{}),m.jsx("br",{}),"#### Panel 2",m.jsx("br",{}),"01:15",m.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),m.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Notes & Comments"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["[[This is a note for the writer]]",m.jsx("br",{}),m.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),m.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Special Elements"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["= Synopsis: Brief scene description",m.jsx("br",{}),m.jsx("br",{}),"===",m.jsx("br",{}),"(Page Break)",m.jsx("br",{}),m.jsx("br",{}),"~Lyrics:",m.jsx("br",{}),'~"Happy birthday to you"',m.jsx("br",{}),'~"Happy birthday to you"']}),m.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),H&&m.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Open .fountain from Drive"}),m.jsx("button",{className:"modal-close",onClick:()=>Q(!1),children:"×"})]}),Xe&&m.jsxs("div",{style:{padding:"0 16px 8px 16px",color:"#cbd5e1",fontSize:13},children:["Listing files from: ",m.jsx("strong",{style:{color:"#e2e8f0"},children:Xe})]}),m.jsx("div",{className:"modal-body",children:P?m.jsx("div",{children:"Loading..."}):m.jsx("div",{children:ie&&ie.length>0?m.jsx("ul",{children:ie.map(k=>m.jsx("li",{style:{padding:"6px 0"},children:m.jsxs("a",{href:"#",onClick:async N=>{N.preventDefault();try{const K=await dA(k.id);r(K);try{me(K)}catch(U){console.error("processText failed",U)}try{const ne={...Ht()||{},fileId:k.id,fileName:k.name,file:k};try{console.log("App: before persist, localStorage=",localStorage.getItem("fountain:driveState"))}catch{}On(ne);try{console.log("App: after persist, localStorage=",localStorage.getItem("fountain:driveState"))}catch{}v(ne);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:k}))}catch{}}catch(U){console.error("Failed to persist selected file",U)}Q(!1)}catch(K){console.error("Failed to load file from Drive",K),alert("Could not load file from Drive. Check console for details.")}},children:[m.jsx("span",{style:{display:"inline-block",minWidth:240},children:k.name}),m.jsx("span",{style:{marginLeft:8,color:"#9ca3af",fontSize:12},children:k.modifiedTime?new Date(k.modifiedTime).toLocaleString():"unknown"})]})},k.id))}):m.jsx("div",{children:"No .fountain files found in this folder."})})}),m.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:m.jsx("button",{className:"toolbar-btn",onClick:()=>Q(!1),children:"Close"})})]})}),l&&m.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Character List"}),m.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:"×"})]}),m.jsx("div",{className:"modal-body",children:q.length===0?m.jsx("p",{children:"No characters found in the script."}):m.jsx("div",{className:"character-list",children:q.map(k=>m.jsxs("div",{className:"character-item",children:[m.jsx("div",{className:"character-name",children:k}),m.jsxs("div",{className:"character-count",children:[X.get(k)||0," dialogue lines"]})]},k))})})]})})]})}Su.createRoot(document.getElementById("root")).render(m.jsx(F1.StrictMode,{children:m.jsx(wA,{})}));
