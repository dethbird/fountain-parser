import{p as Ma,a as C1}from"./chunk-B1-1SDTH.js";function b1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wm={exports:{}},Zo={},xm={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=Symbol.for("react.element"),A1=Symbol.for("react.portal"),E1=Symbol.for("react.fragment"),T1=Symbol.for("react.strict_mode"),M1=Symbol.for("react.profiler"),N1=Symbol.for("react.provider"),D1=Symbol.for("react.context"),O1=Symbol.for("react.forward_ref"),P1=Symbol.for("react.suspense"),L1=Symbol.for("react.memo"),R1=Symbol.for("react.lazy"),Ff=Symbol.iterator;function I1(t){return t===null||typeof t!="object"?null:(t=Ff&&t[Ff]||t["@@iterator"],typeof t=="function"?t:null)}var km={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sm=Object.assign,Cm={};function Mi(t,e,n){this.props=t,this.context=e,this.refs=Cm,this.updater=n||km}Mi.prototype.isReactComponent={};Mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bm(){}bm.prototype=Mi.prototype;function ah(t,e,n){this.props=t,this.context=e,this.refs=Cm,this.updater=n||km}var uh=ah.prototype=new bm;uh.constructor=ah;Sm(uh,Mi.prototype);uh.isPureReactComponent=!0;var _f=Array.isArray,Am=Object.prototype.hasOwnProperty,ch={current:null},Em={key:!0,ref:!0,__self:!0,__source:!0};function Tm(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)Am.call(e,r)&&!Em.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Ys,type:t,key:s,ref:l,props:i,_owner:ch.current}}function B1(t,e){return{$$typeof:Ys,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ys}function j1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zf=/\/+/g;function Na(t,e){return typeof t=="object"&&t!==null&&t.key!=null?j1(""+t.key):e.toString(36)}function $l(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ys:case A1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+Na(l,0):r,_f(i)?(n="",t!=null&&(n=t.replace(zf,"$&/")+"/"),$l(i,e,n,"",function(u){return u})):i!=null&&(hh(i)&&(i=B1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(zf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",_f(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+Na(s,o);l+=$l(s,e,n,a,i)}else if(a=I1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+Na(s,o++),l+=$l(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function al(t,e,n){if(t==null)return t;var r=[],i=0;return $l(t,r,"","",function(s){return e.call(n,s,i++)}),r}function F1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var it={current:null},Kl={transition:null},_1={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:Kl,ReactCurrentOwner:ch};function Mm(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:al,forEach:function(t,e,n){al(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return al(t,function(){e++}),e},toArray:function(t){return al(t,function(e){return e})||[]},only:function(t){if(!hh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=Mi;q.Fragment=E1;q.Profiler=M1;q.PureComponent=ah;q.StrictMode=T1;q.Suspense=P1;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_1;q.act=Mm;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sm({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=ch.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)Am.call(e,a)&&!Em.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Ys,type:t.type,key:i,ref:s,props:r,_owner:l}};q.createContext=function(t){return t={$$typeof:D1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:N1,_context:t},t.Consumer=t};q.createElement=Tm;q.createFactory=function(t){var e=Tm.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:O1,render:t}};q.isValidElement=hh;q.lazy=function(t){return{$$typeof:R1,_payload:{_status:-1,_result:t},_init:F1}};q.memo=function(t,e){return{$$typeof:L1,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=Kl.transition;Kl.transition={};try{t()}finally{Kl.transition=e}};q.unstable_act=Mm;q.useCallback=function(t,e){return it.current.useCallback(t,e)};q.useContext=function(t){return it.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return it.current.useDeferredValue(t)};q.useEffect=function(t,e){return it.current.useEffect(t,e)};q.useId=function(){return it.current.useId()};q.useImperativeHandle=function(t,e,n){return it.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return it.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return it.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return it.current.useMemo(t,e)};q.useReducer=function(t,e,n){return it.current.useReducer(t,e,n)};q.useRef=function(t){return it.current.useRef(t)};q.useState=function(t){return it.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return it.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return it.current.useTransition()};q.version="18.3.1";xm.exports=q;var L=xm.exports;const z1=b1(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=L,W1=Symbol.for("react.element"),V1=Symbol.for("react.fragment"),U1=Object.prototype.hasOwnProperty,$1=H1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K1={key:!0,ref:!0,__self:!0,__source:!0};function Nm(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)U1.call(e,r)&&!K1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:W1,type:t,key:s,ref:l,props:i,_owner:$1.current}}Zo.Fragment=V1;Zo.jsx=Nm;Zo.jsxs=Nm;wm.exports=Zo;var m=wm.exports,bu={},Dm={exports:{}},Ct={},Om={exports:{}},Pm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,W){var V=P.length;P.push(W);e:for(;0<V;){var X=V-1>>>1,Q=P[X];if(0<i(Q,W))P[X]=W,P[V]=Q,V=X;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var W=P[0],V=P.pop();if(V!==W){P[0]=V;e:for(var X=0,Q=P.length,pe=Q>>>1;X<pe;){var Le=2*(X+1)-1,Ne=P[Le],_=Le+1,At=P[_];if(0>i(Ne,V))_<Q&&0>i(At,Ne)?(P[X]=At,P[_]=V,X=_):(P[X]=Ne,P[Le]=V,X=Le);else if(_<Q&&0>i(At,V))P[X]=At,P[_]=V,X=_;else break e}}return W}function i(P,W){var V=P.sortIndex-W.sortIndex;return V!==0?V:P.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],c=1,h=null,f=3,d=!1,g=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=P)r(u),W.sortIndex=W.expirationTime,e(a,W);else break;W=n(u)}}function S(P){if(w=!1,v(P),!g)if(n(a)!==null)g=!0,Ze(C);else{var W=n(u);W!==null&&Ft(S,W.startTime-P)}}function C(P,W){g=!1,w&&(w=!1,p(D),D=-1),d=!0;var V=f;try{for(v(W),h=n(a);h!==null&&(!(h.expirationTime>W)||P&&!U());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var Q=X(h.expirationTime<=W);W=t.unstable_now(),typeof Q=="function"?h.callback=Q:h===n(a)&&r(a),v(W)}else r(a);h=n(a)}if(h!==null)var pe=!0;else{var Le=n(u);Le!==null&&Ft(S,Le.startTime-W),pe=!1}return pe}finally{h=null,f=V,d=!1}}var A=!1,b=null,D=-1,z=5,B=-1;function U(){return!(t.unstable_now()-B<z)}function H(){if(b!==null){var P=t.unstable_now();B=P;var W=!0;try{W=b(!0,P)}finally{W?Y():(A=!1,b=null)}}else A=!1}var Y;if(typeof y=="function")Y=function(){y(H)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ke=ie.port2;ie.port1.onmessage=H,Y=function(){ke.postMessage(null)}}else Y=function(){x(H,0)};function Ze(P){b=P,A||(A=!0,Y())}function Ft(P,W){D=x(function(){P(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||d||(g=!0,Ze(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var V=f;f=W;try{return P()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,W){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=f;f=P;try{return W()}finally{f=V}},t.unstable_scheduleCallback=function(P,W,V){var X=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?X+V:X):V=X,P){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=V+Q,P={id:c++,callback:W,priorityLevel:P,startTime:V,expirationTime:Q,sortIndex:-1},V>X?(P.sortIndex=V,e(u,P),n(a)===null&&P===n(u)&&(w?(p(D),D=-1):w=!0,Ft(S,V-X))):(P.sortIndex=Q,e(a,P),g||d||(g=!0,Ze(C))),P},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(P){var W=f;return function(){var V=f;f=W;try{return P.apply(this,arguments)}finally{f=V}}}})(Pm);Om.exports=Pm;var G1=Om.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q1=L,xt=G1;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lm=new Set,ks={};function jr(t,e){pi(t,e),pi(t+"Capture",e)}function pi(t,e){for(ks[t]=e,t=0;t<e.length;t++)Lm.add(e[t])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=Object.prototype.hasOwnProperty,Y1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hf={},Wf={};function Q1(t){return Au.call(Wf,t)?!0:Au.call(Hf,t)?!1:Y1.test(t)?Wf[t]=!0:(Hf[t]=!0,!1)}function J1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function X1(t,e,n,r){if(e===null||typeof e>"u"||J1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function st(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new st(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new st(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new st(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new st(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new st(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new st(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new st(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new st(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new st(t,5,!1,t.toLowerCase(),null,!1,!1)});var fh=/[\-:]([a-z])/g;function dh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fh,dh);We[e]=new st(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fh,dh);We[e]=new st(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fh,dh);We[e]=new st(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new st(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new st(t,1,!1,t.toLowerCase(),null,!0,!0)});function ph(t,e,n,r){var i=We.hasOwnProperty(e)?We[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(X1(e,n,i,r)&&(n=null),r||i===null?Q1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Nn=q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ul=Symbol.for("react.element"),Vr=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),mh=Symbol.for("react.strict_mode"),Eu=Symbol.for("react.profiler"),Rm=Symbol.for("react.provider"),Im=Symbol.for("react.context"),gh=Symbol.for("react.forward_ref"),Tu=Symbol.for("react.suspense"),Mu=Symbol.for("react.suspense_list"),yh=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),Bm=Symbol.for("react.offscreen"),Vf=Symbol.iterator;function _i(t){return t===null||typeof t!="object"?null:(t=Vf&&t[Vf]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,Da;function Xi(t){if(Da===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Da=e&&e[1]||""}return`
`+Da+t}var Oa=!1;function Pa(t,e){if(!t||Oa)return"";Oa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{Oa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xi(t):""}function Z1(t){switch(t.tag){case 5:return Xi(t.type);case 16:return Xi("Lazy");case 13:return Xi("Suspense");case 19:return Xi("SuspenseList");case 0:case 2:case 15:return t=Pa(t.type,!1),t;case 11:return t=Pa(t.type.render,!1),t;case 1:return t=Pa(t.type,!0),t;default:return""}}function Nu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ur:return"Fragment";case Vr:return"Portal";case Eu:return"Profiler";case mh:return"StrictMode";case Tu:return"Suspense";case Mu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Im:return(t.displayName||"Context")+".Consumer";case Rm:return(t._context.displayName||"Context")+".Provider";case gh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yh:return e=t.displayName||null,e!==null?e:Nu(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return Nu(t(e))}catch{}}return null}function ew(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nu(e);case 8:return e===mh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tw(t){var e=jm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cl(t){t._valueTracker||(t._valueTracker=tw(t))}function Fm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function co(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Du(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Uf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _m(t,e){e=e.checked,e!=null&&ph(t,"checked",e,!1)}function Ou(t,e){_m(t,e);var n=tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pu(t,e.type,tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $f(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pu(t,e,n){(e!=="number"||co(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zi=Array.isArray;function ii(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+tr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Lu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(Zi(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tr(n)}}function zm(t,e){var n=tr(e.value),r=tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Hm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ru(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Hm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hl,Wm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ss(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nw=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(t){nw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ss[e]=ss[t]})});function Vm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ss.hasOwnProperty(t)&&ss[t]?(""+e).trim():e+"px"}function Um(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Vm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var rw=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iu(t,e){if(e){if(rw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function Bu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ju=null;function vh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fu=null,si=null,li=null;function qf(t){if(t=Xs(t)){if(typeof Fu!="function")throw Error(T(280));var e=t.stateNode;e&&(e=ia(e),Fu(t.stateNode,t.type,e))}}function $m(t){si?li?li.push(t):li=[t]:si=t}function Km(){if(si){var t=si,e=li;if(li=si=null,qf(t),e)for(t=0;t<e.length;t++)qf(e[t])}}function Gm(t,e){return t(e)}function qm(){}var La=!1;function Ym(t,e,n){if(La)return t(e,n);La=!0;try{return Gm(t,e,n)}finally{La=!1,(si!==null||li!==null)&&(qm(),Km())}}function Cs(t,e){var n=t.stateNode;if(n===null)return null;var r=ia(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var _u=!1;if(bn)try{var zi={};Object.defineProperty(zi,"passive",{get:function(){_u=!0}}),window.addEventListener("test",zi,zi),window.removeEventListener("test",zi,zi)}catch{_u=!1}function iw(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var ls=!1,ho=null,fo=!1,zu=null,sw={onError:function(t){ls=!0,ho=t}};function lw(t,e,n,r,i,s,l,o,a){ls=!1,ho=null,iw.apply(sw,arguments)}function ow(t,e,n,r,i,s,l,o,a){if(lw.apply(this,arguments),ls){if(ls){var u=ho;ls=!1,ho=null}else throw Error(T(198));fo||(fo=!0,zu=u)}}function Fr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Qm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yf(t){if(Fr(t)!==t)throw Error(T(188))}function aw(t){var e=t.alternate;if(!e){if(e=Fr(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yf(i),t;if(s===r)return Yf(i),e;s=s.sibling}throw Error(T(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function Jm(t){return t=aw(t),t!==null?Xm(t):null}function Xm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Xm(t);if(e!==null)return e;t=t.sibling}return null}var Zm=xt.unstable_scheduleCallback,Qf=xt.unstable_cancelCallback,uw=xt.unstable_shouldYield,cw=xt.unstable_requestPaint,Ce=xt.unstable_now,hw=xt.unstable_getCurrentPriorityLevel,wh=xt.unstable_ImmediatePriority,eg=xt.unstable_UserBlockingPriority,po=xt.unstable_NormalPriority,fw=xt.unstable_LowPriority,tg=xt.unstable_IdlePriority,ea=null,fn=null;function dw(t){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(ea,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:gw,pw=Math.log,mw=Math.LN2;function gw(t){return t>>>=0,t===0?32:31-(pw(t)/mw|0)|0}var fl=64,dl=4194304;function es(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=es(o):(s&=l,s!==0&&(r=es(s)))}else l=n&~i,l!==0?r=es(l):s!==0&&(r=es(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kt(e),i=1<<n,r|=t[n],e&=~i;return r}function yw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Kt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=yw(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Hu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ng(){var t=fl;return fl<<=1,!(fl&4194240)&&(fl=64),t}function Ra(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kt(e),t[e]=n}function ww(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function xh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var le=0;function rg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ig,kh,sg,lg,og,Wu=!1,pl=[],Kn=null,Gn=null,qn=null,bs=new Map,As=new Map,Fn=[],xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jf(t,e){switch(t){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":bs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(e.pointerId)}}function Hi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Xs(e),e!==null&&kh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kw(t,e,n,r,i){switch(e){case"focusin":return Kn=Hi(Kn,t,e,n,r,i),!0;case"dragenter":return Gn=Hi(Gn,t,e,n,r,i),!0;case"mouseover":return qn=Hi(qn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return bs.set(s,Hi(bs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,As.set(s,Hi(As.get(s)||null,t,e,n,r,i)),!0}return!1}function ag(t){var e=vr(t.target);if(e!==null){var n=Fr(e);if(n!==null){if(e=n.tag,e===13){if(e=Qm(n),e!==null){t.blockedOn=e,og(t.priority,function(){sg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ju=r,n.target.dispatchEvent(r),ju=null}else return e=Xs(n),e!==null&&kh(e),t.blockedOn=n,!1;e.shift()}return!0}function Xf(t,e,n){Gl(t)&&n.delete(e)}function Sw(){Wu=!1,Kn!==null&&Gl(Kn)&&(Kn=null),Gn!==null&&Gl(Gn)&&(Gn=null),qn!==null&&Gl(qn)&&(qn=null),bs.forEach(Xf),As.forEach(Xf)}function Wi(t,e){t.blockedOn===e&&(t.blockedOn=null,Wu||(Wu=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,Sw)))}function Es(t){function e(i){return Wi(i,t)}if(0<pl.length){Wi(pl[0],t);for(var n=1;n<pl.length;n++){var r=pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kn!==null&&Wi(Kn,t),Gn!==null&&Wi(Gn,t),qn!==null&&Wi(qn,t),bs.forEach(e),As.forEach(e),n=0;n<Fn.length;n++)r=Fn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)ag(n),n.blockedOn===null&&Fn.shift()}var oi=Nn.ReactCurrentBatchConfig,go=!0;function Cw(t,e,n,r){var i=le,s=oi.transition;oi.transition=null;try{le=1,Sh(t,e,n,r)}finally{le=i,oi.transition=s}}function bw(t,e,n,r){var i=le,s=oi.transition;oi.transition=null;try{le=4,Sh(t,e,n,r)}finally{le=i,oi.transition=s}}function Sh(t,e,n,r){if(go){var i=Vu(t,e,n,r);if(i===null)Ua(t,e,r,yo,n),Jf(t,r);else if(kw(i,t,e,n,r))r.stopPropagation();else if(Jf(t,r),e&4&&-1<xw.indexOf(t)){for(;i!==null;){var s=Xs(i);if(s!==null&&ig(s),s=Vu(t,e,n,r),s===null&&Ua(t,e,r,yo,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ua(t,e,r,null,n)}}var yo=null;function Vu(t,e,n,r){if(yo=null,t=vh(r),t=vr(t),t!==null)if(e=Fr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Qm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yo=t,null}function ug(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hw()){case wh:return 1;case eg:return 4;case po:case fw:return 16;case tg:return 536870912;default:return 16}default:return 16}}var Hn=null,Ch=null,ql=null;function cg(){if(ql)return ql;var t,e=Ch,n=e.length,r,i="value"in Hn?Hn.value:Hn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return ql=i.slice(t,1<r?1-r:void 0)}function Yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ml(){return!0}function Zf(){return!1}function bt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ml:Zf,this.isPropagationStopped=Zf,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),e}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bh=bt(Ni),Js=we({},Ni,{view:0,detail:0}),Aw=bt(Js),Ia,Ba,Vi,ta=we({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ah,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vi&&(Vi&&t.type==="mousemove"?(Ia=t.screenX-Vi.screenX,Ba=t.screenY-Vi.screenY):Ba=Ia=0,Vi=t),Ia)},movementY:function(t){return"movementY"in t?t.movementY:Ba}}),ed=bt(ta),Ew=we({},ta,{dataTransfer:0}),Tw=bt(Ew),Mw=we({},Js,{relatedTarget:0}),ja=bt(Mw),Nw=we({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Dw=bt(Nw),Ow=we({},Ni,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pw=bt(Ow),Lw=we({},Ni,{data:0}),td=bt(Lw),Rw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bw[t])?!!e[t]:!1}function Ah(){return jw}var Fw=we({},Js,{key:function(t){if(t.key){var e=Rw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Iw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ah,charCode:function(t){return t.type==="keypress"?Yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_w=bt(Fw),zw=we({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nd=bt(zw),Hw=we({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ah}),Ww=bt(Hw),Vw=we({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uw=bt(Vw),$w=we({},ta,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Kw=bt($w),Gw=[9,13,27,32],Eh=bn&&"CompositionEvent"in window,os=null;bn&&"documentMode"in document&&(os=document.documentMode);var qw=bn&&"TextEvent"in window&&!os,hg=bn&&(!Eh||os&&8<os&&11>=os),rd=" ",id=!1;function fg(t,e){switch(t){case"keyup":return Gw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $r=!1;function Yw(t,e){switch(t){case"compositionend":return dg(e);case"keypress":return e.which!==32?null:(id=!0,rd);case"textInput":return t=e.data,t===rd&&id?null:t;default:return null}}function Qw(t,e){if($r)return t==="compositionend"||!Eh&&fg(t,e)?(t=cg(),ql=Ch=Hn=null,$r=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hg&&e.locale!=="ko"?null:e.data;default:return null}}var Jw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Jw[t.type]:e==="textarea"}function pg(t,e,n,r){$m(r),e=vo(e,"onChange"),0<e.length&&(n=new bh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var as=null,Ts=null;function Xw(t){Ag(t,0)}function na(t){var e=qr(t);if(Fm(e))return t}function Zw(t,e){if(t==="change")return e}var mg=!1;if(bn){var Fa;if(bn){var _a="oninput"in document;if(!_a){var ld=document.createElement("div");ld.setAttribute("oninput","return;"),_a=typeof ld.oninput=="function"}Fa=_a}else Fa=!1;mg=Fa&&(!document.documentMode||9<document.documentMode)}function od(){as&&(as.detachEvent("onpropertychange",gg),Ts=as=null)}function gg(t){if(t.propertyName==="value"&&na(Ts)){var e=[];pg(e,Ts,t,vh(t)),Ym(Xw,e)}}function ex(t,e,n){t==="focusin"?(od(),as=e,Ts=n,as.attachEvent("onpropertychange",gg)):t==="focusout"&&od()}function tx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return na(Ts)}function nx(t,e){if(t==="click")return na(e)}function rx(t,e){if(t==="input"||t==="change")return na(e)}function ix(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qt=typeof Object.is=="function"?Object.is:ix;function Ms(t,e){if(qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Au.call(e,i)||!qt(t[i],e[i]))return!1}return!0}function ad(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ud(t,e){var n=ad(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ad(n)}}function yg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vg(){for(var t=window,e=co();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=co(t.document)}return e}function Th(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sx(t){var e=vg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&yg(n.ownerDocument.documentElement,n)){if(r!==null&&Th(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ud(n,s);var l=ud(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lx=bn&&"documentMode"in document&&11>=document.documentMode,Kr=null,Uu=null,us=null,$u=!1;function cd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$u||Kr==null||Kr!==co(r)||(r=Kr,"selectionStart"in r&&Th(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),us&&Ms(us,r)||(us=r,r=vo(Uu,"onSelect"),0<r.length&&(e=new bh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kr)))}function gl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gr={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionend:gl("Transition","TransitionEnd")},za={},wg={};bn&&(wg=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function ra(t){if(za[t])return za[t];if(!Gr[t])return t;var e=Gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wg)return za[t]=e[n];return t}var xg=ra("animationend"),kg=ra("animationiteration"),Sg=ra("animationstart"),Cg=ra("transitionend"),bg=new Map,hd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){bg.set(t,e),jr(e,[t])}for(var Ha=0;Ha<hd.length;Ha++){var Wa=hd[Ha],ox=Wa.toLowerCase(),ax=Wa[0].toUpperCase()+Wa.slice(1);ur(ox,"on"+ax)}ur(xg,"onAnimationEnd");ur(kg,"onAnimationIteration");ur(Sg,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(Cg,"onTransitionEnd");pi("onMouseEnter",["mouseout","mouseover"]);pi("onMouseLeave",["mouseout","mouseover"]);pi("onPointerEnter",["pointerout","pointerover"]);pi("onPointerLeave",["pointerout","pointerover"]);jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ux=new Set("cancel close invalid load scroll toggle".split(" ").concat(ts));function fd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ow(r,e,void 0,t),t.currentTarget=null}function Ag(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;fd(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;fd(i,o,u),s=a}}}if(fo)throw t=zu,fo=!1,zu=null,t}function he(t,e){var n=e[Qu];n===void 0&&(n=e[Qu]=new Set);var r=t+"__bubble";n.has(r)||(Eg(e,t,2,!1),n.add(r))}function Va(t,e,n){var r=0;e&&(r|=4),Eg(n,t,r,e)}var yl="_reactListening"+Math.random().toString(36).slice(2);function Ns(t){if(!t[yl]){t[yl]=!0,Lm.forEach(function(n){n!=="selectionchange"&&(ux.has(n)||Va(n,!1,t),Va(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yl]||(e[yl]=!0,Va("selectionchange",!1,e))}}function Eg(t,e,n,r){switch(ug(e)){case 1:var i=Cw;break;case 4:i=bw;break;default:i=Sh}n=i.bind(null,e,n,t),i=void 0,!_u||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ua(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=vr(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Ym(function(){var u=s,c=vh(n),h=[];e:{var f=bg.get(t);if(f!==void 0){var d=bh,g=t;switch(t){case"keypress":if(Yl(n)===0)break e;case"keydown":case"keyup":d=_w;break;case"focusin":g="focus",d=ja;break;case"focusout":g="blur",d=ja;break;case"beforeblur":case"afterblur":d=ja;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=ed;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Tw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Ww;break;case xg:case kg:case Sg:d=Dw;break;case Cg:d=Uw;break;case"scroll":d=Aw;break;case"wheel":d=Kw;break;case"copy":case"cut":case"paste":d=Pw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=nd}var w=(e&4)!==0,x=!w&&t==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var y=u,v;y!==null;){v=y;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,p!==null&&(S=Cs(y,p),S!=null&&w.push(Ds(y,S,v)))),x)break;y=y.return}0<w.length&&(f=new d(f,g,null,n,c),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==ju&&(g=n.relatedTarget||n.fromElement)&&(vr(g)||g[An]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(g=n.relatedTarget||n.toElement,d=u,g=g?vr(g):null,g!==null&&(x=Fr(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=u),d!==g)){if(w=ed,S="onMouseLeave",p="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=nd,S="onPointerLeave",p="onPointerEnter",y="pointer"),x=d==null?f:qr(d),v=g==null?f:qr(g),f=new w(S,y+"leave",d,n,c),f.target=x,f.relatedTarget=v,S=null,vr(c)===u&&(w=new w(p,y+"enter",g,n,c),w.target=v,w.relatedTarget=x,S=w),x=S,d&&g)t:{for(w=d,p=g,y=0,v=w;v;v=_r(v))y++;for(v=0,S=p;S;S=_r(S))v++;for(;0<y-v;)w=_r(w),y--;for(;0<v-y;)p=_r(p),v--;for(;y--;){if(w===p||p!==null&&w===p.alternate)break t;w=_r(w),p=_r(p)}w=null}else w=null;d!==null&&dd(h,f,d,w,!1),g!==null&&x!==null&&dd(h,x,g,w,!0)}}e:{if(f=u?qr(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=Zw;else if(sd(f))if(mg)C=rx;else{C=tx;var A=ex}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=nx);if(C&&(C=C(t,u))){pg(h,C,n,c);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&Pu(f,"number",f.value)}switch(A=u?qr(u):window,t){case"focusin":(sd(A)||A.contentEditable==="true")&&(Kr=A,Uu=u,us=null);break;case"focusout":us=Uu=Kr=null;break;case"mousedown":$u=!0;break;case"contextmenu":case"mouseup":case"dragend":$u=!1,cd(h,n,c);break;case"selectionchange":if(lx)break;case"keydown":case"keyup":cd(h,n,c)}var b;if(Eh)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else $r?fg(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(hg&&n.locale!=="ko"&&($r||D!=="onCompositionStart"?D==="onCompositionEnd"&&$r&&(b=cg()):(Hn=c,Ch="value"in Hn?Hn.value:Hn.textContent,$r=!0)),A=vo(u,D),0<A.length&&(D=new td(D,t,null,n,c),h.push({event:D,listeners:A}),b?D.data=b:(b=dg(n),b!==null&&(D.data=b)))),(b=qw?Yw(t,n):Qw(t,n))&&(u=vo(u,"onBeforeInput"),0<u.length&&(c=new td("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=b))}Ag(h,e)})}function Ds(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cs(t,n),s!=null&&r.unshift(Ds(t,s,i)),s=Cs(t,e),s!=null&&r.push(Ds(t,s,i))),t=t.return}return r}function _r(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dd(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=Cs(n,s),a!=null&&l.unshift(Ds(n,a,o))):i||(a=Cs(n,s),a!=null&&l.push(Ds(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var cx=/\r\n?/g,hx=/\u0000|\uFFFD/g;function pd(t){return(typeof t=="string"?t:""+t).replace(cx,`
`).replace(hx,"")}function vl(t,e,n){if(e=pd(e),pd(t)!==e&&n)throw Error(T(425))}function wo(){}var Ku=null,Gu=null;function qu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yu=typeof setTimeout=="function"?setTimeout:void 0,fx=typeof clearTimeout=="function"?clearTimeout:void 0,md=typeof Promise=="function"?Promise:void 0,dx=typeof queueMicrotask=="function"?queueMicrotask:typeof md<"u"?function(t){return md.resolve(null).then(t).catch(px)}:Yu;function px(t){setTimeout(function(){throw t})}function $a(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Es(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Es(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Di=Math.random().toString(36).slice(2),on="__reactFiber$"+Di,Os="__reactProps$"+Di,An="__reactContainer$"+Di,Qu="__reactEvents$"+Di,mx="__reactListeners$"+Di,gx="__reactHandles$"+Di;function vr(t){var e=t[on];if(e)return e;for(var n=t.parentNode;n;){if(e=n[An]||n[on]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gd(t);t!==null;){if(n=t[on])return n;t=gd(t)}return e}t=n,n=t.parentNode}return null}function Xs(t){return t=t[on]||t[An],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function ia(t){return t[Os]||null}var Ju=[],Yr=-1;function cr(t){return{current:t}}function de(t){0>Yr||(t.current=Ju[Yr],Ju[Yr]=null,Yr--)}function ue(t,e){Yr++,Ju[Yr]=t.current,t.current=e}var nr={},Je=cr(nr),ut=cr(!1),Er=nr;function mi(t,e){var n=t.type.contextTypes;if(!n)return nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ct(t){return t=t.childContextTypes,t!=null}function xo(){de(ut),de(Je)}function yd(t,e,n){if(Je.current!==nr)throw Error(T(168));ue(Je,e),ue(ut,n)}function Tg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(T(108,ew(t)||"Unknown",i));return we({},n,r)}function ko(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nr,Er=Je.current,ue(Je,t),ue(ut,ut.current),!0}function vd(t,e,n){var r=t.stateNode;if(!r)throw Error(T(169));n?(t=Tg(t,e,Er),r.__reactInternalMemoizedMergedChildContext=t,de(ut),de(Je),ue(Je,t)):de(ut),ue(ut,n)}var yn=null,sa=!1,Ka=!1;function Mg(t){yn===null?yn=[t]:yn.push(t)}function yx(t){sa=!0,Mg(t)}function hr(){if(!Ka&&yn!==null){Ka=!0;var t=0,e=le;try{var n=yn;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yn=null,sa=!1}catch(i){throw yn!==null&&(yn=yn.slice(t+1)),Zm(wh,hr),i}finally{le=e,Ka=!1}}return null}var Qr=[],Jr=0,So=null,Co=0,Et=[],Tt=0,Tr=null,wn=1,xn="";function mr(t,e){Qr[Jr++]=Co,Qr[Jr++]=So,So=t,Co=e}function Ng(t,e,n){Et[Tt++]=wn,Et[Tt++]=xn,Et[Tt++]=Tr,Tr=t;var r=wn;t=xn;var i=32-Kt(r)-1;r&=~(1<<i),n+=1;var s=32-Kt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,wn=1<<32-Kt(e)+i|n<<i|r,xn=s+t}else wn=1<<s|n<<i|r,xn=t}function Mh(t){t.return!==null&&(mr(t,1),Ng(t,1,0))}function Nh(t){for(;t===So;)So=Qr[--Jr],Qr[Jr]=null,Co=Qr[--Jr],Qr[Jr]=null;for(;t===Tr;)Tr=Et[--Tt],Et[Tt]=null,xn=Et[--Tt],Et[Tt]=null,wn=Et[--Tt],Et[Tt]=null}var wt=null,vt=null,me=!1,Ut=null;function Dg(t,e){var n=Nt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wt=t,vt=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wt=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Tr!==null?{id:wn,overflow:xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wt=t,vt=null,!0):!1;default:return!1}}function Xu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zu(t){if(me){var e=vt;if(e){var n=e;if(!wd(t,e)){if(Xu(t))throw Error(T(418));e=Yn(n.nextSibling);var r=wt;e&&wd(t,e)?Dg(r,n):(t.flags=t.flags&-4097|2,me=!1,wt=t)}}else{if(Xu(t))throw Error(T(418));t.flags=t.flags&-4097|2,me=!1,wt=t}}}function xd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wt=t}function wl(t){if(t!==wt)return!1;if(!me)return xd(t),me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qu(t.type,t.memoizedProps)),e&&(e=vt)){if(Xu(t))throw Og(),Error(T(418));for(;e;)Dg(t,e),e=Yn(e.nextSibling)}if(xd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=Yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=wt?Yn(t.stateNode.nextSibling):null;return!0}function Og(){for(var t=vt;t;)t=Yn(t.nextSibling)}function gi(){vt=wt=null,me=!1}function Dh(t){Ut===null?Ut=[t]:Ut.push(t)}var vx=Nn.ReactCurrentBatchConfig;function Ui(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function xl(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kd(t){var e=t._init;return e(t._payload)}function Pg(t){function e(p,y){if(t){var v=p.deletions;v===null?(p.deletions=[y],p.flags|=16):v.push(y)}}function n(p,y){if(!t)return null;for(;y!==null;)e(p,y),y=y.sibling;return null}function r(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function i(p,y){return p=Zn(p,y),p.index=0,p.sibling=null,p}function s(p,y,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<y?(p.flags|=2,y):v):(p.flags|=2,y)):(p.flags|=1048576,y)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,y,v,S){return y===null||y.tag!==6?(y=Za(v,p.mode,S),y.return=p,y):(y=i(y,v),y.return=p,y)}function a(p,y,v,S){var C=v.type;return C===Ur?c(p,y,v.props.children,S,v.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ln&&kd(C)===y.type)?(S=i(y,v.props),S.ref=Ui(p,y,v),S.return=p,S):(S=no(v.type,v.key,v.props,null,p.mode,S),S.ref=Ui(p,y,v),S.return=p,S)}function u(p,y,v,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=eu(v,p.mode,S),y.return=p,y):(y=i(y,v.children||[]),y.return=p,y)}function c(p,y,v,S,C){return y===null||y.tag!==7?(y=br(v,p.mode,S,C),y.return=p,y):(y=i(y,v),y.return=p,y)}function h(p,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Za(""+y,p.mode,v),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ul:return v=no(y.type,y.key,y.props,null,p.mode,v),v.ref=Ui(p,null,y),v.return=p,v;case Vr:return y=eu(y,p.mode,v),y.return=p,y;case Ln:var S=y._init;return h(p,S(y._payload),v)}if(Zi(y)||_i(y))return y=br(y,p.mode,v,null),y.return=p,y;xl(p,y)}return null}function f(p,y,v,S){var C=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:o(p,y,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ul:return v.key===C?a(p,y,v,S):null;case Vr:return v.key===C?u(p,y,v,S):null;case Ln:return C=v._init,f(p,y,C(v._payload),S)}if(Zi(v)||_i(v))return C!==null?null:c(p,y,v,S,null);xl(p,v)}return null}function d(p,y,v,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(v)||null,o(y,p,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ul:return p=p.get(S.key===null?v:S.key)||null,a(y,p,S,C);case Vr:return p=p.get(S.key===null?v:S.key)||null,u(y,p,S,C);case Ln:var A=S._init;return d(p,y,v,A(S._payload),C)}if(Zi(S)||_i(S))return p=p.get(v)||null,c(y,p,S,C,null);xl(y,S)}return null}function g(p,y,v,S){for(var C=null,A=null,b=y,D=y=0,z=null;b!==null&&D<v.length;D++){b.index>D?(z=b,b=null):z=b.sibling;var B=f(p,b,v[D],S);if(B===null){b===null&&(b=z);break}t&&b&&B.alternate===null&&e(p,b),y=s(B,y,D),A===null?C=B:A.sibling=B,A=B,b=z}if(D===v.length)return n(p,b),me&&mr(p,D),C;if(b===null){for(;D<v.length;D++)b=h(p,v[D],S),b!==null&&(y=s(b,y,D),A===null?C=b:A.sibling=b,A=b);return me&&mr(p,D),C}for(b=r(p,b);D<v.length;D++)z=d(b,p,D,v[D],S),z!==null&&(t&&z.alternate!==null&&b.delete(z.key===null?D:z.key),y=s(z,y,D),A===null?C=z:A.sibling=z,A=z);return t&&b.forEach(function(U){return e(p,U)}),me&&mr(p,D),C}function w(p,y,v,S){var C=_i(v);if(typeof C!="function")throw Error(T(150));if(v=C.call(v),v==null)throw Error(T(151));for(var A=C=null,b=y,D=y=0,z=null,B=v.next();b!==null&&!B.done;D++,B=v.next()){b.index>D?(z=b,b=null):z=b.sibling;var U=f(p,b,B.value,S);if(U===null){b===null&&(b=z);break}t&&b&&U.alternate===null&&e(p,b),y=s(U,y,D),A===null?C=U:A.sibling=U,A=U,b=z}if(B.done)return n(p,b),me&&mr(p,D),C;if(b===null){for(;!B.done;D++,B=v.next())B=h(p,B.value,S),B!==null&&(y=s(B,y,D),A===null?C=B:A.sibling=B,A=B);return me&&mr(p,D),C}for(b=r(p,b);!B.done;D++,B=v.next())B=d(b,p,D,B.value,S),B!==null&&(t&&B.alternate!==null&&b.delete(B.key===null?D:B.key),y=s(B,y,D),A===null?C=B:A.sibling=B,A=B);return t&&b.forEach(function(H){return e(p,H)}),me&&mr(p,D),C}function x(p,y,v,S){if(typeof v=="object"&&v!==null&&v.type===Ur&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ul:e:{for(var C=v.key,A=y;A!==null;){if(A.key===C){if(C=v.type,C===Ur){if(A.tag===7){n(p,A.sibling),y=i(A,v.props.children),y.return=p,p=y;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ln&&kd(C)===A.type){n(p,A.sibling),y=i(A,v.props),y.ref=Ui(p,A,v),y.return=p,p=y;break e}n(p,A);break}else e(p,A);A=A.sibling}v.type===Ur?(y=br(v.props.children,p.mode,S,v.key),y.return=p,p=y):(S=no(v.type,v.key,v.props,null,p.mode,S),S.ref=Ui(p,y,v),S.return=p,p=S)}return l(p);case Vr:e:{for(A=v.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(p,y.sibling),y=i(y,v.children||[]),y.return=p,p=y;break e}else{n(p,y);break}else e(p,y);y=y.sibling}y=eu(v,p.mode,S),y.return=p,p=y}return l(p);case Ln:return A=v._init,x(p,y,A(v._payload),S)}if(Zi(v))return g(p,y,v,S);if(_i(v))return w(p,y,v,S);xl(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(p,y.sibling),y=i(y,v),y.return=p,p=y):(n(p,y),y=Za(v,p.mode,S),y.return=p,p=y),l(p)):n(p,y)}return x}var yi=Pg(!0),Lg=Pg(!1),bo=cr(null),Ao=null,Xr=null,Oh=null;function Ph(){Oh=Xr=Ao=null}function Lh(t){var e=bo.current;de(bo),t._currentValue=e}function ec(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ai(t,e){Ao=t,Oh=Xr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(at=!0),t.firstContext=null)}function Rt(t){var e=t._currentValue;if(Oh!==t)if(t={context:t,memoizedValue:e,next:null},Xr===null){if(Ao===null)throw Error(T(308));Xr=t,Ao.dependencies={lanes:0,firstContext:t}}else Xr=Xr.next=t;return e}var wr=null;function Rh(t){wr===null?wr=[t]:wr.push(t)}function Rg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Rh(e)):(n.next=i.next,i.next=n),e.interleaved=n,En(t,r)}function En(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Rn=!1;function Ih(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ig(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,En(t,n)}return i=r.interleaved,i===null?(e.next=e,Rh(r)):(e.next=i.next,i.next=e),r.interleaved=e,En(t,n)}function Ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xh(t,n)}}function Sd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Eo(t,e,n,r){var i=t.updateQueue;Rn=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==l&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;l=0,c=u=a=null,o=s;do{var f=o.lane,d=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,w=o;switch(f=e,d=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){h=g.call(d,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,f=typeof g=="function"?g.call(d,h,f):g,f==null)break e;h=we({},h,f);break e;case 2:Rn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=d,a=h):c=c.next=d,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=h),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Nr|=l,t.lanes=l,t.memoizedState=h}}function Cd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(T(191,i));i.call(r)}}}var Zs={},dn=cr(Zs),Ps=cr(Zs),Ls=cr(Zs);function xr(t){if(t===Zs)throw Error(T(174));return t}function Bh(t,e){switch(ue(Ls,e),ue(Ps,t),ue(dn,Zs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ru(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ru(e,t)}de(dn),ue(dn,e)}function vi(){de(dn),de(Ps),de(Ls)}function Bg(t){xr(Ls.current);var e=xr(dn.current),n=Ru(e,t.type);e!==n&&(ue(Ps,t),ue(dn,n))}function jh(t){Ps.current===t&&(de(dn),de(Ps))}var ge=cr(0);function To(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ga=[];function Fh(){for(var t=0;t<Ga.length;t++)Ga[t]._workInProgressVersionPrimary=null;Ga.length=0}var Jl=Nn.ReactCurrentDispatcher,qa=Nn.ReactCurrentBatchConfig,Mr=0,ve=null,Ee=null,De=null,Mo=!1,cs=!1,Rs=0,wx=0;function $e(){throw Error(T(321))}function _h(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qt(t[n],e[n]))return!1;return!0}function zh(t,e,n,r,i,s){if(Mr=s,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jl.current=t===null||t.memoizedState===null?Cx:bx,t=n(r,i),cs){s=0;do{if(cs=!1,Rs=0,25<=s)throw Error(T(301));s+=1,De=Ee=null,e.updateQueue=null,Jl.current=Ax,t=n(r,i)}while(cs)}if(Jl.current=No,e=Ee!==null&&Ee.next!==null,Mr=0,De=Ee=ve=null,Mo=!1,e)throw Error(T(300));return t}function Hh(){var t=Rs!==0;return Rs=0,t}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?ve.memoizedState=De=t:De=De.next=t,De}function It(){if(Ee===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var e=De===null?ve.memoizedState:De.next;if(e!==null)De=e,Ee=t;else{if(t===null)throw Error(T(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},De===null?ve.memoizedState=De=t:De=De.next=t}return De}function Is(t,e){return typeof e=="function"?e(t):e}function Ya(t){var e=It(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=Ee,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var c=u.lane;if((Mr&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=h,l=r):a=a.next=h,ve.lanes|=c,Nr|=c}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,qt(r,e.memoizedState)||(at=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ve.lanes|=s,Nr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qa(t){var e=It(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);qt(s,e.memoizedState)||(at=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function jg(){}function Fg(t,e){var n=ve,r=It(),i=e(),s=!qt(r.memoizedState,i);if(s&&(r.memoizedState=i,at=!0),r=r.queue,Wh(Hg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||De!==null&&De.memoizedState.tag&1){if(n.flags|=2048,Bs(9,zg.bind(null,n,r,i,e),void 0,null),Pe===null)throw Error(T(349));Mr&30||_g(n,e,i)}return i}function _g(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zg(t,e,n,r){e.value=n,e.getSnapshot=r,Wg(e)&&Vg(t)}function Hg(t,e,n){return n(function(){Wg(e)&&Vg(t)})}function Wg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qt(t,n)}catch{return!0}}function Vg(t){var e=En(t,1);e!==null&&Gt(e,t,1,-1)}function bd(t){var e=ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:t},e.queue=t,t=t.dispatch=Sx.bind(null,ve,t),[e.memoizedState,t]}function Bs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ug(){return It().memoizedState}function Xl(t,e,n,r){var i=ln();ve.flags|=t,i.memoizedState=Bs(1|e,n,void 0,r===void 0?null:r)}function la(t,e,n,r){var i=It();r=r===void 0?null:r;var s=void 0;if(Ee!==null){var l=Ee.memoizedState;if(s=l.destroy,r!==null&&_h(r,l.deps)){i.memoizedState=Bs(e,n,s,r);return}}ve.flags|=t,i.memoizedState=Bs(1|e,n,s,r)}function Ad(t,e){return Xl(8390656,8,t,e)}function Wh(t,e){return la(2048,8,t,e)}function $g(t,e){return la(4,2,t,e)}function Kg(t,e){return la(4,4,t,e)}function Gg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qg(t,e,n){return n=n!=null?n.concat([t]):null,la(4,4,Gg.bind(null,e,t),n)}function Vh(){}function Yg(t,e){var n=It();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_h(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Qg(t,e){var n=It();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_h(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Jg(t,e,n){return Mr&21?(qt(n,e)||(n=ng(),ve.lanes|=n,Nr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,at=!0),t.memoizedState=n)}function xx(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=qa.transition;qa.transition={};try{t(!1),e()}finally{le=n,qa.transition=r}}function Xg(){return It().memoizedState}function kx(t,e,n){var r=Xn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zg(t))e0(e,n);else if(n=Rg(t,e,n,r),n!==null){var i=nt();Gt(n,t,r,i),t0(n,e,r)}}function Sx(t,e,n){var r=Xn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zg(t))e0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,qt(o,l)){var a=e.interleaved;a===null?(i.next=i,Rh(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Rg(t,e,i,r),n!==null&&(i=nt(),Gt(n,t,r,i),t0(n,e,r))}}function Zg(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function e0(t,e){cs=Mo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function t0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xh(t,n)}}var No={readContext:Rt,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},Cx={readContext:Rt,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:Rt,useEffect:Ad,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xl(4194308,4,Gg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xl(4,2,t,e)},useMemo:function(t,e){var n=ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kx.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:bd,useDebugValue:Vh,useDeferredValue:function(t){return ln().memoizedState=t},useTransition:function(){var t=bd(!1),e=t[0];return t=xx.bind(null,t[1]),ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,i=ln();if(me){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),Pe===null)throw Error(T(349));Mr&30||_g(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ad(Hg.bind(null,r,s,t),[t]),r.flags|=2048,Bs(9,zg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ln(),e=Pe.identifierPrefix;if(me){var n=xn,r=wn;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Rs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bx={readContext:Rt,useCallback:Yg,useContext:Rt,useEffect:Wh,useImperativeHandle:qg,useInsertionEffect:$g,useLayoutEffect:Kg,useMemo:Qg,useReducer:Ya,useRef:Ug,useState:function(){return Ya(Is)},useDebugValue:Vh,useDeferredValue:function(t){var e=It();return Jg(e,Ee.memoizedState,t)},useTransition:function(){var t=Ya(Is)[0],e=It().memoizedState;return[t,e]},useMutableSource:jg,useSyncExternalStore:Fg,useId:Xg,unstable_isNewReconciler:!1},Ax={readContext:Rt,useCallback:Yg,useContext:Rt,useEffect:Wh,useImperativeHandle:qg,useInsertionEffect:$g,useLayoutEffect:Kg,useMemo:Qg,useReducer:Qa,useRef:Ug,useState:function(){return Qa(Is)},useDebugValue:Vh,useDeferredValue:function(t){var e=It();return Ee===null?e.memoizedState=t:Jg(e,Ee.memoizedState,t)},useTransition:function(){var t=Qa(Is)[0],e=It().memoizedState;return[t,e]},useMutableSource:jg,useSyncExternalStore:Fg,useId:Xg,unstable_isNewReconciler:!1};function Wt(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var oa={isMounted:function(t){return(t=t._reactInternals)?Fr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nt(),i=Xn(t),s=kn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Qn(t,s,i),e!==null&&(Gt(e,t,i,r),Ql(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nt(),i=Xn(t),s=kn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Qn(t,s,i),e!==null&&(Gt(e,t,i,r),Ql(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nt(),r=Xn(t),i=kn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Qn(t,i,r),e!==null&&(Gt(e,t,r,n),Ql(e,t,r))}};function Ed(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!Ms(n,r)||!Ms(i,s):!0}function n0(t,e,n){var r=!1,i=nr,s=e.contextType;return typeof s=="object"&&s!==null?s=Rt(s):(i=ct(e)?Er:Je.current,r=e.contextTypes,s=(r=r!=null)?mi(t,i):nr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Td(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&oa.enqueueReplaceState(e,e.state,null)}function nc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ih(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rt(s):(s=ct(e)?Er:Je.current,i.context=mi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(tc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&oa.enqueueReplaceState(i,i.state,null),Eo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wi(t,e){try{var n="",r=e;do n+=Z1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ja(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ex=typeof WeakMap=="function"?WeakMap:Map;function r0(t,e,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Oo||(Oo=!0,dc=r),rc(t,e)},n}function i0(t,e,n){n=kn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){rc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){rc(t,e),typeof r!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Md(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ex;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zx.bind(null,t,e,n),e.then(t,t))}function Nd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kn(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var Tx=Nn.ReactCurrentOwner,at=!1;function tt(t,e,n,r){e.child=t===null?Lg(e,null,n,r):yi(e,t.child,n,r)}function Od(t,e,n,r,i){n=n.render;var s=e.ref;return ai(e,i),r=zh(t,e,n,r,s,i),n=Hh(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tn(t,e,i)):(me&&n&&Mh(e),e.flags|=1,tt(t,e,r,i),e.child)}function Pd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Jh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,s0(t,e,s,r,i)):(t=no(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ms,n(l,r)&&t.ref===e.ref)return Tn(t,e,i)}return e.flags|=1,t=Zn(s,r),t.ref=e.ref,t.return=e,e.child=t}function s0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ms(s,r)&&t.ref===e.ref)if(at=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(at=!0);else return e.lanes=t.lanes,Tn(t,e,i)}return ic(t,e,n,r,i)}function l0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(ei,mt),mt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(ei,mt),mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(ei,mt),mt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ue(ei,mt),mt|=r;return tt(t,e,i,n),e.child}function o0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ic(t,e,n,r,i){var s=ct(n)?Er:Je.current;return s=mi(e,s),ai(e,i),n=zh(t,e,n,r,s,i),r=Hh(),t!==null&&!at?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tn(t,e,i)):(me&&r&&Mh(e),e.flags|=1,tt(t,e,n,i),e.child)}function Ld(t,e,n,r,i){if(ct(n)){var s=!0;ko(e)}else s=!1;if(ai(e,i),e.stateNode===null)Zl(t,e),n0(e,n,r),nc(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Rt(u):(u=ct(n)?Er:Je.current,u=mi(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&Td(e,l,r,u),Rn=!1;var f=e.memoizedState;l.state=f,Eo(e,r,l,i),a=e.memoizedState,o!==r||f!==a||ut.current||Rn?(typeof c=="function"&&(tc(e,n,c,r),a=e.memoizedState),(o=Rn||Ed(e,n,o,r,f,a,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Ig(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Wt(e.type,o),l.props=u,h=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Rt(a):(a=ct(n)?Er:Je.current,a=mi(e,a));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==a)&&Td(e,l,r,a),Rn=!1,f=e.memoizedState,l.state=f,Eo(e,r,l,i);var g=e.memoizedState;o!==h||f!==g||ut.current||Rn?(typeof d=="function"&&(tc(e,n,d,r),g=e.memoizedState),(u=Rn||Ed(e,n,u,r,f,g,a)||!1)?(c||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,g,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,g,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),l.props=r,l.state=g,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return sc(t,e,n,r,s,i)}function sc(t,e,n,r,i,s){o0(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&vd(e,n,!1),Tn(t,e,s);r=e.stateNode,Tx.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=yi(e,t.child,null,s),e.child=yi(e,null,o,s)):tt(t,e,o,s),e.memoizedState=r.state,i&&vd(e,n,!0),e.child}function a0(t){var e=t.stateNode;e.pendingContext?yd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yd(t,e.context,!1),Bh(t,e.containerInfo)}function Rd(t,e,n,r,i){return gi(),Dh(i),e.flags|=256,tt(t,e,n,r),e.child}var lc={dehydrated:null,treeContext:null,retryLane:0};function oc(t){return{baseLanes:t,cachePool:null,transitions:null}}function u0(t,e,n){var r=e.pendingProps,i=ge.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(ge,i&1),t===null)return Zu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=ca(l,r,0,null),t=br(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=oc(n),e.memoizedState=lc,t):Uh(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Mx(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Zn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Zn(o,s):(s=br(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?oc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=lc,r}return s=t.child,t=s.sibling,r=Zn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uh(t,e){return e=ca({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kl(t,e,n,r){return r!==null&&Dh(r),yi(e,t.child,null,n),t=Uh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mx(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=Ja(Error(T(422))),kl(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ca({mode:"visible",children:r.children},i,0,null),s=br(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&yi(e,t.child,null,l),e.child.memoizedState=oc(l),e.memoizedState=lc,s);if(!(e.mode&1))return kl(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(T(419)),r=Ja(s,r,void 0),kl(t,e,l,r)}if(o=(l&t.childLanes)!==0,at||o){if(r=Pe,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,En(t,i),Gt(r,t,i,-1))}return Qh(),r=Ja(Error(T(421))),kl(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Hx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vt=Yn(i.nextSibling),wt=e,me=!0,Ut=null,t!==null&&(Et[Tt++]=wn,Et[Tt++]=xn,Et[Tt++]=Tr,wn=t.id,xn=t.overflow,Tr=e),e=Uh(e,r.children),e.flags|=4096,e)}function Id(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ec(t.return,e,n)}function Xa(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function c0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(tt(t,e,r.children,n),r=ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Id(t,n,e);else if(t.tag===19)Id(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&To(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Xa(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&To(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Xa(e,!0,n,null,s);break;case"together":Xa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=Zn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nx(t,e,n){switch(e.tag){case 3:a0(e),gi();break;case 5:Bg(e);break;case 1:ct(e.type)&&ko(e);break;case 4:Bh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ue(bo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(ge,ge.current&1),e.flags|=128,null):n&e.child.childLanes?u0(t,e,n):(ue(ge,ge.current&1),t=Tn(t,e,n),t!==null?t.sibling:null);ue(ge,ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return c0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(ge,ge.current),r)break;return null;case 22:case 23:return e.lanes=0,l0(t,e,n)}return Tn(t,e,n)}var h0,ac,f0,d0;h0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ac=function(){};f0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xr(dn.current);var s=null;switch(n){case"input":i=Du(t,i),r=Du(t,r),s=[];break;case"select":i=we({},i,{value:void 0}),r=we({},r,{value:void 0}),s=[];break;case"textarea":i=Lu(t,i),r=Lu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wo)}Iu(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ks.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ks.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&he("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};d0=function(t,e,n,r){n!==r&&(e.flags|=4)};function $i(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Dx(t,e,n){var r=e.pendingProps;switch(Nh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return ct(e.type)&&xo(),Ke(e),null;case 3:return r=e.stateNode,vi(),de(ut),de(Je),Fh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ut!==null&&(gc(Ut),Ut=null))),ac(t,e),Ke(e),null;case 5:jh(e);var i=xr(Ls.current);if(n=e.type,t!==null&&e.stateNode!=null)f0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(T(166));return Ke(e),null}if(t=xr(dn.current),wl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[on]=e,r[Os]=s,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(i=0;i<ts.length;i++)he(ts[i],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Uf(r,s),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},he("invalid",r);break;case"textarea":Kf(r,s),he("invalid",r)}Iu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&vl(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&vl(r.textContent,o,t),i=["children",""+o]):ks.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&he("scroll",r)}switch(n){case"input":cl(r),$f(r,s,!0);break;case"textarea":cl(r),Gf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[on]=e,t[Os]=r,h0(t,e,!1,!1),e.stateNode=t;e:{switch(l=Bu(n,r),n){case"dialog":he("cancel",t),he("close",t),i=r;break;case"iframe":case"object":case"embed":he("load",t),i=r;break;case"video":case"audio":for(i=0;i<ts.length;i++)he(ts[i],t);i=r;break;case"source":he("error",t),i=r;break;case"img":case"image":case"link":he("error",t),he("load",t),i=r;break;case"details":he("toggle",t),i=r;break;case"input":Uf(t,r),i=Du(t,r),he("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=we({},r,{value:void 0}),he("invalid",t);break;case"textarea":Kf(t,r),i=Lu(t,r),he("invalid",t);break;default:i=r}Iu(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?Um(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Wm(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ss(t,a):typeof a=="number"&&Ss(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ks.hasOwnProperty(s)?a!=null&&s==="onScroll"&&he("scroll",t):a!=null&&ph(t,s,a,l))}switch(n){case"input":cl(t),$f(t,r,!1);break;case"textarea":cl(t),Gf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+tr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ii(t,!!r.multiple,s,!1):r.defaultValue!=null&&ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)d0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(T(166));if(n=xr(Ls.current),xr(dn.current),wl(e)){if(r=e.stateNode,n=e.memoizedProps,r[on]=e,(s=r.nodeValue!==n)&&(t=wt,t!==null))switch(t.tag){case 3:vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[on]=e,e.stateNode=r}return Ke(e),null;case 13:if(de(ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(me&&vt!==null&&e.mode&1&&!(e.flags&128))Og(),gi(),e.flags|=98560,s=!1;else if(s=wl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(T(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(T(317));s[on]=e}else gi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),s=!1}else Ut!==null&&(gc(Ut),Ut=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Te===0&&(Te=3):Qh())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return vi(),ac(t,e),t===null&&Ns(e.stateNode.containerInfo),Ke(e),null;case 10:return Lh(e.type._context),Ke(e),null;case 17:return ct(e.type)&&xo(),Ke(e),null;case 19:if(de(ge),s=e.memoizedState,s===null)return Ke(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)$i(s,!1);else{if(Te!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=To(t),l!==null){for(e.flags|=128,$i(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(ge,ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ce()>xi&&(e.flags|=128,r=!0,$i(s,!1),e.lanes=4194304)}else{if(!r)if(t=To(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$i(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!me)return Ke(e),null}else 2*Ce()-s.renderingStartTime>xi&&n!==1073741824&&(e.flags|=128,r=!0,$i(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ce(),e.sibling=null,n=ge.current,ue(ge,r?n&1|2:n&1),e):(Ke(e),null);case 22:case 23:return Yh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mt&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function Ox(t,e){switch(Nh(e),e.tag){case 1:return ct(e.type)&&xo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vi(),de(ut),de(Je),Fh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jh(e),null;case 13:if(de(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));gi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(ge),null;case 4:return vi(),null;case 10:return Lh(e.type._context),null;case 22:case 23:return Yh(),null;case 24:return null;default:return null}}var Sl=!1,qe=!1,Px=typeof WeakSet=="function"?WeakSet:Set,I=null;function Zr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xe(t,e,r)}else n.current=null}function uc(t,e,n){try{n()}catch(r){xe(t,e,r)}}var Bd=!1;function Lx(t,e){if(Ku=go,t=vg(),Th(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(o=l+i),h!==s||r!==0&&h.nodeType!==3||(a=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++c===r&&(a=l),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gu={focusedElem:t,selectionRange:n},go=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,x=g.memoizedState,p=e.stateNode,y=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:Wt(e.type,w),x);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(S){xe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return g=Bd,Bd=!1,g}function hs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&uc(e,n,s)}i=i.next}while(i!==r)}}function aa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function p0(t){var e=t.alternate;e!==null&&(t.alternate=null,p0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[on],delete e[Os],delete e[Qu],delete e[mx],delete e[gx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function m0(t){return t.tag===5||t.tag===3||t.tag===4}function jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||m0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wo));else if(r!==4&&(t=t.child,t!==null))for(hc(t,e,n),t=t.sibling;t!==null;)hc(t,e,n),t=t.sibling}function fc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fc(t,e,n),t=t.sibling;t!==null;)fc(t,e,n),t=t.sibling}var Re=null,Vt=!1;function On(t,e,n){for(n=n.child;n!==null;)g0(t,e,n),n=n.sibling}function g0(t,e,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(ea,n)}catch{}switch(n.tag){case 5:qe||Zr(n,e);case 6:var r=Re,i=Vt;Re=null,On(t,e,n),Re=r,Vt=i,Re!==null&&(Vt?(t=Re,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Re.removeChild(n.stateNode));break;case 18:Re!==null&&(Vt?(t=Re,n=n.stateNode,t.nodeType===8?$a(t.parentNode,n):t.nodeType===1&&$a(t,n),Es(t)):$a(Re,n.stateNode));break;case 4:r=Re,i=Vt,Re=n.stateNode.containerInfo,Vt=!0,On(t,e,n),Re=r,Vt=i;break;case 0:case 11:case 14:case 15:if(!qe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&uc(n,e,l),i=i.next}while(i!==r)}On(t,e,n);break;case 1:if(!qe&&(Zr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){xe(n,e,o)}On(t,e,n);break;case 21:On(t,e,n);break;case 22:n.mode&1?(qe=(r=qe)||n.memoizedState!==null,On(t,e,n),qe=r):On(t,e,n);break;default:On(t,e,n)}}function Fd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Px),e.forEach(function(r){var i=Wx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Re=o.stateNode,Vt=!1;break e;case 3:Re=o.stateNode.containerInfo,Vt=!0;break e;case 4:Re=o.stateNode.containerInfo,Vt=!0;break e}o=o.return}if(Re===null)throw Error(T(160));g0(s,l,i),Re=null,Vt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){xe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)y0(e,t),e=e.sibling}function y0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_t(e,t),en(t),r&4){try{hs(3,t,t.return),aa(3,t)}catch(w){xe(t,t.return,w)}try{hs(5,t,t.return)}catch(w){xe(t,t.return,w)}}break;case 1:_t(e,t),en(t),r&512&&n!==null&&Zr(n,n.return);break;case 5:if(_t(e,t),en(t),r&512&&n!==null&&Zr(n,n.return),t.flags&32){var i=t.stateNode;try{Ss(i,"")}catch(w){xe(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&_m(i,s),Bu(o,l);var u=Bu(o,s);for(l=0;l<a.length;l+=2){var c=a[l],h=a[l+1];c==="style"?Um(i,h):c==="dangerouslySetInnerHTML"?Wm(i,h):c==="children"?Ss(i,h):ph(i,c,h,u)}switch(o){case"input":Ou(i,s);break;case"textarea":zm(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?ii(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?ii(i,!!s.multiple,s.defaultValue,!0):ii(i,!!s.multiple,s.multiple?[]:"",!1))}i[Os]=s}catch(w){xe(t,t.return,w)}}break;case 6:if(_t(e,t),en(t),r&4){if(t.stateNode===null)throw Error(T(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){xe(t,t.return,w)}}break;case 3:if(_t(e,t),en(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Es(e.containerInfo)}catch(w){xe(t,t.return,w)}break;case 4:_t(e,t),en(t);break;case 13:_t(e,t),en(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gh=Ce())),r&4&&Fd(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(qe=(u=qe)||c,_t(e,t),qe=u):_t(e,t),en(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(I=t,c=t.child;c!==null;){for(h=I=c;I!==null;){switch(f=I,d=f.child,f.tag){case 0:case 11:case 14:case 15:hs(4,f,f.return);break;case 1:Zr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(w){xe(r,n,w)}}break;case 5:Zr(f,f.return);break;case 22:if(f.memoizedState!==null){zd(h);continue}}d!==null?(d.return=f,I=d):zd(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=Vm("display",l))}catch(w){xe(t,t.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){xe(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_t(e,t),en(t),r&4&&Fd(t);break;case 21:break;default:_t(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(m0(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ss(i,""),r.flags&=-33);var s=jd(t);fc(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=jd(t);hc(t,o,l);break;default:throw Error(T(161))}}catch(a){xe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rx(t,e,n){I=t,v0(t)}function v0(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Sl;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||qe;o=Sl;var u=qe;if(Sl=l,(qe=a)&&!u)for(I=i;I!==null;)l=I,a=l.child,l.tag===22&&l.memoizedState!==null?Hd(i):a!==null?(a.return=l,I=a):Hd(i);for(;s!==null;)I=s,v0(s),s=s.sibling;I=i,Sl=o,qe=u}_d(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):_d(t)}}function _d(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qe||aa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!qe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Wt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Cd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cd(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Es(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}qe||e.flags&512&&cc(e)}catch(f){xe(e,e.return,f)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function zd(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function Hd(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{aa(4,e)}catch(a){xe(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){xe(e,i,a)}}var s=e.return;try{cc(e)}catch(a){xe(e,s,a)}break;case 5:var l=e.return;try{cc(e)}catch(a){xe(e,l,a)}}}catch(a){xe(e,e.return,a)}if(e===t){I=null;break}var o=e.sibling;if(o!==null){o.return=e.return,I=o;break}I=e.return}}var Ix=Math.ceil,Do=Nn.ReactCurrentDispatcher,$h=Nn.ReactCurrentOwner,Dt=Nn.ReactCurrentBatchConfig,ee=0,Pe=null,Ae=null,He=0,mt=0,ei=cr(0),Te=0,js=null,Nr=0,ua=0,Kh=0,fs=null,lt=null,Gh=0,xi=1/0,gn=null,Oo=!1,dc=null,Jn=null,Cl=!1,Wn=null,Po=0,ds=0,pc=null,eo=-1,to=0;function nt(){return ee&6?Ce():eo!==-1?eo:eo=Ce()}function Xn(t){return t.mode&1?ee&2&&He!==0?He&-He:vx.transition!==null?(to===0&&(to=ng()),to):(t=le,t!==0||(t=window.event,t=t===void 0?16:ug(t.type)),t):1}function Gt(t,e,n,r){if(50<ds)throw ds=0,pc=null,Error(T(185));Qs(t,n,r),(!(ee&2)||t!==Pe)&&(t===Pe&&(!(ee&2)&&(ua|=n),Te===4&&_n(t,He)),ht(t,r),n===1&&ee===0&&!(e.mode&1)&&(xi=Ce()+500,sa&&hr()))}function ht(t,e){var n=t.callbackNode;vw(t,e);var r=mo(t,t===Pe?He:0);if(r===0)n!==null&&Qf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qf(n),e===1)t.tag===0?yx(Wd.bind(null,t)):Mg(Wd.bind(null,t)),dx(function(){!(ee&6)&&hr()}),n=null;else{switch(rg(r)){case 1:n=wh;break;case 4:n=eg;break;case 16:n=po;break;case 536870912:n=tg;break;default:n=po}n=E0(n,w0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function w0(t,e){if(eo=-1,to=0,ee&6)throw Error(T(327));var n=t.callbackNode;if(ui()&&t.callbackNode!==n)return null;var r=mo(t,t===Pe?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lo(t,r);else{e=r;var i=ee;ee|=2;var s=k0();(Pe!==t||He!==e)&&(gn=null,xi=Ce()+500,Cr(t,e));do try{Fx();break}catch(o){x0(t,o)}while(!0);Ph(),Do.current=s,ee=i,Ae!==null?e=0:(Pe=null,He=0,e=Te)}if(e!==0){if(e===2&&(i=Hu(t),i!==0&&(r=i,e=mc(t,i))),e===1)throw n=js,Cr(t,0),_n(t,r),ht(t,Ce()),n;if(e===6)_n(t,r);else{if(i=t.current.alternate,!(r&30)&&!Bx(i)&&(e=Lo(t,r),e===2&&(s=Hu(t),s!==0&&(r=s,e=mc(t,s))),e===1))throw n=js,Cr(t,0),_n(t,r),ht(t,Ce()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(T(345));case 2:gr(t,lt,gn);break;case 3:if(_n(t,r),(r&130023424)===r&&(e=Gh+500-Ce(),10<e)){if(mo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Yu(gr.bind(null,t,lt,gn),e);break}gr(t,lt,gn);break;case 4:if(_n(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Kt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ix(r/1960))-r,10<r){t.timeoutHandle=Yu(gr.bind(null,t,lt,gn),r);break}gr(t,lt,gn);break;case 5:gr(t,lt,gn);break;default:throw Error(T(329))}}}return ht(t,Ce()),t.callbackNode===n?w0.bind(null,t):null}function mc(t,e){var n=fs;return t.current.memoizedState.isDehydrated&&(Cr(t,e).flags|=256),t=Lo(t,e),t!==2&&(e=lt,lt=n,e!==null&&gc(e)),t}function gc(t){lt===null?lt=t:lt.push.apply(lt,t)}function Bx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!qt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _n(t,e){for(e&=~Kh,e&=~ua,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kt(e),r=1<<n;t[n]=-1,e&=~r}}function Wd(t){if(ee&6)throw Error(T(327));ui();var e=mo(t,0);if(!(e&1))return ht(t,Ce()),null;var n=Lo(t,e);if(t.tag!==0&&n===2){var r=Hu(t);r!==0&&(e=r,n=mc(t,r))}if(n===1)throw n=js,Cr(t,0),_n(t,e),ht(t,Ce()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gr(t,lt,gn),ht(t,Ce()),null}function qh(t,e){var n=ee;ee|=1;try{return t(e)}finally{ee=n,ee===0&&(xi=Ce()+500,sa&&hr())}}function Dr(t){Wn!==null&&Wn.tag===0&&!(ee&6)&&ui();var e=ee;ee|=1;var n=Dt.transition,r=le;try{if(Dt.transition=null,le=1,t)return t()}finally{le=r,Dt.transition=n,ee=e,!(ee&6)&&hr()}}function Yh(){mt=ei.current,de(ei)}function Cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fx(n)),Ae!==null)for(n=Ae.return;n!==null;){var r=n;switch(Nh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xo();break;case 3:vi(),de(ut),de(Je),Fh();break;case 5:jh(r);break;case 4:vi();break;case 13:de(ge);break;case 19:de(ge);break;case 10:Lh(r.type._context);break;case 22:case 23:Yh()}n=n.return}if(Pe=t,Ae=t=Zn(t.current,null),He=mt=e,Te=0,js=null,Kh=ua=Nr=0,lt=fs=null,wr!==null){for(e=0;e<wr.length;e++)if(n=wr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}wr=null}return t}function x0(t,e){do{var n=Ae;try{if(Ph(),Jl.current=No,Mo){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Mo=!1}if(Mr=0,De=Ee=ve=null,cs=!1,Rs=0,$h.current=null,n===null||n.return===null){Te=1,js=e,Ae=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=He,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=Nd(l);if(d!==null){d.flags&=-257,Dd(d,l,o,s,e),d.mode&1&&Md(s,u,e),e=d,a=u;var g=e.updateQueue;if(g===null){var w=new Set;w.add(a),e.updateQueue=w}else g.add(a);break e}else{if(!(e&1)){Md(s,u,e),Qh();break e}a=Error(T(426))}}else if(me&&o.mode&1){var x=Nd(l);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Dd(x,l,o,s,e),Dh(wi(a,o));break e}}s=a=wi(a,o),Te!==4&&(Te=2),fs===null?fs=[s]:fs.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=r0(s,a,e);Sd(s,p);break e;case 1:o=a;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Jn===null||!Jn.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=i0(s,o,e);Sd(s,S);break e}}s=s.return}while(s!==null)}C0(n)}catch(C){e=C,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function k0(){var t=Do.current;return Do.current=No,t===null?No:t}function Qh(){(Te===0||Te===3||Te===2)&&(Te=4),Pe===null||!(Nr&268435455)&&!(ua&268435455)||_n(Pe,He)}function Lo(t,e){var n=ee;ee|=2;var r=k0();(Pe!==t||He!==e)&&(gn=null,Cr(t,e));do try{jx();break}catch(i){x0(t,i)}while(!0);if(Ph(),ee=n,Do.current=r,Ae!==null)throw Error(T(261));return Pe=null,He=0,Te}function jx(){for(;Ae!==null;)S0(Ae)}function Fx(){for(;Ae!==null&&!uw();)S0(Ae)}function S0(t){var e=A0(t.alternate,t,mt);t.memoizedProps=t.pendingProps,e===null?C0(t):Ae=e,$h.current=null}function C0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ox(n,e),n!==null){n.flags&=32767,Ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Te=6,Ae=null;return}}else if(n=Dx(n,e,mt),n!==null){Ae=n;return}if(e=e.sibling,e!==null){Ae=e;return}Ae=e=t}while(e!==null);Te===0&&(Te=5)}function gr(t,e,n){var r=le,i=Dt.transition;try{Dt.transition=null,le=1,_x(t,e,n,r)}finally{Dt.transition=i,le=r}return null}function _x(t,e,n,r){do ui();while(Wn!==null);if(ee&6)throw Error(T(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ww(t,s),t===Pe&&(Ae=Pe=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cl||(Cl=!0,E0(po,function(){return ui(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dt.transition,Dt.transition=null;var l=le;le=1;var o=ee;ee|=4,$h.current=null,Lx(t,n),y0(n,t),sx(Gu),go=!!Ku,Gu=Ku=null,t.current=n,Rx(n),cw(),ee=o,le=l,Dt.transition=s}else t.current=n;if(Cl&&(Cl=!1,Wn=t,Po=i),s=t.pendingLanes,s===0&&(Jn=null),dw(n.stateNode),ht(t,Ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Oo)throw Oo=!1,t=dc,dc=null,t;return Po&1&&t.tag!==0&&ui(),s=t.pendingLanes,s&1?t===pc?ds++:(ds=0,pc=t):ds=0,hr(),null}function ui(){if(Wn!==null){var t=rg(Po),e=Dt.transition,n=le;try{if(Dt.transition=null,le=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,Po=0,ee&6)throw Error(T(331));var i=ee;for(ee|=4,I=t.current;I!==null;){var s=I,l=s.child;if(I.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(I=u;I!==null;){var c=I;switch(c.tag){case 0:case 11:case 15:hs(8,c,s)}var h=c.child;if(h!==null)h.return=c,I=h;else for(;I!==null;){c=I;var f=c.sibling,d=c.return;if(p0(c),c===u){I=null;break}if(f!==null){f.return=d,I=f;break}I=d}}}var g=s.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}I=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,I=l;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:hs(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,I=p;break e}I=s.return}}var y=t.current;for(I=y;I!==null;){l=I;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,I=v;else e:for(l=y;I!==null;){if(o=I,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:aa(9,o)}}catch(C){xe(o,o.return,C)}if(o===l){I=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,I=S;break e}I=o.return}}if(ee=i,hr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(ea,t)}catch{}r=!0}return r}finally{le=n,Dt.transition=e}}return!1}function Vd(t,e,n){e=wi(n,e),e=r0(t,e,1),t=Qn(t,e,1),e=nt(),t!==null&&(Qs(t,1,e),ht(t,e))}function xe(t,e,n){if(t.tag===3)Vd(t,t,n);else for(;e!==null;){if(e.tag===3){Vd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jn===null||!Jn.has(r))){t=wi(n,t),t=i0(e,t,1),e=Qn(e,t,1),t=nt(),e!==null&&(Qs(e,1,t),ht(e,t));break}}e=e.return}}function zx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nt(),t.pingedLanes|=t.suspendedLanes&n,Pe===t&&(He&n)===n&&(Te===4||Te===3&&(He&130023424)===He&&500>Ce()-Gh?Cr(t,0):Kh|=n),ht(t,e)}function b0(t,e){e===0&&(t.mode&1?(e=dl,dl<<=1,!(dl&130023424)&&(dl=4194304)):e=1);var n=nt();t=En(t,e),t!==null&&(Qs(t,e,n),ht(t,n))}function Hx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),b0(t,n)}function Wx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(e),b0(t,n)}var A0;A0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ut.current)at=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return at=!1,Nx(t,e,n);at=!!(t.flags&131072)}else at=!1,me&&e.flags&1048576&&Ng(e,Co,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zl(t,e),t=e.pendingProps;var i=mi(e,Je.current);ai(e,n),i=zh(null,e,r,t,i,n);var s=Hh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ct(r)?(s=!0,ko(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ih(e),i.updater=oa,e.stateNode=i,i._reactInternals=e,nc(e,r,t,n),e=sc(null,e,r,!0,s,n)):(e.tag=0,me&&s&&Mh(e),tt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ux(r),t=Wt(r,t),i){case 0:e=ic(null,e,r,t,n);break e;case 1:e=Ld(null,e,r,t,n);break e;case 11:e=Od(null,e,r,t,n);break e;case 14:e=Pd(null,e,r,Wt(r.type,t),n);break e}throw Error(T(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wt(r,i),ic(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wt(r,i),Ld(t,e,r,i,n);case 3:e:{if(a0(e),t===null)throw Error(T(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Ig(t,e),Eo(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wi(Error(T(423)),e),e=Rd(t,e,r,n,i);break e}else if(r!==i){i=wi(Error(T(424)),e),e=Rd(t,e,r,n,i);break e}else for(vt=Yn(e.stateNode.containerInfo.firstChild),wt=e,me=!0,Ut=null,n=Lg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gi(),r===i){e=Tn(t,e,n);break e}tt(t,e,r,n)}e=e.child}return e;case 5:return Bg(e),t===null&&Zu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,qu(r,i)?l=null:s!==null&&qu(r,s)&&(e.flags|=32),o0(t,e),tt(t,e,l,n),e.child;case 6:return t===null&&Zu(e),null;case 13:return u0(t,e,n);case 4:return Bh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=yi(e,null,r,n):tt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wt(r,i),Od(t,e,r,i,n);case 7:return tt(t,e,e.pendingProps,n),e.child;case 8:return tt(t,e,e.pendingProps.children,n),e.child;case 12:return tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,ue(bo,r._currentValue),r._currentValue=l,s!==null)if(qt(s.value,l)){if(s.children===i.children&&!ut.current){e=Tn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=kn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ec(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(T(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),ec(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}tt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ai(e,n),i=Rt(i),r=r(i),e.flags|=1,tt(t,e,r,n),e.child;case 14:return r=e.type,i=Wt(r,e.pendingProps),i=Wt(r.type,i),Pd(t,e,r,i,n);case 15:return s0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wt(r,i),Zl(t,e),e.tag=1,ct(r)?(t=!0,ko(e)):t=!1,ai(e,n),n0(e,r,i),nc(e,r,i,n),sc(null,e,r,!0,t,n);case 19:return c0(t,e,n);case 22:return l0(t,e,n)}throw Error(T(156,e.tag))};function E0(t,e){return Zm(t,e)}function Vx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(t,e,n,r){return new Vx(t,e,n,r)}function Jh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ux(t){if(typeof t=="function")return Jh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gh)return 11;if(t===yh)return 14}return 2}function Zn(t,e){var n=t.alternate;return n===null?(n=Nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function no(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")Jh(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Ur:return br(n.children,i,s,e);case mh:l=8,i|=8;break;case Eu:return t=Nt(12,n,e,i|2),t.elementType=Eu,t.lanes=s,t;case Tu:return t=Nt(13,n,e,i),t.elementType=Tu,t.lanes=s,t;case Mu:return t=Nt(19,n,e,i),t.elementType=Mu,t.lanes=s,t;case Bm:return ca(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rm:l=10;break e;case Im:l=9;break e;case gh:l=11;break e;case yh:l=14;break e;case Ln:l=16,r=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=Nt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function br(t,e,n,r){return t=Nt(7,t,r,e),t.lanes=n,t}function ca(t,e,n,r){return t=Nt(22,t,r,e),t.elementType=Bm,t.lanes=n,t.stateNode={isHidden:!1},t}function Za(t,e,n){return t=Nt(6,t,null,e),t.lanes=n,t}function eu(t,e,n){return e=Nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $x(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ra(0),this.expirationTimes=Ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xh(t,e,n,r,i,s,l,o,a){return t=new $x(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ih(s),t}function Kx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function T0(t){if(!t)return nr;t=t._reactInternals;e:{if(Fr(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(ct(n))return Tg(t,n,e)}return e}function M0(t,e,n,r,i,s,l,o,a){return t=Xh(n,r,!0,t,i,s,l,o,a),t.context=T0(null),n=t.current,r=nt(),i=Xn(n),s=kn(r,i),s.callback=e??null,Qn(n,s,i),t.current.lanes=i,Qs(t,i,r),ht(t,r),t}function ha(t,e,n,r){var i=e.current,s=nt(),l=Xn(i);return n=T0(n),e.context===null?e.context=n:e.pendingContext=n,e=kn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qn(i,e,l),t!==null&&(Gt(t,i,l,s),Ql(t,i,l)),l}function Ro(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ud(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zh(t,e){Ud(t,e),(t=t.alternate)&&Ud(t,e)}function Gx(){return null}var N0=typeof reportError=="function"?reportError:function(t){console.error(t)};function ef(t){this._internalRoot=t}fa.prototype.render=ef.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));ha(t,e,null,null)};fa.prototype.unmount=ef.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dr(function(){ha(null,t,null,null)}),e[An]=null}};function fa(t){this._internalRoot=t}fa.prototype.unstable_scheduleHydration=function(t){if(t){var e=lg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fn.length&&e!==0&&e<Fn[n].priority;n++);Fn.splice(n,0,t),n===0&&ag(t)}};function tf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function da(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $d(){}function qx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ro(l);s.call(u)}}var l=M0(e,r,t,0,null,!1,!1,"",$d);return t._reactRootContainer=l,t[An]=l.current,Ns(t.nodeType===8?t.parentNode:t),Dr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Ro(a);o.call(u)}}var a=Xh(t,0,!1,null,null,!1,!1,"",$d);return t._reactRootContainer=a,t[An]=a.current,Ns(t.nodeType===8?t.parentNode:t),Dr(function(){ha(e,a,n,r)}),a}function pa(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=Ro(l);o.call(a)}}ha(e,l,t,i)}else l=qx(n,e,t,i,r);return Ro(l)}ig=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=es(e.pendingLanes);n!==0&&(xh(e,n|1),ht(e,Ce()),!(ee&6)&&(xi=Ce()+500,hr()))}break;case 13:Dr(function(){var r=En(t,1);if(r!==null){var i=nt();Gt(r,t,1,i)}}),Zh(t,1)}};kh=function(t){if(t.tag===13){var e=En(t,134217728);if(e!==null){var n=nt();Gt(e,t,134217728,n)}Zh(t,134217728)}};sg=function(t){if(t.tag===13){var e=Xn(t),n=En(t,e);if(n!==null){var r=nt();Gt(n,t,e,r)}Zh(t,e)}};lg=function(){return le};og=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};Fu=function(t,e,n){switch(e){case"input":if(Ou(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ia(r);if(!i)throw Error(T(90));Fm(r),Ou(r,i)}}}break;case"textarea":zm(t,n);break;case"select":e=n.value,e!=null&&ii(t,!!n.multiple,e,!1)}};Gm=qh;qm=Dr;var Yx={usingClientEntryPoint:!1,Events:[Xs,qr,ia,$m,Km,qh]},Ki={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qx={bundleType:Ki.bundleType,version:Ki.version,rendererPackageName:Ki.rendererPackageName,rendererConfig:Ki.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jm(t),t===null?null:t.stateNode},findFiberByHostInstance:Ki.findFiberByHostInstance||Gx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{ea=bl.inject(Qx),fn=bl}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yx;Ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tf(e))throw Error(T(200));return Kx(t,e,null,n)};Ct.createRoot=function(t,e){if(!tf(t))throw Error(T(299));var n=!1,r="",i=N0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xh(t,1,!1,null,null,n,!1,r,i),t[An]=e.current,Ns(t.nodeType===8?t.parentNode:t),new ef(e)};Ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Jm(e),t=t===null?null:t.stateNode,t};Ct.flushSync=function(t){return Dr(t)};Ct.hydrate=function(t,e,n){if(!da(e))throw Error(T(200));return pa(null,t,e,!0,n)};Ct.hydrateRoot=function(t,e,n){if(!tf(t))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=N0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=M0(e,null,t,1,n??null,i,!1,s,l),t[An]=e.current,Ns(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new fa(e)};Ct.render=function(t,e,n){if(!da(e))throw Error(T(200));return pa(null,t,e,!1,n)};Ct.unmountComponentAtNode=function(t){if(!da(t))throw Error(T(40));return t._reactRootContainer?(Dr(function(){pa(null,null,t,!1,function(){t._reactRootContainer=null,t[An]=null})}),!0):!1};Ct.unstable_batchedUpdates=qh;Ct.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!da(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return pa(t,e,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function D0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D0)}catch(t){console.error(t)}}D0(),Dm.exports=Ct;var Jx=Dm.exports,Kd=Jx;bu.createRoot=Kd.createRoot,bu.hydrateRoot=Kd.hydrateRoot;let yc=[],O0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?O0:yc).push(n=n+t[e])})();function Xx(t){if(t<768)return!1;for(let e=0,n=yc.length;;){let r=e+n>>1;if(t<yc[r])n=r;else if(t>=O0[r])e=r+1;else return!0;if(e==n)return!1}}function Gd(t){return t>=127462&&t<=127487}const qd=8205;function Zx(t,e,n=!0,r=!0){return(n?P0:ek)(t,e,r)}function P0(t,e,n){if(e==t.length)return e;e&&L0(t.charCodeAt(e))&&R0(t.charCodeAt(e-1))&&e--;let r=tu(t,e);for(e+=Yd(r);e<t.length;){let i=tu(t,e);if(r==qd||i==qd||n&&Xx(i))e+=Yd(i),r=i;else if(Gd(i)){let s=0,l=e-2;for(;l>=0&&Gd(tu(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function ek(t,e,n){for(;e>0;){let r=P0(t,e-2,n);if(r<e)return r;e--}return 0}function tu(t,e){let n=t.charCodeAt(e);if(!R0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return L0(r)?(n-55296<<10)+(r-56320)+65536:n}function L0(t){return t>=56320&&t<57344}function R0(t){return t>=55296&&t<56320}function Yd(t){return t<65536?1:2}class Z{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=ki(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),an.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=ki(this,e,n);let r=[];return this.decompose(e,n,r,0),an.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new ps(this),s=new ps(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new ps(this,e)}iterRange(e,n=this.length){return new I0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new B0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Z.empty:e.length<=32?new Se(e):an.from(Se.split(e,[]))}}class Se extends Z{constructor(e,n=tk(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new nk(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Se(Qd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=ro(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new Se(o,l.length+s.length));else{let a=o.length>>1;r.push(new Se(o.slice(0,a)),new Se(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Se))return super.replace(e,n,r);[e,n]=ki(this,e,n);let i=ro(this.text,ro(r.text,Qd(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Se(i,s):an.from(Se.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=ki(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Se(r,i)),r=[],i=-1);return i>-1&&n.push(new Se(r,i)),n}}class an extends Z{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=ki(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new an(c,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=ki(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof an))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let g of e)g.flatten(d);return new Se(d,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,c=[];function h(d){let g;if(d.lines>s&&d instanceof an)for(let w of d.children)h(w);else d.lines>l&&(a>l||!a)?(f(),o.push(d)):d instanceof Se&&a&&(g=c[c.length-1])instanceof Se&&d.lines+g.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new Se(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>i&&f(),a+=d.lines,u+=d.length+1,c.push(d))}function f(){a!=0&&(o.push(c.length==1?c[0]:an.from(c,u)),u=-1,a=c.length=0)}for(let d of e)h(d);return f(),o.length==1?o[0]:new an(o,n)}}Z.empty=new Se([""],0);function tk(t){let e=-1;for(let n of t)e+=n.length+1;return e}function ro(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function Qd(t,e,n){return ro(t,[""],e,n)}class ps{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Se?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof Se?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Se){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof Se?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class I0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new ps(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class B0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Z.prototype[Symbol.iterator]=function(){return this.iter()},ps.prototype[Symbol.iterator]=I0.prototype[Symbol.iterator]=B0.prototype[Symbol.iterator]=function(){return this});class nk{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function ki(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function _e(t,e,n=!0,r=!0){return Zx(t,e,n,r)}function rk(t){return t>=56320&&t<57344}function ik(t){return t>=55296&&t<56320}function j0(t,e){let n=t.charCodeAt(e);if(!ik(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return rk(r)?(n-55296<<10)+(r-56320)+65536:n}function sk(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function F0(t){return t<65536?1:2}const vc=/\r\n?|\n/;var yt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(yt||(yt={}));class Sn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){wc(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Sn(e)}composeDesc(e){return this.empty?e:e.empty?this:_0(this,e)}mapDesc(e,n=!1){return e.empty?this:xc(this,e,n)}mapPos(e,n=-1,r=yt.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=yt.Simple&&u>=e&&(r==yt.TrackDel&&i<e&&u>e||r==yt.TrackBefore&&i<e||r==yt.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Sn(e)}static create(e){return new Sn(e)}}class Oe extends Sn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return wc(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return xc(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(Z.empty);r.push(l?e.slice(s,s+l):Z.empty)}s+=l}return new Oe(n,r)}compose(e){return this.empty?e:e.empty?this:_0(this,e,!0)}map(e,n=!1){return e.empty?this:xc(this,e,n,!0)}iterChanges(e,n=!1){wc(this,e,n)}get desc(){return Sn.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Fs(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-o);Ge(i,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Ge(n,c,h),h>0&&Vn(r,n,s.text),s.forward(c),o+=c}let u=e[l++];for(;o<u;){if(s.done)break e;let c=Math.min(s.len,u-o);Ge(n,c,-1),Ge(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),o+=c}}return{changes:new Oe(n,r),filtered:Sn.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(c=!1){if(!c&&!i.length)return;l<n&&Ge(i,n-l,-1);let h=new Oe(i,s);o=o?o.compose(h.map(o)):h,i=[],s=[],l=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Oe){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),o=o?o.compose(c.map(o)):c}else{let{from:h,to:f=h,insert:d}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let g=d?typeof d=="string"?Z.of(d.split(r||vc)):d:Z.empty,w=g.length;if(h==f&&w==0)return;h<l&&a(),h>l&&Ge(i,h-l,-1),Ge(i,f-h,w),Vn(s,i,g),l=f}}return u(e),a(!o),o}static empty(e){return new Oe(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(Z.empty);r[i]=Z.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Oe(n,r)}static createSet(e,n){return new Oe(e,n)}}function Ge(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Vn(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Z.empty);t.push(n)}}function wc(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,c=s,h=Z.empty;for(;u+=o,c+=a,a&&r&&(h=h.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,c,h),i=u,s=c}}}function xc(t,e,n,r=!1){let i=[],s=r?[]:null,l=new Fs(t),o=new Fs(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);Ge(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(Ge(i,o.ins,-1);u;){let c=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=c&&(Ge(i,0,l.ins),s&&Vn(s,i,l.text),a=l.i),l.forward(c),u-=c}o.next()}else if(l.ins>=0){let u=0,c=l.len;for(;c;)if(o.ins==-1){let h=Math.min(c,o.len);u+=h,c-=h,o.forward(h)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;Ge(i,u,a<l.i?l.ins:0),s&&a<l.i&&Vn(s,i,l.text),a=l.i,l.forward(l.len-c)}else{if(l.done&&o.done)return s?Oe.createSet(i,s):Sn.create(i);throw new Error("Mismatched change set lengths")}}}function _0(t,e,n=!1){let r=[],i=n?[]:null,s=new Fs(t),l=new Fs(e);for(let o=!1;;){if(s.done&&l.done)return i?Oe.createSet(r,i):Sn.create(r);if(s.ins==0)Ge(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)Ge(r,0,l.ins,o),i&&Vn(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let c=l.ins==-1?-1:l.off?0:l.ins;Ge(r,a,c,o),i&&c&&Vn(i,r,l.text)}else l.ins==-1?(Ge(r,s.off?0:s.len,a,o),i&&Vn(i,r,s.textBit(a))):(Ge(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Vn(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class Fs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Z.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Z.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class kr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new kr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return E.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return E.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return E.range(e.anchor,e.head)}static create(e,n,r){return new kr(e,n,r)}}class E{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:E.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new E([this.main],0)}addRange(e,n=!0){return E.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,E.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new E(e.ranges.map(n=>kr.fromJSON(n)),e.main)}static single(e,n=e){return new E([E.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return E.normalized(e.slice(),n);r=s.to}return new E(e,n)}static cursor(e,n=0,r,i){return kr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?kr.create(n,e,48|s):kr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?E.range(a,o):E.range(o,a))}}return new E(e,n)}}function z0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let nf=0;class F{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=nf++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new F(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:rf),!!e.static,e.enables)}of(e){return new io([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new io(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new io(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function rf(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class io{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=nf++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[l]=r(h),1},update(h,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||kc(h,c)){let d=r(h);if(o?!Jd(d,h.values[l],i):!i(d,h.values[l]))return h.values[l]=d,1}return 0},reconfigure:(h,f)=>{let d,g=f.config.address[s];if(g!=null){let w=Bo(f,g);if(this.dependencies.every(x=>x instanceof F?f.facet(x)===h.facet(x):x instanceof Jt?f.field(x,!1)==h.field(x,!1):!0)||(o?Jd(d=r(h),w,i):i(d=r(h),w)))return h.values[l]=w,0}else d=r(h);return h.values[l]=d,1}}}}function Jd(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function kc(t,e){let n=!1;for(let r of e)ms(t,r)&1&&(n=!0);return n}function lk(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let c=0;c<r.length;c++){let h=Bo(a,r[c]);if(i[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(a){for(let u of r)ms(a,u);return a.values[l]=o(a),1},update(a,u){if(!kc(a,s))return 0;let c=o(a);return e.compare(c,a.values[l])?0:(a.values[l]=c,1)},reconfigure(a,u){let c=kc(a,r),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&rf(n,h))return a.values[l]=f,0;let d=o(a);return e.compare(d,f)?(a.values[l]=f,0):(a.values[l]=d,1)}}}const Al=F.define({static:!0});class Jt{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Jt(nf++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Al).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(Al),l=i.facet(Al),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Al.of({field:this,create:e})]}get extension(){return this}}const yr={lowest:4,low:3,default:2,high:1,highest:0};function Gi(t){return e=>new H0(e,t)}const ma={highest:Gi(yr.highest),high:Gi(yr.high),default:Gi(yr.default),low:Gi(yr.low),lowest:Gi(yr.lowest)};class H0{constructor(e,n){this.inner=e,this.prec=n}}class ga{of(e){return new Sc(this,e)}reconfigure(e){return ga.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Sc{constructor(e,n){this.compartment=e,this.inner=n}}class Io{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of ok(e,n,l))f instanceof Jt?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(d=>f.slot(d));let c=r==null?void 0:r.config.facets;for(let f in s){let d=s[f],g=d[0].facet,w=c&&c[f]||[];if(d.every(x=>x.type==0))if(o[g.id]=a.length<<1|1,rf(w,d))a.push(r.facet(g));else{let x=g.combine(d.map(p=>p.value));a.push(r&&g.compare(x,r.facet(g))?r.facet(g):x)}else{for(let x of d)x.type==0?(o[x.id]=a.length<<1|1,a.push(x.value)):(o[x.id]=u.length<<1,u.push(p=>x.dynamicSlot(p)));o[g.id]=u.length<<1,u.push(x=>lk(x,g,d))}}let h=u.map(f=>f(o));return new Io(e,l,h,o,a,s)}}function ok(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof Sc&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof Sc){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof H0)s(l.inner,l.prec);else if(l instanceof Jt)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof io)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,yr.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,yr.default),r.reduce((l,o)=>l.concat(o))}function ms(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Bo(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const W0=F.define(),Cc=F.define({combine:t=>t.some(e=>e),static:!0}),V0=F.define({combine:t=>t.length?t[0]:void 0,static:!0}),U0=F.define(),$0=F.define(),K0=F.define(),G0=F.define({combine:t=>t.length?t[0]:!1});class Oi{constructor(e,n){this.type=e,this.value=n}static define(){return new ak}}class ak{of(e){return new Oi(this,e)}}class uk{constructor(e){this.map=e}of(e){return new ce(this,e)}}class ce{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ce(this.type,n)}is(e){return this.type==e}static define(e={}){return new uk(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}ce.reconfigure=ce.define();ce.appendConfig=ce.define();class Qe{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&z0(r,n.newLength),s.some(o=>o.type==Qe.time)||(this.annotations=s.concat(Qe.time.of(Date.now())))}static create(e,n,r,i,s,l){return new Qe(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Qe.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Qe.time=Oi.define();Qe.userEvent=Oi.define();Qe.addToHistory=Oi.define();Qe.remote=Oi.define();function ck(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function q0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Oe.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:ce.mapEffects(t.effects,i).concat(ce.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function bc(t,e,n){let r=e.selection,i=ci(e.annotations);return e.userEvent&&(i=i.concat(Qe.userEvent.of(e.userEvent))),{changes:e.changes instanceof Oe?e.changes:Oe.of(e.changes||[],n,t.facet(V0)),selection:r&&(r instanceof E?r:E.single(r.anchor,r.head)),effects:ci(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Y0(t,e,n){let r=bc(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=q0(r,bc(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=Qe.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return fk(n?hk(i):i)}function hk(t){let e=t.startState,n=!0;for(let i of e.facet(U0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:ck(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Oe.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=Qe.create(e,i,t.selection&&t.selection.map(s),ce.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet($0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Qe?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Qe?t=s[0]:t=Y0(e,ci(s),!1)}return t}function fk(t){let e=t.startState,n=e.facet(K0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=q0(r,bc(e,s,t.changes.newLength),!0))}return r==t?t:Qe.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const dk=[];function ci(t){return t==null?dk:Array.isArray(t)?t:[t]}var ze=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ze||(ze={}));const pk=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ac;try{Ac=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function mk(t){if(Ac)return Ac.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||pk.test(n)))return!0}return!1}function gk(t){return e=>{if(!/\S/.test(e))return ze.Space;if(mk(e))return ze.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ze.Word;return ze.Other}}class te{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)ms(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return ms(this,r),Bo(this,r)}update(...e){return Y0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(ga.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(ce.reconfigure)?(n=null,r=o.value):o.is(ce.appendConfig)&&(n=null,r=ci(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=Io.resolve(r,i,this),s=new te(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(Cc)?e.newSelection:e.newSelection.asSingle();new te(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:E.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=ci(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),c=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(c);let h=i.mapDesc(u,!0);s.push(a.range.map(h)),i=i.compose(c),l=ce.mapEffects(l,c).concat(ce.mapEffects(ci(a.effects),h))}return{changes:i,selection:E.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Oe?e:Oe.of(e,this.doc.length,this.facet(te.lineSeparator))}toText(e){return Z.of(e.split(this.facet(te.lineSeparator)||vc))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ms(this,n),Bo(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Jt&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return te.create({doc:e.doc,selection:E.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Io.resolve(e.extensions||[],new Map),r=e.doc instanceof Z?e.doc:Z.of((e.doc||"").split(n.staticFacet(te.lineSeparator)||vc)),i=e.selection?e.selection instanceof E?e.selection:E.single(e.selection.anchor,e.selection.head):E.single(0);return z0(i,r.length),n.staticFacet(Cc)||(i=i.asSingle()),new te(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(te.tabSize)}get lineBreak(){return this.facet(te.lineSeparator)||`
`}get readOnly(){return this.facet(G0)}phrase(e,...n){for(let r of this.facet(te.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(W0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return gk(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=_e(n,l,!1);if(s(n.slice(a,l))!=ze.Word)break;l=a}for(;o<i;){let a=_e(n,o);if(s(n.slice(o,a))!=ze.Word)break;o=a}return l==o?null:E.range(l+r,o+r)}}te.allowMultipleSelections=Cc;te.tabSize=F.define({combine:t=>t.length?t[0]:4});te.lineSeparator=V0;te.readOnly=G0;te.phrases=F.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});te.languageData=W0;te.changeFilter=U0;te.transactionFilter=$0;te.transactionExtender=K0;ga.reconfigure=ce.define();function ya(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Si{eq(e){return this==e}range(e,n=e){return Ec.create(e,n,this)}}Si.prototype.startSide=Si.prototype.endSide=0;Si.prototype.point=!1;Si.prototype.mapMode=yt.TrackDel;let Ec=class Q0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new Q0(e,n,r)}};function Tc(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class sf{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,h=this.to[a]+e,f,d;if(c==h){let g=n.mapPos(c,u.startSide,u.mapMode);if(g==null||(f=d=g,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<f)))continue}else if(f=n.mapPos(c,u.startSide),d=n.mapPos(h,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,d-f)),r.push(u),i.push(f-l),s.push(d-l))}return{mapped:r.length?new sf(i,s,r,o):null,pos:l}}}class re{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new re(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(Tc)),this.isEmpty)return n.length?re.of(n):this;let o=new J0(this,null,-1).goto(0),a=0,u=[],c=new Or;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let h=n[a++];c.addInner(h.from,h.to,h.value)||u.push(h)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||u.push(Ec.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?re.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:c,pos:h}=a.map(o,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new re(r,n,s||re.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return _s.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return _s.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),o=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=Xd(l,o,r),u=new qi(l,a,s),c=new qi(o,a,s);r.iterGaps((h,f,d)=>Zd(u,h,c,f,d,i)),r.empty&&r.length==0&&Zd(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),l=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=Xd(s,l),a=new qi(s,o,0).goto(r),u=new qi(l,o,0).goto(r);for(;;){if(a.to!=u.to||!Mc(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new qi(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let c=l.activeForPoint(l.to),h=l.pointFrom<n?c.length+1:l.point.startSide<0?c.length:Math.min(c.length,a);i.point(o,u,l.point,c,h,l.pointRank),a=Math.min(l.openEnd(u),c.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new Or;for(let i of e instanceof Ec?[e]:n?yk(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return re.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=re.empty;i=i.nextLayer)n=new re(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}re.empty=new re([],[],null,-1);function yk(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Tc(e,r)>0)return t.slice().sort(Tc);e=r}return t}re.empty.nextLayer=re.empty;class Or{finishChunk(e){this.chunks.push(new sf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Or)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(re.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=re.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Xd(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class J0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class _s{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new J0(l,n,r,s));return i.length==1?i[0]:new _s(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)nu(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)nu(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),nu(this.heap,0)}}}function nu(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class qi{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=_s.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){El(this.active,e),El(this.activeTo,e),El(this.activeRank,e),this.minActive=ep(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Tl(this.active,n,r),Tl(this.activeTo,n,i),Tl(this.activeRank,n,s),e&&Tl(e,n,this.cursor.from),this.minActive=ep(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&El(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Zd(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,h=c<0?t.to+a:n.to,f=Math.min(h,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Mc(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!Mc(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),h>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),o=h,c<=0&&t.next(),c>=0&&n.next()}}function Mc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function El(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Tl(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function ep(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function va(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=_e(t,i));return r}function vk(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=_e(t,i)}return t.length}const Nc="ͼ",tp=typeof Symbol>"u"?"__"+Nc:Symbol.for(Nc),Dc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class rr{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let c=[],h=/^@(\w+)\b/.exec(l[0]),f=h&&h[1]=="keyframes";if(h&&o==null)return a.push(l[0]+";");for(let d in o){let g=o[d];if(/&/.test(d))s(d.split(/,\s*/).map(w=>l.map(x=>w.replace(/&/,x))).reduce((w,x)=>w.concat(x)),g,a);else if(g&&typeof g=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),g,c,f)}else g!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+g+";")}(c.length||f)&&a.push((r&&!h&&!u?l.map(r):l).join(", ")+" {"+c.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=np[tp]||1;return np[tp]=e+1,Nc+e.toString(36)}static mount(e,n,r){let i=e[Dc],s=r&&r.nonce;i?s&&i.setNonce(s):i=new wk(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let rp=new Map;class wk{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=rp.get(r);if(s)return e[Dc]=s;this.sheet=new i.CSSStyleSheet,rp.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Dc]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ir={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},zs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},xk=typeof navigator<"u"&&/Mac/.test(navigator.platform),kk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var je=0;je<10;je++)ir[48+je]=ir[96+je]=String(je);for(var je=1;je<=24;je++)ir[je+111]="F"+je;for(var je=65;je<=90;je++)ir[je]=String.fromCharCode(je+32),zs[je]=String.fromCharCode(je);for(var ru in ir)zs.hasOwnProperty(ru)||(zs[ru]=ir[ru]);function Sk(t){var e=xk&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||kk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?zs:ir)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Ie(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)X0(t,arguments[e]);return t}function X0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)X0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Hs(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Oc(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function so(t,e){if(!e.anchorNode)return!1;try{return Oc(t,e.anchorNode)}catch{return!1}}function Ws(t){return t.nodeType==3?Lr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function gs(t,e,n,r){return n?ip(t,e,n,r,-1)||ip(t,e,n,r,1):!1}function Pr(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function jo(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function ip(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:pn(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Pr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?pn(t):0}else return!1}}function pn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function wa(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Ck(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Z0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function bk(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,d=c==a.body,g=1,w=1;if(d)f=Ck(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:g,scaleY:w}=Z0(c,y)),f={left:y.left,right:y.left+c.clientWidth*g,top:y.top,bottom:y.top+c.clientHeight*w}}let x=0,p=0;if(i=="nearest")e.top<f.top?(p=e.top-(f.top+l),n>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,n<0&&e.top-p<f.top&&(p=e.top-(f.top+l)));else{let y=e.bottom-e.top,v=f.bottom-f.top;p=(i=="center"&&y<=v?e.top+y/2-v/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-v+l)-f.top}if(r=="nearest"?e.left<f.left?(x=e.left-(f.left+s),n>0&&e.right>f.right+x&&(x=e.right-f.right+s)):e.right>f.right&&(x=e.right-f.right+s,n<0&&e.left<f.left+x&&(x=e.left-(f.left+s))):x=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,x||p)if(d)u.scrollBy(x,p);else{let y=0,v=0;if(p){let S=c.scrollTop;c.scrollTop+=p/w,v=(c.scrollTop-S)*w}if(x){let S=c.scrollLeft;c.scrollLeft+=x/g,y=(c.scrollLeft-S)*g}e={left:e.left-y,top:e.top-v,right:e.right-y,bottom:e.bottom-v},y&&Math.abs(y-x)<1&&(r="nearest"),v&&Math.abs(v-p)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function Ak(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class Ek{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?pn(n):0),r,Math.min(e.focusOffset,r?pn(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let zr=null;function ey(t){if(t.setActive)return t.setActive();if(zr)return t.focus(zr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(zr==null?{get preventScroll(){return zr={preventScroll:!0},!0}}:void 0),!zr){zr=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let sp;function Lr(t,e,n=e){let r=sp||(sp=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function hi(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function Tk(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function ty(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Mk(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,pn(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=pn(n))}else{if(n==t)return!0;r=Pr(n),n=n.parentNode}}function ny(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function ry(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=pn(n)}else if(n.parentNode&&!jo(n))r=Pr(n),n=n.parentNode;else return null}}function iy(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!jo(n))r=Pr(n)+1,n=n.parentNode;else return null}}class Ye{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Ye(e.parentNode,Pr(e),n)}static after(e,n){return new Ye(e.parentNode,Pr(e)+1,n)}}const lf=[];class ae{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=ae.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=lp(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=lp(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=pn(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ae.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,c=r;a<this.children.length;a++){let h=this.children[a],f=u+h.length;if(u<e&&f>n)return h.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&h.dom.parentNode==this.dom){l=a,o=c;break}c=f,u=f+h.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=lf){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new sy(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ae.prototype.breakAfter=0;function lp(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class sy{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function ly(t,e,n,r,i,s,l,o,a){let{children:u}=t,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:l;if(!(e==r&&c&&!l&&!f&&s.length<2&&c.merge(n,i,s.length?h:null,n==0,o,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&(h!=null&&h.breakAfter))?(e==r&&(d=d.split(i),i=0),!f&&h&&d.merge(0,i,h,!0,0,a)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(h?h.breakAfter=1:l=1),r++}for(c&&(c.breakAfter=l,n>0&&(!l&&s.length&&c.merge(n,c.length,s[0],!1,o,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function oy(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:c}=l.findPos(e,-1),h=e-n;for(let f of r)h+=f.length;t.length+=h,ly(t,u,c,o,a,r,0,i,s)}let ot=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Pc=typeof document<"u"?document:{documentElement:{style:{}}};const Lc=/Edge\/(\d+)/.exec(ot.userAgent),ay=/MSIE \d/.test(ot.userAgent),Rc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ot.userAgent),xa=!!(ay||Rc||Lc),op=!xa&&/gecko\/(\d+)/i.test(ot.userAgent),iu=!xa&&/Chrome\/(\d+)/.exec(ot.userAgent),Nk="webkitFontSmoothing"in Pc.documentElement.style,uy=!xa&&/Apple Computer/.test(ot.vendor),ap=uy&&(/Mobile\/\w+/.test(ot.userAgent)||ot.maxTouchPoints>2);var R={mac:ap||/Mac/.test(ot.platform),windows:/Win/.test(ot.platform),linux:/Linux|X11/.test(ot.platform),ie:xa,ie_version:ay?Pc.documentMode||6:Rc?+Rc[1]:Lc?+Lc[1]:0,gecko:op,gecko_version:op?+(/Firefox\/(\d+)/.exec(ot.userAgent)||[0,0])[1]:0,chrome:!!iu,chrome_version:iu?+iu[1]:0,ios:ap,android:/Android\b/.test(ot.userAgent),safari:uy,webkit_version:Nk?+(/\bAppleWebKit\/(\d+)/.exec(ot.userAgent)||[0,0])[1]:0,tabSize:Pc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Dk=256;class Yt extends ae{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Yt)||this.length-(n-e)+r.length>Dk||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Yt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Ye(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Ok(this.dom,e,n)}}class Mn extends ae{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(ty(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof Mn&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(oy(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Mn(this.mark,n,l)}domAtPos(e){return cy(this,e)}coordsAt(e,n){return fy(this,e,n)}}function Ok(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?R.chrome||R.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=Lr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return R.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?wa(a,l<0):a||null}class Sr extends ae{static create(e,n,r){return new Sr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=Sr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof Sr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Sr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Z.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Z.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ye.before(this.dom):Ye.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return wa(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ci extends ae{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ci&&e.side==this.side}split(){return new Ci(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ye.before(this.dom):Ye.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Z.empty}get isHidden(){return!0}}Yt.prototype.children=Sr.prototype.children=Ci.prototype.children=lf;function cy(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new Ye(n,0)}function hy(t,e,n){let r,{children:i}=t;n>0&&e instanceof Mn&&i.length&&(r=i[i.length-1])instanceof Mn&&r.mark.eq(e.mark)?hy(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function fy(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let d=u.children[h],g=f+d.length;g>=c&&(d.children.length?o(d,c-f):(!s||s.isHidden&&(n>0||Lk(s,d)))&&(g>c||f==g&&d.getSide()>0)?(s=d,l=c-f):(f<c||f==g&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-f)),f=g}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):Pk(t)}function Pk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Ws(e);return n[n.length-1]||null}function Lk(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function Ic(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const up=Object.create(null);function Fo(t,e,n){if(t==e)return!0;t||(t=up),e||(e=up);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Bc(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function Rk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class el{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ot=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Ot||(Ot={}));class G extends Si{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new tl(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new sr(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=dy(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new sr(e,r,i,n,e.widget||null,!0)}static line(e){return new nl(e)}static set(e,n=!1){return re.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}G.none=re.empty;class tl extends G{constructor(e){let{start:n,end:r}=dy(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof tl&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Fo(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}tl.prototype.point=!1;class nl extends G{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof nl&&this.spec.class==e.spec.class&&Fo(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}nl.prototype.mapMode=yt.TrackBefore;nl.prototype.point=!0;class sr extends G{constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?yt.TrackBefore:yt.TrackAfter:yt.TrackDel}get type(){return this.startSide!=this.endSide?Ot.WidgetRange:this.startSide<=0?Ot.WidgetBefore:Ot.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof sr&&Ik(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}sr.prototype.point=!0;function dy(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function Ik(t,e){return t==e||!!(t&&e&&t.compare(e))}function lo(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class be extends ae{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof be))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),oy(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new be;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Fo(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){hy(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Ic(n,this.attrs||{})),r&&(this.attrs=Ic({class:r},this.attrs||{}))}domAtPos(e){return cy(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(ty(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Bc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&ae.get(i)instanceof Mn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ae.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!R.ios||!this.children.some(s=>s instanceof Yt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Yt)||/[^ -~]/.test(r.text))return null;let i=Ws(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=fy(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof be&&this.children.length==0&&e.children.length==0&&Fo(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof be)return s;if(l>n)break}i=l+s.breakAfter}return null}}class Cn extends ae{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof Cn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Ye.before(this.dom):Ye.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Cn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return lf}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Z.empty}domBoundsAround(){return null}become(e){return e instanceof Cn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof jc?null:wa(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class jc extends el{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ys{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Cn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new be),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ml(new Ci(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Cn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Ml(new Yt(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof sr){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof sr)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Cn(r.widget||bi.block,o,r));else{let a=Sr.create(r.widget||bi.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(Ml(new Ci(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(Ml(a,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new ys(e,n,r,s);return l.openEnd=re.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function Ml(t,e){for(let n of e)t=new Mn(n,[t],t.length);return t}class bi extends el{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}bi.inline=new bi("span");bi.block=new bi("div");var Me=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Me||(Me={}));const Rr=Me.LTR,of=Me.RTL;function py(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Bk=py("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),jk=py("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Fc=Object.create(null),tn=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Fc[e]=n,Fc[n]=-e}function my(t){return t<=247?Bk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?jk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Fk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Un{get dir(){return this.level%2?of:Rr}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function gy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!gy(r.inner,i.inner))return!1}return!0}const oe=[];function _k(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,c=a,h=a;u<o;u++){let f=my(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),oe[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=l,c=a,h=a;u<o;u++){let f=oe[u];if(f==128)u<o-1&&c==oe[u+1]&&c&24?f=oe[u]=c:oe[u]=256;else if(f==64){let d=u+1;for(;d<o&&oe[d]==64;)d++;let g=u&&c==8||d<n&&oe[d]==8?h==1?1:8:256;for(let w=u;w<d;w++)oe[w]=g;u=d-1}else f==8&&h==1&&(oe[u]=1);c=f,f&7&&(h=f)}}}function zk(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,c=l<r.length?r[l].from:n;for(let h=u,f,d,g;h<c;h++)if(d=Fc[f=t.charCodeAt(h)])if(d<0){for(let w=o-3;w>=0;w-=3)if(tn[w+1]==-d){let x=tn[w+2],p=x&2?i:x&4?x&1?s:i:0;p&&(oe[h]=oe[tn[w]]=p),o=w;break}}else{if(tn.length==189)break;tn[o++]=h,tn[o++]=f,tn[o++]=a}else if((g=oe[h])==2||g==1){let w=g==i;a=w?0:1;for(let x=o-3;x>=0;x-=3){let p=tn[x+2];if(p&2)break;if(w)tn[x+2]|=2;else{if(p&4)break;tn[x+2]|=4}}}}}function Hk(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=oe[a];if(u==256){let c=a+1;for(;;)if(c==o){if(i==n.length)break;c=n[i++].to,o=i<n.length?n[i].from:e}else if(oe[c]==256)c++;else break;let h=s==1,f=(c<e?oe[c]:r)==1,d=h==f?h?1:2:r;for(let g=c,w=i,x=w?n[w-1].to:t;g>a;)g==x&&(g=n[--w].from,x=w?n[w-1].to:t),oe[--g]=d;a=c}else s=u,a++}}}function _c(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let c=!0,h=!1;if(u==s.length||a<s[u].from){let w=oe[a];w!=o&&(c=!1,h=w==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,g=a;e:for(;;)if(u<s.length&&g==s[u].from){if(h)break e;let w=s[u];if(!c)for(let x=w.to,p=u+1;;){if(x==n)break e;if(p<s.length&&s[p].from==x)x=s[p++].to;else{if(oe[x]==o)break e;break}}if(u++,f)f.push(w);else{w.from>a&&l.push(new Un(a,w.from,d));let x=w.direction==Rr!=!(d%2);zc(t,x?r+1:r,i,w.inner,w.from,w.to,l),a=w.to}g=w.to}else{if(g==n||(c?oe[g]!=o:oe[g]==o))break;g++}f?_c(t,a,g,r+1,i,f,l):a<g&&l.push(new Un(a,g,d)),a=g}else for(let a=n,u=s.length;a>e;){let c=!0,h=!1;if(!u||a>s[u-1].to){let w=oe[a-1];w!=o&&(c=!1,h=w==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,g=a;e:for(;;)if(u&&g==s[u-1].to){if(h)break e;let w=s[--u];if(!c)for(let x=w.from,p=u;;){if(x==e)break e;if(p&&s[p-1].to==x)x=s[--p].from;else{if(oe[x-1]==o)break e;break}}if(f)f.push(w);else{w.to<a&&l.push(new Un(w.to,a,d));let x=w.direction==Rr!=!(d%2);zc(t,x?r+1:r,i,w.inner,w.from,w.to,l),a=w.from}g=w.from}else{if(g==e||(c?oe[g-1]!=o:oe[g-1]==o))break;g--}f?_c(t,g,a,r+1,i,f,l):g<a&&l.push(new Un(g,a,d)),a=g}}function zc(t,e,n,r,i,s,l){let o=e%2?2:1;_k(t,i,s,r,o),zk(t,i,s,r,o),Hk(i,s,r,o),_c(t,i,s,e,n,r,l)}function Wk(t,e,n){if(!t)return[new Un(0,0,e==of?1:0)];if(e==Rr&&!n.length&&!Fk.test(t))return yy(t.length);if(n.length)for(;t.length>oe.length;)oe[oe.length]=256;let r=[],i=e==Rr?0:1;return zc(t,i,i,n,0,t.length,r),r}function yy(t){return[new Un(0,t,0)]}let vy="";function Vk(t,e,n,r,i){var s;let l=r.head-t.from,o=Un.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let c=_e(t.text,l,a.forward(i,n));(c<a.from||c>a.to)&&(c=u),vy=t.text.slice(Math.min(l,c),Math.max(l,c));let h=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<a.level?E.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):E.cursor(c+t.from,a.forward(i,n)?-1:1,a.level)}function Uk(t,e,n){for(let r=e;r<n;r++){let i=my(t.charCodeAt(r));if(i==1)return Rr;if(i==2||i==4)return of}return Rr}const wy=F.define(),xy=F.define(),ky=F.define(),Sy=F.define(),Hc=F.define(),Cy=F.define(),by=F.define(),af=F.define(),uf=F.define(),Ay=F.define({combine:t=>t.some(e=>e)}),$k=F.define({combine:t=>t.some(e=>e)}),Ey=F.define();class fi{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new fi(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new fi(E.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Nl=ce.define({map:(t,e)=>t.map(e)}),Ty=ce.define();function cn(t,e,n){let r=t.facet(Sy);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const vn=F.define({combine:t=>t.length?t[0]:!0});let Kk=0;const ti=F.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class kt{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(ti.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ti.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new kt(Kk++,e,r,i,o=>{let a=[];return l&&a.push(Vs.of(u=>{let c=u.plugin(o);return c?l(c):G.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return kt.define((r,i)=>new e(r,i),n)}}class su{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(cn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){cn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){cn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const My=F.define(),cf=F.define(),Vs=F.define(),Ny=F.define(),rl=F.define(),Dy=F.define();function cp(t,e){let n=t.state.facet(Dy);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return re.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,c=l-e.from,h=i;for(let f=o.length-1;f>=0;f--,a--){let d=o[f].spec.bidiIsolate,g;if(d==null&&(d=Uk(e.text,u,c)),a>0&&h.length&&(g=h[h.length-1]).to==u&&g.direction==d)g.to=c,h=g.inner;else{let w={from:u,to:c,direction:d,inner:[]};h.push(w),h=w.inner}}}}),i}const Oy=F.define();function Py(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(Oy)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const ns=F.define();class Pt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Pt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let h=n[s],f=n[s+1],d=Math.max(o,h),g=Math.min(c,f);if(d<=g&&new Pt(d+u,g+u,d,g).addToSet(r),f>c)break;s+=2}if(!a)return r;new Pt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class _o{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Oe.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new Pt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new _o(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class hp extends ae{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=G.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new be],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Pt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!Zk(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?qk(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Pt(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(R.ie||R.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=Jk(l,o,e.changes);return r=Pt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=R.chrome||R.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof Cn&&l.widget instanceof jc&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:c,toB:h}=o,f,d,g,w;if(r&&r.range.fromB<h&&r.range.toB>c){let S=ys.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=ys.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);d=S.breakAtStart,g=S.openStart,w=C.openEnd;let A=this.compositionView(r);C.breakAtStart?A.breakAfter=1:C.content.length&&A.merge(A.length,A.length,C.content[0],!1,C.openStart,0)&&(A.breakAfter=C.content[0].breakAfter,C.content.shift()),S.content.length&&A.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(A).concat(C.content)}else({content:f,breakAtStart:d,openStart:g,openEnd:w}=ys.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:x,off:p}=s.findPos(u,1),{i:y,off:v}=s.findPos(a,-1);ly(this,y,v,x,p,f,d,g,w)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(Ty)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Yt(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Mn(i,[n],n.length);let r=new be;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=ae.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(vn)||this.dom.tabIndex>-1)&&so(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(R.gecko&&o.empty&&!this.hasComposition&&Gk(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=u=new Ye(h,0),l=!0}let c=this.view.observer.selectionRange;(l||!c.focusNode||(!gs(a.node,a.offset,c.anchorNode,c.anchorOffset)||!gs(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,o))&&(this.view.observer.ignore(()=>{R.android&&R.chrome&&this.dom.contains(c.focusNode)&&Xk(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Hs(this.view.root);if(h)if(o.empty){if(R.gecko){let f=Yk(a.node,a.offset);if(f&&f!=3){let d=(f==1?ry:iy)(a.node,a.offset);d&&(a=new Ye(d.node,d.offset))}}h.collapse(a.node,a.offset),o.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=o.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Ye(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Ye(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&gs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Hs(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=be.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=ae.get(n.childNodes[i]);s instanceof be&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=ae.get(n.childNodes[i]);s instanceof be&&(r=s.domAtPos(s.length))}return r?new Ye(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=ae.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof be)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof be&&!(r instanceof be&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof Cn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof be))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Yt))return null;let s=_e(i.text,r);if(s==r)return null;let l=Lr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Me.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>i)break;if(u>=r){let d=h.dom.getBoundingClientRect();if(n.push(d.height),l){let g=h.dom.lastChild,w=g?Ws(g):[];if(w.length){let x=w[w.length-1],p=a?x.right-d.left:d.right-x.left;p>o&&(o=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Me.RTL:Me.LTR}measureTextSize(){for(let s of this.children)if(s instanceof be){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Ws(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new sy(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(G.replace({widget:new jc(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return G.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Vs).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(Ny).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(re.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(Ey))try{if(u(this.view,e.range,e))return!0}catch(c){cn(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=Py(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;bk(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Me.LTR)}}function Gk(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Ly(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=ry(n.focusNode,n.focusOffset),i=iy(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=ae.get(i.node);if(!o||o instanceof Yt&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=ae.get(r.node);!a||a instanceof Yt&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function qk(t,e,n){let r=Ly(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new Pt(a.mapPos(s),a.mapPos(l),s,l),c=[];for(let h=i.parentNode;;h=h.parentNode){let f=ae.get(h);if(f instanceof Mn)c.push({node:h,deco:f.mark});else{if(f instanceof be||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new tl({inclusive:!0,attributes:Rk(h),tagName:h.tagName.toLowerCase()})});else return null}}}function Yk(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Qk=class{constructor(){this.changes=[]}compareRange(e,n){lo(e,n,this.changes)}comparePoint(e,n){lo(e,n,this.changes)}boundChange(e){lo(e,e,this.changes)}};function Jk(t,e,n){let r=new Qk;return re.compare(t,e,n,r),r.changes}function Xk(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Zk(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function eS(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return E.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=_e(i.text,s,!1):o=_e(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=_e(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=_e(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return E.range(l+i.from,o+i.from)}function tS(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function nS(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function lu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function fp(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function dp(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Wc(t,e,n){let r,i,s,l,o=!1,a,u,c,h;for(let g=t.firstChild;g;g=g.nextSibling){let w=Ws(g);for(let x=0;x<w.length;x++){let p=w[x];i&&lu(i,p)&&(p=fp(dp(p,i.bottom),i.top));let y=tS(e,p),v=nS(n,p);if(y==0&&v==0)return g.nodeType==3?pp(g,e,n):Wc(g,e,n);(!r||l>v||l==v&&s>y)&&(r=g,i=p,s=y,l=v,o=y?e<p.left?x>0:x<w.length-1:!0),y==0?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=g,c=p):n<p.top&&(!h||h.top>p.top)&&(u=g,h=p):c&&lu(c,p)?c=dp(c,p.bottom):h&&lu(h,p)&&(h=fp(h,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):h&&h.top<=n&&(r=u,i=h),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return pp(r,f,n);if(o&&r.contentEditable!="false")return Wc(r,f,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function pp(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=Lr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;l||(l=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,d=f;if((R.chrome||R.gecko)&&Lr(t,o).getBoundingClientRect().left==c.right&&(d=!f),h<=0)return{node:t,offset:o+(d?1:0)};i=o+(d?1:0),s=h}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function Ry(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:h}=e,f=h-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(f),a.type!=Ot.Text;)for(;f=r>0?a.bottom+S:a.top-S,!(f>=0&&f<=u);){if(C)return n?null:0;C=!0,r=-r}h=o+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:mp(t,l,a,c,h);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:mp(t,l,a,c,h);let g=t.dom.ownerDocument,w=t.root.elementFromPoint?t.root:g,x=w.elementFromPoint(c,h);x&&!t.contentDOM.contains(x)&&(x=null),x||(c=Math.max(l.left+1,Math.min(l.right-1,c)),x=w.elementFromPoint(c,h),x&&!t.contentDOM.contains(x)&&(x=null));let p,y=-1;if(x&&((i=t.docView.nearest(x))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(c,h);S&&({offsetNode:p,offset:y}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(c,h);S&&({startContainer:p,startOffset:y}=S)}p&&(!t.contentDOM.contains(p)||R.safari&&rS(p,y,c)||R.chrome&&iS(p,y,c))&&(p=void 0),p&&(y=Math.min(pn(p),y))}if(!p||!t.docView.dom.contains(p)){let S=be.find(t.docView,d);if(!S)return f>a.top+a.height/2?a.to:a.from;({node:p,offset:y}=Wc(S.dom,c,h))}let v=t.docView.nearest(p);if(!v)return null;if(v.isWidget&&((s=v.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=v.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(p,y)+v.posAtStart}function mp(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+vk(l,s,t.state.tabSize)}function Iy(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return Lr(t,r-1,r).getBoundingClientRect().right>n}function rS(t,e,n){return Iy(t,e,n)}function iS(t,e,n){if(e!=0)return Iy(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Lr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function sS(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Ot.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function lS(t,e,n,r){let i=sS(t,e.head,e.assoc||-1),s=!r||i.type!=Ot.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==Me.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return E.cursor(a,n?-1:1)}return E.cursor(n?i.to:i.from,n?-1:1)}function gp(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Vk(i,s,l,o,n),c=vy;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(c))return o}else{if(!r)return u;a=r(c)}o=u}}function oS(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==ze.Space&&(i=l),i==l}}function aS(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return E.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),o=(s<0?d.top:d.bottom)+c}let h=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let g=o+(f+d)*s,w=Ry(t,{x:h,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?w<i:w>i)){let x=t.docView.coordsForChar(w),p=!x||g<x.top?-1:1;return E.cursor(w,p,void 0,l)}}}function vs(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function By(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=vs(t,i.from,0);l!=i.from&&(s=E.cursor(l,-1))}else{let l=vs(t,i.from,-1),o=vs(t,i.to,1);(l!=i.from||o!=i.to)&&(s=E.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?E.create(n,e.mainIndex):e}function ou(t,e,n){let r=vs(t.state.facet(rl).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:E.cursor(r,r<n.from?1:-1)}const rs="￿";class uS{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(te.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=rs}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=ae.get(i),a=ae.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:jo(i))||jo(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=ae.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(cS(e,r.node,r.offset)?n:0))}}function cS(t,e,n){for(;;){if(!e||n<pn(e))return!1;if(e==t)return!0;n=Pr(e)+1,e=e.parentNode}}class yp{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class hS{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:pS(e),a=new uS(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=mS(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!Oc(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!Oc(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),c=e.viewport;if((R.ios||R.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(a,u),f=Math.max(a,u),d=c.from-h,g=c.to-f;(d==0||d==1||h==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=E.single(u,a)}}}function jy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||R.android&&e.text.length<o-l)&&(a=i.to,u="end");let c=dS(t.state.doc.sliceString(l,o,rs),e.text,a-l,u);c&&(R.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==rs+rs&&c.toB--,n={from:l+c.from,to:l+c.toA,insert:Z.of(e.text.slice(c.from,c.toB).split(rs))})}else r&&(!t.hasFocus&&t.state.facet(vn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(R.mac||R.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Z.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:R.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=E.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Z.of([" "])}),n)return hf(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=By(t.state.facet(rl).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function hf(t,e,n,r=-1){if(R.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(R.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&hi(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&hi(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&hi(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=fS(t,e,n));return t.state.facet(Cy).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function fS(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,c=vs(i.facet(rl).map(h=>h(t)),u,a);e.from==c&&(l=c)}if(l>-1)r={changes:e,selection:E.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),h,f=n&&Ly(t,n.main.head);if(f){let w=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-w}}else h=t.state.doc.lineAt(s.head);let d=s.to-e.to,g=s.to-s.from;r=i.changeByRange(w=>{if(w.from==s.from&&w.to==s.to)return{changes:a,range:u||w.map(a)};let x=w.to-d,p=x-c.length;if(w.to-w.from!=g||t.state.sliceDoc(p,x)!=c||w.to>=h.from&&w.from<=h.to)return{range:w};let y=i.changes({from:p,to:x,insert:e.insert}),v=w.to-s.to;return{changes:y,range:u?E.range(Math.max(0,u.anchor+v),Math.max(0,u.head+v)):w.map(y)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function dS(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function pS(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new yp(n,r)),(i!=n||s!=r)&&e.push(new yp(i,s))),e}function mS(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?E.single(n+e,r+e):null}class gS{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,R.safari&&e.contentDOM.addEventListener("input",()=>null),R.gecko&&PS(e.contentDOM.ownerDocument)}handleEvent(e){!bS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=yS(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&_y.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),R.android&&R.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return R.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Fy.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||vS.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,hi(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:R.safari&&!R.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function vp(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){cn(n.state,i)}}}function yS(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(vp(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(vp(r.value,a))}}for(let r in Qt)n(r).handlers.push(Qt[r]);for(let r in Bt)n(r).observers.push(Bt[r]);return e}const Fy=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],vS="dthko",_y=[16,17,18,20,91,92,224,225],Dl=6;function Ol(t){return Math.max(0,t)*.7+8}function wS(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class xS{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Ak(e.contentDOM),this.atoms=e.state.facet(rl).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(te.allowMultipleSelections)&&kS(e,n),this.dragging=CS(e,n)&&Wy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&wS(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=Py(this.view);e.clientX-a.left<=i+Dl?n=-Ol(i-e.clientX):e.clientX+a.right>=l-Dl&&(n=Ol(e.clientX-l)),e.clientY-a.top<=s+Dl?r=-Ol(s-e.clientY):e.clientY+a.bottom>=o-Dl&&(r=Ol(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=By(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function kS(t,e){let n=t.state.facet(wy);return n.length?n[0](e):R.mac?e.metaKey:e.ctrlKey}function SS(t,e){let n=t.state.facet(xy);return n.length?n[0](e):R.mac?!e.altKey:!e.ctrlKey}function CS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Hs(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function bS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ae.get(n))&&r.ignoreEvent(e))return!1;return!0}const Qt=Object.create(null),Bt=Object.create(null),zy=R.ie&&R.ie_version<15||R.ios&&R.webkit_version<604;function AS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Hy(t,n.value)},50)}function ka(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function Hy(t,e){e=ka(t.state,af,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(Vc!=null&&n.selection.ranges.every(a=>a.empty)&&Vc==s.toString()){let a=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let h=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:E.cursor(u.from+h.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:E.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Bt.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Qt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Bt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Bt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Qt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(ky))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=MS(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new xS(t,e,n,r)),r&&t.observer.ignore(()=>{ey(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function wp(t,e,n,r){if(r==1)return E.cursor(e,n);if(r==2)return eS(t.state,e,n);{let i=be.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,E.range(l,o)}}let xp=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function ES(t,e,n,r){let i=be.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&xp(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&xp(n,r,o)?1:l&&l.bottom>=r?-1:1}function kp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:ES(t,n,e.clientX,e.clientY)}}const TS=R.ie&&R.ie_version<=11;let Sp=null,Cp=0,bp=0;function Wy(t){if(!TS)return t.detail;let e=Sp,n=bp;return Sp=t,bp=Date.now(),Cp=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Cp+1)%3:1}function MS(t,e){let n=kp(t,e),r=Wy(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=kp(t,s),u,c=wp(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let h=wp(t,n.pos,n.bias,r),f=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=f<c.from?E.range(f,d):E.range(d,f)}return l?i.replaceRange(i.main.extend(c.from,c.to)):o&&r==1&&i.ranges.length>1&&(u=NS(i,a.pos))?u:o?i.addRange(c):E.create([c])}}}function NS(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return E.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Qt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=E.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",ka(t.state,uf,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Qt.dragend=t=>(t.inputState.draggedContent=null,!1);function Ap(t,e,n,r){if(n=ka(t.state,af,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&SS(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Qt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&Ap(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return Ap(t,e,r,!0),!0}return!1};Qt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=zy?null:e.clipboardData;return n?(Hy(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(AS(t),!1)};function DS(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function OS(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:ka(t,uf,e.join(t.lineBreak)),ranges:n,linewise:r}}let Vc=null;Qt.copy=Qt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=OS(t.state);if(!n&&!i)return!1;Vc=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=zy?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(DS(t,n),!1)};const Vy=Oi.define();function Uy(t,e){let n=[];for(let r of t.facet(by)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:Vy.of(!0)}):null}function $y(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Uy(t.state,e);n?t.dispatch(n):t.update([])}},10)}Bt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),$y(t)};Bt.blur=t=>{t.observer.clearSelectionRange(),$y(t)};Bt.compositionstart=Bt.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Bt.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,R.chrome&&R.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Bt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Qt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return hf(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(R.chrome&&R.android&&(i=Fy.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return R.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),R.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Bt.compositionend(t,e),20),!1};const Ep=new Set;function PS(t){Ep.has(t)||(Ep.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Tp=["pre-wrap","normal","pre-line","break-spaces"];let Ai=!1;function Mp(){Ai=!1}class LS{constructor(e){this.lineWrapping=e,this.doc=Z.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Tp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=Tp.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let c=l[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class RS{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class un{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Ot.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof sr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new un(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var fe=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(fe||(fe={}));const oo=.001;class rt{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>oo&&(Ai=!0),this.height=e)}replace(e,n,r){return rt.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:c,toB:h}=i[o],f=s.lineAt(a,fe.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,fe.ByPosNoHeight,r,0,0);for(h+=d.to-u,u=d.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,fe.ByPosNoHeight,r,0,0));c+=f.from-a,a=f.from;let g=ff.build(r.setDoc(l),e,c,h);s=zo(s,s.replace(a,u,g))}return s.updateHeight(r,0)}static empty(){return new gt(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new IS(rt.of(e.slice(0,n)),l,rt.of(e.slice(r)))}}function zo(t,e){return t==e?t:(t.constructor!=e.constructor&&(Ai=!0),e)}rt.prototype.size=1;class Ky extends rt{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new un(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class gt extends Ky{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new un(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof gt||i instanceof Be&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Be?i=new gt(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):rt.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Be extends rt{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),h=o+c.length*a,f=Math.max(r,e-h/2);return new un(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:c,length:h}=n.doc.line(s+u);return new un(c,h,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==fe.ByHeight)return this.blockAt(e,r,i,s);if(n==fe.ByPosNoHeight){let{from:d,to:g}=r.doc.lineAt(e);return new un(d,g-d,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=o+u.length*a,h=u.number-l,f=i+o*h+a*(u.from-s-h);return new un(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let c=e,h=i;c<=n;){let f=r.doc.lineAt(c);if(c==e){let g=f.number-o;h+=a*g+u*(e-s-g)}let d=a+u*f.length;l(new un(f.from,f.length,h,d,0)),h+=d,c=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Be?r[r.length-1]=new Be(s.length+i):r.push(null,new Be(i-1))}if(e>0){let s=r[0];s instanceof Be?r[0]=new Be(e+s.length):r.unshift(new Be(e-1),null)}return rt.of(r)}decomposeLeft(e,n){n.push(new Be(e-1),null)}decomposeRight(e,n){n.push(null,new Be(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Be(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let c=e.doc.lineAt(o).length;l.length&&l.push(null);let h=i.heights[i.index++];a==-1?a=h:Math.abs(h-a)>=oo&&(a=-2);let f=new gt(c,h);f.outdated=!1,l.push(f),o+=c+1}o<=s&&l.push(null,new Be(s-o).updateHeight(e,o));let u=rt.of(l);return(a<0||Math.abs(u.height-this.height)>=oo||Math.abs(a-this.heightMetrics(e,n).perLine)>=oo)&&(Ai=!0),zo(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class IS extends rt{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==fe.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let c=n==fe.ByPosNoHeight?fe.ByPosNoHeight:fe.ByPos;return a?u.join(this.right.lineAt(o,c,r,l,o)):this.left.lineAt(o,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,fe.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&Np(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),Np(s,o)}return rt.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?rt.of(this.break?[e,null,n]:[e,n]):(this.left=zo(this.left,e),this.right=zo(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Np(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Be&&(r=t[e+1])instanceof Be&&t.splice(e-1,3,new Be(n.length+1+r.length))}const BS=5;class ff{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof gt?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new gt(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new Ky(l,i,r)):(l||s||i>=BS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new gt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Be(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof gt)return e;let n=new gt(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof gt)&&!this.isCovered?this.nodes.push(new gt(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof gt&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new ff(r,e);return re.spans(n,r,i,s,0),s.finish(r)}}function jS(t,e,n){let r=new FS;return re.compare(t,e,n,r,0),r.changes}class FS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&lo(e,n,this.changes,5)}}function _S(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function zS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function HS(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class au{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return G.replace({widget:new WS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class WS extends el{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Dp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Op,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Me.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(cf).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new LS(n),this.stateDeco=e.facet(Vs).filter(r=>typeof r!="function"),this.heightMap=rt.empty().applyChanges(this.stateDeco,Z.empty,this.heightOracle.setDoc(e.doc),[new Pt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=G.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new Pl(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Op:new df(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(is(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Vs).filter(c=>typeof c!="function");let i=e.changedRanges,s=Pt.extendWithRanges(i,jS(r,this.stateDeco,e?e.changes:Oe.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Mp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||Ai)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet($k)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Me.RTL:Me.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,c=0;if(o.width&&o.height){let{scaleX:S,scaleY:C}=Z0(n,o);(S>.005&&Math.abs(this.scaleX-S)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=S,this.scaleY=C,u|=16,l=a=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=ny(e.scrollDOM);let g=(this.printing?HS:_S)(n,this.paddingTop),w=g.top-this.pixelViewport.top,x=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!zS(e.dom))return 0;let y=o.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(l=!0),l||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:A,textHeight:b}=e.docView.measureTextSize();l=C>0&&i.refresh(s,C,A,b,Math.max(5,y/A),S),l&&(e.docView.minWidth=0,u|=16)}w>0&&x>0?c=Math.max(w,x):w<0&&x<0&&(c=Math.min(w,x)),Mp();for(let C of this.viewports){let A=C.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?rt.empty().applyChanges(this.stateDeco,Z.empty,this.heightOracle,[new Pt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new RS(C.from,A))}Ai&&(u|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new Pl(i.lineAt(l-r*1e3,fe.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,fe.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,fe.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=h.top:f=h.bottom-c,a=new Pl(i.lineAt(f-1e3/2,fe.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,fe.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Pl(this.heightMap.lineAt(r,fe.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,fe.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,fe.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,fe.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new au(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=Me.LTR&&!r)return[];let o=[],a=(c,h,f,d)=>{if(h-c<s)return;let g=this.state.selection.main,w=[g.from];g.empty||w.push(g.to);for(let p of w)if(p>c&&p<h){a(c,p-10,f,d),a(p+10,h,f,d);return}let x=US(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-c)<s&&Math.abs(p.to-h)<s&&!w.some(y=>p.from<y&&p.to>y));if(!x){if(h<f.to&&n&&r&&n.visibleRanges.some(v=>v.from<=h&&v.to>=h)){let v=n.moveToLineBoundary(E.cursor(h),!1,!0).head;v>c&&(h=v)}let p=this.gapSize(f,c,h,d),y=r||p<2e6?p:2e6;x=new au(c,h,p,y)}o.push(x)},u=c=>{if(c.length<l||c.type!=Ot.Text)return;let h=VS(c.from,c.to,this.stateDeco);if(h.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,g;if(r){let w=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,p;if(f!=null){let y=Rl(h,f),v=((this.visibleBottom-this.visibleTop)/2+w)/c.height;x=y-v,p=y+v}else x=(this.visibleTop-c.top-w)/c.height,p=(this.visibleBottom-c.top+w)/c.height;d=Ll(h,x),g=Ll(h,p)}else{let w=h.total*this.heightOracle.charWidth,x=i*this.heightOracle.charWidth,p=0;if(w>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=A.size-A.displaySize);let y=this.pixelViewport.left+p,v=this.pixelViewport.right+p,S,C;if(f!=null){let A=Rl(h,f),b=((v-y)/2+x)/w;S=A-b,C=A+b}else S=(y-x)/w,C=(v+x)/w;d=Ll(h,S),g=Ll(h,C)}d>c.from&&a(c.from,d,c,h),g<c.to&&a(g,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return o}gapSize(e,n,r,i){let s=Rl(i,r)-Rl(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){au.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=G.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];re.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||is(this.heightMap.lineAt(e,fe.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||is(this.heightMap.lineAt(this.scaler.fromDOM(e),fe.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return is(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Pl{constructor(e,n){this.from=e,this.to=n}}function VS(t,e,n){let r=[],i=t,s=0;return re.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Ll({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function Rl(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function US(t,e){for(let n of t)if(e(n))return n}const Op={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class df{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,fe.ByPos,e,0,0).top,c=n.lineAt(a,fe.ByPos,e,0,0).bottom;return i+=c-u,{from:o,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof df?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function is(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new un(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>is(i,e)):t._content)}const Il=F.define({combine:t=>t.join(" ")}),Uc=F.define({combine:t=>t.indexOf(!0)>-1}),$c=rr.newName(),Gy=rr.newName(),qy=rr.newName(),Yy={"&light":"."+Gy,"&dark":"."+qy};function Kc(t,e,n){return new rr(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const $S=Kc("."+$c,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Yy),KS={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},uu=R.ie&&R.ie_version<=11;class GS{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Ek,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(R.ie&&R.ie_version<=11||R.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&R.android&&e.constructor.EDIT_CONTEXT!==!1&&!(R.chrome&&R.chrome_version<126)&&(this.editContext=new YS(e),e.state.facet(vn)&&(e.contentDOM.editContext=this.editContext.editContext)),uu&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(vn)?r.root.activeElement!=this.dom:!so(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(R.ie&&R.ie_version<=11||R.android&&R.chrome)&&!r.state.selection.main.empty&&i.focusNode&&gs(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Hs(e.root);if(!n)return!1;let r=R.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&qS(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=so(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Mk(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,KS),uu&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),uu&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&hi(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&so(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new hS(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=jy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=Pp(n,e.previousSibling||e.target.previousSibling,-1),i=Pp(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(vn)!=e.state.facet(vn)&&(e.view.contentDOM.editContext=e.state.facet(vn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Pp(t,e,n){for(;e;){let r=ae.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Lp(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return gs(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function qS(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Lp(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?Lp(t,n):null}class YS{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:Z.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=E.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((R.mac||R.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:Z.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);hf(e,u,E.single(this.toEditorPos(r.selectionStart,c),this.toEditorPos(r.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(G.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:Ty.of(G.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Hs(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let c=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class j{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Tk(e.parent)||document,this.viewState=new Dp(e.state||te.create(e)),e.scrollTo&&e.scrollTo.is(Nl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ti).map(i=>new su(i));for(let i of this.plugins)i.update(this);this.observer=new GS(this),this.inputState=new gS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new hp(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Qe?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(Vy))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=Uy(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(te.phrases)!=this.state.facet(te.phrases))return this.setState(s);i=_o.create(this,s,e),i.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new fi(d.empty?d:E.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(Nl)&&(h=d.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=Ho.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(ns)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Il)!=i.state.facet(Il)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(Hc))try{f(i)}catch(d){cn(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!jy(this,c)&&u.force&&hi(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Dp(e),this.plugins=e.facet(ti).map(r=>new su(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new hp(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(ti),r=e.state.facet(ti);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new su(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){cn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(ny(r))s=-1,l=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,l=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(g){return cn(this.state,g),Rp}}),h=_o.create(this,this.state,[]),f=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=Rp)try{let g=u[d];g.write&&g.write(c[d],this)}catch(g){cn(this.state,g)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(g>1||g<-1){i=i+g,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(Hc))o(n)}get themeClasses(){return $c+" "+(this.state.facet(Uc)?qy:Gy)+" "+this.state.facet(Il)}updateAttrs(){let e=Ip(this,My,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(vn)?"true":"false",class:"cm-content",style:`${R.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Ip(this,cf,n);let r=this.observer.ignore(()=>{let i=Bc(this.contentDOM,this.contentAttrs,n),s=Bc(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(j.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(ns);let e=this.state.facet(j.cspNonce);rr.mount(this.root,this.styleModules.concat($S).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return ou(this,e,gp(this,e,n,r))}moveByGroup(e,n){return ou(this,e,gp(this,e,n,r=>oS(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return E.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return lS(this,e,n,r)}moveVertically(e,n,r){return ou(this,e,aS(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Ry(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[Un.find(s,e-i.from,-1,n)];return wa(r,l.dir==Me.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Ay)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>QS)return yy(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||gy(s.isolates,r=cp(this,e))))return s.order;r||(r=cp(this,e));let i=Wk(e.text,n,r);return this.bidiCache.push(new Ho(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||R.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{ey(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Nl.of(new fi(typeof e=="number"?E.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Nl.of(new fi(E.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return kt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return kt.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=rr.newName(),i=[Il.of(r),ns.of(Kc(`.${r}`,e))];return n&&n.dark&&i.push(Uc.of(!0)),i}static baseTheme(e){return ma.lowest(ns.of(Kc("."+$c,e,Yy)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ae.get(r)||ae.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}j.styleModule=ns;j.inputHandler=Cy;j.clipboardInputFilter=af;j.clipboardOutputFilter=uf;j.scrollHandler=Ey;j.focusChangeEffect=by;j.perLineTextDirection=Ay;j.exceptionSink=Sy;j.updateListener=Hc;j.editable=vn;j.mouseSelectionStyle=ky;j.dragMovesSelection=xy;j.clickAddsSelectionRange=wy;j.decorations=Vs;j.outerDecorations=Ny;j.atomicRanges=rl;j.bidiIsolatedRanges=Dy;j.scrollMargins=Oy;j.darkTheme=Uc;j.cspNonce=F.define({combine:t=>t.length?t[0]:""});j.contentAttributes=cf;j.editorAttributes=My;j.lineWrapping=j.contentAttributes.of({class:"cm-lineWrapping"});j.announce=ce.define();const QS=4096,Rp={};class Ho{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Me.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new Ho(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function Ip(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&Ic(l,n)}return n}const JS=R.mac?"mac":R.windows?"win":R.linux?"linux":"key";function XS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function Bl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const ZS=ma.default(j.domEventHandlers({keydown(t,e){return Xy(Jy(e.state),t,e,"editor")}})),Qy=F.define({enables:ZS}),Bp=new WeakMap;function Jy(t){let e=t.facet(Qy),n=Bp.get(e);return n||Bp.set(e,n=nC(e.reduce((r,i)=>r.concat(i),[]))),n}function eC(t,e,n){return Xy(Jy(t.state),e,t,n)}let zn=null;const tC=4e3;function nC(t,e=JS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,c)=>{var h,f;let d=n[l]||(n[l]=Object.create(null)),g=o.split(/ (?!$)/).map(p=>XS(p,e));for(let p=1;p<g.length;p++){let y=g.slice(0,p).join(" ");i(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[v=>{let S=zn={view:v,prefix:y,scope:l};return setTimeout(()=>{zn==S&&(zn=null)},tC),!0}]})}let w=g.join(" ");i(w,!1);let x=d[w]||(d[w]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});a&&x.run.push(a),u&&(x.preventDefault=!0),c&&(x.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=l;for(let f in c)c[f].run.push(d=>h(d,Gc))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Gc=null;function Xy(t,e,n,r){Gc=e;let i=Sk(e),s=j0(i,0),l=F0(s)==i.length&&i!=" ",o="",a=!1,u=!1,c=!1;zn&&zn.view==n&&zn.scope==r&&(o=zn.prefix+" ",_y.indexOf(e.keyCode)<0&&(u=!0,zn=null));let h=new Set,f=x=>{if(x){for(let p of x.run)if(!h.has(p)&&(h.add(p),p(n)))return x.stopPropagation&&(c=!0),!0;x.preventDefault&&(x.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],g,w;return d&&(f(d[o+Bl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(R.windows&&e.ctrlKey&&e.altKey)&&!(R.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=ir[e.keyCode])&&g!=i?(f(d[o+Bl(g,e,!0)])||e.shiftKey&&(w=zs[e.keyCode])!=i&&w!=g&&f(d[o+Bl(w,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(d[o+Bl(i,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),Gc=null,a}function rC(){return sC}const iC=G.line({class:"cm-activeLine"}),sC=kt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(iC.range(i.from)),e=i.from)}return G.set(n)}},{decorations:t=>t.decorations}),jp=F.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Wo(t,e){let n=t.plugin(Zy),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Zy=kt.fromClass(class{constructor(t){this.input=t.state.facet(Vo),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(jp);this.top=new jl(t,!0,e.topContainer),this.bottom=new jl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(jp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new jl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new jl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Vo);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),o.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:l).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>j.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class jl{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Fp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Fp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Fp(t){let e=t.nextSibling;return t.remove(),e}const Vo=F.define({enables:Zy});class lr extends Si{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}lr.prototype.elementClass="";lr.prototype.toDOM=void 0;lr.prototype.mapMode=yt.TrackBefore;lr.prototype.startSide=lr.prototype.endSide=-1;lr.prototype.point=!0;const cu=F.define(),lC=F.define(),oC={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>re.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ws=F.define();function aC(t){return[ev(),ws.of({...oC,...t})]}const _p=F.define({combine:t=>t.some(e=>e)});function ev(t){return[uC]}const uC=kt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ws).map(e=>new Hp(t,e)),this.fixed=!t.state.facet(_p);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(_p)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=re.iter(this.view.state.facet(cu),this.view.viewport.from),r=[],i=this.gutters.map(s=>new cC(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==Ot.Text&&l){qc(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==Ot.Text){qc(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ws),n=t.state.facet(ws),r=t.docChanged||t.heightChanged||t.viewportChanged||!re.eq(t.startState.facet(cu),t.state.facet(cu),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new Hp(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>j.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Me.LTR?{left:r,right:i}:{right:r,left:i}})});function zp(t){return Array.isArray(t)?t:[t]}function qc(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class cC{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=re.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new tv(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];qc(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(lC)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Hp{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=zp(n.markers(e)),n.initialSpacer&&(this.spacer=new tv(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=zp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!re.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class tv{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),hC(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let h=l;h<this.markers.length;h++)if(this.markers[h].compare(a)){o=h,u=!0;break}}else o=this.markers.length;for(;l<o;){let c=this.markers[l++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function hC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const fC=F.define(),dC=F.define(),ni=F.define({combine(t){return ya(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class hu extends lr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function fu(t,e){return t.state.facet(ni).formatNumber(e,t.state)}const pC=ws.compute([ni],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(fC)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new hu(fu(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(dC)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(ni)!=e.state.facet(ni),initialSpacer(e){return new hu(fu(e,Wp(e.state.doc.lines)))},updateSpacer(e,n){let r=fu(n.view,Wp(n.view.state.doc.lines));return r==e.number?e:new hu(r)},domEventHandlers:t.facet(ni).domEventHandlers,side:"before"}));function mC(t={}){return[ni.of(t),ev(),pC]}function Wp(t){let e=9;for(;e<t;)e=e*10+9;return e}const gC=1024;let yC=0;class du{constructor(e,n){this.from=e,this.to=n}}class J{constructor(e={}){this.id=yC++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ft.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}J.closedBy=new J({deserialize:t=>t.split(" ")});J.openedBy=new J({deserialize:t=>t.split(" ")});J.group=new J({deserialize:t=>t.split(" ")});J.isolate=new J({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});J.contextHash=new J({perNode:!0});J.lookAhead=new J({perNode:!0});J.mounted=new J({perNode:!0});class Uo{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[J.mounted.id]}}const vC=Object.create(null);class ft{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):vC,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ft(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(J.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(J.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}ft.none=new ft("",Object.create(null),0,8);class pf{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new ft(r.name,i,r.id,r.flags):r)}return new pf(n)}}const Fl=new WeakMap,Vp=new WeakMap;var Fe;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Fe||(Fe={}));class ye{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=Uo.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Qc(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Fl.get(this)||this.topNode,s=new Qc(i);return s.moveTo(e,n),Fl.set(this,s._tree),s}get topNode(){return new Lt(this,0,0,null)}resolve(e,n=0){let r=Us(Fl.get(this)||this.topNode,e,n,!1);return Fl.set(this,r),r}resolveInner(e,n=0){let r=Us(Vp.get(this)||this.topNode,e,n,!0);return Vp.set(this,r),r}resolveStack(e,n=0){return kC(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&Fe.IncludeAnonymous)>0;for(let a=this.cursor(l|Fe.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:yf(ft.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new ye(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new ye(ft.none,n,r,i)))}static build(e){return SC(e)}}ye.empty=new ye(ft.none,[],[],0);class mf{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new mf(this.buffer,this.index)}}class or{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return ft.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(nv(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new or(s,l,this.set)}}function nv(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Us(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Lt&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:Fe.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Lt&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class rv{cursor(e=0){return new Qc(this,e)}getChild(e,n=null,r=null){let i=Up(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Up(this,e,n,r)}resolve(e,n=0){return Us(this,e,n,!1)}resolveInner(e,n=0){return Us(this,e,n,!0)}matchContext(e){return Yc(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Lt extends rv{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let c=o[e],h=a[e]+l.from;if(nv(i,r,h,h+c.length)){if(c instanceof or){if(s&Fe.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,r-h,i);if(f>-1)return new $n(new wC(l,c,e,h),null,f)}else if(s&Fe.IncludeAnonymous||!c.type.isAnonymous||gf(c)){let f;if(!(s&Fe.IgnoreMounts)&&(f=Uo.get(c))&&!f.overlay)return new Lt(f.tree,h,e,l);let d=new Lt(c,h,e,l);return s&Fe.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&Fe.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Fe.IgnoreOverlays)&&(i=Uo.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Lt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Up(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Yc(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class wC{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class $n extends rv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new $n(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Fe.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new $n(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new $n(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new $n(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new ye(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iv(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Lt&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new xC(i,n)}class xC{constructor(e,n){this.heads=e,this.node=n}get next(){return iv(this.heads)}}function kC(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Lt?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=Uo.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Lt(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Us(o,e,n,!1))}}return i?iv(i):r}class Qc{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Lt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Lt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Fe.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Fe.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Fe.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&Fe.IncludeAnonymous||o instanceof or||!o.type.isAnonymous||gf(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new $n(this.buffer,n,this.stack[i]);return this.bufferNode=new $n(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Yc(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Yc(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function gf(t){return t.children.some(e=>e instanceof or||!e.type.isAnonymous||gf(e))}function SC(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=gC,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new mf(n,n.length):n,a=r.types,u=0,c=0;function h(C,A,b,D,z,B){let{id:U,start:H,end:Y,size:ie}=o,ke=c,Ze=u;for(;ie<0;)if(o.next(),ie==-1){let X=s[U];b.push(X),D.push(H-C);return}else if(ie==-3){u=U;return}else if(ie==-4){c=U;return}else throw new RangeError(`Unrecognized record size: ${ie}`);let Ft=a[U],P,W,V=H-C;if(Y-H<=i&&(W=x(o.pos-A,z))){let X=new Uint16Array(W.size-W.skip),Q=o.pos-W.size,pe=X.length;for(;o.pos>Q;)pe=p(W.start,X,pe);P=new or(X,Y-W.start,r),V=W.start-C}else{let X=o.pos-ie;o.next();let Q=[],pe=[],Le=U>=l?U:-1,Ne=0,_=Y;for(;o.pos>X;)Le>=0&&o.id==Le&&o.size>=0?(o.end<=_-i&&(g(Q,pe,H,Ne,o.end,_,Le,ke,Ze),Ne=Q.length,_=o.end),o.next()):B>2500?f(H,X,Q,pe):h(H,X,Q,pe,Le,B+1);if(Le>=0&&Ne>0&&Ne<Q.length&&g(Q,pe,H,Ne,H,_,Le,ke,Ze),Q.reverse(),pe.reverse(),Le>-1&&Ne>0){let At=d(Ft,Ze);P=yf(Ft,Q,pe,0,Q.length,0,Y-H,At,At)}else P=w(Ft,Q,pe,Y-H,ke-Y,Ze)}b.push(P),D.push(V)}function f(C,A,b,D){let z=[],B=0,U=-1;for(;o.pos>A;){let{id:H,start:Y,end:ie,size:ke}=o;if(ke>4)o.next();else{if(U>-1&&Y<U)break;U<0&&(U=ie-i),z.push(H,Y,ie),B++,o.next()}}if(B){let H=new Uint16Array(B*4),Y=z[z.length-2];for(let ie=z.length-3,ke=0;ie>=0;ie-=3)H[ke++]=z[ie],H[ke++]=z[ie+1]-Y,H[ke++]=z[ie+2]-Y,H[ke++]=ke;b.push(new or(H,z[2]-Y,r)),D.push(Y-C)}}function d(C,A){return(b,D,z)=>{let B=0,U=b.length-1,H,Y;if(U>=0&&(H=b[U])instanceof ye){if(!U&&H.type==C&&H.length==z)return H;(Y=H.prop(J.lookAhead))&&(B=D[U]+H.length+Y)}return w(C,b,D,z,B,A)}}function g(C,A,b,D,z,B,U,H,Y){let ie=[],ke=[];for(;C.length>D;)ie.push(C.pop()),ke.push(A.pop()+b-z);C.push(w(r.types[U],ie,ke,B-z,H-B,Y)),A.push(z-b)}function w(C,A,b,D,z,B,U){if(B){let H=[J.contextHash,B];U=U?[H].concat(U):[H]}if(z>25){let H=[J.lookAhead,z];U=U?[H].concat(U):[H]}return new ye(C,A,b,D,U)}function x(C,A){let b=o.fork(),D=0,z=0,B=0,U=b.end-i,H={size:0,start:0,skip:0};e:for(let Y=b.pos-C;b.pos>Y;){let ie=b.size;if(b.id==A&&ie>=0){H.size=D,H.start=z,H.skip=B,B+=4,D+=4,b.next();continue}let ke=b.pos-ie;if(ie<0||ke<Y||b.start<U)break;let Ze=b.id>=l?4:0,Ft=b.start;for(b.next();b.pos>ke;){if(b.size<0)if(b.size==-3)Ze+=4;else break e;else b.id>=l&&(Ze+=4);b.next()}z=Ft,D+=ie,B+=Ze}return(A<0||D==C)&&(H.size=D,H.start=z,H.skip=B),H.size>4?H:void 0}function p(C,A,b){let{id:D,start:z,end:B,size:U}=o;if(o.next(),U>=0&&D<l){let H=b;if(U>4){let Y=o.pos-(U-4);for(;o.pos>Y;)b=p(C,A,b)}A[--b]=H,A[--b]=B-C,A[--b]=z-C,A[--b]=D}else U==-3?u=D:U==-4&&(c=D);return b}let y=[],v=[];for(;o.pos>0;)h(t.start||0,t.bufferStart||0,y,v,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:y.length?v[0]+y[0].length:0;return new ye(a[t.topID],y.reverse(),v.reverse(),S)}const $p=new WeakMap;function ao(t,e){if(!t.isAnonymous||e instanceof or||e.type!=t)return 1;let n=$p.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof ye)){n=1;break}n+=ao(t,r)}$p.set(e,n)}return n}function yf(t,e,n,r,i,s,l,o,a){let u=0;for(let g=r;g<i;g++)u+=ao(t,e[g]);let c=Math.ceil(u*1.5/8),h=[],f=[];function d(g,w,x,p,y){for(let v=x;v<p;){let S=v,C=w[v],A=ao(t,g[v]);for(v++;v<p;v++){let b=ao(t,g[v]);if(A+b>=c)break;A+=b}if(v==S+1){if(A>c){let b=g[S];d(b.children,b.positions,0,b.children.length,w[S]+y);continue}h.push(g[S])}else{let b=w[v-1]+g[v-1].length-C;h.push(yf(t,g,w,S,v,C,b,null,a))}f.push(C+y-s)}}return d(e,n,r,i,0),(o||a)(h,f,l)}class Ar{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Ar(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let c=o<n.length?n[o]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;l&&l.from<h;){let f=l;if(a>=f.from||h<=f.to||u){let d=Math.max(f.from,a)-u,g=Math.min(f.to,h)-u;f=d>=g?null:new Ar(d,g,f.tree,f.offset+u,o>0,!!c)}if(f&&i.push(f),l.to>h)break;l=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}}class sv{startParse(e,n,r){return typeof e=="string"&&(e=new CC(e)),r=r?r.length?r.map(i=>new du(i.from,i.to)):[new du(0,0)]:[new du(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class CC{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new J({perNode:!0});let bC=0;class Mt{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=bC++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Mt&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new Mt(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new $o(e);return r=>r.modified.indexOf(n)>-1?r:$o.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let AC=0;class $o{constructor(e){this.name=e,this.instances=[],this.id=AC++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&EC(n,o.modified));if(r)return r;let i=[],s=new Mt(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=TC(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push($o.get(o,a));return s}}function EC(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function TC(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function MC(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let h=0;;){if(o=="..."&&h>0&&h+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let d=i[h++];if(h==i.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);o=i.slice(h)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new Ko(r,l,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return lv.add(e)}const lv=new J;class Ko{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ko.empty=new Ko([],2,null);function ov(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function NC(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function DC(t,e,n,r=0,i=t.length){let s=new OC(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class OC{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(l)));let u=i,c=PC(e)||Ko.empty,h=NC(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,o),u),c.opaque)return;let f=e.tree&&e.tree.prop(J.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+o,1),g=this.highlighters.filter(x=>!x.scope||x.scope(f.tree.type)),w=e.firstChild();for(let x=0,p=o;;x++){let y=x<f.overlay.length?f.overlay[x]:null,v=y?y.from+o:a,S=Math.max(n,p),C=Math.min(r,v);if(S<C&&w)for(;e.from<C&&(this.highlightRange(e,S,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=v||!e.nextSibling())););if(!y||v>r)break;p=y.to+o,p>n&&(this.highlightRange(d.cursor(),Math.max(n,y.from+o),Math.min(r,p),"",g),this.startSpan(Math.min(r,p),u))}w&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function PC(t){let e=t.type.prop(lv);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const O=Mt.define,_l=O(),In=O(),Kp=O(In),Gp=O(In),Bn=O(),zl=O(Bn),pu=O(Bn),sn=O(),pr=O(sn),nn=O(),rn=O(),Jc=O(),Yi=O(Jc),Hl=O(),M={comment:_l,lineComment:O(_l),blockComment:O(_l),docComment:O(_l),name:In,variableName:O(In),typeName:Kp,tagName:O(Kp),propertyName:Gp,attributeName:O(Gp),className:O(In),labelName:O(In),namespace:O(In),macroName:O(In),literal:Bn,string:zl,docString:O(zl),character:O(zl),attributeValue:O(zl),number:pu,integer:O(pu),float:O(pu),bool:O(Bn),regexp:O(Bn),escape:O(Bn),color:O(Bn),url:O(Bn),keyword:nn,self:O(nn),null:O(nn),atom:O(nn),unit:O(nn),modifier:O(nn),operatorKeyword:O(nn),controlKeyword:O(nn),definitionKeyword:O(nn),moduleKeyword:O(nn),operator:rn,derefOperator:O(rn),arithmeticOperator:O(rn),logicOperator:O(rn),bitwiseOperator:O(rn),compareOperator:O(rn),updateOperator:O(rn),definitionOperator:O(rn),typeOperator:O(rn),controlOperator:O(rn),punctuation:Jc,separator:O(Jc),bracket:Yi,angleBracket:O(Yi),squareBracket:O(Yi),paren:O(Yi),brace:O(Yi),content:sn,heading:pr,heading1:O(pr),heading2:O(pr),heading3:O(pr),heading4:O(pr),heading5:O(pr),heading6:O(pr),contentSeparator:O(sn),list:O(sn),quote:O(sn),emphasis:O(sn),strong:O(sn),link:O(sn),monospace:O(sn),strikethrough:O(sn),inserted:O(),deleted:O(),changed:O(),invalid:O(),meta:Hl,documentMeta:O(Hl),annotation:O(Hl),processingInstruction:O(Hl),definition:Mt.defineModifier("definition"),constant:Mt.defineModifier("constant"),function:Mt.defineModifier("function"),standard:Mt.defineModifier("standard"),local:Mt.defineModifier("local"),special:Mt.defineModifier("special")};for(let t in M){let e=M[t];e instanceof Mt&&(e.name=t)}ov([{tag:M.link,class:"tok-link"},{tag:M.heading,class:"tok-heading"},{tag:M.emphasis,class:"tok-emphasis"},{tag:M.strong,class:"tok-strong"},{tag:M.keyword,class:"tok-keyword"},{tag:M.atom,class:"tok-atom"},{tag:M.bool,class:"tok-bool"},{tag:M.url,class:"tok-url"},{tag:M.labelName,class:"tok-labelName"},{tag:M.inserted,class:"tok-inserted"},{tag:M.deleted,class:"tok-deleted"},{tag:M.literal,class:"tok-literal"},{tag:M.string,class:"tok-string"},{tag:M.number,class:"tok-number"},{tag:[M.regexp,M.escape,M.special(M.string)],class:"tok-string2"},{tag:M.variableName,class:"tok-variableName"},{tag:M.local(M.variableName),class:"tok-variableName tok-local"},{tag:M.definition(M.variableName),class:"tok-variableName tok-definition"},{tag:M.special(M.variableName),class:"tok-variableName2"},{tag:M.definition(M.propertyName),class:"tok-propertyName tok-definition"},{tag:M.typeName,class:"tok-typeName"},{tag:M.namespace,class:"tok-namespace"},{tag:M.className,class:"tok-className"},{tag:M.macroName,class:"tok-macroName"},{tag:M.propertyName,class:"tok-propertyName"},{tag:M.operator,class:"tok-operator"},{tag:M.comment,class:"tok-comment"},{tag:M.meta,class:"tok-meta"},{tag:M.invalid,class:"tok-invalid"},{tag:M.punctuation,class:"tok-punctuation"}]);var mu;const ri=new J;function LC(t){return F.define({combine:t?e=>e.concat(t):void 0})}const RC=new J;class $t{constructor(e,n,r=[],i=""){this.data=e,this.name=i,te.prototype.hasOwnProperty("tree")||Object.defineProperty(te.prototype,"tree",{get(){return St(this)}}),this.parser=n,this.extension=[ar.of(this),te.languageData.of((s,l,o)=>{let a=qp(s,l,o),u=a.type.prop(ri);if(!u)return[];let c=s.facet(u),h=a.type.prop(RC);if(h){let f=a.resolve(l-a.from,o);for(let d of h)if(d.test(f,s)){let g=s.facet(d.facet);return d.type=="replace"?g:g.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return qp(e,n,r).type.prop(ri)==this.data}findRegions(e){let n=e.facet(ar);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(ri)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(J.mounted);if(o){if(o.tree.prop(ri)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof ye&&i(u,s.positions[a]+l)}};return i(St(e),0),r}get allowsNesting(){return!0}}$t.setState=ce.define();function qp(t,e,n){let r=t.facet(ar),i=St(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Fe.ExcludeBuffers))s.type.isTop&&(i=s);return i}function St(t){let e=t.field($t.state,!1);return e?e.tree:ye.empty}class IC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Qi=null;class Ei{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Ei(e,n,[],ye.empty,0,r,[],null)}startParse(){return this.parser.startParse(new IC(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=ye.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Ar.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Ar.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Qi;Qi=this;try{return e()}finally{Qi=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Yp(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,h,f)=>a.push({fromA:u,toA:c,fromB:h,toB:f})),r=Ar.applyChanges(r,a),i=ye.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&o.push({from:c,to:h})}}}return new Ei(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Yp(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends sv{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Qi;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new ye(ft.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Qi}}function Yp(t,e,n){return Ar.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Ti{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Ti(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Ei.create(e.facet(ar).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Ti(r)}}$t.state=Jt.define({create:Ti.init,update(t,e){for(let n of e.effects)if(n.is($t.setState))return n.value;return e.startState.facet(ar)!=e.state.facet(ar)?Ti.init(e.state):t.apply(e)}});let av=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(av=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const gu=typeof navigator<"u"&&(!((mu=navigator.scheduling)===null||mu===void 0)&&mu.isInputPending)?()=>navigator.scheduling.isInputPending():null,BC=kt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field($t.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field($t.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=av(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field($t.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!gu?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>gu&&gu()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:$t.setState.of(new Ti(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>cn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ar=F.define({combine(t){return t.length?t[0]:null},enables:t=>[$t.state,BC,j.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),jC=F.define(),vf=F.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Ir(t){let e=t.facet(vf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function $s(t,e){let n="",r=t.tabSize,i=t.facet(vf)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function wf(t,e){t instanceof te&&(t=new Sa(t));for(let r of t.state.facet(jC)){let i=r(t,e);if(i!==void 0)return i}let n=St(t.state);return n.length>=e?FC(t,n,e):null}class Sa{constructor(e,n={}){this.state=e,this.options=n,this.unit=Ir(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return va(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const uv=new J;function FC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return cv(r,t,n)}function cv(t,e,n){for(let r=t;r;r=r.next){let i=zC(r.node);if(i)return i(xf.create(e,n,r))}return 0}function _C(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function zC(t){let e=t.type.prop(uv);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(J.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>UC(l,!0,1,void 0,s&&!_C(l)?i.from:void 0)}return t.parent==null?HC:null}function HC(){return 0}class xf extends Sa{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new xf(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(WC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return cv(this.context.next,this.base,this.pos)}}function WC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function VC(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function UC(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=VC(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const $C=200;function KC(){return te.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+$C)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let c=l.doc.lineAt(u);if(c.from==o)continue;o=c.from;let h=wf(l,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],d=$s(l,h);f!=d&&a.push({from:c.from,to:c.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const GC=F.define(),qC=new J;function YC(t,e,n){let r=St(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(qC);if(a&&(o.to<r.length-50||r.length==t.doc.length||!QC(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function QC(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Qp(t,e,n){for(let r of t.facet(GC)){let i=r(t,e,n);if(i)return i}return YC(t,e,n)}function hv(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const fv=ce.define({map:hv}),kf=ce.define({map:hv}),Go=Jt.define({create(){return G.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=Jp(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(fv)&&!JC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(dv),i=r?G.replace({widget:new e2(r(e.state,n.value))}):Xp;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(kf)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=Jp(t,e.selection.main.head)),t},provide:t=>j.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Xp.range(r,i))}return G.set(e,!0)}});function Jp(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function Xc(t,e,n){var r;let i=null;return(r=t.field(Go,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function JC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const XC={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},dv=F.define({combine(t){return ya(t,XC)}});function ZC(t){return[Go,r2]}function pv(t,e){let{state:n}=t,r=n.facet(dv),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=Xc(t.state,o.from,o.to);a&&t.dispatch({effects:kf.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const Xp=G.replace({widget:new class extends el{toDOM(t){return pv(t,null)}}});class e2 extends el{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return pv(e,this.value)}}const t2={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class yu extends lr{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function n2(t={}){let e={...t2,...t},n=new yu(e,!0),r=new yu(e,!1),i=kt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(ar)!=l.state.facet(ar)||l.startState.field(Go,!1)!=l.state.field(Go,!1)||St(l.startState)!=St(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new Or;for(let a of l.viewportLineBlocks){let u=Xc(l.state,a.from,a.to)?r:Qp(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,aC({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||re.empty},initialSpacer(){return new yu(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=Xc(l.state,o.from,o.to);if(u)return l.dispatch({effects:kf.of(u)}),!0;let c=Qp(l.state,o.from,o.to);return c?(l.dispatch({effects:fv.of(c)}),!0):!1}}}),ZC()]}const r2=j.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ca{constructor(e,n){this.specs=e;let r;function i(o){let a=rr.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof $t?o=>o.prop(ri)==l.data:l?o=>o==l:void 0,this.style=ov(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new rr(r):null,this.themeType=n.themeType}static define(e,n){return new Ca(e,n||{})}}const Zc=F.define(),i2=F.define({combine(t){return t.length?[t[0]]:null}});function vu(t){let e=t.facet(Zc);return e.length?e:t.facet(i2)}function s2(t,e){let n=[o2],r;return t instanceof Ca&&(t.module&&n.push(j.styleModule.of(t.module)),r=t.themeType),r?n.push(Zc.computeN([j.darkTheme],i=>i.facet(j.darkTheme)==(r=="dark")?[t]:[])):n.push(Zc.of(t)),n}class l2{constructor(e){this.markCache=Object.create(null),this.tree=St(e.state),this.decorations=this.buildDeco(e,vu(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=St(e.state),r=vu(e.state),i=r!=vu(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return G.none;let r=new Or;for(let{from:i,to:s}of e.visibleRanges)DC(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=G.mark({class:a})))},i,s);return r.finish()}}const o2=ma.high(kt.fromClass(l2,{decorations:t=>t.decorations})),a2=j.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),mv=1e4,gv="()[]{}",yv=F.define({combine(t){return ya(t,{afterCursor:!0,brackets:gv,maxScanDistance:mv,renderMatch:h2})}}),u2=G.mark({class:"cm-matchingBracket"}),c2=G.mark({class:"cm-nonmatchingBracket"});function h2(t){let e=[],n=t.matched?u2:c2;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const f2=Jt.define({create(){return G.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(yv);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=hn(e.state,i.head,-1,r)||i.head>0&&hn(e.state,i.head-1,1,r)||r.afterCursor&&(hn(e.state,i.head,1,r)||i.head<e.state.doc.length&&hn(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return G.set(n,!0)},provide:t=>j.decorations.from(t)}),d2=[f2,a2];function p2(t={}){return[yv.of(t),d2]}const m2=new J;function eh(t,e,n){let r=t.prop(e<0?J.openedBy:J.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function th(t){let e=t.type.prop(m2);return e?e(t.node):t}function hn(t,e,n,r={}){let i=r.maxScanDistance||mv,s=r.brackets||gv,l=St(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=eh(a.type,n,s);if(u&&a.from<a.to){let c=th(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return g2(t,e,n,a,c,u,s)}}return y2(t,e,n,l,o.type,i,s)}function g2(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,c=o==null?void 0:o.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=th(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(eh(c.type,n,l))u++;else if(eh(c.type,-n,l)){if(u==0){let h=th(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function y2(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;n<0&&(f+=d.length);let g=e+f*n;for(let w=n>0?0:d.length-1,x=n>0?d.length:-1;w!=x;w+=n){let p=l.indexOf(d[w]);if(!(p<0||r.resolveInner(g+w,1).type!=i))if(p%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:g+w,to:g+w+1},matched:p>>1==a>>1};h--}}n>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}function Zp(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class vv{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Zp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Zp(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function v2(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||w2,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||bf,mergeTokens:t.mergeTokens!==!1}}function w2(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const em=new WeakMap;class Sf extends $t{constructor(e){let n=LC(e.languageData),r=v2(e),i,s=new class extends sv{createParse(l,o,a){return new k2(i,l,o,a)}};super(n,s,[],e.name),this.topNode=b2(n,this),i=this,this.streamParser=r,this.stateAfter=new J({perNode:!0}),this.tokenTable=e.tokenTable?new Sv(r.tokenTable):C2}static define(e){return new Sf(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=em.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=Cf(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let c=r?r(a.from):-1,h=new vv(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;h.pos<u-a.from;)xv(this.streamParser.token,h,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&em.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function Cf(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof ye&&a<i&&Cf(t,o,a,r,i);if(u)return u}return null}function wv(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof ye){if(!(a=wv(t,o,n-l,r-l,i)))break;return i?new ye(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function x2(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&Cf(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=wv(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Ir(i):4),tree:ye.empty}}class k2{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=Ei.get(),l=i[0].from,{state:o,tree:a}=x2(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Ir(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Ei.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new vv(n,e?e.state.tabSize:4,e?Ir(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=xv(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=ye.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:S2,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new ye(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new ye(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function xv(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const bf=Object.create(null),Ks=[ft.none],S2=new pf(Ks),tm=[],nm=Object.create(null),kv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])kv[t]=Cv(bf,e);class Sv{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),kv)}resolve(e){return e?this.table[e]||(this.table[e]=Cv(this.extra,e)):0}}const C2=new Sv(bf);function wu(t,e){tm.indexOf(t)>-1||(tm.push(t),console.warn(e))}function Cv(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let c=t[u]||M[u];c?typeof c=="function"?a.length?a=a.map(c):wu(u,`Modifier ${u} used at start of tag`):a.length?wu(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:wu(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=nm[i];if(s)return s.id;let l=nm[i]=ft.define({id:Ks.length,name:r,props:[MC({[r]:n})]});return Ks.push(l),l.id}function b2(t,e){let n=ft.define({id:Ks.length,name:"Document",props:[ri.add(()=>t),uv.add(()=>r=>e.getIndent(r))],top:!0});return Ks.push(n),n}Me.RTL,Me.LTR;const A2="#e5c07b",rm="#e06c75",E2="#56b6c2",T2="#ffffff",uo="#abb2bf",nh="#7d8799",M2="#61afef",N2="#98c379",im="#d19a66",D2="#c678dd",O2="#21252b",sm="#2c313a",lm="#282c34",xu="#353a42",P2="#3E4451",om="#528bff",L2=j.theme({"&":{color:uo,backgroundColor:lm},".cm-content":{caretColor:om},".cm-cursor, .cm-dropCursor":{borderLeftColor:om},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:P2},".cm-panels":{backgroundColor:O2,color:uo},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:lm,color:nh,border:"none"},".cm-activeLineGutter":{backgroundColor:sm},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:xu},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:xu,borderBottomColor:xu},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:sm,color:uo}}},{dark:!0}),R2=Ca.define([{tag:M.keyword,color:D2},{tag:[M.name,M.deleted,M.character,M.propertyName,M.macroName],color:rm},{tag:[M.function(M.variableName),M.labelName],color:M2},{tag:[M.color,M.constant(M.name),M.standard(M.name)],color:im},{tag:[M.definition(M.name),M.separator],color:uo},{tag:[M.typeName,M.className,M.number,M.changed,M.annotation,M.modifier,M.self,M.namespace],color:A2},{tag:[M.operator,M.operatorKeyword,M.url,M.escape,M.regexp,M.link,M.special(M.string)],color:E2},{tag:[M.meta,M.comment],color:nh},{tag:M.strong,fontWeight:"bold"},{tag:M.emphasis,fontStyle:"italic"},{tag:M.strikethrough,textDecoration:"line-through"},{tag:M.link,color:nh,textDecoration:"underline"},{tag:M.heading,fontWeight:"bold",color:rm},{tag:[M.atom,M.bool,M.special(M.variableName)],color:im},{tag:[M.processingInstruction,M.string,M.inserted],color:N2},{tag:M.invalid,color:T2}]),I2=[L2,s2(R2)],B2=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=Ef(t.state,n.from);return r.line?j2(t):r.block?_2(t):!1};function Af(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const j2=Af(W2,0),F2=Af(bv,0),_2=Af((t,e)=>bv(t,e,H2(e)),0);function Ef(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Ji=50;function z2(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Ji,r),l=t.sliceDoc(i,i+Ji),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let c,h;i-r<=2*Ji?c=h=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+Ji),h=t.sliceDoc(i-Ji,i));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(h)[0].length,g=h.length-d-n.length;return c.slice(f,f+e.length)==e&&h.slice(g,g+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(h.charAt(g-1))?1:0}}:null}function H2(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function bv(t,e,n=e.selection.ranges){let r=n.map(s=>Ef(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>z2(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:c}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function W2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=Ef(e,s).line;if(u){for(let c=s;c<=l;){let h=e.doc.lineAt(c);if(h.from>i&&(s==l||l>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,g=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),r.push({line:h,comment:g,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(a<1e9)for(let c=o;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:c,single:h}of r)(h||!c)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,c=u+a.length;l.text[c-l.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}function Pi(t,e){return E.create(t.ranges.map(e),t.mainIndex)}function Xt(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Zt({state:t,dispatch:e},n){let r=Pi(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Xt(t,r)),!0)}function ba(t,e){return E.cursor(e?t.to:t.from)}function Av(t,e){return Zt(t,n=>n.empty?t.moveByChar(n,e):ba(n,e))}function Xe(t){return t.textDirectionAt(t.state.selection.main.head)==Me.LTR}const Ev=t=>Av(t,!Xe(t)),Tv=t=>Av(t,Xe(t));function Mv(t,e){return Zt(t,n=>n.empty?t.moveByGroup(n,e):ba(n,e))}const V2=t=>Mv(t,!Xe(t)),U2=t=>Mv(t,Xe(t));function $2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Aa(t,e,n){let r=St(t).resolveInner(e.head),i=n?J.closedBy:J.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;$2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?hn(t,r.from,1):hn(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,E.cursor(o,n?-1:1)}const K2=t=>Zt(t,e=>Aa(t.state,e,!Xe(t))),G2=t=>Zt(t,e=>Aa(t.state,e,Xe(t)));function Nv(t,e){return Zt(t,n=>{if(!n.empty)return ba(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const Dv=t=>Nv(t,!1),Ov=t=>Nv(t,!0);function Pv(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(j.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function Lv(t,e){let n=Pv(t),{state:r}=t,i=Pi(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):ba(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=j.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(Xt(r,i),{effects:s}),!0}const am=t=>Lv(t,!1),rh=t=>Lv(t,!0);function fr(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=E.cursor(r.from+s))}return i}const q2=t=>Zt(t,e=>fr(t,e,!0)),Y2=t=>Zt(t,e=>fr(t,e,!1)),Q2=t=>Zt(t,e=>fr(t,e,!Xe(t))),J2=t=>Zt(t,e=>fr(t,e,Xe(t))),X2=t=>Zt(t,e=>E.cursor(t.lineBlockAt(e.head).from,1)),Z2=t=>Zt(t,e=>E.cursor(t.lineBlockAt(e.head).to,-1));function eb(t,e,n){let r=!1,i=Pi(t.selection,s=>{let l=hn(t,s.head,-1)||hn(t,s.head,1)||s.head>0&&hn(t,s.head-1,1)||s.head<t.doc.length&&hn(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return E.cursor(o)});return r?(e(Xt(t,i)),!0):!1}const tb=({state:t,dispatch:e})=>eb(t,e);function jt(t,e){let n=Pi(t.state.selection,r=>{let i=e(r);return E.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Xt(t.state,n)),!0)}function Rv(t,e){return jt(t,n=>t.moveByChar(n,e))}const Iv=t=>Rv(t,!Xe(t)),Bv=t=>Rv(t,Xe(t));function jv(t,e){return jt(t,n=>t.moveByGroup(n,e))}const nb=t=>jv(t,!Xe(t)),rb=t=>jv(t,Xe(t)),ib=t=>jt(t,e=>Aa(t.state,e,!Xe(t))),sb=t=>jt(t,e=>Aa(t.state,e,Xe(t)));function Fv(t,e){return jt(t,n=>t.moveVertically(n,e))}const _v=t=>Fv(t,!1),zv=t=>Fv(t,!0);function Hv(t,e){return jt(t,n=>t.moveVertically(n,e,Pv(t).height))}const um=t=>Hv(t,!1),cm=t=>Hv(t,!0),lb=t=>jt(t,e=>fr(t,e,!0)),ob=t=>jt(t,e=>fr(t,e,!1)),ab=t=>jt(t,e=>fr(t,e,!Xe(t))),ub=t=>jt(t,e=>fr(t,e,Xe(t))),cb=t=>jt(t,e=>E.cursor(t.lineBlockAt(e.head).from)),hb=t=>jt(t,e=>E.cursor(t.lineBlockAt(e.head).to)),hm=({state:t,dispatch:e})=>(e(Xt(t,{anchor:0})),!0),fm=({state:t,dispatch:e})=>(e(Xt(t,{anchor:t.doc.length})),!0),dm=({state:t,dispatch:e})=>(e(Xt(t,{anchor:t.selection.main.anchor,head:0})),!0),pm=({state:t,dispatch:e})=>(e(Xt(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),fb=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),db=({state:t,dispatch:e})=>{let n=Ea(t).map(({from:r,to:i})=>E.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:E.create(n),userEvent:"select"})),!0},pb=({state:t,dispatch:e})=>{let n=Pi(t.selection,r=>{let i=St(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return E.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(Xt(t,n)),!0)};function Wv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(Xt(n,E.create(i,i.length-1))),!0)}const mb=t=>Wv(t,!1),gb=t=>Wv(t,!0),yb=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=E.create([n.main]):n.main.empty||(r=E.create([E.cursor(n.main.head)])),r?(e(Xt(t,r)),!0):!1};function il(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=Wl(t,a,!1)):a>l&&(n="delete.forward",a=Wl(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=Wl(t,l,!1),o=Wl(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:E.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?j.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Wl(t,e,n){if(t instanceof j)for(let r of t.state.facet(j.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Vv=(t,e,n)=>il(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=va(o,s.tabSize),c=u%Ir(s)||Ir(s);for(let h=0;h<c&&o[o.length-1-h]==" ";h++)i--;a=i}else a=_e(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=_e(l.text,a-l.from,!1,!1)+l.from);return a}),ih=t=>Vv(t,!1,!0),Uv=t=>Vv(t,!0,!1),$v=(t,e)=>il(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=_e(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=l(u);if(o!=null&&c!=o)break;(u!=" "||r!=n.head)&&(o=c),r=a}return r}),Kv=t=>$v(t,!1),vb=t=>$v(t,!0),wb=t=>il(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),xb=t=>il(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),kb=t=>il(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Sb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Z.of(["",""])},range:E.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Cb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:_e(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:_e(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:E.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ea(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Gv(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of Ea(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(E.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(E.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:E.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const bb=({state:t,dispatch:e})=>Gv(t,e,!1),Ab=({state:t,dispatch:e})=>Gv(t,e,!0);function qv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Ea(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Eb=({state:t,dispatch:e})=>qv(t,e,!1),Tb=({state:t,dispatch:e})=>qv(t,e,!0),Mb=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Ea(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Pi(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Nb(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=St(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(J.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const mm=Yv(!1),Db=Yv(!0);function Yv(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&Nb(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new Sa(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=wf(u,s);for(c==null&&(c=va(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let h=["",$s(e,c)];return a&&h.push($s(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:Z.of(h)},range:E.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Tf(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:E.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const Ob=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Sa(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=Tf(t,(s,l,o)=>{let a=wf(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],c=$s(t,a);(u!=c||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},Pb=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Tf(t,(n,r)=>{r.push({from:n.from,insert:t.facet(vf)})}),{userEvent:"input.indent"})),!0),Lb=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Tf(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=va(i,t.tabSize),l=0,o=$s(t,Math.max(0,s-Ir(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),Rb=t=>(t.setTabFocusMode(),!0),Ib=[{key:"Ctrl-b",run:Ev,shift:Iv,preventDefault:!0},{key:"Ctrl-f",run:Tv,shift:Bv},{key:"Ctrl-p",run:Dv,shift:_v},{key:"Ctrl-n",run:Ov,shift:zv},{key:"Ctrl-a",run:X2,shift:cb},{key:"Ctrl-e",run:Z2,shift:hb},{key:"Ctrl-d",run:Uv},{key:"Ctrl-h",run:ih},{key:"Ctrl-k",run:wb},{key:"Ctrl-Alt-h",run:Kv},{key:"Ctrl-o",run:Sb},{key:"Ctrl-t",run:Cb},{key:"Ctrl-v",run:rh}],Bb=[{key:"ArrowLeft",run:Ev,shift:Iv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:V2,shift:nb,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Q2,shift:ab,preventDefault:!0},{key:"ArrowRight",run:Tv,shift:Bv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:U2,shift:rb,preventDefault:!0},{mac:"Cmd-ArrowRight",run:J2,shift:ub,preventDefault:!0},{key:"ArrowUp",run:Dv,shift:_v,preventDefault:!0},{mac:"Cmd-ArrowUp",run:hm,shift:dm},{mac:"Ctrl-ArrowUp",run:am,shift:um},{key:"ArrowDown",run:Ov,shift:zv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:fm,shift:pm},{mac:"Ctrl-ArrowDown",run:rh,shift:cm},{key:"PageUp",run:am,shift:um},{key:"PageDown",run:rh,shift:cm},{key:"Home",run:Y2,shift:ob,preventDefault:!0},{key:"Mod-Home",run:hm,shift:dm},{key:"End",run:q2,shift:lb,preventDefault:!0},{key:"Mod-End",run:fm,shift:pm},{key:"Enter",run:mm,shift:mm},{key:"Mod-a",run:fb},{key:"Backspace",run:ih,shift:ih,preventDefault:!0},{key:"Delete",run:Uv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Kv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:vb,preventDefault:!0},{mac:"Mod-Backspace",run:xb,preventDefault:!0},{mac:"Mod-Delete",run:kb,preventDefault:!0}].concat(Ib.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),jb=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:K2,shift:ib},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:G2,shift:sb},{key:"Alt-ArrowUp",run:bb},{key:"Shift-Alt-ArrowUp",run:Eb},{key:"Alt-ArrowDown",run:Ab},{key:"Shift-Alt-ArrowDown",run:Tb},{key:"Mod-Alt-ArrowUp",run:mb},{key:"Mod-Alt-ArrowDown",run:gb},{key:"Escape",run:yb},{key:"Mod-Enter",run:Db},{key:"Alt-l",mac:"Ctrl-l",run:db},{key:"Mod-i",run:pb,preventDefault:!0},{key:"Mod-[",run:Lb},{key:"Mod-]",run:Pb},{key:"Mod-Alt-\\",run:Ob},{key:"Shift-Mod-k",run:Mb},{key:"Shift-Mod-\\",run:tb},{key:"Mod-/",run:B2},{key:"Alt-A",run:F2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Rb}].concat(Bb),gm=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Gs{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(gm(o)):gm,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return j0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=sk(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=F0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Gs.prototype[Symbol.iterator]=function(){return this});const Qv={from:-1,to:-1,match:/.*/.exec("")},Mf="gm"+(/x/.unicode==null?"":"u");class Jv{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Qv,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Xv(e,n,r,i,s);this.re=new RegExp(n,Mf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=qo(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=qo(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const ku=new WeakMap;class di{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=ku.get(e);if(!i||i.from>=r||i.to<=n){let o=new di(n,e.sliceString(n,r));return ku.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),ku.set(e,new di(l,s)),new di(n,s.slice(n-l,r-l))}}class Xv{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=Qv,this.matchPos=qo(e,i),this.re=new RegExp(n,Mf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=di.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=qo(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=di.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Jv.prototype[Symbol.iterator]=Xv.prototype[Symbol.iterator]=function(){return this});function Fb(t){try{return new RegExp(t,Mf),!0}catch{return!1}}function qo(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function sh(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Ie("input",{class:"cm-textfield",name:"line",value:e}),r=Ie("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:xs.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Ie("label",t.state.phrase("Go to line"),": ",n)," ",Ie("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Ie("button",{name:"close",onclick:()=>{t.dispatch({effects:xs.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,c,h]=s,f=c?+c.slice(1):0,d=u?+u:o.number;if(u&&h){let x=d/100;a&&(x=x*(a=="-"?-1:1)+o.number/l.doc.lines),d=Math.round(l.doc.lines*x)}else u&&a&&(d=d*(a=="-"?-1:1)+o.number);let g=l.doc.line(Math.max(1,Math.min(l.doc.lines,d))),w=E.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[xs.of(!1),j.scrollIntoView(w.from,{y:"center"})],selection:w}),t.focus()}return{dom:r}}const xs=ce.define(),ym=Jt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(xs)&&(t=n.value);return t},provide:t=>Vo.from(t,e=>e?sh:null)}),_b=t=>{let e=Wo(t,sh);if(!e){let n=[xs.of(!0)];t.state.field(ym,!1)==null&&n.push(ce.appendConfig.of([ym,zb])),t.dispatch({effects:n}),e=Wo(t,sh)}return e&&e.dom.querySelector("input").select(),!0},zb=j.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Hb=({state:t,dispatch:e})=>{let{selection:n}=t,r=E.create(n.ranges.map(i=>t.wordAt(i.head)||E.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Wb(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Gs(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Gs(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const Vb=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Hb({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=Wb(t,r);return i?(e(t.update({selection:t.selection.addRange(E.range(i.from,i.to),!1),effects:j.scrollIntoView(i.to)})),!0):!1},Li=F.define({combine(t){return ya(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new tA(e),scrollToMatch:e=>j.scrollIntoView(e)})}});class Zv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Fb(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Gb(this):new $b(this)}getCursor(e,n=0,r){let i=e.doc?e:te.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Wr(this,i,n,r):Hr(this,i,n,r)}}class e1{constructor(e){this.spec=e}}function Hr(t,e,n,r){return new Gs(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?Ub(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Ub(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Yo(i,n-s))!=ze.Word||e(Qo(i,n-s))!=ze.Word)&&(e(Qo(i,r-s))!=ze.Word||e(Yo(i,r-s))!=ze.Word))}class $b extends e1{constructor(e){super(e)}nextMatch(e,n,r){let i=Hr(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Hr(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Hr(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Hr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Hr(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Wr(t,e,n,r){return new Jv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Kb(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Yo(t,e){return t.slice(_e(t,e,!1),e)}function Qo(t,e){return t.slice(e,_e(t,e))}function Kb(t){return(e,n,r)=>!r[0].length||(t(Yo(r.input,r.index))!=ze.Word||t(Qo(r.input,r.index))!=ze.Word)&&(t(Qo(r.input,r.index+r[0].length))!=ze.Word||t(Yo(r.input,r.index+r[0].length))!=ze.Word)}class Gb extends e1{nextMatch(e,n,r){let i=Wr(this.spec,e,r,e.doc.length).next();return i.done&&(i=Wr(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Wr(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Wr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Wr(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const qs=ce.define(),Nf=ce.define(),er=Jt.define({create(t){return new Su(lh(t).create(),null)},update(t,e){for(let n of e.effects)n.is(qs)?t=new Su(n.value.create(),t.panel):n.is(Nf)&&(t=new Su(t.query,n.value?Df:null));return t},provide:t=>Vo.from(t,e=>e.panel)});class Su{constructor(e,n){this.query=e,this.panel=n}}const qb=G.mark({class:"cm-searchMatch"}),Yb=G.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Qb=kt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(er))}update(t){let e=t.state.field(er);(e!=t.startState.field(er)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return G.none;let{view:n}=this,r=new Or;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,c)=>{let h=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,h?Yb:qb)})}return r.finish()}},{decorations:t=>t.decorations});function sl(t){return e=>{let n=e.state.field(er,!1);return n&&n.query.spec.valid?t(e,n):r1(e)}}const Jo=sl((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=E.single(r.from,r.to),s=t.state.facet(Li);return t.dispatch({selection:i,effects:[Of(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),n1(t),!0}),Xo=sl((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=E.single(i.from,i.to),l=t.state.facet(Li);return t.dispatch({selection:s,effects:[Of(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),n1(t),!0}),Jb=sl((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:E.create(n.map(r=>E.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Xb=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Gs(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(E.range(o.value.from,o.value.to))}return e(t.update({selection:E.create(s,l),userEvent:"select.search.matches"})),!0},vm=sl((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,c=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),c.push(j.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(o);return l&&(a=E.single(l.from,l.to).map(h),c.push(Of(t,l)),c.push(n.facet(Li).scrollToMatch(a.main,t))),t.dispatch({changes:h,selection:a,effects:c,userEvent:"input.replace"}),!0}),Zb=sl((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:j.announce.of(r),userEvent:"input.replace.all"}),!0});function Df(t){return t.state.facet(Li).createPanel(t)}function lh(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(Li);return new Zv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function t1(t){let e=Wo(t,Df);return e&&e.dom.querySelector("[main-field]")}function n1(t){let e=t1(t);e&&e==t.root.activeElement&&e.select()}const r1=t=>{let e=t.state.field(er,!1);if(e&&e.panel){let n=t1(t);if(n&&n!=t.root.activeElement){let r=lh(t.state,e.query.spec);r.valid&&t.dispatch({effects:qs.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Nf.of(!0),e?qs.of(lh(t.state,e.query.spec)):ce.appendConfig.of(rA)]});return!0},i1=t=>{let e=t.state.field(er,!1);if(!e||!e.panel)return!1;let n=Wo(t,Df);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Nf.of(!1)}),!0},eA=[{key:"Mod-f",run:r1,scope:"editor search-panel"},{key:"F3",run:Jo,shift:Xo,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Jo,shift:Xo,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:i1,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Xb},{key:"Mod-Alt-g",run:_b},{key:"Mod-d",run:Vb,preventDefault:!0}];class tA{constructor(e){this.view=e;let n=this.query=e.state.field(er).query.spec;this.commit=this.commit.bind(this),this.searchField=Ie("input",{value:n.search,placeholder:pt(e,"Find"),"aria-label":pt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ie("input",{value:n.replace,placeholder:pt(e,"Replace"),"aria-label":pt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ie("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Ie("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Ie("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return Ie("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=Ie("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Jo(e),[pt(e,"next")]),r("prev",()=>Xo(e),[pt(e,"previous")]),r("select",()=>Jb(e),[pt(e,"all")]),Ie("label",null,[this.caseField,pt(e,"match case")]),Ie("label",null,[this.reField,pt(e,"regexp")]),Ie("label",null,[this.wordField,pt(e,"by word")]),...e.state.readOnly?[]:[Ie("br"),this.replaceField,r("replace",()=>vm(e),[pt(e,"replace")]),r("replaceAll",()=>Zb(e),[pt(e,"replace all")])],Ie("button",{name:"close",onclick:()=>i1(e),"aria-label":pt(e,"close"),type:"button"},["×"])])}commit(){let e=new Zv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:qs.of(e)}))}keydown(e){eC(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Xo:Jo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),vm(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(qs)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Li).top}}function pt(t,e){return t.state.phrase(e)}const Vl=30,Ul=/[\s\.,:;?!]/;function Of(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Vl),l=Math.min(i,n+Vl),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<Vl;a++)if(!Ul.test(o[a+1])&&Ul.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-Vl;a--)if(!Ul.test(o[a-1])&&Ul.test(o[a])){o=o.slice(0,a);break}}return j.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const nA=j.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),rA=[er,ma.low(Qb),nA],zt={PAGE_BREAK:/^\={3,}$/,CHARACTER:/^([A-Z][A-Z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,CHARACTER_POWER_USER:/^(?:@)([A-Za-z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,SCENE:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,TRANSITION:/^((?:FADE (?:IN|TO BLACK|OUT)|CUT TO BLACK)[\:\.]?|.+ TO\:)/i,TRANSITION_POWER_USER:/^(?:> )(.+)/i,TITLE:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,SECTION:/^(#{1,4})\ (.*)/,MILESTONE:/^(?:\ +)?-\ (.+)/,IMAGE:/^(\[i\]https:\/\/(.+))/i,AUDIO:/^(\[a\]https:\/\/(.+))/i},iA=Sf.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(zt.TRANSITION)||t.match(zt.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(zt.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(zt.CHARACTER))||(n=t.match(zt.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(zt.IMAGE)||t.match(zt.AUDIO)?"link":t.match(zt.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(zt.TITLE))return t.skipTo(":"),t.next(),"def";if(n=t.match(zt.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(zt.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),sA=kt.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push(G.line({class:"cm-keyword"}).range(s.from)),e.push(G.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push(G.line({class:"cm-header"}).range(s.from)),e.push(G.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push(G.line({class:"cm-atom"}).range(s.from)),e.push(G.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push(G.line({class:"cm-synopsis"}).range(s.from)),e.push(G.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push(G.line({class:"cm-number"}).range(s.from)),e.push(G.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push(G.line({class:"cm-variable"}).range(s.from)),e.push(G.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return G.set(e)}},{decorations:t=>t.decorations}),s1=L.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=L.useRef(null),l=L.useRef(null);return L.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:j.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),L.useEffect(()=>{if(!s.current)return;const o=[mC(),rC(),n2(),p2(),KC(),j.lineWrapping,iA,sA,j.domEventHandlers({mouseup:(c,h)=>{setTimeout(()=>{const f=h.state.selection.main.head,d=h.state.doc.lineAt(f);n(d.number-1)},10)}}),I2,Qy.of([...jb,...eA]),j.updateListener.of(c=>{if(c.docChanged&&e(c.state.doc.toString()),c.selectionSet&&!c.docChanged){const h=c.state.selection.main.head,f=c.state.doc.lineAt(h);n(f.number-1)}}),j.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=te.create({doc:t,extensions:o}),u=new j({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),L.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),m.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});s1.displayName="CodeMirrorEditor";const lA={VITE_GOOGLE_CLIENT_ID:"332933508693-u0f8kifpkma08osh7cscdcdbgsqi4ir1.apps.googleusercontent.com"};let jn="";function oA(){return new Promise(t=>{if(window.google)return t();const e=setInterval(()=>{window.google&&(clearInterval(e),t())},50)})}async function oh(t){if(jn&&!(t&&t.prompt==="consent"))return jn;await oA();const e=window.google,n=lA||{},r=["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly"],i=Array.from(new Set([...t&&t.extraScopes?t.extraScopes:[],...r])),s=e.accounts.oauth2.initTokenClient({client_id:n.VITE_GOOGLE_CLIENT_ID,scope:i.join(" "),callback:l=>{jn=l.access_token}});return new Promise((l,o)=>{s.callback=u=>{if(u&&u.error)return o(u);jn=u&&u.access_token?u.access_token:jn,l(jn)};const a=t&&t.prompt==="consent"?"consent":"";try{s.requestAccessToken({prompt:a})}catch(u){o(u)}})}async function Br(t,e={},n=!1){var s;const r=await oh(),i=await fetch(t,{...e,headers:{...e.headers||{},Authorization:`Bearer ${r}`}});if(!i.ok)try{const o=await i.clone().text().catch(()=>"<could not read body>");console.debug("authedFetch non-OK response",{url:((s=t==null?void 0:t.toString)==null?void 0:s.call(t))||t,status:i.status,bodyPreview:o.slice(0,200)})}catch(l){console.debug("authedFetch: failed to read non-OK response body",l)}if(i.status===401)return jn="",Br(t,e,n);if(i.status===403&&!n)try{return console.debug("authedFetch: 403 received, attempting re-consent with broader Drive scope and retry"),jn="",await oh({prompt:"consent",extraScopes:["https://www.googleapis.com/auth/drive"]}),Br(t,e,!0)}catch(l){console.debug("authedFetch: re-consent attempt failed",l)}return i}const Pf="fountain:driveState";function Ht(){try{return JSON.parse(localStorage.getItem(Pf)||"{}")}catch{return{}}}function aA(t){localStorage.setItem(Pf,JSON.stringify(t))}function uA(){localStorage.removeItem(Pf)}function Pn(t){try{try{console.log("persistDriveState: about to save",t)}catch{}aA(t);try{const e="fountain:driveState",n=localStorage.getItem(e);console.log("persistDriveState: saved to localStorage",{key:e,valuePreview:n&&n.slice?n.slice(0,1e3):n})}catch{}}catch(e){console.error("persistDriveState failed",e)}}const cA={VITE_GCP_PROJECT_NUMBER:"332933508693",VITE_GOOGLE_API_KEY:"AIzaSyBNuoxiWJI0jd68umAFLH0QYfuJdyAHUUs"};function hA(t=3e3){return new Promise((e,n)=>{if(window.gapi)return e();const r=Date.now(),i=setInterval(()=>{if(window.gapi)return clearInterval(i),e();if(Date.now()-r>t)return clearInterval(i),n(new Error("gapi did not load"))},50)})}function fA(){return new Promise(async(t,e)=>{try{await hA()}catch{return e(new Error("Google API library (gapi) not loaded. Ensure https://apis.google.com/js/api.js is included."))}try{window.gapi.load("picker",()=>{if(!window.google||!window.google.picker)return e(new Error("Google Picker API not available on window.google.picker. Make sure the Picker API is enabled in Google Cloud Console."));t()})}catch(n){e(n)}})}async function dA(){await fA();const t=await oh(),e=window.google,n=new e.picker.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder");return new Promise(r=>{const i=cA||{};new e.picker.PickerBuilder().setAppId(i.VITE_GCP_PROJECT_NUMBER).setDeveloperKey(i.VITE_GOOGLE_API_KEY).setOAuthToken(t).addView(n).setTitle("Choose a Drive Folder").setCallback(l=>{var o;if(l.action===e.picker.Action.PICKED&&((o=l.docs)!=null&&o.length)){console.log("Google Picker selected folder:",l.docs[0]);try{const a=new CustomEvent("fountain:drive:folderSelected",{detail:l.docs[0]});window.dispatchEvent(a)}catch(a){console.warn("picker: could not dispatch folderSelected event",a)}try{const a={...Ht(),folderId:l.docs[0].id,folderName:l.docs[0].name,folder:l.docs[0]};Pn(a)}catch(a){console.warn("picker: failed to persist folder as fallback",a)}r({id:l.docs[0].id,name:l.docs[0].name})}else r(null)}).build().setVisible(!0)})}async function pA(t){if(!t)return[];const e=`'${t}' in parents and trashed = false`,r=`https://www.googleapis.com/drive/v3/files?${new URLSearchParams({q:e,fields:"files(id,name,mimeType,modifiedTime)",pageSize:"200"}).toString()}`,i=await Br(r);if(!i.ok)throw new Error(`Drive list failed: ${i.status}`);const s=await i.json();try{console.log("Drive: files in folder",t,s.files)}catch{}return(s.files||[]).map(l=>({id:l.id,name:l.name,mimeType:l.mimeType,modifiedTime:l.modifiedTime}))}async function mA(t){if(!t)throw new Error("fileId required");const e=`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,n=await Br(e);if(!n.ok)throw new Error(`Failed to fetch file content: ${n.status}`);return await n.text()}async function gA(t,e,n){if(!t)throw new Error("folderId required");const r="-------fountainupload"+Date.now(),s=`--${r}\r
Content-Type: application/json; charset=UTF-8\r
\r
${JSON.stringify({name:e,parents:[t]})}\r
--${r}\r
Content-Type: text/plain\r
\r
${n}\r
--${r}--`,o=await Br("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,mimeType,modifiedTime",{method:"POST",headers:{"Content-Type":`multipart/related; boundary=${r}`},body:s});if(!o.ok)throw new Error(`Failed to create file: ${o.status}`);return await o.json()}async function yA(t,e){if(!t)throw new Error("fileId required");const n=`https://www.googleapis.com/upload/drive/v3/files/${t}?uploadType=media&fields=id,name,mimeType,modifiedTime`,r=await Br(n,{method:"PATCH",headers:{"Content-Type":"text/plain"},body:e});if(!r.ok)throw new Error(`Failed to update file content: ${r.status}`);try{return await r.json()}catch{const s=await Br(`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,mimeType,modifiedTime`);if(!s.ok)throw new Error(`Failed to fetch updated file metadata: ${s.status}`);return await s.json()}}function vA(t=""){const[e,n]=L.useState([]),[r,i]=L.useState([]),[s,l]=L.useState(new Map),o=L.useRef(null),[a,u]=L.useState(!0);return L.useEffect(()=>{if(!a){if(t){const h=Ma(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}return}(function(){try{const h=new Worker(new URL("/assets/previewWorker-D6jE4gsy.js",import.meta.url),{type:"module"});return h.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},h.onmessage=f=>{const{type:d,blocks:g,characters:w,characterLineCounts:x}=f.data;d==="result"?(n(g||[]),i(w||[]),l(x||new Map)):d==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=h,t&&h.postMessage({type:"process",text:t}),()=>{try{h.terminate()}catch{}}}catch(h){console.error("Failed to create module worker, falling back to main-thread parsing:",h),u(!1)}})()},[a]),L.useEffect(()=>{if(!a&&t){const h=Ma(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:h=>{if(a&&o.current)o.current.postMessage({type:"process",text:h});else{const f=Ma(h);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let wA=1;function xA(){const t=L.useRef(null),e=L.useRef(new Map),[n,r]=L.useState([]),i=L.useRef(!1);L.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=L.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-PCay-oew.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:c,requestId:h,message:f}=a.data||{};if(h&&e.current.has(h)){const{resolve:d,reject:g}=e.current.get(h);if(e.current.delete(h),u==="panels")try{d(c)}catch{}else if(u==="error")try{g(new Error(f||"worker error"))}catch{}else try{g(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(c)&&r(c)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=L.useCallback(o=>{const a=s();if(!a)try{const c=C1(o);return r(c),Promise.resolve(c)}catch(c){return Promise.reject(c)}const u=String(wA++);return new Promise((c,h)=>{e.current.set(u,{resolve:c,reject:h});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),h(f)}}).then(c=>(i.current&&r(c),c))},[s]);return{panels:n,parsePanels:l}}const Cu=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Hey—did the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE – CODING AND COFFEE\r
\r
— Keys clack.  \r
— Tests blink green, then red, then righteous green again.  \r
— A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pings—just shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing → preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open → payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function kA(){const[t,e]=L.useState(!1),[n,r]=L.useState(""),[i,s]=L.useState(!1),[l,o]=L.useState(!1),[a,u]=L.useState("edit"),[c,h]=L.useState(0),[f,d]=L.useState(!1),[g,w]=L.useState(null),[x,p]=L.useState(!1),[y,v]=L.useState(()=>Ht()),S={...Ht()||{},...y||{}};L.useEffect(()=>{const k=K=>{try{const $=K&&K.detail?K.detail:null;if($&&$.id){const ne={...Ht(),fileId:$.id,fileName:$.name,file:$};try{Pn(ne)}catch(se){console.error("App: persistDriveState failed",se)}v(ne)}}catch($){console.error("App: fileSelected handler failed",$)}},N=()=>{try{const $={...Ht()||{},fileId:void 0,fileName:void 0,file:void 0};try{Pn($)}catch(ne){console.error("App: persistDriveState failed",ne)}v($)}catch(K){console.error("App: fileCleared handler failed",K)}};return window.addEventListener("fountain:drive:fileSelected",k),window.addEventListener("fountain:drive:fileCleared",N),()=>{window.removeEventListener("fountain:drive:fileSelected",k),window.removeEventListener("fountain:drive:fileCleared",N)}},[]);const C=!!(S&&(S.folderId||S.folderName)),A=L.useRef(null),b=L.useRef(null),D=L.useRef([]),z=L.useRef(null),[B,U]=L.useState(!1),[H,Y]=L.useState(!1),[ie,ke]=L.useState([]),[Ze,Ft]=L.useState(null),[P,W]=L.useState(!1),[V,X]=L.useState(!1);L.useEffect(()=>{try{console.log("App: driveState changed",y)}catch{}},[y]),L.useEffect(()=>{const k=localStorage.getItem("fountain-script");let N=Cu;if(k)try{const K=JSON.parse(k);N=K.content,d(!0),w(new Date(K.savedAt))}catch(K){console.error("Error parsing saved script:",K),localStorage.removeItem("fountain-script")}r(N),Ne(N);try{typeof At=="function"&&At(N)}catch{}},[]),L.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const N=navigator.userAgent||"",K=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(N),$=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,ne=(window.innerWidth||screen.width||0)<1024;(K||$&&ne)&&e(!0)}catch{}},[]),L.useEffect(()=>{const k=N=>{(N.ctrlKey||N.metaKey)&&String(N.key).toLowerCase()==="g"&&(N.preventDefault(),p(K=>!K))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[]),L.useEffect(()=>{const k=K=>{try{const $=K&&K.detail?K.detail:null;if($&&$.id){const ne={...Ht(),folderId:$.id,folderName:$.name,folder:$};try{Pn(ne)}catch(se){console.error("App: persistDriveState failed",se)}v(ne)}else v(Ht())}catch($){console.error("App: failed to load drive state",$)}},N=()=>v({});return window.addEventListener("fountain:drive:folderSelected",k),window.addEventListener("fountain:drive:cleared",N),()=>{window.removeEventListener("fountain:drive:folderSelected",k),window.removeEventListener("fountain:drive:cleared",N)}},[]);const{blocks:Q,characters:pe,characterLineCounts:Le,processText:Ne}=vA(""),{panels:_,parsePanels:At}=xA(),[Ve,Ri]=L.useState(0),[Ii,Lf]=L.useState("screenplay"),Ue=L.useRef(null),[Bi,Dn]=L.useState(!1),ll=L.useRef(null),dt=L.useRef(null),[Rf,ji]=L.useState(!1),dr=L.useRef(null),[If,ol]=L.useState(!1);L.useEffect(()=>{D.current=Q},[Q]);const l1=k=>{r(k),Ne(k);try{typeof At=="function"&&At(k)}catch{}},o1=()=>{!Array.isArray(_)||_.length===0||(Ta(),ji(!1),dr.current="user",Ri(k=>{const N=_.length;return((k-1)%N+N)%N}))},Bf=(k=!0)=>{!Array.isArray(_)||_.length===0||(dr.current=k?"user":"auto",k&&(Ta(),ji(!1)),Ri(N=>{const K=_.length;return(N+1)%K}))},a1=async()=>{Rf&&(Ri(0),ji(!1));try{Ue.current&&Ue.current.paused&&(Ue.current.currentTime=0)}catch{}Dn(!0)},u1=()=>{if(Ue.current){dr.current="user";try{Ue.current.pause()}catch{}Dn(!1)}},c1=()=>{Ta(),ji(!1);try{Ri(0)}catch{}};function Ta(){try{dt.current&&(clearTimeout(dt.current),dt.current=null)}catch{}try{Ue.current&&(dr.current="user",Ue.current.pause(),Ue.current.currentTime=0)}catch{}Dn(!1)}L.useEffect(()=>{const k=Ue.current;if(!k)return;const N=()=>Dn(!0),K=()=>{dr.current==="user"&&Dn(!1)},$=()=>{Bf(!1)};return k.addEventListener("play",N),k.addEventListener("pause",K),k.addEventListener("ended",$),()=>{k.removeEventListener("play",N),k.removeEventListener("pause",K),k.removeEventListener("ended",$)}},[Ve,_]),L.useEffect(()=>{if(dt.current&&(clearTimeout(dt.current),dt.current=null),!Bi)return;const k=_&&_.length>0?_[Ve]||_[0]:null;if(!k){Dn(!1);return}try{Ue.current&&Ue.current.play().catch(()=>{})}catch{}const N=Math.max(1e3,typeof k.duration=="number"?k.duration*1e3:3e3);return dt.current=setTimeout(()=>{!_||Ve>=_.length-1?(Dn(!1),ji(!0),dt.current=null):Ri(K=>K+1)},N),()=>{dt.current&&(clearTimeout(dt.current),dt.current=null)}},[Bi,Ve,_]),L.useEffect(()=>{if(Ue.current)try{dr.current==="user"&&(Ue.current.pause(),Ue.current.currentTime=0,Dn(!1))}catch{}dr.current=null;try{ll.current&&typeof ll.current.scrollTo=="function"&&ll.current.scrollTo({top:0,behavior:"smooth"})}catch{}},[Ve]),L.useEffect(()=>()=>{try{dt.current&&clearTimeout(dt.current)}catch{}},[]),L.useEffect(()=>{try{const k=_&&_.length>0&&_[Ve]?_[Ve]:null}catch{}},[_,Ve]),L.useEffect(()=>{ol(!1)},[Ve]);const jf=async()=>{if(n.trim()){X(!0);try{try{const N=Ht()||{},K=N&&N.fileId?N.fileId:null,$=N&&N.folderId?N.folderId:null,ne=N.fileName||`script-${new Date().toISOString().replace(/[:.]/g,"-")}.fountain`;if(K){console.log("Saving to existing Drive file",K);const se=await yA(K,n);console.log("Saved script to Drive (updated):",se);const et={...N,fileId:se.id,fileName:se.name,file:se};try{Pn(et)}catch{}v(et);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:et}))}catch{}const mn={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(mn)),d(!0),w(new Date);return}if(x&&$){console.log("Creating new Drive file in folder",$);const se=await gA($,ne,n);console.log("Saved script to Drive (created):",se);const et={...N,fileId:se.id,fileName:se.name,file:se};try{Pn(et)}catch{}v(et);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:et}))}catch{}const mn={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(mn)),d(!0),w(new Date);return}}catch(N){console.error("GDrive save attempt failed",N)}const k={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(k)),d(!0),w(new Date)}finally{X(!1)}}},h1=async()=>{try{if(!await dA())return}catch(k){console.error("Folder pick failed",k),alert("Could not open folder picker. Check console for details.")}},f1=async()=>{try{const k=Ht(),N=k&&k.folderId?k.folderId:null;if(!N){alert("No Drive folder selected. Use Change Folder first.");return}Y(!0),Ft(k&&k.folderName?k.folderName:null),W(!0);const $=(await pA(N)||[]).filter(ne=>ne&&(ne.mimeType==="application/octet-stream"||ne.mimeType==="text/plain"));$.sort((ne,se)=>{const et=ne&&ne.modifiedTime?new Date(ne.modifiedTime).getTime():0;return(se&&se.modifiedTime?new Date(se.modifiedTime).getTime():0)-et}),ke($)}catch(k){console.error("openGDriveLoad failed",k),alert("Could not list files from Drive. Check console for details.")}finally{W(!1)}},d1=()=>{const k=localStorage.getItem("fountain-script");if(k)try{const N=JSON.parse(k);r(N.content),Ne(N.content),w(new Date(N.savedAt))}catch(N){console.error("Error loading saved script:",N)}},p1=()=>{localStorage.removeItem("fountain-script"),d(!1),w(null),r(Cu),Ne(Cu)},m1=async()=>{try{await navigator.clipboard.writeText(n)}catch{const N=document.createElement("textarea");N.value=n,document.body.appendChild(N),N.select(),document.execCommand("copy"),document.body.removeChild(N)}},g1=async()=>{try{const k=await navigator.clipboard.readText();r(k),Ne(k)}catch(k){console.error("Error pasting from clipboard:",k)}},y1=()=>{r(""),Ne("");try{b.current&&b.current.focus&&b.current.focus()}catch{}},v1=L.useCallback(k=>{const N=D.current;if(h(k),A.current&&N.length>0){let K=null;for(let $=N.length-1;$>=0;$--)if(N[$].index<=k){K=N[$];break}if(K){const $=A.current.querySelector(`[data-line-id="${K.id}"]`);if($){const ne=A.current,se=ne.getBoundingClientRect(),et=$.getBoundingClientRect(),mn=et.top-se.top,Fi=se.height,k1=et.height,S1=ne.scrollTop+mn-Fi/2+k1/2;ne.scrollTo({top:S1,behavior:"smooth"})}}}},[]),w1=L.useCallback(k=>{b.current&&b.current.scrollToLine&&b.current.scrollToLine(k)},[]);L.useEffect(()=>{const k=N=>{N.key==="Escape"&&(i?s(!1):l&&o(!1))};if(i||l)return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[i,l]),L.useEffect(()=>{const k=()=>{U(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",k),()=>document.removeEventListener("fullscreenchange",k)},[]);const x1=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),U(!1)):z.current&&z.current.requestFullscreen?(await z.current.requestFullscreen(),U(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),U(!0))}catch(k){console.error("Fullscreen toggle failed",k)}};return m.jsxs("div",{className:"fountain-app",ref:z,children:[t&&m.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),m.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"×"})]}),m.jsxs("div",{className:"modal-body",children:[m.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),m.jsxs("p",{style:{marginTop:"1rem"},children:[m.jsx("strong",{children:"How to:"}),' open your browser menu (⋮) and choose "Desktop site" or "Request desktop site".']})]}),m.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:m.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"Got it"})})]})}),m.jsxs("div",{className:"persistence-toolbar",children:[m.jsxs("div",{className:"toolbar-group",children:[x?m.jsxs(m.Fragment,{children:[m.jsxs("button",{className:"toolbar-btn",onClick:h1,title:"Change Drive folder",children:[m.jsx("i",{className:"fas fa-folder-open"})," Change Folder"]}),m.jsxs("button",{className:`toolbar-btn ${!n.trim()||!C||V?"disabled":""}`,onClick:jf,disabled:!n.trim()||!C||V,title:V?"Saving...":"Save to Google Drive",children:[m.jsx("i",{className:`${V?"fas fa-spinner fa-spin":"fab fa-google-drive"}`}),V?"Saving...":"GDrive Save"]}),m.jsxs("button",{className:`toolbar-btn ${!n.trim()||!C?"disabled":""}`,onClick:()=>alert("GDrive Save As — not implemented yet"),disabled:!n.trim()||!C,title:"Save as to Google Drive",children:[m.jsx("i",{className:"fas fa-file-export"})," GDrive Save As"]}),m.jsxs("button",{className:`toolbar-btn ${C?"":"disabled"}`,onClick:f1,disabled:!C,title:"Load from Google Drive",children:[m.jsx("i",{className:"fas fa-download"})," GDrive Load"]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("button",{className:`toolbar-btn ${!n.trim()||V?"disabled":""}`,onClick:jf,disabled:!n.trim()||V,title:V?"Saving...":"Save current script to browser storage",children:[m.jsx("i",{className:`fas ${V?"fa-spinner fa-spin":"fa-save"}`}),V?"Saving...":"Save"]}),m.jsxs("button",{className:`toolbar-btn ${f?"":"disabled"}`,onClick:d1,disabled:!f,title:g?`Load saved script (${g.toLocaleDateString()} ${g.toLocaleTimeString()})`:"Load saved script",children:[m.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),m.jsxs("button",{className:"toolbar-btn",onClick:m1,title:"Copy editor contents to clipboard",children:[m.jsx("i",{className:"fas fa-copy"}),"Copy"]}),m.jsxs("button",{className:"toolbar-btn",onClick:g1,title:"Paste from clipboard to editor",children:[m.jsx("i",{className:"fas fa-paste"}),"Paste"]})]}),!x&&m.jsxs("button",{className:`toolbar-btn danger ${n.trim()?"":"disabled"}`,onClick:y1,disabled:!n.trim(),title:"Clear editor contents",children:[m.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),x?m.jsx("div",{style:{fontSize:12,color:"#f5f5f5"},children:S&&S.folderName?m.jsxs("div",{children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Folder:"})," ",S.folderName,m.jsx("a",{href:"#",onClick:k=>{k.preventDefault();try{uA(),v({}),window.dispatchEvent(new CustomEvent("fountain:drive:cleared")),console.log("App: cleared drive state")}catch(N){console.error("App: failed to clear drive state",N)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:"Clear"})]}),S&&S.fileName?m.jsxs("div",{style:{marginTop:4},children:[m.jsxs("span",{style:{fontSize:12,color:"#ddd"},children:[m.jsx("strong",{children:"File:"})," ",S.fileName]}),m.jsx("a",{href:"#",onClick:k=>{k.preventDefault();try{const N={...Ht(),fileId:void 0,fileName:void 0,file:void 0};Pn(N),v(N),window.dispatchEvent(new CustomEvent("fountain:drive:fileCleared"))}catch(N){console.error("App: failed to clear file selection",N)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:"Clear file"})]}):null]}):"No folder selected"}):m.jsxs("button",{className:`toolbar-btn danger ${f?"":"disabled"}`,onClick:p1,disabled:!f,title:"Clear saved script from storage",children:[m.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),m.jsx("div",{className:"toolbar-divider"}),m.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>s(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[m.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),m.jsxs("button",{className:`toolbar-btn character-btn ${pe.length===0?"disabled":""}`,onClick:()=>pe.length>0&&o(!0),title:pe.length>0?"Character List":"No characters found",disabled:pe.length===0,children:[m.jsx("i",{className:"fas fa-user"}),"Characters",pe.length>0&&m.jsx("span",{className:"character-count-badge",children:pe.length})]})]}),g&&m.jsxs("div",{className:"last-saved",children:["Last saved: ",g.toLocaleDateString()," at ",g.toLocaleTimeString()]})]}),m.jsx("div",{className:"mobile-view-toggle",children:m.jsx("div",{className:"tabs is-centered",children:m.jsxs("ul",{children:[m.jsx("li",{className:a==="edit"?"is-active":"",children:m.jsxs("a",{onClick:()=>u("edit"),children:[m.jsx("span",{className:"icon is-small",children:m.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),m.jsx("span",{children:"Edit"})]})}),m.jsx("li",{className:a==="preview"?"is-active":"",children:m.jsxs("a",{onClick:()=>u("preview"),children:[m.jsx("span",{className:"icon is-small",children:m.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),m.jsx("span",{children:"Preview"})]})})]})})}),m.jsxs("div",{className:"editor-layout",children:[m.jsx("button",{className:`toolbar-btn fullscreen-btn ${B?"is-active":""}`,onClick:x1,title:B?"Exit fullscreen":"Enter fullscreen","aria-label":B?"Exit fullscreen":"Enter fullscreen",children:m.jsx("i",{className:`fas ${B?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),m.jsxs("div",{className:"columns is-gapless",children:[m.jsx("div",{className:`column is-half-desktop ${a==="preview"?"mobile-hidden":""}`,children:m.jsxs("div",{className:"box editor-box",children:[m.jsx("h3",{className:"title is-6",children:"Editor"}),m.jsx(s1,{ref:b,value:n,onChange:l1,onCursorChange:v1,placeholder:"Type your fountain screenplay here..."})]})}),m.jsx("div",{className:`column is-half-desktop ${a==="edit"?"mobile-hidden":""}`,children:m.jsxs("div",{className:"box preview-box",children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[m.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview:"}),m.jsxs("div",{className:"pane-toggle",style:{display:"flex"},children:[m.jsx("button",{className:`toolbar-btn pane-toggle-btn ${Ii==="screenplay"?"is-active":""}`,onClick:()=>Lf("screenplay"),"aria-pressed":Ii==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),m.jsx("button",{className:`toolbar-btn pane-toggle-btn ${Ii==="player"?"is-active":""}`,onClick:()=>Lf("player"),"aria-pressed":Ii==="player",title:"Show media player",children:"Player"})]})]}),m.jsx("div",{})]}),Ii==="screenplay"?m.jsx("div",{className:"preview-content",ref:A,children:Q.length===0?m.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):Q.map(k=>m.jsx("div",{className:`preview-line ${k.className||""} ${k.index===c?"current-line":""}`,"data-type":k.type,"data-line-id":k.id,"data-line-index":k.index,onClick:()=>w1(k.index),style:{cursor:"pointer"},children:k.type==="image"||k.type==="audio"||k.type==="title_page"||k.type==="page_break"||k.type==="page_number"?m.jsx("div",{dangerouslySetInnerHTML:{__html:k.text}}):k.text||" "},k.id))}):m.jsxs("div",{className:"media-player",ref:ll,style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const k=_&&_.length>0?_[Ve]||_[0]:null,N=k&&typeof k.duration=="number"?k.duration:null,K=_&&_.length?_.length:0,$=k&&k.title?String(k.title):"";let ne="untitled";return $&&$.trim()&&(ne=$.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),ne||(ne="untitled")),m.jsxs("div",{className:"player-header",style:{marginBottom:"0.5rem",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[m.jsxs("div",{className:"panel-title-wrapper",style:{position:"relative",display:"inline-block"},children:[m.jsx("div",{className:"panel-title",style:{fontSize:"1.05rem",fontWeight:700},onMouseEnter:()=>ol(!0),onMouseLeave:()=>ol(!1),onClick:()=>ol(se=>!se),"aria-haspopup":"true","aria-expanded":If,children:ne}),k&&k.nesting&&If?m.jsxs("div",{className:"panel-nesting-tooltip",role:"tooltip",children:[k.nesting.act?m.jsxs("div",{children:[m.jsx("strong",{children:"Act:"})," ",k.nesting.act]}):null,k.nesting.scene?m.jsxs("div",{children:[m.jsx("strong",{children:"Scene:"})," ",k.nesting.scene]}):null,k.nesting.sequence?m.jsxs("div",{children:[m.jsx("strong",{children:"Sequence:"})," ",k.nesting.sequence]}):null,!k.nesting.act&&!k.nesting.sequence&&!k.nesting.scene?m.jsx("div",{style:{color:"#999"},children:"No nesting"}):null]}):null]}),m.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${Ve+1} / ${K})`})]}),m.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:m.jsxs("div",{style:{color:"#999"},children:["lines ",k&&typeof k.startLine=="number"?k.startLine:"?","–",k&&typeof k.endLine=="number"?k.endLine:"?"]})})]}),m.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[m.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[m.jsx("span",{style:{fontSize:"0.95rem"},children:"⏱"}),N?`${N}s`:"n/a"]}),m.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:c1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏹"}),m.jsxs("button",{className:`toolbar-btn ${Bi?"is-active":""}`,title:"Play","aria-label":"Play",onClick:a1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[Bi?m.jsx("span",{className:"playing-indicator","aria-hidden":"true"}):null,"▶︎"]}),m.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:u1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏸"}),m.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:o1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏮"}),m.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:Bf,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏭"})]})]}),Bi&&(()=>{const se=_&&_.length>0?_[Ve]||_[0]:null,et=se&&typeof se.duration=="number"?se.duration:null,mn=Math.max(1e3,typeof et=="number"?et*1e3:3e3);return m.jsx("div",{className:"player-header-progress-wrapper",style:{position:"relative"},children:m.jsx("div",{className:"player-progress",style:{animationDuration:`${mn}ms`},"aria-hidden":"true"},`player-progress-${Ve}-${mn}`)})})()]})})(),(()=>{if(Rf)return m.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:m.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#000",aspectRatio:"16/9"}})});const k=_&&_.length>0?_[Ve]||_[0]:null,N=k&&k.imageUrl?k.imageUrl:null;return m.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:N?m.jsx("img",{src:N,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):m.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:m.jsx("span",{children:"No image"})})})})(),(()=>{const k=_&&_.length>0?_[Ve]||_[0]:null,N=k&&k.audioUrl?k.audioUrl:null;return m.jsx("div",{style:{marginBottom:"0.75rem"},children:N?m.jsx("audio",{ref:Ue,controls:!0,src:N,style:{width:"100%"}}):m.jsx("audio",{ref:Ue,controls:!0,disabled:!0,style:{width:"100%"}})})})(),m.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!_||_.length===0?m.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const k=_&&_.length>0?_[Ve]||_[0]:null;return m.jsx("div",{children:m.jsx("div",{style:{padding:"0.5rem"},children:m.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:k&&k.blocks&&k.blocks.length>0?k.blocks.map(N=>m.jsx("div",{className:`preview-line ${N.className||""}`,dangerouslySetInnerHTML:{__html:N.text||" "}},N.id)):k&&k.snippet?k.snippet.split(/\r?\n/).map((N,K)=>m.jsx("div",{style:{whiteSpace:"pre-wrap"},children:N||" "},K)):m.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),i&&m.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Fountain.ext Format Reference"}),m.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:"×"})]}),m.jsxs("div",{className:"modal-body",children:[m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Title Page"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",m.jsx("br",{}),"Credit: Written by",m.jsx("br",{}),"Author: John Dope",m.jsx("br",{}),"Authors: John Dope and Jane Smith",m.jsx("br",{}),"Source: Based on the novel by Famous Writer",m.jsx("br",{}),"Draft Date: October 4, 2025",m.jsx("br",{}),"Date: 10/04/2025",m.jsx("br",{}),"Contact:",m.jsx("br",{}),"    John Dope",m.jsx("br",{}),"    555-123-4567",m.jsx("br",{}),"    john@example.com",m.jsx("br",{}),"    ",m.jsx("br",{}),"    Literary Agent",m.jsx("br",{}),"    Agency Name",m.jsx("br",{}),"    agent@agency.com",m.jsx("br",{}),"Notes: This is a sample script",m.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),m.jsx("p",{children:'Title page elements appear at the top of your script. All are optional. Use "Author" for single writer, "Authors" for multiple. Contact can be multi-line with indentation. End title page with === (page break).'})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Scene Headings"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["EXT. PARKING LOT - DAY",m.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",m.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),m.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Characters & Dialogue"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["MENTOR",m.jsx("br",{}),"Welcome to the team!",m.jsx("br",{}),m.jsx("br",{}),"@MENTOR",m.jsx("br",{}),"(power user syntax)",m.jsx("br",{}),m.jsx("br",{}),"USER #1",m.jsx("br",{}),"Thanks for having me.",m.jsx("br",{}),m.jsx("br",{}),"BOB O'SHAUNNESSY",m.jsx("br",{}),"(whispering)",m.jsx("br",{}),"This is a parenthetical."]}),m.jsx("p",{children:'Characters are ALL CAPS. Use @ for power user syntax or mixed-case names like "@John Doe". Names with @ in front will be counted as characters. Parentheticals go under character names.'})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Dual Dialogue"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["ALICE^",m.jsx("br",{}),"BOB^",m.jsx("br",{}),"CHARLIE^",m.jsx("br",{}),"I can't believe it!",m.jsx("br",{}),m.jsx("br",{}),"CHARLIE ^",m.jsx("br",{}),"DAVE ^",m.jsx("br",{}),"(disgusted)",m.jsx("br",{}),"Eew. no it's nooot!",m.jsx("br",{}),m.jsx("br",{})]}),m.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Action Lines"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["Bob walks into the room and looks around nervously.",m.jsx("br",{}),m.jsx("br",{}),"The computer screen flickers to life."]}),m.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Transitions"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["FADE IN:",m.jsx("br",{}),"CUT TO:",m.jsx("br",{}),"FADE TO BLACK.",m.jsx("br",{}),"> CUT TO BLACK."]}),m.jsx("p",{children:"Transitions control scene changes. Use > for power user syntax."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Centered Text"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:[">INTERMISSION<",m.jsx("br",{}),">THE END<"]}),m.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["# Act I",m.jsx("br",{}),"## Scene 1: The Beginning",m.jsx("br",{}),"### Sequence A: Setup",m.jsx("br",{}),"#### Panel 1",m.jsx("br",{}),"02:30",m.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",m.jsx("br",{}),"[a]https://example.com/dialogue.mp3",m.jsx("br",{}),m.jsx("br",{}),"#### Panel 2",m.jsx("br",{}),"01:15",m.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),m.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Notes & Comments"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["[[This is a note for the writer]]",m.jsx("br",{}),m.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),m.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Special Elements"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["= Synopsis: Brief scene description",m.jsx("br",{}),m.jsx("br",{}),"===",m.jsx("br",{}),"(Page Break)",m.jsx("br",{}),m.jsx("br",{}),"~Lyrics:",m.jsx("br",{}),'~"Happy birthday to you"',m.jsx("br",{}),'~"Happy birthday to you"']}),m.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),H&&m.jsx("div",{className:"modal-overlay",onClick:()=>Y(!1),children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Open .fountain from Drive"}),m.jsx("button",{className:"modal-close",onClick:()=>Y(!1),children:"×"})]}),Ze&&m.jsxs("div",{style:{padding:"0 16px 8px 16px",color:"#cbd5e1",fontSize:13},children:["Listing files from: ",m.jsx("strong",{style:{color:"#e2e8f0"},children:Ze})]}),m.jsx("div",{className:"modal-body",children:P?m.jsx("div",{children:"Loading..."}):m.jsx("div",{children:ie&&ie.length>0?m.jsx("ul",{children:ie.map(k=>m.jsx("li",{style:{padding:"6px 0"},children:m.jsxs("a",{href:"#",onClick:async N=>{N.preventDefault();try{const K=await mA(k.id);r(K);try{Ne(K)}catch($){console.error("processText failed",$)}try{const ne={...Ht()||{},fileId:k.id,fileName:k.name,file:k};try{console.log("App: before persist, localStorage=",localStorage.getItem("fountain:driveState"))}catch{}Pn(ne);try{console.log("App: after persist, localStorage=",localStorage.getItem("fountain:driveState"))}catch{}v(ne);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:k}))}catch{}}catch($){console.error("Failed to persist selected file",$)}Y(!1)}catch(K){console.error("Failed to load file from Drive",K),alert("Could not load file from Drive. Check console for details.")}},children:[m.jsx("span",{style:{display:"inline-block",minWidth:240},children:k.name}),m.jsx("span",{style:{marginLeft:8,color:"#9ca3af",fontSize:12},children:k.modifiedTime?new Date(k.modifiedTime).toLocaleString():"unknown"})]})},k.id))}):m.jsx("div",{children:"No .fountain files found in this folder."})})}),m.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:m.jsx("button",{className:"toolbar-btn",onClick:()=>Y(!1),children:"Close"})})]})}),l&&m.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:m.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Character List"}),m.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:"×"})]}),m.jsx("div",{className:"modal-body",children:pe.length===0?m.jsx("p",{children:"No characters found in the script."}):m.jsx("div",{className:"character-list",children:pe.map(k=>m.jsxs("div",{className:"character-item",children:[m.jsx("div",{className:"character-name",children:k}),m.jsxs("div",{className:"character-count",children:[Le.get(k)||0," dialogue lines"]})]},k))})})]})})]})}bu.createRoot(document.getElementById("root")).render(m.jsx(z1.StrictMode,{children:m.jsx(kA,{})}));
