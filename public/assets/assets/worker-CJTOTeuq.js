(function(){"use strict";function r(c,e,s){const t=c.trim();if(!t)return{type:"blank",className:"blank-line"};if(/^(INT\.|EXT\.|EST\.|I\/E\.|\.)/i.test(t))return{type:"scene",className:"scene-heading"};if(/^(FADE IN:|FADE OUT\.|CUT TO:|DISSOLVE TO:|SMASH CUT TO:)/.test(t)||/TO:$/.test(t))return{type:"transition",className:"transition"};if(/^[A-Z][A-Z\s]*(\(.*\))?$/.test(t)&&t.length<50){const n=s[e+1];if(n&&n.trim())return{type:"character",className:"character",speaker:t}}if(/^\(.*\)$/.test(t))return{type:"parenthetical",className:"parenthetical"};const a=s[e-1];return a&&r(a,e-1,s).type==="character"?{type:"dialogue",className:"dialogue"}:{type:"action",className:"action"}}function i(c){const e=c.split(`
`);return e.map((t,a)=>{const n=r(t,a,e);return{id:`line-${a}`,text:t,index:a,type:n.type,className:n.className,speaker:n.speaker||null}})}self.onmessage=function(c){const{type:e,text:s}=c.data;if(e==="process"){const t=i(s);self.postMessage({type:"result",blocks:t})}}})();
