import{B as Vt,p as Ra,a as L1}from"./chunk-B8u9Xqmg.js";function R1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Em={exports:{}},ia={},Tm={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xs=Symbol.for("react.element"),I1=Symbol.for("react.portal"),j1=Symbol.for("react.fragment"),B1=Symbol.for("react.strict_mode"),F1=Symbol.for("react.profiler"),_1=Symbol.for("react.provider"),z1=Symbol.for("react.context"),H1=Symbol.for("react.forward_ref"),W1=Symbol.for("react.suspense"),V1=Symbol.for("react.memo"),U1=Symbol.for("react.lazy"),Uf=Symbol.iterator;function $1(t){return t===null||typeof t!="object"?null:(t=Uf&&t[Uf]||t["@@iterator"],typeof t=="function"?t:null)}var Mm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nm=Object.assign,Dm={};function Pi(t,e,n){this.props=t,this.context=e,this.refs=Dm,this.updater=n||Mm}Pi.prototype.isReactComponent={};Pi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Om(){}Om.prototype=Pi.prototype;function ph(t,e,n){this.props=t,this.context=e,this.refs=Dm,this.updater=n||Mm}var mh=ph.prototype=new Om;mh.constructor=ph;Nm(mh,Pi.prototype);mh.isPureReactComponent=!0;var $f=Array.isArray,Pm=Object.prototype.hasOwnProperty,gh={current:null},Lm={key:!0,ref:!0,__self:!0,__source:!0};function Rm(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)Pm.call(e,r)&&!Lm.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Xs,type:t,key:s,ref:l,props:i,_owner:gh.current}}function K1(t,e){return{$$typeof:Xs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xs}function G1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Kf=/\/+/g;function Ia(t,e){return typeof t=="object"&&t!==null&&t.key!=null?G1(""+t.key):e.toString(36)}function Ql(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Xs:case I1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+Ia(l,0):r,$f(i)?(n="",t!=null&&(n=t.replace(Kf,"$&/")+"/"),Ql(i,e,n,"",function(u){return u})):i!=null&&(yh(i)&&(i=K1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Kf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",$f(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+Ia(s,o);l+=Ql(s,e,n,a,i)}else if(a=$1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+Ia(s,o++),l+=Ql(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function dl(t,e,n){if(t==null)return t;var r=[],i=0;return Ql(t,r,"","",function(s){return e.call(n,s,i++)}),r}function q1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lt={current:null},Jl={transition:null},Y1={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Jl,ReactCurrentOwner:gh};function Im(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:dl,forEach:function(t,e,n){dl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dl(t,function(){e++}),e},toArray:function(t){return dl(t,function(e){return e})||[]},only:function(t){if(!yh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=Pi;q.Fragment=j1;q.Profiler=F1;q.PureComponent=ph;q.StrictMode=B1;q.Suspense=W1;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y1;q.act=Im;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Nm({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=gh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)Pm.call(e,a)&&!Lm.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Xs,type:t.type,key:i,ref:s,props:r,_owner:l}};q.createContext=function(t){return t={$$typeof:z1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_1,_context:t},t.Consumer=t};q.createElement=Rm;q.createFactory=function(t){var e=Rm.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:H1,render:t}};q.isValidElement=yh;q.lazy=function(t){return{$$typeof:U1,_payload:{_status:-1,_result:t},_init:q1}};q.memo=function(t,e){return{$$typeof:V1,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=Jl.transition;Jl.transition={};try{t()}finally{Jl.transition=e}};q.unstable_act=Im;q.useCallback=function(t,e){return lt.current.useCallback(t,e)};q.useContext=function(t){return lt.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return lt.current.useDeferredValue(t)};q.useEffect=function(t,e){return lt.current.useEffect(t,e)};q.useId=function(){return lt.current.useId()};q.useImperativeHandle=function(t,e,n){return lt.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return lt.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return lt.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return lt.current.useMemo(t,e)};q.useReducer=function(t,e,n){return lt.current.useReducer(t,e,n)};q.useRef=function(t){return lt.current.useRef(t)};q.useState=function(t){return lt.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return lt.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return lt.current.useTransition()};q.version="18.3.1";Tm.exports=q;var L=Tm.exports;const Q1=R1(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1=L,X1=Symbol.for("react.element"),Z1=Symbol.for("react.fragment"),ex=Object.prototype.hasOwnProperty,tx=J1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nx={key:!0,ref:!0,__self:!0,__source:!0};function jm(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)ex.call(e,r)&&!nx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:X1,type:t,key:s,ref:l,props:i,_owner:tx.current}}ia.Fragment=Z1;ia.jsx=jm;ia.jsxs=jm;Em.exports=ia;var d=Em.exports,Du={},Bm={exports:{}},Mt={},Fm={exports:{}},_m={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,U){var $=P.length;P.push(U);e:for(;0<$;){var X=$-1>>>1,Z=P[X];if(0<i(Z,U))P[X]=U,P[$]=Z,$=X;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var U=P[0],$=P.pop();if($!==U){P[0]=$;e:for(var X=0,Z=P.length,Oe=Z>>>1;X<Oe;){var ee=2*(X+1)-1,gt=P[ee],ae=ee+1,Dt=P[ae];if(0>i(gt,$))ae<Z&&0>i(Dt,gt)?(P[X]=Dt,P[ae]=$,X=ae):(P[X]=gt,P[ee]=$,X=ee);else if(ae<Z&&0>i(Dt,$))P[X]=Dt,P[ae]=$,X=ae;else break e}}return U}function i(P,U){var $=P.sortIndex-U.sortIndex;return $!==0?$:P.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],c=1,h=null,f=3,p=!1,g=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=P)r(u),U.sortIndex=U.expirationTime,e(a,U);else break;U=n(u)}}function S(P){if(v=!1,x(P),!g)if(n(a)!==null)g=!0,at(C);else{var U=n(u);U!==null&&et(S,U.startTime-P)}}function C(P,U){g=!1,v&&(v=!1,m(D),D=-1),p=!0;var $=f;try{for(x(U),h=n(a);h!==null&&(!(h.expirationTime>U)||P&&!H());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var Z=X(h.expirationTime<=U);U=t.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(a)&&r(a),x(U)}else r(a);h=n(a)}if(h!==null)var Oe=!0;else{var ee=n(u);ee!==null&&et(S,ee.startTime-U),Oe=!1}return Oe}finally{h=null,f=$,p=!1}}var A=!1,b=null,D=-1,V=5,j=-1;function H(){return!(t.unstable_now()-j<V)}function W(){if(b!==null){var P=t.unstable_now();j=P;var U=!0;try{U=b(!0,P)}finally{U?J():(A=!1,b=null)}}else A=!1}var J;if(typeof y=="function")J=function(){y(W)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ge=ie.port2;ie.port1.onmessage=W,J=function(){ge.postMessage(null)}}else J=function(){k(W,0)};function at(P){b=P,A||(A=!0,J())}function et(P,U){D=k(function(){P(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,at(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var $=f;f=U;try{return P()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,U){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var $=f;f=P;try{return U()}finally{f=$}},t.unstable_scheduleCallback=function(P,U,$){var X=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?X+$:X):$=X,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=$+Z,P={id:c++,callback:U,priorityLevel:P,startTime:$,expirationTime:Z,sortIndex:-1},$>X?(P.sortIndex=$,e(u,P),n(a)===null&&P===n(u)&&(v?(m(D),D=-1):v=!0,et(S,$-X))):(P.sortIndex=Z,e(a,P),g||p||(g=!0,at(C))),P},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(P){var U=f;return function(){var $=f;f=U;try{return P.apply(this,arguments)}finally{f=$}}}})(_m);Fm.exports=_m;var rx=Fm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix=L,At=rx;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zm=new Set,bs={};function zr(t,e){vi(t,e),vi(t+"Capture",e)}function vi(t,e){for(bs[t]=e,t=0;t<e.length;t++)zm.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ou=Object.prototype.hasOwnProperty,sx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gf={},qf={};function lx(t){return Ou.call(qf,t)?!0:Ou.call(Gf,t)?!1:sx.test(t)?qf[t]=!0:(Gf[t]=!0,!1)}function ox(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ax(t,e,n,r){if(e===null||typeof e>"u"||ox(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ot(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ve[t]=new ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ve[e]=new ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ve[t]=new ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ve[t]=new ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ve[t]=new ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ve[t]=new ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ve[t]=new ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ve[t]=new ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ve[t]=new ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var vh=/[\-:]([a-z])/g;function xh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vh,xh);Ve[e]=new ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vh,xh);Ve[e]=new ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vh,xh);Ve[e]=new ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ve[t]=new ot(t,1,!1,t.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ve[t]=new ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function wh(t,e,n,r){var i=Ve.hasOwnProperty(e)?Ve[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ax(e,n,i,r)&&(n=null),r||i===null?lx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pn=ix.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),Gr=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),kh=Symbol.for("react.strict_mode"),Pu=Symbol.for("react.profiler"),Hm=Symbol.for("react.provider"),Wm=Symbol.for("react.context"),Sh=Symbol.for("react.forward_ref"),Lu=Symbol.for("react.suspense"),Ru=Symbol.for("react.suspense_list"),Ch=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),Vm=Symbol.for("react.offscreen"),Yf=Symbol.iterator;function Wi(t){return t===null||typeof t!="object"?null:(t=Yf&&t[Yf]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,ja;function ts(t){if(ja===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ja=e&&e[1]||""}return`
`+ja+t}var Ba=!1;function Fa(t,e){if(!t||Ba)return"";Ba=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{Ba=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ts(t):""}function ux(t){switch(t.tag){case 5:return ts(t.type);case 16:return ts("Lazy");case 13:return ts("Suspense");case 19:return ts("SuspenseList");case 0:case 2:case 15:return t=Fa(t.type,!1),t;case 11:return t=Fa(t.type.render,!1),t;case 1:return t=Fa(t.type,!0),t;default:return""}}function Iu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qr:return"Fragment";case Gr:return"Portal";case Pu:return"Profiler";case kh:return"StrictMode";case Lu:return"Suspense";case Ru:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Wm:return(t.displayName||"Context")+".Consumer";case Hm:return(t._context.displayName||"Context")+".Provider";case Sh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ch:return e=t.displayName||null,e!==null?e:Iu(t.type)||"Memo";case jn:e=t._payload,t=t._init;try{return Iu(t(e))}catch{}}return null}function cx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Iu(e);case 8:return e===kh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Um(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hx(t){var e=Um(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ml(t){t._valueTracker||(t._valueTracker=hx(t))}function $m(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Um(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function go(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ju(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Km(t,e){e=e.checked,e!=null&&wh(t,"checked",e,!1)}function Bu(t,e){Km(t,e);var n=ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fu(t,e.type,ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fu(t,e,n){(e!=="number"||go(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ns=Array.isArray;function ai(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ir(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function _u(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(ns(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ir(n)}}function Gm(t,e){var n=ir(e.value),r=ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gl,Ym=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function As(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var as={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fx=["Webkit","ms","Moz","O"];Object.keys(as).forEach(function(t){fx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),as[e]=as[t]})});function Qm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||as.hasOwnProperty(t)&&as[t]?(""+e).trim():e+"px"}function Jm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Qm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var dx=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hu(t,e){if(e){if(dx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Wu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vu=null;function bh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uu=null,ui=null,ci=null;function ed(t){if(t=tl(t)){if(typeof Uu!="function")throw Error(M(280));var e=t.stateNode;e&&(e=ua(e),Uu(t.stateNode,t.type,e))}}function Xm(t){ui?ci?ci.push(t):ci=[t]:ui=t}function Zm(){if(ui){var t=ui,e=ci;if(ci=ui=null,ed(t),e)for(t=0;t<e.length;t++)ed(e[t])}}function eg(t,e){return t(e)}function tg(){}var _a=!1;function ng(t,e,n){if(_a)return t(e,n);_a=!0;try{return eg(t,e,n)}finally{_a=!1,(ui!==null||ci!==null)&&(tg(),Zm())}}function Es(t,e){var n=t.stateNode;if(n===null)return null;var r=ua(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var $u=!1;if(Tn)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){$u=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{$u=!1}function px(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var us=!1,yo=null,vo=!1,Ku=null,mx={onError:function(t){us=!0,yo=t}};function gx(t,e,n,r,i,s,l,o,a){us=!1,yo=null,px.apply(mx,arguments)}function yx(t,e,n,r,i,s,l,o,a){if(gx.apply(this,arguments),us){if(us){var u=yo;us=!1,yo=null}else throw Error(M(198));vo||(vo=!0,Ku=u)}}function Hr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function rg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function td(t){if(Hr(t)!==t)throw Error(M(188))}function vx(t){var e=t.alternate;if(!e){if(e=Hr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return td(i),t;if(s===r)return td(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function ig(t){return t=vx(t),t!==null?sg(t):null}function sg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sg(t);if(e!==null)return e;t=t.sibling}return null}var lg=At.unstable_scheduleCallback,nd=At.unstable_cancelCallback,xx=At.unstable_shouldYield,wx=At.unstable_requestPaint,be=At.unstable_now,kx=At.unstable_getCurrentPriorityLevel,Ah=At.unstable_ImmediatePriority,og=At.unstable_UserBlockingPriority,xo=At.unstable_NormalPriority,Sx=At.unstable_LowPriority,ag=At.unstable_IdlePriority,sa=null,mn=null;function Cx(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(sa,t,void 0,(t.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:Ex,bx=Math.log,Ax=Math.LN2;function Ex(t){return t>>>=0,t===0?32:31-(bx(t)/Ax|0)|0}var yl=64,vl=4194304;function rs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=rs(o):(s&=l,s!==0&&(r=rs(s)))}else l=n&~i,l!==0?r=rs(l):s!==0&&(r=rs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yt(e),i=1<<n,r|=t[n],e&=~i;return r}function Tx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Yt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=Tx(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Gu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ug(){var t=yl;return yl<<=1,!(yl&4194240)&&(yl=64),t}function za(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yt(e),t[e]=n}function Nx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Yt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Eh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var oe=0;function cg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hg,Th,fg,dg,pg,qu=!1,xl=[],Yn=null,Qn=null,Jn=null,Ts=new Map,Ms=new Map,Hn=[],Dx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rd(t,e){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Ts.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(e.pointerId)}}function Ui(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=tl(e),e!==null&&Th(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ox(t,e,n,r,i){switch(e){case"focusin":return Yn=Ui(Yn,t,e,n,r,i),!0;case"dragenter":return Qn=Ui(Qn,t,e,n,r,i),!0;case"mouseover":return Jn=Ui(Jn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ts.set(s,Ui(Ts.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ms.set(s,Ui(Ms.get(s)||null,t,e,n,r,i)),!0}return!1}function mg(t){var e=kr(t.target);if(e!==null){var n=Hr(e);if(n!==null){if(e=n.tag,e===13){if(e=rg(n),e!==null){t.blockedOn=e,pg(t.priority,function(){fg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vu=r,n.target.dispatchEvent(r),Vu=null}else return e=tl(n),e!==null&&Th(e),t.blockedOn=n,!1;e.shift()}return!0}function id(t,e,n){Xl(t)&&n.delete(e)}function Px(){qu=!1,Yn!==null&&Xl(Yn)&&(Yn=null),Qn!==null&&Xl(Qn)&&(Qn=null),Jn!==null&&Xl(Jn)&&(Jn=null),Ts.forEach(id),Ms.forEach(id)}function $i(t,e){t.blockedOn===e&&(t.blockedOn=null,qu||(qu=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,Px)))}function Ns(t){function e(i){return $i(i,t)}if(0<xl.length){$i(xl[0],t);for(var n=1;n<xl.length;n++){var r=xl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yn!==null&&$i(Yn,t),Qn!==null&&$i(Qn,t),Jn!==null&&$i(Jn,t),Ts.forEach(e),Ms.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)mg(n),n.blockedOn===null&&Hn.shift()}var hi=Pn.ReactCurrentBatchConfig,ko=!0;function Lx(t,e,n,r){var i=oe,s=hi.transition;hi.transition=null;try{oe=1,Mh(t,e,n,r)}finally{oe=i,hi.transition=s}}function Rx(t,e,n,r){var i=oe,s=hi.transition;hi.transition=null;try{oe=4,Mh(t,e,n,r)}finally{oe=i,hi.transition=s}}function Mh(t,e,n,r){if(ko){var i=Yu(t,e,n,r);if(i===null)Qa(t,e,r,So,n),rd(t,r);else if(Ox(i,t,e,n,r))r.stopPropagation();else if(rd(t,r),e&4&&-1<Dx.indexOf(t)){for(;i!==null;){var s=tl(i);if(s!==null&&hg(s),s=Yu(t,e,n,r),s===null&&Qa(t,e,r,So,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Qa(t,e,r,null,n)}}var So=null;function Yu(t,e,n,r){if(So=null,t=bh(r),t=kr(t),t!==null)if(e=Hr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=rg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return So=t,null}function gg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kx()){case Ah:return 1;case og:return 4;case xo:case Sx:return 16;case ag:return 536870912;default:return 16}default:return 16}}var Un=null,Nh=null,Zl=null;function yg(){if(Zl)return Zl;var t,e=Nh,n=e.length,r,i="value"in Un?Un.value:Un.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Zl=i.slice(t,1<r?1-r:void 0)}function eo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wl(){return!0}function sd(){return!1}function Nt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wl:sd,this.isPropagationStopped=sd,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),e}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dh=Nt(Li),el=ke({},Li,{view:0,detail:0}),Ix=Nt(el),Ha,Wa,Ki,la=ke({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ki&&(Ki&&t.type==="mousemove"?(Ha=t.screenX-Ki.screenX,Wa=t.screenY-Ki.screenY):Wa=Ha=0,Ki=t),Ha)},movementY:function(t){return"movementY"in t?t.movementY:Wa}}),ld=Nt(la),jx=ke({},la,{dataTransfer:0}),Bx=Nt(jx),Fx=ke({},el,{relatedTarget:0}),Va=Nt(Fx),_x=ke({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),zx=Nt(_x),Hx=ke({},Li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wx=Nt(Hx),Vx=ke({},Li,{data:0}),od=Nt(Vx),Ux={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$x={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kx[t])?!!e[t]:!1}function Oh(){return Gx}var qx=ke({},el,{key:function(t){if(t.key){var e=Ux[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=eo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$x[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oh,charCode:function(t){return t.type==="keypress"?eo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?eo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yx=Nt(qx),Qx=ke({},la,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=Nt(Qx),Jx=ke({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oh}),Xx=Nt(Jx),Zx=ke({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),ew=Nt(Zx),tw=ke({},la,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nw=Nt(tw),rw=[9,13,27,32],Ph=Tn&&"CompositionEvent"in window,cs=null;Tn&&"documentMode"in document&&(cs=document.documentMode);var iw=Tn&&"TextEvent"in window&&!cs,vg=Tn&&(!Ph||cs&&8<cs&&11>=cs),ud=" ",cd=!1;function xg(t,e){switch(t){case"keyup":return rw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yr=!1;function sw(t,e){switch(t){case"compositionend":return wg(e);case"keypress":return e.which!==32?null:(cd=!0,ud);case"textInput":return t=e.data,t===ud&&cd?null:t;default:return null}}function lw(t,e){if(Yr)return t==="compositionend"||!Ph&&xg(t,e)?(t=yg(),Zl=Nh=Un=null,Yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vg&&e.locale!=="ko"?null:e.data;default:return null}}var ow={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ow[t.type]:e==="textarea"}function kg(t,e,n,r){Xm(r),e=Co(e,"onChange"),0<e.length&&(n=new Dh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hs=null,Ds=null;function aw(t){Pg(t,0)}function oa(t){var e=Xr(t);if($m(e))return t}function uw(t,e){if(t==="change")return e}var Sg=!1;if(Tn){var Ua;if(Tn){var $a="oninput"in document;if(!$a){var fd=document.createElement("div");fd.setAttribute("oninput","return;"),$a=typeof fd.oninput=="function"}Ua=$a}else Ua=!1;Sg=Ua&&(!document.documentMode||9<document.documentMode)}function dd(){hs&&(hs.detachEvent("onpropertychange",Cg),Ds=hs=null)}function Cg(t){if(t.propertyName==="value"&&oa(Ds)){var e=[];kg(e,Ds,t,bh(t)),ng(aw,e)}}function cw(t,e,n){t==="focusin"?(dd(),hs=e,Ds=n,hs.attachEvent("onpropertychange",Cg)):t==="focusout"&&dd()}function hw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oa(Ds)}function fw(t,e){if(t==="click")return oa(e)}function dw(t,e){if(t==="input"||t==="change")return oa(e)}function pw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jt=typeof Object.is=="function"?Object.is:pw;function Os(t,e){if(Jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ou.call(e,i)||!Jt(t[i],e[i]))return!1}return!0}function pd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function md(t,e){var n=pd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pd(n)}}function bg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ag(){for(var t=window,e=go();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=go(t.document)}return e}function Lh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mw(t){var e=Ag(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bg(n.ownerDocument.documentElement,n)){if(r!==null&&Lh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=md(n,s);var l=md(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gw=Tn&&"documentMode"in document&&11>=document.documentMode,Qr=null,Qu=null,fs=null,Ju=!1;function gd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ju||Qr==null||Qr!==go(r)||(r=Qr,"selectionStart"in r&&Lh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fs&&Os(fs,r)||(fs=r,r=Co(Qu,"onSelect"),0<r.length&&(e=new Dh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qr)))}function kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jr={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},Ka={},Eg={};Tn&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function aa(t){if(Ka[t])return Ka[t];if(!Jr[t])return t;var e=Jr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Eg)return Ka[t]=e[n];return t}var Tg=aa("animationend"),Mg=aa("animationiteration"),Ng=aa("animationstart"),Dg=aa("transitionend"),Og=new Map,yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(t,e){Og.set(t,e),zr(e,[t])}for(var Ga=0;Ga<yd.length;Ga++){var qa=yd[Ga],yw=qa.toLowerCase(),vw=qa[0].toUpperCase()+qa.slice(1);fr(yw,"on"+vw)}fr(Tg,"onAnimationEnd");fr(Mg,"onAnimationIteration");fr(Ng,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(Dg,"onTransitionEnd");vi("onMouseEnter",["mouseout","mouseover"]);vi("onMouseLeave",["mouseout","mouseover"]);vi("onPointerEnter",["pointerout","pointerover"]);vi("onPointerLeave",["pointerout","pointerover"]);zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xw=new Set("cancel close invalid load scroll toggle".split(" ").concat(is));function vd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yx(r,e,void 0,t),t.currentTarget=null}function Pg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;vd(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;vd(i,o,u),s=a}}}if(vo)throw t=Ku,vo=!1,Ku=null,t}function de(t,e){var n=e[nc];n===void 0&&(n=e[nc]=new Set);var r=t+"__bubble";n.has(r)||(Lg(e,t,2,!1),n.add(r))}function Ya(t,e,n){var r=0;e&&(r|=4),Lg(n,t,r,e)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function Ps(t){if(!t[Sl]){t[Sl]=!0,zm.forEach(function(n){n!=="selectionchange"&&(xw.has(n)||Ya(n,!1,t),Ya(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sl]||(e[Sl]=!0,Ya("selectionchange",!1,e))}}function Lg(t,e,n,r){switch(gg(e)){case 1:var i=Lx;break;case 4:i=Rx;break;default:i=Mh}n=i.bind(null,e,n,t),i=void 0,!$u||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Qa(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=kr(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}ng(function(){var u=s,c=bh(n),h=[];e:{var f=Og.get(t);if(f!==void 0){var p=Dh,g=t;switch(t){case"keypress":if(eo(n)===0)break e;case"keydown":case"keyup":p=Yx;break;case"focusin":g="focus",p=Va;break;case"focusout":g="blur",p=Va;break;case"beforeblur":case"afterblur":p=Va;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Bx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Xx;break;case Tg:case Mg:case Ng:p=zx;break;case Dg:p=ew;break;case"scroll":p=Ix;break;case"wheel":p=nw;break;case"copy":case"cut":case"paste":p=Wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ad}var v=(e&4)!==0,k=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var y=u,x;y!==null;){x=y;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,m!==null&&(S=Es(y,m),S!=null&&v.push(Ls(y,S,x)))),k)break;y=y.return}0<v.length&&(f=new p(f,g,null,n,c),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Vu&&(g=n.relatedTarget||n.fromElement)&&(kr(g)||g[Mn]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?kr(g):null,g!==null&&(k=Hr(g),g!==k||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(v=ld,S="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=ad,S="onPointerLeave",m="onPointerEnter",y="pointer"),k=p==null?f:Xr(p),x=g==null?f:Xr(g),f=new v(S,y+"leave",p,n,c),f.target=k,f.relatedTarget=x,S=null,kr(c)===u&&(v=new v(m,y+"enter",g,n,c),v.target=x,v.relatedTarget=k,S=v),k=S,p&&g)t:{for(v=p,m=g,y=0,x=v;x;x=Wr(x))y++;for(x=0,S=m;S;S=Wr(S))x++;for(;0<y-x;)v=Wr(v),y--;for(;0<x-y;)m=Wr(m),x--;for(;y--;){if(v===m||m!==null&&v===m.alternate)break t;v=Wr(v),m=Wr(m)}v=null}else v=null;p!==null&&xd(h,f,p,v,!1),g!==null&&k!==null&&xd(h,k,g,v,!0)}}e:{if(f=u?Xr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=uw;else if(hd(f))if(Sg)C=dw;else{C=hw;var A=cw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=fw);if(C&&(C=C(t,u))){kg(h,C,n,c);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&Fu(f,"number",f.value)}switch(A=u?Xr(u):window,t){case"focusin":(hd(A)||A.contentEditable==="true")&&(Qr=A,Qu=u,fs=null);break;case"focusout":fs=Qu=Qr=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,gd(h,n,c);break;case"selectionchange":if(gw)break;case"keydown":case"keyup":gd(h,n,c)}var b;if(Ph)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Yr?xg(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(vg&&n.locale!=="ko"&&(Yr||D!=="onCompositionStart"?D==="onCompositionEnd"&&Yr&&(b=yg()):(Un=c,Nh="value"in Un?Un.value:Un.textContent,Yr=!0)),A=Co(u,D),0<A.length&&(D=new od(D,t,null,n,c),h.push({event:D,listeners:A}),b?D.data=b:(b=wg(n),b!==null&&(D.data=b)))),(b=iw?sw(t,n):lw(t,n))&&(u=Co(u,"onBeforeInput"),0<u.length&&(c=new od("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=b))}Pg(h,e)})}function Ls(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Co(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Es(t,n),s!=null&&r.unshift(Ls(t,s,i)),s=Es(t,e),s!=null&&r.push(Ls(t,s,i))),t=t.return}return r}function Wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xd(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=Es(n,s),a!=null&&l.unshift(Ls(n,a,o))):i||(a=Es(n,s),a!=null&&l.push(Ls(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var ww=/\r\n?/g,kw=/\u0000|\uFFFD/g;function wd(t){return(typeof t=="string"?t:""+t).replace(ww,`
`).replace(kw,"")}function Cl(t,e,n){if(e=wd(e),wd(t)!==e&&n)throw Error(M(425))}function bo(){}var Xu=null,Zu=null;function ec(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tc=typeof setTimeout=="function"?setTimeout:void 0,Sw=typeof clearTimeout=="function"?clearTimeout:void 0,kd=typeof Promise=="function"?Promise:void 0,Cw=typeof queueMicrotask=="function"?queueMicrotask:typeof kd<"u"?function(t){return kd.resolve(null).then(t).catch(bw)}:tc;function bw(t){setTimeout(function(){throw t})}function Ja(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ns(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ns(e)}function Xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ri=Math.random().toString(36).slice(2),cn="__reactFiber$"+Ri,Rs="__reactProps$"+Ri,Mn="__reactContainer$"+Ri,nc="__reactEvents$"+Ri,Aw="__reactListeners$"+Ri,Ew="__reactHandles$"+Ri;function kr(t){var e=t[cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mn]||n[cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sd(t);t!==null;){if(n=t[cn])return n;t=Sd(t)}return e}t=n,n=t.parentNode}return null}function tl(t){return t=t[cn]||t[Mn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function ua(t){return t[Rs]||null}var rc=[],Zr=-1;function dr(t){return{current:t}}function me(t){0>Zr||(t.current=rc[Zr],rc[Zr]=null,Zr--)}function he(t,e){Zr++,rc[Zr]=t.current,t.current=e}var sr={},Xe=dr(sr),ft=dr(!1),Nr=sr;function xi(t,e){var n=t.type.contextTypes;if(!n)return sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dt(t){return t=t.childContextTypes,t!=null}function Ao(){me(ft),me(Xe)}function Cd(t,e,n){if(Xe.current!==sr)throw Error(M(168));he(Xe,e),he(ft,n)}function Rg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,cx(t)||"Unknown",i));return ke({},n,r)}function Eo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sr,Nr=Xe.current,he(Xe,t),he(ft,ft.current),!0}function bd(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=Rg(t,e,Nr),r.__reactInternalMemoizedMergedChildContext=t,me(ft),me(Xe),he(Xe,t)):me(ft),he(ft,n)}var wn=null,ca=!1,Xa=!1;function Ig(t){wn===null?wn=[t]:wn.push(t)}function Tw(t){ca=!0,Ig(t)}function pr(){if(!Xa&&wn!==null){Xa=!0;var t=0,e=oe;try{var n=wn;for(oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wn=null,ca=!1}catch(i){throw wn!==null&&(wn=wn.slice(t+1)),lg(Ah,pr),i}finally{oe=e,Xa=!1}}return null}var ei=[],ti=0,To=null,Mo=0,Ot=[],Pt=0,Dr=null,Sn=1,Cn="";function vr(t,e){ei[ti++]=Mo,ei[ti++]=To,To=t,Mo=e}function jg(t,e,n){Ot[Pt++]=Sn,Ot[Pt++]=Cn,Ot[Pt++]=Dr,Dr=t;var r=Sn;t=Cn;var i=32-Yt(r)-1;r&=~(1<<i),n+=1;var s=32-Yt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Sn=1<<32-Yt(e)+i|n<<i|r,Cn=s+t}else Sn=1<<s|n<<i|r,Cn=t}function Rh(t){t.return!==null&&(vr(t,1),jg(t,1,0))}function Ih(t){for(;t===To;)To=ei[--ti],ei[ti]=null,Mo=ei[--ti],ei[ti]=null;for(;t===Dr;)Dr=Ot[--Pt],Ot[Pt]=null,Cn=Ot[--Pt],Ot[Pt]=null,Sn=Ot[--Pt],Ot[Pt]=null}var bt=null,Ct=null,ye=!1,Gt=null;function Bg(t,e){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ad(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bt=t,Ct=Xn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dr!==null?{id:Sn,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bt=t,Ct=null,!0):!1;default:return!1}}function ic(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sc(t){if(ye){var e=Ct;if(e){var n=e;if(!Ad(t,e)){if(ic(t))throw Error(M(418));e=Xn(n.nextSibling);var r=bt;e&&Ad(t,e)?Bg(r,n):(t.flags=t.flags&-4097|2,ye=!1,bt=t)}}else{if(ic(t))throw Error(M(418));t.flags=t.flags&-4097|2,ye=!1,bt=t}}}function Ed(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bt=t}function bl(t){if(t!==bt)return!1;if(!ye)return Ed(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ec(t.type,t.memoizedProps)),e&&(e=Ct)){if(ic(t))throw Fg(),Error(M(418));for(;e;)Bg(t,e),e=Xn(e.nextSibling)}if(Ed(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ct=Xn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=bt?Xn(t.stateNode.nextSibling):null;return!0}function Fg(){for(var t=Ct;t;)t=Xn(t.nextSibling)}function wi(){Ct=bt=null,ye=!1}function jh(t){Gt===null?Gt=[t]:Gt.push(t)}var Mw=Pn.ReactCurrentBatchConfig;function Gi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Al(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Td(t){var e=t._init;return e(t._payload)}function _g(t){function e(m,y){if(t){var x=m.deletions;x===null?(m.deletions=[y],m.flags|=16):x.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=nr(m,y),m.index=0,m.sibling=null,m}function s(m,y,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<y?(m.flags|=2,y):x):(m.flags|=2,y)):(m.flags|=1048576,y)}function l(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,y,x,S){return y===null||y.tag!==6?(y=su(x,m.mode,S),y.return=m,y):(y=i(y,x),y.return=m,y)}function a(m,y,x,S){var C=x.type;return C===qr?c(m,y,x.props.children,S,x.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===jn&&Td(C)===y.type)?(S=i(y,x.props),S.ref=Gi(m,y,x),S.return=m,S):(S=oo(x.type,x.key,x.props,null,m.mode,S),S.ref=Gi(m,y,x),S.return=m,S)}function u(m,y,x,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=lu(x,m.mode,S),y.return=m,y):(y=i(y,x.children||[]),y.return=m,y)}function c(m,y,x,S,C){return y===null||y.tag!==7?(y=Tr(x,m.mode,S,C),y.return=m,y):(y=i(y,x),y.return=m,y)}function h(m,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=su(""+y,m.mode,x),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:return x=oo(y.type,y.key,y.props,null,m.mode,x),x.ref=Gi(m,null,y),x.return=m,x;case Gr:return y=lu(y,m.mode,x),y.return=m,y;case jn:var S=y._init;return h(m,S(y._payload),x)}if(ns(y)||Wi(y))return y=Tr(y,m.mode,x,null),y.return=m,y;Al(m,y)}return null}function f(m,y,x,S){var C=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:o(m,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case pl:return x.key===C?a(m,y,x,S):null;case Gr:return x.key===C?u(m,y,x,S):null;case jn:return C=x._init,f(m,y,C(x._payload),S)}if(ns(x)||Wi(x))return C!==null?null:c(m,y,x,S,null);Al(m,x)}return null}function p(m,y,x,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(x)||null,o(y,m,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case pl:return m=m.get(S.key===null?x:S.key)||null,a(y,m,S,C);case Gr:return m=m.get(S.key===null?x:S.key)||null,u(y,m,S,C);case jn:var A=S._init;return p(m,y,x,A(S._payload),C)}if(ns(S)||Wi(S))return m=m.get(x)||null,c(y,m,S,C,null);Al(y,S)}return null}function g(m,y,x,S){for(var C=null,A=null,b=y,D=y=0,V=null;b!==null&&D<x.length;D++){b.index>D?(V=b,b=null):V=b.sibling;var j=f(m,b,x[D],S);if(j===null){b===null&&(b=V);break}t&&b&&j.alternate===null&&e(m,b),y=s(j,y,D),A===null?C=j:A.sibling=j,A=j,b=V}if(D===x.length)return n(m,b),ye&&vr(m,D),C;if(b===null){for(;D<x.length;D++)b=h(m,x[D],S),b!==null&&(y=s(b,y,D),A===null?C=b:A.sibling=b,A=b);return ye&&vr(m,D),C}for(b=r(m,b);D<x.length;D++)V=p(b,m,D,x[D],S),V!==null&&(t&&V.alternate!==null&&b.delete(V.key===null?D:V.key),y=s(V,y,D),A===null?C=V:A.sibling=V,A=V);return t&&b.forEach(function(H){return e(m,H)}),ye&&vr(m,D),C}function v(m,y,x,S){var C=Wi(x);if(typeof C!="function")throw Error(M(150));if(x=C.call(x),x==null)throw Error(M(151));for(var A=C=null,b=y,D=y=0,V=null,j=x.next();b!==null&&!j.done;D++,j=x.next()){b.index>D?(V=b,b=null):V=b.sibling;var H=f(m,b,j.value,S);if(H===null){b===null&&(b=V);break}t&&b&&H.alternate===null&&e(m,b),y=s(H,y,D),A===null?C=H:A.sibling=H,A=H,b=V}if(j.done)return n(m,b),ye&&vr(m,D),C;if(b===null){for(;!j.done;D++,j=x.next())j=h(m,j.value,S),j!==null&&(y=s(j,y,D),A===null?C=j:A.sibling=j,A=j);return ye&&vr(m,D),C}for(b=r(m,b);!j.done;D++,j=x.next())j=p(b,m,D,j.value,S),j!==null&&(t&&j.alternate!==null&&b.delete(j.key===null?D:j.key),y=s(j,y,D),A===null?C=j:A.sibling=j,A=j);return t&&b.forEach(function(W){return e(m,W)}),ye&&vr(m,D),C}function k(m,y,x,S){if(typeof x=="object"&&x!==null&&x.type===qr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case pl:e:{for(var C=x.key,A=y;A!==null;){if(A.key===C){if(C=x.type,C===qr){if(A.tag===7){n(m,A.sibling),y=i(A,x.props.children),y.return=m,m=y;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===jn&&Td(C)===A.type){n(m,A.sibling),y=i(A,x.props),y.ref=Gi(m,A,x),y.return=m,m=y;break e}n(m,A);break}else e(m,A);A=A.sibling}x.type===qr?(y=Tr(x.props.children,m.mode,S,x.key),y.return=m,m=y):(S=oo(x.type,x.key,x.props,null,m.mode,S),S.ref=Gi(m,y,x),S.return=m,m=S)}return l(m);case Gr:e:{for(A=x.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(m,y.sibling),y=i(y,x.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=lu(x,m.mode,S),y.return=m,m=y}return l(m);case jn:return A=x._init,k(m,y,A(x._payload),S)}if(ns(x))return g(m,y,x,S);if(Wi(x))return v(m,y,x,S);Al(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,x),y.return=m,m=y):(n(m,y),y=su(x,m.mode,S),y.return=m,m=y),l(m)):n(m,y)}return k}var ki=_g(!0),zg=_g(!1),No=dr(null),Do=null,ni=null,Bh=null;function Fh(){Bh=ni=Do=null}function _h(t){var e=No.current;me(No),t._currentValue=e}function lc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fi(t,e){Do=t,Bh=ni=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ht=!0),t.firstContext=null)}function _t(t){var e=t._currentValue;if(Bh!==t)if(t={context:t,memoizedValue:e,next:null},ni===null){if(Do===null)throw Error(M(308));ni=t,Do.dependencies={lanes:0,firstContext:t}}else ni=ni.next=t;return e}var Sr=null;function zh(t){Sr===null?Sr=[t]:Sr.push(t)}function Hg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,zh(e)):(n.next=i.next,i.next=n),e.interleaved=n,Nn(t,r)}function Nn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bn=!1;function Hh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Nn(t,n)}return i=r.interleaved,i===null?(e.next=e,zh(r)):(e.next=i.next,i.next=e),r.interleaved=e,Nn(t,n)}function to(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}function Md(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oo(t,e,n,r){var i=t.updateQueue;Bn=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==l&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;l=0,c=u=a=null,o=s;do{var f=o.lane,p=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,v=o;switch(f=e,p=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=ke({},h,f);break e;case 2:Bn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=p,a=h):c=c.next=p,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=h),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Pr|=l,t.lanes=l,t.memoizedState=h}}function Nd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var nl={},gn=dr(nl),Is=dr(nl),js=dr(nl);function Cr(t){if(t===nl)throw Error(M(174));return t}function Wh(t,e){switch(he(js,e),he(Is,t),he(gn,nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zu(e,t)}me(gn),he(gn,e)}function Si(){me(gn),me(Is),me(js)}function Vg(t){Cr(js.current);var e=Cr(gn.current),n=zu(e,t.type);e!==n&&(he(Is,t),he(gn,n))}function Vh(t){Is.current===t&&(me(gn),me(Is))}var ve=dr(0);function Po(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Za=[];function Uh(){for(var t=0;t<Za.length;t++)Za[t]._workInProgressVersionPrimary=null;Za.length=0}var no=Pn.ReactCurrentDispatcher,eu=Pn.ReactCurrentBatchConfig,Or=0,we=null,Me=null,Pe=null,Lo=!1,ds=!1,Bs=0,Nw=0;function Ke(){throw Error(M(321))}function $h(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jt(t[n],e[n]))return!1;return!0}function Kh(t,e,n,r,i,s){if(Or=s,we=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,no.current=t===null||t.memoizedState===null?Lw:Rw,t=n(r,i),ds){s=0;do{if(ds=!1,Bs=0,25<=s)throw Error(M(301));s+=1,Pe=Me=null,e.updateQueue=null,no.current=Iw,t=n(r,i)}while(ds)}if(no.current=Ro,e=Me!==null&&Me.next!==null,Or=0,Pe=Me=we=null,Lo=!1,e)throw Error(M(300));return t}function Gh(){var t=Bs!==0;return Bs=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?we.memoizedState=Pe=t:Pe=Pe.next=t,Pe}function zt(){if(Me===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=Pe===null?we.memoizedState:Pe.next;if(e!==null)Pe=e,Me=t;else{if(t===null)throw Error(M(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Pe===null?we.memoizedState=Pe=t:Pe=Pe.next=t}return Pe}function Fs(t,e){return typeof e=="function"?e(t):e}function tu(t){var e=zt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=Me,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var c=u.lane;if((Or&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=h,l=r):a=a.next=h,we.lanes|=c,Pr|=c}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,Jt(r,e.memoizedState)||(ht=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,we.lanes|=s,Pr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nu(t){var e=zt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);Jt(s,e.memoizedState)||(ht=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ug(){}function $g(t,e){var n=we,r=zt(),i=e(),s=!Jt(r.memoizedState,i);if(s&&(r.memoizedState=i,ht=!0),r=r.queue,qh(qg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pe!==null&&Pe.memoizedState.tag&1){if(n.flags|=2048,_s(9,Gg.bind(null,n,r,i,e),void 0,null),Re===null)throw Error(M(349));Or&30||Kg(n,e,i)}return i}function Kg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gg(t,e,n,r){e.value=n,e.getSnapshot=r,Yg(e)&&Qg(t)}function qg(t,e,n){return n(function(){Yg(e)&&Qg(t)})}function Yg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jt(t,n)}catch{return!0}}function Qg(t){var e=Nn(t,1);e!==null&&Qt(e,t,1,-1)}function Dd(t){var e=un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:t},e.queue=t,t=t.dispatch=Pw.bind(null,we,t),[e.memoizedState,t]}function _s(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Jg(){return zt().memoizedState}function ro(t,e,n,r){var i=un();we.flags|=t,i.memoizedState=_s(1|e,n,void 0,r===void 0?null:r)}function ha(t,e,n,r){var i=zt();r=r===void 0?null:r;var s=void 0;if(Me!==null){var l=Me.memoizedState;if(s=l.destroy,r!==null&&$h(r,l.deps)){i.memoizedState=_s(e,n,s,r);return}}we.flags|=t,i.memoizedState=_s(1|e,n,s,r)}function Od(t,e){return ro(8390656,8,t,e)}function qh(t,e){return ha(2048,8,t,e)}function Xg(t,e){return ha(4,2,t,e)}function Zg(t,e){return ha(4,4,t,e)}function e0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function t0(t,e,n){return n=n!=null?n.concat([t]):null,ha(4,4,e0.bind(null,e,t),n)}function Yh(){}function n0(t,e){var n=zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$h(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function r0(t,e){var n=zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$h(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function i0(t,e,n){return Or&21?(Jt(n,e)||(n=ug(),we.lanes|=n,Pr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ht=!0),t.memoizedState=n)}function Dw(t,e){var n=oe;oe=n!==0&&4>n?n:4,t(!0);var r=eu.transition;eu.transition={};try{t(!1),e()}finally{oe=n,eu.transition=r}}function s0(){return zt().memoizedState}function Ow(t,e,n){var r=tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},l0(t))o0(e,n);else if(n=Hg(t,e,n,r),n!==null){var i=it();Qt(n,t,r,i),a0(n,e,r)}}function Pw(t,e,n){var r=tr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(l0(t))o0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,Jt(o,l)){var a=e.interleaved;a===null?(i.next=i,zh(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Hg(t,e,i,r),n!==null&&(i=it(),Qt(n,t,r,i),a0(n,e,r))}}function l0(t){var e=t.alternate;return t===we||e!==null&&e===we}function o0(t,e){ds=Lo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function a0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eh(t,n)}}var Ro={readContext:_t,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},Lw={readContext:_t,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:_t,useEffect:Od,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ro(4194308,4,e0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ro(4194308,4,t,e)},useInsertionEffect:function(t,e){return ro(4,2,t,e)},useMemo:function(t,e){var n=un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ow.bind(null,we,t),[r.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:Dd,useDebugValue:Yh,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=Dd(!1),e=t[0];return t=Dw.bind(null,t[1]),un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=we,i=un();if(ye){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Re===null)throw Error(M(349));Or&30||Kg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Od(qg.bind(null,r,s,t),[t]),r.flags|=2048,_s(9,Gg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=un(),e=Re.identifierPrefix;if(ye){var n=Cn,r=Sn;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Nw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Rw={readContext:_t,useCallback:n0,useContext:_t,useEffect:qh,useImperativeHandle:t0,useInsertionEffect:Xg,useLayoutEffect:Zg,useMemo:r0,useReducer:tu,useRef:Jg,useState:function(){return tu(Fs)},useDebugValue:Yh,useDeferredValue:function(t){var e=zt();return i0(e,Me.memoizedState,t)},useTransition:function(){var t=tu(Fs)[0],e=zt().memoizedState;return[t,e]},useMutableSource:Ug,useSyncExternalStore:$g,useId:s0,unstable_isNewReconciler:!1},Iw={readContext:_t,useCallback:n0,useContext:_t,useEffect:qh,useImperativeHandle:t0,useInsertionEffect:Xg,useLayoutEffect:Zg,useMemo:r0,useReducer:nu,useRef:Jg,useState:function(){return nu(Fs)},useDebugValue:Yh,useDeferredValue:function(t){var e=zt();return Me===null?e.memoizedState=t:i0(e,Me.memoizedState,t)},useTransition:function(){var t=nu(Fs)[0],e=zt().memoizedState;return[t,e]},useMutableSource:Ug,useSyncExternalStore:$g,useId:s0,unstable_isNewReconciler:!1};function $t(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function oc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fa={isMounted:function(t){return(t=t._reactInternals)?Hr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=it(),i=tr(t),s=bn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Zn(t,s,i),e!==null&&(Qt(e,t,i,r),to(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=it(),i=tr(t),s=bn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Zn(t,s,i),e!==null&&(Qt(e,t,i,r),to(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=it(),r=tr(t),i=bn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Zn(t,i,r),e!==null&&(Qt(e,t,r,n),to(e,t,r))}};function Pd(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!Os(n,r)||!Os(i,s):!0}function u0(t,e,n){var r=!1,i=sr,s=e.contextType;return typeof s=="object"&&s!==null?s=_t(s):(i=dt(e)?Nr:Xe.current,r=e.contextTypes,s=(r=r!=null)?xi(t,i):sr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ld(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fa.enqueueReplaceState(e,e.state,null)}function ac(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Hh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=_t(s):(s=dt(e)?Nr:Xe.current,i.context=xi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(oc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fa.enqueueReplaceState(i,i.state,null),Oo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ci(t,e){try{var n="",r=e;do n+=ux(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ru(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jw=typeof WeakMap=="function"?WeakMap:Map;function c0(t,e,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jo||(jo=!0,xc=r),uc(t,e)},n}function h0(t,e,n){n=bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){uc(t,e),typeof r!="function"&&(er===null?er=new Set([this]):er.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Rd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Qw.bind(null,t,e,n),e.then(t,t))}function Id(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bn(-1,1),e.tag=2,Zn(n,e,1))),n.lanes|=1),t)}var Bw=Pn.ReactCurrentOwner,ht=!1;function rt(t,e,n,r){e.child=t===null?zg(e,null,n,r):ki(e,t.child,n,r)}function Bd(t,e,n,r,i){n=n.render;var s=e.ref;return fi(e,i),r=Kh(t,e,n,r,s,i),n=Gh(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dn(t,e,i)):(ye&&n&&Rh(e),e.flags|=1,rt(t,e,r,i),e.child)}function Fd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!rf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,f0(t,e,s,r,i)):(t=oo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:Os,n(l,r)&&t.ref===e.ref)return Dn(t,e,i)}return e.flags|=1,t=nr(s,r),t.ref=e.ref,t.return=e,e.child=t}function f0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Os(s,r)&&t.ref===e.ref)if(ht=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ht=!0);else return e.lanes=t.lanes,Dn(t,e,i)}return cc(t,e,n,r,i)}function d0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(ii,wt),wt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(ii,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,he(ii,wt),wt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,he(ii,wt),wt|=r;return rt(t,e,i,n),e.child}function p0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cc(t,e,n,r,i){var s=dt(n)?Nr:Xe.current;return s=xi(e,s),fi(e,i),n=Kh(t,e,n,r,s,i),r=Gh(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dn(t,e,i)):(ye&&r&&Rh(e),e.flags|=1,rt(t,e,n,i),e.child)}function _d(t,e,n,r,i){if(dt(n)){var s=!0;Eo(e)}else s=!1;if(fi(e,i),e.stateNode===null)io(t,e),u0(e,n,r),ac(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=_t(u):(u=dt(n)?Nr:Xe.current,u=xi(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&Ld(e,l,r,u),Bn=!1;var f=e.memoizedState;l.state=f,Oo(e,r,l,i),a=e.memoizedState,o!==r||f!==a||ft.current||Bn?(typeof c=="function"&&(oc(e,n,c,r),a=e.memoizedState),(o=Bn||Pd(e,n,o,r,f,a,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Wg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:$t(e.type,o),l.props=u,h=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=_t(a):(a=dt(n)?Nr:Xe.current,a=xi(e,a));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==a)&&Ld(e,l,r,a),Bn=!1,f=e.memoizedState,l.state=f,Oo(e,r,l,i);var g=e.memoizedState;o!==h||f!==g||ft.current||Bn?(typeof p=="function"&&(oc(e,n,p,r),g=e.memoizedState),(u=Bn||Pd(e,n,u,r,f,g,a)||!1)?(c||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,g,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,g,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),l.props=r,l.state=g,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return hc(t,e,n,r,s,i)}function hc(t,e,n,r,i,s){p0(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&bd(e,n,!1),Dn(t,e,s);r=e.stateNode,Bw.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=ki(e,t.child,null,s),e.child=ki(e,null,o,s)):rt(t,e,o,s),e.memoizedState=r.state,i&&bd(e,n,!0),e.child}function m0(t){var e=t.stateNode;e.pendingContext?Cd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cd(t,e.context,!1),Wh(t,e.containerInfo)}function zd(t,e,n,r,i){return wi(),jh(i),e.flags|=256,rt(t,e,n,r),e.child}var fc={dehydrated:null,treeContext:null,retryLane:0};function dc(t){return{baseLanes:t,cachePool:null,transitions:null}}function g0(t,e,n){var r=e.pendingProps,i=ve.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),he(ve,i&1),t===null)return sc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=ma(l,r,0,null),t=Tr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=dc(n),e.memoizedState=fc,t):Qh(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Fw(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=nr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=nr(o,s):(s=Tr(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?dc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=fc,r}return s=t.child,t=s.sibling,r=nr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qh(t,e){return e=ma({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function El(t,e,n,r){return r!==null&&jh(r),ki(e,t.child,null,n),t=Qh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Fw(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=ru(Error(M(422))),El(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ma({mode:"visible",children:r.children},i,0,null),s=Tr(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ki(e,t.child,null,l),e.child.memoizedState=dc(l),e.memoizedState=fc,s);if(!(e.mode&1))return El(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(M(419)),r=ru(s,r,void 0),El(t,e,l,r)}if(o=(l&t.childLanes)!==0,ht||o){if(r=Re,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Nn(t,i),Qt(r,t,i,-1))}return nf(),r=ru(Error(M(421))),El(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Jw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ct=Xn(i.nextSibling),bt=e,ye=!0,Gt=null,t!==null&&(Ot[Pt++]=Sn,Ot[Pt++]=Cn,Ot[Pt++]=Dr,Sn=t.id,Cn=t.overflow,Dr=e),e=Qh(e,r.children),e.flags|=4096,e)}function Hd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lc(t.return,e,n)}function iu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function y0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rt(t,e,r.children,n),r=ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hd(t,n,e);else if(t.tag===19)Hd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(ve,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Po(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),iu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Po(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}iu(e,!0,n,null,s);break;case"together":iu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function io(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _w(t,e,n){switch(e.tag){case 3:m0(e),wi();break;case 5:Vg(e);break;case 1:dt(e.type)&&Eo(e);break;case 4:Wh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;he(No,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?g0(t,e,n):(he(ve,ve.current&1),t=Dn(t,e,n),t!==null?t.sibling:null);he(ve,ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return y0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(ve,ve.current),r)break;return null;case 22:case 23:return e.lanes=0,d0(t,e,n)}return Dn(t,e,n)}var v0,pc,x0,w0;v0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pc=function(){};x0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Cr(gn.current);var s=null;switch(n){case"input":i=ju(t,i),r=ju(t,r),s=[];break;case"select":i=ke({},i,{value:void 0}),r=ke({},r,{value:void 0}),s=[];break;case"textarea":i=_u(t,i),r=_u(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bo)}Hu(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bs.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bs.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&de("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};w0=function(t,e,n,r){n!==r&&(e.flags|=4)};function qi(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zw(t,e,n){var r=e.pendingProps;switch(Ih(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return dt(e.type)&&Ao(),Ge(e),null;case 3:return r=e.stateNode,Si(),me(ft),me(Xe),Uh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gt!==null&&(Sc(Gt),Gt=null))),pc(t,e),Ge(e),null;case 5:Vh(e);var i=Cr(js.current);if(n=e.type,t!==null&&e.stateNode!=null)x0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ge(e),null}if(t=Cr(gn.current),bl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[cn]=e,r[Rs]=s,t=(e.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(i=0;i<is.length;i++)de(is[i],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":Qf(r,s),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},de("invalid",r);break;case"textarea":Xf(r,s),de("invalid",r)}Hu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Cl(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Cl(r.textContent,o,t),i=["children",""+o]):bs.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&de("scroll",r)}switch(n){case"input":ml(r),Jf(r,s,!0);break;case"textarea":ml(r),Zf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[cn]=e,t[Rs]=r,v0(t,e,!1,!1),e.stateNode=t;e:{switch(l=Wu(n,r),n){case"dialog":de("cancel",t),de("close",t),i=r;break;case"iframe":case"object":case"embed":de("load",t),i=r;break;case"video":case"audio":for(i=0;i<is.length;i++)de(is[i],t);i=r;break;case"source":de("error",t),i=r;break;case"img":case"image":case"link":de("error",t),de("load",t),i=r;break;case"details":de("toggle",t),i=r;break;case"input":Qf(t,r),i=ju(t,r),de("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ke({},r,{value:void 0}),de("invalid",t);break;case"textarea":Xf(t,r),i=_u(t,r),de("invalid",t);break;default:i=r}Hu(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?Jm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Ym(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&As(t,a):typeof a=="number"&&As(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bs.hasOwnProperty(s)?a!=null&&s==="onScroll"&&de("scroll",t):a!=null&&wh(t,s,a,l))}switch(n){case"input":ml(t),Jf(t,r,!1);break;case"textarea":ml(t),Zf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ir(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ai(t,!!r.multiple,s,!1):r.defaultValue!=null&&ai(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=bo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ge(e),null;case 6:if(t&&e.stateNode!=null)w0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=Cr(js.current),Cr(gn.current),bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[cn]=e,(s=r.nodeValue!==n)&&(t=bt,t!==null))switch(t.tag){case 3:Cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cn]=e,e.stateNode=r}return Ge(e),null;case 13:if(me(ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&Ct!==null&&e.mode&1&&!(e.flags&128))Fg(),wi(),e.flags|=98560,s=!1;else if(s=bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[cn]=e}else wi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),s=!1}else Gt!==null&&(Sc(Gt),Gt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Ne===0&&(Ne=3):nf())),e.updateQueue!==null&&(e.flags|=4),Ge(e),null);case 4:return Si(),pc(t,e),t===null&&Ps(e.stateNode.containerInfo),Ge(e),null;case 10:return _h(e.type._context),Ge(e),null;case 17:return dt(e.type)&&Ao(),Ge(e),null;case 19:if(me(ve),s=e.memoizedState,s===null)return Ge(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)qi(s,!1);else{if(Ne!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Po(t),l!==null){for(e.flags|=128,qi(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(ve,ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&be()>bi&&(e.flags|=128,r=!0,qi(s,!1),e.lanes=4194304)}else{if(!r)if(t=Po(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!ye)return Ge(e),null}else 2*be()-s.renderingStartTime>bi&&n!==1073741824&&(e.flags|=128,r=!0,qi(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=be(),e.sibling=null,n=ve.current,he(ve,r?n&1|2:n&1),e):(Ge(e),null);case 22:case 23:return tf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Hw(t,e){switch(Ih(e),e.tag){case 1:return dt(e.type)&&Ao(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Si(),me(ft),me(Xe),Uh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vh(e),null;case 13:if(me(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));wi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(ve),null;case 4:return Si(),null;case 10:return _h(e.type._context),null;case 22:case 23:return tf(),null;case 24:return null;default:return null}}var Tl=!1,Ye=!1,Ww=typeof WeakSet=="function"?WeakSet:Set,I=null;function ri(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(t,e,r)}else n.current=null}function mc(t,e,n){try{n()}catch(r){Se(t,e,r)}}var Wd=!1;function Vw(t,e){if(Xu=ko,t=Ag(),Lh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(o=l+i),h!==s||r!==0&&h.nodeType!==3||(a=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++c===r&&(a=l),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zu={focusedElem:t,selectionRange:n},ko=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,k=g.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:$t(e.type,v),k);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(S){Se(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return g=Wd,Wd=!1,g}function ps(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&mc(e,n,s)}i=i.next}while(i!==r)}}function da(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function k0(t){var e=t.alternate;e!==null&&(t.alternate=null,k0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cn],delete e[Rs],delete e[nc],delete e[Aw],delete e[Ew])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S0(t){return t.tag===5||t.tag===3||t.tag===4}function Vd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bo));else if(r!==4&&(t=t.child,t!==null))for(yc(t,e,n),t=t.sibling;t!==null;)yc(t,e,n),t=t.sibling}function vc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vc(t,e,n),t=t.sibling;t!==null;)vc(t,e,n),t=t.sibling}var Ie=null,Kt=!1;function In(t,e,n){for(n=n.child;n!==null;)C0(t,e,n),n=n.sibling}function C0(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(sa,n)}catch{}switch(n.tag){case 5:Ye||ri(n,e);case 6:var r=Ie,i=Kt;Ie=null,In(t,e,n),Ie=r,Kt=i,Ie!==null&&(Kt?(t=Ie,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ie.removeChild(n.stateNode));break;case 18:Ie!==null&&(Kt?(t=Ie,n=n.stateNode,t.nodeType===8?Ja(t.parentNode,n):t.nodeType===1&&Ja(t,n),Ns(t)):Ja(Ie,n.stateNode));break;case 4:r=Ie,i=Kt,Ie=n.stateNode.containerInfo,Kt=!0,In(t,e,n),Ie=r,Kt=i;break;case 0:case 11:case 14:case 15:if(!Ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&mc(n,e,l),i=i.next}while(i!==r)}In(t,e,n);break;case 1:if(!Ye&&(ri(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Se(n,e,o)}In(t,e,n);break;case 21:In(t,e,n);break;case 22:n.mode&1?(Ye=(r=Ye)||n.memoizedState!==null,In(t,e,n),Ye=r):In(t,e,n);break;default:In(t,e,n)}}function Ud(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ww),e.forEach(function(r){var i=Xw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ut(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ie=o.stateNode,Kt=!1;break e;case 3:Ie=o.stateNode.containerInfo,Kt=!0;break e;case 4:Ie=o.stateNode.containerInfo,Kt=!0;break e}o=o.return}if(Ie===null)throw Error(M(160));C0(s,l,i),Ie=null,Kt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){Se(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)b0(e,t),e=e.sibling}function b0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ut(e,t),rn(t),r&4){try{ps(3,t,t.return),da(3,t)}catch(v){Se(t,t.return,v)}try{ps(5,t,t.return)}catch(v){Se(t,t.return,v)}}break;case 1:Ut(e,t),rn(t),r&512&&n!==null&&ri(n,n.return);break;case 5:if(Ut(e,t),rn(t),r&512&&n!==null&&ri(n,n.return),t.flags&32){var i=t.stateNode;try{As(i,"")}catch(v){Se(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Km(i,s),Wu(o,l);var u=Wu(o,s);for(l=0;l<a.length;l+=2){var c=a[l],h=a[l+1];c==="style"?Jm(i,h):c==="dangerouslySetInnerHTML"?Ym(i,h):c==="children"?As(i,h):wh(i,c,h,u)}switch(o){case"input":Bu(i,s);break;case"textarea":Gm(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ai(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?ai(i,!!s.multiple,s.defaultValue,!0):ai(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rs]=s}catch(v){Se(t,t.return,v)}}break;case 6:if(Ut(e,t),rn(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Se(t,t.return,v)}}break;case 3:if(Ut(e,t),rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ns(e.containerInfo)}catch(v){Se(t,t.return,v)}break;case 4:Ut(e,t),rn(t);break;case 13:Ut(e,t),rn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zh=be())),r&4&&Ud(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ye=(u=Ye)||c,Ut(e,t),Ye=u):Ut(e,t),rn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(I=t,c=t.child;c!==null;){for(h=I=c;I!==null;){switch(f=I,p=f.child,f.tag){case 0:case 11:case 14:case 15:ps(4,f,f.return);break;case 1:ri(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Se(r,n,v)}}break;case 5:ri(f,f.return);break;case 22:if(f.memoizedState!==null){Kd(h);continue}}p!==null?(p.return=f,I=p):Kd(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=Qm("display",l))}catch(v){Se(t,t.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Se(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ut(e,t),rn(t),r&4&&Ud(t);break;case 21:break;default:Ut(e,t),rn(t)}}function rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(S0(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(As(i,""),r.flags&=-33);var s=Vd(t);vc(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=Vd(t);yc(t,o,l);break;default:throw Error(M(161))}}catch(a){Se(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Uw(t,e,n){I=t,A0(t)}function A0(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Tl;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Ye;o=Tl;var u=Ye;if(Tl=l,(Ye=a)&&!u)for(I=i;I!==null;)l=I,a=l.child,l.tag===22&&l.memoizedState!==null?Gd(i):a!==null?(a.return=l,I=a):Gd(i);for(;s!==null;)I=s,A0(s),s=s.sibling;I=i,Tl=o,Ye=u}$d(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):$d(t)}}function $d(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ye||da(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ye)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$t(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Nd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Nd(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Ns(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ye||e.flags&512&&gc(e)}catch(f){Se(e,e.return,f)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function Kd(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function Gd(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{da(4,e)}catch(a){Se(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Se(e,i,a)}}var s=e.return;try{gc(e)}catch(a){Se(e,s,a)}break;case 5:var l=e.return;try{gc(e)}catch(a){Se(e,l,a)}}}catch(a){Se(e,e.return,a)}if(e===t){I=null;break}var o=e.sibling;if(o!==null){o.return=e.return,I=o;break}I=e.return}}var $w=Math.ceil,Io=Pn.ReactCurrentDispatcher,Jh=Pn.ReactCurrentOwner,It=Pn.ReactCurrentBatchConfig,ne=0,Re=null,Te=null,We=0,wt=0,ii=dr(0),Ne=0,zs=null,Pr=0,pa=0,Xh=0,ms=null,ut=null,Zh=0,bi=1/0,xn=null,jo=!1,xc=null,er=null,Ml=!1,$n=null,Bo=0,gs=0,wc=null,so=-1,lo=0;function it(){return ne&6?be():so!==-1?so:so=be()}function tr(t){return t.mode&1?ne&2&&We!==0?We&-We:Mw.transition!==null?(lo===0&&(lo=ug()),lo):(t=oe,t!==0||(t=window.event,t=t===void 0?16:gg(t.type)),t):1}function Qt(t,e,n,r){if(50<gs)throw gs=0,wc=null,Error(M(185));Zs(t,n,r),(!(ne&2)||t!==Re)&&(t===Re&&(!(ne&2)&&(pa|=n),Ne===4&&Wn(t,We)),pt(t,r),n===1&&ne===0&&!(e.mode&1)&&(bi=be()+500,ca&&pr()))}function pt(t,e){var n=t.callbackNode;Mx(t,e);var r=wo(t,t===Re?We:0);if(r===0)n!==null&&nd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nd(n),e===1)t.tag===0?Tw(qd.bind(null,t)):Ig(qd.bind(null,t)),Cw(function(){!(ne&6)&&pr()}),n=null;else{switch(cg(r)){case 1:n=Ah;break;case 4:n=og;break;case 16:n=xo;break;case 536870912:n=ag;break;default:n=xo}n=L0(n,E0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function E0(t,e){if(so=-1,lo=0,ne&6)throw Error(M(327));var n=t.callbackNode;if(di()&&t.callbackNode!==n)return null;var r=wo(t,t===Re?We:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fo(t,r);else{e=r;var i=ne;ne|=2;var s=M0();(Re!==t||We!==e)&&(xn=null,bi=be()+500,Er(t,e));do try{qw();break}catch(o){T0(t,o)}while(!0);Fh(),Io.current=s,ne=i,Te!==null?e=0:(Re=null,We=0,e=Ne)}if(e!==0){if(e===2&&(i=Gu(t),i!==0&&(r=i,e=kc(t,i))),e===1)throw n=zs,Er(t,0),Wn(t,r),pt(t,be()),n;if(e===6)Wn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Kw(i)&&(e=Fo(t,r),e===2&&(s=Gu(t),s!==0&&(r=s,e=kc(t,s))),e===1))throw n=zs,Er(t,0),Wn(t,r),pt(t,be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:xr(t,ut,xn);break;case 3:if(Wn(t,r),(r&130023424)===r&&(e=Zh+500-be(),10<e)){if(wo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){it(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tc(xr.bind(null,t,ut,xn),e);break}xr(t,ut,xn);break;case 4:if(Wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Yt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$w(r/1960))-r,10<r){t.timeoutHandle=tc(xr.bind(null,t,ut,xn),r);break}xr(t,ut,xn);break;case 5:xr(t,ut,xn);break;default:throw Error(M(329))}}}return pt(t,be()),t.callbackNode===n?E0.bind(null,t):null}function kc(t,e){var n=ms;return t.current.memoizedState.isDehydrated&&(Er(t,e).flags|=256),t=Fo(t,e),t!==2&&(e=ut,ut=n,e!==null&&Sc(e)),t}function Sc(t){ut===null?ut=t:ut.push.apply(ut,t)}function Kw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~Xh,e&=~pa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yt(e),r=1<<n;t[n]=-1,e&=~r}}function qd(t){if(ne&6)throw Error(M(327));di();var e=wo(t,0);if(!(e&1))return pt(t,be()),null;var n=Fo(t,e);if(t.tag!==0&&n===2){var r=Gu(t);r!==0&&(e=r,n=kc(t,r))}if(n===1)throw n=zs,Er(t,0),Wn(t,e),pt(t,be()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xr(t,ut,xn),pt(t,be()),null}function ef(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(bi=be()+500,ca&&pr())}}function Lr(t){$n!==null&&$n.tag===0&&!(ne&6)&&di();var e=ne;ne|=1;var n=It.transition,r=oe;try{if(It.transition=null,oe=1,t)return t()}finally{oe=r,It.transition=n,ne=e,!(ne&6)&&pr()}}function tf(){wt=ii.current,me(ii)}function Er(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Sw(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(Ih(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ao();break;case 3:Si(),me(ft),me(Xe),Uh();break;case 5:Vh(r);break;case 4:Si();break;case 13:me(ve);break;case 19:me(ve);break;case 10:_h(r.type._context);break;case 22:case 23:tf()}n=n.return}if(Re=t,Te=t=nr(t.current,null),We=wt=e,Ne=0,zs=null,Xh=pa=Pr=0,ut=ms=null,Sr!==null){for(e=0;e<Sr.length;e++)if(n=Sr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}Sr=null}return t}function T0(t,e){do{var n=Te;try{if(Fh(),no.current=Ro,Lo){for(var r=we.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lo=!1}if(Or=0,Pe=Me=we=null,ds=!1,Bs=0,Jh.current=null,n===null||n.return===null){Ne=1,zs=e,Te=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=We,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Id(l);if(p!==null){p.flags&=-257,jd(p,l,o,s,e),p.mode&1&&Rd(s,u,e),e=p,a=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(a),e.updateQueue=v}else g.add(a);break e}else{if(!(e&1)){Rd(s,u,e),nf();break e}a=Error(M(426))}}else if(ye&&o.mode&1){var k=Id(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),jd(k,l,o,s,e),jh(Ci(a,o));break e}}s=a=Ci(a,o),Ne!==4&&(Ne=2),ms===null?ms=[s]:ms.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=c0(s,a,e);Md(s,m);break e;case 1:o=a;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(er===null||!er.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=h0(s,o,e);Md(s,S);break e}}s=s.return}while(s!==null)}D0(n)}catch(C){e=C,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function M0(){var t=Io.current;return Io.current=Ro,t===null?Ro:t}function nf(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Re===null||!(Pr&268435455)&&!(pa&268435455)||Wn(Re,We)}function Fo(t,e){var n=ne;ne|=2;var r=M0();(Re!==t||We!==e)&&(xn=null,Er(t,e));do try{Gw();break}catch(i){T0(t,i)}while(!0);if(Fh(),ne=n,Io.current=r,Te!==null)throw Error(M(261));return Re=null,We=0,Ne}function Gw(){for(;Te!==null;)N0(Te)}function qw(){for(;Te!==null&&!xx();)N0(Te)}function N0(t){var e=P0(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?D0(t):Te=e,Jh.current=null}function D0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Hw(n,e),n!==null){n.flags&=32767,Te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ne=6,Te=null;return}}else if(n=zw(n,e,wt),n!==null){Te=n;return}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);Ne===0&&(Ne=5)}function xr(t,e,n){var r=oe,i=It.transition;try{It.transition=null,oe=1,Yw(t,e,n,r)}finally{It.transition=i,oe=r}return null}function Yw(t,e,n,r){do di();while($n!==null);if(ne&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Nx(t,s),t===Re&&(Te=Re=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ml||(Ml=!0,L0(xo,function(){return di(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=It.transition,It.transition=null;var l=oe;oe=1;var o=ne;ne|=4,Jh.current=null,Vw(t,n),b0(n,t),mw(Zu),ko=!!Xu,Zu=Xu=null,t.current=n,Uw(n),wx(),ne=o,oe=l,It.transition=s}else t.current=n;if(Ml&&(Ml=!1,$n=t,Bo=i),s=t.pendingLanes,s===0&&(er=null),Cx(n.stateNode),pt(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jo)throw jo=!1,t=xc,xc=null,t;return Bo&1&&t.tag!==0&&di(),s=t.pendingLanes,s&1?t===wc?gs++:(gs=0,wc=t):gs=0,pr(),null}function di(){if($n!==null){var t=cg(Bo),e=It.transition,n=oe;try{if(It.transition=null,oe=16>t?16:t,$n===null)var r=!1;else{if(t=$n,$n=null,Bo=0,ne&6)throw Error(M(331));var i=ne;for(ne|=4,I=t.current;I!==null;){var s=I,l=s.child;if(I.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(I=u;I!==null;){var c=I;switch(c.tag){case 0:case 11:case 15:ps(8,c,s)}var h=c.child;if(h!==null)h.return=c,I=h;else for(;I!==null;){c=I;var f=c.sibling,p=c.return;if(k0(c),c===u){I=null;break}if(f!==null){f.return=p,I=f;break}I=p}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}I=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,I=l;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ps(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,I=m;break e}I=s.return}}var y=t.current;for(I=y;I!==null;){l=I;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,I=x;else e:for(l=y;I!==null;){if(o=I,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:da(9,o)}}catch(C){Se(o,o.return,C)}if(o===l){I=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,I=S;break e}I=o.return}}if(ne=i,pr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(sa,t)}catch{}r=!0}return r}finally{oe=n,It.transition=e}}return!1}function Yd(t,e,n){e=Ci(n,e),e=c0(t,e,1),t=Zn(t,e,1),e=it(),t!==null&&(Zs(t,1,e),pt(t,e))}function Se(t,e,n){if(t.tag===3)Yd(t,t,n);else for(;e!==null;){if(e.tag===3){Yd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(er===null||!er.has(r))){t=Ci(n,t),t=h0(e,t,1),e=Zn(e,t,1),t=it(),e!==null&&(Zs(e,1,t),pt(e,t));break}}e=e.return}}function Qw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=it(),t.pingedLanes|=t.suspendedLanes&n,Re===t&&(We&n)===n&&(Ne===4||Ne===3&&(We&130023424)===We&&500>be()-Zh?Er(t,0):Xh|=n),pt(t,e)}function O0(t,e){e===0&&(t.mode&1?(e=vl,vl<<=1,!(vl&130023424)&&(vl=4194304)):e=1);var n=it();t=Nn(t,e),t!==null&&(Zs(t,e,n),pt(t,n))}function Jw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),O0(t,n)}function Xw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),O0(t,n)}var P0;P0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ft.current)ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ht=!1,_w(t,e,n);ht=!!(t.flags&131072)}else ht=!1,ye&&e.flags&1048576&&jg(e,Mo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;io(t,e),t=e.pendingProps;var i=xi(e,Xe.current);fi(e,n),i=Kh(null,e,r,t,i,n);var s=Gh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dt(r)?(s=!0,Eo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hh(e),i.updater=fa,e.stateNode=i,i._reactInternals=e,ac(e,r,t,n),e=hc(null,e,r,!0,s,n)):(e.tag=0,ye&&s&&Rh(e),rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(io(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ek(r),t=$t(r,t),i){case 0:e=cc(null,e,r,t,n);break e;case 1:e=_d(null,e,r,t,n);break e;case 11:e=Bd(null,e,r,t,n);break e;case 14:e=Fd(null,e,r,$t(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$t(r,i),cc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$t(r,i),_d(t,e,r,i,n);case 3:e:{if(m0(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Wg(t,e),Oo(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ci(Error(M(423)),e),e=zd(t,e,r,n,i);break e}else if(r!==i){i=Ci(Error(M(424)),e),e=zd(t,e,r,n,i);break e}else for(Ct=Xn(e.stateNode.containerInfo.firstChild),bt=e,ye=!0,Gt=null,n=zg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wi(),r===i){e=Dn(t,e,n);break e}rt(t,e,r,n)}e=e.child}return e;case 5:return Vg(e),t===null&&sc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,ec(r,i)?l=null:s!==null&&ec(r,s)&&(e.flags|=32),p0(t,e),rt(t,e,l,n),e.child;case 6:return t===null&&sc(e),null;case 13:return g0(t,e,n);case 4:return Wh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ki(e,null,r,n):rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$t(r,i),Bd(t,e,r,i,n);case 7:return rt(t,e,e.pendingProps,n),e.child;case 8:return rt(t,e,e.pendingProps.children,n),e.child;case 12:return rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,he(No,r._currentValue),r._currentValue=l,s!==null)if(Jt(s.value,l)){if(s.children===i.children&&!ft.current){e=Dn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=bn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),lc(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),lc(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fi(e,n),i=_t(i),r=r(i),e.flags|=1,rt(t,e,r,n),e.child;case 14:return r=e.type,i=$t(r,e.pendingProps),i=$t(r.type,i),Fd(t,e,r,i,n);case 15:return f0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$t(r,i),io(t,e),e.tag=1,dt(r)?(t=!0,Eo(e)):t=!1,fi(e,n),u0(e,r,i),ac(e,r,i,n),hc(null,e,r,!0,t,n);case 19:return y0(t,e,n);case 22:return d0(t,e,n)}throw Error(M(156,e.tag))};function L0(t,e){return lg(t,e)}function Zw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,n,r){return new Zw(t,e,n,r)}function rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ek(t){if(typeof t=="function")return rf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sh)return 11;if(t===Ch)return 14}return 2}function nr(t,e){var n=t.alternate;return n===null?(n=Rt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oo(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")rf(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case qr:return Tr(n.children,i,s,e);case kh:l=8,i|=8;break;case Pu:return t=Rt(12,n,e,i|2),t.elementType=Pu,t.lanes=s,t;case Lu:return t=Rt(13,n,e,i),t.elementType=Lu,t.lanes=s,t;case Ru:return t=Rt(19,n,e,i),t.elementType=Ru,t.lanes=s,t;case Vm:return ma(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Hm:l=10;break e;case Wm:l=9;break e;case Sh:l=11;break e;case Ch:l=14;break e;case jn:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Rt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Tr(t,e,n,r){return t=Rt(7,t,r,e),t.lanes=n,t}function ma(t,e,n,r){return t=Rt(22,t,r,e),t.elementType=Vm,t.lanes=n,t.stateNode={isHidden:!1},t}function su(t,e,n){return t=Rt(6,t,null,e),t.lanes=n,t}function lu(t,e,n){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=za(0),this.expirationTimes=za(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=za(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sf(t,e,n,r,i,s,l,o,a){return t=new tk(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hh(s),t}function nk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function R0(t){if(!t)return sr;t=t._reactInternals;e:{if(Hr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(dt(n))return Rg(t,n,e)}return e}function I0(t,e,n,r,i,s,l,o,a){return t=sf(n,r,!0,t,i,s,l,o,a),t.context=R0(null),n=t.current,r=it(),i=tr(n),s=bn(r,i),s.callback=e??null,Zn(n,s,i),t.current.lanes=i,Zs(t,i,r),pt(t,r),t}function ga(t,e,n,r){var i=e.current,s=it(),l=tr(i);return n=R0(n),e.context===null?e.context=n:e.pendingContext=n,e=bn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zn(i,e,l),t!==null&&(Qt(t,i,l,s),to(t,i,l)),l}function _o(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lf(t,e){Qd(t,e),(t=t.alternate)&&Qd(t,e)}function rk(){return null}var j0=typeof reportError=="function"?reportError:function(t){console.error(t)};function of(t){this._internalRoot=t}ya.prototype.render=of.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));ga(t,e,null,null)};ya.prototype.unmount=of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lr(function(){ga(null,t,null,null)}),e[Mn]=null}};function ya(t){this._internalRoot=t}ya.prototype.unstable_scheduleHydration=function(t){if(t){var e=dg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&mg(t)}};function af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function va(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jd(){}function ik(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=_o(l);s.call(u)}}var l=I0(e,r,t,0,null,!1,!1,"",Jd);return t._reactRootContainer=l,t[Mn]=l.current,Ps(t.nodeType===8?t.parentNode:t),Lr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=_o(a);o.call(u)}}var a=sf(t,0,!1,null,null,!1,!1,"",Jd);return t._reactRootContainer=a,t[Mn]=a.current,Ps(t.nodeType===8?t.parentNode:t),Lr(function(){ga(e,a,n,r)}),a}function xa(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=_o(l);o.call(a)}}ga(e,l,t,i)}else l=ik(n,e,t,i,r);return _o(l)}hg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=rs(e.pendingLanes);n!==0&&(Eh(e,n|1),pt(e,be()),!(ne&6)&&(bi=be()+500,pr()))}break;case 13:Lr(function(){var r=Nn(t,1);if(r!==null){var i=it();Qt(r,t,1,i)}}),lf(t,1)}};Th=function(t){if(t.tag===13){var e=Nn(t,134217728);if(e!==null){var n=it();Qt(e,t,134217728,n)}lf(t,134217728)}};fg=function(t){if(t.tag===13){var e=tr(t),n=Nn(t,e);if(n!==null){var r=it();Qt(n,t,e,r)}lf(t,e)}};dg=function(){return oe};pg=function(t,e){var n=oe;try{return oe=t,e()}finally{oe=n}};Uu=function(t,e,n){switch(e){case"input":if(Bu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ua(r);if(!i)throw Error(M(90));$m(r),Bu(r,i)}}}break;case"textarea":Gm(t,n);break;case"select":e=n.value,e!=null&&ai(t,!!n.multiple,e,!1)}};eg=ef;tg=Lr;var sk={usingClientEntryPoint:!1,Events:[tl,Xr,ua,Xm,Zm,ef]},Yi={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lk={bundleType:Yi.bundleType,version:Yi.version,rendererPackageName:Yi.rendererPackageName,rendererConfig:Yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ig(t),t===null?null:t.stateNode},findFiberByHostInstance:Yi.findFiberByHostInstance||rk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nl.isDisabled&&Nl.supportsFiber)try{sa=Nl.inject(lk),mn=Nl}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sk;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!af(e))throw Error(M(200));return nk(t,e,null,n)};Mt.createRoot=function(t,e){if(!af(t))throw Error(M(299));var n=!1,r="",i=j0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sf(t,1,!1,null,null,n,!1,r,i),t[Mn]=e.current,Ps(t.nodeType===8?t.parentNode:t),new of(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=ig(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return Lr(t)};Mt.hydrate=function(t,e,n){if(!va(e))throw Error(M(200));return xa(null,t,e,!0,n)};Mt.hydrateRoot=function(t,e,n){if(!af(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=j0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=I0(e,null,t,1,n??null,i,!1,s,l),t[Mn]=e.current,Ps(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ya(e)};Mt.render=function(t,e,n){if(!va(e))throw Error(M(200));return xa(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!va(t))throw Error(M(40));return t._reactRootContainer?(Lr(function(){xa(null,null,t,!1,function(){t._reactRootContainer=null,t[Mn]=null})}),!0):!1};Mt.unstable_batchedUpdates=ef;Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!va(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return xa(t,e,n,!1,r)};Mt.version="18.3.1-next-f1338f8080-20240426";function B0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B0)}catch(t){console.error(t)}}B0(),Bm.exports=Mt;var ok=Bm.exports,Xd=ok;Du.createRoot=Xd.createRoot,Du.hydrateRoot=Xd.hydrateRoot;let Cc=[],F0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?F0:Cc).push(n=n+t[e])})();function ak(t){if(t<768)return!1;for(let e=0,n=Cc.length;;){let r=e+n>>1;if(t<Cc[r])n=r;else if(t>=F0[r])e=r+1;else return!0;if(e==n)return!1}}function Zd(t){return t>=127462&&t<=127487}const ep=8205;function uk(t,e,n=!0,r=!0){return(n?_0:ck)(t,e,r)}function _0(t,e,n){if(e==t.length)return e;e&&z0(t.charCodeAt(e))&&H0(t.charCodeAt(e-1))&&e--;let r=ou(t,e);for(e+=tp(r);e<t.length;){let i=ou(t,e);if(r==ep||i==ep||n&&ak(i))e+=tp(i),r=i;else if(Zd(i)){let s=0,l=e-2;for(;l>=0&&Zd(ou(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function ck(t,e,n){for(;e>0;){let r=_0(t,e-2,n);if(r<e)return r;e--}return 0}function ou(t,e){let n=t.charCodeAt(e);if(!H0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return z0(r)?(n-55296<<10)+(r-56320)+65536:n}function z0(t){return t>=56320&&t<57344}function H0(t){return t>=55296&&t<56320}function tp(t){return t<65536?1:2}class te{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=Ai(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),hn.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Ai(this,e,n);let r=[];return this.decompose(e,n,r,0),hn.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new ys(this),s=new ys(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new ys(this,e)}iterRange(e,n=this.length){return new W0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new V0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?te.empty:e.length<=32?new Ce(e):hn.from(Ce.split(e,[]))}}class Ce extends te{constructor(e,n=hk(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new fk(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Ce(np(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=ao(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new Ce(o,l.length+s.length));else{let a=o.length>>1;r.push(new Ce(o.slice(0,a)),new Ce(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Ce))return super.replace(e,n,r);[e,n]=Ai(this,e,n);let i=ao(this.text,ao(r.text,np(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Ce(i,s):hn.from(Ce.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=Ai(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Ce(r,i)),r=[],i=-1);return i>-1&&n.push(new Ce(r,i)),n}}class hn extends te{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=Ai(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new hn(c,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=Ai(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof hn))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let p of e)r+=p.lines;if(r<32){let p=[];for(let g of e)g.flatten(p);return new Ce(p,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,c=[];function h(p){let g;if(p.lines>s&&p instanceof hn)for(let v of p.children)h(v);else p.lines>l&&(a>l||!a)?(f(),o.push(p)):p instanceof Ce&&a&&(g=c[c.length-1])instanceof Ce&&p.lines+g.lines<=32?(a+=p.lines,u+=p.length+1,c[c.length-1]=new Ce(g.text.concat(p.text),g.length+1+p.length)):(a+p.lines>i&&f(),a+=p.lines,u+=p.length+1,c.push(p))}function f(){a!=0&&(o.push(c.length==1?c[0]:hn.from(c,u)),u=-1,a=c.length=0)}for(let p of e)h(p);return f(),o.length==1?o[0]:new hn(o,n)}}te.empty=new Ce([""],0);function hk(t){let e=-1;for(let n of t)e+=n.length+1;return e}function ao(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function np(t,e,n){return ao(t,[""],e,n)}class ys{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Ce?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof Ce?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Ce){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof Ce?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class W0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new ys(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class V0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(te.prototype[Symbol.iterator]=function(){return this.iter()},ys.prototype[Symbol.iterator]=W0.prototype[Symbol.iterator]=V0.prototype[Symbol.iterator]=function(){return this});class fk{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function Ai(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function ze(t,e,n=!0,r=!0){return uk(t,e,n,r)}function dk(t){return t>=56320&&t<57344}function pk(t){return t>=55296&&t<56320}function U0(t,e){let n=t.charCodeAt(e);if(!pk(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return dk(r)?(n-55296<<10)+(r-56320)+65536:n}function mk(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function $0(t){return t<65536?1:2}const bc=/\r\n?|\n/;var St=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(St||(St={}));class An{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){Ac(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new An(e)}composeDesc(e){return this.empty?e:e.empty?this:K0(this,e)}mapDesc(e,n=!1){return e.empty?this:Ec(this,e,n)}mapPos(e,n=-1,r=St.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=St.Simple&&u>=e&&(r==St.TrackDel&&i<e&&u>e||r==St.TrackBefore&&i<e||r==St.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new An(e)}static create(e){return new An(e)}}class Le extends An{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Ac(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return Ec(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(te.empty);r.push(l?e.slice(s,s+l):te.empty)}s+=l}return new Le(n,r)}compose(e){return this.empty?e:e.empty?this:K0(this,e,!0)}map(e,n=!1){return e.empty?this:Ec(this,e,n,!0)}iterChanges(e,n=!1){Ac(this,e,n)}get desc(){return An.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Hs(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-o);qe(i,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;qe(n,c,h),h>0&&Kn(r,n,s.text),s.forward(c),o+=c}let u=e[l++];for(;o<u;){if(s.done)break e;let c=Math.min(s.len,u-o);qe(n,c,-1),qe(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),o+=c}}return{changes:new Le(n,r),filtered:An.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(c=!1){if(!c&&!i.length)return;l<n&&qe(i,n-l,-1);let h=new Le(i,s);o=o?o.compose(h.map(o)):h,i=[],s=[],l=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Le){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),o=o?o.compose(c.map(o)):c}else{let{from:h,to:f=h,insert:p}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?te.of(p.split(r||bc)):p:te.empty,v=g.length;if(h==f&&v==0)return;h<l&&a(),h>l&&qe(i,h-l,-1),qe(i,f-h,v),Kn(s,i,g),l=f}}return u(e),a(!o),o}static empty(e){return new Le(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(te.empty);r[i]=te.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Le(n,r)}static createSet(e,n){return new Le(e,n)}}function qe(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Kn(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(te.empty);t.push(n)}}function Ac(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,c=s,h=te.empty;for(;u+=o,c+=a,a&&r&&(h=h.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,c,h),i=u,s=c}}}function Ec(t,e,n,r=!1){let i=[],s=r?[]:null,l=new Hs(t),o=new Hs(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);qe(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(qe(i,o.ins,-1);u;){let c=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=c&&(qe(i,0,l.ins),s&&Kn(s,i,l.text),a=l.i),l.forward(c),u-=c}o.next()}else if(l.ins>=0){let u=0,c=l.len;for(;c;)if(o.ins==-1){let h=Math.min(c,o.len);u+=h,c-=h,o.forward(h)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;qe(i,u,a<l.i?l.ins:0),s&&a<l.i&&Kn(s,i,l.text),a=l.i,l.forward(l.len-c)}else{if(l.done&&o.done)return s?Le.createSet(i,s):An.create(i);throw new Error("Mismatched change set lengths")}}}function K0(t,e,n=!1){let r=[],i=n?[]:null,s=new Hs(t),l=new Hs(e);for(let o=!1;;){if(s.done&&l.done)return i?Le.createSet(r,i):An.create(r);if(s.ins==0)qe(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)qe(r,0,l.ins,o),i&&Kn(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let c=l.ins==-1?-1:l.off?0:l.ins;qe(r,a,c,o),i&&c&&Kn(i,r,l.text)}else l.ins==-1?(qe(r,s.off?0:s.len,a,o),i&&Kn(i,r,s.textBit(a))):(qe(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Kn(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class Hs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?te.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?te.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class br{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new br(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return T.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return T.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return T.range(e.anchor,e.head)}static create(e,n,r){return new br(e,n,r)}}class T{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:T.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new T([this.main],0)}addRange(e,n=!0){return T.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,T.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new T(e.ranges.map(n=>br.fromJSON(n)),e.main)}static single(e,n=e){return new T([T.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return T.normalized(e.slice(),n);r=s.to}return new T(e,n)}static cursor(e,n=0,r,i){return br.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?br.create(n,e,48|s):br.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?T.range(a,o):T.range(o,a))}}return new T(e,n)}}function G0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let uf=0;class _{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=uf++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new _(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:cf),!!e.static,e.enables)}of(e){return new uo([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new uo(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new uo(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function cf(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class uo{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=uf++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[l]=r(h),1},update(h,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||Tc(h,c)){let p=r(h);if(o?!rp(p,h.values[l],i):!i(p,h.values[l]))return h.values[l]=p,1}return 0},reconfigure:(h,f)=>{let p,g=f.config.address[s];if(g!=null){let v=Ho(f,g);if(this.dependencies.every(k=>k instanceof _?f.facet(k)===h.facet(k):k instanceof en?f.field(k,!1)==h.field(k,!1):!0)||(o?rp(p=r(h),v,i):i(p=r(h),v)))return h.values[l]=v,0}else p=r(h);return h.values[l]=p,1}}}}function rp(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Tc(t,e){let n=!1;for(let r of e)vs(t,r)&1&&(n=!0);return n}function gk(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let c=0;c<r.length;c++){let h=Ho(a,r[c]);if(i[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(a){for(let u of r)vs(a,u);return a.values[l]=o(a),1},update(a,u){if(!Tc(a,s))return 0;let c=o(a);return e.compare(c,a.values[l])?0:(a.values[l]=c,1)},reconfigure(a,u){let c=Tc(a,r),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&cf(n,h))return a.values[l]=f,0;let p=o(a);return e.compare(p,f)?(a.values[l]=f,0):(a.values[l]=p,1)}}}const Dl=_.define({static:!0});class en{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new en(uf++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Dl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(Dl),l=i.facet(Dl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Dl.of({field:this,create:e})]}get extension(){return this}}const wr={lowest:4,low:3,default:2,high:1,highest:0};function Qi(t){return e=>new q0(e,t)}const wa={highest:Qi(wr.highest),high:Qi(wr.high),default:Qi(wr.default),low:Qi(wr.low),lowest:Qi(wr.lowest)};class q0{constructor(e,n){this.inner=e,this.prec=n}}class ka{of(e){return new Mc(this,e)}reconfigure(e){return ka.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Mc{constructor(e,n){this.compartment=e,this.inner=n}}class zo{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of yk(e,n,l))f instanceof en?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(p=>f.slot(p));let c=r==null?void 0:r.config.facets;for(let f in s){let p=s[f],g=p[0].facet,v=c&&c[f]||[];if(p.every(k=>k.type==0))if(o[g.id]=a.length<<1|1,cf(v,p))a.push(r.facet(g));else{let k=g.combine(p.map(m=>m.value));a.push(r&&g.compare(k,r.facet(g))?r.facet(g):k)}else{for(let k of p)k.type==0?(o[k.id]=a.length<<1|1,a.push(k.value)):(o[k.id]=u.length<<1,u.push(m=>k.dynamicSlot(m)));o[g.id]=u.length<<1,u.push(k=>gk(k,g,p))}}let h=u.map(f=>f(o));return new zo(e,l,h,o,a,s)}}function yk(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof Mc&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof Mc){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof q0)s(l.inner,l.prec);else if(l instanceof en)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof uo)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,wr.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,wr.default),r.reduce((l,o)=>l.concat(o))}function vs(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Ho(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const Y0=_.define(),Nc=_.define({combine:t=>t.some(e=>e),static:!0}),Q0=_.define({combine:t=>t.length?t[0]:void 0,static:!0}),J0=_.define(),X0=_.define(),Z0=_.define(),ey=_.define({combine:t=>t.length?t[0]:!1});class Ii{constructor(e,n){this.type=e,this.value=n}static define(){return new vk}}class vk{of(e){return new Ii(this,e)}}class xk{constructor(e){this.map=e}of(e){return new fe(this,e)}}class fe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new fe(this.type,n)}is(e){return this.type==e}static define(e={}){return new xk(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}fe.reconfigure=fe.define();fe.appendConfig=fe.define();class Je{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&G0(r,n.newLength),s.some(o=>o.type==Je.time)||(this.annotations=s.concat(Je.time.of(Date.now())))}static create(e,n,r,i,s,l){return new Je(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Je.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Je.time=Ii.define();Je.userEvent=Ii.define();Je.addToHistory=Ii.define();Je.remote=Ii.define();function wk(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function ty(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Le.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:fe.mapEffects(t.effects,i).concat(fe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Dc(t,e,n){let r=e.selection,i=pi(e.annotations);return e.userEvent&&(i=i.concat(Je.userEvent.of(e.userEvent))),{changes:e.changes instanceof Le?e.changes:Le.of(e.changes||[],n,t.facet(Q0)),selection:r&&(r instanceof T?r:T.single(r.anchor,r.head)),effects:pi(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function ny(t,e,n){let r=Dc(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=ty(r,Dc(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=Je.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Sk(n?kk(i):i)}function kk(t){let e=t.startState,n=!0;for(let i of e.facet(J0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:wk(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Le.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=Je.create(e,i,t.selection&&t.selection.map(s),fe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(X0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Je?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Je?t=s[0]:t=ny(e,pi(s),!1)}return t}function Sk(t){let e=t.startState,n=e.facet(Z0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=ty(r,Dc(e,s,t.changes.newLength),!0))}return r==t?t:Je.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const Ck=[];function pi(t){return t==null?Ck:Array.isArray(t)?t:[t]}var He=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(He||(He={}));const bk=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Oc;try{Oc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Ak(t){if(Oc)return Oc.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||bk.test(n)))return!0}return!1}function Ek(t){return e=>{if(!/\S/.test(e))return He.Space;if(Ak(e))return He.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return He.Word;return He.Other}}class re{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)vs(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return vs(this,r),Ho(this,r)}update(...e){return ny(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(ka.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(fe.reconfigure)?(n=null,r=o.value):o.is(fe.appendConfig)&&(n=null,r=pi(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=zo.resolve(r,i,this),s=new re(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(Nc)?e.newSelection:e.newSelection.asSingle();new re(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:T.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=pi(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),c=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(c);let h=i.mapDesc(u,!0);s.push(a.range.map(h)),i=i.compose(c),l=fe.mapEffects(l,c).concat(fe.mapEffects(pi(a.effects),h))}return{changes:i,selection:T.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Le?e:Le.of(e,this.doc.length,this.facet(re.lineSeparator))}toText(e){return te.of(e.split(this.facet(re.lineSeparator)||bc))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(vs(this,n),Ho(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof en&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return re.create({doc:e.doc,selection:T.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=zo.resolve(e.extensions||[],new Map),r=e.doc instanceof te?e.doc:te.of((e.doc||"").split(n.staticFacet(re.lineSeparator)||bc)),i=e.selection?e.selection instanceof T?e.selection:T.single(e.selection.anchor,e.selection.head):T.single(0);return G0(i,r.length),n.staticFacet(Nc)||(i=i.asSingle()),new re(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(re.tabSize)}get lineBreak(){return this.facet(re.lineSeparator)||`
`}get readOnly(){return this.facet(ey)}phrase(e,...n){for(let r of this.facet(re.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(Y0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return Ek(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=ze(n,l,!1);if(s(n.slice(a,l))!=He.Word)break;l=a}for(;o<i;){let a=ze(n,o);if(s(n.slice(o,a))!=He.Word)break;o=a}return l==o?null:T.range(l+r,o+r)}}re.allowMultipleSelections=Nc;re.tabSize=_.define({combine:t=>t.length?t[0]:4});re.lineSeparator=Q0;re.readOnly=ey;re.phrases=_.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});re.languageData=Y0;re.changeFilter=J0;re.transactionFilter=X0;re.transactionExtender=Z0;ka.reconfigure=fe.define();function Sa(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Ei{eq(e){return this==e}range(e,n=e){return Pc.create(e,n,this)}}Ei.prototype.startSide=Ei.prototype.endSide=0;Ei.prototype.point=!1;Ei.prototype.mapMode=St.TrackDel;let Pc=class ry{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new ry(e,n,r)}};function Lc(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class hf{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,h=this.to[a]+e,f,p;if(c==h){let g=n.mapPos(c,u.startSide,u.mapMode);if(g==null||(f=p=g,u.startSide!=u.endSide&&(p=n.mapPos(c,u.endSide),p<f)))continue}else if(f=n.mapPos(c,u.startSide),p=n.mapPos(h,u.endSide),f>p||f==p&&u.startSide>0&&u.endSide<=0)continue;(p-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,p-f)),r.push(u),i.push(f-l),s.push(p-l))}return{mapped:r.length?new hf(i,s,r,o):null,pos:l}}}class le{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new le(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(Lc)),this.isEmpty)return n.length?le.of(n):this;let o=new iy(this,null,-1).goto(0),a=0,u=[],c=new Rr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let h=n[a++];c.addInner(h.from,h.to,h.value)||u.push(h)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||u.push(Pc.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?le.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:c,pos:h}=a.map(o,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new le(r,n,s||le.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Ws.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Ws.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),o=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=ip(l,o,r),u=new Ji(l,a,s),c=new Ji(o,a,s);r.iterGaps((h,f,p)=>sp(u,h,c,f,p,i)),r.empty&&r.length==0&&sp(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),l=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=ip(s,l),a=new Ji(s,o,0).goto(r),u=new Ji(l,o,0).goto(r);for(;;){if(a.to!=u.to||!Rc(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new Ji(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let c=l.activeForPoint(l.to),h=l.pointFrom<n?c.length+1:l.point.startSide<0?c.length:Math.min(c.length,a);i.point(o,u,l.point,c,h,l.pointRank),a=Math.min(l.openEnd(u),c.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new Rr;for(let i of e instanceof Pc?[e]:n?Tk(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return le.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=le.empty;i=i.nextLayer)n=new le(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}le.empty=new le([],[],null,-1);function Tk(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Lc(e,r)>0)return t.slice().sort(Lc);e=r}return t}le.empty.nextLayer=le.empty;class Rr{finishChunk(e){this.chunks.push(new hf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Rr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(le.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=le.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function ip(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class iy{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ws{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new iy(l,n,r,s));return i.length==1?i[0]:new Ws(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)au(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)au(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),au(this.heap,0)}}}function au(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Ji{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ws.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Ol(this.active,e),Ol(this.activeTo,e),Ol(this.activeRank,e),this.minActive=lp(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Pl(this.active,n,r),Pl(this.activeTo,n,i),Pl(this.activeRank,n,s),e&&Pl(e,n,this.cursor.from),this.minActive=lp(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Ol(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function sp(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,h=c<0?t.to+a:n.to,f=Math.min(h,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Rc(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!Rc(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),h>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),o=h,c<=0&&t.next(),c>=0&&n.next()}}function Rc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Ol(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Pl(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function lp(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Ca(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=ze(t,i));return r}function Mk(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=ze(t,i)}return t.length}const Ic="",op=typeof Symbol>"u"?"__"+Ic:Symbol.for(Ic),jc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class lr{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let c=[],h=/^@(\w+)\b/.exec(l[0]),f=h&&h[1]=="keyframes";if(h&&o==null)return a.push(l[0]+";");for(let p in o){let g=o[p];if(/&/.test(p))s(p.split(/,\s*/).map(v=>l.map(k=>v.replace(/&/,k))).reduce((v,k)=>v.concat(k)),g,a);else if(g&&typeof g=="object"){if(!h)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(i(p),g,c,f)}else g!=null&&c.push(p.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+g+";")}(c.length||f)&&a.push((r&&!h&&!u?l.map(r):l).join(", ")+" {"+c.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ap[op]||1;return ap[op]=e+1,Ic+e.toString(36)}static mount(e,n,r){let i=e[jc],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Nk(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let up=new Map;class Nk{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=up.get(r);if(s)return e[jc]=s;this.sheet=new i.CSSStyleSheet,up.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[jc]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var or={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Dk=typeof navigator<"u"&&/Mac/.test(navigator.platform),Ok=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Fe=0;Fe<10;Fe++)or[48+Fe]=or[96+Fe]=String(Fe);for(var Fe=1;Fe<=24;Fe++)or[Fe+111]="F"+Fe;for(var Fe=65;Fe<=90;Fe++)or[Fe]=String.fromCharCode(Fe+32),Vs[Fe]=String.fromCharCode(Fe);for(var uu in or)Vs.hasOwnProperty(uu)||(Vs[uu]=or[uu]);function Pk(t){var e=Dk&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Ok&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Vs:or)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function je(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)sy(t,arguments[e]);return t}function sy(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)sy(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Us(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Bc(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function co(t,e){if(!e.anchorNode)return!1;try{return Bc(t,e.anchorNode)}catch{return!1}}function $s(t){return t.nodeType==3?jr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function xs(t,e,n,r){return n?cp(t,e,n,r,-1)||cp(t,e,n,r,1):!1}function Ir(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Wo(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function cp(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:yn(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Ir(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?yn(t):0}else return!1}}function yn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ba(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Lk(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function ly(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function Rk(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,p=c==a.body,g=1,v=1;if(p)f=Lk(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:g,scaleY:v}=ly(c,y)),f={left:y.left,right:y.left+c.clientWidth*g,top:y.top,bottom:y.top+c.clientHeight*v}}let k=0,m=0;if(i=="nearest")e.top<f.top?(m=e.top-(f.top+l),n>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+l,n<0&&e.top-m<f.top&&(m=e.top-(f.top+l)));else{let y=e.bottom-e.top,x=f.bottom-f.top;m=(i=="center"&&y<=x?e.top+y/2-x/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-x+l)-f.top}if(r=="nearest"?e.left<f.left?(k=e.left-(f.left+s),n>0&&e.right>f.right+k&&(k=e.right-f.right+s)):e.right>f.right&&(k=e.right-f.right+s,n<0&&e.left<f.left+k&&(k=e.left-(f.left+s))):k=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,k||m)if(p)u.scrollBy(k,m);else{let y=0,x=0;if(m){let S=c.scrollTop;c.scrollTop+=m/v,x=(c.scrollTop-S)*v}if(k){let S=c.scrollLeft;c.scrollLeft+=k/g,y=(c.scrollLeft-S)*g}e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x},y&&Math.abs(y-k)<1&&(r="nearest"),x&&Math.abs(x-m)<1&&(i="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function Ik(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class jk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?yn(n):0),r,Math.min(e.focusOffset,r?yn(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Vr=null;function oy(t){if(t.setActive)return t.setActive();if(Vr)return t.focus(Vr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Vr==null?{get preventScroll(){return Vr={preventScroll:!0},!0}}:void 0),!Vr){Vr=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let hp;function jr(t,e,n=e){let r=hp||(hp=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function mi(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function Bk(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function ay(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Fk(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,yn(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=yn(n))}else{if(n==t)return!0;r=Ir(n),n=n.parentNode}}function uy(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function cy(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=yn(n)}else if(n.parentNode&&!Wo(n))r=Ir(n),n=n.parentNode;else return null}}function hy(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!Wo(n))r=Ir(n)+1,n=n.parentNode;else return null}}class Qe{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Qe(e.parentNode,Ir(e),n)}static after(e,n){return new Qe(e.parentNode,Ir(e)+1,n)}}const ff=[];class ce{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=ce.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=fp(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=fp(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=yn(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ce.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,c=r;a<this.children.length;a++){let h=this.children[a],f=u+h.length;if(u<e&&f>n)return h.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&h.dom.parentNode==this.dom){l=a,o=c;break}c=f,u=f+h.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=ff){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new fy(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ce.prototype.breakAfter=0;function fp(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class fy{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function dy(t,e,n,r,i,s,l,o,a){let{children:u}=t,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:l;if(!(e==r&&c&&!l&&!f&&s.length<2&&c.merge(n,i,s.length?h:null,n==0,o,a))){if(r<u.length){let p=u[r];p&&(i<p.length||p.breakAfter&&(h!=null&&h.breakAfter))?(e==r&&(p=p.split(i),i=0),!f&&h&&p.merge(0,i,h,!0,0,a)?s[s.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,a),s.push(p))):p!=null&&p.breakAfter&&(h?h.breakAfter=1:l=1),r++}for(c&&(c.breakAfter=l,n>0&&(!l&&s.length&&c.merge(n,c.length,s[0],!1,o,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function py(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:c}=l.findPos(e,-1),h=e-n;for(let f of r)h+=f.length;t.length+=h,dy(t,u,c,o,a,r,0,i,s)}let ct=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Fc=typeof document<"u"?document:{documentElement:{style:{}}};const _c=/Edge\/(\d+)/.exec(ct.userAgent),my=/MSIE \d/.test(ct.userAgent),zc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ct.userAgent),Aa=!!(my||zc||_c),dp=!Aa&&/gecko\/(\d+)/i.test(ct.userAgent),cu=!Aa&&/Chrome\/(\d+)/.exec(ct.userAgent),_k="webkitFontSmoothing"in Fc.documentElement.style,gy=!Aa&&/Apple Computer/.test(ct.vendor),pp=gy&&(/Mobile\/\w+/.test(ct.userAgent)||ct.maxTouchPoints>2);var R={mac:pp||/Mac/.test(ct.platform),windows:/Win/.test(ct.platform),linux:/Linux|X11/.test(ct.platform),ie:Aa,ie_version:my?Fc.documentMode||6:zc?+zc[1]:_c?+_c[1]:0,gecko:dp,gecko_version:dp?+(/Firefox\/(\d+)/.exec(ct.userAgent)||[0,0])[1]:0,chrome:!!cu,chrome_version:cu?+cu[1]:0,ios:pp,android:/Android\b/.test(ct.userAgent),safari:gy,webkit_version:_k?+(/\bAppleWebKit\/(\d+)/.exec(ct.userAgent)||[0,0])[1]:0,tabSize:Fc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const zk=256;class Xt extends ce{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Xt)||this.length-(n-e)+r.length>zk||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Xt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Qe(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Hk(this.dom,e,n)}}class On extends ce{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(ay(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof On&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(py(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new On(this.mark,n,l)}domAtPos(e){return yy(this,e)}coordsAt(e,n){return xy(this,e,n)}}function Hk(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?R.chrome||R.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=jr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return R.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?ba(a,l<0):a||null}class Ar extends ce{static create(e,n,r){return new Ar(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=Ar.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof Ar)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Ar&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return te.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):te.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Qe.before(this.dom):Qe.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return ba(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ti extends ce{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ti&&e.side==this.side}split(){return new Ti(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Qe.before(this.dom):Qe.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return te.empty}get isHidden(){return!0}}Xt.prototype.children=Ar.prototype.children=Ti.prototype.children=ff;function yy(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new Qe(n,0)}function vy(t,e,n){let r,{children:i}=t;n>0&&e instanceof On&&i.length&&(r=i[i.length-1])instanceof On&&r.mark.eq(e.mark)?vy(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function xy(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let p=u.children[h],g=f+p.length;g>=c&&(p.children.length?o(p,c-f):(!s||s.isHidden&&(n>0||Vk(s,p)))&&(g>c||f==g&&p.getSide()>0)?(s=p,l=c-f):(f<c||f==g&&p.getSide()<0&&!p.isHidden)&&(r=p,i=c-f)),f=g}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):Wk(t)}function Wk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=$s(e);return n[n.length-1]||null}function Vk(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function Hc(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const mp=Object.create(null);function Vo(t,e,n){if(t==e)return!0;t||(t=mp),e||(e=mp);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Wc(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function Uk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class rl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var jt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(jt||(jt={}));class G extends Ei{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new il(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new ar(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=wy(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new ar(e,r,i,n,e.widget||null,!0)}static line(e){return new sl(e)}static set(e,n=!1){return le.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}G.none=le.empty;class il extends G{constructor(e){let{start:n,end:r}=wy(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof il&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Vo(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}il.prototype.point=!1;class sl extends G{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof sl&&this.spec.class==e.spec.class&&Vo(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}sl.prototype.mapMode=St.TrackBefore;sl.prototype.point=!0;class ar extends G{constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?St.TrackBefore:St.TrackAfter:St.TrackDel}get type(){return this.startSide!=this.endSide?jt.WidgetRange:this.startSide<=0?jt.WidgetBefore:jt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ar&&$k(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}ar.prototype.point=!0;function wy(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function $k(t,e){return t==e||!!(t&&e&&t.compare(e))}function ho(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Ee extends ce{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof Ee))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),py(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new Ee;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Vo(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){vy(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Hc(n,this.attrs||{})),r&&(this.attrs=Hc({class:r},this.attrs||{}))}domAtPos(e){return yy(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(ay(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Wc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&ce.get(i)instanceof On;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ce.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!R.ios||!this.children.some(s=>s instanceof Xt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Xt)||/[^ -~]/.test(r.text))return null;let i=$s(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=xy(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof Ee&&this.children.length==0&&e.children.length==0&&Vo(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof Ee)return s;if(l>n)break}i=l+s.breakAfter}return null}}class En extends ce{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof En)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Qe.before(this.dom):Qe.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new En(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return ff}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):te.empty}domBoundsAround(){return null}become(e){return e instanceof En&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof Vc?null:ba(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Vc extends rl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ws{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof En&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ee),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ll(new Ti(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof En)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Ll(new Xt(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof ar){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof ar)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new En(r.widget||Mi.block,o,r));else{let a=Ar.create(r.widget||Mi.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(Ll(new Ti(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(Ll(a,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new ws(e,n,r,s);return l.openEnd=le.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function Ll(t,e){for(let n of e)t=new On(n,[t],t.length);return t}class Mi extends rl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Mi.inline=new Mi("span");Mi.block=new Mi("div");var De=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(De||(De={}));const Br=De.LTR,df=De.RTL;function ky(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Kk=ky("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Gk=ky("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Uc=Object.create(null),sn=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Uc[e]=n,Uc[n]=-e}function Sy(t){return t<=247?Kk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Gk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const qk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Gn{get dir(){return this.level%2?df:Br}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function Cy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!Cy(r.inner,i.inner))return!1}return!0}const ue=[];function Yk(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,c=a,h=a;u<o;u++){let f=Sy(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),ue[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=l,c=a,h=a;u<o;u++){let f=ue[u];if(f==128)u<o-1&&c==ue[u+1]&&c&24?f=ue[u]=c:ue[u]=256;else if(f==64){let p=u+1;for(;p<o&&ue[p]==64;)p++;let g=u&&c==8||p<n&&ue[p]==8?h==1?1:8:256;for(let v=u;v<p;v++)ue[v]=g;u=p-1}else f==8&&h==1&&(ue[u]=1);c=f,f&7&&(h=f)}}}function Qk(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,c=l<r.length?r[l].from:n;for(let h=u,f,p,g;h<c;h++)if(p=Uc[f=t.charCodeAt(h)])if(p<0){for(let v=o-3;v>=0;v-=3)if(sn[v+1]==-p){let k=sn[v+2],m=k&2?i:k&4?k&1?s:i:0;m&&(ue[h]=ue[sn[v]]=m),o=v;break}}else{if(sn.length==189)break;sn[o++]=h,sn[o++]=f,sn[o++]=a}else if((g=ue[h])==2||g==1){let v=g==i;a=v?0:1;for(let k=o-3;k>=0;k-=3){let m=sn[k+2];if(m&2)break;if(v)sn[k+2]|=2;else{if(m&4)break;sn[k+2]|=4}}}}}function Jk(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=ue[a];if(u==256){let c=a+1;for(;;)if(c==o){if(i==n.length)break;c=n[i++].to,o=i<n.length?n[i].from:e}else if(ue[c]==256)c++;else break;let h=s==1,f=(c<e?ue[c]:r)==1,p=h==f?h?1:2:r;for(let g=c,v=i,k=v?n[v-1].to:t;g>a;)g==k&&(g=n[--v].from,k=v?n[v-1].to:t),ue[--g]=p;a=c}else s=u,a++}}}function $c(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let c=!0,h=!1;if(u==s.length||a<s[u].from){let v=ue[a];v!=o&&(c=!1,h=v==16)}let f=!c&&o==1?[]:null,p=c?r:r+1,g=a;e:for(;;)if(u<s.length&&g==s[u].from){if(h)break e;let v=s[u];if(!c)for(let k=v.to,m=u+1;;){if(k==n)break e;if(m<s.length&&s[m].from==k)k=s[m++].to;else{if(ue[k]==o)break e;break}}if(u++,f)f.push(v);else{v.from>a&&l.push(new Gn(a,v.from,p));let k=v.direction==Br!=!(p%2);Kc(t,k?r+1:r,i,v.inner,v.from,v.to,l),a=v.to}g=v.to}else{if(g==n||(c?ue[g]!=o:ue[g]==o))break;g++}f?$c(t,a,g,r+1,i,f,l):a<g&&l.push(new Gn(a,g,p)),a=g}else for(let a=n,u=s.length;a>e;){let c=!0,h=!1;if(!u||a>s[u-1].to){let v=ue[a-1];v!=o&&(c=!1,h=v==16)}let f=!c&&o==1?[]:null,p=c?r:r+1,g=a;e:for(;;)if(u&&g==s[u-1].to){if(h)break e;let v=s[--u];if(!c)for(let k=v.from,m=u;;){if(k==e)break e;if(m&&s[m-1].to==k)k=s[--m].from;else{if(ue[k-1]==o)break e;break}}if(f)f.push(v);else{v.to<a&&l.push(new Gn(v.to,a,p));let k=v.direction==Br!=!(p%2);Kc(t,k?r+1:r,i,v.inner,v.from,v.to,l),a=v.from}g=v.from}else{if(g==e||(c?ue[g-1]!=o:ue[g-1]==o))break;g--}f?$c(t,g,a,r+1,i,f,l):g<a&&l.push(new Gn(g,a,p)),a=g}}function Kc(t,e,n,r,i,s,l){let o=e%2?2:1;Yk(t,i,s,r,o),Qk(t,i,s,r,o),Jk(i,s,r,o),$c(t,i,s,e,n,r,l)}function Xk(t,e,n){if(!t)return[new Gn(0,0,e==df?1:0)];if(e==Br&&!n.length&&!qk.test(t))return by(t.length);if(n.length)for(;t.length>ue.length;)ue[ue.length]=256;let r=[],i=e==Br?0:1;return Kc(t,i,i,n,0,t.length,r),r}function by(t){return[new Gn(0,t,0)]}let Ay="";function Zk(t,e,n,r,i){var s;let l=r.head-t.from,o=Gn.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let c=ze(t.text,l,a.forward(i,n));(c<a.from||c>a.to)&&(c=u),Ay=t.text.slice(Math.min(l,c),Math.max(l,c));let h=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<a.level?T.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):T.cursor(c+t.from,a.forward(i,n)?-1:1,a.level)}function eS(t,e,n){for(let r=e;r<n;r++){let i=Sy(t.charCodeAt(r));if(i==1)return Br;if(i==2||i==4)return df}return Br}const Ey=_.define(),Ty=_.define(),My=_.define(),Ny=_.define(),Gc=_.define(),Dy=_.define(),Oy=_.define(),pf=_.define(),mf=_.define(),Py=_.define({combine:t=>t.some(e=>e)}),tS=_.define({combine:t=>t.some(e=>e)}),Ly=_.define();class gi{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new gi(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new gi(T.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Rl=fe.define({map:(t,e)=>t.map(e)}),Ry=fe.define();function dn(t,e,n){let r=t.facet(Ny);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const kn=_.define({combine:t=>t.length?t[0]:!0});let nS=0;const si=_.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class Et{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(si.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(si.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new Et(nS++,e,r,i,o=>{let a=[];return l&&a.push(Ks.of(u=>{let c=u.plugin(o);return c?l(c):G.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return Et.define((r,i)=>new e(r,i),n)}}class hu{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(dn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){dn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){dn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Iy=_.define(),gf=_.define(),Ks=_.define(),jy=_.define(),ll=_.define(),By=_.define();function gp(t,e){let n=t.state.facet(By);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return le.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,c=l-e.from,h=i;for(let f=o.length-1;f>=0;f--,a--){let p=o[f].spec.bidiIsolate,g;if(p==null&&(p=eS(e.text,u,c)),a>0&&h.length&&(g=h[h.length-1]).to==u&&g.direction==p)g.to=c,h=g.inner;else{let v={from:u,to:c,direction:p,inner:[]};h.push(v),h=v.inner}}}}),i}const Fy=_.define();function _y(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(Fy)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const ss=_.define();class Bt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Bt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let h=n[s],f=n[s+1],p=Math.max(o,h),g=Math.min(c,f);if(p<=g&&new Bt(p+u,g+u,p,g).addToSet(r),f>c)break;s+=2}if(!a)return r;new Bt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class Uo{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Le.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new Bt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new Uo(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class yp extends ce{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=G.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ee],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Bt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!uS(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?iS(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Bt(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(R.ie||R.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=oS(l,o,e.changes);return r=Bt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=R.chrome||R.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof En&&l.widget instanceof Vc&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:c,toB:h}=o,f,p,g,v;if(r&&r.range.fromB<h&&r.range.toB>c){let S=ws.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=ws.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);p=S.breakAtStart,g=S.openStart,v=C.openEnd;let A=this.compositionView(r);C.breakAtStart?A.breakAfter=1:C.content.length&&A.merge(A.length,A.length,C.content[0],!1,C.openStart,0)&&(A.breakAfter=C.content[0].breakAfter,C.content.shift()),S.content.length&&A.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(A).concat(C.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:v}=ws.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:k,off:m}=s.findPos(u,1),{i:y,off:x}=s.findPos(a,-1);dy(this,y,x,k,m,f,p,g,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(Ry)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Xt(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new On(i,[n],n.length);let r=new Ee;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=ce.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(kn)||this.dom.tabIndex>-1)&&co(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(R.gecko&&o.empty&&!this.hasComposition&&rS(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=u=new Qe(h,0),l=!0}let c=this.view.observer.selectionRange;(l||!c.focusNode||(!xs(a.node,a.offset,c.anchorNode,c.anchorOffset)||!xs(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,o))&&(this.view.observer.ignore(()=>{R.android&&R.chrome&&this.dom.contains(c.focusNode)&&aS(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Us(this.view.root);if(h)if(o.empty){if(R.gecko){let f=sS(a.node,a.offset);if(f&&f!=3){let p=(f==1?cy:hy)(a.node,a.offset);p&&(a=new Qe(p.node,p.offset))}}h.collapse(a.node,a.offset),o.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=o.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Qe(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Qe(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&xs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Us(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=Ee.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=ce.get(n.childNodes[i]);s instanceof Ee&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=ce.get(n.childNodes[i]);s instanceof Ee&&(r=s.domAtPos(s.length))}return r?new Qe(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=ce.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Ee)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof Ee&&!(r instanceof Ee&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof En&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Ee))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Xt))return null;let s=ze(i.text,r);if(s==r)return null;let l=jr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==De.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>i)break;if(u>=r){let p=h.dom.getBoundingClientRect();if(n.push(p.height),l){let g=h.dom.lastChild,v=g?$s(g):[];if(v.length){let k=v[v.length-1],m=a?k.right-p.left:p.right-k.left;m>o&&(o=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?De.RTL:De.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Ee){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=$s(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new fy(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(G.replace({widget:new Vc(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return G.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Ks).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(jy).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(le.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(Ly))try{if(u(this.view,e.range,e))return!0}catch(c){dn(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=_y(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;Rk(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==De.LTR)}}function rS(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function zy(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=cy(n.focusNode,n.focusOffset),i=hy(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=ce.get(i.node);if(!o||o instanceof Xt&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=ce.get(r.node);!a||a instanceof Xt&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function iS(t,e,n){let r=zy(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new Bt(a.mapPos(s),a.mapPos(l),s,l),c=[];for(let h=i.parentNode;;h=h.parentNode){let f=ce.get(h);if(f instanceof On)c.push({node:h,deco:f.mark});else{if(f instanceof Ee||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new il({inclusive:!0,attributes:Uk(h),tagName:h.tagName.toLowerCase()})});else return null}}}function sS(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let lS=class{constructor(){this.changes=[]}compareRange(e,n){ho(e,n,this.changes)}comparePoint(e,n){ho(e,n,this.changes)}boundChange(e){ho(e,e,this.changes)}};function oS(t,e,n){let r=new lS;return le.compare(t,e,n,r),r.changes}function aS(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function uS(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function cS(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return T.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=ze(i.text,s,!1):o=ze(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=ze(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=ze(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return T.range(l+i.from,o+i.from)}function hS(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function fS(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function fu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function vp(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function xp(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function qc(t,e,n){let r,i,s,l,o=!1,a,u,c,h;for(let g=t.firstChild;g;g=g.nextSibling){let v=$s(g);for(let k=0;k<v.length;k++){let m=v[k];i&&fu(i,m)&&(m=vp(xp(m,i.bottom),i.top));let y=hS(e,m),x=fS(n,m);if(y==0&&x==0)return g.nodeType==3?wp(g,e,n):qc(g,e,n);(!r||l>x||l==x&&s>y)&&(r=g,i=m,s=y,l=x,o=y?e<m.left?k>0:k<v.length-1:!0),y==0?n>m.bottom&&(!c||c.bottom<m.bottom)?(a=g,c=m):n<m.top&&(!h||h.top>m.top)&&(u=g,h=m):c&&fu(c,m)?c=xp(c,m.bottom):h&&fu(h,m)&&(h=vp(h,m.top))}}if(c&&c.bottom>=n?(r=a,i=c):h&&h.top<=n&&(r=u,i=h),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return wp(r,f,n);if(o&&r.contentEditable!="false")return qc(r,f,n);let p=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:p}}function wp(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=jr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;l||(l=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,p=f;if((R.chrome||R.gecko)&&jr(t,o).getBoundingClientRect().left==c.right&&(p=!f),h<=0)return{node:t,offset:o+(p?1:0)};i=o+(p?1:0),s=h}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function Hy(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:h}=e,f=h-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(f),a.type!=jt.Text;)for(;f=r>0?a.bottom+S:a.top-S,!(f>=0&&f<=u);){if(C)return n?null:0;C=!0,r=-r}h=o+f;let p=a.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:kp(t,l,a,c,h);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:kp(t,l,a,c,h);let g=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:g,k=v.elementFromPoint(c,h);k&&!t.contentDOM.contains(k)&&(k=null),k||(c=Math.max(l.left+1,Math.min(l.right-1,c)),k=v.elementFromPoint(c,h),k&&!t.contentDOM.contains(k)&&(k=null));let m,y=-1;if(k&&((i=t.docView.nearest(k))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(c,h);S&&({offsetNode:m,offset:y}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(c,h);S&&({startContainer:m,startOffset:y}=S)}m&&(!t.contentDOM.contains(m)||R.safari&&dS(m,y,c)||R.chrome&&pS(m,y,c))&&(m=void 0),m&&(y=Math.min(yn(m),y))}if(!m||!t.docView.dom.contains(m)){let S=Ee.find(t.docView,p);if(!S)return f>a.top+a.height/2?a.to:a.from;({node:m,offset:y}=qc(S.dom,c,h))}let x=t.docView.nearest(m);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=x.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(m,y)+x.posAtStart}function kp(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+Mk(l,s,t.state.tabSize)}function Wy(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return jr(t,r-1,r).getBoundingClientRect().right>n}function dS(t,e,n){return Wy(t,e,n)}function pS(t,e,n){if(e!=0)return Wy(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():jr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function mS(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==jt.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function gS(t,e,n,r){let i=mS(t,e.head,e.assoc||-1),s=!r||i.type!=jt.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==De.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return T.cursor(a,n?-1:1)}return T.cursor(n?i.to:i.from,n?-1:1)}function Sp(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Zk(i,s,l,o,n),c=Ay;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(c))return o}else{if(!r)return u;a=r(c)}o=u}}function yS(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==He.Space&&(i=l),i==l}}function vS(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return T.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let p=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-p.from))),o=(s<0?p.top:p.bottom)+c}let h=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=o+(f+p)*s,v=Hy(t,{x:h,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?v<i:v>i)){let k=t.docView.coordsForChar(v),m=!k||g<k.top?-1:1;return T.cursor(v,m,void 0,l)}}}function ks(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function Vy(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=ks(t,i.from,0);l!=i.from&&(s=T.cursor(l,-1))}else{let l=ks(t,i.from,-1),o=ks(t,i.to,1);(l!=i.from||o!=i.to)&&(s=T.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?T.create(n,e.mainIndex):e}function du(t,e,n){let r=ks(t.state.facet(ll).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:T.cursor(r,r<n.from?1:-1)}const ls="";class xS{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(re.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ls}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=ce.get(i),a=ce.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:Wo(i))||Wo(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=ce.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(wS(e,r.node,r.offset)?n:0))}}function wS(t,e,n){for(;;){if(!e||n<yn(e))return!1;if(e==t)return!0;n=Ir(e)+1,e=e.parentNode}}class Cp{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class kS{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:bS(e),a=new xS(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=AS(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!Bc(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!Bc(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),c=e.viewport;if((R.ios||R.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(a,u),f=Math.max(a,u),p=c.from-h,g=c.to-f;(p==0||p==1||h==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=T.single(u,a)}}}function Uy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||R.android&&e.text.length<o-l)&&(a=i.to,u="end");let c=CS(t.state.doc.sliceString(l,o,ls),e.text,a-l,u);c&&(R.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==ls+ls&&c.toB--,n={from:l+c.from,to:l+c.toA,insert:te.of(e.text.slice(c.from,c.toB).split(ls))})}else r&&(!t.hasFocus&&t.state.facet(kn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(R.mac||R.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=T.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:te.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:R.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=T.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:te.of([" "])}),n)return yf(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=Vy(t.state.facet(ll).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function yf(t,e,n,r=-1){if(R.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(R.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&mi(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&mi(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&mi(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=SS(t,e,n));return t.state.facet(Dy).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function SS(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,c=ks(i.facet(ll).map(h=>h(t)),u,a);e.from==c&&(l=c)}if(l>-1)r={changes:e,selection:T.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),h,f=n&&zy(t,n.main.head);if(f){let v=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-v}}else h=t.state.doc.lineAt(s.head);let p=s.to-e.to,g=s.to-s.from;r=i.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:u||v.map(a)};let k=v.to-p,m=k-c.length;if(v.to-v.from!=g||t.state.sliceDoc(m,k)!=c||v.to>=h.from&&v.from<=h.to)return{range:v};let y=i.changes({from:m,to:k,insert:e.insert}),x=v.to-s.to;return{changes:y,range:u?T.range(Math.max(0,u.anchor+x),Math.max(0,u.head+x)):v.map(y)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function CS(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function bS(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Cp(n,r)),(i!=n||s!=r)&&e.push(new Cp(i,s))),e}function AS(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?T.single(n+e,r+e):null}class ES{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,R.safari&&e.contentDOM.addEventListener("input",()=>null),R.gecko&&WS(e.contentDOM.ownerDocument)}handleEvent(e){!RS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=TS(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Ky.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),R.android&&R.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return R.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=$y.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||MS.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,mi(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:R.safari&&!R.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bp(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){dn(n.state,i)}}}function TS(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(bp(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(bp(r.value,a))}}for(let r in Zt)n(r).handlers.push(Zt[r]);for(let r in Ht)n(r).observers.push(Ht[r]);return e}const $y=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],MS="dthko",Ky=[16,17,18,20,91,92,224,225],Il=6;function jl(t){return Math.max(0,t)*.7+8}function NS(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class DS{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Ik(e.contentDOM),this.atoms=e.state.facet(ll).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(re.allowMultipleSelections)&&OS(e,n),this.dragging=LS(e,n)&&Yy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&NS(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=_y(this.view);e.clientX-a.left<=i+Il?n=-jl(i-e.clientX):e.clientX+a.right>=l-Il&&(n=jl(e.clientX-l)),e.clientY-a.top<=s+Il?r=-jl(s-e.clientY):e.clientY+a.bottom>=o-Il&&(r=jl(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=Vy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function OS(t,e){let n=t.state.facet(Ey);return n.length?n[0](e):R.mac?e.metaKey:e.ctrlKey}function PS(t,e){let n=t.state.facet(Ty);return n.length?n[0](e):R.mac?!e.altKey:!e.ctrlKey}function LS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Us(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function RS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ce.get(n))&&r.ignoreEvent(e))return!1;return!0}const Zt=Object.create(null),Ht=Object.create(null),Gy=R.ie&&R.ie_version<15||R.ios&&R.webkit_version<604;function IS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),qy(t,n.value)},50)}function Ea(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function qy(t,e){e=Ea(t.state,pf,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(Yc!=null&&n.selection.ranges.every(a=>a.empty)&&Yc==s.toString()){let a=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let h=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:T.cursor(u.from+h.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:T.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Ht.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Zt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ht.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ht.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Zt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(My))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=FS(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new DS(t,e,n,r)),r&&t.observer.ignore(()=>{oy(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Ap(t,e,n,r){if(r==1)return T.cursor(e,n);if(r==2)return cS(t.state,e,n);{let i=Ee.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,T.range(l,o)}}let Ep=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function jS(t,e,n,r){let i=Ee.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&Ep(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&Ep(n,r,o)?1:l&&l.bottom>=r?-1:1}function Tp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:jS(t,n,e.clientX,e.clientY)}}const BS=R.ie&&R.ie_version<=11;let Mp=null,Np=0,Dp=0;function Yy(t){if(!BS)return t.detail;let e=Mp,n=Dp;return Mp=t,Dp=Date.now(),Np=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Np+1)%3:1}function FS(t,e){let n=Tp(t,e),r=Yy(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=Tp(t,s),u,c=Ap(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let h=Ap(t,n.pos,n.bias,r),f=Math.min(h.from,c.from),p=Math.max(h.to,c.to);c=f<c.from?T.range(f,p):T.range(p,f)}return l?i.replaceRange(i.main.extend(c.from,c.to)):o&&r==1&&i.ranges.length>1&&(u=_S(i,a.pos))?u:o?i.addRange(c):T.create([c])}}}function _S(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return T.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Zt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=T.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Ea(t.state,mf,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Zt.dragend=t=>(t.inputState.draggedContent=null,!1);function Op(t,e,n,r){if(n=Ea(t.state,pf,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&PS(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Zt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&Op(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return Op(t,e,r,!0),!0}return!1};Zt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Gy?null:e.clipboardData;return n?(qy(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(IS(t),!1)};function zS(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function HS(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:Ea(t,mf,e.join(t.lineBreak)),ranges:n,linewise:r}}let Yc=null;Zt.copy=Zt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=HS(t.state);if(!n&&!i)return!1;Yc=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=Gy?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(zS(t,n),!1)};const Qy=Ii.define();function Jy(t,e){let n=[];for(let r of t.facet(Oy)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:Qy.of(!0)}):null}function Xy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Jy(t.state,e);n?t.dispatch(n):t.update([])}},10)}Ht.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Xy(t)};Ht.blur=t=>{t.observer.clearSelectionRange(),Xy(t)};Ht.compositionstart=Ht.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ht.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,R.chrome&&R.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ht.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Zt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return yf(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(R.chrome&&R.android&&(i=$y.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return R.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),R.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ht.compositionend(t,e),20),!1};const Pp=new Set;function WS(t){Pp.has(t)||(Pp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Lp=["pre-wrap","normal","pre-line","break-spaces"];let Ni=!1;function Rp(){Ni=!1}class VS{constructor(e){this.lineWrapping=e,this.doc=te.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Lp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=Lp.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let c=l[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class US{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class fn{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?jt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ar?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new fn(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var pe=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(pe||(pe={}));const fo=.001;class st{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>fo&&(Ni=!0),this.height=e)}replace(e,n,r){return st.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:c,toB:h}=i[o],f=s.lineAt(a,pe.ByPosNoHeight,r.setDoc(n),0,0),p=f.to>=u?f:s.lineAt(u,pe.ByPosNoHeight,r,0,0);for(h+=p.to-u,u=p.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,pe.ByPosNoHeight,r,0,0));c+=f.from-a,a=f.from;let g=vf.build(r.setDoc(l),e,c,h);s=$o(s,s.replace(a,u,g))}return s.updateHeight(r,0)}static empty(){return new kt(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new $S(st.of(e.slice(0,n)),l,st.of(e.slice(r)))}}function $o(t,e){return t==e?t:(t.constructor!=e.constructor&&(Ni=!0),e)}st.prototype.size=1;class Zy extends st{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new fn(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class kt extends Zy{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new fn(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof kt||i instanceof Be&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Be?i=new kt(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):st.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Be extends st{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),h=o+c.length*a,f=Math.max(r,e-h/2);return new fn(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:c,length:h}=n.doc.line(s+u);return new fn(c,h,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==pe.ByHeight)return this.blockAt(e,r,i,s);if(n==pe.ByPosNoHeight){let{from:p,to:g}=r.doc.lineAt(e);return new fn(p,g-p,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=o+u.length*a,h=u.number-l,f=i+o*h+a*(u.from-s-h);return new fn(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let c=e,h=i;c<=n;){let f=r.doc.lineAt(c);if(c==e){let g=f.number-o;h+=a*g+u*(e-s-g)}let p=a+u*f.length;l(new fn(f.from,f.length,h,p,0)),h+=p,c=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Be?r[r.length-1]=new Be(s.length+i):r.push(null,new Be(i-1))}if(e>0){let s=r[0];s instanceof Be?r[0]=new Be(e+s.length):r.unshift(new Be(e-1),null)}return st.of(r)}decomposeLeft(e,n){n.push(new Be(e-1),null)}decomposeRight(e,n){n.push(null,new Be(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Be(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let c=e.doc.lineAt(o).length;l.length&&l.push(null);let h=i.heights[i.index++];a==-1?a=h:Math.abs(h-a)>=fo&&(a=-2);let f=new kt(c,h);f.outdated=!1,l.push(f),o+=c+1}o<=s&&l.push(null,new Be(s-o).updateHeight(e,o));let u=st.of(l);return(a<0||Math.abs(u.height-this.height)>=fo||Math.abs(a-this.heightMetrics(e,n).perLine)>=fo)&&(Ni=!0),$o(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class $S extends st{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==pe.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let c=n==pe.ByPosNoHeight?pe.ByPosNoHeight:pe.ByPos;return a?u.join(this.right.lineAt(o,c,r,l,o)):this.left.lineAt(o,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,pe.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&Ip(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),Ip(s,o)}return st.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?st.of(this.break?[e,null,n]:[e,n]):(this.left=$o(this.left,e),this.right=$o(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Ip(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Be&&(r=t[e+1])instanceof Be&&t.splice(e-1,3,new Be(n.length+1+r.length))}const KS=5;class vf{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof kt?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new kt(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new Zy(l,i,r)):(l||s||i>=KS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new kt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Be(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof kt)return e;let n=new kt(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof kt)&&!this.isCovered?this.nodes.push(new kt(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof kt&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new vf(r,e);return le.spans(n,r,i,s,0),s.finish(r)}}function GS(t,e,n){let r=new qS;return le.compare(t,e,n,r,0),r.changes}class qS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&ho(e,n,this.changes,5)}}function YS(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function QS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function JS(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class pu{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return G.replace({widget:new XS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class XS extends rl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class jp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Bp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=De.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(gf).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new VS(n),this.stateDeco=e.facet(Ks).filter(r=>typeof r!="function"),this.heightMap=st.empty().applyChanges(this.stateDeco,te.empty,this.heightOracle.setDoc(e.doc),[new Bt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=G.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new Bl(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Bp:new xf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(os(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Ks).filter(c=>typeof c!="function");let i=e.changedRanges,s=Bt.extendWithRanges(i,GS(r,this.stateDeco,e?e.changes:Le.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Rp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||Ni)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(tS)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?De.RTL:De.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,c=0;if(o.width&&o.height){let{scaleX:S,scaleY:C}=ly(n,o);(S>.005&&Math.abs(this.scaleX-S)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=S,this.scaleY=C,u|=16,l=a=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=uy(e.scrollDOM);let g=(this.printing?JS:YS)(n,this.paddingTop),v=g.top-this.pixelViewport.top,k=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!QS(e.dom))return 0;let y=o.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(l=!0),l||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:A,textHeight:b}=e.docView.measureTextSize();l=C>0&&i.refresh(s,C,A,b,Math.max(5,y/A),S),l&&(e.docView.minWidth=0,u|=16)}v>0&&k>0?c=Math.max(v,k):v<0&&k<0&&(c=Math.min(v,k)),Rp();for(let C of this.viewports){let A=C.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?st.empty().applyChanges(this.stateDeco,te.empty,this.heightOracle,[new Bt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new US(C.from,A))}Ni&&(u|=2)}let x=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new Bl(i.lineAt(l-r*1e3,pe.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,pe.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,pe.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=h.top:f=h.bottom-c,a=new Bl(i.lineAt(f-1e3/2,pe.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,pe.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Bl(this.heightMap.lineAt(r,pe.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,pe.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,pe.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,pe.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new pu(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=De.LTR&&!r)return[];let o=[],a=(c,h,f,p)=>{if(h-c<s)return;let g=this.state.selection.main,v=[g.from];g.empty||v.push(g.to);for(let m of v)if(m>c&&m<h){a(c,m-10,f,p),a(m+10,h,f,p);return}let k=eC(e,m=>m.from>=f.from&&m.to<=f.to&&Math.abs(m.from-c)<s&&Math.abs(m.to-h)<s&&!v.some(y=>m.from<y&&m.to>y));if(!k){if(h<f.to&&n&&r&&n.visibleRanges.some(x=>x.from<=h&&x.to>=h)){let x=n.moveToLineBoundary(T.cursor(h),!1,!0).head;x>c&&(h=x)}let m=this.gapSize(f,c,h,p),y=r||m<2e6?m:2e6;k=new pu(c,h,m,y)}o.push(k)},u=c=>{if(c.length<l||c.type!=jt.Text)return;let h=ZS(c.from,c.to,this.stateDeco);if(h.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,k,m;if(f!=null){let y=_l(h,f),x=((this.visibleBottom-this.visibleTop)/2+v)/c.height;k=y-x,m=y+x}else k=(this.visibleTop-c.top-v)/c.height,m=(this.visibleBottom-c.top+v)/c.height;p=Fl(h,k),g=Fl(h,m)}else{let v=h.total*this.heightOracle.charWidth,k=i*this.heightOracle.charWidth,m=0;if(v>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=A.size-A.displaySize);let y=this.pixelViewport.left+m,x=this.pixelViewport.right+m,S,C;if(f!=null){let A=_l(h,f),b=((x-y)/2+k)/v;S=A-b,C=A+b}else S=(y-k)/v,C=(x+k)/v;p=Fl(h,S),g=Fl(h,C)}p>c.from&&a(c.from,p,c,h),g<c.to&&a(g,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return o}gapSize(e,n,r,i){let s=_l(i,r)-_l(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){pu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=G.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];le.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||os(this.heightMap.lineAt(e,pe.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||os(this.heightMap.lineAt(this.scaler.fromDOM(e),pe.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return os(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Bl{constructor(e,n){this.from=e,this.to=n}}function ZS(t,e,n){let r=[],i=t,s=0;return le.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Fl({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function _l(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function eC(t,e){for(let n of t)if(e(n))return n}const Bp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class xf{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,pe.ByPos,e,0,0).top,c=n.lineAt(a,pe.ByPos,e,0,0).bottom;return i+=c-u,{from:o,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof xf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function os(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new fn(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>os(i,e)):t._content)}const zl=_.define({combine:t=>t.join(" ")}),Qc=_.define({combine:t=>t.indexOf(!0)>-1}),Jc=lr.newName(),ev=lr.newName(),tv=lr.newName(),nv={"&light":"."+ev,"&dark":"."+tv};function Xc(t,e,n){return new lr(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const tC=Xc("."+Jc,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},nv),nC={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},mu=R.ie&&R.ie_version<=11;class rC{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new jk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(R.ie&&R.ie_version<=11||R.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&R.android&&e.constructor.EDIT_CONTEXT!==!1&&!(R.chrome&&R.chrome_version<126)&&(this.editContext=new sC(e),e.state.facet(kn)&&(e.contentDOM.editContext=this.editContext.editContext)),mu&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(kn)?r.root.activeElement!=this.dom:!co(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(R.ie&&R.ie_version<=11||R.android&&R.chrome)&&!r.state.selection.main.empty&&i.focusNode&&xs(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Us(e.root);if(!n)return!1;let r=R.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&iC(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=co(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Fk(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,nC),mu&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),mu&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&mi(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&co(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new kS(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=Uy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=Fp(n,e.previousSibling||e.target.previousSibling,-1),i=Fp(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(kn)!=e.state.facet(kn)&&(e.view.contentDOM.editContext=e.state.facet(kn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Fp(t,e,n){for(;e;){let r=ce.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function _p(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return xs(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function iC(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return _p(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?_p(t,n):null}class sC{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:te.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=T.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((R.mac||R.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:te.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);yf(e,u,T.single(this.toEditorPos(r.selectionStart,c),this.toEditorPos(r.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(G.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:Ry.of(G.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Us(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let c=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class F{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Bk(e.parent)||document,this.viewState=new jp(e.state||re.create(e)),e.scrollTo&&e.scrollTo.is(Rl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(si).map(i=>new hu(i));for(let i of this.plugins)i.update(this);this.observer=new rC(this),this.inputState=new ES(this),this.inputState.ensureHandlers(this.plugins),this.docView=new yp(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Je?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(Qy))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=Jy(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(re.phrases)!=this.state.facet(re.phrases))return this.setState(s);i=Uo.create(this,s,e),i.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;h=new gi(p.empty?p:T.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(Rl)&&(h=p.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=Ko.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(ss)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(zl)!=i.state.facet(zl)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(Gc))try{f(i)}catch(p){dn(this.state,p,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Uy(this,c)&&u.force&&mi(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new jp(e),this.plugins=e.facet(si).map(r=>new hu(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new yp(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(si),r=e.state.facet(si);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new hu(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){dn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(uy(r))s=-1,l=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);s=p.from,l=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(p=>{try{return p.read(this)}catch(g){return dn(this.state,g),zp}}),h=Uo.create(this,this.state,[]),f=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let p=0;p<u.length;p++)if(c[p]!=zp)try{let g=u[p];g.write&&g.write(c[p],this)}catch(g){dn(this.state,g)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(g>1||g<-1){i=i+g,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(Gc))o(n)}get themeClasses(){return Jc+" "+(this.state.facet(Qc)?tv:ev)+" "+this.state.facet(zl)}updateAttrs(){let e=Hp(this,Iy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(kn)?"true":"false",class:"cm-content",style:`${R.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Hp(this,gf,n);let r=this.observer.ignore(()=>{let i=Wc(this.contentDOM,this.contentAttrs,n),s=Wc(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(F.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(ss);let e=this.state.facet(F.cspNonce);lr.mount(this.root,this.styleModules.concat(tC).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return du(this,e,Sp(this,e,n,r))}moveByGroup(e,n){return du(this,e,Sp(this,e,n,r=>yS(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return T.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return gS(this,e,n,r)}moveVertically(e,n,r){return du(this,e,vS(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Hy(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[Gn.find(s,e-i.from,-1,n)];return ba(r,l.dir==De.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Py)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>lC)return by(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||Cy(s.isolates,r=gp(this,e))))return s.order;r||(r=gp(this,e));let i=Xk(e.text,n,r);return this.bidiCache.push(new Ko(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||R.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{oy(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Rl.of(new gi(typeof e=="number"?T.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Rl.of(new gi(T.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Et.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Et.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=lr.newName(),i=[zl.of(r),ss.of(Xc(`.${r}`,e))];return n&&n.dark&&i.push(Qc.of(!0)),i}static baseTheme(e){return wa.lowest(ss.of(Xc("."+Jc,e,nv)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ce.get(r)||ce.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}F.styleModule=ss;F.inputHandler=Dy;F.clipboardInputFilter=pf;F.clipboardOutputFilter=mf;F.scrollHandler=Ly;F.focusChangeEffect=Oy;F.perLineTextDirection=Py;F.exceptionSink=Ny;F.updateListener=Gc;F.editable=kn;F.mouseSelectionStyle=My;F.dragMovesSelection=Ty;F.clickAddsSelectionRange=Ey;F.decorations=Ks;F.outerDecorations=jy;F.atomicRanges=ll;F.bidiIsolatedRanges=By;F.scrollMargins=Fy;F.darkTheme=Qc;F.cspNonce=_.define({combine:t=>t.length?t[0]:""});F.contentAttributes=gf;F.editorAttributes=Iy;F.lineWrapping=F.contentAttributes.of({class:"cm-lineWrapping"});F.announce=fe.define();const lC=4096,zp={};class Ko{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:De.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new Ko(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function Hp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&Hc(l,n)}return n}const oC=R.mac?"mac":R.windows?"win":R.linux?"linux":"key";function aC(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function Hl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const uC=wa.default(F.domEventHandlers({keydown(t,e){return sv(iv(e.state),t,e,"editor")}})),rv=_.define({enables:uC}),Wp=new WeakMap;function iv(t){let e=t.facet(rv),n=Wp.get(e);return n||Wp.set(e,n=fC(e.reduce((r,i)=>r.concat(i),[]))),n}function cC(t,e,n){return sv(iv(t.state),e,t,n)}let Vn=null;const hC=4e3;function fC(t,e=oC){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,c)=>{var h,f;let p=n[l]||(n[l]=Object.create(null)),g=o.split(/ (?!$)/).map(m=>aC(m,e));for(let m=1;m<g.length;m++){let y=g.slice(0,m).join(" ");i(y,!0),p[y]||(p[y]={preventDefault:!0,stopPropagation:!1,run:[x=>{let S=Vn={view:x,prefix:y,scope:l};return setTimeout(()=>{Vn==S&&(Vn=null)},hC),!0}]})}let v=g.join(" ");i(v,!1);let k=p[v]||(p[v]={preventDefault:!1,stopPropagation:!1,run:((f=(h=p._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});a&&k.run.push(a),u&&(k.preventDefault=!0),c&&(k.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=l;for(let f in c)c[f].run.push(p=>h(p,Zc))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Zc=null;function sv(t,e,n,r){Zc=e;let i=Pk(e),s=U0(i,0),l=$0(s)==i.length&&i!=" ",o="",a=!1,u=!1,c=!1;Vn&&Vn.view==n&&Vn.scope==r&&(o=Vn.prefix+" ",Ky.indexOf(e.keyCode)<0&&(u=!0,Vn=null));let h=new Set,f=k=>{if(k){for(let m of k.run)if(!h.has(m)&&(h.add(m),m(n)))return k.stopPropagation&&(c=!0),!0;k.preventDefault&&(k.stopPropagation&&(c=!0),u=!0)}return!1},p=t[r],g,v;return p&&(f(p[o+Hl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(R.windows&&e.ctrlKey&&e.altKey)&&!(R.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=or[e.keyCode])&&g!=i?(f(p[o+Hl(g,e,!0)])||e.shiftKey&&(v=Vs[e.keyCode])!=i&&v!=g&&f(p[o+Hl(v,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(p[o+Hl(i,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),Zc=null,a}function dC(){return mC}const pC=G.line({class:"cm-activeLine"}),mC=Et.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(pC.range(i.from)),e=i.from)}return G.set(n)}},{decorations:t=>t.decorations}),Vp=_.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Go(t,e){let n=t.plugin(lv),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const lv=Et.fromClass(class{constructor(t){this.input=t.state.facet(qo),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(Vp);this.top=new Wl(t,!0,e.topContainer),this.bottom=new Wl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(Vp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Wl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Wl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(qo);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),o.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:l).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>F.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Wl{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Up(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Up(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Up(t){let e=t.nextSibling;return t.remove(),e}const qo=_.define({enables:lv});class ur extends Ei{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ur.prototype.elementClass="";ur.prototype.toDOM=void 0;ur.prototype.mapMode=St.TrackBefore;ur.prototype.startSide=ur.prototype.endSide=-1;ur.prototype.point=!0;const gu=_.define(),gC=_.define(),yC={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>le.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Ss=_.define();function vC(t){return[ov(),Ss.of({...yC,...t})]}const $p=_.define({combine:t=>t.some(e=>e)});function ov(t){return[xC]}const xC=Et.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Ss).map(e=>new Gp(t,e)),this.fixed=!t.state.facet($p);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet($p)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=le.iter(this.view.state.facet(gu),this.view.viewport.from),r=[],i=this.gutters.map(s=>new wC(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==jt.Text&&l){eh(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==jt.Text){eh(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Ss),n=t.state.facet(Ss),r=t.docChanged||t.heightChanged||t.viewportChanged||!le.eq(t.startState.facet(gu),t.state.facet(gu),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new Gp(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>F.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==De.LTR?{left:r,right:i}:{right:r,left:i}})});function Kp(t){return Array.isArray(t)?t:[t]}function eh(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class wC{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=le.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new av(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];eh(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(gC)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Gp{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=Kp(n.markers(e)),n.initialSpacer&&(this.spacer=new av(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=Kp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!le.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class av{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),kC(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let h=l;h<this.markers.length;h++)if(this.markers[h].compare(a)){o=h,u=!0;break}}else o=this.markers.length;for(;l<o;){let c=this.markers[l++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function kC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const SC=_.define(),CC=_.define(),li=_.define({combine(t){return Sa(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class yu extends ur{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function vu(t,e){return t.state.facet(li).formatNumber(e,t.state)}const bC=Ss.compute([li],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(SC)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new yu(vu(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(CC)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(li)!=e.state.facet(li),initialSpacer(e){return new yu(vu(e,qp(e.state.doc.lines)))},updateSpacer(e,n){let r=vu(n.view,qp(n.view.state.doc.lines));return r==e.number?e:new yu(r)},domEventHandlers:t.facet(li).domEventHandlers,side:"before"}));function AC(t={}){return[li.of(t),ov(),bC]}function qp(t){let e=9;for(;e<t;)e=e*10+9;return e}const EC=1024;let TC=0;class xu{constructor(e,n){this.from=e,this.to=n}}class Q{constructor(e={}){this.id=TC++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=mt.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Q.closedBy=new Q({deserialize:t=>t.split(" ")});Q.openedBy=new Q({deserialize:t=>t.split(" ")});Q.group=new Q({deserialize:t=>t.split(" ")});Q.isolate=new Q({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Q.contextHash=new Q({perNode:!0});Q.lookAhead=new Q({perNode:!0});Q.mounted=new Q({perNode:!0});class Yo{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[Q.mounted.id]}}const MC=Object.create(null);class mt{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):MC,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new mt(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Q.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Q.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}mt.none=new mt("",Object.create(null),0,8);class wf{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new mt(r.name,i,r.id,r.flags):r)}return new wf(n)}}const Vl=new WeakMap,Yp=new WeakMap;var _e;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(_e||(_e={}));class xe{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=Yo.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new nh(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Vl.get(this)||this.topNode,s=new nh(i);return s.moveTo(e,n),Vl.set(this,s._tree),s}get topNode(){return new Ft(this,0,0,null)}resolve(e,n=0){let r=Gs(Vl.get(this)||this.topNode,e,n,!1);return Vl.set(this,r),r}resolveInner(e,n=0){let r=Gs(Yp.get(this)||this.topNode,e,n,!0);return Yp.set(this,r),r}resolveStack(e,n=0){return OC(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&_e.IncludeAnonymous)>0;for(let a=this.cursor(l|_e.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Cf(mt.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new xe(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new xe(mt.none,n,r,i)))}static build(e){return PC(e)}}xe.empty=new xe(mt.none,[],[],0);class kf{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new kf(this.buffer,this.index)}}class cr{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return mt.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(uv(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new cr(s,l,this.set)}}function uv(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Gs(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Ft&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:_e.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Ft&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class cv{cursor(e=0){return new nh(this,e)}getChild(e,n=null,r=null){let i=Qp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Qp(this,e,n,r)}resolve(e,n=0){return Gs(this,e,n,!1)}resolveInner(e,n=0){return Gs(this,e,n,!0)}matchContext(e){return th(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Ft extends cv{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let c=o[e],h=a[e]+l.from;if(uv(i,r,h,h+c.length)){if(c instanceof cr){if(s&_e.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,r-h,i);if(f>-1)return new qn(new NC(l,c,e,h),null,f)}else if(s&_e.IncludeAnonymous||!c.type.isAnonymous||Sf(c)){let f;if(!(s&_e.IgnoreMounts)&&(f=Yo.get(c))&&!f.overlay)return new Ft(f.tree,h,e,l);let p=new Ft(c,h,e,l);return s&_e.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&_e.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&_e.IgnoreOverlays)&&(i=Yo.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Ft(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Qp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function th(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class NC{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class qn extends cv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new qn(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&_e.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new qn(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new qn(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new qn(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new xe(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function hv(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Ft&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new DC(i,n)}class DC{constructor(e,n){this.heads=e,this.node=n}get next(){return hv(this.heads)}}function OC(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Ft?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=Yo.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Ft(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Gs(o,e,n,!1))}}return i?hv(i):r}class nh{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ft)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ft?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&_e.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&_e.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&_e.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&_e.IncludeAnonymous||o instanceof cr||!o.type.isAnonymous||Sf(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new qn(this.buffer,n,this.stack[i]);return this.bufferNode=new qn(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return th(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return th(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function Sf(t){return t.children.some(e=>e instanceof cr||!e.type.isAnonymous||Sf(e))}function PC(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=EC,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new kf(n,n.length):n,a=r.types,u=0,c=0;function h(C,A,b,D,V,j){let{id:H,start:W,end:J,size:ie}=o,ge=c,at=u;for(;ie<0;)if(o.next(),ie==-1){let X=s[H];b.push(X),D.push(W-C);return}else if(ie==-3){u=H;return}else if(ie==-4){c=H;return}else throw new RangeError(`Unrecognized record size: ${ie}`);let et=a[H],P,U,$=W-C;if(J-W<=i&&(U=k(o.pos-A,V))){let X=new Uint16Array(U.size-U.skip),Z=o.pos-U.size,Oe=X.length;for(;o.pos>Z;)Oe=m(U.start,X,Oe);P=new cr(X,J-U.start,r),$=U.start-C}else{let X=o.pos-ie;o.next();let Z=[],Oe=[],ee=H>=l?H:-1,gt=0,ae=J;for(;o.pos>X;)ee>=0&&o.id==ee&&o.size>=0?(o.end<=ae-i&&(g(Z,Oe,W,gt,o.end,ae,ee,ge,at),gt=Z.length,ae=o.end),o.next()):j>2500?f(W,X,Z,Oe):h(W,X,Z,Oe,ee,j+1);if(ee>=0&&gt>0&&gt<Z.length&&g(Z,Oe,W,gt,W,ae,ee,ge,at),Z.reverse(),Oe.reverse(),ee>-1&&gt>0){let Dt=p(et,at);P=Cf(et,Z,Oe,0,Z.length,0,J-W,Dt,Dt)}else P=v(et,Z,Oe,J-W,ge-J,at)}b.push(P),D.push($)}function f(C,A,b,D){let V=[],j=0,H=-1;for(;o.pos>A;){let{id:W,start:J,end:ie,size:ge}=o;if(ge>4)o.next();else{if(H>-1&&J<H)break;H<0&&(H=ie-i),V.push(W,J,ie),j++,o.next()}}if(j){let W=new Uint16Array(j*4),J=V[V.length-2];for(let ie=V.length-3,ge=0;ie>=0;ie-=3)W[ge++]=V[ie],W[ge++]=V[ie+1]-J,W[ge++]=V[ie+2]-J,W[ge++]=ge;b.push(new cr(W,V[2]-J,r)),D.push(J-C)}}function p(C,A){return(b,D,V)=>{let j=0,H=b.length-1,W,J;if(H>=0&&(W=b[H])instanceof xe){if(!H&&W.type==C&&W.length==V)return W;(J=W.prop(Q.lookAhead))&&(j=D[H]+W.length+J)}return v(C,b,D,V,j,A)}}function g(C,A,b,D,V,j,H,W,J){let ie=[],ge=[];for(;C.length>D;)ie.push(C.pop()),ge.push(A.pop()+b-V);C.push(v(r.types[H],ie,ge,j-V,W-j,J)),A.push(V-b)}function v(C,A,b,D,V,j,H){if(j){let W=[Q.contextHash,j];H=H?[W].concat(H):[W]}if(V>25){let W=[Q.lookAhead,V];H=H?[W].concat(H):[W]}return new xe(C,A,b,D,H)}function k(C,A){let b=o.fork(),D=0,V=0,j=0,H=b.end-i,W={size:0,start:0,skip:0};e:for(let J=b.pos-C;b.pos>J;){let ie=b.size;if(b.id==A&&ie>=0){W.size=D,W.start=V,W.skip=j,j+=4,D+=4,b.next();continue}let ge=b.pos-ie;if(ie<0||ge<J||b.start<H)break;let at=b.id>=l?4:0,et=b.start;for(b.next();b.pos>ge;){if(b.size<0)if(b.size==-3)at+=4;else break e;else b.id>=l&&(at+=4);b.next()}V=et,D+=ie,j+=at}return(A<0||D==C)&&(W.size=D,W.start=V,W.skip=j),W.size>4?W:void 0}function m(C,A,b){let{id:D,start:V,end:j,size:H}=o;if(o.next(),H>=0&&D<l){let W=b;if(H>4){let J=o.pos-(H-4);for(;o.pos>J;)b=m(C,A,b)}A[--b]=W,A[--b]=j-C,A[--b]=V-C,A[--b]=D}else H==-3?u=D:H==-4&&(c=D);return b}let y=[],x=[];for(;o.pos>0;)h(t.start||0,t.bufferStart||0,y,x,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:y.length?x[0]+y[0].length:0;return new xe(a[t.topID],y.reverse(),x.reverse(),S)}const Jp=new WeakMap;function po(t,e){if(!t.isAnonymous||e instanceof cr||e.type!=t)return 1;let n=Jp.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof xe)){n=1;break}n+=po(t,r)}Jp.set(e,n)}return n}function Cf(t,e,n,r,i,s,l,o,a){let u=0;for(let g=r;g<i;g++)u+=po(t,e[g]);let c=Math.ceil(u*1.5/8),h=[],f=[];function p(g,v,k,m,y){for(let x=k;x<m;){let S=x,C=v[x],A=po(t,g[x]);for(x++;x<m;x++){let b=po(t,g[x]);if(A+b>=c)break;A+=b}if(x==S+1){if(A>c){let b=g[S];p(b.children,b.positions,0,b.children.length,v[S]+y);continue}h.push(g[S])}else{let b=v[x-1]+g[x-1].length-C;h.push(Cf(t,g,v,S,x,C,b,null,a))}f.push(C+y-s)}}return p(e,n,r,i,0),(o||a)(h,f,l)}class Mr{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Mr(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let c=o<n.length?n[o]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;l&&l.from<h;){let f=l;if(a>=f.from||h<=f.to||u){let p=Math.max(f.from,a)-u,g=Math.min(f.to,h)-u;f=p>=g?null:new Mr(p,g,f.tree,f.offset+u,o>0,!!c)}if(f&&i.push(f),l.to>h)break;l=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}}class fv{startParse(e,n,r){return typeof e=="string"&&(e=new LC(e)),r=r?r.length?r.map(i=>new xu(i.from,i.to)):[new xu(0,0)]:[new xu(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class LC{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Q({perNode:!0});let RC=0;class Lt{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=RC++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Lt&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new Lt(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Qo(e);return r=>r.modified.indexOf(n)>-1?r:Qo.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let IC=0;class Qo{constructor(e){this.name=e,this.instances=[],this.id=IC++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&jC(n,o.modified));if(r)return r;let i=[],s=new Lt(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=BC(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(Qo.get(o,a));return s}}function jC(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function BC(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function FC(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let h=0;;){if(o=="..."&&h>0&&h+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let p=i[h++];if(h==i.length&&p=="!"){l=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);o=i.slice(h)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new Jo(r,l,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return dv.add(e)}const dv=new Q;class Jo{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Jo.empty=new Jo([],2,null);function pv(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function _C(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function zC(t,e,n,r=0,i=t.length){let s=new HC(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class HC{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(l)));let u=i,c=WC(e)||Jo.empty,h=_C(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,o),u),c.opaque)return;let f=e.tree&&e.tree.prop(Q.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+o,1),g=this.highlighters.filter(k=>!k.scope||k.scope(f.tree.type)),v=e.firstChild();for(let k=0,m=o;;k++){let y=k<f.overlay.length?f.overlay[k]:null,x=y?y.from+o:a,S=Math.max(n,m),C=Math.min(r,x);if(S<C&&v)for(;e.from<C&&(this.highlightRange(e,S,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=x||!e.nextSibling())););if(!y||x>r)break;m=y.to+o,m>n&&(this.highlightRange(p.cursor(),Math.max(n,y.from+o),Math.min(r,m),"",g),this.startSpan(Math.min(r,m),u))}v&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function WC(t){let e=t.type.prop(dv);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const O=Lt.define,Ul=O(),Fn=O(),Xp=O(Fn),Zp=O(Fn),_n=O(),$l=O(_n),wu=O(_n),an=O(),yr=O(an),ln=O(),on=O(),rh=O(),Xi=O(rh),Kl=O(),N={comment:Ul,lineComment:O(Ul),blockComment:O(Ul),docComment:O(Ul),name:Fn,variableName:O(Fn),typeName:Xp,tagName:O(Xp),propertyName:Zp,attributeName:O(Zp),className:O(Fn),labelName:O(Fn),namespace:O(Fn),macroName:O(Fn),literal:_n,string:$l,docString:O($l),character:O($l),attributeValue:O($l),number:wu,integer:O(wu),float:O(wu),bool:O(_n),regexp:O(_n),escape:O(_n),color:O(_n),url:O(_n),keyword:ln,self:O(ln),null:O(ln),atom:O(ln),unit:O(ln),modifier:O(ln),operatorKeyword:O(ln),controlKeyword:O(ln),definitionKeyword:O(ln),moduleKeyword:O(ln),operator:on,derefOperator:O(on),arithmeticOperator:O(on),logicOperator:O(on),bitwiseOperator:O(on),compareOperator:O(on),updateOperator:O(on),definitionOperator:O(on),typeOperator:O(on),controlOperator:O(on),punctuation:rh,separator:O(rh),bracket:Xi,angleBracket:O(Xi),squareBracket:O(Xi),paren:O(Xi),brace:O(Xi),content:an,heading:yr,heading1:O(yr),heading2:O(yr),heading3:O(yr),heading4:O(yr),heading5:O(yr),heading6:O(yr),contentSeparator:O(an),list:O(an),quote:O(an),emphasis:O(an),strong:O(an),link:O(an),monospace:O(an),strikethrough:O(an),inserted:O(),deleted:O(),changed:O(),invalid:O(),meta:Kl,documentMeta:O(Kl),annotation:O(Kl),processingInstruction:O(Kl),definition:Lt.defineModifier("definition"),constant:Lt.defineModifier("constant"),function:Lt.defineModifier("function"),standard:Lt.defineModifier("standard"),local:Lt.defineModifier("local"),special:Lt.defineModifier("special")};for(let t in N){let e=N[t];e instanceof Lt&&(e.name=t)}pv([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}]);var ku;const oi=new Q;function VC(t){return _.define({combine:t?e=>e.concat(t):void 0})}const UC=new Q;class qt{constructor(e,n,r=[],i=""){this.data=e,this.name=i,re.prototype.hasOwnProperty("tree")||Object.defineProperty(re.prototype,"tree",{get(){return Tt(this)}}),this.parser=n,this.extension=[hr.of(this),re.languageData.of((s,l,o)=>{let a=em(s,l,o),u=a.type.prop(oi);if(!u)return[];let c=s.facet(u),h=a.type.prop(UC);if(h){let f=a.resolve(l-a.from,o);for(let p of h)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return em(e,n,r).type.prop(oi)==this.data}findRegions(e){let n=e.facet(hr);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(oi)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(Q.mounted);if(o){if(o.tree.prop(oi)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof xe&&i(u,s.positions[a]+l)}};return i(Tt(e),0),r}get allowsNesting(){return!0}}qt.setState=fe.define();function em(t,e,n){let r=t.facet(hr),i=Tt(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,_e.ExcludeBuffers))s.type.isTop&&(i=s);return i}function Tt(t){let e=t.field(qt.state,!1);return e?e.tree:xe.empty}class $C{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Zi=null;class Di{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Di(e,n,[],xe.empty,0,r,[],null)}startParse(){return this.parser.startParse(new $C(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=xe.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Mr.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Mr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Zi;Zi=this;try{return e()}finally{Zi=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=tm(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,h,f)=>a.push({fromA:u,toA:c,fromB:h,toB:f})),r=Mr.applyChanges(r,a),i=xe.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&o.push({from:c,to:h})}}}return new Di(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=tm(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends fv{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Zi;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new xe(mt.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Zi}}function tm(t,e,n){return Mr.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Oi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Oi(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Di.create(e.facet(hr).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Oi(r)}}qt.state=en.define({create:Oi.init,update(t,e){for(let n of e.effects)if(n.is(qt.setState))return n.value;return e.startState.facet(hr)!=e.state.facet(hr)?Oi.init(e.state):t.apply(e)}});let mv=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(mv=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Su=typeof navigator<"u"&&(!((ku=navigator.scheduling)===null||ku===void 0)&&ku.isInputPending)?()=>navigator.scheduling.isInputPending():null,KC=Et.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(qt.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(qt.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=mv(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(qt.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!Su?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>Su&&Su()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:qt.setState.of(new Oi(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>dn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),hr=_.define({combine(t){return t.length?t[0]:null},enables:t=>[qt.state,KC,F.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),GC=_.define(),bf=_.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Fr(t){let e=t.facet(bf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function qs(t,e){let n="",r=t.tabSize,i=t.facet(bf)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function Af(t,e){t instanceof re&&(t=new Ta(t));for(let r of t.state.facet(GC)){let i=r(t,e);if(i!==void 0)return i}let n=Tt(t.state);return n.length>=e?qC(t,n,e):null}class Ta{constructor(e,n={}){this.state=e,this.options=n,this.unit=Fr(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Ca(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const gv=new Q;function qC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return yv(r,t,n)}function yv(t,e,n){for(let r=t;r;r=r.next){let i=QC(r.node);if(i)return i(Ef.create(e,n,r))}return 0}function YC(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function QC(t){let e=t.type.prop(gv);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Q.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>eb(l,!0,1,void 0,s&&!YC(l)?i.from:void 0)}return t.parent==null?JC:null}function JC(){return 0}class Ef extends Ta{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new Ef(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(XC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return yv(this.context.next,this.base,this.pos)}}function XC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function ZC(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function eb(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=ZC(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const tb=200;function nb(){return re.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+tb)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let c=l.doc.lineAt(u);if(c.from==o)continue;o=c.from;let h=Af(l,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],p=qs(l,h);f!=p&&a.push({from:c.from,to:c.from+f.length,insert:p})}return a.length?[t,{changes:a,sequential:!0}]:t})}const rb=_.define(),ib=new Q;function sb(t,e,n){let r=Tt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(ib);if(a&&(o.to<r.length-50||r.length==t.doc.length||!lb(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function lb(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function nm(t,e,n){for(let r of t.facet(rb)){let i=r(t,e,n);if(i)return i}return sb(t,e,n)}function vv(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const xv=fe.define({map:vv}),Tf=fe.define({map:vv}),Xo=en.define({create(){return G.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=rm(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(xv)&&!ob(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(wv),i=r?G.replace({widget:new cb(r(e.state,n.value))}):im;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(Tf)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=rm(t,e.selection.main.head)),t},provide:t=>F.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(im.range(r,i))}return G.set(e,!0)}});function rm(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function ih(t,e,n){var r;let i=null;return(r=t.field(Xo,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function ob(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const ab={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},wv=_.define({combine(t){return Sa(t,ab)}});function ub(t){return[Xo,db]}function kv(t,e){let{state:n}=t,r=n.facet(wv),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=ih(t.state,o.from,o.to);a&&t.dispatch({effects:Tf.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const im=G.replace({widget:new class extends rl{toDOM(t){return kv(t,null)}}});class cb extends rl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return kv(e,this.value)}}const hb={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Cu extends ur{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function fb(t={}){let e={...hb,...t},n=new Cu(e,!0),r=new Cu(e,!1),i=Et.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(hr)!=l.state.facet(hr)||l.startState.field(Xo,!1)!=l.state.field(Xo,!1)||Tt(l.startState)!=Tt(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new Rr;for(let a of l.viewportLineBlocks){let u=ih(l.state,a.from,a.to)?r:nm(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,vC({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||le.empty},initialSpacer(){return new Cu(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=ih(l.state,o.from,o.to);if(u)return l.dispatch({effects:Tf.of(u)}),!0;let c=nm(l.state,o.from,o.to);return c?(l.dispatch({effects:xv.of(c)}),!0):!1}}}),ub()]}const db=F.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ma{constructor(e,n){this.specs=e;let r;function i(o){let a=lr.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof qt?o=>o.prop(oi)==l.data:l?o=>o==l:void 0,this.style=pv(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new lr(r):null,this.themeType=n.themeType}static define(e,n){return new Ma(e,n||{})}}const sh=_.define(),pb=_.define({combine(t){return t.length?[t[0]]:null}});function bu(t){let e=t.facet(sh);return e.length?e:t.facet(pb)}function mb(t,e){let n=[yb],r;return t instanceof Ma&&(t.module&&n.push(F.styleModule.of(t.module)),r=t.themeType),r?n.push(sh.computeN([F.darkTheme],i=>i.facet(F.darkTheme)==(r=="dark")?[t]:[])):n.push(sh.of(t)),n}class gb{constructor(e){this.markCache=Object.create(null),this.tree=Tt(e.state),this.decorations=this.buildDeco(e,bu(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Tt(e.state),r=bu(e.state),i=r!=bu(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return G.none;let r=new Rr;for(let{from:i,to:s}of e.visibleRanges)zC(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=G.mark({class:a})))},i,s);return r.finish()}}const yb=wa.high(Et.fromClass(gb,{decorations:t=>t.decorations})),vb=F.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Sv=1e4,Cv="()[]{}",bv=_.define({combine(t){return Sa(t,{afterCursor:!0,brackets:Cv,maxScanDistance:Sv,renderMatch:kb})}}),xb=G.mark({class:"cm-matchingBracket"}),wb=G.mark({class:"cm-nonmatchingBracket"});function kb(t){let e=[],n=t.matched?xb:wb;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const Sb=en.define({create(){return G.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(bv);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=pn(e.state,i.head,-1,r)||i.head>0&&pn(e.state,i.head-1,1,r)||r.afterCursor&&(pn(e.state,i.head,1,r)||i.head<e.state.doc.length&&pn(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return G.set(n,!0)},provide:t=>F.decorations.from(t)}),Cb=[Sb,vb];function bb(t={}){return[bv.of(t),Cb]}const Ab=new Q;function lh(t,e,n){let r=t.prop(e<0?Q.openedBy:Q.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function oh(t){let e=t.type.prop(Ab);return e?e(t.node):t}function pn(t,e,n,r={}){let i=r.maxScanDistance||Sv,s=r.brackets||Cv,l=Tt(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=lh(a.type,n,s);if(u&&a.from<a.to){let c=oh(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return Eb(t,e,n,a,c,u,s)}}return Tb(t,e,n,l,o.type,i,s)}function Eb(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,c=o==null?void 0:o.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=oh(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(lh(c.type,n,l))u++;else if(lh(c.type,-n,l)){if(u==0){let h=oh(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function Tb(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let p=c.value;n<0&&(f+=p.length);let g=e+f*n;for(let v=n>0?0:p.length-1,k=n>0?p.length:-1;v!=k;v+=n){let m=l.indexOf(p[v]);if(!(m<0||r.resolveInner(g+v,1).type!=i))if(m%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:g+v,to:g+v+1},matched:m>>1==a>>1};h--}}n>0&&(f+=p.length)}return c.done?{start:u,matched:!1}:null}function sm(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class Av{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=sm(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:sm(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function Mb(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||Nb,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Df,mergeTokens:t.mergeTokens!==!1}}function Nb(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const lm=new WeakMap;class Mf extends qt{constructor(e){let n=VC(e.languageData),r=Mb(e),i,s=new class extends fv{createParse(l,o,a){return new Ob(i,l,o,a)}};super(n,s,[],e.name),this.topNode=Rb(n,this),i=this,this.streamParser=r,this.stateAfter=new Q({perNode:!0}),this.tokenTable=e.tokenTable?new Nv(r.tokenTable):Lb}static define(e){return new Mf(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=lm.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=Nf(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let c=r?r(a.from):-1,h=new Av(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;h.pos<u-a.from;)Tv(this.streamParser.token,h,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&lm.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function Nf(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof xe&&a<i&&Nf(t,o,a,r,i);if(u)return u}return null}function Ev(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof xe){if(!(a=Ev(t,o,n-l,r-l,i)))break;return i?new xe(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function Db(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&Nf(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=Ev(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Fr(i):4),tree:xe.empty}}class Ob{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=Di.get(),l=i[0].from,{state:o,tree:a}=Db(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Fr(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Di.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new Av(n,e?e.state.tabSize:4,e?Fr(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=Tv(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=xe.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Pb,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new xe(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new xe(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Tv(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const Df=Object.create(null),Ys=[mt.none],Pb=new wf(Ys),om=[],am=Object.create(null),Mv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Mv[t]=Dv(Df,e);class Nv{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Mv)}resolve(e){return e?this.table[e]||(this.table[e]=Dv(this.extra,e)):0}}const Lb=new Nv(Df);function Au(t,e){om.indexOf(t)>-1||(om.push(t),console.warn(e))}function Dv(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let c=t[u]||N[u];c?typeof c=="function"?a.length?a=a.map(c):Au(u,`Modifier ${u} used at start of tag`):a.length?Au(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:Au(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=am[i];if(s)return s.id;let l=am[i]=mt.define({id:Ys.length,name:r,props:[FC({[r]:n})]});return Ys.push(l),l.id}function Rb(t,e){let n=mt.define({id:Ys.length,name:"Document",props:[oi.add(()=>t),gv.add(()=>r=>e.getIndent(r))],top:!0});return Ys.push(n),n}De.RTL,De.LTR;const Ib="#e5c07b",um="#e06c75",jb="#56b6c2",Bb="#ffffff",mo="#abb2bf",ah="#7d8799",Fb="#61afef",_b="#98c379",cm="#d19a66",zb="#c678dd",Hb="#21252b",hm="#2c313a",fm="#282c34",Eu="#353a42",Wb="#3E4451",dm="#528bff",Vb=F.theme({"&":{color:mo,backgroundColor:fm},".cm-content":{caretColor:dm},".cm-cursor, .cm-dropCursor":{borderLeftColor:dm},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Wb},".cm-panels":{backgroundColor:Hb,color:mo},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:fm,color:ah,border:"none"},".cm-activeLineGutter":{backgroundColor:hm},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Eu},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Eu,borderBottomColor:Eu},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:hm,color:mo}}},{dark:!0}),Ub=Ma.define([{tag:N.keyword,color:zb},{tag:[N.name,N.deleted,N.character,N.propertyName,N.macroName],color:um},{tag:[N.function(N.variableName),N.labelName],color:Fb},{tag:[N.color,N.constant(N.name),N.standard(N.name)],color:cm},{tag:[N.definition(N.name),N.separator],color:mo},{tag:[N.typeName,N.className,N.number,N.changed,N.annotation,N.modifier,N.self,N.namespace],color:Ib},{tag:[N.operator,N.operatorKeyword,N.url,N.escape,N.regexp,N.link,N.special(N.string)],color:jb},{tag:[N.meta,N.comment],color:ah},{tag:N.strong,fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.link,color:ah,textDecoration:"underline"},{tag:N.heading,fontWeight:"bold",color:um},{tag:[N.atom,N.bool,N.special(N.variableName)],color:cm},{tag:[N.processingInstruction,N.string,N.inserted],color:_b},{tag:N.invalid,color:Bb}]),$b=[Vb,mb(Ub)],Kb=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=Pf(t.state,n.from);return r.line?Gb(t):r.block?Yb(t):!1};function Of(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const Gb=Of(Xb,0),qb=Of(Ov,0),Yb=Of((t,e)=>Ov(t,e,Jb(e)),0);function Pf(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const es=50;function Qb(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-es,r),l=t.sliceDoc(i,i+es),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let c,h;i-r<=2*es?c=h=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+es),h=t.sliceDoc(i-es,i));let f=/^\s*/.exec(c)[0].length,p=/\s*$/.exec(h)[0].length,g=h.length-p-n.length;return c.slice(f,f+e.length)==e&&h.slice(g,g+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-p-n.length,margin:/\s/.test(h.charAt(g-1))?1:0}}:null}function Jb(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Ov(t,e,n=e.selection.ranges){let r=n.map(s=>Pf(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>Qb(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:c}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function Xb(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=Pf(e,s).line;if(u){for(let c=s;c<=l;){let h=e.doc.lineAt(c);if(h.from>i&&(s==l||l>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,p=f==h.length,g=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),r.push({line:h,comment:g,token:u,indent:f,empty:p,single:!1})}c=h.to+1}if(a<1e9)for(let c=o;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:c,single:h}of r)(h||!c)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,c=u+a.length;l.text[c-l.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}function ji(t,e){return T.create(t.ranges.map(e),t.mainIndex)}function tn(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function nn({state:t,dispatch:e},n){let r=ji(t.selection,n);return r.eq(t.selection,!0)?!1:(e(tn(t,r)),!0)}function Na(t,e){return T.cursor(e?t.to:t.from)}function Pv(t,e){return nn(t,n=>n.empty?t.moveByChar(n,e):Na(n,e))}function Ze(t){return t.textDirectionAt(t.state.selection.main.head)==De.LTR}const Lv=t=>Pv(t,!Ze(t)),Rv=t=>Pv(t,Ze(t));function Iv(t,e){return nn(t,n=>n.empty?t.moveByGroup(n,e):Na(n,e))}const Zb=t=>Iv(t,!Ze(t)),e2=t=>Iv(t,Ze(t));function t2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Da(t,e,n){let r=Tt(t).resolveInner(e.head),i=n?Q.closedBy:Q.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;t2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?pn(t,r.from,1):pn(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,T.cursor(o,n?-1:1)}const n2=t=>nn(t,e=>Da(t.state,e,!Ze(t))),r2=t=>nn(t,e=>Da(t.state,e,Ze(t)));function jv(t,e){return nn(t,n=>{if(!n.empty)return Na(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const Bv=t=>jv(t,!1),Fv=t=>jv(t,!0);function _v(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(F.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function zv(t,e){let n=_v(t),{state:r}=t,i=ji(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):Na(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=F.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(tn(r,i),{effects:s}),!0}const pm=t=>zv(t,!1),uh=t=>zv(t,!0);function mr(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=T.cursor(r.from+s))}return i}const i2=t=>nn(t,e=>mr(t,e,!0)),s2=t=>nn(t,e=>mr(t,e,!1)),l2=t=>nn(t,e=>mr(t,e,!Ze(t))),o2=t=>nn(t,e=>mr(t,e,Ze(t))),a2=t=>nn(t,e=>T.cursor(t.lineBlockAt(e.head).from,1)),u2=t=>nn(t,e=>T.cursor(t.lineBlockAt(e.head).to,-1));function c2(t,e,n){let r=!1,i=ji(t.selection,s=>{let l=pn(t,s.head,-1)||pn(t,s.head,1)||s.head>0&&pn(t,s.head-1,1)||s.head<t.doc.length&&pn(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return T.cursor(o)});return r?(e(tn(t,i)),!0):!1}const h2=({state:t,dispatch:e})=>c2(t,e);function Wt(t,e){let n=ji(t.state.selection,r=>{let i=e(r);return T.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(tn(t.state,n)),!0)}function Hv(t,e){return Wt(t,n=>t.moveByChar(n,e))}const Wv=t=>Hv(t,!Ze(t)),Vv=t=>Hv(t,Ze(t));function Uv(t,e){return Wt(t,n=>t.moveByGroup(n,e))}const f2=t=>Uv(t,!Ze(t)),d2=t=>Uv(t,Ze(t)),p2=t=>Wt(t,e=>Da(t.state,e,!Ze(t))),m2=t=>Wt(t,e=>Da(t.state,e,Ze(t)));function $v(t,e){return Wt(t,n=>t.moveVertically(n,e))}const Kv=t=>$v(t,!1),Gv=t=>$v(t,!0);function qv(t,e){return Wt(t,n=>t.moveVertically(n,e,_v(t).height))}const mm=t=>qv(t,!1),gm=t=>qv(t,!0),g2=t=>Wt(t,e=>mr(t,e,!0)),y2=t=>Wt(t,e=>mr(t,e,!1)),v2=t=>Wt(t,e=>mr(t,e,!Ze(t))),x2=t=>Wt(t,e=>mr(t,e,Ze(t))),w2=t=>Wt(t,e=>T.cursor(t.lineBlockAt(e.head).from)),k2=t=>Wt(t,e=>T.cursor(t.lineBlockAt(e.head).to)),ym=({state:t,dispatch:e})=>(e(tn(t,{anchor:0})),!0),vm=({state:t,dispatch:e})=>(e(tn(t,{anchor:t.doc.length})),!0),xm=({state:t,dispatch:e})=>(e(tn(t,{anchor:t.selection.main.anchor,head:0})),!0),wm=({state:t,dispatch:e})=>(e(tn(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),S2=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),C2=({state:t,dispatch:e})=>{let n=Oa(t).map(({from:r,to:i})=>T.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:T.create(n),userEvent:"select"})),!0},b2=({state:t,dispatch:e})=>{let n=ji(t.selection,r=>{let i=Tt(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return T.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(tn(t,n)),!0)};function Yv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(tn(n,T.create(i,i.length-1))),!0)}const A2=t=>Yv(t,!1),E2=t=>Yv(t,!0),T2=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=T.create([n.main]):n.main.empty||(r=T.create([T.cursor(n.main.head)])),r?(e(tn(t,r)),!0):!1};function ol(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=Gl(t,a,!1)):a>l&&(n="delete.forward",a=Gl(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=Gl(t,l,!1),o=Gl(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:T.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?F.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Gl(t,e,n){if(t instanceof F)for(let r of t.state.facet(F.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Qv=(t,e,n)=>ol(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=Ca(o,s.tabSize),c=u%Fr(s)||Fr(s);for(let h=0;h<c&&o[o.length-1-h]==" ";h++)i--;a=i}else a=ze(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=ze(l.text,a-l.from,!1,!1)+l.from);return a}),ch=t=>Qv(t,!1,!0),Jv=t=>Qv(t,!0,!1),Xv=(t,e)=>ol(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=ze(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=l(u);if(o!=null&&c!=o)break;(u!=" "||r!=n.head)&&(o=c),r=a}return r}),Zv=t=>Xv(t,!1),M2=t=>Xv(t,!0),N2=t=>ol(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),D2=t=>ol(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),O2=t=>ol(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),P2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:te.of(["",""])},range:T.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},L2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:ze(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:ze(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:T.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Oa(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function e1(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of Oa(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(T.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(T.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:T.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const R2=({state:t,dispatch:e})=>e1(t,e,!1),I2=({state:t,dispatch:e})=>e1(t,e,!0);function t1(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Oa(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const j2=({state:t,dispatch:e})=>t1(t,e,!1),B2=({state:t,dispatch:e})=>t1(t,e,!0),F2=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Oa(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=ji(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function _2(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Tt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Q.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const km=n1(!1),z2=n1(!0);function n1(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&_2(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new Ta(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=Af(u,s);for(c==null&&(c=Ca(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let h=["",qs(e,c)];return a&&h.push(qs(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:te.of(h)},range:T.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Lf(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:T.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const H2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Ta(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=Lf(t,(s,l,o)=>{let a=Af(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],c=qs(t,a);(u!=c||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},W2=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Lf(t,(n,r)=>{r.push({from:n.from,insert:t.facet(bf)})}),{userEvent:"input.indent"})),!0),V2=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Lf(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Ca(i,t.tabSize),l=0,o=qs(t,Math.max(0,s-Fr(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),U2=t=>(t.setTabFocusMode(),!0),$2=[{key:"Ctrl-b",run:Lv,shift:Wv,preventDefault:!0},{key:"Ctrl-f",run:Rv,shift:Vv},{key:"Ctrl-p",run:Bv,shift:Kv},{key:"Ctrl-n",run:Fv,shift:Gv},{key:"Ctrl-a",run:a2,shift:w2},{key:"Ctrl-e",run:u2,shift:k2},{key:"Ctrl-d",run:Jv},{key:"Ctrl-h",run:ch},{key:"Ctrl-k",run:N2},{key:"Ctrl-Alt-h",run:Zv},{key:"Ctrl-o",run:P2},{key:"Ctrl-t",run:L2},{key:"Ctrl-v",run:uh}],K2=[{key:"ArrowLeft",run:Lv,shift:Wv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Zb,shift:f2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:l2,shift:v2,preventDefault:!0},{key:"ArrowRight",run:Rv,shift:Vv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e2,shift:d2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:o2,shift:x2,preventDefault:!0},{key:"ArrowUp",run:Bv,shift:Kv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ym,shift:xm},{mac:"Ctrl-ArrowUp",run:pm,shift:mm},{key:"ArrowDown",run:Fv,shift:Gv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:vm,shift:wm},{mac:"Ctrl-ArrowDown",run:uh,shift:gm},{key:"PageUp",run:pm,shift:mm},{key:"PageDown",run:uh,shift:gm},{key:"Home",run:s2,shift:y2,preventDefault:!0},{key:"Mod-Home",run:ym,shift:xm},{key:"End",run:i2,shift:g2,preventDefault:!0},{key:"Mod-End",run:vm,shift:wm},{key:"Enter",run:km,shift:km},{key:"Mod-a",run:S2},{key:"Backspace",run:ch,shift:ch,preventDefault:!0},{key:"Delete",run:Jv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Zv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:M2,preventDefault:!0},{mac:"Mod-Backspace",run:D2,preventDefault:!0},{mac:"Mod-Delete",run:O2,preventDefault:!0}].concat($2.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),G2=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:n2,shift:p2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:r2,shift:m2},{key:"Alt-ArrowUp",run:R2},{key:"Shift-Alt-ArrowUp",run:j2},{key:"Alt-ArrowDown",run:I2},{key:"Shift-Alt-ArrowDown",run:B2},{key:"Mod-Alt-ArrowUp",run:A2},{key:"Mod-Alt-ArrowDown",run:E2},{key:"Escape",run:T2},{key:"Mod-Enter",run:z2},{key:"Alt-l",mac:"Ctrl-l",run:C2},{key:"Mod-i",run:b2,preventDefault:!0},{key:"Mod-[",run:V2},{key:"Mod-]",run:W2},{key:"Mod-Alt-\\",run:H2},{key:"Shift-Mod-k",run:F2},{key:"Shift-Mod-\\",run:h2},{key:"Mod-/",run:Kb},{key:"Alt-A",run:qb},{key:"Ctrl-m",mac:"Shift-Alt-m",run:U2}].concat(K2),Sm=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Qs{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(Sm(o)):Sm,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return U0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=mk(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=$0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Qs.prototype[Symbol.iterator]=function(){return this});const r1={from:-1,to:-1,match:/.*/.exec("")},Rf="gm"+(/x/.unicode==null?"":"u");class i1{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=r1,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new s1(e,n,r,i,s);this.re=new RegExp(n,Rf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=Zo(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Zo(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Tu=new WeakMap;class yi{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=Tu.get(e);if(!i||i.from>=r||i.to<=n){let o=new yi(n,e.sliceString(n,r));return Tu.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),Tu.set(e,new yi(l,s)),new yi(n,s.slice(n-l,r-l))}}class s1{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=r1,this.matchPos=Zo(e,i),this.re=new RegExp(n,Rf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=yi.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Zo(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=yi.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(i1.prototype[Symbol.iterator]=s1.prototype[Symbol.iterator]=function(){return this});function q2(t){try{return new RegExp(t,Rf),!0}catch{return!1}}function Zo(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function hh(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=je("input",{class:"cm-textfield",name:"line",value:e}),r=je("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Cs.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},je("label",t.state.phrase("Go to line"),": ",n)," ",je("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),je("button",{name:"close",onclick:()=>{t.dispatch({effects:Cs.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,c,h]=s,f=c?+c.slice(1):0,p=u?+u:o.number;if(u&&h){let k=p/100;a&&(k=k*(a=="-"?-1:1)+o.number/l.doc.lines),p=Math.round(l.doc.lines*k)}else u&&a&&(p=p*(a=="-"?-1:1)+o.number);let g=l.doc.line(Math.max(1,Math.min(l.doc.lines,p))),v=T.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[Cs.of(!1),F.scrollIntoView(v.from,{y:"center"})],selection:v}),t.focus()}return{dom:r}}const Cs=fe.define(),Cm=en.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Cs)&&(t=n.value);return t},provide:t=>qo.from(t,e=>e?hh:null)}),Y2=t=>{let e=Go(t,hh);if(!e){let n=[Cs.of(!0)];t.state.field(Cm,!1)==null&&n.push(fe.appendConfig.of([Cm,Q2])),t.dispatch({effects:n}),e=Go(t,hh)}return e&&e.dom.querySelector("input").select(),!0},Q2=F.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),J2=({state:t,dispatch:e})=>{let{selection:n}=t,r=T.create(n.ranges.map(i=>t.wordAt(i.head)||T.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function X2(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Qs(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Qs(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const Z2=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return J2({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=X2(t,r);return i?(e(t.update({selection:t.selection.addRange(T.range(i.from,i.to),!1),effects:F.scrollIntoView(i.to)})),!0):!1},Bi=_.define({combine(t){return Sa(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new hA(e),scrollToMatch:e=>F.scrollIntoView(e)})}});class l1{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||q2(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new rA(this):new tA(this)}getCursor(e,n=0,r){let i=e.doc?e:re.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Kr(this,i,n,r):$r(this,i,n,r)}}class o1{constructor(e){this.spec=e}}function $r(t,e,n,r){return new Qs(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?eA(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function eA(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(ea(i,n-s))!=He.Word||e(ta(i,n-s))!=He.Word)&&(e(ta(i,r-s))!=He.Word||e(ea(i,r-s))!=He.Word))}class tA extends o1{constructor(e){super(e)}nextMatch(e,n,r){let i=$r(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=$r(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=$r(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=$r(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=$r(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Kr(t,e,n,r){return new i1(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?nA(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function ea(t,e){return t.slice(ze(t,e,!1),e)}function ta(t,e){return t.slice(e,ze(t,e))}function nA(t){return(e,n,r)=>!r[0].length||(t(ea(r.input,r.index))!=He.Word||t(ta(r.input,r.index))!=He.Word)&&(t(ta(r.input,r.index+r[0].length))!=He.Word||t(ea(r.input,r.index+r[0].length))!=He.Word)}class rA extends o1{nextMatch(e,n,r){let i=Kr(this.spec,e,r,e.doc.length).next();return i.done&&(i=Kr(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Kr(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Kr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Kr(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Js=fe.define(),If=fe.define(),rr=en.define({create(t){return new Mu(fh(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Js)?t=new Mu(n.value.create(),t.panel):n.is(If)&&(t=new Mu(t.query,n.value?jf:null));return t},provide:t=>qo.from(t,e=>e.panel)});class Mu{constructor(e,n){this.query=e,this.panel=n}}const iA=G.mark({class:"cm-searchMatch"}),sA=G.mark({class:"cm-searchMatch cm-searchMatch-selected"}),lA=Et.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(rr))}update(t){let e=t.state.field(rr);(e!=t.startState.field(rr)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return G.none;let{view:n}=this,r=new Rr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,c)=>{let h=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,h?sA:iA)})}return r.finish()}},{decorations:t=>t.decorations});function al(t){return e=>{let n=e.state.field(rr,!1);return n&&n.query.spec.valid?t(e,n):c1(e)}}const na=al((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=T.single(r.from,r.to),s=t.state.facet(Bi);return t.dispatch({selection:i,effects:[Bf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),u1(t),!0}),ra=al((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=T.single(i.from,i.to),l=t.state.facet(Bi);return t.dispatch({selection:s,effects:[Bf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),u1(t),!0}),oA=al((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:T.create(n.map(r=>T.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),aA=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Qs(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(T.range(o.value.from,o.value.to))}return e(t.update({selection:T.create(s,l),userEvent:"select.search.matches"})),!0},bm=al((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,c=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),c.push(F.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(o);return l&&(a=T.single(l.from,l.to).map(h),c.push(Bf(t,l)),c.push(n.facet(Bi).scrollToMatch(a.main,t))),t.dispatch({changes:h,selection:a,effects:c,userEvent:"input.replace"}),!0}),uA=al((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:F.announce.of(r),userEvent:"input.replace.all"}),!0});function jf(t){return t.state.facet(Bi).createPanel(t)}function fh(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(Bi);return new l1({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function a1(t){let e=Go(t,jf);return e&&e.dom.querySelector("[main-field]")}function u1(t){let e=a1(t);e&&e==t.root.activeElement&&e.select()}const c1=t=>{let e=t.state.field(rr,!1);if(e&&e.panel){let n=a1(t);if(n&&n!=t.root.activeElement){let r=fh(t.state,e.query.spec);r.valid&&t.dispatch({effects:Js.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[If.of(!0),e?Js.of(fh(t.state,e.query.spec)):fe.appendConfig.of(dA)]});return!0},h1=t=>{let e=t.state.field(rr,!1);if(!e||!e.panel)return!1;let n=Go(t,jf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:If.of(!1)}),!0},cA=[{key:"Mod-f",run:c1,scope:"editor search-panel"},{key:"F3",run:na,shift:ra,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:na,shift:ra,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:h1,scope:"editor search-panel"},{key:"Mod-Shift-l",run:aA},{key:"Mod-Alt-g",run:Y2},{key:"Mod-d",run:Z2,preventDefault:!0}];class hA{constructor(e){this.view=e;let n=this.query=e.state.field(rr).query.spec;this.commit=this.commit.bind(this),this.searchField=je("input",{value:n.search,placeholder:xt(e,"Find"),"aria-label":xt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=je("input",{value:n.replace,placeholder:xt(e,"Replace"),"aria-label":xt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=je("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=je("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=je("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return je("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=je("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>na(e),[xt(e,"next")]),r("prev",()=>ra(e),[xt(e,"previous")]),r("select",()=>oA(e),[xt(e,"all")]),je("label",null,[this.caseField,xt(e,"match case")]),je("label",null,[this.reField,xt(e,"regexp")]),je("label",null,[this.wordField,xt(e,"by word")]),...e.state.readOnly?[]:[je("br"),this.replaceField,r("replace",()=>bm(e),[xt(e,"replace")]),r("replaceAll",()=>uA(e),[xt(e,"replace all")])],je("button",{name:"close",onclick:()=>h1(e),"aria-label":xt(e,"close"),type:"button"},[""])])}commit(){let e=new l1({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Js.of(e)}))}keydown(e){cC(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ra:na)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),bm(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Js)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Bi).top}}function xt(t,e){return t.state.phrase(e)}const ql=30,Yl=/[\s\.,:;?!]/;function Bf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-ql),l=Math.min(i,n+ql),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<ql;a++)if(!Yl.test(o[a+1])&&Yl.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-ql;a--)if(!Yl.test(o[a-1])&&Yl.test(o[a])){o=o.slice(0,a);break}}return F.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const fA=F.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),dA=[rr,wa.low(lA),fA],pA=Mf.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(Vt.TRANSITION)||t.match(Vt.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(Vt.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(Vt.CHARACTER))||(n=t.match(Vt.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(Vt.IMAGE)||t.match(Vt.AUDIO)?"link":t.match(Vt.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(Vt.TITLE))return"def";if(n=t.match(Vt.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(Vt.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),mA=Et.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push(G.line({class:"cm-keyword"}).range(s.from)),e.push(G.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push(G.line({class:"cm-header"}).range(s.from)),e.push(G.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push(G.line({class:"cm-atom"}).range(s.from)),e.push(G.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push(G.line({class:"cm-synopsis"}).range(s.from)),e.push(G.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push(G.line({class:"cm-number"}).range(s.from)),e.push(G.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push(G.line({class:"cm-variable"}).range(s.from)),e.push(G.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return G.set(e)}},{decorations:t=>t.decorations}),f1=L.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=L.useRef(null),l=L.useRef(null);return L.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:F.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),L.useEffect(()=>{if(!s.current)return;const o=[AC(),dC(),fb(),bb(),nb(),F.lineWrapping,pA,mA,F.domEventHandlers({mouseup:(c,h)=>{setTimeout(()=>{const f=h.state.selection.main.head,p=h.state.doc.lineAt(f);n(p.number-1)},10)}}),$b,rv.of([...G2,...cA]),F.updateListener.of(c=>{if(c.docChanged&&e(c.state.doc.toString()),c.selectionSet&&!c.docChanged){const h=c.state.selection.main.head,f=c.state.doc.lineAt(h);n(f.number-1)}}),F.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=re.create({doc:t,extensions:o}),u=new F({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),L.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),d.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});f1.displayName="CodeMirrorEditor";const gA={VITE_GOOGLE_CLIENT_ID:"332933508693-u0f8kifpkma08osh7cscdcdbgsqi4ir1.apps.googleusercontent.com"};let zn="";function yA(){return new Promise(t=>{if(window.google)return t();const e=setInterval(()=>{window.google&&(clearInterval(e),t())},50)})}async function dh(t){if(zn&&!(t&&t.prompt==="consent"))return zn;await yA();const e=window.google,n=gA||{},r=["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly"],i=Array.from(new Set([...t&&t.extraScopes?t.extraScopes:[],...r])),s=e.accounts.oauth2.initTokenClient({client_id:n.VITE_GOOGLE_CLIENT_ID,scope:i.join(" "),callback:l=>{zn=l.access_token}});return new Promise((l,o)=>{s.callback=u=>{if(u&&u.error)return o(u);zn=u&&u.access_token?u.access_token:zn,l(zn)};const a=t&&t.prompt==="consent"?"consent":"";try{s.requestAccessToken({prompt:a})}catch(u){o(u)}})}async function _r(t,e={},n=!1){var s;const r=await dh(),i=await fetch(t,{...e,headers:{...e.headers||{},Authorization:`Bearer ${r}`}});if(!i.ok)try{const o=await i.clone().text().catch(()=>"<could not read body>");console.debug("authedFetch non-OK response",{url:((s=t==null?void 0:t.toString)==null?void 0:s.call(t))||t,status:i.status,bodyPreview:o.slice(0,200)})}catch(l){console.debug("authedFetch: failed to read non-OK response body",l)}if(i.status===401)return zn="",_r(t,e,n);if(i.status===403&&!n)try{return console.debug("authedFetch: 403 received, attempting re-consent with broader Drive scope and retry"),zn="",await dh({prompt:"consent",extraScopes:["https://www.googleapis.com/auth/drive"]}),_r(t,e,!0)}catch(l){console.debug("authedFetch: re-consent attempt failed",l)}return i}const Ff="fountain:driveState";function nt(){try{return JSON.parse(localStorage.getItem(Ff)||"{}")}catch{return{}}}function vA(t){localStorage.setItem(Ff,JSON.stringify(t))}function xA(){localStorage.removeItem(Ff)}function vn(t){try{try{}catch{}vA(t);try{}catch{}}catch(e){console.error("persistDriveState failed",e)}}const wA={VITE_GCP_PROJECT_NUMBER:"332933508693",VITE_GOOGLE_API_KEY:"AIzaSyBNuoxiWJI0jd68umAFLH0QYfuJdyAHUUs"};function kA(t=3e3){return new Promise((e,n)=>{if(window.gapi)return e();const r=Date.now(),i=setInterval(()=>{if(window.gapi)return clearInterval(i),e();if(Date.now()-r>t)return clearInterval(i),n(new Error("gapi did not load"))},50)})}function SA(){return new Promise(async(t,e)=>{try{await kA()}catch{return e(new Error("Google API library (gapi) not loaded. Ensure https://apis.google.com/js/api.js is included."))}try{window.gapi.load("picker",()=>{if(!window.google||!window.google.picker)return e(new Error("Google Picker API not available on window.google.picker. Make sure the Picker API is enabled in Google Cloud Console."));t()})}catch(n){e(n)}})}async function CA(){await SA();const t=await dh(),e=window.google,n=new e.picker.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder");return new Promise(r=>{const i=wA||{};new e.picker.PickerBuilder().setAppId(i.VITE_GCP_PROJECT_NUMBER).setDeveloperKey(i.VITE_GOOGLE_API_KEY).setOAuthToken(t).addView(n).setTitle("Choose a Drive Folder").setCallback(l=>{var o;if(l.action===e.picker.Action.PICKED&&((o=l.docs)!=null&&o.length)){try{const a=new CustomEvent("fountain:drive:folderSelected",{detail:l.docs[0]});window.dispatchEvent(a)}catch(a){console.warn("picker: could not dispatch folderSelected event",a)}try{const a={...nt(),folderId:l.docs[0].id,folderName:l.docs[0].name,folder:l.docs[0]};vn(a)}catch(a){console.warn("picker: failed to persist folder as fallback",a)}r({id:l.docs[0].id,name:l.docs[0].name})}else r(null)}).build().setVisible(!0)})}async function bA(t){if(!t)return[];const e=`'${t}' in parents and trashed = false`,r=`https://www.googleapis.com/drive/v3/files?${new URLSearchParams({q:e,fields:"files(id,name,mimeType,modifiedTime)",pageSize:"200"}).toString()}`,i=await _r(r);if(!i.ok)throw new Error(`Drive list failed: ${i.status}`);return((await i.json()).files||[]).map(l=>({id:l.id,name:l.name,mimeType:l.mimeType,modifiedTime:l.modifiedTime}))}async function Nu(t){if(!t)throw new Error("fileId required");const e=`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,n=await _r(e);if(!n.ok)throw new Error(`Failed to fetch file content: ${n.status}`);return await n.text()}async function Am(t,e,n){if(!t)throw new Error("folderId required");const r="-------fountainupload"+Date.now(),s=`--${r}\r
Content-Type: application/json; charset=UTF-8\r
\r
${JSON.stringify({name:e,parents:[t]})}\r
--${r}\r
Content-Type: text/plain\r
\r
${n}\r
--${r}--`,o=await _r("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,mimeType,modifiedTime",{method:"POST",headers:{"Content-Type":`multipart/related; boundary=${r}`},body:s});if(!o.ok)throw new Error(`Failed to create file: ${o.status}`);return await o.json()}async function AA(t,e){if(!t)throw new Error("fileId required");const n=`https://www.googleapis.com/upload/drive/v3/files/${t}?uploadType=media&fields=id,name,mimeType,modifiedTime`,r=await _r(n,{method:"PATCH",headers:{"Content-Type":"text/plain"},body:e});if(!r.ok)throw new Error(`Failed to update file content: ${r.status}`);try{return await r.json()}catch{const s=await _r(`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,mimeType,modifiedTime`);if(!s.ok)throw new Error(`Failed to fetch updated file metadata: ${s.status}`);return await s.json()}}function EA(t=""){const[e,n]=L.useState([]),[r,i]=L.useState([]),[s,l]=L.useState(new Map),o=L.useRef(null),[a,u]=L.useState(!0);return L.useEffect(()=>{if(!a){if(t){const h=Ra(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}return}(function(){try{const h=new Worker(new URL("/assets/previewWorker-D4zT3tr0.js",import.meta.url),{type:"module"});return h.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},h.onmessage=f=>{const{type:p,blocks:g,characters:v,characterLineCounts:k}=f.data;p==="result"?(n(g||[]),i(v||[]),l(k||new Map)):p==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=h,t&&h.postMessage({type:"process",text:t}),()=>{try{h.terminate()}catch{}}}catch(h){console.error("Failed to create module worker, falling back to main-thread parsing:",h),u(!1)}})()},[a]),L.useEffect(()=>{if(!a&&t){const h=Ra(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:h=>{if(a&&o.current)o.current.postMessage({type:"process",text:h});else{const f=Ra(h);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let TA=1;function MA(){const t=L.useRef(null),e=L.useRef(new Map),[n,r]=L.useState([]),i=L.useRef(!1);L.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=L.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-DfPotGTI.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:c,requestId:h,message:f}=a.data||{};if(h&&e.current.has(h)){const{resolve:p,reject:g}=e.current.get(h);if(e.current.delete(h),u==="panels")try{p(c)}catch{}else if(u==="error")try{g(new Error(f||"worker error"))}catch{}else try{g(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(c)&&r(c)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=L.useCallback(o=>{const a=s();if(!a)try{const c=L1(o);return r(c),Promise.resolve(c)}catch(c){return Promise.reject(c)}const u=String(TA++);return new Promise((c,h)=>{e.current.set(u,{resolve:c,reject:h});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),h(f)}}).then(c=>(i.current&&r(c),c))},[s]);return{panels:n,parsePanels:l}}const Ur=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Heydid the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE  CODING AND COFFEE\r
\r
 Keys clack.  \r
 Tests blink green, then red, then righteous green again.  \r
 A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pingsjust shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing  preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open  payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function NA(){const[t,e]=L.useState(!1),[n,r]=L.useState(""),[i,s]=L.useState(!1),[l,o]=L.useState(!1),[a,u]=L.useState(!1),[c,h]=L.useState("edit"),[f,p]=L.useState(0),[g,v]=L.useState(!1),[k,m]=L.useState(null),[y,x]=L.useState(()=>{try{return localStorage.getItem("fountain:gdriveOn")==="1"}catch{return!1}}),[S,C]=L.useState(()=>nt()),A={...nt()||{},...S||{}};L.useEffect(()=>{const w=B=>{try{const z=B&&B.detail?B.detail:null;if(z&&z.id){const Y={...nt(),fileId:z.id,fileName:z.name,file:z};try{vn(Y)}catch(se){console.error("App: persistDriveState failed",se)}C(Y)}}catch(z){console.error("App: fileSelected handler failed",z)}},E=()=>{try{const z={...nt()||{},fileId:void 0,fileName:void 0,file:void 0};try{vn(z)}catch(Y){console.error("App: persistDriveState failed",Y)}C(z)}catch(B){console.error("App: fileCleared handler failed",B)}};return window.addEventListener("fountain:drive:fileSelected",w),window.addEventListener("fountain:drive:fileCleared",E),()=>{window.removeEventListener("fountain:drive:fileSelected",w),window.removeEventListener("fountain:drive:fileCleared",E)}},[]);const b=!!(A&&(A.folderId||A.folderName)),D=nt()||{},V=!!(D.folderId||D.folderName),j=L.useRef(null),H=L.useRef(null),W=L.useRef([]),J=L.useRef(null),[ie,ge]=L.useState(!1),[at,et]=L.useState(!1),[P,U]=L.useState([]),[$,X]=L.useState(null),[Z,Oe]=L.useState(!1),[ee,gt]=L.useState(!1),[ae,Dt]=L.useState(!1);L.useEffect(()=>{},[S]),L.useEffect(()=>{try{if(y){const E=(A||{}).file||{},B=E.modifiedTime||E.modified_time||null;B&&(m(new Date(B)),v(!0))}}catch{}},[y,S]),L.useEffect(()=>{const w=localStorage.getItem("fountain-script");let E=Ur;if(w)try{const B=JSON.parse(w);E=B.content,v(!0),m(new Date(B.savedAt))}catch(B){console.error("Error parsing saved script:",B),localStorage.removeItem("fountain-script")}r(E),tt(E);try{typeof cl=="function"&&cl(E)}catch{}},[]),L.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const E=navigator.userAgent||"",B=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(E),z=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,Y=(window.innerWidth||screen.width||0)<1024;(B||z&&Y)&&e(!0)}catch{}},[]),L.useEffect(()=>{const w=E=>{(E.ctrlKey||E.metaKey)&&String(E.key).toLowerCase()==="g"&&(E.preventDefault(),x(B=>{try{localStorage.setItem("fountain:gdriveOn",B?"0":"1")}catch{}return!B}))};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[]),L.useEffect(()=>{try{if(y){try{const w={content:n||"",savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(w)),v(!0),m(new Date),console.log("App: saved local copy to fountain-script before entering GDrive mode")}catch(w){console.error("App: failed to persist local script when entering GDrive mode",w)}try{const w=nt()||{},E=w&&w.fileId?w.fileId:null;E&&(Dt(!0),Nu(E).then(B=>{r(B);try{tt(B)}catch(z){console.error("App: processText failed while loading Drive file on toggle",z)}v(!0),m(new Date),console.log("App: loaded selected Drive file after entering GDrive mode")}).catch(B=>{console.error("App: failed to load selected Drive file on entering GDrive mode",B)}).finally(()=>Dt(!1)))}catch(w){console.error("App: error while attempting to load Drive file on toggle",w)}}else try{const w=localStorage.getItem("fountain-script");if(w){const E=JSON.parse(w),B=E&&E.content?E.content:Ur;r(B);try{tt(B)}catch(z){console.error("App: processText failed while restoring local script",z)}E&&E.savedAt&&m(new Date(E.savedAt)),v(!!(E&&E.content)),console.log("App: restored local copy from fountain-script after leaving GDrive mode")}else{r(Ur);try{tt(Ur)}catch(E){console.error("App: processText failed while loading default script",E)}v(!1),m(null),console.log("App: no local copy found, loaded default script after leaving GDrive mode")}}catch(w){console.error("App: failed to restore local script after leaving GDrive mode",w)}}catch{}},[y]),L.useEffect(()=>{const w=B=>{try{const z=B&&B.detail?B.detail:null;if(z&&z.id){const Y={...nt(),folderId:z.id,folderName:z.name,folder:z};try{vn(Y)}catch(se){console.error("App: persistDriveState failed",se)}C(Y)}else C(nt())}catch(z){console.error("App: failed to load drive state",z)}},E=()=>C({});return window.addEventListener("fountain:drive:folderSelected",w),window.addEventListener("fountain:drive:cleared",E),()=>{window.removeEventListener("fountain:drive:folderSelected",w),window.removeEventListener("fountain:drive:cleared",E)}},[]);const{blocks:ul,characters:Ln,characterLineCounts:d1,processText:tt}=EA(""),{panels:K,parsePanels:cl}=MA(),[Ue,Fi]=L.useState(0),[_i,_f]=L.useState("screenplay"),$e=L.useRef(null),[zi,Rn]=L.useState(!1),hl=L.useRef(null),yt=L.useRef(null),[zf,Hi]=L.useState(!1),gr=L.useRef(null),[Hf,fl]=L.useState(!1);L.useEffect(()=>{W.current=ul},[ul]);const p1=w=>{r(w),tt(w);try{typeof cl=="function"&&cl(w)}catch{}},m1=()=>{!Array.isArray(K)||K.length===0||(Pa(),Hi(!1),gr.current="user",Fi(w=>{const E=K.length;return((w-1)%E+E)%E}))},Wf=(w=!0)=>{!Array.isArray(K)||K.length===0||(gr.current=w?"user":"auto",w&&(Pa(),Hi(!1)),Fi(E=>{const B=K.length;return(E+1)%B}))},g1=async()=>{zf&&(Fi(0),Hi(!1));try{$e.current&&$e.current.paused&&($e.current.currentTime=0)}catch{}Rn(!0)},y1=()=>{if($e.current){gr.current="user";try{$e.current.pause()}catch{}Rn(!1)}},v1=()=>{Pa(),Hi(!1);try{Fi(0)}catch{}};function Pa(){try{yt.current&&(clearTimeout(yt.current),yt.current=null)}catch{}try{$e.current&&(gr.current="user",$e.current.pause(),$e.current.currentTime=0)}catch{}Rn(!1)}L.useEffect(()=>{const w=$e.current;if(!w)return;const E=()=>Rn(!0),B=()=>{gr.current==="user"&&Rn(!1)},z=()=>{Wf(!1)};return w.addEventListener("play",E),w.addEventListener("pause",B),w.addEventListener("ended",z),()=>{w.removeEventListener("play",E),w.removeEventListener("pause",B),w.removeEventListener("ended",z)}},[Ue,K]),L.useEffect(()=>{if(yt.current&&(clearTimeout(yt.current),yt.current=null),!zi)return;const w=K&&K.length>0?K[Ue]||K[0]:null;if(!w){Rn(!1);return}try{$e.current&&$e.current.play().catch(()=>{})}catch{}const E=Math.max(1e3,typeof w.duration=="number"?w.duration*1e3:3e3);return yt.current=setTimeout(()=>{!K||Ue>=K.length-1?(Rn(!1),Hi(!0),yt.current=null):Fi(B=>B+1)},E),()=>{yt.current&&(clearTimeout(yt.current),yt.current=null)}},[zi,Ue,K]),L.useEffect(()=>{if($e.current)try{gr.current==="user"&&($e.current.pause(),$e.current.currentTime=0,Rn(!1))}catch{}gr.current=null;try{hl.current&&typeof hl.current.scrollTo=="function"&&hl.current.scrollTo({top:0,behavior:"smooth"})}catch{}},[Ue]),L.useEffect(()=>()=>{try{yt.current&&clearTimeout(yt.current)}catch{}},[]),L.useEffect(()=>{try{const w=K&&K.length>0&&K[Ue]?K[Ue]:null}catch{}},[K,Ue]),L.useEffect(()=>{fl(!1)},[Ue]);const Vf=async()=>{if(n.trim()){gt(!0);try{if(y)try{const E=nt()||{},B=E&&E.fileId?E.fileId:null,z=E&&E.folderId?E.folderId:null,Y=E.fileName||`script-${new Date().toISOString().replace(/[:.]/g,"-")}.fountain`;if(B){console.log("Saving to existing Drive file",B);const se=await AA(B,n);console.log("Saved script to Drive (updated):",se);const Ae={...E,fileId:se.id,fileName:se.name,file:se};try{vn(Ae)}catch{}C(Ae);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:Ae}))}catch{}v(!0),m(new Date);return}if(z){console.log("Creating new Drive file in folder",z);const se=await Am(z,Y,n);console.log("Saved script to Drive (created):",se);const Ae={...E,fileId:se.id,fileName:se.name,file:se};try{vn(Ae)}catch{}C(Ae);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:Ae}))}catch{}v(!0),m(new Date);return}}catch(E){console.error("GDrive save attempt failed",E)}const w={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(w)),v(!0),m(new Date)}finally{gt(!1)}}},x1=async()=>{try{if(!await CA())return}catch(w){console.error("Folder pick failed",w),alert("Could not open folder picker. Check console for details.")}},w1=async()=>{try{const w=nt()||{},E=w&&w.fileId?w.fileId:null;if(!E)return alert("No Drive file selected to reload");Dt(!0);const B=await Nu(E);r(B);try{tt(B)}catch(z){console.error("processText failed",z)}v(!0),m(new Date)}catch(w){console.error("Failed to reload Drive file",w),alert("Failed to reload Drive file. See console for details.")}finally{Dt(!1)}},k1=async()=>{if(!n.trim())return alert("Editor is empty");try{const w=nt()||{},E=w&&w.folderId?w.folderId:null;if(!E)return alert("No Drive folder selected");const B=w.fileName?w.fileName.replace(/\.fountain$/i,""):`script-${new Date().toISOString().replace(/[:.]/g,"-")}`,z=window.prompt("Enter filename (without extension):",B);if(z===null)return;const Y=String(z||"").trim();if(!Y)return alert("Filename cannot be empty");const se=Y.toLowerCase().endsWith(".fountain")?Y:`${Y}.fountain`,Ae=await Am(E,se,n);console.log("GDrive Save As created:",Ae);const vt={...w,fileId:Ae.id,fileName:Ae.name,file:Ae};try{vn(vt)}catch{}C(vt);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:vt}))}catch{}v(!0),m(new Date)}catch(w){console.error("GDrive Save As failed",w),alert("Failed to save file to Drive. See console for details.")}},S1=async()=>{try{const w=nt(),E=w&&w.folderId?w.folderId:null;if(!E){alert("No Drive folder selected. Use Change Folder first.");return}et(!0),X(w&&w.folderName?w.folderName:null),Oe(!0);const z=(await bA(E)||[]).filter(Y=>Y&&(Y.mimeType==="application/octet-stream"||Y.mimeType==="text/plain"));z.sort((Y,se)=>{const Ae=Y&&Y.modifiedTime?new Date(Y.modifiedTime).getTime():0;return(se&&se.modifiedTime?new Date(se.modifiedTime).getTime():0)-Ae}),U(z)}catch(w){console.error("openGDriveLoad failed",w),alert("Could not list files from Drive. Check console for details.")}finally{Oe(!1)}},C1=()=>{const w=localStorage.getItem("fountain-script");if(w)try{const E=JSON.parse(w);r(E.content),tt(E.content),m(new Date(E.savedAt))}catch(E){console.error("Error loading saved script:",E)}},b1=()=>{localStorage.removeItem("fountain-script"),v(!1),m(null),r(Ur),tt(Ur)},A1=async()=>{try{await navigator.clipboard.writeText(n)}catch{const E=document.createElement("textarea");E.value=n,document.body.appendChild(E),E.select(),document.execCommand("copy"),document.body.removeChild(E)}},E1=async()=>{try{const w=await navigator.clipboard.readText();r(w),tt(w)}catch(w){console.error("Error pasting from clipboard:",w)}},T1=()=>{r(""),tt("");try{H.current&&H.current.focus&&H.current.focus()}catch{}},M1=L.useCallback(w=>{const E=W.current;if(p(w),j.current&&E.length>0){let B=null;for(let z=E.length-1;z>=0;z--)if(E[z].index<=w){B=E[z];break}if(B){const z=j.current.querySelector(`[data-line-id="${B.id}"]`);if(z){const Y=j.current,se=Y.getBoundingClientRect(),Ae=z.getBoundingClientRect(),vt=Ae.top-se.top,La=se.height,O1=Ae.height,P1=Y.scrollTop+vt-La/2+O1/2;Y.scrollTo({top:P1,behavior:"smooth"})}}}},[]),N1=L.useCallback(w=>{H.current&&H.current.scrollToLine&&H.current.scrollToLine(w)},[]);L.useEffect(()=>{const w=E=>{E.key==="Escape"&&(i?s(!1):a&&u(!1))};if(i||a)return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[i,a]),L.useEffect(()=>{const w=()=>{ge(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",w),()=>document.removeEventListener("fullscreenchange",w)},[]);const D1=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),ge(!1)):J.current&&J.current.requestFullscreen?(await J.current.requestFullscreen(),ge(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),ge(!0))}catch(w){console.error("Fullscreen toggle failed",w)}};return d.jsxs("div",{className:"fountain-app",ref:J,children:[t&&d.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),d.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),d.jsxs("p",{style:{marginTop:"1rem"},children:[d.jsx("strong",{children:"How to:"}),' open your browser menu () and choose "Desktop site" or "Request desktop site".']})]}),d.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:d.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"Got it"})})]})}),d.jsx("div",{className:"persistence-toolbar",children:d.jsxs("div",{className:"toolbar-group",children:[y?d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:`toolbar-btn ${ee||ae?"disabled":""}`,onClick:x1,disabled:ee||ae,title:ee||ae?"Saving...":V?"Change Drive folder":"Select Drive folder",children:[d.jsx("i",{className:"fas fa-folder-open"}),V?" Change Folder":" Select Folder"]}),d.jsxs("button",{className:`toolbar-btn ${!n.trim()||!b||ee||ae?"disabled":""}`,onClick:Vf,disabled:!n.trim()||!b||ee||ae,title:"Save to Google Drive",children:[d.jsx("i",{className:`${ee||ae?"fas fa-spinner fa-spin":"fab fa-google-drive"}`}),"GDrive Save"]}),d.jsxs("button",{className:`toolbar-btn ${!n.trim()||!b||ee||ae?"disabled":""}`,onClick:k1,disabled:!n.trim()||!b||ee||ae,title:ee||ae?"Saving...":"Save as to Google Drive",children:[d.jsx("i",{className:"fas fa-file-export"})," GDrive Save As"]}),d.jsxs("button",{className:`toolbar-btn ${!b||ee||ae?"disabled":""}`,onClick:S1,disabled:!b||ee||ae,title:ee||ae?"Saving...":"Load from Google Drive",children:[d.jsx("i",{className:"fas fa-download"})," GDrive Load"]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:`toolbar-btn ${!n.trim()||ee?"disabled":""}`,onClick:Vf,disabled:!n.trim()||ee,title:"Save current script to browser storage",children:[d.jsx("i",{className:`fas ${ee?"fa-spinner fa-spin":"fa-save"}`}),"Save"]}),d.jsxs("button",{className:`toolbar-btn ${g?"":"disabled"}`,onClick:C1,disabled:!g,title:k?`Load saved script (${k.toLocaleDateString()} ${k.toLocaleTimeString()})`:"Load saved script",children:[d.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),d.jsxs("button",{className:"toolbar-btn",onClick:A1,title:"Copy editor contents to clipboard",children:[d.jsx("i",{className:"fas fa-copy"}),"Copy"]}),d.jsxs("button",{className:"toolbar-btn",onClick:E1,title:"Paste from clipboard to editor",children:[d.jsx("i",{className:"fas fa-paste"}),"Paste"]})]}),!y&&d.jsxs("button",{className:`toolbar-btn danger ${n.trim()?"":"disabled"}`,onClick:T1,disabled:!n.trim(),title:"Clear editor contents",children:[d.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),y?d.jsx("div",{style:{fontSize:12,color:"#f5f5f5"},children:A&&A.folderName?d.jsxs("div",{children:[d.jsxs("div",{children:[d.jsx("i",{className:"fas fa-folder-open persistence-icon","aria-hidden":"true"}),A.folderName,d.jsx("a",{href:"#",onClick:w=>{w.preventDefault();try{xA(),C({}),window.dispatchEvent(new CustomEvent("fountain:drive:cleared")),console.log("App: cleared drive state")}catch(E){console.error("App: failed to clear drive state",E)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:d.jsx("i",{className:"fas fa-trash small-trash","aria-hidden":"true"})})]}),A&&A.fileName?d.jsxs("div",{style:{marginTop:4},children:[d.jsxs("span",{style:{fontSize:12,color:"#ddd"},children:[d.jsx("i",{className:"fas fa-file persistence-icon","aria-hidden":"true"}),A.fileName]}),d.jsx("a",{href:"#",onClick:w=>{w.preventDefault();try{const E={...nt(),fileId:void 0,fileName:void 0,file:void 0};vn(E),C(E),window.dispatchEvent(new CustomEvent("fountain:drive:fileCleared"))}catch(E){console.error("App: failed to clear file selection",E)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:d.jsx("i",{className:"fas fa-trash small-trash","aria-hidden":"true"})}),d.jsx("i",{className:`${ae?"fas fa-spinner fa-spin small-action":`fas fa-sync-alt small-action ${ee?"disabled":""}`}`,title:ae?"Reloading...":"Reload file from Drive",onClick:w=>{w.preventDefault(),!ee&&!ae&&w1()},"aria-hidden":"true"})]}):null]}):"No folder selected"}):d.jsxs("button",{className:`toolbar-btn danger ${g?"":"disabled"}`,onClick:b1,disabled:!g,title:"Clear saved script from storage",children:[d.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),d.jsx("div",{className:"toolbar-divider"}),d.jsxs("button",{className:`toolbar-btn character-btn ${Ln.length===0?"disabled":""}`,onClick:()=>Ln.length>0&&u(!0),title:Ln.length>0?"Character List":"No characters found",disabled:Ln.length===0,children:[d.jsx("i",{className:"fas fa-user"}),"Characters",Ln.length>0&&d.jsx("span",{className:"character-count-badge",children:Ln.length})]}),d.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>s(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[d.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),d.jsxs("button",{className:"toolbar-btn demo-btn",onClick:()=>o(!0),title:"Show demo scripts","aria-label":"Open demo scripts modal",style:{backgroundColor:"#e75480",color:"white",marginLeft:0},children:[d.jsx("i",{className:"fas fa-download","aria-hidden":"true"}),"Demo"]}),l&&d.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{style:{fontSize:"2rem",fontWeight:700,letterSpacing:"0.03em",color:"#fff",marginBottom:"0.5em"},children:"Demo Scripts"}),d.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsx("style",{children:`
                .modal-content, .modal-header, .modal-body, .demo-section h2, .demo-section p {
                  color: #fff !important;
                }
                .demo-section h2 {
                  font-size: 1.3rem;
                  font-weight: 600;
                  margin-bottom: 0.25em;
                  margin-top: 1.2em;
                  letter-spacing: 0.02em;
                }
                .demo-section p {
                  padding: 0.5em 0 0.75em 0;
                  line-height: 1.6;
                  color: #b0b0b0 !important;
                }
                .demo-section .toolbar-btn {
                  background-color: #e75480;
                  color: #fff;
                  border: none;
                  font-weight: 600;
                  box-shadow: 0 2px 8px rgba(231,84,128,0.08);
                }
                .demo-section .toolbar-btn:hover {
                  background-color: #c63c6e;
                }
              `}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Film"}),d.jsx("p",{children:"A short live-action sample set in a street caf. Demonstrates panels, dialogue, and images."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/film_the_coffee_deal.fountain").then(w=>w.text()).then(w=>{r(w),tt(w),o(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Film Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Animation"}),d.jsx("p",{children:"A musical animation sample featuring a singing squirrel. Shows lyrics, musical cues, and character interaction."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/animation_the_singing_squirrel.fountain").then(w=>w.text()).then(w=>{r(w),tt(w),o(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Animation Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Advertising"}),d.jsx("p",{children:"A playful ad script for Happy Fun Ball. Demonstrates panels, mock disclaimers, and ad-style dialogue."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/ad_happy_fun_ball.fountain").then(w=>w.text()).then(w=>{r(w),tt(w),o(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Advertising Demo"]})]}),d.jsx("hr",{style:{borderColor:"#444",opacity:.5}}),d.jsxs("div",{className:"demo-section",children:[d.jsx("h2",{children:" Documentary"}),d.jsx("p",{children:"A documentary sample with voice-over, captions, and subtitles. Shows non-fiction structure and panel usage."}),d.jsxs("button",{className:"toolbar-btn",onClick:()=>{fetch("/demo-scripts/documentary_voices_of_the_river.fountain").then(w=>w.text()).then(w=>{r(w),tt(w),o(!1)})},children:[d.jsx("span",{style:{marginRight:"0.5em"},children:d.jsx("i",{className:"fas fa-download","aria-hidden":"true"})}),"Load Documentary Demo"]})]})]})]})}),k&&d.jsxs("div",{className:"last-saved",style:{marginLeft:8},children:["Last saved: ",k.toLocaleDateString()," at ",k.toLocaleTimeString()]})]})}),d.jsx("div",{className:"mobile-view-toggle",children:d.jsx("div",{className:"tabs is-centered",children:d.jsxs("ul",{children:[d.jsx("li",{className:c==="edit"?"is-active":"",children:d.jsxs("a",{onClick:()=>h("edit"),children:[d.jsx("span",{className:"icon is-small",children:d.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),d.jsx("span",{children:"Edit"})]})}),d.jsx("li",{className:c==="preview"?"is-active":"",children:d.jsxs("a",{onClick:()=>h("preview"),children:[d.jsx("span",{className:"icon is-small",children:d.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),d.jsx("span",{children:"Preview"})]})})]})})}),d.jsxs("div",{className:"editor-layout",children:[d.jsx("button",{className:`toolbar-btn fullscreen-btn ${ie?"is-active":""}`,onClick:D1,title:ie?"Exit fullscreen":"Enter fullscreen","aria-label":ie?"Exit fullscreen":"Enter fullscreen",children:d.jsx("i",{className:`fas ${ie?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),d.jsxs("div",{className:"columns is-gapless",children:[d.jsx("div",{className:`column is-half-desktop ${c==="preview"?"mobile-hidden":""}`,children:d.jsxs("div",{className:"box editor-box",children:[d.jsx("h3",{className:"title is-6",children:"Editor"}),d.jsx(f1,{ref:H,value:n,onChange:p1,onCursorChange:M1,placeholder:"Type your fountain screenplay here..."})]})}),d.jsx("div",{className:`column is-half-desktop ${c==="edit"?"mobile-hidden":""}`,children:d.jsxs("div",{className:"box preview-box",children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview:"}),d.jsxs("div",{className:"pane-toggle",style:{display:"flex"},children:[d.jsx("button",{className:`toolbar-btn pane-toggle-btn ${_i==="screenplay"?"is-active":""}`,onClick:()=>_f("screenplay"),"aria-pressed":_i==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),d.jsx("button",{className:`toolbar-btn pane-toggle-btn ${_i==="player"?"is-active":""}`,onClick:()=>_f("player"),"aria-pressed":_i==="player",title:"Show media player",children:"Player"})]})]}),d.jsx("div",{})]}),_i==="screenplay"?d.jsx("div",{className:"preview-content",ref:j,children:ul.length===0?d.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):ul.map(w=>d.jsx("div",{className:`preview-line ${w.className||""} ${w.index===f?"current-line":""}`,"data-type":w.type,"data-line-id":w.id,"data-line-index":w.index,onClick:()=>N1(w.index),style:{cursor:"pointer"},children:w.type==="image"||w.type==="audio"||w.type==="title_page"||w.type==="page_break"||w.type==="page_number"?d.jsx("div",{dangerouslySetInnerHTML:{__html:w.text}}):w.text||""},w.id))}):d.jsxs("div",{className:"media-player",ref:hl,style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const w=K&&K.length>0?K[Ue]||K[0]:null,E=w&&typeof w.duration=="number"?w.duration:null,B=K&&K.length?K.length:0,z=w&&w.title?String(w.title):"";let Y="untitled";return z&&z.trim()&&(Y=z.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),Y||(Y="untitled")),d.jsxs("div",{className:"player-header",style:{marginBottom:"0.5rem",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[d.jsxs("div",{className:"panel-title-wrapper",style:{position:"relative",display:"inline-block"},children:[d.jsx("div",{className:"panel-title",style:{fontSize:"1.05rem",fontWeight:700},onMouseEnter:()=>fl(!0),onMouseLeave:()=>fl(!1),onClick:()=>fl(se=>!se),"aria-haspopup":"true","aria-expanded":Hf,children:Y}),w&&w.nesting&&Hf?d.jsxs("div",{className:"panel-nesting-tooltip",role:"tooltip",children:[w.nesting.act?d.jsxs("div",{children:[d.jsx("strong",{children:"Act:"})," ",w.nesting.act]}):null,w.nesting.scene?d.jsxs("div",{children:[d.jsx("strong",{children:"Scene:"})," ",w.nesting.scene]}):null,w.nesting.sequence?d.jsxs("div",{children:[d.jsx("strong",{children:"Sequence:"})," ",w.nesting.sequence]}):null,!w.nesting.act&&!w.nesting.sequence&&!w.nesting.scene?d.jsx("div",{style:{color:"#999"},children:"No nesting"}):null]}):null]}),d.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${Ue+1} / ${B})`})]}),d.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:d.jsxs("div",{style:{color:"#999"},children:["lines ",w&&typeof w.startLine=="number"?w.startLine:"?","",w&&typeof w.endLine=="number"?w.endLine:"?"]})})]}),d.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[d.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[d.jsx("span",{style:{fontSize:"0.95rem"},children:""}),E?`${E}s`:"n/a"]}),d.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:v1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsxs("button",{className:`toolbar-btn ${zi?"is-active":""}`,title:"Play","aria-label":"Play",onClick:g1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[zi?d.jsx("span",{className:"playing-indicator","aria-hidden":"true"}):null,""]}),d.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:y1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:m1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),d.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:Wf,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""})]})]}),zi&&(()=>{const se=K&&K.length>0?K[Ue]||K[0]:null,Ae=se&&typeof se.duration=="number"?se.duration:null,vt=Math.max(1e3,typeof Ae=="number"?Ae*1e3:3e3);return d.jsx("div",{className:"player-header-progress-wrapper",style:{position:"relative"},children:d.jsx("div",{className:"player-progress",style:{animationDuration:`${vt}ms`},"aria-hidden":"true"},`player-progress-${Ue}-${vt}`)})})()]})})(),(()=>{if(zf)return d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:d.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#000",aspectRatio:"16/9"}})});const w=K&&K.length>0?K[Ue]||K[0]:null,E=w&&w.imageUrl?w.imageUrl:null;return d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:E?d.jsx("img",{src:E,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):d.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:d.jsx("span",{children:"No image"})})})})(),(()=>{const w=K&&K.length>0?K[Ue]||K[0]:null,E=w&&w.audioUrl?w.audioUrl:null;return d.jsx("div",{style:{marginBottom:"0.75rem"},children:E?d.jsx("audio",{ref:$e,controls:!0,src:E,style:{width:"100%"}}):d.jsx("audio",{ref:$e,controls:!0,disabled:!0,style:{width:"100%"}})})})(),d.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!K||K.length===0?d.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const w=K&&K.length>0?K[Ue]||K[0]:null;return d.jsx("div",{children:d.jsx("div",{style:{padding:"0.5rem"},children:d.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:w&&w.blocks&&w.blocks.length>0?w.blocks.map(E=>d.jsx("div",{className:`preview-line ${E.className||""}`,dangerouslySetInnerHTML:{__html:E.text||""}},E.id)):w&&w.snippet?w.snippet.split(/\r?\n/).map((E,B)=>d.jsx("div",{style:{whiteSpace:"pre-wrap"},children:E||""},B)):d.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),i&&d.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Fountain.ext Format Reference"}),d.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:""})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Title Page"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",d.jsx("br",{}),"Credit: Written by",d.jsx("br",{}),"Author: John Dope",d.jsx("br",{}),"Authors: John Dope and Jane Smith",d.jsx("br",{}),"Source: Based on the novel by Famous Writer",d.jsx("br",{}),"Draft Date: October 4, 2025",d.jsx("br",{}),"Date: 10/04/2025",d.jsx("br",{}),"Contact:",d.jsx("br",{}),"John Dope",d.jsx("br",{}),"555-123-4567",d.jsx("br",{}),"john@example.com",d.jsx("br",{}),"",d.jsx("br",{}),"Literary Agent",d.jsx("br",{}),"Agency Name",d.jsx("br",{}),"agent@agency.com",d.jsx("br",{}),"Notes: This is a sample script",d.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),d.jsxs("p",{children:["Title page elements appear at the top of your script. All are optional. The parser recognizes a wide range of common title-page keys (case-insensitive). Examples include:",d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"title"}),", ",d.jsx("strong",{children:"credit"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"author"}),", ",d.jsx("strong",{children:"authors"}),", ",d.jsx("strong",{children:"writer"}),", ",d.jsx("strong",{children:"writers"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"written by"}),", ",d.jsx("strong",{children:"screenplay by"}),", ",d.jsx("strong",{children:"teleplay by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"story by"}),", ",d.jsx("strong",{children:"adaptation by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"source"}),", ",d.jsx("strong",{children:"based on"}),", ",d.jsx("strong",{children:"based on characters by"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"notes"}),", ",d.jsx("strong",{children:"draft"}),", ",d.jsx("strong",{children:"draft date"}),", ",d.jsx("strong",{children:"draft #"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"revision"}),", ",d.jsx("strong",{children:"revision date"}),", ",d.jsx("strong",{children:"revision color"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"date"}),", ",d.jsx("strong",{children:"contact"}),", ",d.jsx("strong",{children:"copyright"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"wga"}),", ",d.jsx("strong",{children:"wga registration"}),", ",d.jsx("strong",{children:"registration"}),", ",d.jsx("strong",{children:"registration #"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"series"}),", ",d.jsx("strong",{children:"episode"}),", ",d.jsx("strong",{children:"episode title"}),", ",d.jsx("strong",{children:"showrunner"})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"production"}),", ",d.jsx("strong",{children:"production company"})]})]}),"The parser accepts alternate spacing (for example ",d.jsx("code",{children:"written by:"}),') and is case-insensitive. Use "Author" for a single writer and "Authors" for multiple. Contact blocks may be multi-line (indent subsequent lines). End the title page with ',d.jsx("code",{children:"==="})," (page break)."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Scene Headings"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["EXT. PARKING LOT - DAY",d.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",d.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),d.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Characters & Dialogue"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["MENTOR",d.jsx("br",{}),"Welcome to the team!",d.jsx("br",{}),d.jsx("br",{}),"@MENTOR",d.jsx("br",{}),"(power user syntax)",d.jsx("br",{}),d.jsx("br",{}),"USER #1",d.jsx("br",{}),"Thanks for having me.",d.jsx("br",{}),d.jsx("br",{}),"BOB O'SHAUNNESSY",d.jsx("br",{}),"(whispering)",d.jsx("br",{}),"This is a parenthetical."]}),d.jsxs("p",{children:["Characters are normally written in ALL CAPS (e.g., ",d.jsx("code",{children:"BOB"}),", ",d.jsx("code",{children:"DR. SMITH"}),"), but the editor also supports a power-user ",d.jsx("code",{children:"@"})," prefix for mixed-case or unusual names (for example ",d.jsx("code",{children:"@John Doe"}),"). Character matching is Unicode-aware: a character name must start with an uppercase Unicode letter and may contain Unicode letters, numbers, apostrophes (",d.jsx("code",{children:"'"}),"), hyphens (",d.jsx("code",{children:"-"}),"), spaces or tabs. The power-user ",d.jsx("code",{children:"@"})," form (",d.jsx("code",{children:"@Name"}),") allows mixed case and additional punctuation where needed. Parentheticals (for example ",d.jsx("code",{children:"(whispering)"}),") are recognized when placed immediately after a character name and are rendered as parentheticals; the lines that follow are treated as dialogue. For dual dialogue, append ",d.jsx("code",{children:"^"})," to stacked character namesthese must appear consecutively above the dialogue block. Edge cases: the lexer intentionally requires the name to begin with an uppercase Unicode letter to avoid accidental matches inside action text; use the ",d.jsx("code",{children:"@"})," prefix for names that don't follow the all-caps convention or that start with non-letter characters. This supports non-ASCII names (for example: ",d.jsx("strong",{children:"LODIE"}),", ",d.jsx("strong",{children:"UKASZ"}),", ",d.jsx("strong",{children:""}),") and matches uppercase letters across many scripts."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Dual Dialogue"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["ALICE^",d.jsx("br",{}),"BOB^",d.jsx("br",{}),"CHARLIE^",d.jsx("br",{}),"I can't believe it!",d.jsx("br",{}),d.jsx("br",{}),"CHARLIE ^",d.jsx("br",{}),"DAVE ^",d.jsx("br",{}),"(disgusted)",d.jsx("br",{}),"Eew. no it's nooot!",d.jsx("br",{}),d.jsx("br",{})]}),d.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Action Lines"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["Bob walks into the room and looks around nervously.",d.jsx("br",{}),d.jsx("br",{}),"The computer screen flickers to life."]}),d.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Transitions"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["FADE IN:",d.jsx("br",{}),"CUT TO:",d.jsx("br",{}),"FADE TO BLACK.",d.jsx("br",{}),"> CUT TO BLACK."]}),d.jsxs("p",{children:["Transitions control scene changes. The matcher supports a wider set of transition phrases (for example: ",d.jsx("code",{children:"FADE IN:"}),", ",d.jsx("code",{children:"FADE OUT."}),", ",d.jsx("code",{children:"CUT TO:"}),", ",d.jsx("code",{children:"SMASH CUT TO:"}),", ",d.jsx("code",{children:"MATCH CUT TO:"}),", ",d.jsx("code",{children:"DISSOLVE TO:"}),", ",d.jsx("code",{children:"WIPE TO:"}),", ",d.jsx("code",{children:"BACK TO:"}),", and other common variants). Use ",d.jsx("code",{children:">"})," for the power-user transition syntax."]})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Centered Text"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:[">INTERMISSION<",d.jsx("br",{}),">THE END<"]}),d.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["# Act I",d.jsx("br",{}),"## Scene 1: The Beginning",d.jsx("br",{}),"### Sequence A: Setup",d.jsx("br",{}),"#### Panel 1",d.jsx("br",{}),"02:30",d.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",d.jsx("br",{}),"[a]https://example.com/dialogue.mp3",d.jsx("br",{}),d.jsx("br",{}),"#### Panel 2",d.jsx("br",{}),"01:15",d.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),d.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Notes & Comments"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["[[This is a note for the writer]]",d.jsx("br",{}),d.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),d.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),d.jsxs("div",{className:"help-section",children:[d.jsx("h3",{children:"Special Elements"}),d.jsxs("div",{className:"help-example",children:[d.jsxs("code",{children:["= Synopsis: Brief scene description",d.jsx("br",{}),d.jsx("br",{}),"===",d.jsx("br",{}),"(Page Break)",d.jsx("br",{}),d.jsx("br",{}),"~Lyrics:",d.jsx("br",{}),'~"Happy birthday to you"',d.jsx("br",{}),'~"Happy birthday to you"']}),d.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),at&&d.jsx("div",{className:"modal-overlay",onClick:()=>et(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Open .fountain from Drive"}),d.jsx("button",{className:"modal-close",onClick:()=>et(!1),children:""})]}),$&&d.jsxs("div",{style:{padding:"0 16px 8px 16px",color:"#cbd5e1",fontSize:13},children:[d.jsx("i",{className:"fas fa-folder-open persistence-icon","aria-hidden":"true"}),d.jsx("strong",{style:{color:"#e2e8f0"},children:$})]}),d.jsx("div",{className:"modal-body",children:Z?d.jsx("div",{children:"Loading..."}):d.jsx("div",{children:P&&P.length>0?d.jsx("ul",{children:P.map(w=>d.jsx("li",{style:{padding:"6px 0"},children:d.jsxs("a",{href:"#",onClick:async E=>{E.preventDefault();try{const B=await Nu(w.id);r(B);try{tt(B)}catch(z){console.error("processText failed",z)}try{const Y={...nt()||{},fileId:w.id,fileName:w.name,file:w};try{console.log("App: before persist, localStorage=",localStorage.getItem("fountain:driveState"))}catch{}vn(Y);try{console.log("App: after persist, localStorage=",localStorage.getItem("fountain:driveState"))}catch{}C(Y);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:w}))}catch{}}catch(z){console.error("Failed to persist selected file",z)}et(!1)}catch(B){console.error("Failed to load file from Drive",B),alert("Could not load file from Drive. Check console for details.")}},children:[d.jsx("span",{style:{display:"inline-block",minWidth:240},children:w.name}),d.jsx("span",{style:{marginLeft:8,color:"#9ca3af",fontSize:12},children:w.modifiedTime?new Date(w.modifiedTime).toLocaleString():"unknown"})]})},w.id))}):d.jsx("div",{children:"No .fountain files found in this folder."})})}),d.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:d.jsx("button",{className:"toolbar-btn",onClick:()=>et(!1),children:"Close"})})]})}),a&&d.jsx("div",{className:"modal-overlay",onClick:()=>u(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Character List"}),d.jsx("button",{className:"modal-close",onClick:()=>u(!1),children:""})]}),d.jsx("div",{className:"modal-body",children:Ln.length===0?d.jsx("p",{children:"No characters found in the script."}):d.jsx("div",{className:"character-list",children:Ln.map(w=>d.jsxs("div",{className:"character-item",children:[d.jsx("div",{className:"character-name",children:w}),d.jsxs("div",{className:"character-count",children:[d1.get(w)||0," dialogue lines"]})]},w))})})]})})]})}Du.createRoot(document.getElementById("root")).render(d.jsx(Q1.StrictMode,{children:d.jsx(NA,{})}));
