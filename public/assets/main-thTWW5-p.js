import{p as Oa,a as N1}from"./chunk-B1-1SDTH.js";function D1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cm={exports:{}},ta={},Am={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qs=Symbol.for("react.element"),O1=Symbol.for("react.portal"),P1=Symbol.for("react.fragment"),L1=Symbol.for("react.strict_mode"),R1=Symbol.for("react.profiler"),I1=Symbol.for("react.provider"),B1=Symbol.for("react.context"),j1=Symbol.for("react.forward_ref"),F1=Symbol.for("react.suspense"),_1=Symbol.for("react.memo"),z1=Symbol.for("react.lazy"),Hf=Symbol.iterator;function H1(t){return t===null||typeof t!="object"?null:(t=Hf&&t[Hf]||t["@@iterator"],typeof t=="function"?t:null)}var bm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Em=Object.assign,Tm={};function Di(t,e,n){this.props=t,this.context=e,this.refs=Tm,this.updater=n||bm}Di.prototype.isReactComponent={};Di.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mm(){}Mm.prototype=Di.prototype;function hh(t,e,n){this.props=t,this.context=e,this.refs=Tm,this.updater=n||bm}var fh=hh.prototype=new Mm;fh.constructor=hh;Em(fh,Di.prototype);fh.isPureReactComponent=!0;var Wf=Array.isArray,Nm=Object.prototype.hasOwnProperty,dh={current:null},Dm={key:!0,ref:!0,__self:!0,__source:!0};function Om(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)Nm.call(e,r)&&!Dm.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Qs,type:t,key:s,ref:l,props:i,_owner:dh.current}}function W1(t,e){return{$$typeof:Qs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ph(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qs}function V1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vf=/\/+/g;function Pa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?V1(""+t.key):e.toString(36)}function Gl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Qs:case O1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+Pa(l,0):r,Wf(i)?(n="",t!=null&&(n=t.replace(Vf,"$&/")+"/"),Gl(i,e,n,"",function(u){return u})):i!=null&&(ph(i)&&(i=W1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Vf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",Wf(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+Pa(s,o);l+=Gl(s,e,n,a,i)}else if(a=H1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+Pa(s,o++),l+=Gl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function cl(t,e,n){if(t==null)return t;var r=[],i=0;return Gl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function U1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var st={current:null},ql={transition:null},$1={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:ql,ReactCurrentOwner:dh};function Pm(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:cl,forEach:function(t,e,n){cl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cl(t,function(){e++}),e},toArray:function(t){return cl(t,function(e){return e})||[]},only:function(t){if(!ph(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=Di;Y.Fragment=P1;Y.Profiler=R1;Y.PureComponent=hh;Y.StrictMode=L1;Y.Suspense=F1;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$1;Y.act=Pm;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Em({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=dh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)Nm.call(e,a)&&!Dm.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Qs,type:t.type,key:i,ref:s,props:r,_owner:l}};Y.createContext=function(t){return t={$$typeof:B1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:I1,_context:t},t.Consumer=t};Y.createElement=Om;Y.createFactory=function(t){var e=Om.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:j1,render:t}};Y.isValidElement=ph;Y.lazy=function(t){return{$$typeof:z1,_payload:{_status:-1,_result:t},_init:U1}};Y.memo=function(t,e){return{$$typeof:_1,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};Y.unstable_act=Pm;Y.useCallback=function(t,e){return st.current.useCallback(t,e)};Y.useContext=function(t){return st.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return st.current.useDeferredValue(t)};Y.useEffect=function(t,e){return st.current.useEffect(t,e)};Y.useId=function(){return st.current.useId()};Y.useImperativeHandle=function(t,e,n){return st.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return st.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return st.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return st.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return st.current.useReducer(t,e,n)};Y.useRef=function(t){return st.current.useRef(t)};Y.useState=function(t){return st.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return st.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return st.current.useTransition()};Y.version="18.3.1";Am.exports=Y;var P=Am.exports;const K1=D1(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1=P,q1=Symbol.for("react.element"),Y1=Symbol.for("react.fragment"),Q1=Object.prototype.hasOwnProperty,J1=G1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X1={key:!0,ref:!0,__self:!0,__source:!0};function Lm(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)Q1.call(e,r)&&!X1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:q1,type:t,key:s,ref:l,props:i,_owner:J1.current}}ta.Fragment=Y1;ta.jsx=Lm;ta.jsxs=Lm;Cm.exports=ta;var m=Cm.exports,Tu={},Rm={exports:{}},Tt={},Im={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,U){var F=L.length;L.push(U);e:for(;0<F;){var Z=F-1>>>1,K=L[Z];if(0<i(K,U))L[Z]=U,L[F]=K,F=Z;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var U=L[0],F=L.pop();if(F!==U){L[0]=F;e:for(var Z=0,K=L.length,Ce=K>>>1;Z<Ce;){var Ae=2*(Z+1)-1,Me=L[Ae],ot=Ae+1,Ne=L[ot];if(0>i(Me,F))ot<K&&0>i(Ne,Me)?(L[Z]=Ne,L[ot]=F,Z=ot):(L[Z]=Me,L[Ae]=F,Z=Ae);else if(ot<K&&0>i(Ne,F))L[Z]=Ne,L[ot]=F,Z=ot;else break e}}return U}function i(L,U){var F=L.sortIndex-U.sortIndex;return F!==0?F:L.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],c=1,h=null,f=3,d=!1,g=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=L)r(u),U.sortIndex=U.expirationTime,e(a,U);else break;U=n(u)}}function S(L){if(v=!1,w(L),!g)if(n(a)!==null)g=!0,tt(C);else{var U=n(u);U!==null&&Ht(S,U.startTime-L)}}function C(L,U){g=!1,v&&(v=!1,p(D),D=-1),d=!0;var F=f;try{for(w(U),h=n(a);h!==null&&(!(h.expirationTime>U)||L&&!$());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var K=Z(h.expirationTime<=U);U=t.unstable_now(),typeof K=="function"?h.callback=K:h===n(a)&&r(a),w(U)}else r(a);h=n(a)}if(h!==null)var Ce=!0;else{var Ae=n(u);Ae!==null&&Ht(S,Ae.startTime-U),Ce=!1}return Ce}finally{h=null,f=F,d=!1}}var b=!1,A=null,D=-1,W=5,B=-1;function $(){return!(t.unstable_now()-B<W)}function V(){if(A!==null){var L=t.unstable_now();B=L;var U=!0;try{U=A(!0,L)}finally{U?Q():(b=!1,A=null)}}else b=!1}var Q;if(typeof y=="function")Q=function(){y(V)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,xe=se.port2;se.port1.onmessage=V,Q=function(){xe.postMessage(null)}}else Q=function(){k(V,0)};function tt(L){A=L,b||(b=!0,Q())}function Ht(L,U){D=k(function(){L(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){g||d||(g=!0,tt(C))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var F=f;f=U;try{return L()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,U){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var F=f;f=L;try{return U()}finally{f=F}},t.unstable_scheduleCallback=function(L,U,F){var Z=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Z+F:Z):F=Z,L){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=F+K,L={id:c++,callback:U,priorityLevel:L,startTime:F,expirationTime:K,sortIndex:-1},F>Z?(L.sortIndex=F,e(u,L),n(a)===null&&L===n(u)&&(v?(p(D),D=-1):v=!0,Ht(S,F-Z))):(L.sortIndex=K,e(a,L),g||d||(g=!0,tt(C))),L},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(L){var U=f;return function(){var F=f;f=U;try{return L.apply(this,arguments)}finally{f=F}}}})(Bm);Im.exports=Bm;var Z1=Im.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew=P,At=Z1;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jm=new Set,Ss={};function Fr(t,e){gi(t,e),gi(t+"Capture",e)}function gi(t,e){for(Ss[t]=e,t=0;t<e.length;t++)jm.add(e[t])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mu=Object.prototype.hasOwnProperty,tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uf={},$f={};function nw(t){return Mu.call($f,t)?!0:Mu.call(Uf,t)?!1:tw.test(t)?$f[t]=!0:(Uf[t]=!0,!1)}function rw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iw(t,e,n,r){if(e===null||typeof e>"u"||rw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ue[t]=new lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ue[e]=new lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ue[t]=new lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ue[t]=new lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ue[t]=new lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ue[t]=new lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ue[t]=new lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ue[t]=new lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ue[t]=new lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var mh=/[\-:]([a-z])/g;function gh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mh,gh);Ue[e]=new lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mh,gh);Ue[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mh,gh);Ue[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ue[t]=new lt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ue[t]=new lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yh(t,e,n,r){var i=Ue.hasOwnProperty(e)?Ue[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iw(e,n,i,r)&&(n=null),r||i===null?nw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var On=ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hl=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Kr=Symbol.for("react.fragment"),vh=Symbol.for("react.strict_mode"),Nu=Symbol.for("react.profiler"),Fm=Symbol.for("react.provider"),_m=Symbol.for("react.context"),wh=Symbol.for("react.forward_ref"),Du=Symbol.for("react.suspense"),Ou=Symbol.for("react.suspense_list"),xh=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),zm=Symbol.for("react.offscreen"),Kf=Symbol.iterator;function zi(t){return t===null||typeof t!="object"?null:(t=Kf&&t[Kf]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,La;function Zi(t){if(La===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+t}var Ra=!1;function Ia(t,e){if(!t||Ra)return"";Ra=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{Ra=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zi(t):""}function sw(t){switch(t.tag){case 5:return Zi(t.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return t=Ia(t.type,!1),t;case 11:return t=Ia(t.type.render,!1),t;case 1:return t=Ia(t.type,!0),t;default:return""}}function Pu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kr:return"Fragment";case $r:return"Portal";case Nu:return"Profiler";case vh:return"StrictMode";case Du:return"Suspense";case Ou:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _m:return(t.displayName||"Context")+".Consumer";case Fm:return(t._context.displayName||"Context")+".Provider";case wh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xh:return e=t.displayName||null,e!==null?e:Pu(t.type)||"Memo";case Rn:e=t._payload,t=t._init;try{return Pu(t(e))}catch{}}return null}function lw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pu(e);case 8:return e===vh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ow(t){var e=Hm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fl(t){t._valueTracker||(t._valueTracker=ow(t))}function Wm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Hm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lu(t,e){var n=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vm(t,e){e=e.checked,e!=null&&yh(t,"checked",e,!1)}function Ru(t,e){Vm(t,e);var n=nr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Iu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Iu(t,e.type,nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Iu(t,e,n){(e!=="number"||fo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var es=Array.isArray;function li(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+nr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(es(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:nr(n)}}function Um(t,e){var n=nr(e.value),r=nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $m(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ju(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$m(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dl,Km=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dl=dl||document.createElement("div"),dl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aw=["Webkit","ms","Moz","O"];Object.keys(ls).forEach(function(t){aw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ls[e]=ls[t]})});function Gm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ls.hasOwnProperty(t)&&ls[t]?(""+e).trim():e+"px"}function qm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Gm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uw=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fu(t,e){if(e){if(uw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function _u(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zu=null;function kh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hu=null,oi=null,ai=null;function Jf(t){if(t=Zs(t)){if(typeof Hu!="function")throw Error(M(280));var e=t.stateNode;e&&(e=la(e),Hu(t.stateNode,t.type,e))}}function Ym(t){oi?ai?ai.push(t):ai=[t]:oi=t}function Qm(){if(oi){var t=oi,e=ai;if(ai=oi=null,Jf(t),e)for(t=0;t<e.length;t++)Jf(e[t])}}function Jm(t,e){return t(e)}function Xm(){}var Ba=!1;function Zm(t,e,n){if(Ba)return t(e,n);Ba=!0;try{return Jm(t,e,n)}finally{Ba=!1,(oi!==null||ai!==null)&&(Xm(),Qm())}}function As(t,e){var n=t.stateNode;if(n===null)return null;var r=la(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Wu=!1;if(En)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){Wu=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{Wu=!1}function cw(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var os=!1,po=null,mo=!1,Vu=null,hw={onError:function(t){os=!0,po=t}};function fw(t,e,n,r,i,s,l,o,a){os=!1,po=null,cw.apply(hw,arguments)}function dw(t,e,n,r,i,s,l,o,a){if(fw.apply(this,arguments),os){if(os){var u=po;os=!1,po=null}else throw Error(M(198));mo||(mo=!0,Vu=u)}}function _r(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xf(t){if(_r(t)!==t)throw Error(M(188))}function pw(t){var e=t.alternate;if(!e){if(e=_r(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Xf(i),t;if(s===r)return Xf(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function tg(t){return t=pw(t),t!==null?ng(t):null}function ng(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ng(t);if(e!==null)return e;t=t.sibling}return null}var rg=At.unstable_scheduleCallback,Zf=At.unstable_cancelCallback,mw=At.unstable_shouldYield,gw=At.unstable_requestPaint,Se=At.unstable_now,yw=At.unstable_getCurrentPriorityLevel,Sh=At.unstable_ImmediatePriority,ig=At.unstable_UserBlockingPriority,go=At.unstable_NormalPriority,vw=At.unstable_LowPriority,sg=At.unstable_IdlePriority,na=null,pn=null;function ww(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(na,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:Sw,xw=Math.log,kw=Math.LN2;function Sw(t){return t>>>=0,t===0?32:31-(xw(t)/kw|0)|0}var pl=64,ml=4194304;function ts(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=ts(o):(s&=l,s!==0&&(r=ts(s)))}else l=n&~i,l!==0?r=ts(l):s!==0&&(r=ts(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qt(e),i=1<<n,r|=t[n],e&=~i;return r}function Cw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-qt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=Cw(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Uu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lg(){var t=pl;return pl<<=1,!(pl&4194240)&&(pl=64),t}function ja(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Js(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qt(e),t[e]=n}function bw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ch(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var le=0;function og(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ag,Ah,ug,cg,hg,$u=!1,gl=[],Gn=null,qn=null,Yn=null,bs=new Map,Es=new Map,_n=[],Ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ed(t,e){switch(t){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":bs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Es.delete(e.pointerId)}}function Wi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zs(e),e!==null&&Ah(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Tw(t,e,n,r,i){switch(e){case"focusin":return Gn=Wi(Gn,t,e,n,r,i),!0;case"dragenter":return qn=Wi(qn,t,e,n,r,i),!0;case"mouseover":return Yn=Wi(Yn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return bs.set(s,Wi(bs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Es.set(s,Wi(Es.get(s)||null,t,e,n,r,i)),!0}return!1}function fg(t){var e=wr(t.target);if(e!==null){var n=_r(e);if(n!==null){if(e=n.tag,e===13){if(e=eg(n),e!==null){t.blockedOn=e,hg(t.priority,function(){ug(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ku(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zu=r,n.target.dispatchEvent(r),zu=null}else return e=Zs(n),e!==null&&Ah(e),t.blockedOn=n,!1;e.shift()}return!0}function td(t,e,n){Yl(t)&&n.delete(e)}function Mw(){$u=!1,Gn!==null&&Yl(Gn)&&(Gn=null),qn!==null&&Yl(qn)&&(qn=null),Yn!==null&&Yl(Yn)&&(Yn=null),bs.forEach(td),Es.forEach(td)}function Vi(t,e){t.blockedOn===e&&(t.blockedOn=null,$u||($u=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,Mw)))}function Ts(t){function e(i){return Vi(i,t)}if(0<gl.length){Vi(gl[0],t);for(var n=1;n<gl.length;n++){var r=gl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gn!==null&&Vi(Gn,t),qn!==null&&Vi(qn,t),Yn!==null&&Vi(Yn,t),bs.forEach(e),Es.forEach(e),n=0;n<_n.length;n++)r=_n[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_n.length&&(n=_n[0],n.blockedOn===null);)fg(n),n.blockedOn===null&&_n.shift()}var ui=On.ReactCurrentBatchConfig,vo=!0;function Nw(t,e,n,r){var i=le,s=ui.transition;ui.transition=null;try{le=1,bh(t,e,n,r)}finally{le=i,ui.transition=s}}function Dw(t,e,n,r){var i=le,s=ui.transition;ui.transition=null;try{le=4,bh(t,e,n,r)}finally{le=i,ui.transition=s}}function bh(t,e,n,r){if(vo){var i=Ku(t,e,n,r);if(i===null)Ga(t,e,r,wo,n),ed(t,r);else if(Tw(i,t,e,n,r))r.stopPropagation();else if(ed(t,r),e&4&&-1<Ew.indexOf(t)){for(;i!==null;){var s=Zs(i);if(s!==null&&ag(s),s=Ku(t,e,n,r),s===null&&Ga(t,e,r,wo,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ga(t,e,r,null,n)}}var wo=null;function Ku(t,e,n,r){if(wo=null,t=kh(r),t=wr(t),t!==null)if(e=_r(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wo=t,null}function dg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yw()){case Sh:return 1;case ig:return 4;case go:case vw:return 16;case sg:return 536870912;default:return 16}default:return 16}}var Wn=null,Eh=null,Ql=null;function pg(){if(Ql)return Ql;var t,e=Eh,n=e.length,r,i="value"in Wn?Wn.value:Wn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Ql=i.slice(t,1<r?1-r:void 0)}function Jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yl(){return!0}function nd(){return!1}function Mt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yl:nd,this.isPropagationStopped=nd,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),e}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Th=Mt(Oi),Xs=ve({},Oi,{view:0,detail:0}),Ow=Mt(Xs),Fa,_a,Ui,ra=ve({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(Fa=t.screenX-Ui.screenX,_a=t.screenY-Ui.screenY):_a=Fa=0,Ui=t),Fa)},movementY:function(t){return"movementY"in t?t.movementY:_a}}),rd=Mt(ra),Pw=ve({},ra,{dataTransfer:0}),Lw=Mt(Pw),Rw=ve({},Xs,{relatedTarget:0}),za=Mt(Rw),Iw=ve({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),Bw=Mt(Iw),jw=ve({},Oi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fw=Mt(jw),_w=ve({},Oi,{data:0}),id=Mt(_w),zw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ww={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ww[t])?!!e[t]:!1}function Mh(){return Vw}var Uw=ve({},Xs,{key:function(t){if(t.key){var e=zw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mh,charCode:function(t){return t.type==="keypress"?Jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$w=Mt(Uw),Kw=ve({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sd=Mt(Kw),Gw=ve({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mh}),qw=Mt(Gw),Yw=ve({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qw=Mt(Yw),Jw=ve({},ra,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xw=Mt(Jw),Zw=[9,13,27,32],Nh=En&&"CompositionEvent"in window,as=null;En&&"documentMode"in document&&(as=document.documentMode);var ex=En&&"TextEvent"in window&&!as,mg=En&&(!Nh||as&&8<as&&11>=as),ld=" ",od=!1;function gg(t,e){switch(t){case"keyup":return Zw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gr=!1;function tx(t,e){switch(t){case"compositionend":return yg(e);case"keypress":return e.which!==32?null:(od=!0,ld);case"textInput":return t=e.data,t===ld&&od?null:t;default:return null}}function nx(t,e){if(Gr)return t==="compositionend"||!Nh&&gg(t,e)?(t=pg(),Ql=Eh=Wn=null,Gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mg&&e.locale!=="ko"?null:e.data;default:return null}}var rx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ad(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rx[t.type]:e==="textarea"}function vg(t,e,n,r){Ym(r),e=xo(e,"onChange"),0<e.length&&(n=new Th("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var us=null,Ms=null;function ix(t){Ng(t,0)}function ia(t){var e=Qr(t);if(Wm(e))return t}function sx(t,e){if(t==="change")return e}var wg=!1;if(En){var Ha;if(En){var Wa="oninput"in document;if(!Wa){var ud=document.createElement("div");ud.setAttribute("oninput","return;"),Wa=typeof ud.oninput=="function"}Ha=Wa}else Ha=!1;wg=Ha&&(!document.documentMode||9<document.documentMode)}function cd(){us&&(us.detachEvent("onpropertychange",xg),Ms=us=null)}function xg(t){if(t.propertyName==="value"&&ia(Ms)){var e=[];vg(e,Ms,t,kh(t)),Zm(ix,e)}}function lx(t,e,n){t==="focusin"?(cd(),us=e,Ms=n,us.attachEvent("onpropertychange",xg)):t==="focusout"&&cd()}function ox(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ia(Ms)}function ax(t,e){if(t==="click")return ia(e)}function ux(t,e){if(t==="input"||t==="change")return ia(e)}function cx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qt=typeof Object.is=="function"?Object.is:cx;function Ns(t,e){if(Qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Mu.call(e,i)||!Qt(t[i],e[i]))return!1}return!0}function hd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fd(t,e){var n=hd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hd(n)}}function kg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sg(){for(var t=window,e=fo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fo(t.document)}return e}function Dh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hx(t){var e=Sg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kg(n.ownerDocument.documentElement,n)){if(r!==null&&Dh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=fd(n,s);var l=fd(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fx=En&&"documentMode"in document&&11>=document.documentMode,qr=null,Gu=null,cs=null,qu=!1;function dd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qu||qr==null||qr!==fo(r)||(r=qr,"selectionStart"in r&&Dh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cs&&Ns(cs,r)||(cs=r,r=xo(Gu,"onSelect"),0<r.length&&(e=new Th("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qr)))}function vl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yr={animationend:vl("Animation","AnimationEnd"),animationiteration:vl("Animation","AnimationIteration"),animationstart:vl("Animation","AnimationStart"),transitionend:vl("Transition","TransitionEnd")},Va={},Cg={};En&&(Cg=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function sa(t){if(Va[t])return Va[t];if(!Yr[t])return t;var e=Yr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Cg)return Va[t]=e[n];return t}var Ag=sa("animationend"),bg=sa("animationiteration"),Eg=sa("animationstart"),Tg=sa("transitionend"),Mg=new Map,pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(t,e){Mg.set(t,e),Fr(e,[t])}for(var Ua=0;Ua<pd.length;Ua++){var $a=pd[Ua],dx=$a.toLowerCase(),px=$a[0].toUpperCase()+$a.slice(1);cr(dx,"on"+px)}cr(Ag,"onAnimationEnd");cr(bg,"onAnimationIteration");cr(Eg,"onAnimationStart");cr("dblclick","onDoubleClick");cr("focusin","onFocus");cr("focusout","onBlur");cr(Tg,"onTransitionEnd");gi("onMouseEnter",["mouseout","mouseover"]);gi("onMouseLeave",["mouseout","mouseover"]);gi("onPointerEnter",["pointerout","pointerover"]);gi("onPointerLeave",["pointerout","pointerover"]);Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ns));function md(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dw(r,e,void 0,t),t.currentTarget=null}function Ng(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;md(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;md(i,o,u),s=a}}}if(mo)throw t=Vu,mo=!1,Vu=null,t}function he(t,e){var n=e[Zu];n===void 0&&(n=e[Zu]=new Set);var r=t+"__bubble";n.has(r)||(Dg(e,t,2,!1),n.add(r))}function Ka(t,e,n){var r=0;e&&(r|=4),Dg(n,t,r,e)}var wl="_reactListening"+Math.random().toString(36).slice(2);function Ds(t){if(!t[wl]){t[wl]=!0,jm.forEach(function(n){n!=="selectionchange"&&(mx.has(n)||Ka(n,!1,t),Ka(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wl]||(e[wl]=!0,Ka("selectionchange",!1,e))}}function Dg(t,e,n,r){switch(dg(e)){case 1:var i=Nw;break;case 4:i=Dw;break;default:i=bh}n=i.bind(null,e,n,t),i=void 0,!Wu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ga(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=wr(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Zm(function(){var u=s,c=kh(n),h=[];e:{var f=Mg.get(t);if(f!==void 0){var d=Th,g=t;switch(t){case"keypress":if(Jl(n)===0)break e;case"keydown":case"keyup":d=$w;break;case"focusin":g="focus",d=za;break;case"focusout":g="blur",d=za;break;case"beforeblur":case"afterblur":d=za;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Lw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=qw;break;case Ag:case bg:case Eg:d=Bw;break;case Tg:d=Qw;break;case"scroll":d=Ow;break;case"wheel":d=Xw;break;case"copy":case"cut":case"paste":d=Fw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=sd}var v=(e&4)!==0,k=!v&&t==="scroll",p=v?f!==null?f+"Capture":null:f;v=[];for(var y=u,w;y!==null;){w=y;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,p!==null&&(S=As(y,p),S!=null&&v.push(Os(y,S,w)))),k)break;y=y.return}0<v.length&&(f=new d(f,g,null,n,c),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==zu&&(g=n.relatedTarget||n.fromElement)&&(wr(g)||g[Tn]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(g=n.relatedTarget||n.toElement,d=u,g=g?wr(g):null,g!==null&&(k=_r(g),g!==k||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=u),d!==g)){if(v=rd,S="onMouseLeave",p="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=sd,S="onPointerLeave",p="onPointerEnter",y="pointer"),k=d==null?f:Qr(d),w=g==null?f:Qr(g),f=new v(S,y+"leave",d,n,c),f.target=k,f.relatedTarget=w,S=null,wr(c)===u&&(v=new v(p,y+"enter",g,n,c),v.target=w,v.relatedTarget=k,S=v),k=S,d&&g)t:{for(v=d,p=g,y=0,w=v;w;w=zr(w))y++;for(w=0,S=p;S;S=zr(S))w++;for(;0<y-w;)v=zr(v),y--;for(;0<w-y;)p=zr(p),w--;for(;y--;){if(v===p||p!==null&&v===p.alternate)break t;v=zr(v),p=zr(p)}v=null}else v=null;d!==null&&gd(h,f,d,v,!1),g!==null&&k!==null&&gd(h,k,g,v,!0)}}e:{if(f=u?Qr(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=sx;else if(ad(f))if(wg)C=ux;else{C=ox;var b=lx}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=ax);if(C&&(C=C(t,u))){vg(h,C,n,c);break e}b&&b(t,f,u),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&Iu(f,"number",f.value)}switch(b=u?Qr(u):window,t){case"focusin":(ad(b)||b.contentEditable==="true")&&(qr=b,Gu=u,cs=null);break;case"focusout":cs=Gu=qr=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,dd(h,n,c);break;case"selectionchange":if(fx)break;case"keydown":case"keyup":dd(h,n,c)}var A;if(Nh)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Gr?gg(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(mg&&n.locale!=="ko"&&(Gr||D!=="onCompositionStart"?D==="onCompositionEnd"&&Gr&&(A=pg()):(Wn=c,Eh="value"in Wn?Wn.value:Wn.textContent,Gr=!0)),b=xo(u,D),0<b.length&&(D=new id(D,t,null,n,c),h.push({event:D,listeners:b}),A?D.data=A:(A=yg(n),A!==null&&(D.data=A)))),(A=ex?tx(t,n):nx(t,n))&&(u=xo(u,"onBeforeInput"),0<u.length&&(c=new id("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=A))}Ng(h,e)})}function Os(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=As(t,n),s!=null&&r.unshift(Os(t,s,i)),s=As(t,e),s!=null&&r.push(Os(t,s,i))),t=t.return}return r}function zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gd(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=As(n,s),a!=null&&l.unshift(Os(n,a,o))):i||(a=As(n,s),a!=null&&l.push(Os(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var gx=/\r\n?/g,yx=/\u0000|\uFFFD/g;function yd(t){return(typeof t=="string"?t:""+t).replace(gx,`
`).replace(yx,"")}function xl(t,e,n){if(e=yd(e),yd(t)!==e&&n)throw Error(M(425))}function ko(){}var Yu=null,Qu=null;function Ju(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xu=typeof setTimeout=="function"?setTimeout:void 0,vx=typeof clearTimeout=="function"?clearTimeout:void 0,vd=typeof Promise=="function"?Promise:void 0,wx=typeof queueMicrotask=="function"?queueMicrotask:typeof vd<"u"?function(t){return vd.resolve(null).then(t).catch(xx)}:Xu;function xx(t){setTimeout(function(){throw t})}function qa(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ts(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ts(e)}function Qn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),un="__reactFiber$"+Pi,Ps="__reactProps$"+Pi,Tn="__reactContainer$"+Pi,Zu="__reactEvents$"+Pi,kx="__reactListeners$"+Pi,Sx="__reactHandles$"+Pi;function wr(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tn]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wd(t);t!==null;){if(n=t[un])return n;t=wd(t)}return e}t=n,n=t.parentNode}return null}function Zs(t){return t=t[un]||t[Tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function la(t){return t[Ps]||null}var ec=[],Jr=-1;function hr(t){return{current:t}}function de(t){0>Jr||(t.current=ec[Jr],ec[Jr]=null,Jr--)}function ue(t,e){Jr++,ec[Jr]=t.current,t.current=e}var rr={},Ze=hr(rr),ft=hr(!1),Tr=rr;function yi(t,e){var n=t.type.contextTypes;if(!n)return rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dt(t){return t=t.childContextTypes,t!=null}function So(){de(ft),de(Ze)}function xd(t,e,n){if(Ze.current!==rr)throw Error(M(168));ue(Ze,e),ue(ft,n)}function Og(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,lw(t)||"Unknown",i));return ve({},n,r)}function Co(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rr,Tr=Ze.current,ue(Ze,t),ue(ft,ft.current),!0}function kd(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=Og(t,e,Tr),r.__reactInternalMemoizedMergedChildContext=t,de(ft),de(Ze),ue(Ze,t)):de(ft),ue(ft,n)}var wn=null,oa=!1,Ya=!1;function Pg(t){wn===null?wn=[t]:wn.push(t)}function Cx(t){oa=!0,Pg(t)}function fr(){if(!Ya&&wn!==null){Ya=!0;var t=0,e=le;try{var n=wn;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wn=null,oa=!1}catch(i){throw wn!==null&&(wn=wn.slice(t+1)),rg(Sh,fr),i}finally{le=e,Ya=!1}}return null}var Xr=[],Zr=0,Ao=null,bo=0,Nt=[],Dt=0,Mr=null,kn=1,Sn="";function gr(t,e){Xr[Zr++]=bo,Xr[Zr++]=Ao,Ao=t,bo=e}function Lg(t,e,n){Nt[Dt++]=kn,Nt[Dt++]=Sn,Nt[Dt++]=Mr,Mr=t;var r=kn;t=Sn;var i=32-qt(r)-1;r&=~(1<<i),n+=1;var s=32-qt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,kn=1<<32-qt(e)+i|n<<i|r,Sn=s+t}else kn=1<<s|n<<i|r,Sn=t}function Oh(t){t.return!==null&&(gr(t,1),Lg(t,1,0))}function Ph(t){for(;t===Ao;)Ao=Xr[--Zr],Xr[Zr]=null,bo=Xr[--Zr],Xr[Zr]=null;for(;t===Mr;)Mr=Nt[--Dt],Nt[Dt]=null,Sn=Nt[--Dt],Nt[Dt]=null,kn=Nt[--Dt],Nt[Dt]=null}var Ct=null,St=null,pe=!1,Kt=null;function Rg(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,St=Qn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,St=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mr!==null?{id:kn,overflow:Sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,St=null,!0):!1;default:return!1}}function tc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nc(t){if(pe){var e=St;if(e){var n=e;if(!Sd(t,e)){if(tc(t))throw Error(M(418));e=Qn(n.nextSibling);var r=Ct;e&&Sd(t,e)?Rg(r,n):(t.flags=t.flags&-4097|2,pe=!1,Ct=t)}}else{if(tc(t))throw Error(M(418));t.flags=t.flags&-4097|2,pe=!1,Ct=t}}}function Cd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function kl(t){if(t!==Ct)return!1;if(!pe)return Cd(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ju(t.type,t.memoizedProps)),e&&(e=St)){if(tc(t))throw Ig(),Error(M(418));for(;e;)Rg(t,e),e=Qn(e.nextSibling)}if(Cd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){St=Qn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}St=null}}else St=Ct?Qn(t.stateNode.nextSibling):null;return!0}function Ig(){for(var t=St;t;)t=Qn(t.nextSibling)}function vi(){St=Ct=null,pe=!1}function Lh(t){Kt===null?Kt=[t]:Kt.push(t)}var Ax=On.ReactCurrentBatchConfig;function $i(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Sl(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ad(t){var e=t._init;return e(t._payload)}function Bg(t){function e(p,y){if(t){var w=p.deletions;w===null?(p.deletions=[y],p.flags|=16):w.push(y)}}function n(p,y){if(!t)return null;for(;y!==null;)e(p,y),y=y.sibling;return null}function r(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function i(p,y){return p=er(p,y),p.index=0,p.sibling=null,p}function s(p,y,w){return p.index=w,t?(w=p.alternate,w!==null?(w=w.index,w<y?(p.flags|=2,y):w):(p.flags|=2,y)):(p.flags|=1048576,y)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,y,w,S){return y===null||y.tag!==6?(y=nu(w,p.mode,S),y.return=p,y):(y=i(y,w),y.return=p,y)}function a(p,y,w,S){var C=w.type;return C===Kr?c(p,y,w.props.children,S,w.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Rn&&Ad(C)===y.type)?(S=i(y,w.props),S.ref=$i(p,y,w),S.return=p,S):(S=io(w.type,w.key,w.props,null,p.mode,S),S.ref=$i(p,y,w),S.return=p,S)}function u(p,y,w,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=ru(w,p.mode,S),y.return=p,y):(y=i(y,w.children||[]),y.return=p,y)}function c(p,y,w,S,C){return y===null||y.tag!==7?(y=br(w,p.mode,S,C),y.return=p,y):(y=i(y,w),y.return=p,y)}function h(p,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=nu(""+y,p.mode,w),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hl:return w=io(y.type,y.key,y.props,null,p.mode,w),w.ref=$i(p,null,y),w.return=p,w;case $r:return y=ru(y,p.mode,w),y.return=p,y;case Rn:var S=y._init;return h(p,S(y._payload),w)}if(es(y)||zi(y))return y=br(y,p.mode,w,null),y.return=p,y;Sl(p,y)}return null}function f(p,y,w,S){var C=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:o(p,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hl:return w.key===C?a(p,y,w,S):null;case $r:return w.key===C?u(p,y,w,S):null;case Rn:return C=w._init,f(p,y,C(w._payload),S)}if(es(w)||zi(w))return C!==null?null:c(p,y,w,S,null);Sl(p,w)}return null}function d(p,y,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(w)||null,o(y,p,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hl:return p=p.get(S.key===null?w:S.key)||null,a(y,p,S,C);case $r:return p=p.get(S.key===null?w:S.key)||null,u(y,p,S,C);case Rn:var b=S._init;return d(p,y,w,b(S._payload),C)}if(es(S)||zi(S))return p=p.get(w)||null,c(y,p,S,C,null);Sl(y,S)}return null}function g(p,y,w,S){for(var C=null,b=null,A=y,D=y=0,W=null;A!==null&&D<w.length;D++){A.index>D?(W=A,A=null):W=A.sibling;var B=f(p,A,w[D],S);if(B===null){A===null&&(A=W);break}t&&A&&B.alternate===null&&e(p,A),y=s(B,y,D),b===null?C=B:b.sibling=B,b=B,A=W}if(D===w.length)return n(p,A),pe&&gr(p,D),C;if(A===null){for(;D<w.length;D++)A=h(p,w[D],S),A!==null&&(y=s(A,y,D),b===null?C=A:b.sibling=A,b=A);return pe&&gr(p,D),C}for(A=r(p,A);D<w.length;D++)W=d(A,p,D,w[D],S),W!==null&&(t&&W.alternate!==null&&A.delete(W.key===null?D:W.key),y=s(W,y,D),b===null?C=W:b.sibling=W,b=W);return t&&A.forEach(function($){return e(p,$)}),pe&&gr(p,D),C}function v(p,y,w,S){var C=zi(w);if(typeof C!="function")throw Error(M(150));if(w=C.call(w),w==null)throw Error(M(151));for(var b=C=null,A=y,D=y=0,W=null,B=w.next();A!==null&&!B.done;D++,B=w.next()){A.index>D?(W=A,A=null):W=A.sibling;var $=f(p,A,B.value,S);if($===null){A===null&&(A=W);break}t&&A&&$.alternate===null&&e(p,A),y=s($,y,D),b===null?C=$:b.sibling=$,b=$,A=W}if(B.done)return n(p,A),pe&&gr(p,D),C;if(A===null){for(;!B.done;D++,B=w.next())B=h(p,B.value,S),B!==null&&(y=s(B,y,D),b===null?C=B:b.sibling=B,b=B);return pe&&gr(p,D),C}for(A=r(p,A);!B.done;D++,B=w.next())B=d(A,p,D,B.value,S),B!==null&&(t&&B.alternate!==null&&A.delete(B.key===null?D:B.key),y=s(B,y,D),b===null?C=B:b.sibling=B,b=B);return t&&A.forEach(function(V){return e(p,V)}),pe&&gr(p,D),C}function k(p,y,w,S){if(typeof w=="object"&&w!==null&&w.type===Kr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case hl:e:{for(var C=w.key,b=y;b!==null;){if(b.key===C){if(C=w.type,C===Kr){if(b.tag===7){n(p,b.sibling),y=i(b,w.props.children),y.return=p,p=y;break e}}else if(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Rn&&Ad(C)===b.type){n(p,b.sibling),y=i(b,w.props),y.ref=$i(p,b,w),y.return=p,p=y;break e}n(p,b);break}else e(p,b);b=b.sibling}w.type===Kr?(y=br(w.props.children,p.mode,S,w.key),y.return=p,p=y):(S=io(w.type,w.key,w.props,null,p.mode,S),S.ref=$i(p,y,w),S.return=p,p=S)}return l(p);case $r:e:{for(b=w.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(p,y.sibling),y=i(y,w.children||[]),y.return=p,p=y;break e}else{n(p,y);break}else e(p,y);y=y.sibling}y=ru(w,p.mode,S),y.return=p,p=y}return l(p);case Rn:return b=w._init,k(p,y,b(w._payload),S)}if(es(w))return g(p,y,w,S);if(zi(w))return v(p,y,w,S);Sl(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(p,y.sibling),y=i(y,w),y.return=p,p=y):(n(p,y),y=nu(w,p.mode,S),y.return=p,p=y),l(p)):n(p,y)}return k}var wi=Bg(!0),jg=Bg(!1),Eo=hr(null),To=null,ei=null,Rh=null;function Ih(){Rh=ei=To=null}function Bh(t){var e=Eo.current;de(Eo),t._currentValue=e}function rc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ci(t,e){To=t,Rh=ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ht=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(Rh!==t)if(t={context:t,memoizedValue:e,next:null},ei===null){if(To===null)throw Error(M(308));ei=t,To.dependencies={lanes:0,firstContext:t}}else ei=ei.next=t;return e}var xr=null;function jh(t){xr===null?xr=[t]:xr.push(t)}function Fg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,jh(e)):(n.next=i.next,i.next=n),e.interleaved=n,Mn(t,r)}function Mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var In=!1;function Fh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _g(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Mn(t,n)}return i=r.interleaved,i===null?(e.next=e,jh(r)):(e.next=i.next,i.next=e),r.interleaved=e,Mn(t,n)}function Xl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ch(t,n)}}function bd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mo(t,e,n,r){var i=t.updateQueue;In=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==l&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;l=0,c=u=a=null,o=s;do{var f=o.lane,d=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,v=o;switch(f=e,d=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(d,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(d,h,f):g,f==null)break e;h=ve({},h,f);break e;case 2:In=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=d,a=h):c=c.next=d,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=h),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Dr|=l,t.lanes=l,t.memoizedState=h}}function Ed(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var el={},mn=hr(el),Ls=hr(el),Rs=hr(el);function kr(t){if(t===el)throw Error(M(174));return t}function _h(t,e){switch(ue(Rs,e),ue(Ls,t),ue(mn,el),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ju(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ju(e,t)}de(mn),ue(mn,e)}function xi(){de(mn),de(Ls),de(Rs)}function zg(t){kr(Rs.current);var e=kr(mn.current),n=ju(e,t.type);e!==n&&(ue(Ls,t),ue(mn,n))}function zh(t){Ls.current===t&&(de(mn),de(Ls))}var me=hr(0);function No(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qa=[];function Hh(){for(var t=0;t<Qa.length;t++)Qa[t]._workInProgressVersionPrimary=null;Qa.length=0}var Zl=On.ReactCurrentDispatcher,Ja=On.ReactCurrentBatchConfig,Nr=0,ye=null,De=null,Le=null,Do=!1,hs=!1,Is=0,bx=0;function Ge(){throw Error(M(321))}function Wh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qt(t[n],e[n]))return!1;return!0}function Vh(t,e,n,r,i,s){if(Nr=s,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zl.current=t===null||t.memoizedState===null?Nx:Dx,t=n(r,i),hs){s=0;do{if(hs=!1,Is=0,25<=s)throw Error(M(301));s+=1,Le=De=null,e.updateQueue=null,Zl.current=Ox,t=n(r,i)}while(hs)}if(Zl.current=Oo,e=De!==null&&De.next!==null,Nr=0,Le=De=ye=null,Do=!1,e)throw Error(M(300));return t}function Uh(){var t=Is!==0;return Is=0,t}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ye.memoizedState=Le=t:Le=Le.next=t,Le}function Ft(){if(De===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=Le===null?ye.memoizedState:Le.next;if(e!==null)Le=e,De=t;else{if(t===null)throw Error(M(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Le===null?ye.memoizedState=Le=t:Le=Le.next=t}return Le}function Bs(t,e){return typeof e=="function"?e(t):e}function Xa(t){var e=Ft(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=De,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var c=u.lane;if((Nr&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=h,l=r):a=a.next=h,ye.lanes|=c,Dr|=c}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,Qt(r,e.memoizedState)||(ht=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ye.lanes|=s,Dr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Za(t){var e=Ft(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);Qt(s,e.memoizedState)||(ht=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Hg(){}function Wg(t,e){var n=ye,r=Ft(),i=e(),s=!Qt(r.memoizedState,i);if(s&&(r.memoizedState=i,ht=!0),r=r.queue,$h($g.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,js(9,Ug.bind(null,n,r,i,e),void 0,null),Ie===null)throw Error(M(349));Nr&30||Vg(n,e,i)}return i}function Vg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ug(t,e,n,r){e.value=n,e.getSnapshot=r,Kg(e)&&Gg(t)}function $g(t,e,n){return n(function(){Kg(e)&&Gg(t)})}function Kg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qt(t,n)}catch{return!0}}function Gg(t){var e=Mn(t,1);e!==null&&Yt(e,t,1,-1)}function Td(t){var e=an();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:t},e.queue=t,t=t.dispatch=Mx.bind(null,ye,t),[e.memoizedState,t]}function js(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qg(){return Ft().memoizedState}function eo(t,e,n,r){var i=an();ye.flags|=t,i.memoizedState=js(1|e,n,void 0,r===void 0?null:r)}function aa(t,e,n,r){var i=Ft();r=r===void 0?null:r;var s=void 0;if(De!==null){var l=De.memoizedState;if(s=l.destroy,r!==null&&Wh(r,l.deps)){i.memoizedState=js(e,n,s,r);return}}ye.flags|=t,i.memoizedState=js(1|e,n,s,r)}function Md(t,e){return eo(8390656,8,t,e)}function $h(t,e){return aa(2048,8,t,e)}function Yg(t,e){return aa(4,2,t,e)}function Qg(t,e){return aa(4,4,t,e)}function Jg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xg(t,e,n){return n=n!=null?n.concat([t]):null,aa(4,4,Jg.bind(null,e,t),n)}function Kh(){}function Zg(t,e){var n=Ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function e0(t,e){var n=Ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function t0(t,e,n){return Nr&21?(Qt(n,e)||(n=lg(),ye.lanes|=n,Dr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ht=!0),t.memoizedState=n)}function Ex(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=Ja.transition;Ja.transition={};try{t(!1),e()}finally{le=n,Ja.transition=r}}function n0(){return Ft().memoizedState}function Tx(t,e,n){var r=Zn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r0(t))i0(e,n);else if(n=Fg(t,e,n,r),n!==null){var i=rt();Yt(n,t,r,i),s0(n,e,r)}}function Mx(t,e,n){var r=Zn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r0(t))i0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,Qt(o,l)){var a=e.interleaved;a===null?(i.next=i,jh(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Fg(t,e,i,r),n!==null&&(i=rt(),Yt(n,t,r,i),s0(n,e,r))}}function r0(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function i0(t,e){hs=Do=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function s0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ch(t,n)}}var Oo={readContext:jt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},Nx={readContext:jt,useCallback:function(t,e){return an().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Md,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,eo(4194308,4,Jg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return eo(4194308,4,t,e)},useInsertionEffect:function(t,e){return eo(4,2,t,e)},useMemo:function(t,e){var n=an();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=an();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Tx.bind(null,ye,t),[r.memoizedState,t]},useRef:function(t){var e=an();return t={current:t},e.memoizedState=t},useState:Td,useDebugValue:Kh,useDeferredValue:function(t){return an().memoizedState=t},useTransition:function(){var t=Td(!1),e=t[0];return t=Ex.bind(null,t[1]),an().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ye,i=an();if(pe){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Ie===null)throw Error(M(349));Nr&30||Vg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Md($g.bind(null,r,s,t),[t]),r.flags|=2048,js(9,Ug.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=an(),e=Ie.identifierPrefix;if(pe){var n=Sn,r=kn;n=(r&~(1<<32-qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Is++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Dx={readContext:jt,useCallback:Zg,useContext:jt,useEffect:$h,useImperativeHandle:Xg,useInsertionEffect:Yg,useLayoutEffect:Qg,useMemo:e0,useReducer:Xa,useRef:qg,useState:function(){return Xa(Bs)},useDebugValue:Kh,useDeferredValue:function(t){var e=Ft();return t0(e,De.memoizedState,t)},useTransition:function(){var t=Xa(Bs)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:Hg,useSyncExternalStore:Wg,useId:n0,unstable_isNewReconciler:!1},Ox={readContext:jt,useCallback:Zg,useContext:jt,useEffect:$h,useImperativeHandle:Xg,useInsertionEffect:Yg,useLayoutEffect:Qg,useMemo:e0,useReducer:Za,useRef:qg,useState:function(){return Za(Bs)},useDebugValue:Kh,useDeferredValue:function(t){var e=Ft();return De===null?e.memoizedState=t:t0(e,De.memoizedState,t)},useTransition:function(){var t=Za(Bs)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:Hg,useSyncExternalStore:Wg,useId:n0,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ic(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ua={isMounted:function(t){return(t=t._reactInternals)?_r(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rt(),i=Zn(t),s=Cn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Jn(t,s,i),e!==null&&(Yt(e,t,i,r),Xl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rt(),i=Zn(t),s=Cn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Jn(t,s,i),e!==null&&(Yt(e,t,i,r),Xl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rt(),r=Zn(t),i=Cn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Jn(t,i,r),e!==null&&(Yt(e,t,r,n),Xl(e,t,r))}};function Nd(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!Ns(n,r)||!Ns(i,s):!0}function l0(t,e,n){var r=!1,i=rr,s=e.contextType;return typeof s=="object"&&s!==null?s=jt(s):(i=dt(e)?Tr:Ze.current,r=e.contextTypes,s=(r=r!=null)?yi(t,i):rr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ua,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Dd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ua.enqueueReplaceState(e,e.state,null)}function sc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Fh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=jt(s):(s=dt(e)?Tr:Ze.current,i.context=yi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ic(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ua.enqueueReplaceState(i,i.state,null),Mo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ki(t,e){try{var n="",r=e;do n+=sw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function eu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Px=typeof WeakMap=="function"?WeakMap:Map;function o0(t,e,n){n=Cn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Lo||(Lo=!0,gc=r),lc(t,e)},n}function a0(t,e,n){n=Cn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){lc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){lc(t,e),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Od(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Px;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Kx.bind(null,t,e,n),e.then(t,t))}function Pd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ld(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cn(-1,1),e.tag=2,Jn(n,e,1))),n.lanes|=1),t)}var Lx=On.ReactCurrentOwner,ht=!1;function nt(t,e,n,r){e.child=t===null?jg(e,null,n,r):wi(e,t.child,n,r)}function Rd(t,e,n,r,i){n=n.render;var s=e.ref;return ci(e,i),r=Vh(t,e,n,r,s,i),n=Uh(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(pe&&n&&Oh(e),e.flags|=1,nt(t,e,r,i),e.child)}function Id(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ef(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,u0(t,e,s,r,i)):(t=io(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ns,n(l,r)&&t.ref===e.ref)return Nn(t,e,i)}return e.flags|=1,t=er(s,r),t.ref=e.ref,t.return=e,e.child=t}function u0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ns(s,r)&&t.ref===e.ref)if(ht=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ht=!0);else return e.lanes=t.lanes,Nn(t,e,i)}return oc(t,e,n,r,i)}function c0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(ni,wt),wt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(ni,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(ni,wt),wt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ue(ni,wt),wt|=r;return nt(t,e,i,n),e.child}function h0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oc(t,e,n,r,i){var s=dt(n)?Tr:Ze.current;return s=yi(e,s),ci(e,i),n=Vh(t,e,n,r,s,i),r=Uh(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(pe&&r&&Oh(e),e.flags|=1,nt(t,e,n,i),e.child)}function Bd(t,e,n,r,i){if(dt(n)){var s=!0;Co(e)}else s=!1;if(ci(e,i),e.stateNode===null)to(t,e),l0(e,n,r),sc(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=jt(u):(u=dt(n)?Tr:Ze.current,u=yi(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&Dd(e,l,r,u),In=!1;var f=e.memoizedState;l.state=f,Mo(e,r,l,i),a=e.memoizedState,o!==r||f!==a||ft.current||In?(typeof c=="function"&&(ic(e,n,c,r),a=e.memoizedState),(o=In||Nd(e,n,o,r,f,a,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,_g(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Ut(e.type,o),l.props=u,h=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=jt(a):(a=dt(n)?Tr:Ze.current,a=yi(e,a));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==a)&&Dd(e,l,r,a),In=!1,f=e.memoizedState,l.state=f,Mo(e,r,l,i);var g=e.memoizedState;o!==h||f!==g||ft.current||In?(typeof d=="function"&&(ic(e,n,d,r),g=e.memoizedState),(u=In||Nd(e,n,u,r,f,g,a)||!1)?(c||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,g,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,g,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),l.props=r,l.state=g,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ac(t,e,n,r,s,i)}function ac(t,e,n,r,i,s){h0(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&kd(e,n,!1),Nn(t,e,s);r=e.stateNode,Lx.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=wi(e,t.child,null,s),e.child=wi(e,null,o,s)):nt(t,e,o,s),e.memoizedState=r.state,i&&kd(e,n,!0),e.child}function f0(t){var e=t.stateNode;e.pendingContext?xd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xd(t,e.context,!1),_h(t,e.containerInfo)}function jd(t,e,n,r,i){return vi(),Lh(i),e.flags|=256,nt(t,e,n,r),e.child}var uc={dehydrated:null,treeContext:null,retryLane:0};function cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function d0(t,e,n){var r=e.pendingProps,i=me.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(me,i&1),t===null)return nc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=fa(l,r,0,null),t=br(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=cc(n),e.memoizedState=uc,t):Gh(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Rx(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=er(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=er(o,s):(s=br(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?cc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=uc,r}return s=t.child,t=s.sibling,r=er(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Gh(t,e){return e=fa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cl(t,e,n,r){return r!==null&&Lh(r),wi(e,t.child,null,n),t=Gh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rx(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=eu(Error(M(422))),Cl(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=fa({mode:"visible",children:r.children},i,0,null),s=br(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wi(e,t.child,null,l),e.child.memoizedState=cc(l),e.memoizedState=uc,s);if(!(e.mode&1))return Cl(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(M(419)),r=eu(s,r,void 0),Cl(t,e,l,r)}if(o=(l&t.childLanes)!==0,ht||o){if(r=Ie,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Mn(t,i),Yt(r,t,i,-1))}return Zh(),r=eu(Error(M(421))),Cl(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Gx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,St=Qn(i.nextSibling),Ct=e,pe=!0,Kt=null,t!==null&&(Nt[Dt++]=kn,Nt[Dt++]=Sn,Nt[Dt++]=Mr,kn=t.id,Sn=t.overflow,Mr=e),e=Gh(e,r.children),e.flags|=4096,e)}function Fd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rc(t.return,e,n)}function tu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function p0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(nt(t,e,r.children,n),r=me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fd(t,n,e);else if(t.tag===19)Fd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&No(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),tu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&No(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}tu(e,!0,n,null,s);break;case"together":tu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function to(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ix(t,e,n){switch(e.tag){case 3:f0(e),vi();break;case 5:zg(e);break;case 1:dt(e.type)&&Co(e);break;case 4:_h(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ue(Eo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(me,me.current&1),e.flags|=128,null):n&e.child.childLanes?d0(t,e,n):(ue(me,me.current&1),t=Nn(t,e,n),t!==null?t.sibling:null);ue(me,me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return p0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(me,me.current),r)break;return null;case 22:case 23:return e.lanes=0,c0(t,e,n)}return Nn(t,e,n)}var m0,hc,g0,y0;m0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hc=function(){};g0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,kr(mn.current);var s=null;switch(n){case"input":i=Lu(t,i),r=Lu(t,r),s=[];break;case"select":i=ve({},i,{value:void 0}),r=ve({},r,{value:void 0}),s=[];break;case"textarea":i=Bu(t,i),r=Bu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ko)}Fu(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ss.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ss.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&he("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};y0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ki(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Bx(t,e,n){var r=e.pendingProps;switch(Ph(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return dt(e.type)&&So(),qe(e),null;case 3:return r=e.stateNode,xi(),de(ft),de(Ze),Hh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(kl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(wc(Kt),Kt=null))),hc(t,e),qe(e),null;case 5:zh(e);var i=kr(Rs.current);if(n=e.type,t!==null&&e.stateNode!=null)g0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return qe(e),null}if(t=kr(mn.current),kl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[un]=e,r[Ps]=s,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(i=0;i<ns.length;i++)he(ns[i],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Gf(r,s),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},he("invalid",r);break;case"textarea":Yf(r,s),he("invalid",r)}Fu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&xl(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&xl(r.textContent,o,t),i=["children",""+o]):Ss.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&he("scroll",r)}switch(n){case"input":fl(r),qf(r,s,!0);break;case"textarea":fl(r),Qf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ko)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$m(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[un]=e,t[Ps]=r,m0(t,e,!1,!1),e.stateNode=t;e:{switch(l=_u(n,r),n){case"dialog":he("cancel",t),he("close",t),i=r;break;case"iframe":case"object":case"embed":he("load",t),i=r;break;case"video":case"audio":for(i=0;i<ns.length;i++)he(ns[i],t);i=r;break;case"source":he("error",t),i=r;break;case"img":case"image":case"link":he("error",t),he("load",t),i=r;break;case"details":he("toggle",t),i=r;break;case"input":Gf(t,r),i=Lu(t,r),he("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ve({},r,{value:void 0}),he("invalid",t);break;case"textarea":Yf(t,r),i=Bu(t,r),he("invalid",t);break;default:i=r}Fu(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?qm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Km(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Cs(t,a):typeof a=="number"&&Cs(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ss.hasOwnProperty(s)?a!=null&&s==="onScroll"&&he("scroll",t):a!=null&&yh(t,s,a,l))}switch(n){case"input":fl(t),qf(t,r,!1);break;case"textarea":fl(t),Qf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+nr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?li(t,!!r.multiple,s,!1):r.defaultValue!=null&&li(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ko)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qe(e),null;case 6:if(t&&e.stateNode!=null)y0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=kr(Rs.current),kr(mn.current),kl(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(s=r.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:xl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return qe(e),null;case 13:if(de(me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&St!==null&&e.mode&1&&!(e.flags&128))Ig(),vi(),e.flags|=98560,s=!1;else if(s=kl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[un]=e}else vi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),s=!1}else Kt!==null&&(wc(Kt),Kt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?Oe===0&&(Oe=3):Zh())),e.updateQueue!==null&&(e.flags|=4),qe(e),null);case 4:return xi(),hc(t,e),t===null&&Ds(e.stateNode.containerInfo),qe(e),null;case 10:return Bh(e.type._context),qe(e),null;case 17:return dt(e.type)&&So(),qe(e),null;case 19:if(de(me),s=e.memoizedState,s===null)return qe(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Ki(s,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=No(t),l!==null){for(e.flags|=128,Ki(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(me,me.current&1|2),e.child}t=t.sibling}s.tail!==null&&Se()>Si&&(e.flags|=128,r=!0,Ki(s,!1),e.lanes=4194304)}else{if(!r)if(t=No(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ki(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!pe)return qe(e),null}else 2*Se()-s.renderingStartTime>Si&&n!==1073741824&&(e.flags|=128,r=!0,Ki(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Se(),e.sibling=null,n=me.current,ue(me,r?n&1|2:n&1),e):(qe(e),null);case 22:case 23:return Xh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function jx(t,e){switch(Ph(e),e.tag){case 1:return dt(e.type)&&So(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xi(),de(ft),de(Ze),Hh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zh(e),null;case 13:if(de(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));vi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(me),null;case 4:return xi(),null;case 10:return Bh(e.type._context),null;case 22:case 23:return Xh(),null;case 24:return null;default:return null}}var Al=!1,Qe=!1,Fx=typeof WeakSet=="function"?WeakSet:Set,I=null;function ti(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(t,e,r)}else n.current=null}function fc(t,e,n){try{n()}catch(r){we(t,e,r)}}var _d=!1;function _x(t,e){if(Yu=vo,t=Sg(),Dh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(o=l+i),h!==s||r!==0&&h.nodeType!==3||(a=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++c===r&&(a=l),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qu={focusedElem:t,selectionRange:n},vo=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,k=g.memoizedState,p=e.stateNode,y=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ut(e.type,v),k);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(S){we(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return g=_d,_d=!1,g}function fs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&fc(e,n,s)}i=i.next}while(i!==r)}}function ca(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function v0(t){var e=t.alternate;e!==null&&(t.alternate=null,v0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[Ps],delete e[Zu],delete e[kx],delete e[Sx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function w0(t){return t.tag===5||t.tag===3||t.tag===4}function zd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||w0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ko));else if(r!==4&&(t=t.child,t!==null))for(pc(t,e,n),t=t.sibling;t!==null;)pc(t,e,n),t=t.sibling}function mc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mc(t,e,n),t=t.sibling;t!==null;)mc(t,e,n),t=t.sibling}var Be=null,$t=!1;function Ln(t,e,n){for(n=n.child;n!==null;)x0(t,e,n),n=n.sibling}function x0(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(na,n)}catch{}switch(n.tag){case 5:Qe||ti(n,e);case 6:var r=Be,i=$t;Be=null,Ln(t,e,n),Be=r,$t=i,Be!==null&&($t?(t=Be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Be.removeChild(n.stateNode));break;case 18:Be!==null&&($t?(t=Be,n=n.stateNode,t.nodeType===8?qa(t.parentNode,n):t.nodeType===1&&qa(t,n),Ts(t)):qa(Be,n.stateNode));break;case 4:r=Be,i=$t,Be=n.stateNode.containerInfo,$t=!0,Ln(t,e,n),Be=r,$t=i;break;case 0:case 11:case 14:case 15:if(!Qe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&fc(n,e,l),i=i.next}while(i!==r)}Ln(t,e,n);break;case 1:if(!Qe&&(ti(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){we(n,e,o)}Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:n.mode&1?(Qe=(r=Qe)||n.memoizedState!==null,Ln(t,e,n),Qe=r):Ln(t,e,n);break;default:Ln(t,e,n)}}function Hd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Fx),e.forEach(function(r){var i=qx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Be=o.stateNode,$t=!1;break e;case 3:Be=o.stateNode.containerInfo,$t=!0;break e;case 4:Be=o.stateNode.containerInfo,$t=!0;break e}o=o.return}if(Be===null)throw Error(M(160));x0(s,l,i),Be=null,$t=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){we(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)k0(e,t),e=e.sibling}function k0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wt(e,t),nn(t),r&4){try{fs(3,t,t.return),ca(3,t)}catch(v){we(t,t.return,v)}try{fs(5,t,t.return)}catch(v){we(t,t.return,v)}}break;case 1:Wt(e,t),nn(t),r&512&&n!==null&&ti(n,n.return);break;case 5:if(Wt(e,t),nn(t),r&512&&n!==null&&ti(n,n.return),t.flags&32){var i=t.stateNode;try{Cs(i,"")}catch(v){we(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Vm(i,s),_u(o,l);var u=_u(o,s);for(l=0;l<a.length;l+=2){var c=a[l],h=a[l+1];c==="style"?qm(i,h):c==="dangerouslySetInnerHTML"?Km(i,h):c==="children"?Cs(i,h):yh(i,c,h,u)}switch(o){case"input":Ru(i,s);break;case"textarea":Um(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?li(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?li(i,!!s.multiple,s.defaultValue,!0):li(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ps]=s}catch(v){we(t,t.return,v)}}break;case 6:if(Wt(e,t),nn(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){we(t,t.return,v)}}break;case 3:if(Wt(e,t),nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ts(e.containerInfo)}catch(v){we(t,t.return,v)}break;case 4:Wt(e,t),nn(t);break;case 13:Wt(e,t),nn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Qh=Se())),r&4&&Hd(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Qe=(u=Qe)||c,Wt(e,t),Qe=u):Wt(e,t),nn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(I=t,c=t.child;c!==null;){for(h=I=c;I!==null;){switch(f=I,d=f.child,f.tag){case 0:case 11:case 14:case 15:fs(4,f,f.return);break;case 1:ti(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){we(r,n,v)}}break;case 5:ti(f,f.return);break;case 22:if(f.memoizedState!==null){Vd(h);continue}}d!==null?(d.return=f,I=d):Vd(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=Gm("display",l))}catch(v){we(t,t.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){we(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wt(e,t),nn(t),r&4&&Hd(t);break;case 21:break;default:Wt(e,t),nn(t)}}function nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(w0(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cs(i,""),r.flags&=-33);var s=zd(t);mc(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=zd(t);pc(t,o,l);break;default:throw Error(M(161))}}catch(a){we(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zx(t,e,n){I=t,S0(t)}function S0(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Al;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Qe;o=Al;var u=Qe;if(Al=l,(Qe=a)&&!u)for(I=i;I!==null;)l=I,a=l.child,l.tag===22&&l.memoizedState!==null?Ud(i):a!==null?(a.return=l,I=a):Ud(i);for(;s!==null;)I=s,S0(s),s=s.sibling;I=i,Al=o,Qe=u}Wd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):Wd(t)}}function Wd(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qe||ca(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ut(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ed(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ed(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Ts(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Qe||e.flags&512&&dc(e)}catch(f){we(e,e.return,f)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function Vd(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function Ud(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ca(4,e)}catch(a){we(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){we(e,i,a)}}var s=e.return;try{dc(e)}catch(a){we(e,s,a)}break;case 5:var l=e.return;try{dc(e)}catch(a){we(e,l,a)}}}catch(a){we(e,e.return,a)}if(e===t){I=null;break}var o=e.sibling;if(o!==null){o.return=e.return,I=o;break}I=e.return}}var Hx=Math.ceil,Po=On.ReactCurrentDispatcher,qh=On.ReactCurrentOwner,Lt=On.ReactCurrentBatchConfig,te=0,Ie=null,Te=null,Ve=0,wt=0,ni=hr(0),Oe=0,Fs=null,Dr=0,ha=0,Yh=0,ds=null,ut=null,Qh=0,Si=1/0,vn=null,Lo=!1,gc=null,Xn=null,bl=!1,Vn=null,Ro=0,ps=0,yc=null,no=-1,ro=0;function rt(){return te&6?Se():no!==-1?no:no=Se()}function Zn(t){return t.mode&1?te&2&&Ve!==0?Ve&-Ve:Ax.transition!==null?(ro===0&&(ro=lg()),ro):(t=le,t!==0||(t=window.event,t=t===void 0?16:dg(t.type)),t):1}function Yt(t,e,n,r){if(50<ps)throw ps=0,yc=null,Error(M(185));Js(t,n,r),(!(te&2)||t!==Ie)&&(t===Ie&&(!(te&2)&&(ha|=n),Oe===4&&zn(t,Ve)),pt(t,r),n===1&&te===0&&!(e.mode&1)&&(Si=Se()+500,oa&&fr()))}function pt(t,e){var n=t.callbackNode;Aw(t,e);var r=yo(t,t===Ie?Ve:0);if(r===0)n!==null&&Zf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zf(n),e===1)t.tag===0?Cx($d.bind(null,t)):Pg($d.bind(null,t)),wx(function(){!(te&6)&&fr()}),n=null;else{switch(og(r)){case 1:n=Sh;break;case 4:n=ig;break;case 16:n=go;break;case 536870912:n=sg;break;default:n=go}n=D0(n,C0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C0(t,e){if(no=-1,ro=0,te&6)throw Error(M(327));var n=t.callbackNode;if(hi()&&t.callbackNode!==n)return null;var r=yo(t,t===Ie?Ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Io(t,r);else{e=r;var i=te;te|=2;var s=b0();(Ie!==t||Ve!==e)&&(vn=null,Si=Se()+500,Ar(t,e));do try{Ux();break}catch(o){A0(t,o)}while(!0);Ih(),Po.current=s,te=i,Te!==null?e=0:(Ie=null,Ve=0,e=Oe)}if(e!==0){if(e===2&&(i=Uu(t),i!==0&&(r=i,e=vc(t,i))),e===1)throw n=Fs,Ar(t,0),zn(t,r),pt(t,Se()),n;if(e===6)zn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Wx(i)&&(e=Io(t,r),e===2&&(s=Uu(t),s!==0&&(r=s,e=vc(t,s))),e===1))throw n=Fs,Ar(t,0),zn(t,r),pt(t,Se()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:yr(t,ut,vn);break;case 3:if(zn(t,r),(r&130023424)===r&&(e=Qh+500-Se(),10<e)){if(yo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Xu(yr.bind(null,t,ut,vn),e);break}yr(t,ut,vn);break;case 4:if(zn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-qt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=Se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hx(r/1960))-r,10<r){t.timeoutHandle=Xu(yr.bind(null,t,ut,vn),r);break}yr(t,ut,vn);break;case 5:yr(t,ut,vn);break;default:throw Error(M(329))}}}return pt(t,Se()),t.callbackNode===n?C0.bind(null,t):null}function vc(t,e){var n=ds;return t.current.memoizedState.isDehydrated&&(Ar(t,e).flags|=256),t=Io(t,e),t!==2&&(e=ut,ut=n,e!==null&&wc(e)),t}function wc(t){ut===null?ut=t:ut.push.apply(ut,t)}function Wx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zn(t,e){for(e&=~Yh,e&=~ha,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qt(e),r=1<<n;t[n]=-1,e&=~r}}function $d(t){if(te&6)throw Error(M(327));hi();var e=yo(t,0);if(!(e&1))return pt(t,Se()),null;var n=Io(t,e);if(t.tag!==0&&n===2){var r=Uu(t);r!==0&&(e=r,n=vc(t,r))}if(n===1)throw n=Fs,Ar(t,0),zn(t,e),pt(t,Se()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yr(t,ut,vn),pt(t,Se()),null}function Jh(t,e){var n=te;te|=1;try{return t(e)}finally{te=n,te===0&&(Si=Se()+500,oa&&fr())}}function Or(t){Vn!==null&&Vn.tag===0&&!(te&6)&&hi();var e=te;te|=1;var n=Lt.transition,r=le;try{if(Lt.transition=null,le=1,t)return t()}finally{le=r,Lt.transition=n,te=e,!(te&6)&&fr()}}function Xh(){wt=ni.current,de(ni)}function Ar(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vx(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(Ph(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&So();break;case 3:xi(),de(ft),de(Ze),Hh();break;case 5:zh(r);break;case 4:xi();break;case 13:de(me);break;case 19:de(me);break;case 10:Bh(r.type._context);break;case 22:case 23:Xh()}n=n.return}if(Ie=t,Te=t=er(t.current,null),Ve=wt=e,Oe=0,Fs=null,Yh=ha=Dr=0,ut=ds=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}xr=null}return t}function A0(t,e){do{var n=Te;try{if(Ih(),Zl.current=Oo,Do){for(var r=ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Do=!1}if(Nr=0,Le=De=ye=null,hs=!1,Is=0,qh.current=null,n===null||n.return===null){Oe=1,Fs=e,Te=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=Ve,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=Pd(l);if(d!==null){d.flags&=-257,Ld(d,l,o,s,e),d.mode&1&&Od(s,u,e),e=d,a=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(a),e.updateQueue=v}else g.add(a);break e}else{if(!(e&1)){Od(s,u,e),Zh();break e}a=Error(M(426))}}else if(pe&&o.mode&1){var k=Pd(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Ld(k,l,o,s,e),Lh(ki(a,o));break e}}s=a=ki(a,o),Oe!==4&&(Oe=2),ds===null?ds=[s]:ds.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=o0(s,a,e);bd(s,p);break e;case 1:o=a;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xn===null||!Xn.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=a0(s,o,e);bd(s,S);break e}}s=s.return}while(s!==null)}T0(n)}catch(C){e=C,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function b0(){var t=Po.current;return Po.current=Oo,t===null?Oo:t}function Zh(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Ie===null||!(Dr&268435455)&&!(ha&268435455)||zn(Ie,Ve)}function Io(t,e){var n=te;te|=2;var r=b0();(Ie!==t||Ve!==e)&&(vn=null,Ar(t,e));do try{Vx();break}catch(i){A0(t,i)}while(!0);if(Ih(),te=n,Po.current=r,Te!==null)throw Error(M(261));return Ie=null,Ve=0,Oe}function Vx(){for(;Te!==null;)E0(Te)}function Ux(){for(;Te!==null&&!mw();)E0(Te)}function E0(t){var e=N0(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?T0(t):Te=e,qh.current=null}function T0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jx(n,e),n!==null){n.flags&=32767,Te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,Te=null;return}}else if(n=Bx(n,e,wt),n!==null){Te=n;return}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);Oe===0&&(Oe=5)}function yr(t,e,n){var r=le,i=Lt.transition;try{Lt.transition=null,le=1,$x(t,e,n,r)}finally{Lt.transition=i,le=r}return null}function $x(t,e,n,r){do hi();while(Vn!==null);if(te&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bw(t,s),t===Ie&&(Te=Ie=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bl||(bl=!0,D0(go,function(){return hi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Lt.transition,Lt.transition=null;var l=le;le=1;var o=te;te|=4,qh.current=null,_x(t,n),k0(n,t),hx(Qu),vo=!!Yu,Qu=Yu=null,t.current=n,zx(n),gw(),te=o,le=l,Lt.transition=s}else t.current=n;if(bl&&(bl=!1,Vn=t,Ro=i),s=t.pendingLanes,s===0&&(Xn=null),ww(n.stateNode),pt(t,Se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Lo)throw Lo=!1,t=gc,gc=null,t;return Ro&1&&t.tag!==0&&hi(),s=t.pendingLanes,s&1?t===yc?ps++:(ps=0,yc=t):ps=0,fr(),null}function hi(){if(Vn!==null){var t=og(Ro),e=Lt.transition,n=le;try{if(Lt.transition=null,le=16>t?16:t,Vn===null)var r=!1;else{if(t=Vn,Vn=null,Ro=0,te&6)throw Error(M(331));var i=te;for(te|=4,I=t.current;I!==null;){var s=I,l=s.child;if(I.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(I=u;I!==null;){var c=I;switch(c.tag){case 0:case 11:case 15:fs(8,c,s)}var h=c.child;if(h!==null)h.return=c,I=h;else for(;I!==null;){c=I;var f=c.sibling,d=c.return;if(v0(c),c===u){I=null;break}if(f!==null){f.return=d,I=f;break}I=d}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}I=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,I=l;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fs(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,I=p;break e}I=s.return}}var y=t.current;for(I=y;I!==null;){l=I;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,I=w;else e:for(l=y;I!==null;){if(o=I,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ca(9,o)}}catch(C){we(o,o.return,C)}if(o===l){I=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,I=S;break e}I=o.return}}if(te=i,fr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(na,t)}catch{}r=!0}return r}finally{le=n,Lt.transition=e}}return!1}function Kd(t,e,n){e=ki(n,e),e=o0(t,e,1),t=Jn(t,e,1),e=rt(),t!==null&&(Js(t,1,e),pt(t,e))}function we(t,e,n){if(t.tag===3)Kd(t,t,n);else for(;e!==null;){if(e.tag===3){Kd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){t=ki(n,t),t=a0(e,t,1),e=Jn(e,t,1),t=rt(),e!==null&&(Js(e,1,t),pt(e,t));break}}e=e.return}}function Kx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&n,Ie===t&&(Ve&n)===n&&(Oe===4||Oe===3&&(Ve&130023424)===Ve&&500>Se()-Qh?Ar(t,0):Yh|=n),pt(t,e)}function M0(t,e){e===0&&(t.mode&1?(e=ml,ml<<=1,!(ml&130023424)&&(ml=4194304)):e=1);var n=rt();t=Mn(t,e),t!==null&&(Js(t,e,n),pt(t,n))}function Gx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),M0(t,n)}function qx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),M0(t,n)}var N0;N0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ft.current)ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ht=!1,Ix(t,e,n);ht=!!(t.flags&131072)}else ht=!1,pe&&e.flags&1048576&&Lg(e,bo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;to(t,e),t=e.pendingProps;var i=yi(e,Ze.current);ci(e,n),i=Vh(null,e,r,t,i,n);var s=Uh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dt(r)?(s=!0,Co(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Fh(e),i.updater=ua,e.stateNode=i,i._reactInternals=e,sc(e,r,t,n),e=ac(null,e,r,!0,s,n)):(e.tag=0,pe&&s&&Oh(e),nt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(to(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Qx(r),t=Ut(r,t),i){case 0:e=oc(null,e,r,t,n);break e;case 1:e=Bd(null,e,r,t,n);break e;case 11:e=Rd(null,e,r,t,n);break e;case 14:e=Id(null,e,r,Ut(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ut(r,i),oc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ut(r,i),Bd(t,e,r,i,n);case 3:e:{if(f0(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_g(t,e),Mo(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ki(Error(M(423)),e),e=jd(t,e,r,n,i);break e}else if(r!==i){i=ki(Error(M(424)),e),e=jd(t,e,r,n,i);break e}else for(St=Qn(e.stateNode.containerInfo.firstChild),Ct=e,pe=!0,Kt=null,n=jg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vi(),r===i){e=Nn(t,e,n);break e}nt(t,e,r,n)}e=e.child}return e;case 5:return zg(e),t===null&&nc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Ju(r,i)?l=null:s!==null&&Ju(r,s)&&(e.flags|=32),h0(t,e),nt(t,e,l,n),e.child;case 6:return t===null&&nc(e),null;case 13:return d0(t,e,n);case 4:return _h(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wi(e,null,r,n):nt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ut(r,i),Rd(t,e,r,i,n);case 7:return nt(t,e,e.pendingProps,n),e.child;case 8:return nt(t,e,e.pendingProps.children,n),e.child;case 12:return nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,ue(Eo,r._currentValue),r._currentValue=l,s!==null)if(Qt(s.value,l)){if(s.children===i.children&&!ft.current){e=Nn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Cn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),rc(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),rc(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}nt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ci(e,n),i=jt(i),r=r(i),e.flags|=1,nt(t,e,r,n),e.child;case 14:return r=e.type,i=Ut(r,e.pendingProps),i=Ut(r.type,i),Id(t,e,r,i,n);case 15:return u0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ut(r,i),to(t,e),e.tag=1,dt(r)?(t=!0,Co(e)):t=!1,ci(e,n),l0(e,r,i),sc(e,r,i,n),ac(null,e,r,!0,t,n);case 19:return p0(t,e,n);case 22:return c0(t,e,n)}throw Error(M(156,e.tag))};function D0(t,e){return rg(t,e)}function Yx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new Yx(t,e,n,r)}function ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qx(t){if(typeof t=="function")return ef(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wh)return 11;if(t===xh)return 14}return 2}function er(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function io(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")ef(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Kr:return br(n.children,i,s,e);case vh:l=8,i|=8;break;case Nu:return t=Pt(12,n,e,i|2),t.elementType=Nu,t.lanes=s,t;case Du:return t=Pt(13,n,e,i),t.elementType=Du,t.lanes=s,t;case Ou:return t=Pt(19,n,e,i),t.elementType=Ou,t.lanes=s,t;case zm:return fa(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fm:l=10;break e;case _m:l=9;break e;case wh:l=11;break e;case xh:l=14;break e;case Rn:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Pt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function br(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function fa(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=zm,t.lanes=n,t.stateNode={isHidden:!1},t}function nu(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function ru(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ja(0),this.expirationTimes=ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function tf(t,e,n,r,i,s,l,o,a){return t=new Jx(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fh(s),t}function Xx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function O0(t){if(!t)return rr;t=t._reactInternals;e:{if(_r(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(dt(n))return Og(t,n,e)}return e}function P0(t,e,n,r,i,s,l,o,a){return t=tf(n,r,!0,t,i,s,l,o,a),t.context=O0(null),n=t.current,r=rt(),i=Zn(n),s=Cn(r,i),s.callback=e??null,Jn(n,s,i),t.current.lanes=i,Js(t,i,r),pt(t,r),t}function da(t,e,n,r){var i=e.current,s=rt(),l=Zn(i);return n=O0(n),e.context===null?e.context=n:e.pendingContext=n,e=Cn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jn(i,e,l),t!==null&&(Yt(t,i,l,s),Xl(t,i,l)),l}function Bo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function nf(t,e){Gd(t,e),(t=t.alternate)&&Gd(t,e)}function Zx(){return null}var L0=typeof reportError=="function"?reportError:function(t){console.error(t)};function rf(t){this._internalRoot=t}pa.prototype.render=rf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));da(t,e,null,null)};pa.prototype.unmount=rf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Or(function(){da(null,t,null,null)}),e[Tn]=null}};function pa(t){this._internalRoot=t}pa.prototype.unstable_scheduleHydration=function(t){if(t){var e=cg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_n.length&&e!==0&&e<_n[n].priority;n++);_n.splice(n,0,t),n===0&&fg(t)}};function sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ma(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qd(){}function ek(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Bo(l);s.call(u)}}var l=P0(e,r,t,0,null,!1,!1,"",qd);return t._reactRootContainer=l,t[Tn]=l.current,Ds(t.nodeType===8?t.parentNode:t),Or(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Bo(a);o.call(u)}}var a=tf(t,0,!1,null,null,!1,!1,"",qd);return t._reactRootContainer=a,t[Tn]=a.current,Ds(t.nodeType===8?t.parentNode:t),Or(function(){da(e,a,n,r)}),a}function ga(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=Bo(l);o.call(a)}}da(e,l,t,i)}else l=ek(n,e,t,i,r);return Bo(l)}ag=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ts(e.pendingLanes);n!==0&&(Ch(e,n|1),pt(e,Se()),!(te&6)&&(Si=Se()+500,fr()))}break;case 13:Or(function(){var r=Mn(t,1);if(r!==null){var i=rt();Yt(r,t,1,i)}}),nf(t,1)}};Ah=function(t){if(t.tag===13){var e=Mn(t,134217728);if(e!==null){var n=rt();Yt(e,t,134217728,n)}nf(t,134217728)}};ug=function(t){if(t.tag===13){var e=Zn(t),n=Mn(t,e);if(n!==null){var r=rt();Yt(n,t,e,r)}nf(t,e)}};cg=function(){return le};hg=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};Hu=function(t,e,n){switch(e){case"input":if(Ru(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=la(r);if(!i)throw Error(M(90));Wm(r),Ru(r,i)}}}break;case"textarea":Um(t,n);break;case"select":e=n.value,e!=null&&li(t,!!n.multiple,e,!1)}};Jm=Jh;Xm=Or;var tk={usingClientEntryPoint:!1,Events:[Zs,Qr,la,Ym,Qm,Jh]},Gi={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nk={bundleType:Gi.bundleType,version:Gi.version,rendererPackageName:Gi.rendererPackageName,rendererConfig:Gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tg(t),t===null?null:t.stateNode},findFiberByHostInstance:Gi.findFiberByHostInstance||Zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{na=El.inject(nk),pn=El}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tk;Tt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sf(e))throw Error(M(200));return Xx(t,e,null,n)};Tt.createRoot=function(t,e){if(!sf(t))throw Error(M(299));var n=!1,r="",i=L0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=tf(t,1,!1,null,null,n,!1,r,i),t[Tn]=e.current,Ds(t.nodeType===8?t.parentNode:t),new rf(e)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=tg(e),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return Or(t)};Tt.hydrate=function(t,e,n){if(!ma(e))throw Error(M(200));return ga(null,t,e,!0,n)};Tt.hydrateRoot=function(t,e,n){if(!sf(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=L0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=P0(e,null,t,1,n??null,i,!1,s,l),t[Tn]=e.current,Ds(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pa(e)};Tt.render=function(t,e,n){if(!ma(e))throw Error(M(200));return ga(null,t,e,!1,n)};Tt.unmountComponentAtNode=function(t){if(!ma(t))throw Error(M(40));return t._reactRootContainer?(Or(function(){ga(null,null,t,!1,function(){t._reactRootContainer=null,t[Tn]=null})}),!0):!1};Tt.unstable_batchedUpdates=Jh;Tt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ma(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return ga(t,e,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function R0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R0)}catch(t){console.error(t)}}R0(),Rm.exports=Tt;var rk=Rm.exports,Yd=rk;Tu.createRoot=Yd.createRoot,Tu.hydrateRoot=Yd.hydrateRoot;let xc=[],I0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?I0:xc).push(n=n+t[e])})();function ik(t){if(t<768)return!1;for(let e=0,n=xc.length;;){let r=e+n>>1;if(t<xc[r])n=r;else if(t>=I0[r])e=r+1;else return!0;if(e==n)return!1}}function Qd(t){return t>=127462&&t<=127487}const Jd=8205;function sk(t,e,n=!0,r=!0){return(n?B0:lk)(t,e,r)}function B0(t,e,n){if(e==t.length)return e;e&&j0(t.charCodeAt(e))&&F0(t.charCodeAt(e-1))&&e--;let r=iu(t,e);for(e+=Xd(r);e<t.length;){let i=iu(t,e);if(r==Jd||i==Jd||n&&ik(i))e+=Xd(i),r=i;else if(Qd(i)){let s=0,l=e-2;for(;l>=0&&Qd(iu(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function lk(t,e,n){for(;e>0;){let r=B0(t,e-2,n);if(r<e)return r;e--}return 0}function iu(t,e){let n=t.charCodeAt(e);if(!F0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return j0(r)?(n-55296<<10)+(r-56320)+65536:n}function j0(t){return t>=56320&&t<57344}function F0(t){return t>=55296&&t<56320}function Xd(t){return t<65536?1:2}class ee{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=Ci(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),cn.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Ci(this,e,n);let r=[];return this.decompose(e,n,r,0),cn.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new ms(this),s=new ms(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new ms(this,e)}iterRange(e,n=this.length){return new _0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new z0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ee.empty:e.length<=32?new ke(e):cn.from(ke.split(e,[]))}}class ke extends ee{constructor(e,n=ok(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new ak(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new ke(Zd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=so(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new ke(o,l.length+s.length));else{let a=o.length>>1;r.push(new ke(o.slice(0,a)),new ke(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof ke))return super.replace(e,n,r);[e,n]=Ci(this,e,n);let i=so(this.text,so(r.text,Zd(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new ke(i,s):cn.from(ke.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=Ci(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new ke(r,i)),r=[],i=-1);return i>-1&&n.push(new ke(r,i)),n}}class cn extends ee{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=Ci(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new cn(c,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=Ci(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof cn))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let g of e)g.flatten(d);return new ke(d,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,c=[];function h(d){let g;if(d.lines>s&&d instanceof cn)for(let v of d.children)h(v);else d.lines>l&&(a>l||!a)?(f(),o.push(d)):d instanceof ke&&a&&(g=c[c.length-1])instanceof ke&&d.lines+g.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new ke(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>i&&f(),a+=d.lines,u+=d.length+1,c.push(d))}function f(){a!=0&&(o.push(c.length==1?c[0]:cn.from(c,u)),u=-1,a=c.length=0)}for(let d of e)h(d);return f(),o.length==1?o[0]:new cn(o,n)}}ee.empty=new ke([""],0);function ok(t){let e=-1;for(let n of t)e+=n.length+1;return e}function so(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function Zd(t,e,n){return so(t,[""],e,n)}class ms{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof ke?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof ke?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof ke){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof ke?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class _0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new ms(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class z0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ee.prototype[Symbol.iterator]=function(){return this.iter()},ms.prototype[Symbol.iterator]=_0.prototype[Symbol.iterator]=z0.prototype[Symbol.iterator]=function(){return this});class ak{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function Ci(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function He(t,e,n=!0,r=!0){return sk(t,e,n,r)}function uk(t){return t>=56320&&t<57344}function ck(t){return t>=55296&&t<56320}function H0(t,e){let n=t.charCodeAt(e);if(!ck(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return uk(r)?(n-55296<<10)+(r-56320)+65536:n}function hk(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function W0(t){return t<65536?1:2}const kc=/\r\n?|\n/;var kt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(kt||(kt={}));class An{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){Sc(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new An(e)}composeDesc(e){return this.empty?e:e.empty?this:V0(this,e)}mapDesc(e,n=!1){return e.empty?this:Cc(this,e,n)}mapPos(e,n=-1,r=kt.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=kt.Simple&&u>=e&&(r==kt.TrackDel&&i<e&&u>e||r==kt.TrackBefore&&i<e||r==kt.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new An(e)}static create(e){return new An(e)}}class Re extends An{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Sc(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return Cc(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(ee.empty);r.push(l?e.slice(s,s+l):ee.empty)}s+=l}return new Re(n,r)}compose(e){return this.empty?e:e.empty?this:V0(this,e,!0)}map(e,n=!1){return e.empty?this:Cc(this,e,n,!0)}iterChanges(e,n=!1){Sc(this,e,n)}get desc(){return An.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new _s(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-o);Ye(i,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Ye(n,c,h),h>0&&Un(r,n,s.text),s.forward(c),o+=c}let u=e[l++];for(;o<u;){if(s.done)break e;let c=Math.min(s.len,u-o);Ye(n,c,-1),Ye(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),o+=c}}return{changes:new Re(n,r),filtered:An.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(c=!1){if(!c&&!i.length)return;l<n&&Ye(i,n-l,-1);let h=new Re(i,s);o=o?o.compose(h.map(o)):h,i=[],s=[],l=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Re){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),o=o?o.compose(c.map(o)):c}else{let{from:h,to:f=h,insert:d}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let g=d?typeof d=="string"?ee.of(d.split(r||kc)):d:ee.empty,v=g.length;if(h==f&&v==0)return;h<l&&a(),h>l&&Ye(i,h-l,-1),Ye(i,f-h,v),Un(s,i,g),l=f}}return u(e),a(!o),o}static empty(e){return new Re(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(ee.empty);r[i]=ee.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Re(n,r)}static createSet(e,n){return new Re(e,n)}}function Ye(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Un(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(ee.empty);t.push(n)}}function Sc(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,c=s,h=ee.empty;for(;u+=o,c+=a,a&&r&&(h=h.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,c,h),i=u,s=c}}}function Cc(t,e,n,r=!1){let i=[],s=r?[]:null,l=new _s(t),o=new _s(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);Ye(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(Ye(i,o.ins,-1);u;){let c=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=c&&(Ye(i,0,l.ins),s&&Un(s,i,l.text),a=l.i),l.forward(c),u-=c}o.next()}else if(l.ins>=0){let u=0,c=l.len;for(;c;)if(o.ins==-1){let h=Math.min(c,o.len);u+=h,c-=h,o.forward(h)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;Ye(i,u,a<l.i?l.ins:0),s&&a<l.i&&Un(s,i,l.text),a=l.i,l.forward(l.len-c)}else{if(l.done&&o.done)return s?Re.createSet(i,s):An.create(i);throw new Error("Mismatched change set lengths")}}}function V0(t,e,n=!1){let r=[],i=n?[]:null,s=new _s(t),l=new _s(e);for(let o=!1;;){if(s.done&&l.done)return i?Re.createSet(r,i):An.create(r);if(s.ins==0)Ye(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)Ye(r,0,l.ins,o),i&&Un(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let c=l.ins==-1?-1:l.off?0:l.ins;Ye(r,a,c,o),i&&c&&Un(i,r,l.text)}else l.ins==-1?(Ye(r,s.off?0:s.len,a,o),i&&Un(i,r,s.textBit(a))):(Ye(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Un(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class _s{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ee.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?ee.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Sr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Sr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return T.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return T.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return T.range(e.anchor,e.head)}static create(e,n,r){return new Sr(e,n,r)}}class T{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:T.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new T([this.main],0)}addRange(e,n=!0){return T.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,T.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new T(e.ranges.map(n=>Sr.fromJSON(n)),e.main)}static single(e,n=e){return new T([T.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return T.normalized(e.slice(),n);r=s.to}return new T(e,n)}static cursor(e,n=0,r,i){return Sr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?Sr.create(n,e,48|s):Sr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?T.range(a,o):T.range(o,a))}}return new T(e,n)}}function U0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let lf=0;class z{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=lf++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new z(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:of),!!e.static,e.enables)}of(e){return new lo([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new lo(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new lo(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function of(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class lo{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=lf++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[l]=r(h),1},update(h,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||Ac(h,c)){let d=r(h);if(o?!ep(d,h.values[l],i):!i(d,h.values[l]))return h.values[l]=d,1}return 0},reconfigure:(h,f)=>{let d,g=f.config.address[s];if(g!=null){let v=Fo(f,g);if(this.dependencies.every(k=>k instanceof z?f.facet(k)===h.facet(k):k instanceof Zt?f.field(k,!1)==h.field(k,!1):!0)||(o?ep(d=r(h),v,i):i(d=r(h),v)))return h.values[l]=v,0}else d=r(h);return h.values[l]=d,1}}}}function ep(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Ac(t,e){let n=!1;for(let r of e)gs(t,r)&1&&(n=!0);return n}function fk(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let c=0;c<r.length;c++){let h=Fo(a,r[c]);if(i[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(a){for(let u of r)gs(a,u);return a.values[l]=o(a),1},update(a,u){if(!Ac(a,s))return 0;let c=o(a);return e.compare(c,a.values[l])?0:(a.values[l]=c,1)},reconfigure(a,u){let c=Ac(a,r),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&of(n,h))return a.values[l]=f,0;let d=o(a);return e.compare(d,f)?(a.values[l]=f,0):(a.values[l]=d,1)}}}const Tl=z.define({static:!0});class Zt{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Zt(lf++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Tl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(Tl),l=i.facet(Tl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Tl.of({field:this,create:e})]}get extension(){return this}}const vr={lowest:4,low:3,default:2,high:1,highest:0};function qi(t){return e=>new $0(e,t)}const ya={highest:qi(vr.highest),high:qi(vr.high),default:qi(vr.default),low:qi(vr.low),lowest:qi(vr.lowest)};class $0{constructor(e,n){this.inner=e,this.prec=n}}class va{of(e){return new bc(this,e)}reconfigure(e){return va.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class bc{constructor(e,n){this.compartment=e,this.inner=n}}class jo{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of dk(e,n,l))f instanceof Zt?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(d=>f.slot(d));let c=r==null?void 0:r.config.facets;for(let f in s){let d=s[f],g=d[0].facet,v=c&&c[f]||[];if(d.every(k=>k.type==0))if(o[g.id]=a.length<<1|1,of(v,d))a.push(r.facet(g));else{let k=g.combine(d.map(p=>p.value));a.push(r&&g.compare(k,r.facet(g))?r.facet(g):k)}else{for(let k of d)k.type==0?(o[k.id]=a.length<<1|1,a.push(k.value)):(o[k.id]=u.length<<1,u.push(p=>k.dynamicSlot(p)));o[g.id]=u.length<<1,u.push(k=>fk(k,g,d))}}let h=u.map(f=>f(o));return new jo(e,l,h,o,a,s)}}function dk(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof bc&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof bc){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof $0)s(l.inner,l.prec);else if(l instanceof Zt)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof lo)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,vr.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,vr.default),r.reduce((l,o)=>l.concat(o))}function gs(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Fo(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const K0=z.define(),Ec=z.define({combine:t=>t.some(e=>e),static:!0}),G0=z.define({combine:t=>t.length?t[0]:void 0,static:!0}),q0=z.define(),Y0=z.define(),Q0=z.define(),J0=z.define({combine:t=>t.length?t[0]:!1});class Li{constructor(e,n){this.type=e,this.value=n}static define(){return new pk}}class pk{of(e){return new Li(this,e)}}class mk{constructor(e){this.map=e}of(e){return new ce(this,e)}}class ce{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ce(this.type,n)}is(e){return this.type==e}static define(e={}){return new mk(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}ce.reconfigure=ce.define();ce.appendConfig=ce.define();class Xe{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&U0(r,n.newLength),s.some(o=>o.type==Xe.time)||(this.annotations=s.concat(Xe.time.of(Date.now())))}static create(e,n,r,i,s,l){return new Xe(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Xe.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Xe.time=Li.define();Xe.userEvent=Li.define();Xe.addToHistory=Li.define();Xe.remote=Li.define();function gk(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function X0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Re.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:ce.mapEffects(t.effects,i).concat(ce.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Tc(t,e,n){let r=e.selection,i=fi(e.annotations);return e.userEvent&&(i=i.concat(Xe.userEvent.of(e.userEvent))),{changes:e.changes instanceof Re?e.changes:Re.of(e.changes||[],n,t.facet(G0)),selection:r&&(r instanceof T?r:T.single(r.anchor,r.head)),effects:fi(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Z0(t,e,n){let r=Tc(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=X0(r,Tc(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=Xe.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return vk(n?yk(i):i)}function yk(t){let e=t.startState,n=!0;for(let i of e.facet(q0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:gk(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Re.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=Xe.create(e,i,t.selection&&t.selection.map(s),ce.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(Y0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Xe?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Xe?t=s[0]:t=Z0(e,fi(s),!1)}return t}function vk(t){let e=t.startState,n=e.facet(Q0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=X0(r,Tc(e,s,t.changes.newLength),!0))}return r==t?t:Xe.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const wk=[];function fi(t){return t==null?wk:Array.isArray(t)?t:[t]}var We=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(We||(We={}));const xk=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Mc;try{Mc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function kk(t){if(Mc)return Mc.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||xk.test(n)))return!0}return!1}function Sk(t){return e=>{if(!/\S/.test(e))return We.Space;if(kk(e))return We.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return We.Word;return We.Other}}class ne{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)gs(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return gs(this,r),Fo(this,r)}update(...e){return Z0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(va.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(ce.reconfigure)?(n=null,r=o.value):o.is(ce.appendConfig)&&(n=null,r=fi(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=jo.resolve(r,i,this),s=new ne(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(Ec)?e.newSelection:e.newSelection.asSingle();new ne(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:T.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=fi(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),c=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(c);let h=i.mapDesc(u,!0);s.push(a.range.map(h)),i=i.compose(c),l=ce.mapEffects(l,c).concat(ce.mapEffects(fi(a.effects),h))}return{changes:i,selection:T.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Re?e:Re.of(e,this.doc.length,this.facet(ne.lineSeparator))}toText(e){return ee.of(e.split(this.facet(ne.lineSeparator)||kc))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(gs(this,n),Fo(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Zt&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return ne.create({doc:e.doc,selection:T.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=jo.resolve(e.extensions||[],new Map),r=e.doc instanceof ee?e.doc:ee.of((e.doc||"").split(n.staticFacet(ne.lineSeparator)||kc)),i=e.selection?e.selection instanceof T?e.selection:T.single(e.selection.anchor,e.selection.head):T.single(0);return U0(i,r.length),n.staticFacet(Ec)||(i=i.asSingle()),new ne(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(ne.tabSize)}get lineBreak(){return this.facet(ne.lineSeparator)||`
`}get readOnly(){return this.facet(J0)}phrase(e,...n){for(let r of this.facet(ne.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(K0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return Sk(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=He(n,l,!1);if(s(n.slice(a,l))!=We.Word)break;l=a}for(;o<i;){let a=He(n,o);if(s(n.slice(o,a))!=We.Word)break;o=a}return l==o?null:T.range(l+r,o+r)}}ne.allowMultipleSelections=Ec;ne.tabSize=z.define({combine:t=>t.length?t[0]:4});ne.lineSeparator=G0;ne.readOnly=J0;ne.phrases=z.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});ne.languageData=K0;ne.changeFilter=q0;ne.transactionFilter=Y0;ne.transactionExtender=Q0;va.reconfigure=ce.define();function wa(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Ai{eq(e){return this==e}range(e,n=e){return Nc.create(e,n,this)}}Ai.prototype.startSide=Ai.prototype.endSide=0;Ai.prototype.point=!1;Ai.prototype.mapMode=kt.TrackDel;let Nc=class ey{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new ey(e,n,r)}};function Dc(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class af{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,h=this.to[a]+e,f,d;if(c==h){let g=n.mapPos(c,u.startSide,u.mapMode);if(g==null||(f=d=g,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<f)))continue}else if(f=n.mapPos(c,u.startSide),d=n.mapPos(h,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,d-f)),r.push(u),i.push(f-l),s.push(d-l))}return{mapped:r.length?new af(i,s,r,o):null,pos:l}}}class ie{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ie(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(Dc)),this.isEmpty)return n.length?ie.of(n):this;let o=new ty(this,null,-1).goto(0),a=0,u=[],c=new Pr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let h=n[a++];c.addInner(h.from,h.to,h.value)||u.push(h)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||u.push(Nc.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?ie.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:c,pos:h}=a.map(o,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new ie(r,n,s||ie.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return zs.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return zs.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),o=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=tp(l,o,r),u=new Yi(l,a,s),c=new Yi(o,a,s);r.iterGaps((h,f,d)=>np(u,h,c,f,d,i)),r.empty&&r.length==0&&np(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),l=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=tp(s,l),a=new Yi(s,o,0).goto(r),u=new Yi(l,o,0).goto(r);for(;;){if(a.to!=u.to||!Oc(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new Yi(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let c=l.activeForPoint(l.to),h=l.pointFrom<n?c.length+1:l.point.startSide<0?c.length:Math.min(c.length,a);i.point(o,u,l.point,c,h,l.pointRank),a=Math.min(l.openEnd(u),c.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new Pr;for(let i of e instanceof Nc?[e]:n?Ck(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ie.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ie.empty;i=i.nextLayer)n=new ie(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}ie.empty=new ie([],[],null,-1);function Ck(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Dc(e,r)>0)return t.slice().sort(Dc);e=r}return t}ie.empty.nextLayer=ie.empty;class Pr{finishChunk(e){this.chunks.push(new af(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Pr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ie.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ie.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function tp(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class ty{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class zs{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new ty(l,n,r,s));return i.length==1?i[0]:new zs(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)su(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)su(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),su(this.heap,0)}}}function su(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Yi{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=zs.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Ml(this.active,e),Ml(this.activeTo,e),Ml(this.activeRank,e),this.minActive=rp(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Nl(this.active,n,r),Nl(this.activeTo,n,i),Nl(this.activeRank,n,s),e&&Nl(e,n,this.cursor.from),this.minActive=rp(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Ml(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function np(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,h=c<0?t.to+a:n.to,f=Math.min(h,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Oc(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!Oc(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),h>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),o=h,c<=0&&t.next(),c>=0&&n.next()}}function Oc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Ml(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Nl(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function rp(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function xa(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=He(t,i));return r}function Ak(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=He(t,i)}return t.length}const Pc="ͼ",ip=typeof Symbol>"u"?"__"+Pc:Symbol.for(Pc),Lc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),sp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ir{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let c=[],h=/^@(\w+)\b/.exec(l[0]),f=h&&h[1]=="keyframes";if(h&&o==null)return a.push(l[0]+";");for(let d in o){let g=o[d];if(/&/.test(d))s(d.split(/,\s*/).map(v=>l.map(k=>v.replace(/&/,k))).reduce((v,k)=>v.concat(k)),g,a);else if(g&&typeof g=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),g,c,f)}else g!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+g+";")}(c.length||f)&&a.push((r&&!h&&!u?l.map(r):l).join(", ")+" {"+c.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=sp[ip]||1;return sp[ip]=e+1,Pc+e.toString(36)}static mount(e,n,r){let i=e[Lc],s=r&&r.nonce;i?s&&i.setNonce(s):i=new bk(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let lp=new Map;class bk{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=lp.get(r);if(s)return e[Lc]=s;this.sheet=new i.CSSStyleSheet,lp.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Lc]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var sr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Hs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ek=typeof navigator<"u"&&/Mac/.test(navigator.platform),Tk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var _e=0;_e<10;_e++)sr[48+_e]=sr[96+_e]=String(_e);for(var _e=1;_e<=24;_e++)sr[_e+111]="F"+_e;for(var _e=65;_e<=90;_e++)sr[_e]=String.fromCharCode(_e+32),Hs[_e]=String.fromCharCode(_e);for(var lu in sr)Hs.hasOwnProperty(lu)||(Hs[lu]=sr[lu]);function Mk(t){var e=Ek&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Tk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Hs:sr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function je(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)ny(t,arguments[e]);return t}function ny(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)ny(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Ws(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Rc(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function oo(t,e){if(!e.anchorNode)return!1;try{return Rc(t,e.anchorNode)}catch{return!1}}function Vs(t){return t.nodeType==3?Rr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function ys(t,e,n,r){return n?op(t,e,n,r,-1)||op(t,e,n,r,1):!1}function Lr(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function _o(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function op(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:gn(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Lr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?gn(t):0}else return!1}}function gn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ka(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Nk(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function ry(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function Dk(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,d=c==a.body,g=1,v=1;if(d)f=Nk(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:g,scaleY:v}=ry(c,y)),f={left:y.left,right:y.left+c.clientWidth*g,top:y.top,bottom:y.top+c.clientHeight*v}}let k=0,p=0;if(i=="nearest")e.top<f.top?(p=e.top-(f.top+l),n>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,n<0&&e.top-p<f.top&&(p=e.top-(f.top+l)));else{let y=e.bottom-e.top,w=f.bottom-f.top;p=(i=="center"&&y<=w?e.top+y/2-w/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-w+l)-f.top}if(r=="nearest"?e.left<f.left?(k=e.left-(f.left+s),n>0&&e.right>f.right+k&&(k=e.right-f.right+s)):e.right>f.right&&(k=e.right-f.right+s,n<0&&e.left<f.left+k&&(k=e.left-(f.left+s))):k=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,k||p)if(d)u.scrollBy(k,p);else{let y=0,w=0;if(p){let S=c.scrollTop;c.scrollTop+=p/v,w=(c.scrollTop-S)*v}if(k){let S=c.scrollLeft;c.scrollLeft+=k/g,y=(c.scrollLeft-S)*g}e={left:e.left-y,top:e.top-w,right:e.right-y,bottom:e.bottom-w},y&&Math.abs(y-k)<1&&(r="nearest"),w&&Math.abs(w-p)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function Ok(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class Pk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?gn(n):0),r,Math.min(e.focusOffset,r?gn(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Hr=null;function iy(t){if(t.setActive)return t.setActive();if(Hr)return t.focus(Hr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Hr==null?{get preventScroll(){return Hr={preventScroll:!0},!0}}:void 0),!Hr){Hr=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let ap;function Rr(t,e,n=e){let r=ap||(ap=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function di(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function Lk(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function sy(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Rk(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,gn(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=gn(n))}else{if(n==t)return!0;r=Lr(n),n=n.parentNode}}function ly(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function oy(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=gn(n)}else if(n.parentNode&&!_o(n))r=Lr(n),n=n.parentNode;else return null}}function ay(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!_o(n))r=Lr(n)+1,n=n.parentNode;else return null}}class Je{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Je(e.parentNode,Lr(e),n)}static after(e,n){return new Je(e.parentNode,Lr(e)+1,n)}}const uf=[];class ae{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=ae.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=up(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=up(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=gn(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ae.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,c=r;a<this.children.length;a++){let h=this.children[a],f=u+h.length;if(u<e&&f>n)return h.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&h.dom.parentNode==this.dom){l=a,o=c;break}c=f,u=f+h.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=uf){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new uy(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ae.prototype.breakAfter=0;function up(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class uy{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function cy(t,e,n,r,i,s,l,o,a){let{children:u}=t,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:l;if(!(e==r&&c&&!l&&!f&&s.length<2&&c.merge(n,i,s.length?h:null,n==0,o,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&(h!=null&&h.breakAfter))?(e==r&&(d=d.split(i),i=0),!f&&h&&d.merge(0,i,h,!0,0,a)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(h?h.breakAfter=1:l=1),r++}for(c&&(c.breakAfter=l,n>0&&(!l&&s.length&&c.merge(n,c.length,s[0],!1,o,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function hy(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:c}=l.findPos(e,-1),h=e-n;for(let f of r)h+=f.length;t.length+=h,cy(t,u,c,o,a,r,0,i,s)}let ct=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ic=typeof document<"u"?document:{documentElement:{style:{}}};const Bc=/Edge\/(\d+)/.exec(ct.userAgent),fy=/MSIE \d/.test(ct.userAgent),jc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ct.userAgent),Sa=!!(fy||jc||Bc),cp=!Sa&&/gecko\/(\d+)/i.test(ct.userAgent),ou=!Sa&&/Chrome\/(\d+)/.exec(ct.userAgent),Ik="webkitFontSmoothing"in Ic.documentElement.style,dy=!Sa&&/Apple Computer/.test(ct.vendor),hp=dy&&(/Mobile\/\w+/.test(ct.userAgent)||ct.maxTouchPoints>2);var R={mac:hp||/Mac/.test(ct.platform),windows:/Win/.test(ct.platform),linux:/Linux|X11/.test(ct.platform),ie:Sa,ie_version:fy?Ic.documentMode||6:jc?+jc[1]:Bc?+Bc[1]:0,gecko:cp,gecko_version:cp?+(/Firefox\/(\d+)/.exec(ct.userAgent)||[0,0])[1]:0,chrome:!!ou,chrome_version:ou?+ou[1]:0,ios:hp,android:/Android\b/.test(ct.userAgent),safari:dy,webkit_version:Ik?+(/\bAppleWebKit\/(\d+)/.exec(ct.userAgent)||[0,0])[1]:0,tabSize:Ic.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Bk=256;class Jt extends ae{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Jt)||this.length-(n-e)+r.length>Bk||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Jt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Je(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return jk(this.dom,e,n)}}class Dn extends ae{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(sy(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof Dn&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(hy(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Dn(this.mark,n,l)}domAtPos(e){return py(this,e)}coordsAt(e,n){return gy(this,e,n)}}function jk(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?R.chrome||R.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=Rr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return R.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?ka(a,l<0):a||null}class Cr extends ae{static create(e,n,r){return new Cr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=Cr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof Cr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Cr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ee.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):ee.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Je.before(this.dom):Je.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return ka(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class bi extends ae{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof bi&&e.side==this.side}split(){return new bi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Je.before(this.dom):Je.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ee.empty}get isHidden(){return!0}}Jt.prototype.children=Cr.prototype.children=bi.prototype.children=uf;function py(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new Je(n,0)}function my(t,e,n){let r,{children:i}=t;n>0&&e instanceof Dn&&i.length&&(r=i[i.length-1])instanceof Dn&&r.mark.eq(e.mark)?my(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function gy(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let d=u.children[h],g=f+d.length;g>=c&&(d.children.length?o(d,c-f):(!s||s.isHidden&&(n>0||_k(s,d)))&&(g>c||f==g&&d.getSide()>0)?(s=d,l=c-f):(f<c||f==g&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-f)),f=g}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):Fk(t)}function Fk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Vs(e);return n[n.length-1]||null}function _k(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function Fc(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const fp=Object.create(null);function zo(t,e,n){if(t==e)return!0;t||(t=fp),e||(e=fp);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function _c(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function zk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class tl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Rt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Rt||(Rt={}));class q extends Ai{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new nl(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new lr(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=yy(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new lr(e,r,i,n,e.widget||null,!0)}static line(e){return new rl(e)}static set(e,n=!1){return ie.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}q.none=ie.empty;class nl extends q{constructor(e){let{start:n,end:r}=yy(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof nl&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&zo(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}nl.prototype.point=!1;class rl extends q{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof rl&&this.spec.class==e.spec.class&&zo(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}rl.prototype.mapMode=kt.TrackBefore;rl.prototype.point=!0;class lr extends q{constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?kt.TrackBefore:kt.TrackAfter:kt.TrackDel}get type(){return this.startSide!=this.endSide?Rt.WidgetRange:this.startSide<=0?Rt.WidgetBefore:Rt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof lr&&Hk(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}lr.prototype.point=!0;function yy(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function Hk(t,e){return t==e||!!(t&&e&&t.compare(e))}function ao(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Ee extends ae{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof Ee))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),hy(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new Ee;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){zo(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){my(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Fc(n,this.attrs||{})),r&&(this.attrs=Fc({class:r},this.attrs||{}))}domAtPos(e){return py(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(sy(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(_c(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&ae.get(i)instanceof Dn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ae.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!R.ios||!this.children.some(s=>s instanceof Jt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Jt)||/[^ -~]/.test(r.text))return null;let i=Vs(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=gy(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof Ee&&this.children.length==0&&e.children.length==0&&zo(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof Ee)return s;if(l>n)break}i=l+s.breakAfter}return null}}class bn extends ae{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof bn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Je.before(this.dom):Je.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new bn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return uf}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ee.empty}domBoundsAround(){return null}become(e){return e instanceof bn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof zc?null:ka(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class zc extends tl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class vs{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof bn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ee),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Dl(new bi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof bn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Dl(new Jt(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof lr){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof lr)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new bn(r.widget||Ei.block,o,r));else{let a=Cr.create(r.widget||Ei.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(Dl(new bi(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(Dl(a,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new vs(e,n,r,s);return l.openEnd=ie.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function Dl(t,e){for(let n of e)t=new Dn(n,[t],t.length);return t}class Ei extends tl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ei.inline=new Ei("span");Ei.block=new Ei("div");var Pe=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Pe||(Pe={}));const Ir=Pe.LTR,cf=Pe.RTL;function vy(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Wk=vy("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Vk=vy("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Hc=Object.create(null),rn=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Hc[e]=n,Hc[n]=-e}function wy(t){return t<=247?Wk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Vk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Uk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class $n{get dir(){return this.level%2?cf:Ir}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function xy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!xy(r.inner,i.inner))return!1}return!0}const oe=[];function $k(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,c=a,h=a;u<o;u++){let f=wy(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),oe[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=l,c=a,h=a;u<o;u++){let f=oe[u];if(f==128)u<o-1&&c==oe[u+1]&&c&24?f=oe[u]=c:oe[u]=256;else if(f==64){let d=u+1;for(;d<o&&oe[d]==64;)d++;let g=u&&c==8||d<n&&oe[d]==8?h==1?1:8:256;for(let v=u;v<d;v++)oe[v]=g;u=d-1}else f==8&&h==1&&(oe[u]=1);c=f,f&7&&(h=f)}}}function Kk(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,c=l<r.length?r[l].from:n;for(let h=u,f,d,g;h<c;h++)if(d=Hc[f=t.charCodeAt(h)])if(d<0){for(let v=o-3;v>=0;v-=3)if(rn[v+1]==-d){let k=rn[v+2],p=k&2?i:k&4?k&1?s:i:0;p&&(oe[h]=oe[rn[v]]=p),o=v;break}}else{if(rn.length==189)break;rn[o++]=h,rn[o++]=f,rn[o++]=a}else if((g=oe[h])==2||g==1){let v=g==i;a=v?0:1;for(let k=o-3;k>=0;k-=3){let p=rn[k+2];if(p&2)break;if(v)rn[k+2]|=2;else{if(p&4)break;rn[k+2]|=4}}}}}function Gk(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=oe[a];if(u==256){let c=a+1;for(;;)if(c==o){if(i==n.length)break;c=n[i++].to,o=i<n.length?n[i].from:e}else if(oe[c]==256)c++;else break;let h=s==1,f=(c<e?oe[c]:r)==1,d=h==f?h?1:2:r;for(let g=c,v=i,k=v?n[v-1].to:t;g>a;)g==k&&(g=n[--v].from,k=v?n[v-1].to:t),oe[--g]=d;a=c}else s=u,a++}}}function Wc(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let c=!0,h=!1;if(u==s.length||a<s[u].from){let v=oe[a];v!=o&&(c=!1,h=v==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,g=a;e:for(;;)if(u<s.length&&g==s[u].from){if(h)break e;let v=s[u];if(!c)for(let k=v.to,p=u+1;;){if(k==n)break e;if(p<s.length&&s[p].from==k)k=s[p++].to;else{if(oe[k]==o)break e;break}}if(u++,f)f.push(v);else{v.from>a&&l.push(new $n(a,v.from,d));let k=v.direction==Ir!=!(d%2);Vc(t,k?r+1:r,i,v.inner,v.from,v.to,l),a=v.to}g=v.to}else{if(g==n||(c?oe[g]!=o:oe[g]==o))break;g++}f?Wc(t,a,g,r+1,i,f,l):a<g&&l.push(new $n(a,g,d)),a=g}else for(let a=n,u=s.length;a>e;){let c=!0,h=!1;if(!u||a>s[u-1].to){let v=oe[a-1];v!=o&&(c=!1,h=v==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,g=a;e:for(;;)if(u&&g==s[u-1].to){if(h)break e;let v=s[--u];if(!c)for(let k=v.from,p=u;;){if(k==e)break e;if(p&&s[p-1].to==k)k=s[--p].from;else{if(oe[k-1]==o)break e;break}}if(f)f.push(v);else{v.to<a&&l.push(new $n(v.to,a,d));let k=v.direction==Ir!=!(d%2);Vc(t,k?r+1:r,i,v.inner,v.from,v.to,l),a=v.from}g=v.from}else{if(g==e||(c?oe[g-1]!=o:oe[g-1]==o))break;g--}f?Wc(t,g,a,r+1,i,f,l):g<a&&l.push(new $n(g,a,d)),a=g}}function Vc(t,e,n,r,i,s,l){let o=e%2?2:1;$k(t,i,s,r,o),Kk(t,i,s,r,o),Gk(i,s,r,o),Wc(t,i,s,e,n,r,l)}function qk(t,e,n){if(!t)return[new $n(0,0,e==cf?1:0)];if(e==Ir&&!n.length&&!Uk.test(t))return ky(t.length);if(n.length)for(;t.length>oe.length;)oe[oe.length]=256;let r=[],i=e==Ir?0:1;return Vc(t,i,i,n,0,t.length,r),r}function ky(t){return[new $n(0,t,0)]}let Sy="";function Yk(t,e,n,r,i){var s;let l=r.head-t.from,o=$n.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let c=He(t.text,l,a.forward(i,n));(c<a.from||c>a.to)&&(c=u),Sy=t.text.slice(Math.min(l,c),Math.max(l,c));let h=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<a.level?T.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):T.cursor(c+t.from,a.forward(i,n)?-1:1,a.level)}function Qk(t,e,n){for(let r=e;r<n;r++){let i=wy(t.charCodeAt(r));if(i==1)return Ir;if(i==2||i==4)return cf}return Ir}const Cy=z.define(),Ay=z.define(),by=z.define(),Ey=z.define(),Uc=z.define(),Ty=z.define(),My=z.define(),hf=z.define(),ff=z.define(),Ny=z.define({combine:t=>t.some(e=>e)}),Jk=z.define({combine:t=>t.some(e=>e)}),Dy=z.define();class pi{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new pi(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new pi(T.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ol=ce.define({map:(t,e)=>t.map(e)}),Oy=ce.define();function fn(t,e,n){let r=t.facet(Ey);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const xn=z.define({combine:t=>t.length?t[0]:!0});let Xk=0;const ri=z.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class bt{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(ri.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ri.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new bt(Xk++,e,r,i,o=>{let a=[];return l&&a.push(Us.of(u=>{let c=u.plugin(o);return c?l(c):q.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return bt.define((r,i)=>new e(r,i),n)}}class au{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(fn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){fn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){fn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Py=z.define(),df=z.define(),Us=z.define(),Ly=z.define(),il=z.define(),Ry=z.define();function dp(t,e){let n=t.state.facet(Ry);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return ie.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,c=l-e.from,h=i;for(let f=o.length-1;f>=0;f--,a--){let d=o[f].spec.bidiIsolate,g;if(d==null&&(d=Qk(e.text,u,c)),a>0&&h.length&&(g=h[h.length-1]).to==u&&g.direction==d)g.to=c,h=g.inner;else{let v={from:u,to:c,direction:d,inner:[]};h.push(v),h=v.inner}}}}),i}const Iy=z.define();function By(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(Iy)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const rs=z.define();class It{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new It(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let h=n[s],f=n[s+1],d=Math.max(o,h),g=Math.min(c,f);if(d<=g&&new It(d+u,g+u,d,g).addToSet(r),f>c)break;s+=2}if(!a)return r;new It(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class Ho{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Re.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new It(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new Ho(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class pp extends ae{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=q.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ee],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new It(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!sS(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?eS(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new It(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(R.ie||R.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=rS(l,o,e.changes);return r=It.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=R.chrome||R.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof bn&&l.widget instanceof zc&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:c,toB:h}=o,f,d,g,v;if(r&&r.range.fromB<h&&r.range.toB>c){let S=vs.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=vs.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);d=S.breakAtStart,g=S.openStart,v=C.openEnd;let b=this.compositionView(r);C.breakAtStart?b.breakAfter=1:C.content.length&&b.merge(b.length,b.length,C.content[0],!1,C.openStart,0)&&(b.breakAfter=C.content[0].breakAfter,C.content.shift()),S.content.length&&b.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(b).concat(C.content)}else({content:f,breakAtStart:d,openStart:g,openEnd:v}=vs.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:k,off:p}=s.findPos(u,1),{i:y,off:w}=s.findPos(a,-1);cy(this,y,w,k,p,f,d,g,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(Oy)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Jt(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Dn(i,[n],n.length);let r=new Ee;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=ae.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(xn)||this.dom.tabIndex>-1)&&oo(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(R.gecko&&o.empty&&!this.hasComposition&&Zk(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=u=new Je(h,0),l=!0}let c=this.view.observer.selectionRange;(l||!c.focusNode||(!ys(a.node,a.offset,c.anchorNode,c.anchorOffset)||!ys(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,o))&&(this.view.observer.ignore(()=>{R.android&&R.chrome&&this.dom.contains(c.focusNode)&&iS(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Ws(this.view.root);if(h)if(o.empty){if(R.gecko){let f=tS(a.node,a.offset);if(f&&f!=3){let d=(f==1?oy:ay)(a.node,a.offset);d&&(a=new Je(d.node,d.offset))}}h.collapse(a.node,a.offset),o.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=o.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Je(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Je(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&ys(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Ws(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=Ee.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=ae.get(n.childNodes[i]);s instanceof Ee&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=ae.get(n.childNodes[i]);s instanceof Ee&&(r=s.domAtPos(s.length))}return r?new Je(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=ae.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Ee)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof Ee&&!(r instanceof Ee&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof bn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Ee))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Jt))return null;let s=He(i.text,r);if(s==r)return null;let l=Rr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Pe.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>i)break;if(u>=r){let d=h.dom.getBoundingClientRect();if(n.push(d.height),l){let g=h.dom.lastChild,v=g?Vs(g):[];if(v.length){let k=v[v.length-1],p=a?k.right-d.left:d.right-k.left;p>o&&(o=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Pe.RTL:Pe.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Ee){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Vs(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new uy(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(q.replace({widget:new zc(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return q.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Us).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(Ly).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(ie.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(Dy))try{if(u(this.view,e.range,e))return!0}catch(c){fn(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=By(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;Dk(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Pe.LTR)}}function Zk(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function jy(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=oy(n.focusNode,n.focusOffset),i=ay(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=ae.get(i.node);if(!o||o instanceof Jt&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=ae.get(r.node);!a||a instanceof Jt&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function eS(t,e,n){let r=jy(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new It(a.mapPos(s),a.mapPos(l),s,l),c=[];for(let h=i.parentNode;;h=h.parentNode){let f=ae.get(h);if(f instanceof Dn)c.push({node:h,deco:f.mark});else{if(f instanceof Ee||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new nl({inclusive:!0,attributes:zk(h),tagName:h.tagName.toLowerCase()})});else return null}}}function tS(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let nS=class{constructor(){this.changes=[]}compareRange(e,n){ao(e,n,this.changes)}comparePoint(e,n){ao(e,n,this.changes)}boundChange(e){ao(e,e,this.changes)}};function rS(t,e,n){let r=new nS;return ie.compare(t,e,n,r),r.changes}function iS(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function sS(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function lS(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return T.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=He(i.text,s,!1):o=He(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=He(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=He(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return T.range(l+i.from,o+i.from)}function oS(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function aS(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function uu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function mp(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function gp(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function $c(t,e,n){let r,i,s,l,o=!1,a,u,c,h;for(let g=t.firstChild;g;g=g.nextSibling){let v=Vs(g);for(let k=0;k<v.length;k++){let p=v[k];i&&uu(i,p)&&(p=mp(gp(p,i.bottom),i.top));let y=oS(e,p),w=aS(n,p);if(y==0&&w==0)return g.nodeType==3?yp(g,e,n):$c(g,e,n);(!r||l>w||l==w&&s>y)&&(r=g,i=p,s=y,l=w,o=y?e<p.left?k>0:k<v.length-1:!0),y==0?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=g,c=p):n<p.top&&(!h||h.top>p.top)&&(u=g,h=p):c&&uu(c,p)?c=gp(c,p.bottom):h&&uu(h,p)&&(h=mp(h,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):h&&h.top<=n&&(r=u,i=h),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return yp(r,f,n);if(o&&r.contentEditable!="false")return $c(r,f,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function yp(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=Rr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;l||(l=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,d=f;if((R.chrome||R.gecko)&&Rr(t,o).getBoundingClientRect().left==c.right&&(d=!f),h<=0)return{node:t,offset:o+(d?1:0)};i=o+(d?1:0),s=h}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function Fy(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:h}=e,f=h-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(f),a.type!=Rt.Text;)for(;f=r>0?a.bottom+S:a.top-S,!(f>=0&&f<=u);){if(C)return n?null:0;C=!0,r=-r}h=o+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:vp(t,l,a,c,h);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:vp(t,l,a,c,h);let g=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:g,k=v.elementFromPoint(c,h);k&&!t.contentDOM.contains(k)&&(k=null),k||(c=Math.max(l.left+1,Math.min(l.right-1,c)),k=v.elementFromPoint(c,h),k&&!t.contentDOM.contains(k)&&(k=null));let p,y=-1;if(k&&((i=t.docView.nearest(k))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(c,h);S&&({offsetNode:p,offset:y}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(c,h);S&&({startContainer:p,startOffset:y}=S)}p&&(!t.contentDOM.contains(p)||R.safari&&uS(p,y,c)||R.chrome&&cS(p,y,c))&&(p=void 0),p&&(y=Math.min(gn(p),y))}if(!p||!t.docView.dom.contains(p)){let S=Ee.find(t.docView,d);if(!S)return f>a.top+a.height/2?a.to:a.from;({node:p,offset:y}=$c(S.dom,c,h))}let w=t.docView.nearest(p);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=w.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(p,y)+w.posAtStart}function vp(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+Ak(l,s,t.state.tabSize)}function _y(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return Rr(t,r-1,r).getBoundingClientRect().right>n}function uS(t,e,n){return _y(t,e,n)}function cS(t,e,n){if(e!=0)return _y(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Rr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function hS(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Rt.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function fS(t,e,n,r){let i=hS(t,e.head,e.assoc||-1),s=!r||i.type!=Rt.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==Pe.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return T.cursor(a,n?-1:1)}return T.cursor(n?i.to:i.from,n?-1:1)}function wp(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Yk(i,s,l,o,n),c=Sy;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(c))return o}else{if(!r)return u;a=r(c)}o=u}}function dS(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==We.Space&&(i=l),i==l}}function pS(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return T.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),o=(s<0?d.top:d.bottom)+c}let h=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let g=o+(f+d)*s,v=Fy(t,{x:h,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?v<i:v>i)){let k=t.docView.coordsForChar(v),p=!k||g<k.top?-1:1;return T.cursor(v,p,void 0,l)}}}function ws(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function zy(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=ws(t,i.from,0);l!=i.from&&(s=T.cursor(l,-1))}else{let l=ws(t,i.from,-1),o=ws(t,i.to,1);(l!=i.from||o!=i.to)&&(s=T.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?T.create(n,e.mainIndex):e}function cu(t,e,n){let r=ws(t.state.facet(il).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:T.cursor(r,r<n.from?1:-1)}const is="￿";class mS{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ne.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=is}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=ae.get(i),a=ae.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:_o(i))||_o(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=ae.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(gS(e,r.node,r.offset)?n:0))}}function gS(t,e,n){for(;;){if(!e||n<gn(e))return!1;if(e==t)return!0;n=Lr(e)+1,e=e.parentNode}}class xp{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class yS{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:xS(e),a=new mS(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=kS(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!Rc(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!Rc(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),c=e.viewport;if((R.ios||R.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(a,u),f=Math.max(a,u),d=c.from-h,g=c.to-f;(d==0||d==1||h==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=T.single(u,a)}}}function Hy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||R.android&&e.text.length<o-l)&&(a=i.to,u="end");let c=wS(t.state.doc.sliceString(l,o,is),e.text,a-l,u);c&&(R.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==is+is&&c.toB--,n={from:l+c.from,to:l+c.toA,insert:ee.of(e.text.slice(c.from,c.toB).split(is))})}else r&&(!t.hasFocus&&t.state.facet(xn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(R.mac||R.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=T.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:ee.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:R.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=T.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:ee.of([" "])}),n)return pf(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=zy(t.state.facet(il).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function pf(t,e,n,r=-1){if(R.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(R.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&di(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&di(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&di(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=vS(t,e,n));return t.state.facet(Ty).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function vS(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,c=ws(i.facet(il).map(h=>h(t)),u,a);e.from==c&&(l=c)}if(l>-1)r={changes:e,selection:T.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),h,f=n&&jy(t,n.main.head);if(f){let v=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-v}}else h=t.state.doc.lineAt(s.head);let d=s.to-e.to,g=s.to-s.from;r=i.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:u||v.map(a)};let k=v.to-d,p=k-c.length;if(v.to-v.from!=g||t.state.sliceDoc(p,k)!=c||v.to>=h.from&&v.from<=h.to)return{range:v};let y=i.changes({from:p,to:k,insert:e.insert}),w=v.to-s.to;return{changes:y,range:u?T.range(Math.max(0,u.anchor+w),Math.max(0,u.head+w)):v.map(y)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function wS(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function xS(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new xp(n,r)),(i!=n||s!=r)&&e.push(new xp(i,s))),e}function kS(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?T.single(n+e,r+e):null}class SS{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,R.safari&&e.contentDOM.addEventListener("input",()=>null),R.gecko&&FS(e.contentDOM.ownerDocument)}handleEvent(e){!DS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=CS(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Vy.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),R.android&&R.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return R.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Wy.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||AS.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,di(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:R.safari&&!R.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function kp(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){fn(n.state,i)}}}function CS(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(kp(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(kp(r.value,a))}}for(let r in Xt)n(r).handlers.push(Xt[r]);for(let r in _t)n(r).observers.push(_t[r]);return e}const Wy=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],AS="dthko",Vy=[16,17,18,20,91,92,224,225],Pl=6;function Ll(t){return Math.max(0,t)*.7+8}function bS(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class ES{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Ok(e.contentDOM),this.atoms=e.state.facet(il).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ne.allowMultipleSelections)&&TS(e,n),this.dragging=NS(e,n)&&Ky(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&bS(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=By(this.view);e.clientX-a.left<=i+Pl?n=-Ll(i-e.clientX):e.clientX+a.right>=l-Pl&&(n=Ll(e.clientX-l)),e.clientY-a.top<=s+Pl?r=-Ll(s-e.clientY):e.clientY+a.bottom>=o-Pl&&(r=Ll(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=zy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function TS(t,e){let n=t.state.facet(Cy);return n.length?n[0](e):R.mac?e.metaKey:e.ctrlKey}function MS(t,e){let n=t.state.facet(Ay);return n.length?n[0](e):R.mac?!e.altKey:!e.ctrlKey}function NS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Ws(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function DS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ae.get(n))&&r.ignoreEvent(e))return!1;return!0}const Xt=Object.create(null),_t=Object.create(null),Uy=R.ie&&R.ie_version<15||R.ios&&R.webkit_version<604;function OS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),$y(t,n.value)},50)}function Ca(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function $y(t,e){e=Ca(t.state,hf,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(Kc!=null&&n.selection.ranges.every(a=>a.empty)&&Kc==s.toString()){let a=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let h=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:T.cursor(u.from+h.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:T.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}_t.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Xt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);_t.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};_t.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Xt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(by))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=RS(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new ES(t,e,n,r)),r&&t.observer.ignore(()=>{iy(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Sp(t,e,n,r){if(r==1)return T.cursor(e,n);if(r==2)return lS(t.state,e,n);{let i=Ee.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,T.range(l,o)}}let Cp=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function PS(t,e,n,r){let i=Ee.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&Cp(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&Cp(n,r,o)?1:l&&l.bottom>=r?-1:1}function Ap(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:PS(t,n,e.clientX,e.clientY)}}const LS=R.ie&&R.ie_version<=11;let bp=null,Ep=0,Tp=0;function Ky(t){if(!LS)return t.detail;let e=bp,n=Tp;return bp=t,Tp=Date.now(),Ep=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Ep+1)%3:1}function RS(t,e){let n=Ap(t,e),r=Ky(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=Ap(t,s),u,c=Sp(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let h=Sp(t,n.pos,n.bias,r),f=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=f<c.from?T.range(f,d):T.range(d,f)}return l?i.replaceRange(i.main.extend(c.from,c.to)):o&&r==1&&i.ranges.length>1&&(u=IS(i,a.pos))?u:o?i.addRange(c):T.create([c])}}}function IS(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return T.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Xt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=T.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Ca(t.state,ff,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Xt.dragend=t=>(t.inputState.draggedContent=null,!1);function Mp(t,e,n,r){if(n=Ca(t.state,hf,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&MS(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Xt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&Mp(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return Mp(t,e,r,!0),!0}return!1};Xt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Uy?null:e.clipboardData;return n?($y(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(OS(t),!1)};function BS(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function jS(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:Ca(t,ff,e.join(t.lineBreak)),ranges:n,linewise:r}}let Kc=null;Xt.copy=Xt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=jS(t.state);if(!n&&!i)return!1;Kc=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=Uy?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(BS(t,n),!1)};const Gy=Li.define();function qy(t,e){let n=[];for(let r of t.facet(My)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:Gy.of(!0)}):null}function Yy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=qy(t.state,e);n?t.dispatch(n):t.update([])}},10)}_t.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Yy(t)};_t.blur=t=>{t.observer.clearSelectionRange(),Yy(t)};_t.compositionstart=_t.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};_t.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,R.chrome&&R.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};_t.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Xt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return pf(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(R.chrome&&R.android&&(i=Wy.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return R.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),R.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>_t.compositionend(t,e),20),!1};const Np=new Set;function FS(t){Np.has(t)||(Np.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Dp=["pre-wrap","normal","pre-line","break-spaces"];let Ti=!1;function Op(){Ti=!1}class _S{constructor(e){this.lineWrapping=e,this.doc=ee.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Dp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=Dp.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let c=l[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class zS{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class hn{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Rt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof lr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new hn(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var fe=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(fe||(fe={}));const uo=.001;class it{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>uo&&(Ti=!0),this.height=e)}replace(e,n,r){return it.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:c,toB:h}=i[o],f=s.lineAt(a,fe.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,fe.ByPosNoHeight,r,0,0);for(h+=d.to-u,u=d.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,fe.ByPosNoHeight,r,0,0));c+=f.from-a,a=f.from;let g=mf.build(r.setDoc(l),e,c,h);s=Wo(s,s.replace(a,u,g))}return s.updateHeight(r,0)}static empty(){return new xt(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new HS(it.of(e.slice(0,n)),l,it.of(e.slice(r)))}}function Wo(t,e){return t==e?t:(t.constructor!=e.constructor&&(Ti=!0),e)}it.prototype.size=1;class Qy extends it{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new hn(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class xt extends Qy{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new hn(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof xt||i instanceof Fe&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Fe?i=new xt(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):it.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Fe extends it{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),h=o+c.length*a,f=Math.max(r,e-h/2);return new hn(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:c,length:h}=n.doc.line(s+u);return new hn(c,h,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==fe.ByHeight)return this.blockAt(e,r,i,s);if(n==fe.ByPosNoHeight){let{from:d,to:g}=r.doc.lineAt(e);return new hn(d,g-d,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=o+u.length*a,h=u.number-l,f=i+o*h+a*(u.from-s-h);return new hn(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let c=e,h=i;c<=n;){let f=r.doc.lineAt(c);if(c==e){let g=f.number-o;h+=a*g+u*(e-s-g)}let d=a+u*f.length;l(new hn(f.from,f.length,h,d,0)),h+=d,c=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Fe?r[r.length-1]=new Fe(s.length+i):r.push(null,new Fe(i-1))}if(e>0){let s=r[0];s instanceof Fe?r[0]=new Fe(e+s.length):r.unshift(new Fe(e-1),null)}return it.of(r)}decomposeLeft(e,n){n.push(new Fe(e-1),null)}decomposeRight(e,n){n.push(null,new Fe(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Fe(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let c=e.doc.lineAt(o).length;l.length&&l.push(null);let h=i.heights[i.index++];a==-1?a=h:Math.abs(h-a)>=uo&&(a=-2);let f=new xt(c,h);f.outdated=!1,l.push(f),o+=c+1}o<=s&&l.push(null,new Fe(s-o).updateHeight(e,o));let u=it.of(l);return(a<0||Math.abs(u.height-this.height)>=uo||Math.abs(a-this.heightMetrics(e,n).perLine)>=uo)&&(Ti=!0),Wo(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HS extends it{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==fe.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let c=n==fe.ByPosNoHeight?fe.ByPosNoHeight:fe.ByPos;return a?u.join(this.right.lineAt(o,c,r,l,o)):this.left.lineAt(o,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,fe.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&Pp(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),Pp(s,o)}return it.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?it.of(this.break?[e,null,n]:[e,n]):(this.left=Wo(this.left,e),this.right=Wo(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Pp(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Fe&&(r=t[e+1])instanceof Fe&&t.splice(e-1,3,new Fe(n.length+1+r.length))}const WS=5;class mf{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof xt?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new xt(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new Qy(l,i,r)):(l||s||i>=WS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new xt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Fe(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof xt)return e;let n=new xt(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof xt)&&!this.isCovered?this.nodes.push(new xt(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof xt&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new mf(r,e);return ie.spans(n,r,i,s,0),s.finish(r)}}function VS(t,e,n){let r=new US;return ie.compare(t,e,n,r,0),r.changes}class US{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&ao(e,n,this.changes,5)}}function $S(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function KS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function GS(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class hu{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return q.replace({widget:new qS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class qS extends tl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Lp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Rp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Pe.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(df).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new _S(n),this.stateDeco=e.facet(Us).filter(r=>typeof r!="function"),this.heightMap=it.empty().applyChanges(this.stateDeco,ee.empty,this.heightOracle.setDoc(e.doc),[new It(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=q.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new Rl(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Rp:new gf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ss(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Us).filter(c=>typeof c!="function");let i=e.changedRanges,s=It.extendWithRanges(i,VS(r,this.stateDeco,e?e.changes:Re.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Op(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||Ti)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Jk)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Pe.RTL:Pe.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,c=0;if(o.width&&o.height){let{scaleX:S,scaleY:C}=ry(n,o);(S>.005&&Math.abs(this.scaleX-S)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=S,this.scaleY=C,u|=16,l=a=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=ly(e.scrollDOM);let g=(this.printing?GS:$S)(n,this.paddingTop),v=g.top-this.pixelViewport.top,k=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!KS(e.dom))return 0;let y=o.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(l=!0),l||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:b,textHeight:A}=e.docView.measureTextSize();l=C>0&&i.refresh(s,C,b,A,Math.max(5,y/b),S),l&&(e.docView.minWidth=0,u|=16)}v>0&&k>0?c=Math.max(v,k):v<0&&k<0&&(c=Math.min(v,k)),Op();for(let C of this.viewports){let b=C.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?it.empty().applyChanges(this.stateDeco,ee.empty,this.heightOracle,[new It(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new zS(C.from,b))}Ti&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new Rl(i.lineAt(l-r*1e3,fe.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,fe.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,fe.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=h.top:f=h.bottom-c,a=new Rl(i.lineAt(f-1e3/2,fe.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,fe.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Rl(this.heightMap.lineAt(r,fe.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,fe.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,fe.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,fe.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new hu(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=Pe.LTR&&!r)return[];let o=[],a=(c,h,f,d)=>{if(h-c<s)return;let g=this.state.selection.main,v=[g.from];g.empty||v.push(g.to);for(let p of v)if(p>c&&p<h){a(c,p-10,f,d),a(p+10,h,f,d);return}let k=QS(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-c)<s&&Math.abs(p.to-h)<s&&!v.some(y=>p.from<y&&p.to>y));if(!k){if(h<f.to&&n&&r&&n.visibleRanges.some(w=>w.from<=h&&w.to>=h)){let w=n.moveToLineBoundary(T.cursor(h),!1,!0).head;w>c&&(h=w)}let p=this.gapSize(f,c,h,d),y=r||p<2e6?p:2e6;k=new hu(c,h,p,y)}o.push(k)},u=c=>{if(c.length<l||c.type!=Rt.Text)return;let h=YS(c.from,c.to,this.stateDeco);if(h.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,g;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,k,p;if(f!=null){let y=Bl(h,f),w=((this.visibleBottom-this.visibleTop)/2+v)/c.height;k=y-w,p=y+w}else k=(this.visibleTop-c.top-v)/c.height,p=(this.visibleBottom-c.top+v)/c.height;d=Il(h,k),g=Il(h,p)}else{let v=h.total*this.heightOracle.charWidth,k=i*this.heightOracle.charWidth,p=0;if(v>2e6)for(let b of e)b.from>=c.from&&b.from<c.to&&b.size!=b.displaySize&&b.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=b.size-b.displaySize);let y=this.pixelViewport.left+p,w=this.pixelViewport.right+p,S,C;if(f!=null){let b=Bl(h,f),A=((w-y)/2+k)/v;S=b-A,C=b+A}else S=(y-k)/v,C=(w+k)/v;d=Il(h,S),g=Il(h,C)}d>c.from&&a(c.from,d,c,h),g<c.to&&a(g,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return o}gapSize(e,n,r,i){let s=Bl(i,r)-Bl(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){hu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=q.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];ie.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||ss(this.heightMap.lineAt(e,fe.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||ss(this.heightMap.lineAt(this.scaler.fromDOM(e),fe.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return ss(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Rl{constructor(e,n){this.from=e,this.to=n}}function YS(t,e,n){let r=[],i=t,s=0;return ie.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Il({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function Bl(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function QS(t,e){for(let n of t)if(e(n))return n}const Rp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class gf{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,fe.ByPos,e,0,0).top,c=n.lineAt(a,fe.ByPos,e,0,0).bottom;return i+=c-u,{from:o,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof gf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function ss(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new hn(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>ss(i,e)):t._content)}const jl=z.define({combine:t=>t.join(" ")}),Gc=z.define({combine:t=>t.indexOf(!0)>-1}),qc=ir.newName(),Jy=ir.newName(),Xy=ir.newName(),Zy={"&light":"."+Jy,"&dark":"."+Xy};function Yc(t,e,n){return new ir(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const JS=Yc("."+qc,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Zy),XS={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},fu=R.ie&&R.ie_version<=11;class ZS{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Pk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(R.ie&&R.ie_version<=11||R.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&R.android&&e.constructor.EDIT_CONTEXT!==!1&&!(R.chrome&&R.chrome_version<126)&&(this.editContext=new tC(e),e.state.facet(xn)&&(e.contentDOM.editContext=this.editContext.editContext)),fu&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(xn)?r.root.activeElement!=this.dom:!oo(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(R.ie&&R.ie_version<=11||R.android&&R.chrome)&&!r.state.selection.main.empty&&i.focusNode&&ys(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ws(e.root);if(!n)return!1;let r=R.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&eC(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=oo(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Rk(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,XS),fu&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),fu&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&di(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&oo(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new yS(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=Hy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=Ip(n,e.previousSibling||e.target.previousSibling,-1),i=Ip(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(xn)!=e.state.facet(xn)&&(e.view.contentDOM.editContext=e.state.facet(xn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Ip(t,e,n){for(;e;){let r=ae.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Bp(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return ys(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function eC(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Bp(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?Bp(t,n):null}class tC{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:ee.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=T.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((R.mac||R.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:ee.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);pf(e,u,T.single(this.toEditorPos(r.selectionStart,c),this.toEditorPos(r.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(q.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:Oy.of(q.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Ws(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let c=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class _{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Lk(e.parent)||document,this.viewState=new Lp(e.state||ne.create(e)),e.scrollTo&&e.scrollTo.is(Ol)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ri).map(i=>new au(i));for(let i of this.plugins)i.update(this);this.observer=new ZS(this),this.inputState=new SS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new pp(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Xe?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(Gy))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=qy(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(ne.phrases)!=this.state.facet(ne.phrases))return this.setState(s);i=Ho.create(this,s,e),i.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new pi(d.empty?d:T.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(Ol)&&(h=d.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=Vo.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(rs)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(jl)!=i.state.facet(jl)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(Uc))try{f(i)}catch(d){fn(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Hy(this,c)&&u.force&&di(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Lp(e),this.plugins=e.facet(ri).map(r=>new au(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new pp(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(ri),r=e.state.facet(ri);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new au(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){fn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(ly(r))s=-1,l=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,l=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(g){return fn(this.state,g),jp}}),h=Ho.create(this,this.state,[]),f=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=jp)try{let g=u[d];g.write&&g.write(c[d],this)}catch(g){fn(this.state,g)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(g>1||g<-1){i=i+g,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(Uc))o(n)}get themeClasses(){return qc+" "+(this.state.facet(Gc)?Xy:Jy)+" "+this.state.facet(jl)}updateAttrs(){let e=Fp(this,Py,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(xn)?"true":"false",class:"cm-content",style:`${R.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Fp(this,df,n);let r=this.observer.ignore(()=>{let i=_c(this.contentDOM,this.contentAttrs,n),s=_c(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(_.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(rs);let e=this.state.facet(_.cspNonce);ir.mount(this.root,this.styleModules.concat(JS).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return cu(this,e,wp(this,e,n,r))}moveByGroup(e,n){return cu(this,e,wp(this,e,n,r=>dS(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return T.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return fS(this,e,n,r)}moveVertically(e,n,r){return cu(this,e,pS(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Fy(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[$n.find(s,e-i.from,-1,n)];return ka(r,l.dir==Pe.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Ny)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>nC)return ky(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||xy(s.isolates,r=dp(this,e))))return s.order;r||(r=dp(this,e));let i=qk(e.text,n,r);return this.bidiCache.push(new Vo(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||R.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{iy(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Ol.of(new pi(typeof e=="number"?T.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Ol.of(new pi(T.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return bt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return bt.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=ir.newName(),i=[jl.of(r),rs.of(Yc(`.${r}`,e))];return n&&n.dark&&i.push(Gc.of(!0)),i}static baseTheme(e){return ya.lowest(rs.of(Yc("."+qc,e,Zy)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ae.get(r)||ae.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}_.styleModule=rs;_.inputHandler=Ty;_.clipboardInputFilter=hf;_.clipboardOutputFilter=ff;_.scrollHandler=Dy;_.focusChangeEffect=My;_.perLineTextDirection=Ny;_.exceptionSink=Ey;_.updateListener=Uc;_.editable=xn;_.mouseSelectionStyle=by;_.dragMovesSelection=Ay;_.clickAddsSelectionRange=Cy;_.decorations=Us;_.outerDecorations=Ly;_.atomicRanges=il;_.bidiIsolatedRanges=Ry;_.scrollMargins=Iy;_.darkTheme=Gc;_.cspNonce=z.define({combine:t=>t.length?t[0]:""});_.contentAttributes=df;_.editorAttributes=Py;_.lineWrapping=_.contentAttributes.of({class:"cm-lineWrapping"});_.announce=ce.define();const nC=4096,jp={};class Vo{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Pe.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new Vo(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function Fp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&Fc(l,n)}return n}const rC=R.mac?"mac":R.windows?"win":R.linux?"linux":"key";function iC(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function Fl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const sC=ya.default(_.domEventHandlers({keydown(t,e){return nv(tv(e.state),t,e,"editor")}})),ev=z.define({enables:sC}),_p=new WeakMap;function tv(t){let e=t.facet(ev),n=_p.get(e);return n||_p.set(e,n=aC(e.reduce((r,i)=>r.concat(i),[]))),n}function lC(t,e,n){return nv(tv(t.state),e,t,n)}let Hn=null;const oC=4e3;function aC(t,e=rC){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,c)=>{var h,f;let d=n[l]||(n[l]=Object.create(null)),g=o.split(/ (?!$)/).map(p=>iC(p,e));for(let p=1;p<g.length;p++){let y=g.slice(0,p).join(" ");i(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let S=Hn={view:w,prefix:y,scope:l};return setTimeout(()=>{Hn==S&&(Hn=null)},oC),!0}]})}let v=g.join(" ");i(v,!1);let k=d[v]||(d[v]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});a&&k.run.push(a),u&&(k.preventDefault=!0),c&&(k.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=l;for(let f in c)c[f].run.push(d=>h(d,Qc))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Qc=null;function nv(t,e,n,r){Qc=e;let i=Mk(e),s=H0(i,0),l=W0(s)==i.length&&i!=" ",o="",a=!1,u=!1,c=!1;Hn&&Hn.view==n&&Hn.scope==r&&(o=Hn.prefix+" ",Vy.indexOf(e.keyCode)<0&&(u=!0,Hn=null));let h=new Set,f=k=>{if(k){for(let p of k.run)if(!h.has(p)&&(h.add(p),p(n)))return k.stopPropagation&&(c=!0),!0;k.preventDefault&&(k.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],g,v;return d&&(f(d[o+Fl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(R.windows&&e.ctrlKey&&e.altKey)&&!(R.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=sr[e.keyCode])&&g!=i?(f(d[o+Fl(g,e,!0)])||e.shiftKey&&(v=Hs[e.keyCode])!=i&&v!=g&&f(d[o+Fl(v,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(d[o+Fl(i,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),Qc=null,a}function uC(){return hC}const cC=q.line({class:"cm-activeLine"}),hC=bt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(cC.range(i.from)),e=i.from)}return q.set(n)}},{decorations:t=>t.decorations}),zp=z.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Uo(t,e){let n=t.plugin(rv),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const rv=bt.fromClass(class{constructor(t){this.input=t.state.facet($o),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(zp);this.top=new _l(t,!0,e.topContainer),this.bottom=new _l(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(zp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new _l(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new _l(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet($o);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),o.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:l).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>_.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class _l{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Hp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Hp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Hp(t){let e=t.nextSibling;return t.remove(),e}const $o=z.define({enables:rv});class or extends Ai{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}or.prototype.elementClass="";or.prototype.toDOM=void 0;or.prototype.mapMode=kt.TrackBefore;or.prototype.startSide=or.prototype.endSide=-1;or.prototype.point=!0;const du=z.define(),fC=z.define(),dC={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ie.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},xs=z.define();function pC(t){return[iv(),xs.of({...dC,...t})]}const Wp=z.define({combine:t=>t.some(e=>e)});function iv(t){return[mC]}const mC=bt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(xs).map(e=>new Up(t,e)),this.fixed=!t.state.facet(Wp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Wp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=ie.iter(this.view.state.facet(du),this.view.viewport.from),r=[],i=this.gutters.map(s=>new gC(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==Rt.Text&&l){Jc(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==Rt.Text){Jc(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(xs),n=t.state.facet(xs),r=t.docChanged||t.heightChanged||t.viewportChanged||!ie.eq(t.startState.facet(du),t.state.facet(du),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new Up(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>_.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Pe.LTR?{left:r,right:i}:{right:r,left:i}})});function Vp(t){return Array.isArray(t)?t:[t]}function Jc(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class gC{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ie.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new sv(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Jc(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(fC)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Up{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=Vp(n.markers(e)),n.initialSpacer&&(this.spacer=new sv(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=Vp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ie.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class sv{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),yC(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let h=l;h<this.markers.length;h++)if(this.markers[h].compare(a)){o=h,u=!0;break}}else o=this.markers.length;for(;l<o;){let c=this.markers[l++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function yC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const vC=z.define(),wC=z.define(),ii=z.define({combine(t){return wa(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class pu extends or{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function mu(t,e){return t.state.facet(ii).formatNumber(e,t.state)}const xC=xs.compute([ii],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(vC)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new pu(mu(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(wC)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(ii)!=e.state.facet(ii),initialSpacer(e){return new pu(mu(e,$p(e.state.doc.lines)))},updateSpacer(e,n){let r=mu(n.view,$p(n.view.state.doc.lines));return r==e.number?e:new pu(r)},domEventHandlers:t.facet(ii).domEventHandlers,side:"before"}));function kC(t={}){return[ii.of(t),iv(),xC]}function $p(t){let e=9;for(;e<t;)e=e*10+9;return e}const SC=1024;let CC=0;class gu{constructor(e,n){this.from=e,this.to=n}}class X{constructor(e={}){this.id=CC++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=mt.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}X.closedBy=new X({deserialize:t=>t.split(" ")});X.openedBy=new X({deserialize:t=>t.split(" ")});X.group=new X({deserialize:t=>t.split(" ")});X.isolate=new X({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});X.contextHash=new X({perNode:!0});X.lookAhead=new X({perNode:!0});X.mounted=new X({perNode:!0});class Ko{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[X.mounted.id]}}const AC=Object.create(null);class mt{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):AC,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new mt(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(X.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(X.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}mt.none=new mt("",Object.create(null),0,8);class yf{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new mt(r.name,i,r.id,r.flags):r)}return new yf(n)}}const zl=new WeakMap,Kp=new WeakMap;var ze;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(ze||(ze={}));class ge{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=Ko.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Zc(this.topNode,e)}cursorAt(e,n=0,r=0){let i=zl.get(this)||this.topNode,s=new Zc(i);return s.moveTo(e,n),zl.set(this,s._tree),s}get topNode(){return new Bt(this,0,0,null)}resolve(e,n=0){let r=$s(zl.get(this)||this.topNode,e,n,!1);return zl.set(this,r),r}resolveInner(e,n=0){let r=$s(Kp.get(this)||this.topNode,e,n,!0);return Kp.set(this,r),r}resolveStack(e,n=0){return TC(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&ze.IncludeAnonymous)>0;for(let a=this.cursor(l|ze.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:xf(mt.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new ge(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new ge(mt.none,n,r,i)))}static build(e){return MC(e)}}ge.empty=new ge(mt.none,[],[],0);class vf{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new vf(this.buffer,this.index)}}class ar{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return mt.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(lv(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new ar(s,l,this.set)}}function lv(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function $s(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Bt&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:ze.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Bt&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class ov{cursor(e=0){return new Zc(this,e)}getChild(e,n=null,r=null){let i=Gp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Gp(this,e,n,r)}resolve(e,n=0){return $s(this,e,n,!1)}resolveInner(e,n=0){return $s(this,e,n,!0)}matchContext(e){return Xc(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Bt extends ov{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let c=o[e],h=a[e]+l.from;if(lv(i,r,h,h+c.length)){if(c instanceof ar){if(s&ze.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,r-h,i);if(f>-1)return new Kn(new bC(l,c,e,h),null,f)}else if(s&ze.IncludeAnonymous||!c.type.isAnonymous||wf(c)){let f;if(!(s&ze.IgnoreMounts)&&(f=Ko.get(c))&&!f.overlay)return new Bt(f.tree,h,e,l);let d=new Bt(c,h,e,l);return s&ze.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&ze.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&ze.IgnoreOverlays)&&(i=Ko.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Bt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Gp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Xc(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class bC{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Kn extends ov{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Kn(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&ze.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Kn(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Kn(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Kn(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new ge(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function av(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Bt&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new EC(i,n)}class EC{constructor(e,n){this.heads=e,this.node=n}get next(){return av(this.heads)}}function TC(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Bt?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=Ko.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Bt(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push($s(o,e,n,!1))}}return i?av(i):r}class Zc{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Bt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Bt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&ze.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ze.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ze.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&ze.IncludeAnonymous||o instanceof ar||!o.type.isAnonymous||wf(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Kn(this.buffer,n,this.stack[i]);return this.bufferNode=new Kn(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Xc(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Xc(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function wf(t){return t.children.some(e=>e instanceof ar||!e.type.isAnonymous||wf(e))}function MC(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=SC,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new vf(n,n.length):n,a=r.types,u=0,c=0;function h(C,b,A,D,W,B){let{id:$,start:V,end:Q,size:se}=o,xe=c,tt=u;for(;se<0;)if(o.next(),se==-1){let Z=s[$];A.push(Z),D.push(V-C);return}else if(se==-3){u=$;return}else if(se==-4){c=$;return}else throw new RangeError(`Unrecognized record size: ${se}`);let Ht=a[$],L,U,F=V-C;if(Q-V<=i&&(U=k(o.pos-b,W))){let Z=new Uint16Array(U.size-U.skip),K=o.pos-U.size,Ce=Z.length;for(;o.pos>K;)Ce=p(U.start,Z,Ce);L=new ar(Z,Q-U.start,r),F=U.start-C}else{let Z=o.pos-se;o.next();let K=[],Ce=[],Ae=$>=l?$:-1,Me=0,ot=Q;for(;o.pos>Z;)Ae>=0&&o.id==Ae&&o.size>=0?(o.end<=ot-i&&(g(K,Ce,V,Me,o.end,ot,Ae,xe,tt),Me=K.length,ot=o.end),o.next()):B>2500?f(V,Z,K,Ce):h(V,Z,K,Ce,Ae,B+1);if(Ae>=0&&Me>0&&Me<K.length&&g(K,Ce,V,Me,V,ot,Ae,xe,tt),K.reverse(),Ce.reverse(),Ae>-1&&Me>0){let Ne=d(Ht,tt);L=xf(Ht,K,Ce,0,K.length,0,Q-V,Ne,Ne)}else L=v(Ht,K,Ce,Q-V,xe-Q,tt)}A.push(L),D.push(F)}function f(C,b,A,D){let W=[],B=0,$=-1;for(;o.pos>b;){let{id:V,start:Q,end:se,size:xe}=o;if(xe>4)o.next();else{if($>-1&&Q<$)break;$<0&&($=se-i),W.push(V,Q,se),B++,o.next()}}if(B){let V=new Uint16Array(B*4),Q=W[W.length-2];for(let se=W.length-3,xe=0;se>=0;se-=3)V[xe++]=W[se],V[xe++]=W[se+1]-Q,V[xe++]=W[se+2]-Q,V[xe++]=xe;A.push(new ar(V,W[2]-Q,r)),D.push(Q-C)}}function d(C,b){return(A,D,W)=>{let B=0,$=A.length-1,V,Q;if($>=0&&(V=A[$])instanceof ge){if(!$&&V.type==C&&V.length==W)return V;(Q=V.prop(X.lookAhead))&&(B=D[$]+V.length+Q)}return v(C,A,D,W,B,b)}}function g(C,b,A,D,W,B,$,V,Q){let se=[],xe=[];for(;C.length>D;)se.push(C.pop()),xe.push(b.pop()+A-W);C.push(v(r.types[$],se,xe,B-W,V-B,Q)),b.push(W-A)}function v(C,b,A,D,W,B,$){if(B){let V=[X.contextHash,B];$=$?[V].concat($):[V]}if(W>25){let V=[X.lookAhead,W];$=$?[V].concat($):[V]}return new ge(C,b,A,D,$)}function k(C,b){let A=o.fork(),D=0,W=0,B=0,$=A.end-i,V={size:0,start:0,skip:0};e:for(let Q=A.pos-C;A.pos>Q;){let se=A.size;if(A.id==b&&se>=0){V.size=D,V.start=W,V.skip=B,B+=4,D+=4,A.next();continue}let xe=A.pos-se;if(se<0||xe<Q||A.start<$)break;let tt=A.id>=l?4:0,Ht=A.start;for(A.next();A.pos>xe;){if(A.size<0)if(A.size==-3)tt+=4;else break e;else A.id>=l&&(tt+=4);A.next()}W=Ht,D+=se,B+=tt}return(b<0||D==C)&&(V.size=D,V.start=W,V.skip=B),V.size>4?V:void 0}function p(C,b,A){let{id:D,start:W,end:B,size:$}=o;if(o.next(),$>=0&&D<l){let V=A;if($>4){let Q=o.pos-($-4);for(;o.pos>Q;)A=p(C,b,A)}b[--A]=V,b[--A]=B-C,b[--A]=W-C,b[--A]=D}else $==-3?u=D:$==-4&&(c=D);return A}let y=[],w=[];for(;o.pos>0;)h(t.start||0,t.bufferStart||0,y,w,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:y.length?w[0]+y[0].length:0;return new ge(a[t.topID],y.reverse(),w.reverse(),S)}const qp=new WeakMap;function co(t,e){if(!t.isAnonymous||e instanceof ar||e.type!=t)return 1;let n=qp.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof ge)){n=1;break}n+=co(t,r)}qp.set(e,n)}return n}function xf(t,e,n,r,i,s,l,o,a){let u=0;for(let g=r;g<i;g++)u+=co(t,e[g]);let c=Math.ceil(u*1.5/8),h=[],f=[];function d(g,v,k,p,y){for(let w=k;w<p;){let S=w,C=v[w],b=co(t,g[w]);for(w++;w<p;w++){let A=co(t,g[w]);if(b+A>=c)break;b+=A}if(w==S+1){if(b>c){let A=g[S];d(A.children,A.positions,0,A.children.length,v[S]+y);continue}h.push(g[S])}else{let A=v[w-1]+g[w-1].length-C;h.push(xf(t,g,v,S,w,C,A,null,a))}f.push(C+y-s)}}return d(e,n,r,i,0),(o||a)(h,f,l)}class Er{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Er(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let c=o<n.length?n[o]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;l&&l.from<h;){let f=l;if(a>=f.from||h<=f.to||u){let d=Math.max(f.from,a)-u,g=Math.min(f.to,h)-u;f=d>=g?null:new Er(d,g,f.tree,f.offset+u,o>0,!!c)}if(f&&i.push(f),l.to>h)break;l=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}}class uv{startParse(e,n,r){return typeof e=="string"&&(e=new NC(e)),r=r?r.length?r.map(i=>new gu(i.from,i.to)):[new gu(0,0)]:[new gu(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class NC{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new X({perNode:!0});let DC=0;class Ot{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=DC++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Ot&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new Ot(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Go(e);return r=>r.modified.indexOf(n)>-1?r:Go.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let OC=0;class Go{constructor(e){this.name=e,this.instances=[],this.id=OC++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&PC(n,o.modified));if(r)return r;let i=[],s=new Ot(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=LC(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(Go.get(o,a));return s}}function PC(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function LC(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function RC(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let h=0;;){if(o=="..."&&h>0&&h+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let d=i[h++];if(h==i.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);o=i.slice(h)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new qo(r,l,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return cv.add(e)}const cv=new X;class qo{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}qo.empty=new qo([],2,null);function hv(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function IC(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function BC(t,e,n,r=0,i=t.length){let s=new jC(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class jC{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(l)));let u=i,c=FC(e)||qo.empty,h=IC(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,o),u),c.opaque)return;let f=e.tree&&e.tree.prop(X.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+o,1),g=this.highlighters.filter(k=>!k.scope||k.scope(f.tree.type)),v=e.firstChild();for(let k=0,p=o;;k++){let y=k<f.overlay.length?f.overlay[k]:null,w=y?y.from+o:a,S=Math.max(n,p),C=Math.min(r,w);if(S<C&&v)for(;e.from<C&&(this.highlightRange(e,S,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>r)break;p=y.to+o,p>n&&(this.highlightRange(d.cursor(),Math.max(n,y.from+o),Math.min(r,p),"",g),this.startSpan(Math.min(r,p),u))}v&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function FC(t){let e=t.type.prop(cv);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const O=Ot.define,Hl=O(),Bn=O(),Yp=O(Bn),Qp=O(Bn),jn=O(),Wl=O(jn),yu=O(jn),on=O(),mr=O(on),sn=O(),ln=O(),eh=O(),Qi=O(eh),Vl=O(),N={comment:Hl,lineComment:O(Hl),blockComment:O(Hl),docComment:O(Hl),name:Bn,variableName:O(Bn),typeName:Yp,tagName:O(Yp),propertyName:Qp,attributeName:O(Qp),className:O(Bn),labelName:O(Bn),namespace:O(Bn),macroName:O(Bn),literal:jn,string:Wl,docString:O(Wl),character:O(Wl),attributeValue:O(Wl),number:yu,integer:O(yu),float:O(yu),bool:O(jn),regexp:O(jn),escape:O(jn),color:O(jn),url:O(jn),keyword:sn,self:O(sn),null:O(sn),atom:O(sn),unit:O(sn),modifier:O(sn),operatorKeyword:O(sn),controlKeyword:O(sn),definitionKeyword:O(sn),moduleKeyword:O(sn),operator:ln,derefOperator:O(ln),arithmeticOperator:O(ln),logicOperator:O(ln),bitwiseOperator:O(ln),compareOperator:O(ln),updateOperator:O(ln),definitionOperator:O(ln),typeOperator:O(ln),controlOperator:O(ln),punctuation:eh,separator:O(eh),bracket:Qi,angleBracket:O(Qi),squareBracket:O(Qi),paren:O(Qi),brace:O(Qi),content:on,heading:mr,heading1:O(mr),heading2:O(mr),heading3:O(mr),heading4:O(mr),heading5:O(mr),heading6:O(mr),contentSeparator:O(on),list:O(on),quote:O(on),emphasis:O(on),strong:O(on),link:O(on),monospace:O(on),strikethrough:O(on),inserted:O(),deleted:O(),changed:O(),invalid:O(),meta:Vl,documentMeta:O(Vl),annotation:O(Vl),processingInstruction:O(Vl),definition:Ot.defineModifier("definition"),constant:Ot.defineModifier("constant"),function:Ot.defineModifier("function"),standard:Ot.defineModifier("standard"),local:Ot.defineModifier("local"),special:Ot.defineModifier("special")};for(let t in N){let e=N[t];e instanceof Ot&&(e.name=t)}hv([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}]);var vu;const si=new X;function _C(t){return z.define({combine:t?e=>e.concat(t):void 0})}const zC=new X;class Gt{constructor(e,n,r=[],i=""){this.data=e,this.name=i,ne.prototype.hasOwnProperty("tree")||Object.defineProperty(ne.prototype,"tree",{get(){return Et(this)}}),this.parser=n,this.extension=[ur.of(this),ne.languageData.of((s,l,o)=>{let a=Jp(s,l,o),u=a.type.prop(si);if(!u)return[];let c=s.facet(u),h=a.type.prop(zC);if(h){let f=a.resolve(l-a.from,o);for(let d of h)if(d.test(f,s)){let g=s.facet(d.facet);return d.type=="replace"?g:g.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return Jp(e,n,r).type.prop(si)==this.data}findRegions(e){let n=e.facet(ur);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(si)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(X.mounted);if(o){if(o.tree.prop(si)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof ge&&i(u,s.positions[a]+l)}};return i(Et(e),0),r}get allowsNesting(){return!0}}Gt.setState=ce.define();function Jp(t,e,n){let r=t.facet(ur),i=Et(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,ze.ExcludeBuffers))s.type.isTop&&(i=s);return i}function Et(t){let e=t.field(Gt.state,!1);return e?e.tree:ge.empty}class HC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ji=null;class Mi{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Mi(e,n,[],ge.empty,0,r,[],null)}startParse(){return this.parser.startParse(new HC(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=ge.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Er.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Er.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ji;Ji=this;try{return e()}finally{Ji=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Xp(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,h,f)=>a.push({fromA:u,toA:c,fromB:h,toB:f})),r=Er.applyChanges(r,a),i=ge.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&o.push({from:c,to:h})}}}return new Mi(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Xp(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends uv{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Ji;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new ge(mt.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ji}}function Xp(t,e,n){return Er.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Ni{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Ni(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Mi.create(e.facet(ur).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Ni(r)}}Gt.state=Zt.define({create:Ni.init,update(t,e){for(let n of e.effects)if(n.is(Gt.setState))return n.value;return e.startState.facet(ur)!=e.state.facet(ur)?Ni.init(e.state):t.apply(e)}});let fv=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(fv=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const wu=typeof navigator<"u"&&(!((vu=navigator.scheduling)===null||vu===void 0)&&vu.isInputPending)?()=>navigator.scheduling.isInputPending():null,WC=bt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Gt.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Gt.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=fv(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Gt.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!wu?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>wu&&wu()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Gt.setState.of(new Ni(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>fn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ur=z.define({combine(t){return t.length?t[0]:null},enables:t=>[Gt.state,WC,_.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),VC=z.define(),kf=z.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Br(t){let e=t.facet(kf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Ks(t,e){let n="",r=t.tabSize,i=t.facet(kf)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function Sf(t,e){t instanceof ne&&(t=new Aa(t));for(let r of t.state.facet(VC)){let i=r(t,e);if(i!==void 0)return i}let n=Et(t.state);return n.length>=e?UC(t,n,e):null}class Aa{constructor(e,n={}){this.state=e,this.options=n,this.unit=Br(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return xa(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const dv=new X;function UC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return pv(r,t,n)}function pv(t,e,n){for(let r=t;r;r=r.next){let i=KC(r.node);if(i)return i(Cf.create(e,n,r))}return 0}function $C(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function KC(t){let e=t.type.prop(dv);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(X.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>QC(l,!0,1,void 0,s&&!$C(l)?i.from:void 0)}return t.parent==null?GC:null}function GC(){return 0}class Cf extends Aa{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new Cf(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(qC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return pv(this.context.next,this.base,this.pos)}}function qC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function YC(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function QC(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=YC(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const JC=200;function XC(){return ne.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+JC)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let c=l.doc.lineAt(u);if(c.from==o)continue;o=c.from;let h=Sf(l,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],d=Ks(l,h);f!=d&&a.push({from:c.from,to:c.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const ZC=z.define(),e2=new X;function t2(t,e,n){let r=Et(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(e2);if(a&&(o.to<r.length-50||r.length==t.doc.length||!n2(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function n2(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Zp(t,e,n){for(let r of t.facet(ZC)){let i=r(t,e,n);if(i)return i}return t2(t,e,n)}function mv(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const gv=ce.define({map:mv}),Af=ce.define({map:mv}),Yo=Zt.define({create(){return q.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=em(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(gv)&&!r2(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(yv),i=r?q.replace({widget:new l2(r(e.state,n.value))}):tm;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(Af)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=em(t,e.selection.main.head)),t},provide:t=>_.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(tm.range(r,i))}return q.set(e,!0)}});function em(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function th(t,e,n){var r;let i=null;return(r=t.field(Yo,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function r2(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const i2={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},yv=z.define({combine(t){return wa(t,i2)}});function s2(t){return[Yo,u2]}function vv(t,e){let{state:n}=t,r=n.facet(yv),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=th(t.state,o.from,o.to);a&&t.dispatch({effects:Af.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const tm=q.replace({widget:new class extends tl{toDOM(t){return vv(t,null)}}});class l2 extends tl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return vv(e,this.value)}}const o2={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class xu extends or{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function a2(t={}){let e={...o2,...t},n=new xu(e,!0),r=new xu(e,!1),i=bt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(ur)!=l.state.facet(ur)||l.startState.field(Yo,!1)!=l.state.field(Yo,!1)||Et(l.startState)!=Et(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new Pr;for(let a of l.viewportLineBlocks){let u=th(l.state,a.from,a.to)?r:Zp(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,pC({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||ie.empty},initialSpacer(){return new xu(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=th(l.state,o.from,o.to);if(u)return l.dispatch({effects:Af.of(u)}),!0;let c=Zp(l.state,o.from,o.to);return c?(l.dispatch({effects:gv.of(c)}),!0):!1}}}),s2()]}const u2=_.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ba{constructor(e,n){this.specs=e;let r;function i(o){let a=ir.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof Gt?o=>o.prop(si)==l.data:l?o=>o==l:void 0,this.style=hv(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new ir(r):null,this.themeType=n.themeType}static define(e,n){return new ba(e,n||{})}}const nh=z.define(),c2=z.define({combine(t){return t.length?[t[0]]:null}});function ku(t){let e=t.facet(nh);return e.length?e:t.facet(c2)}function h2(t,e){let n=[d2],r;return t instanceof ba&&(t.module&&n.push(_.styleModule.of(t.module)),r=t.themeType),r?n.push(nh.computeN([_.darkTheme],i=>i.facet(_.darkTheme)==(r=="dark")?[t]:[])):n.push(nh.of(t)),n}class f2{constructor(e){this.markCache=Object.create(null),this.tree=Et(e.state),this.decorations=this.buildDeco(e,ku(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Et(e.state),r=ku(e.state),i=r!=ku(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return q.none;let r=new Pr;for(let{from:i,to:s}of e.visibleRanges)BC(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=q.mark({class:a})))},i,s);return r.finish()}}const d2=ya.high(bt.fromClass(f2,{decorations:t=>t.decorations})),p2=_.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),wv=1e4,xv="()[]{}",kv=z.define({combine(t){return wa(t,{afterCursor:!0,brackets:xv,maxScanDistance:wv,renderMatch:y2})}}),m2=q.mark({class:"cm-matchingBracket"}),g2=q.mark({class:"cm-nonmatchingBracket"});function y2(t){let e=[],n=t.matched?m2:g2;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const v2=Zt.define({create(){return q.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(kv);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=dn(e.state,i.head,-1,r)||i.head>0&&dn(e.state,i.head-1,1,r)||r.afterCursor&&(dn(e.state,i.head,1,r)||i.head<e.state.doc.length&&dn(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return q.set(n,!0)},provide:t=>_.decorations.from(t)}),w2=[v2,p2];function x2(t={}){return[kv.of(t),w2]}const k2=new X;function rh(t,e,n){let r=t.prop(e<0?X.openedBy:X.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function ih(t){let e=t.type.prop(k2);return e?e(t.node):t}function dn(t,e,n,r={}){let i=r.maxScanDistance||wv,s=r.brackets||xv,l=Et(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=rh(a.type,n,s);if(u&&a.from<a.to){let c=ih(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return S2(t,e,n,a,c,u,s)}}return C2(t,e,n,l,o.type,i,s)}function S2(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,c=o==null?void 0:o.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=ih(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(rh(c.type,n,l))u++;else if(rh(c.type,-n,l)){if(u==0){let h=ih(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function C2(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;n<0&&(f+=d.length);let g=e+f*n;for(let v=n>0?0:d.length-1,k=n>0?d.length:-1;v!=k;v+=n){let p=l.indexOf(d[v]);if(!(p<0||r.resolveInner(g+v,1).type!=i))if(p%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:g+v,to:g+v+1},matched:p>>1==a>>1};h--}}n>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}function nm(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class Sv{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=nm(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:nm(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function A2(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||b2,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Tf,mergeTokens:t.mergeTokens!==!1}}function b2(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const rm=new WeakMap;class bf extends Gt{constructor(e){let n=_C(e.languageData),r=A2(e),i,s=new class extends uv{createParse(l,o,a){return new T2(i,l,o,a)}};super(n,s,[],e.name),this.topNode=D2(n,this),i=this,this.streamParser=r,this.stateAfter=new X({perNode:!0}),this.tokenTable=e.tokenTable?new Ev(r.tokenTable):N2}static define(e){return new bf(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=rm.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=Ef(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let c=r?r(a.from):-1,h=new Sv(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;h.pos<u-a.from;)Av(this.streamParser.token,h,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&rm.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function Ef(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof ge&&a<i&&Ef(t,o,a,r,i);if(u)return u}return null}function Cv(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof ge){if(!(a=Cv(t,o,n-l,r-l,i)))break;return i?new ge(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function E2(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&Ef(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=Cv(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Br(i):4),tree:ge.empty}}class T2{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=Mi.get(),l=i[0].from,{state:o,tree:a}=E2(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Br(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Mi.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new Sv(n,e?e.state.tabSize:4,e?Br(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=Av(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=ge.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:M2,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new ge(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new ge(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Av(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const Tf=Object.create(null),Gs=[mt.none],M2=new yf(Gs),im=[],sm=Object.create(null),bv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])bv[t]=Tv(Tf,e);class Ev{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),bv)}resolve(e){return e?this.table[e]||(this.table[e]=Tv(this.extra,e)):0}}const N2=new Ev(Tf);function Su(t,e){im.indexOf(t)>-1||(im.push(t),console.warn(e))}function Tv(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let c=t[u]||N[u];c?typeof c=="function"?a.length?a=a.map(c):Su(u,`Modifier ${u} used at start of tag`):a.length?Su(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:Su(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=sm[i];if(s)return s.id;let l=sm[i]=mt.define({id:Gs.length,name:r,props:[RC({[r]:n})]});return Gs.push(l),l.id}function D2(t,e){let n=mt.define({id:Gs.length,name:"Document",props:[si.add(()=>t),dv.add(()=>r=>e.getIndent(r))],top:!0});return Gs.push(n),n}Pe.RTL,Pe.LTR;const O2="#e5c07b",lm="#e06c75",P2="#56b6c2",L2="#ffffff",ho="#abb2bf",sh="#7d8799",R2="#61afef",I2="#98c379",om="#d19a66",B2="#c678dd",j2="#21252b",am="#2c313a",um="#282c34",Cu="#353a42",F2="#3E4451",cm="#528bff",_2=_.theme({"&":{color:ho,backgroundColor:um},".cm-content":{caretColor:cm},".cm-cursor, .cm-dropCursor":{borderLeftColor:cm},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:F2},".cm-panels":{backgroundColor:j2,color:ho},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:um,color:sh,border:"none"},".cm-activeLineGutter":{backgroundColor:am},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Cu},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Cu,borderBottomColor:Cu},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:am,color:ho}}},{dark:!0}),z2=ba.define([{tag:N.keyword,color:B2},{tag:[N.name,N.deleted,N.character,N.propertyName,N.macroName],color:lm},{tag:[N.function(N.variableName),N.labelName],color:R2},{tag:[N.color,N.constant(N.name),N.standard(N.name)],color:om},{tag:[N.definition(N.name),N.separator],color:ho},{tag:[N.typeName,N.className,N.number,N.changed,N.annotation,N.modifier,N.self,N.namespace],color:O2},{tag:[N.operator,N.operatorKeyword,N.url,N.escape,N.regexp,N.link,N.special(N.string)],color:P2},{tag:[N.meta,N.comment],color:sh},{tag:N.strong,fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.link,color:sh,textDecoration:"underline"},{tag:N.heading,fontWeight:"bold",color:lm},{tag:[N.atom,N.bool,N.special(N.variableName)],color:om},{tag:[N.processingInstruction,N.string,N.inserted],color:I2},{tag:N.invalid,color:L2}]),H2=[_2,h2(z2)],W2=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=Nf(t.state,n.from);return r.line?V2(t):r.block?$2(t):!1};function Mf(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const V2=Mf(q2,0),U2=Mf(Mv,0),$2=Mf((t,e)=>Mv(t,e,G2(e)),0);function Nf(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Xi=50;function K2(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Xi,r),l=t.sliceDoc(i,i+Xi),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let c,h;i-r<=2*Xi?c=h=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+Xi),h=t.sliceDoc(i-Xi,i));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(h)[0].length,g=h.length-d-n.length;return c.slice(f,f+e.length)==e&&h.slice(g,g+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(h.charAt(g-1))?1:0}}:null}function G2(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Mv(t,e,n=e.selection.ranges){let r=n.map(s=>Nf(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>K2(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:c}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function q2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=Nf(e,s).line;if(u){for(let c=s;c<=l;){let h=e.doc.lineAt(c);if(h.from>i&&(s==l||l>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,g=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),r.push({line:h,comment:g,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(a<1e9)for(let c=o;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:c,single:h}of r)(h||!c)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,c=u+a.length;l.text[c-l.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}function Ri(t,e){return T.create(t.ranges.map(e),t.mainIndex)}function en(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function tn({state:t,dispatch:e},n){let r=Ri(t.selection,n);return r.eq(t.selection,!0)?!1:(e(en(t,r)),!0)}function Ea(t,e){return T.cursor(e?t.to:t.from)}function Nv(t,e){return tn(t,n=>n.empty?t.moveByChar(n,e):Ea(n,e))}function et(t){return t.textDirectionAt(t.state.selection.main.head)==Pe.LTR}const Dv=t=>Nv(t,!et(t)),Ov=t=>Nv(t,et(t));function Pv(t,e){return tn(t,n=>n.empty?t.moveByGroup(n,e):Ea(n,e))}const Y2=t=>Pv(t,!et(t)),Q2=t=>Pv(t,et(t));function J2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Ta(t,e,n){let r=Et(t).resolveInner(e.head),i=n?X.closedBy:X.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;J2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?dn(t,r.from,1):dn(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,T.cursor(o,n?-1:1)}const X2=t=>tn(t,e=>Ta(t.state,e,!et(t))),Z2=t=>tn(t,e=>Ta(t.state,e,et(t)));function Lv(t,e){return tn(t,n=>{if(!n.empty)return Ea(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const Rv=t=>Lv(t,!1),Iv=t=>Lv(t,!0);function Bv(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(_.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function jv(t,e){let n=Bv(t),{state:r}=t,i=Ri(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):Ea(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=_.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(en(r,i),{effects:s}),!0}const hm=t=>jv(t,!1),lh=t=>jv(t,!0);function dr(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=T.cursor(r.from+s))}return i}const eA=t=>tn(t,e=>dr(t,e,!0)),tA=t=>tn(t,e=>dr(t,e,!1)),nA=t=>tn(t,e=>dr(t,e,!et(t))),rA=t=>tn(t,e=>dr(t,e,et(t))),iA=t=>tn(t,e=>T.cursor(t.lineBlockAt(e.head).from,1)),sA=t=>tn(t,e=>T.cursor(t.lineBlockAt(e.head).to,-1));function lA(t,e,n){let r=!1,i=Ri(t.selection,s=>{let l=dn(t,s.head,-1)||dn(t,s.head,1)||s.head>0&&dn(t,s.head-1,1)||s.head<t.doc.length&&dn(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return T.cursor(o)});return r?(e(en(t,i)),!0):!1}const oA=({state:t,dispatch:e})=>lA(t,e);function zt(t,e){let n=Ri(t.state.selection,r=>{let i=e(r);return T.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(en(t.state,n)),!0)}function Fv(t,e){return zt(t,n=>t.moveByChar(n,e))}const _v=t=>Fv(t,!et(t)),zv=t=>Fv(t,et(t));function Hv(t,e){return zt(t,n=>t.moveByGroup(n,e))}const aA=t=>Hv(t,!et(t)),uA=t=>Hv(t,et(t)),cA=t=>zt(t,e=>Ta(t.state,e,!et(t))),hA=t=>zt(t,e=>Ta(t.state,e,et(t)));function Wv(t,e){return zt(t,n=>t.moveVertically(n,e))}const Vv=t=>Wv(t,!1),Uv=t=>Wv(t,!0);function $v(t,e){return zt(t,n=>t.moveVertically(n,e,Bv(t).height))}const fm=t=>$v(t,!1),dm=t=>$v(t,!0),fA=t=>zt(t,e=>dr(t,e,!0)),dA=t=>zt(t,e=>dr(t,e,!1)),pA=t=>zt(t,e=>dr(t,e,!et(t))),mA=t=>zt(t,e=>dr(t,e,et(t))),gA=t=>zt(t,e=>T.cursor(t.lineBlockAt(e.head).from)),yA=t=>zt(t,e=>T.cursor(t.lineBlockAt(e.head).to)),pm=({state:t,dispatch:e})=>(e(en(t,{anchor:0})),!0),mm=({state:t,dispatch:e})=>(e(en(t,{anchor:t.doc.length})),!0),gm=({state:t,dispatch:e})=>(e(en(t,{anchor:t.selection.main.anchor,head:0})),!0),ym=({state:t,dispatch:e})=>(e(en(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),vA=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),wA=({state:t,dispatch:e})=>{let n=Ma(t).map(({from:r,to:i})=>T.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:T.create(n),userEvent:"select"})),!0},xA=({state:t,dispatch:e})=>{let n=Ri(t.selection,r=>{let i=Et(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return T.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(en(t,n)),!0)};function Kv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(en(n,T.create(i,i.length-1))),!0)}const kA=t=>Kv(t,!1),SA=t=>Kv(t,!0),CA=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=T.create([n.main]):n.main.empty||(r=T.create([T.cursor(n.main.head)])),r?(e(en(t,r)),!0):!1};function sl(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=Ul(t,a,!1)):a>l&&(n="delete.forward",a=Ul(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=Ul(t,l,!1),o=Ul(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:T.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?_.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ul(t,e,n){if(t instanceof _)for(let r of t.state.facet(_.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Gv=(t,e,n)=>sl(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=xa(o,s.tabSize),c=u%Br(s)||Br(s);for(let h=0;h<c&&o[o.length-1-h]==" ";h++)i--;a=i}else a=He(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=He(l.text,a-l.from,!1,!1)+l.from);return a}),oh=t=>Gv(t,!1,!0),qv=t=>Gv(t,!0,!1),Yv=(t,e)=>sl(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=He(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=l(u);if(o!=null&&c!=o)break;(u!=" "||r!=n.head)&&(o=c),r=a}return r}),Qv=t=>Yv(t,!1),AA=t=>Yv(t,!0),bA=t=>sl(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),EA=t=>sl(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),TA=t=>sl(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),MA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:ee.of(["",""])},range:T.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},NA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:He(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:He(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:T.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ma(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Jv(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of Ma(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(T.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(T.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:T.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const DA=({state:t,dispatch:e})=>Jv(t,e,!1),OA=({state:t,dispatch:e})=>Jv(t,e,!0);function Xv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Ma(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const PA=({state:t,dispatch:e})=>Xv(t,e,!1),LA=({state:t,dispatch:e})=>Xv(t,e,!0),RA=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Ma(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Ri(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function IA(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Et(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(X.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const vm=Zv(!1),BA=Zv(!0);function Zv(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&IA(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new Aa(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=Sf(u,s);for(c==null&&(c=xa(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let h=["",Ks(e,c)];return a&&h.push(Ks(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:ee.of(h)},range:T.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Df(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:T.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const jA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Aa(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=Df(t,(s,l,o)=>{let a=Sf(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],c=Ks(t,a);(u!=c||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},FA=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Df(t,(n,r)=>{r.push({from:n.from,insert:t.facet(kf)})}),{userEvent:"input.indent"})),!0),_A=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Df(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=xa(i,t.tabSize),l=0,o=Ks(t,Math.max(0,s-Br(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),zA=t=>(t.setTabFocusMode(),!0),HA=[{key:"Ctrl-b",run:Dv,shift:_v,preventDefault:!0},{key:"Ctrl-f",run:Ov,shift:zv},{key:"Ctrl-p",run:Rv,shift:Vv},{key:"Ctrl-n",run:Iv,shift:Uv},{key:"Ctrl-a",run:iA,shift:gA},{key:"Ctrl-e",run:sA,shift:yA},{key:"Ctrl-d",run:qv},{key:"Ctrl-h",run:oh},{key:"Ctrl-k",run:bA},{key:"Ctrl-Alt-h",run:Qv},{key:"Ctrl-o",run:MA},{key:"Ctrl-t",run:NA},{key:"Ctrl-v",run:lh}],WA=[{key:"ArrowLeft",run:Dv,shift:_v,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Y2,shift:aA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:nA,shift:pA,preventDefault:!0},{key:"ArrowRight",run:Ov,shift:zv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Q2,shift:uA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:rA,shift:mA,preventDefault:!0},{key:"ArrowUp",run:Rv,shift:Vv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:pm,shift:gm},{mac:"Ctrl-ArrowUp",run:hm,shift:fm},{key:"ArrowDown",run:Iv,shift:Uv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:mm,shift:ym},{mac:"Ctrl-ArrowDown",run:lh,shift:dm},{key:"PageUp",run:hm,shift:fm},{key:"PageDown",run:lh,shift:dm},{key:"Home",run:tA,shift:dA,preventDefault:!0},{key:"Mod-Home",run:pm,shift:gm},{key:"End",run:eA,shift:fA,preventDefault:!0},{key:"Mod-End",run:mm,shift:ym},{key:"Enter",run:vm,shift:vm},{key:"Mod-a",run:vA},{key:"Backspace",run:oh,shift:oh,preventDefault:!0},{key:"Delete",run:qv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Qv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:AA,preventDefault:!0},{mac:"Mod-Backspace",run:EA,preventDefault:!0},{mac:"Mod-Delete",run:TA,preventDefault:!0}].concat(HA.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),VA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:X2,shift:cA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Z2,shift:hA},{key:"Alt-ArrowUp",run:DA},{key:"Shift-Alt-ArrowUp",run:PA},{key:"Alt-ArrowDown",run:OA},{key:"Shift-Alt-ArrowDown",run:LA},{key:"Mod-Alt-ArrowUp",run:kA},{key:"Mod-Alt-ArrowDown",run:SA},{key:"Escape",run:CA},{key:"Mod-Enter",run:BA},{key:"Alt-l",mac:"Ctrl-l",run:wA},{key:"Mod-i",run:xA,preventDefault:!0},{key:"Mod-[",run:_A},{key:"Mod-]",run:FA},{key:"Mod-Alt-\\",run:jA},{key:"Shift-Mod-k",run:RA},{key:"Shift-Mod-\\",run:oA},{key:"Mod-/",run:W2},{key:"Alt-A",run:U2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:zA}].concat(WA),wm=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class qs{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(wm(o)):wm,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return H0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=hk(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=W0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(qs.prototype[Symbol.iterator]=function(){return this});const e1={from:-1,to:-1,match:/.*/.exec("")},Of="gm"+(/x/.unicode==null?"":"u");class t1{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=e1,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new n1(e,n,r,i,s);this.re=new RegExp(n,Of+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=Qo(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Qo(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Au=new WeakMap;class mi{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=Au.get(e);if(!i||i.from>=r||i.to<=n){let o=new mi(n,e.sliceString(n,r));return Au.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),Au.set(e,new mi(l,s)),new mi(n,s.slice(n-l,r-l))}}class n1{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=e1,this.matchPos=Qo(e,i),this.re=new RegExp(n,Of+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=mi.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Qo(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=mi.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(t1.prototype[Symbol.iterator]=n1.prototype[Symbol.iterator]=function(){return this});function UA(t){try{return new RegExp(t,Of),!0}catch{return!1}}function Qo(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function ah(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=je("input",{class:"cm-textfield",name:"line",value:e}),r=je("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:ks.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},je("label",t.state.phrase("Go to line"),": ",n)," ",je("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),je("button",{name:"close",onclick:()=>{t.dispatch({effects:ks.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,c,h]=s,f=c?+c.slice(1):0,d=u?+u:o.number;if(u&&h){let k=d/100;a&&(k=k*(a=="-"?-1:1)+o.number/l.doc.lines),d=Math.round(l.doc.lines*k)}else u&&a&&(d=d*(a=="-"?-1:1)+o.number);let g=l.doc.line(Math.max(1,Math.min(l.doc.lines,d))),v=T.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[ks.of(!1),_.scrollIntoView(v.from,{y:"center"})],selection:v}),t.focus()}return{dom:r}}const ks=ce.define(),xm=Zt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(ks)&&(t=n.value);return t},provide:t=>$o.from(t,e=>e?ah:null)}),$A=t=>{let e=Uo(t,ah);if(!e){let n=[ks.of(!0)];t.state.field(xm,!1)==null&&n.push(ce.appendConfig.of([xm,KA])),t.dispatch({effects:n}),e=Uo(t,ah)}return e&&e.dom.querySelector("input").select(),!0},KA=_.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),GA=({state:t,dispatch:e})=>{let{selection:n}=t,r=T.create(n.ranges.map(i=>t.wordAt(i.head)||T.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function qA(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new qs(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new qs(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const YA=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return GA({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=qA(t,r);return i?(e(t.update({selection:t.selection.addRange(T.range(i.from,i.to),!1),effects:_.scrollIntoView(i.to)})),!0):!1},Ii=z.define({combine(t){return wa(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new ob(e),scrollToMatch:e=>_.scrollIntoView(e)})}});class r1{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||UA(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ZA(this):new JA(this)}getCursor(e,n=0,r){let i=e.doc?e:ne.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Ur(this,i,n,r):Vr(this,i,n,r)}}class i1{constructor(e){this.spec=e}}function Vr(t,e,n,r){return new qs(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?QA(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function QA(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Jo(i,n-s))!=We.Word||e(Xo(i,n-s))!=We.Word)&&(e(Xo(i,r-s))!=We.Word||e(Jo(i,r-s))!=We.Word))}class JA extends i1{constructor(e){super(e)}nextMatch(e,n,r){let i=Vr(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Vr(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Vr(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Vr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Vr(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Ur(t,e,n,r){return new t1(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?XA(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Jo(t,e){return t.slice(He(t,e,!1),e)}function Xo(t,e){return t.slice(e,He(t,e))}function XA(t){return(e,n,r)=>!r[0].length||(t(Jo(r.input,r.index))!=We.Word||t(Xo(r.input,r.index))!=We.Word)&&(t(Xo(r.input,r.index+r[0].length))!=We.Word||t(Jo(r.input,r.index+r[0].length))!=We.Word)}class ZA extends i1{nextMatch(e,n,r){let i=Ur(this.spec,e,r,e.doc.length).next();return i.done&&(i=Ur(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Ur(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Ur(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Ur(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Ys=ce.define(),Pf=ce.define(),tr=Zt.define({create(t){return new bu(uh(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ys)?t=new bu(n.value.create(),t.panel):n.is(Pf)&&(t=new bu(t.query,n.value?Lf:null));return t},provide:t=>$o.from(t,e=>e.panel)});class bu{constructor(e,n){this.query=e,this.panel=n}}const eb=q.mark({class:"cm-searchMatch"}),tb=q.mark({class:"cm-searchMatch cm-searchMatch-selected"}),nb=bt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(tr))}update(t){let e=t.state.field(tr);(e!=t.startState.field(tr)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return q.none;let{view:n}=this,r=new Pr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,c)=>{let h=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,h?tb:eb)})}return r.finish()}},{decorations:t=>t.decorations});function ll(t){return e=>{let n=e.state.field(tr,!1);return n&&n.query.spec.valid?t(e,n):o1(e)}}const Zo=ll((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=T.single(r.from,r.to),s=t.state.facet(Ii);return t.dispatch({selection:i,effects:[Rf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),l1(t),!0}),ea=ll((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=T.single(i.from,i.to),l=t.state.facet(Ii);return t.dispatch({selection:s,effects:[Rf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),l1(t),!0}),rb=ll((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:T.create(n.map(r=>T.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),ib=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new qs(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(T.range(o.value.from,o.value.to))}return e(t.update({selection:T.create(s,l),userEvent:"select.search.matches"})),!0},km=ll((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,c=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),c.push(_.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(o);return l&&(a=T.single(l.from,l.to).map(h),c.push(Rf(t,l)),c.push(n.facet(Ii).scrollToMatch(a.main,t))),t.dispatch({changes:h,selection:a,effects:c,userEvent:"input.replace"}),!0}),sb=ll((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:_.announce.of(r),userEvent:"input.replace.all"}),!0});function Lf(t){return t.state.facet(Ii).createPanel(t)}function uh(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(Ii);return new r1({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function s1(t){let e=Uo(t,Lf);return e&&e.dom.querySelector("[main-field]")}function l1(t){let e=s1(t);e&&e==t.root.activeElement&&e.select()}const o1=t=>{let e=t.state.field(tr,!1);if(e&&e.panel){let n=s1(t);if(n&&n!=t.root.activeElement){let r=uh(t.state,e.query.spec);r.valid&&t.dispatch({effects:Ys.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Pf.of(!0),e?Ys.of(uh(t.state,e.query.spec)):ce.appendConfig.of(ub)]});return!0},a1=t=>{let e=t.state.field(tr,!1);if(!e||!e.panel)return!1;let n=Uo(t,Lf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Pf.of(!1)}),!0},lb=[{key:"Mod-f",run:o1,scope:"editor search-panel"},{key:"F3",run:Zo,shift:ea,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Zo,shift:ea,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:a1,scope:"editor search-panel"},{key:"Mod-Shift-l",run:ib},{key:"Mod-Alt-g",run:$A},{key:"Mod-d",run:YA,preventDefault:!0}];class ob{constructor(e){this.view=e;let n=this.query=e.state.field(tr).query.spec;this.commit=this.commit.bind(this),this.searchField=je("input",{value:n.search,placeholder:vt(e,"Find"),"aria-label":vt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=je("input",{value:n.replace,placeholder:vt(e,"Replace"),"aria-label":vt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=je("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=je("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=je("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return je("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=je("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Zo(e),[vt(e,"next")]),r("prev",()=>ea(e),[vt(e,"previous")]),r("select",()=>rb(e),[vt(e,"all")]),je("label",null,[this.caseField,vt(e,"match case")]),je("label",null,[this.reField,vt(e,"regexp")]),je("label",null,[this.wordField,vt(e,"by word")]),...e.state.readOnly?[]:[je("br"),this.replaceField,r("replace",()=>km(e),[vt(e,"replace")]),r("replaceAll",()=>sb(e),[vt(e,"replace all")])],je("button",{name:"close",onclick:()=>a1(e),"aria-label":vt(e,"close"),type:"button"},["×"])])}commit(){let e=new r1({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ys.of(e)}))}keydown(e){lC(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ea:Zo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),km(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Ys)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ii).top}}function vt(t,e){return t.state.phrase(e)}const $l=30,Kl=/[\s\.,:;?!]/;function Rf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-$l),l=Math.min(i,n+$l),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<$l;a++)if(!Kl.test(o[a+1])&&Kl.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-$l;a--)if(!Kl.test(o[a-1])&&Kl.test(o[a])){o=o.slice(0,a);break}}return _.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const ab=_.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ub=[tr,ya.low(nb),ab],Vt={PAGE_BREAK:/^\={3,}$/,CHARACTER:/^([A-Z][A-Z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,CHARACTER_POWER_USER:/^(?:@)([A-Za-z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,SCENE:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,TRANSITION:/^((?:FADE (?:IN|TO BLACK|OUT)|CUT TO BLACK)[\:\.]?|.+ TO\:)/i,TRANSITION_POWER_USER:/^(?:> )(.+)/i,TITLE:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,SECTION:/^(#{1,4})\ (.*)/,MILESTONE:/^(?:\ +)?-\ (.+)/,IMAGE:/^(\[i\]https:\/\/(.+))/i,AUDIO:/^(\[a\]https:\/\/(.+))/i},cb=bf.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(Vt.TRANSITION)||t.match(Vt.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(Vt.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(Vt.CHARACTER))||(n=t.match(Vt.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(Vt.IMAGE)||t.match(Vt.AUDIO)?"link":t.match(Vt.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(Vt.TITLE))return t.skipTo(":"),t.next(),"def";if(n=t.match(Vt.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(Vt.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),hb=bt.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push(q.line({class:"cm-keyword"}).range(s.from)),e.push(q.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push(q.line({class:"cm-header"}).range(s.from)),e.push(q.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push(q.line({class:"cm-atom"}).range(s.from)),e.push(q.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push(q.line({class:"cm-synopsis"}).range(s.from)),e.push(q.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push(q.line({class:"cm-number"}).range(s.from)),e.push(q.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push(q.line({class:"cm-variable"}).range(s.from)),e.push(q.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return q.set(e)}},{decorations:t=>t.decorations}),u1=P.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=P.useRef(null),l=P.useRef(null);return P.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:_.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),P.useEffect(()=>{if(!s.current)return;const o=[kC(),uC(),a2(),x2(),XC(),_.lineWrapping,cb,hb,_.domEventHandlers({mouseup:(c,h)=>{setTimeout(()=>{const f=h.state.selection.main.head,d=h.state.doc.lineAt(f);n(d.number-1)},10)}}),H2,ev.of([...VA,...lb]),_.updateListener.of(c=>{if(c.docChanged&&e(c.state.doc.toString()),c.selectionSet&&!c.docChanged){const h=c.state.selection.main.head,f=c.state.doc.lineAt(h);n(f.number-1)}}),_.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=ne.create({doc:t,extensions:o}),u=new _({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),P.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),m.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});u1.displayName="CodeMirrorEditor";const fb={VITE_GOOGLE_CLIENT_ID:"332933508693-u0f8kifpkma08osh7cscdcdbgsqi4ir1.apps.googleusercontent.com"};let Fn="";function db(){return new Promise(t=>{if(window.google)return t();const e=setInterval(()=>{window.google&&(clearInterval(e),t())},50)})}async function ch(t){if(Fn&&!(t&&t.prompt==="consent"))return Fn;await db();const e=window.google,n=fb||{},r=["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly"],i=Array.from(new Set([...t&&t.extraScopes?t.extraScopes:[],...r])),s=e.accounts.oauth2.initTokenClient({client_id:n.VITE_GOOGLE_CLIENT_ID,scope:i.join(" "),callback:l=>{Fn=l.access_token}});return new Promise((l,o)=>{s.callback=u=>{if(u&&u.error)return o(u);Fn=u&&u.access_token?u.access_token:Fn,l(Fn)};const a=t&&t.prompt==="consent"?"consent":"";try{s.requestAccessToken({prompt:a})}catch(u){o(u)}})}async function jr(t,e={},n=!1){var s;const r=await ch(),i=await fetch(t,{...e,headers:{...e.headers||{},Authorization:`Bearer ${r}`}});if(!i.ok)try{const o=await i.clone().text().catch(()=>"<could not read body>");console.debug("authedFetch non-OK response",{url:((s=t==null?void 0:t.toString)==null?void 0:s.call(t))||t,status:i.status,bodyPreview:o.slice(0,200)})}catch(l){console.debug("authedFetch: failed to read non-OK response body",l)}if(i.status===401)return Fn="",jr(t,e,n);if(i.status===403&&!n)try{return console.debug("authedFetch: 403 received, attempting re-consent with broader Drive scope and retry"),Fn="",await ch({prompt:"consent",extraScopes:["https://www.googleapis.com/auth/drive"]}),jr(t,e,!0)}catch(l){console.debug("authedFetch: re-consent attempt failed",l)}return i}const If="fountain:driveState";function at(){try{return JSON.parse(localStorage.getItem(If)||"{}")}catch{return{}}}function pb(t){localStorage.setItem(If,JSON.stringify(t))}function mb(){localStorage.removeItem(If)}function yn(t){try{try{}catch{}pb(t);try{}catch{}}catch(e){console.error("persistDriveState failed",e)}}const gb={VITE_GCP_PROJECT_NUMBER:"332933508693",VITE_GOOGLE_API_KEY:"AIzaSyBNuoxiWJI0jd68umAFLH0QYfuJdyAHUUs"};function yb(t=3e3){return new Promise((e,n)=>{if(window.gapi)return e();const r=Date.now(),i=setInterval(()=>{if(window.gapi)return clearInterval(i),e();if(Date.now()-r>t)return clearInterval(i),n(new Error("gapi did not load"))},50)})}function vb(){return new Promise(async(t,e)=>{try{await yb()}catch{return e(new Error("Google API library (gapi) not loaded. Ensure https://apis.google.com/js/api.js is included."))}try{window.gapi.load("picker",()=>{if(!window.google||!window.google.picker)return e(new Error("Google Picker API not available on window.google.picker. Make sure the Picker API is enabled in Google Cloud Console."));t()})}catch(n){e(n)}})}async function wb(){await vb();const t=await ch(),e=window.google,n=new e.picker.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder");return new Promise(r=>{const i=gb||{};new e.picker.PickerBuilder().setAppId(i.VITE_GCP_PROJECT_NUMBER).setDeveloperKey(i.VITE_GOOGLE_API_KEY).setOAuthToken(t).addView(n).setTitle("Choose a Drive Folder").setCallback(l=>{var o;if(l.action===e.picker.Action.PICKED&&((o=l.docs)!=null&&o.length)){try{const a=new CustomEvent("fountain:drive:folderSelected",{detail:l.docs[0]});window.dispatchEvent(a)}catch(a){console.warn("picker: could not dispatch folderSelected event",a)}try{const a={...at(),folderId:l.docs[0].id,folderName:l.docs[0].name,folder:l.docs[0]};yn(a)}catch(a){console.warn("picker: failed to persist folder as fallback",a)}r({id:l.docs[0].id,name:l.docs[0].name})}else r(null)}).build().setVisible(!0)})}async function xb(t){if(!t)return[];const e=`'${t}' in parents and trashed = false`,r=`https://www.googleapis.com/drive/v3/files?${new URLSearchParams({q:e,fields:"files(id,name,mimeType,modifiedTime)",pageSize:"200"}).toString()}`,i=await jr(r);if(!i.ok)throw new Error(`Drive list failed: ${i.status}`);return((await i.json()).files||[]).map(l=>({id:l.id,name:l.name,mimeType:l.mimeType,modifiedTime:l.modifiedTime}))}async function Eu(t){if(!t)throw new Error("fileId required");const e=`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,n=await jr(e);if(!n.ok)throw new Error(`Failed to fetch file content: ${n.status}`);return await n.text()}async function Sm(t,e,n){if(!t)throw new Error("folderId required");const r="-------fountainupload"+Date.now(),s=`--${r}\r
Content-Type: application/json; charset=UTF-8\r
\r
${JSON.stringify({name:e,parents:[t]})}\r
--${r}\r
Content-Type: text/plain\r
\r
${n}\r
--${r}--`,o=await jr("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,mimeType,modifiedTime",{method:"POST",headers:{"Content-Type":`multipart/related; boundary=${r}`},body:s});if(!o.ok)throw new Error(`Failed to create file: ${o.status}`);return await o.json()}async function kb(t,e){if(!t)throw new Error("fileId required");const n=`https://www.googleapis.com/upload/drive/v3/files/${t}?uploadType=media&fields=id,name,mimeType,modifiedTime`,r=await jr(n,{method:"PATCH",headers:{"Content-Type":"text/plain"},body:e});if(!r.ok)throw new Error(`Failed to update file content: ${r.status}`);try{return await r.json()}catch{const s=await jr(`https://www.googleapis.com/drive/v3/files/${t}?fields=id,name,mimeType,modifiedTime`);if(!s.ok)throw new Error(`Failed to fetch updated file metadata: ${s.status}`);return await s.json()}}function Sb(t=""){const[e,n]=P.useState([]),[r,i]=P.useState([]),[s,l]=P.useState(new Map),o=P.useRef(null),[a,u]=P.useState(!0);return P.useEffect(()=>{if(!a){if(t){const h=Oa(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}return}(function(){try{const h=new Worker(new URL("/assets/previewWorker-D6jE4gsy.js",import.meta.url),{type:"module"});return h.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},h.onmessage=f=>{const{type:d,blocks:g,characters:v,characterLineCounts:k}=f.data;d==="result"?(n(g||[]),i(v||[]),l(k||new Map)):d==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=h,t&&h.postMessage({type:"process",text:t}),()=>{try{h.terminate()}catch{}}}catch(h){console.error("Failed to create module worker, falling back to main-thread parsing:",h),u(!1)}})()},[a]),P.useEffect(()=>{if(!a&&t){const h=Oa(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:h=>{if(a&&o.current)o.current.postMessage({type:"process",text:h});else{const f=Oa(h);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let Cb=1;function Ab(){const t=P.useRef(null),e=P.useRef(new Map),[n,r]=P.useState([]),i=P.useRef(!1);P.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=P.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-PCay-oew.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:c,requestId:h,message:f}=a.data||{};if(h&&e.current.has(h)){const{resolve:d,reject:g}=e.current.get(h);if(e.current.delete(h),u==="panels")try{d(c)}catch{}else if(u==="error")try{g(new Error(f||"worker error"))}catch{}else try{g(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(c)&&r(c)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=P.useCallback(o=>{const a=s();if(!a)try{const c=N1(o);return r(c),Promise.resolve(c)}catch(c){return Promise.reject(c)}const u=String(Cb++);return new Promise((c,h)=>{e.current.set(u,{resolve:c,reject:h});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),h(f)}}).then(c=>(i.current&&r(c),c))},[s]);return{panels:n,parsePanels:l}}const Wr=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Hey—did the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE – CODING AND COFFEE\r
\r
— Keys clack.  \r
— Tests blink green, then red, then righteous green again.  \r
— A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pings—just shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing → preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open → payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function bb(){const[t,e]=P.useState(!1),[n,r]=P.useState(""),[i,s]=P.useState(!1),[l,o]=P.useState(!1),[a,u]=P.useState("edit"),[c,h]=P.useState(0),[f,d]=P.useState(!1),[g,v]=P.useState(null),[k,p]=P.useState(()=>{try{return localStorage.getItem("fountain:gdriveOn")==="1"}catch{return!1}}),[y,w]=P.useState(()=>at()),S={...at()||{},...y||{}};P.useEffect(()=>{const x=j=>{try{const H=j&&j.detail?j.detail:null;if(H&&H.id){const J={...at(),fileId:H.id,fileName:H.name,file:H};try{yn(J)}catch(re){console.error("App: persistDriveState failed",re)}w(J)}}catch(H){console.error("App: fileSelected handler failed",H)}},E=()=>{try{const H={...at()||{},fileId:void 0,fileName:void 0,file:void 0};try{yn(H)}catch(J){console.error("App: persistDriveState failed",J)}w(H)}catch(j){console.error("App: fileCleared handler failed",j)}};return window.addEventListener("fountain:drive:fileSelected",x),window.addEventListener("fountain:drive:fileCleared",E),()=>{window.removeEventListener("fountain:drive:fileSelected",x),window.removeEventListener("fountain:drive:fileCleared",E)}},[]);const C=!!(S&&(S.folderId||S.folderName)),b=P.useRef(null),A=P.useRef(null),D=P.useRef([]),W=P.useRef(null),[B,$]=P.useState(!1),[V,Q]=P.useState(!1),[se,xe]=P.useState([]),[tt,Ht]=P.useState(null),[L,U]=P.useState(!1),[F,Z]=P.useState(!1),[K,Ce]=P.useState(!1);P.useEffect(()=>{try{console.log("App: driveState changed",y)}catch{}},[y]),P.useEffect(()=>{try{if(k){const E=(S||{}).file||{},j=E.modifiedTime||E.modified_time||null;j&&(v(new Date(j)),d(!0))}}catch{}},[k,y]),P.useEffect(()=>{const x=localStorage.getItem("fountain-script");let E=Wr;if(x)try{const j=JSON.parse(x);E=j.content,d(!0),v(new Date(j.savedAt))}catch(j){console.error("Error parsing saved script:",j),localStorage.removeItem("fountain-script")}r(E),Ne(E);try{typeof ol=="function"&&ol(E)}catch{}},[]),P.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const E=navigator.userAgent||"",j=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(E),H=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,J=(window.innerWidth||screen.width||0)<1024;(j||H&&J)&&e(!0)}catch{}},[]),P.useEffect(()=>{const x=E=>{(E.ctrlKey||E.metaKey)&&String(E.key).toLowerCase()==="g"&&(E.preventDefault(),p(j=>{try{localStorage.setItem("fountain:gdriveOn",j?"0":"1")}catch{}return!j}))};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[]),P.useEffect(()=>{try{if(k){try{const x={content:n||"",savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(x)),d(!0),v(new Date),console.log("App: saved local copy to fountain-script before entering GDrive mode")}catch(x){console.error("App: failed to persist local script when entering GDrive mode",x)}try{const x=at()||{},E=x&&x.fileId?x.fileId:null;E&&(Ce(!0),Eu(E).then(j=>{r(j);try{Ne(j)}catch(H){console.error("App: processText failed while loading Drive file on toggle",H)}d(!0),v(new Date),console.log("App: loaded selected Drive file after entering GDrive mode")}).catch(j=>{console.error("App: failed to load selected Drive file on entering GDrive mode",j)}).finally(()=>Ce(!1)))}catch(x){console.error("App: error while attempting to load Drive file on toggle",x)}}else try{const x=localStorage.getItem("fountain-script");if(x){const E=JSON.parse(x),j=E&&E.content?E.content:Wr;r(j);try{Ne(j)}catch(H){console.error("App: processText failed while restoring local script",H)}E&&E.savedAt&&v(new Date(E.savedAt)),d(!!(E&&E.content)),console.log("App: restored local copy from fountain-script after leaving GDrive mode")}else{r(Wr);try{Ne(Wr)}catch(E){console.error("App: processText failed while loading default script",E)}d(!1),v(null),console.log("App: no local copy found, loaded default script after leaving GDrive mode")}}catch(x){console.error("App: failed to restore local script after leaving GDrive mode",x)}}catch{}},[k]),P.useEffect(()=>{const x=j=>{try{const H=j&&j.detail?j.detail:null;if(H&&H.id){const J={...at(),folderId:H.id,folderName:H.name,folder:H};try{yn(J)}catch(re){console.error("App: persistDriveState failed",re)}w(J)}else w(at())}catch(H){console.error("App: failed to load drive state",H)}},E=()=>w({});return window.addEventListener("fountain:drive:folderSelected",x),window.addEventListener("fountain:drive:cleared",E),()=>{window.removeEventListener("fountain:drive:folderSelected",x),window.removeEventListener("fountain:drive:cleared",E)}},[]);const{blocks:Ae,characters:Me,characterLineCounts:ot,processText:Ne}=Sb(""),{panels:G,parsePanels:ol}=Ab(),[$e,Bi]=P.useState(0),[ji,Bf]=P.useState("screenplay"),Ke=P.useRef(null),[Fi,Pn]=P.useState(!1),al=P.useRef(null),gt=P.useRef(null),[jf,_i]=P.useState(!1),pr=P.useRef(null),[Ff,ul]=P.useState(!1);P.useEffect(()=>{D.current=Ae},[Ae]);const c1=x=>{r(x),Ne(x);try{typeof ol=="function"&&ol(x)}catch{}},h1=()=>{!Array.isArray(G)||G.length===0||(Na(),_i(!1),pr.current="user",Bi(x=>{const E=G.length;return((x-1)%E+E)%E}))},_f=(x=!0)=>{!Array.isArray(G)||G.length===0||(pr.current=x?"user":"auto",x&&(Na(),_i(!1)),Bi(E=>{const j=G.length;return(E+1)%j}))},f1=async()=>{jf&&(Bi(0),_i(!1));try{Ke.current&&Ke.current.paused&&(Ke.current.currentTime=0)}catch{}Pn(!0)},d1=()=>{if(Ke.current){pr.current="user";try{Ke.current.pause()}catch{}Pn(!1)}},p1=()=>{Na(),_i(!1);try{Bi(0)}catch{}};function Na(){try{gt.current&&(clearTimeout(gt.current),gt.current=null)}catch{}try{Ke.current&&(pr.current="user",Ke.current.pause(),Ke.current.currentTime=0)}catch{}Pn(!1)}P.useEffect(()=>{const x=Ke.current;if(!x)return;const E=()=>Pn(!0),j=()=>{pr.current==="user"&&Pn(!1)},H=()=>{_f(!1)};return x.addEventListener("play",E),x.addEventListener("pause",j),x.addEventListener("ended",H),()=>{x.removeEventListener("play",E),x.removeEventListener("pause",j),x.removeEventListener("ended",H)}},[$e,G]),P.useEffect(()=>{if(gt.current&&(clearTimeout(gt.current),gt.current=null),!Fi)return;const x=G&&G.length>0?G[$e]||G[0]:null;if(!x){Pn(!1);return}try{Ke.current&&Ke.current.play().catch(()=>{})}catch{}const E=Math.max(1e3,typeof x.duration=="number"?x.duration*1e3:3e3);return gt.current=setTimeout(()=>{!G||$e>=G.length-1?(Pn(!1),_i(!0),gt.current=null):Bi(j=>j+1)},E),()=>{gt.current&&(clearTimeout(gt.current),gt.current=null)}},[Fi,$e,G]),P.useEffect(()=>{if(Ke.current)try{pr.current==="user"&&(Ke.current.pause(),Ke.current.currentTime=0,Pn(!1))}catch{}pr.current=null;try{al.current&&typeof al.current.scrollTo=="function"&&al.current.scrollTo({top:0,behavior:"smooth"})}catch{}},[$e]),P.useEffect(()=>()=>{try{gt.current&&clearTimeout(gt.current)}catch{}},[]),P.useEffect(()=>{try{const x=G&&G.length>0&&G[$e]?G[$e]:null}catch{}},[G,$e]),P.useEffect(()=>{ul(!1)},[$e]);const zf=async()=>{if(n.trim()){Z(!0);try{if(k)try{const E=at()||{},j=E&&E.fileId?E.fileId:null,H=E&&E.folderId?E.folderId:null,J=E.fileName||`script-${new Date().toISOString().replace(/[:.]/g,"-")}.fountain`;if(j){console.log("Saving to existing Drive file",j);const re=await kb(j,n);console.log("Saved script to Drive (updated):",re);const be={...E,fileId:re.id,fileName:re.name,file:re};try{yn(be)}catch{}w(be);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:be}))}catch{}d(!0),v(new Date);return}if(H){console.log("Creating new Drive file in folder",H);const re=await Sm(H,J,n);console.log("Saved script to Drive (created):",re);const be={...E,fileId:re.id,fileName:re.name,file:re};try{yn(be)}catch{}w(be);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:be}))}catch{}d(!0),v(new Date);return}}catch(E){console.error("GDrive save attempt failed",E)}const x={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(x)),d(!0),v(new Date)}finally{Z(!1)}}},m1=async()=>{try{if(!await wb())return}catch(x){console.error("Folder pick failed",x),alert("Could not open folder picker. Check console for details.")}},g1=async()=>{try{const x=at()||{},E=x&&x.fileId?x.fileId:null;if(!E)return alert("No Drive file selected to reload");Ce(!0);const j=await Eu(E);r(j);try{Ne(j)}catch(H){console.error("processText failed",H)}d(!0),v(new Date)}catch(x){console.error("Failed to reload Drive file",x),alert("Failed to reload Drive file. See console for details.")}finally{Ce(!1)}},y1=async()=>{if(!n.trim())return alert("Editor is empty");try{const x=at()||{},E=x&&x.folderId?x.folderId:null;if(!E)return alert("No Drive folder selected");const j=x.fileName?x.fileName.replace(/\.fountain$/i,""):`script-${new Date().toISOString().replace(/[:.]/g,"-")}`,H=window.prompt("Enter filename (without extension):",j);if(H===null)return;const J=String(H||"").trim();if(!J)return alert("Filename cannot be empty");const re=J.toLowerCase().endsWith(".fountain")?J:`${J}.fountain`,be=await Sm(E,re,n);console.log("GDrive Save As created:",be);const yt={...x,fileId:be.id,fileName:be.name,file:be};try{yn(yt)}catch{}w(yt);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:yt}))}catch{}d(!0),v(new Date)}catch(x){console.error("GDrive Save As failed",x),alert("Failed to save file to Drive. See console for details.")}},v1=async()=>{try{const x=at(),E=x&&x.folderId?x.folderId:null;if(!E){alert("No Drive folder selected. Use Change Folder first.");return}Q(!0),Ht(x&&x.folderName?x.folderName:null),U(!0);const H=(await xb(E)||[]).filter(J=>J&&(J.mimeType==="application/octet-stream"||J.mimeType==="text/plain"));H.sort((J,re)=>{const be=J&&J.modifiedTime?new Date(J.modifiedTime).getTime():0;return(re&&re.modifiedTime?new Date(re.modifiedTime).getTime():0)-be}),xe(H)}catch(x){console.error("openGDriveLoad failed",x),alert("Could not list files from Drive. Check console for details.")}finally{U(!1)}},w1=()=>{const x=localStorage.getItem("fountain-script");if(x)try{const E=JSON.parse(x);r(E.content),Ne(E.content),v(new Date(E.savedAt))}catch(E){console.error("Error loading saved script:",E)}},x1=()=>{localStorage.removeItem("fountain-script"),d(!1),v(null),r(Wr),Ne(Wr)},k1=async()=>{try{await navigator.clipboard.writeText(n)}catch{const E=document.createElement("textarea");E.value=n,document.body.appendChild(E),E.select(),document.execCommand("copy"),document.body.removeChild(E)}},S1=async()=>{try{const x=await navigator.clipboard.readText();r(x),Ne(x)}catch(x){console.error("Error pasting from clipboard:",x)}},C1=()=>{r(""),Ne("");try{A.current&&A.current.focus&&A.current.focus()}catch{}},A1=P.useCallback(x=>{const E=D.current;if(h(x),b.current&&E.length>0){let j=null;for(let H=E.length-1;H>=0;H--)if(E[H].index<=x){j=E[H];break}if(j){const H=b.current.querySelector(`[data-line-id="${j.id}"]`);if(H){const J=b.current,re=J.getBoundingClientRect(),be=H.getBoundingClientRect(),yt=be.top-re.top,Da=re.height,T1=be.height,M1=J.scrollTop+yt-Da/2+T1/2;J.scrollTo({top:M1,behavior:"smooth"})}}}},[]),b1=P.useCallback(x=>{A.current&&A.current.scrollToLine&&A.current.scrollToLine(x)},[]);P.useEffect(()=>{const x=E=>{E.key==="Escape"&&(i?s(!1):l&&o(!1))};if(i||l)return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[i,l]),P.useEffect(()=>{const x=()=>{$(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",x),()=>document.removeEventListener("fullscreenchange",x)},[]);const E1=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),$(!1)):W.current&&W.current.requestFullscreen?(await W.current.requestFullscreen(),$(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),$(!0))}catch(x){console.error("Fullscreen toggle failed",x)}};return m.jsxs("div",{className:"fountain-app",ref:W,children:[t&&m.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:m.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),m.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"×"})]}),m.jsxs("div",{className:"modal-body",children:[m.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),m.jsxs("p",{style:{marginTop:"1rem"},children:[m.jsx("strong",{children:"How to:"}),' open your browser menu (⋮) and choose "Desktop site" or "Request desktop site".']})]}),m.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:m.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"Got it"})})]})}),m.jsxs("div",{className:"persistence-toolbar",children:[m.jsxs("div",{className:"toolbar-group",children:[k?m.jsxs(m.Fragment,{children:[m.jsxs("button",{className:`toolbar-btn ${F||K?"disabled":""}`,onClick:m1,disabled:F||K,title:F||K?"Saving...":"Change Drive folder",children:[m.jsx("i",{className:"fas fa-folder-open"})," Change Folder"]}),m.jsxs("button",{className:`toolbar-btn ${!n.trim()||!C||F||K?"disabled":""}`,onClick:zf,disabled:!n.trim()||!C||F||K,title:"Save to Google Drive",children:[m.jsx("i",{className:`${F||K?"fas fa-spinner fa-spin":"fab fa-google-drive"}`}),"GDrive Save"]}),m.jsxs("button",{className:`toolbar-btn ${!n.trim()||!C||F||K?"disabled":""}`,onClick:y1,disabled:!n.trim()||!C||F||K,title:F||K?"Saving...":"Save as to Google Drive",children:[m.jsx("i",{className:"fas fa-file-export"})," GDrive Save As"]}),m.jsxs("button",{className:`toolbar-btn ${!C||F||K?"disabled":""}`,onClick:v1,disabled:!C||F||K,title:F||K?"Saving...":"Load from Google Drive",children:[m.jsx("i",{className:"fas fa-download"})," GDrive Load"]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("button",{className:`toolbar-btn ${!n.trim()||F?"disabled":""}`,onClick:zf,disabled:!n.trim()||F,title:"Save current script to browser storage",children:[m.jsx("i",{className:`fas ${F?"fa-spinner fa-spin":"fa-save"}`}),"Save"]}),m.jsxs("button",{className:`toolbar-btn ${f?"":"disabled"}`,onClick:w1,disabled:!f,title:g?`Load saved script (${g.toLocaleDateString()} ${g.toLocaleTimeString()})`:"Load saved script",children:[m.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),m.jsxs("button",{className:"toolbar-btn",onClick:k1,title:"Copy editor contents to clipboard",children:[m.jsx("i",{className:"fas fa-copy"}),"Copy"]}),m.jsxs("button",{className:"toolbar-btn",onClick:S1,title:"Paste from clipboard to editor",children:[m.jsx("i",{className:"fas fa-paste"}),"Paste"]})]}),!k&&m.jsxs("button",{className:`toolbar-btn danger ${n.trim()?"":"disabled"}`,onClick:C1,disabled:!n.trim(),title:"Clear editor contents",children:[m.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),k?m.jsx("div",{style:{fontSize:12,color:"#f5f5f5"},children:S&&S.folderName?m.jsxs("div",{children:[m.jsxs("div",{children:[m.jsx("i",{className:"fas fa-folder-open persistence-icon","aria-hidden":"true"}),S.folderName,m.jsx("a",{href:"#",onClick:x=>{x.preventDefault();try{mb(),w({}),window.dispatchEvent(new CustomEvent("fountain:drive:cleared")),console.log("App: cleared drive state")}catch(E){console.error("App: failed to clear drive state",E)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:m.jsx("i",{className:"fas fa-trash small-trash","aria-hidden":"true"})})]}),S&&S.fileName?m.jsxs("div",{style:{marginTop:4},children:[m.jsxs("span",{style:{fontSize:12,color:"#ddd"},children:[m.jsx("i",{className:"fas fa-file persistence-icon","aria-hidden":"true"}),S.fileName]}),m.jsx("a",{href:"#",onClick:x=>{x.preventDefault();try{const E={...at(),fileId:void 0,fileName:void 0,file:void 0};yn(E),w(E),window.dispatchEvent(new CustomEvent("fountain:drive:fileCleared"))}catch(E){console.error("App: failed to clear file selection",E)}},style:{marginLeft:8,color:"#ddd",textDecoration:"underline",cursor:"pointer",fontSize:12},children:m.jsx("i",{className:"fas fa-trash small-trash","aria-hidden":"true"})}),m.jsx("i",{className:`${K?"fas fa-spinner fa-spin small-action":`fas fa-sync-alt small-action ${F?"disabled":""}`}`,title:K?"Reloading...":"Reload file from Drive",onClick:x=>{x.preventDefault(),!F&&!K&&g1()},"aria-hidden":"true"})]}):null]}):"No folder selected"}):m.jsxs("button",{className:`toolbar-btn danger ${f?"":"disabled"}`,onClick:x1,disabled:!f,title:"Clear saved script from storage",children:[m.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),m.jsx("div",{className:"toolbar-divider"}),m.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>s(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[m.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),m.jsxs("button",{className:`toolbar-btn character-btn ${Me.length===0?"disabled":""}`,onClick:()=>Me.length>0&&o(!0),title:Me.length>0?"Character List":"No characters found",disabled:Me.length===0,children:[m.jsx("i",{className:"fas fa-user"}),"Characters",Me.length>0&&m.jsx("span",{className:"character-count-badge",children:Me.length})]})]}),g&&m.jsxs("div",{className:"last-saved",children:["Last saved: ",g.toLocaleDateString()," at ",g.toLocaleTimeString()]})]}),m.jsx("div",{className:"mobile-view-toggle",children:m.jsx("div",{className:"tabs is-centered",children:m.jsxs("ul",{children:[m.jsx("li",{className:a==="edit"?"is-active":"",children:m.jsxs("a",{onClick:()=>u("edit"),children:[m.jsx("span",{className:"icon is-small",children:m.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),m.jsx("span",{children:"Edit"})]})}),m.jsx("li",{className:a==="preview"?"is-active":"",children:m.jsxs("a",{onClick:()=>u("preview"),children:[m.jsx("span",{className:"icon is-small",children:m.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),m.jsx("span",{children:"Preview"})]})})]})})}),m.jsxs("div",{className:"editor-layout",children:[m.jsx("button",{className:`toolbar-btn fullscreen-btn ${B?"is-active":""}`,onClick:E1,title:B?"Exit fullscreen":"Enter fullscreen","aria-label":B?"Exit fullscreen":"Enter fullscreen",children:m.jsx("i",{className:`fas ${B?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),m.jsxs("div",{className:"columns is-gapless",children:[m.jsx("div",{className:`column is-half-desktop ${a==="preview"?"mobile-hidden":""}`,children:m.jsxs("div",{className:"box editor-box",children:[m.jsx("h3",{className:"title is-6",children:"Editor"}),m.jsx(u1,{ref:A,value:n,onChange:c1,onCursorChange:A1,placeholder:"Type your fountain screenplay here..."})]})}),m.jsx("div",{className:`column is-half-desktop ${a==="edit"?"mobile-hidden":""}`,children:m.jsxs("div",{className:"box preview-box",children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[m.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview:"}),m.jsxs("div",{className:"pane-toggle",style:{display:"flex"},children:[m.jsx("button",{className:`toolbar-btn pane-toggle-btn ${ji==="screenplay"?"is-active":""}`,onClick:()=>Bf("screenplay"),"aria-pressed":ji==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),m.jsx("button",{className:`toolbar-btn pane-toggle-btn ${ji==="player"?"is-active":""}`,onClick:()=>Bf("player"),"aria-pressed":ji==="player",title:"Show media player",children:"Player"})]})]}),m.jsx("div",{})]}),ji==="screenplay"?m.jsx("div",{className:"preview-content",ref:b,children:Ae.length===0?m.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):Ae.map(x=>m.jsx("div",{className:`preview-line ${x.className||""} ${x.index===c?"current-line":""}`,"data-type":x.type,"data-line-id":x.id,"data-line-index":x.index,onClick:()=>b1(x.index),style:{cursor:"pointer"},children:x.type==="image"||x.type==="audio"||x.type==="title_page"||x.type==="page_break"||x.type==="page_number"?m.jsx("div",{dangerouslySetInnerHTML:{__html:x.text}}):x.text||" "},x.id))}):m.jsxs("div",{className:"media-player",ref:al,style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const x=G&&G.length>0?G[$e]||G[0]:null,E=x&&typeof x.duration=="number"?x.duration:null,j=G&&G.length?G.length:0,H=x&&x.title?String(x.title):"";let J="untitled";return H&&H.trim()&&(J=H.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),J||(J="untitled")),m.jsxs("div",{className:"player-header",style:{marginBottom:"0.5rem",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[m.jsxs("div",{className:"panel-title-wrapper",style:{position:"relative",display:"inline-block"},children:[m.jsx("div",{className:"panel-title",style:{fontSize:"1.05rem",fontWeight:700},onMouseEnter:()=>ul(!0),onMouseLeave:()=>ul(!1),onClick:()=>ul(re=>!re),"aria-haspopup":"true","aria-expanded":Ff,children:J}),x&&x.nesting&&Ff?m.jsxs("div",{className:"panel-nesting-tooltip",role:"tooltip",children:[x.nesting.act?m.jsxs("div",{children:[m.jsx("strong",{children:"Act:"})," ",x.nesting.act]}):null,x.nesting.scene?m.jsxs("div",{children:[m.jsx("strong",{children:"Scene:"})," ",x.nesting.scene]}):null,x.nesting.sequence?m.jsxs("div",{children:[m.jsx("strong",{children:"Sequence:"})," ",x.nesting.sequence]}):null,!x.nesting.act&&!x.nesting.sequence&&!x.nesting.scene?m.jsx("div",{style:{color:"#999"},children:"No nesting"}):null]}):null]}),m.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${$e+1} / ${j})`})]}),m.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:m.jsxs("div",{style:{color:"#999"},children:["lines ",x&&typeof x.startLine=="number"?x.startLine:"?","–",x&&typeof x.endLine=="number"?x.endLine:"?"]})})]}),m.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[m.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[m.jsx("span",{style:{fontSize:"0.95rem"},children:"⏱"}),E?`${E}s`:"n/a"]}),m.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:p1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏹"}),m.jsxs("button",{className:`toolbar-btn ${Fi?"is-active":""}`,title:"Play","aria-label":"Play",onClick:f1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[Fi?m.jsx("span",{className:"playing-indicator","aria-hidden":"true"}):null,"▶︎"]}),m.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:d1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏸"}),m.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:h1,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏮"}),m.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:_f,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:"⏭"})]})]}),Fi&&(()=>{const re=G&&G.length>0?G[$e]||G[0]:null,be=re&&typeof re.duration=="number"?re.duration:null,yt=Math.max(1e3,typeof be=="number"?be*1e3:3e3);return m.jsx("div",{className:"player-header-progress-wrapper",style:{position:"relative"},children:m.jsx("div",{className:"player-progress",style:{animationDuration:`${yt}ms`},"aria-hidden":"true"},`player-progress-${$e}-${yt}`)})})()]})})(),(()=>{if(jf)return m.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:m.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#000",aspectRatio:"16/9"}})});const x=G&&G.length>0?G[$e]||G[0]:null,E=x&&x.imageUrl?x.imageUrl:null;return m.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:E?m.jsx("img",{src:E,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):m.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:m.jsx("span",{children:"No image"})})})})(),(()=>{const x=G&&G.length>0?G[$e]||G[0]:null,E=x&&x.audioUrl?x.audioUrl:null;return m.jsx("div",{style:{marginBottom:"0.75rem"},children:E?m.jsx("audio",{ref:Ke,controls:!0,src:E,style:{width:"100%"}}):m.jsx("audio",{ref:Ke,controls:!0,disabled:!0,style:{width:"100%"}})})})(),m.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!G||G.length===0?m.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const x=G&&G.length>0?G[$e]||G[0]:null;return m.jsx("div",{children:m.jsx("div",{style:{padding:"0.5rem"},children:m.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:x&&x.blocks&&x.blocks.length>0?x.blocks.map(E=>m.jsx("div",{className:`preview-line ${E.className||""}`,dangerouslySetInnerHTML:{__html:E.text||" "}},E.id)):x&&x.snippet?x.snippet.split(/\r?\n/).map((E,j)=>m.jsx("div",{style:{whiteSpace:"pre-wrap"},children:E||" "},j)):m.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),i&&m.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:m.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Fountain.ext Format Reference"}),m.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:"×"})]}),m.jsxs("div",{className:"modal-body",children:[m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Title Page"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",m.jsx("br",{}),"Credit: Written by",m.jsx("br",{}),"Author: John Dope",m.jsx("br",{}),"Authors: John Dope and Jane Smith",m.jsx("br",{}),"Source: Based on the novel by Famous Writer",m.jsx("br",{}),"Draft Date: October 4, 2025",m.jsx("br",{}),"Date: 10/04/2025",m.jsx("br",{}),"Contact:",m.jsx("br",{}),"    John Dope",m.jsx("br",{}),"    555-123-4567",m.jsx("br",{}),"    john@example.com",m.jsx("br",{}),"    ",m.jsx("br",{}),"    Literary Agent",m.jsx("br",{}),"    Agency Name",m.jsx("br",{}),"    agent@agency.com",m.jsx("br",{}),"Notes: This is a sample script",m.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),m.jsx("p",{children:'Title page elements appear at the top of your script. All are optional. Use "Author" for single writer, "Authors" for multiple. Contact can be multi-line with indentation. End title page with === (page break).'})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Scene Headings"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["EXT. PARKING LOT - DAY",m.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",m.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),m.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Characters & Dialogue"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["MENTOR",m.jsx("br",{}),"Welcome to the team!",m.jsx("br",{}),m.jsx("br",{}),"@MENTOR",m.jsx("br",{}),"(power user syntax)",m.jsx("br",{}),m.jsx("br",{}),"USER #1",m.jsx("br",{}),"Thanks for having me.",m.jsx("br",{}),m.jsx("br",{}),"BOB O'SHAUNNESSY",m.jsx("br",{}),"(whispering)",m.jsx("br",{}),"This is a parenthetical."]}),m.jsx("p",{children:'Characters are ALL CAPS. Use @ for power user syntax or mixed-case names like "@John Doe". Names with @ in front will be counted as characters. Parentheticals go under character names.'})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Dual Dialogue"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["ALICE^",m.jsx("br",{}),"BOB^",m.jsx("br",{}),"CHARLIE^",m.jsx("br",{}),"I can't believe it!",m.jsx("br",{}),m.jsx("br",{}),"CHARLIE ^",m.jsx("br",{}),"DAVE ^",m.jsx("br",{}),"(disgusted)",m.jsx("br",{}),"Eew. no it's nooot!",m.jsx("br",{}),m.jsx("br",{})]}),m.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Action Lines"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["Bob walks into the room and looks around nervously.",m.jsx("br",{}),m.jsx("br",{}),"The computer screen flickers to life."]}),m.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Transitions"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["FADE IN:",m.jsx("br",{}),"CUT TO:",m.jsx("br",{}),"FADE TO BLACK.",m.jsx("br",{}),"> CUT TO BLACK."]}),m.jsx("p",{children:"Transitions control scene changes. Use > for power user syntax."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Centered Text"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:[">INTERMISSION<",m.jsx("br",{}),">THE END<"]}),m.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["# Act I",m.jsx("br",{}),"## Scene 1: The Beginning",m.jsx("br",{}),"### Sequence A: Setup",m.jsx("br",{}),"#### Panel 1",m.jsx("br",{}),"02:30",m.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",m.jsx("br",{}),"[a]https://example.com/dialogue.mp3",m.jsx("br",{}),m.jsx("br",{}),"#### Panel 2",m.jsx("br",{}),"01:15",m.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),m.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Notes & Comments"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["[[This is a note for the writer]]",m.jsx("br",{}),m.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),m.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),m.jsxs("div",{className:"help-section",children:[m.jsx("h3",{children:"Special Elements"}),m.jsxs("div",{className:"help-example",children:[m.jsxs("code",{children:["= Synopsis: Brief scene description",m.jsx("br",{}),m.jsx("br",{}),"===",m.jsx("br",{}),"(Page Break)",m.jsx("br",{}),m.jsx("br",{}),"~Lyrics:",m.jsx("br",{}),'~"Happy birthday to you"',m.jsx("br",{}),'~"Happy birthday to you"']}),m.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),V&&m.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:m.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Open .fountain from Drive"}),m.jsx("button",{className:"modal-close",onClick:()=>Q(!1),children:"×"})]}),tt&&m.jsxs("div",{style:{padding:"0 16px 8px 16px",color:"#cbd5e1",fontSize:13},children:[m.jsx("i",{className:"fas fa-folder-open persistence-icon","aria-hidden":"true"}),m.jsx("strong",{style:{color:"#e2e8f0"},children:tt})]}),m.jsx("div",{className:"modal-body",children:L?m.jsx("div",{children:"Loading..."}):m.jsx("div",{children:se&&se.length>0?m.jsx("ul",{children:se.map(x=>m.jsx("li",{style:{padding:"6px 0"},children:m.jsxs("a",{href:"#",onClick:async E=>{E.preventDefault();try{const j=await Eu(x.id);r(j);try{Ne(j)}catch(H){console.error("processText failed",H)}try{const J={...at()||{},fileId:x.id,fileName:x.name,file:x};try{console.log("App: before persist, localStorage=",localStorage.getItem("fountain:driveState"))}catch{}yn(J);try{console.log("App: after persist, localStorage=",localStorage.getItem("fountain:driveState"))}catch{}w(J);try{window.dispatchEvent(new CustomEvent("fountain:drive:fileSelected",{detail:x}))}catch{}}catch(H){console.error("Failed to persist selected file",H)}Q(!1)}catch(j){console.error("Failed to load file from Drive",j),alert("Could not load file from Drive. Check console for details.")}},children:[m.jsx("span",{style:{display:"inline-block",minWidth:240},children:x.name}),m.jsx("span",{style:{marginLeft:8,color:"#9ca3af",fontSize:12},children:x.modifiedTime?new Date(x.modifiedTime).toLocaleString():"unknown"})]})},x.id))}):m.jsx("div",{children:"No .fountain files found in this folder."})})}),m.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:m.jsx("button",{className:"toolbar-btn",onClick:()=>Q(!1),children:"Close"})})]})}),l&&m.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:m.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h2",{children:"Character List"}),m.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:"×"})]}),m.jsx("div",{className:"modal-body",children:Me.length===0?m.jsx("p",{children:"No characters found in the script."}):m.jsx("div",{className:"character-list",children:Me.map(x=>m.jsxs("div",{className:"character-item",children:[m.jsx("div",{className:"character-name",children:x}),m.jsxs("div",{className:"character-count",children:[ot.get(x)||0," dialogue lines"]})]},x))})})]})})]})}Tu.createRoot(document.getElementById("root")).render(m.jsx(K1.StrictMode,{children:m.jsx(bb,{})}));
