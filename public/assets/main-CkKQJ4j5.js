import{p as da,a as r1}from"./chunk-B1-1SDTH.js";function i1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var em={exports:{}},Fo={},tm={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=Symbol.for("react.element"),s1=Symbol.for("react.portal"),l1=Symbol.for("react.fragment"),o1=Symbol.for("react.strict_mode"),a1=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),h1=Symbol.for("react.forward_ref"),f1=Symbol.for("react.suspense"),d1=Symbol.for("react.memo"),p1=Symbol.for("react.lazy"),yf=Symbol.iterator;function m1(t){return t===null||typeof t!="object"?null:(t=yf&&t[yf]||t["@@iterator"],typeof t=="function"?t:null)}var nm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rm=Object.assign,im={};function yi(t,e,n){this.props=t,this.context=e,this.refs=im,this.updater=n||nm}yi.prototype.isReactComponent={};yi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sm(){}sm.prototype=yi.prototype;function Kc(t,e,n){this.props=t,this.context=e,this.refs=im,this.updater=n||nm}var qc=Kc.prototype=new sm;qc.constructor=Kc;rm(qc,yi.prototype);qc.isPureReactComponent=!0;var vf=Array.isArray,lm=Object.prototype.hasOwnProperty,Gc={current:null},om={key:!0,ref:!0,__self:!0,__source:!0};function am(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)lm.call(e,r)&&!om.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Bs,type:t,key:s,ref:l,props:i,_owner:Gc.current}}function g1(t,e){return{$$typeof:Bs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bs}function y1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wf=/\/+/g;function pa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y1(""+t.key):e.toString(36)}function Ol(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Bs:case s1:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+pa(l,0):r,vf(i)?(n="",t!=null&&(n=t.replace(wf,"$&/")+"/"),Ol(i,e,n,"",function(u){return u})):i!=null&&(Yc(i)&&(i=g1(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(wf,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",vf(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+pa(s,o);l+=Ol(s,e,n,a,i)}else if(a=m1(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+pa(s,o++),l+=Ol(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function qs(t,e,n){if(t==null)return t;var r=[],i=0;return Ol(t,r,"","",function(s){return e.call(n,s,i++)}),r}function v1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ze={current:null},Pl={transition:null},w1={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Pl,ReactCurrentOwner:Gc};function um(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:qs,forEach:function(t,e,n){qs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qs(t,function(){e++}),e},toArray:function(t){return qs(t,function(e){return e})||[]},only:function(t){if(!Yc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=yi;K.Fragment=l1;K.Profiler=a1;K.PureComponent=Kc;K.StrictMode=o1;K.Suspense=f1;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w1;K.act=um;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rm({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=Gc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)lm.call(e,a)&&!om.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Bs,type:t.type,key:i,ref:s,props:r,_owner:l}};K.createContext=function(t){return t={$$typeof:c1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u1,_context:t},t.Consumer=t};K.createElement=am;K.createFactory=function(t){var e=am.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:h1,render:t}};K.isValidElement=Yc;K.lazy=function(t){return{$$typeof:p1,_payload:{_status:-1,_result:t},_init:v1}};K.memo=function(t,e){return{$$typeof:d1,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=Pl.transition;Pl.transition={};try{t()}finally{Pl.transition=e}};K.unstable_act=um;K.useCallback=function(t,e){return Ze.current.useCallback(t,e)};K.useContext=function(t){return Ze.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return Ze.current.useDeferredValue(t)};K.useEffect=function(t,e){return Ze.current.useEffect(t,e)};K.useId=function(){return Ze.current.useId()};K.useImperativeHandle=function(t,e,n){return Ze.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return Ze.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return Ze.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return Ze.current.useMemo(t,e)};K.useReducer=function(t,e,n){return Ze.current.useReducer(t,e,n)};K.useRef=function(t){return Ze.current.useRef(t)};K.useState=function(t){return Ze.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return Ze.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return Ze.current.useTransition()};K.version="18.3.1";tm.exports=K;var I=tm.exports;const x1=i1(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1=I,S1=Symbol.for("react.element"),C1=Symbol.for("react.fragment"),b1=Object.prototype.hasOwnProperty,A1=k1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E1={key:!0,ref:!0,__self:!0,__source:!0};function cm(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)b1.call(e,r)&&!E1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:S1,type:t,key:s,ref:l,props:i,_owner:A1.current}}Fo.Fragment=C1;Fo.jsx=cm;Fo.jsxs=cm;em.exports=Fo;var y=em.exports,uu={},hm={exports:{}},vt={},fm={exports:{}},dm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,H){var _=P.length;P.push(H);e:for(;0<_;){var Y=_-1>>>1,$=P[Y];if(0<i($,H))P[Y]=H,P[_]=$,_=Y;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var H=P[0],_=P.pop();if(_!==H){P[0]=_;e:for(var Y=0,$=P.length,he=$>>>1;Y<he;){var Ee=2*(Y+1)-1,Ye=P[Ee],tt=Ee+1,an=P[tt];if(0>i(Ye,_))tt<$&&0>i(an,Ye)?(P[Y]=an,P[tt]=_,Y=tt):(P[Y]=Ye,P[Ee]=_,Y=Ee);else if(tt<$&&0>i(an,_))P[Y]=an,P[tt]=_,Y=tt;else break e}}return H}function i(P,H){var _=P.sortIndex-H.sortIndex;return _!==0?_:P.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],c=1,h=null,f=3,d=!1,m=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(P){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=P)r(u),H.sortIndex=H.expirationTime,e(a,H);else break;H=n(u)}}function k(P){if(v=!1,w(P),!m)if(n(a)!==null)m=!0,te(C);else{var H=n(u);H!==null&&Ge(k,H.startTime-P)}}function C(P,H){m=!1,v&&(v=!1,p(O),O=-1),d=!0;var _=f;try{for(w(H),h=n(a);h!==null&&(!(h.expirationTime>H)||P&&!W());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,f=h.priorityLevel;var $=Y(h.expirationTime<=H);H=t.unstable_now(),typeof $=="function"?h.callback=$:h===n(a)&&r(a),w(H)}else r(a);h=n(a)}if(h!==null)var he=!0;else{var Ee=n(u);Ee!==null&&Ge(k,Ee.startTime-H),he=!1}return he}finally{h=null,f=_,d=!1}}var A=!1,b=null,O=-1,z=5,E=-1;function W(){return!(t.unstable_now()-E<z)}function R(){if(b!==null){var P=t.unstable_now();E=P;var H=!0;try{H=b(!0,P)}finally{H?q():(A=!1,b=null)}}else A=!1}var q;if(typeof g=="function")q=function(){g(R)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ye=X.port2;X.port1.onmessage=R,q=function(){ye.postMessage(null)}}else q=function(){x(R,0)};function te(P){b=P,A||(A=!0,q())}function Ge(P,H){O=x(function(){P(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){m||d||(m=!0,te(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var _=f;f=H;try{return P()}finally{f=_}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,H){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var _=f;f=P;try{return H()}finally{f=_}},t.unstable_scheduleCallback=function(P,H,_){var Y=t.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?Y+_:Y):_=Y,P){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=_+$,P={id:c++,callback:H,priorityLevel:P,startTime:_,expirationTime:$,sortIndex:-1},_>Y?(P.sortIndex=_,e(u,P),n(a)===null&&P===n(u)&&(v?(p(O),O=-1):v=!0,Ge(k,_-Y))):(P.sortIndex=$,e(a,P),m||d||(m=!0,te(C))),P},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(P){var H=f;return function(){var _=f;f=H;try{return P.apply(this,arguments)}finally{f=_}}}})(dm);fm.exports=dm;var M1=fm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1=I,mt=M1;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pm=new Set,os={};function Er(t,e){ri(t,e),ri(t+"Capture",e)}function ri(t,e){for(os[t]=e,t=0;t<e.length;t++)pm.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cu=Object.prototype.hasOwnProperty,N1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xf={},kf={};function O1(t){return cu.call(kf,t)?!0:cu.call(xf,t)?!1:N1.test(t)?kf[t]=!0:(xf[t]=!0,!1)}function P1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D1(t,e,n,r){if(e===null||typeof e>"u"||P1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function et(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fe[t]=new et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fe[e]=new et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fe[t]=new et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fe[t]=new et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fe[t]=new et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fe[t]=new et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fe[t]=new et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fe[t]=new et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fe[t]=new et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qc=/[\-:]([a-z])/g;function Jc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qc,Jc);Fe[e]=new et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qc,Jc);Fe[e]=new et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qc,Jc);Fe[e]=new et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fe[t]=new et(t,1,!1,t.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fe[t]=new et(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xc(t,e,n,r){var i=Fe.hasOwnProperty(e)?Fe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(D1(e,n,i,r)&&(n=null),r||i===null?O1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sn=T1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gs=Symbol.for("react.element"),Dr=Symbol.for("react.portal"),Lr=Symbol.for("react.fragment"),Zc=Symbol.for("react.strict_mode"),hu=Symbol.for("react.profiler"),mm=Symbol.for("react.provider"),gm=Symbol.for("react.context"),eh=Symbol.for("react.forward_ref"),fu=Symbol.for("react.suspense"),du=Symbol.for("react.suspense_list"),th=Symbol.for("react.memo"),An=Symbol.for("react.lazy"),ym=Symbol.for("react.offscreen"),Sf=Symbol.iterator;function bi(t){return t===null||typeof t!="object"?null:(t=Sf&&t[Sf]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,ma;function Fi(t){if(ma===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ma=e&&e[1]||""}return`
`+ma+t}var ga=!1;function ya(t,e){if(!t||ga)return"";ga=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{ga=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fi(t):""}function L1(t){switch(t.tag){case 5:return Fi(t.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 2:case 15:return t=ya(t.type,!1),t;case 11:return t=ya(t.type.render,!1),t;case 1:return t=ya(t.type,!0),t;default:return""}}function pu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lr:return"Fragment";case Dr:return"Portal";case hu:return"Profiler";case Zc:return"StrictMode";case fu:return"Suspense";case du:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gm:return(t.displayName||"Context")+".Consumer";case mm:return(t._context.displayName||"Context")+".Provider";case eh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case th:return e=t.displayName||null,e!==null?e:pu(t.type)||"Memo";case An:e=t._payload,t=t._init;try{return pu(t(e))}catch{}}return null}function R1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pu(e);case 8:return e===Zc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B1(t){var e=vm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ys(t){t._valueTracker||(t._valueTracker=B1(t))}function wm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mu(t,e){var n=e.checked;return ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xm(t,e){e=e.checked,e!=null&&Xc(t,"checked",e,!1)}function gu(t,e){xm(t,e);var n=Kn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yu(t,e.type,n):e.hasOwnProperty("defaultValue")&&yu(t,e.type,Kn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yu(t,e,n){(e!=="number"||Yl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zi=Array.isArray;function qr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function vu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Af(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(zi(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kn(n)}}function km(t,e){var n=Kn(e.value),r=Kn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ef(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qs,Cm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qs=Qs||document.createElement("div"),Qs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function as(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I1=["Webkit","ms","Moz","O"];Object.keys($i).forEach(function(t){I1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$i[e]=$i[t]})});function bm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$i.hasOwnProperty(t)&&$i[t]?(""+e).trim():e+"px"}function Am(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=bm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var j1=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xu(t,e){if(e){if(j1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function ku(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Su=null;function nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cu=null,Gr=null,Yr=null;function Mf(t){if(t=Fs(t)){if(typeof Cu!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Vo(e),Cu(t.stateNode,t.type,e))}}function Em(t){Gr?Yr?Yr.push(t):Yr=[t]:Gr=t}function Mm(){if(Gr){var t=Gr,e=Yr;if(Yr=Gr=null,Mf(t),e)for(t=0;t<e.length;t++)Mf(e[t])}}function Tm(t,e){return t(e)}function Nm(){}var va=!1;function Om(t,e,n){if(va)return t(e,n);va=!0;try{return Tm(t,e,n)}finally{va=!1,(Gr!==null||Yr!==null)&&(Nm(),Mm())}}function us(t,e){var n=t.stateNode;if(n===null)return null;var r=Vo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var bu=!1;if(yn)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){bu=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{bu=!1}function F1(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ki=!1,Ql=null,Jl=!1,Au=null,z1={onError:function(t){Ki=!0,Ql=t}};function _1(t,e,n,r,i,s,l,o,a){Ki=!1,Ql=null,F1.apply(z1,arguments)}function H1(t,e,n,r,i,s,l,o,a){if(_1.apply(this,arguments),Ki){if(Ki){var u=Ql;Ki=!1,Ql=null}else throw Error(T(198));Jl||(Jl=!0,Au=u)}}function Mr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Pm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tf(t){if(Mr(t)!==t)throw Error(T(188))}function W1(t){var e=t.alternate;if(!e){if(e=Mr(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Tf(i),t;if(s===r)return Tf(i),e;s=s.sibling}throw Error(T(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function Dm(t){return t=W1(t),t!==null?Lm(t):null}function Lm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lm(t);if(e!==null)return e;t=t.sibling}return null}var Rm=mt.unstable_scheduleCallback,Nf=mt.unstable_cancelCallback,V1=mt.unstable_shouldYield,U1=mt.unstable_requestPaint,xe=mt.unstable_now,$1=mt.unstable_getCurrentPriorityLevel,rh=mt.unstable_ImmediatePriority,Bm=mt.unstable_UserBlockingPriority,Xl=mt.unstable_NormalPriority,K1=mt.unstable_LowPriority,Im=mt.unstable_IdlePriority,zo=null,sn=null;function q1(t){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(zo,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:Q1,G1=Math.log,Y1=Math.LN2;function Q1(t){return t>>>=0,t===0?32:31-(G1(t)/Y1|0)|0}var Js=64,Xs=4194304;function _i(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=_i(o):(s&=l,s!==0&&(r=_i(s)))}else l=n&~i,l!==0?r=_i(l):s!==0&&(r=_i(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ft(e),i=1<<n,r|=t[n],e&=~i;return r}function J1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Ft(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=J1(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Eu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jm(){var t=Js;return Js<<=1,!(Js&4194240)&&(Js=64),t}function wa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Is(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ft(e),t[e]=n}function Z1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ft(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ih(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ft(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ne=0;function Fm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zm,sh,_m,Hm,Wm,Mu=!1,Zs=[],jn=null,Fn=null,zn=null,cs=new Map,hs=new Map,Nn=[],ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Of(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":cs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(e.pointerId)}}function Ei(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Fs(e),e!==null&&sh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tw(t,e,n,r,i){switch(e){case"focusin":return jn=Ei(jn,t,e,n,r,i),!0;case"dragenter":return Fn=Ei(Fn,t,e,n,r,i),!0;case"mouseover":return zn=Ei(zn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return cs.set(s,Ei(cs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,hs.set(s,Ei(hs.get(s)||null,t,e,n,r,i)),!0}return!1}function Vm(t){var e=ar(t.target);if(e!==null){var n=Mr(e);if(n!==null){if(e=n.tag,e===13){if(e=Pm(n),e!==null){t.blockedOn=e,Wm(t.priority,function(){_m(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Su=r,n.target.dispatchEvent(r),Su=null}else return e=Fs(n),e!==null&&sh(e),t.blockedOn=n,!1;e.shift()}return!0}function Pf(t,e,n){Dl(t)&&n.delete(e)}function nw(){Mu=!1,jn!==null&&Dl(jn)&&(jn=null),Fn!==null&&Dl(Fn)&&(Fn=null),zn!==null&&Dl(zn)&&(zn=null),cs.forEach(Pf),hs.forEach(Pf)}function Mi(t,e){t.blockedOn===e&&(t.blockedOn=null,Mu||(Mu=!0,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,nw)))}function fs(t){function e(i){return Mi(i,t)}if(0<Zs.length){Mi(Zs[0],t);for(var n=1;n<Zs.length;n++){var r=Zs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jn!==null&&Mi(jn,t),Fn!==null&&Mi(Fn,t),zn!==null&&Mi(zn,t),cs.forEach(e),hs.forEach(e),n=0;n<Nn.length;n++)r=Nn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)Vm(n),n.blockedOn===null&&Nn.shift()}var Qr=Sn.ReactCurrentBatchConfig,eo=!0;function rw(t,e,n,r){var i=ne,s=Qr.transition;Qr.transition=null;try{ne=1,lh(t,e,n,r)}finally{ne=i,Qr.transition=s}}function iw(t,e,n,r){var i=ne,s=Qr.transition;Qr.transition=null;try{ne=4,lh(t,e,n,r)}finally{ne=i,Qr.transition=s}}function lh(t,e,n,r){if(eo){var i=Tu(t,e,n,r);if(i===null)Na(t,e,r,to,n),Of(t,r);else if(tw(i,t,e,n,r))r.stopPropagation();else if(Of(t,r),e&4&&-1<ew.indexOf(t)){for(;i!==null;){var s=Fs(i);if(s!==null&&zm(s),s=Tu(t,e,n,r),s===null&&Na(t,e,r,to,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Na(t,e,r,null,n)}}var to=null;function Tu(t,e,n,r){if(to=null,t=nh(r),t=ar(t),t!==null)if(e=Mr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Pm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return to=t,null}function Um(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($1()){case rh:return 1;case Bm:return 4;case Xl:case K1:return 16;case Im:return 536870912;default:return 16}default:return 16}}var Dn=null,oh=null,Ll=null;function $m(){if(Ll)return Ll;var t,e=oh,n=e.length,r,i="value"in Dn?Dn.value:Dn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Ll=i.slice(t,1<r?1-r:void 0)}function Rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function el(){return!0}function Df(){return!1}function wt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?el:Df,this.isPropagationStopped=Df,this}return ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ah=wt(vi),js=ge({},vi,{view:0,detail:0}),sw=wt(js),xa,ka,Ti,_o=ge({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ti&&(Ti&&t.type==="mousemove"?(xa=t.screenX-Ti.screenX,ka=t.screenY-Ti.screenY):ka=xa=0,Ti=t),xa)},movementY:function(t){return"movementY"in t?t.movementY:ka}}),Lf=wt(_o),lw=ge({},_o,{dataTransfer:0}),ow=wt(lw),aw=ge({},js,{relatedTarget:0}),Sa=wt(aw),uw=ge({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),cw=wt(uw),hw=ge({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fw=wt(hw),dw=ge({},vi,{data:0}),Rf=wt(dw),pw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gw[t])?!!e[t]:!1}function uh(){return yw}var vw=ge({},js,{key:function(t){if(t.key){var e=pw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uh,charCode:function(t){return t.type==="keypress"?Rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ww=wt(vw),xw=ge({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bf=wt(xw),kw=ge({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uh}),Sw=wt(kw),Cw=ge({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bw=wt(Cw),Aw=ge({},_o,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ew=wt(Aw),Mw=[9,13,27,32],ch=yn&&"CompositionEvent"in window,qi=null;yn&&"documentMode"in document&&(qi=document.documentMode);var Tw=yn&&"TextEvent"in window&&!qi,Km=yn&&(!ch||qi&&8<qi&&11>=qi),If=" ",jf=!1;function qm(t,e){switch(t){case"keyup":return Mw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rr=!1;function Nw(t,e){switch(t){case"compositionend":return Gm(e);case"keypress":return e.which!==32?null:(jf=!0,If);case"textInput":return t=e.data,t===If&&jf?null:t;default:return null}}function Ow(t,e){if(Rr)return t==="compositionend"||!ch&&qm(t,e)?(t=$m(),Ll=oh=Dn=null,Rr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Km&&e.locale!=="ko"?null:e.data;default:return null}}var Pw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ff(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Pw[t.type]:e==="textarea"}function Ym(t,e,n,r){Em(r),e=no(e,"onChange"),0<e.length&&(n=new ah("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gi=null,ds=null;function Dw(t){lg(t,0)}function Ho(t){var e=jr(t);if(wm(e))return t}function Lw(t,e){if(t==="change")return e}var Qm=!1;if(yn){var Ca;if(yn){var ba="oninput"in document;if(!ba){var zf=document.createElement("div");zf.setAttribute("oninput","return;"),ba=typeof zf.oninput=="function"}Ca=ba}else Ca=!1;Qm=Ca&&(!document.documentMode||9<document.documentMode)}function _f(){Gi&&(Gi.detachEvent("onpropertychange",Jm),ds=Gi=null)}function Jm(t){if(t.propertyName==="value"&&Ho(ds)){var e=[];Ym(e,ds,t,nh(t)),Om(Dw,e)}}function Rw(t,e,n){t==="focusin"?(_f(),Gi=e,ds=n,Gi.attachEvent("onpropertychange",Jm)):t==="focusout"&&_f()}function Bw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ho(ds)}function Iw(t,e){if(t==="click")return Ho(e)}function jw(t,e){if(t==="input"||t==="change")return Ho(e)}function Fw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _t=typeof Object.is=="function"?Object.is:Fw;function ps(t,e){if(_t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cu.call(e,i)||!_t(t[i],e[i]))return!1}return!0}function Hf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wf(t,e){var n=Hf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hf(n)}}function Xm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zm(){for(var t=window,e=Yl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yl(t.document)}return e}function hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zw(t){var e=Zm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xm(n.ownerDocument.documentElement,n)){if(r!==null&&hh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Wf(n,s);var l=Wf(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _w=yn&&"documentMode"in document&&11>=document.documentMode,Br=null,Nu=null,Yi=null,Ou=!1;function Vf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ou||Br==null||Br!==Yl(r)||(r=Br,"selectionStart"in r&&hh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yi&&ps(Yi,r)||(Yi=r,r=no(Nu,"onSelect"),0<r.length&&(e=new ah("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Br)))}function tl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ir={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionend:tl("Transition","TransitionEnd")},Aa={},eg={};yn&&(eg=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function Wo(t){if(Aa[t])return Aa[t];if(!Ir[t])return t;var e=Ir[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eg)return Aa[t]=e[n];return t}var tg=Wo("animationend"),ng=Wo("animationiteration"),rg=Wo("animationstart"),ig=Wo("transitionend"),sg=new Map,Uf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(t,e){sg.set(t,e),Er(e,[t])}for(var Ea=0;Ea<Uf.length;Ea++){var Ma=Uf[Ea],Hw=Ma.toLowerCase(),Ww=Ma[0].toUpperCase()+Ma.slice(1);er(Hw,"on"+Ww)}er(tg,"onAnimationEnd");er(ng,"onAnimationIteration");er(rg,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(ig,"onTransitionEnd");ri("onMouseEnter",["mouseout","mouseover"]);ri("onMouseLeave",["mouseout","mouseover"]);ri("onPointerEnter",["pointerout","pointerover"]);ri("onPointerLeave",["pointerout","pointerover"]);Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Er("onBeforeInput",["compositionend","keypress","textInput","paste"]);Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function $f(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,H1(r,e,void 0,t),t.currentTarget=null}function lg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;$f(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;$f(i,o,u),s=a}}}if(Jl)throw t=Au,Jl=!1,Au=null,t}function oe(t,e){var n=e[Bu];n===void 0&&(n=e[Bu]=new Set);var r=t+"__bubble";n.has(r)||(og(e,t,2,!1),n.add(r))}function Ta(t,e,n){var r=0;e&&(r|=4),og(n,t,r,e)}var nl="_reactListening"+Math.random().toString(36).slice(2);function ms(t){if(!t[nl]){t[nl]=!0,pm.forEach(function(n){n!=="selectionchange"&&(Vw.has(n)||Ta(n,!1,t),Ta(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nl]||(e[nl]=!0,Ta("selectionchange",!1,e))}}function og(t,e,n,r){switch(Um(e)){case 1:var i=rw;break;case 4:i=iw;break;default:i=lh}n=i.bind(null,e,n,t),i=void 0,!bu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Na(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=ar(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}Om(function(){var u=s,c=nh(n),h=[];e:{var f=sg.get(t);if(f!==void 0){var d=ah,m=t;switch(t){case"keypress":if(Rl(n)===0)break e;case"keydown":case"keyup":d=ww;break;case"focusin":m="focus",d=Sa;break;case"focusout":m="blur",d=Sa;break;case"beforeblur":case"afterblur":d=Sa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=ow;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Sw;break;case tg:case ng:case rg:d=cw;break;case ig:d=bw;break;case"scroll":d=sw;break;case"wheel":d=Ew;break;case"copy":case"cut":case"paste":d=fw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Bf}var v=(e&4)!==0,x=!v&&t==="scroll",p=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,w;g!==null;){w=g;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,p!==null&&(k=us(g,p),k!=null&&v.push(gs(g,k,w)))),x)break;g=g.return}0<v.length&&(f=new d(f,m,null,n,c),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==Su&&(m=n.relatedTarget||n.fromElement)&&(ar(m)||m[vn]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(m=n.relatedTarget||n.toElement,d=u,m=m?ar(m):null,m!==null&&(x=Mr(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=u),d!==m)){if(v=Lf,k="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Bf,k="onPointerLeave",p="onPointerEnter",g="pointer"),x=d==null?f:jr(d),w=m==null?f:jr(m),f=new v(k,g+"leave",d,n,c),f.target=x,f.relatedTarget=w,k=null,ar(c)===u&&(v=new v(p,g+"enter",m,n,c),v.target=w,v.relatedTarget=x,k=v),x=k,d&&m)t:{for(v=d,p=m,g=0,w=v;w;w=Tr(w))g++;for(w=0,k=p;k;k=Tr(k))w++;for(;0<g-w;)v=Tr(v),g--;for(;0<w-g;)p=Tr(p),w--;for(;g--;){if(v===p||p!==null&&v===p.alternate)break t;v=Tr(v),p=Tr(p)}v=null}else v=null;d!==null&&Kf(h,f,d,v,!1),m!==null&&x!==null&&Kf(h,x,m,v,!0)}}e:{if(f=u?jr(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=Lw;else if(Ff(f))if(Qm)C=jw;else{C=Bw;var A=Rw}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Iw);if(C&&(C=C(t,u))){Ym(h,C,n,c);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&yu(f,"number",f.value)}switch(A=u?jr(u):window,t){case"focusin":(Ff(A)||A.contentEditable==="true")&&(Br=A,Nu=u,Yi=null);break;case"focusout":Yi=Nu=Br=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,Vf(h,n,c);break;case"selectionchange":if(_w)break;case"keydown":case"keyup":Vf(h,n,c)}var b;if(ch)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Rr?qm(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(Km&&n.locale!=="ko"&&(Rr||O!=="onCompositionStart"?O==="onCompositionEnd"&&Rr&&(b=$m()):(Dn=c,oh="value"in Dn?Dn.value:Dn.textContent,Rr=!0)),A=no(u,O),0<A.length&&(O=new Rf(O,t,null,n,c),h.push({event:O,listeners:A}),b?O.data=b:(b=Gm(n),b!==null&&(O.data=b)))),(b=Tw?Nw(t,n):Ow(t,n))&&(u=no(u,"onBeforeInput"),0<u.length&&(c=new Rf("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=b))}lg(h,e)})}function gs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function no(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=us(t,n),s!=null&&r.unshift(gs(t,s,i)),s=us(t,e),s!=null&&r.push(gs(t,s,i))),t=t.return}return r}function Tr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kf(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=us(n,s),a!=null&&l.unshift(gs(n,a,o))):i||(a=us(n,s),a!=null&&l.push(gs(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Uw=/\r\n?/g,$w=/\u0000|\uFFFD/g;function qf(t){return(typeof t=="string"?t:""+t).replace(Uw,`
`).replace($w,"")}function rl(t,e,n){if(e=qf(e),qf(t)!==e&&n)throw Error(T(425))}function ro(){}var Pu=null,Du=null;function Lu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ru=typeof setTimeout=="function"?setTimeout:void 0,Kw=typeof clearTimeout=="function"?clearTimeout:void 0,Gf=typeof Promise=="function"?Promise:void 0,qw=typeof queueMicrotask=="function"?queueMicrotask:typeof Gf<"u"?function(t){return Gf.resolve(null).then(t).catch(Gw)}:Ru;function Gw(t){setTimeout(function(){throw t})}function Oa(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),fs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fs(e)}function _n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wi=Math.random().toString(36).slice(2),Zt="__reactFiber$"+wi,ys="__reactProps$"+wi,vn="__reactContainer$"+wi,Bu="__reactEvents$"+wi,Yw="__reactListeners$"+wi,Qw="__reactHandles$"+wi;function ar(t){var e=t[Zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[Zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yf(t);t!==null;){if(n=t[Zt])return n;t=Yf(t)}return e}t=n,n=t.parentNode}return null}function Fs(t){return t=t[Zt]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Vo(t){return t[ys]||null}var Iu=[],Fr=-1;function tr(t){return{current:t}}function ue(t){0>Fr||(t.current=Iu[Fr],Iu[Fr]=null,Fr--)}function se(t,e){Fr++,Iu[Fr]=t.current,t.current=e}var qn={},Ke=tr(qn),st=tr(!1),gr=qn;function ii(t,e){var n=t.type.contextTypes;if(!n)return qn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function lt(t){return t=t.childContextTypes,t!=null}function io(){ue(st),ue(Ke)}function Qf(t,e,n){if(Ke.current!==qn)throw Error(T(168));se(Ke,e),se(st,n)}function ag(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(T(108,R1(t)||"Unknown",i));return ge({},n,r)}function so(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qn,gr=Ke.current,se(Ke,t),se(st,st.current),!0}function Jf(t,e,n){var r=t.stateNode;if(!r)throw Error(T(169));n?(t=ag(t,e,gr),r.__reactInternalMemoizedMergedChildContext=t,ue(st),ue(Ke),se(Ke,t)):ue(st),se(st,n)}var cn=null,Uo=!1,Pa=!1;function ug(t){cn===null?cn=[t]:cn.push(t)}function Jw(t){Uo=!0,ug(t)}function nr(){if(!Pa&&cn!==null){Pa=!0;var t=0,e=ne;try{var n=cn;for(ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}cn=null,Uo=!1}catch(i){throw cn!==null&&(cn=cn.slice(t+1)),Rm(rh,nr),i}finally{ne=e,Pa=!1}}return null}var zr=[],_r=0,lo=null,oo=0,xt=[],kt=0,yr=null,fn=1,dn="";function sr(t,e){zr[_r++]=oo,zr[_r++]=lo,lo=t,oo=e}function cg(t,e,n){xt[kt++]=fn,xt[kt++]=dn,xt[kt++]=yr,yr=t;var r=fn;t=dn;var i=32-Ft(r)-1;r&=~(1<<i),n+=1;var s=32-Ft(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,fn=1<<32-Ft(e)+i|n<<i|r,dn=s+t}else fn=1<<s|n<<i|r,dn=t}function fh(t){t.return!==null&&(sr(t,1),cg(t,1,0))}function dh(t){for(;t===lo;)lo=zr[--_r],zr[_r]=null,oo=zr[--_r],zr[_r]=null;for(;t===yr;)yr=xt[--kt],xt[kt]=null,dn=xt[--kt],xt[kt]=null,fn=xt[--kt],xt[kt]=null}var pt=null,dt=null,ce=!1,It=null;function hg(t,e){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pt=t,dt=_n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pt=t,dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yr!==null?{id:fn,overflow:dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pt=t,dt=null,!0):!1;default:return!1}}function ju(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fu(t){if(ce){var e=dt;if(e){var n=e;if(!Xf(t,e)){if(ju(t))throw Error(T(418));e=_n(n.nextSibling);var r=pt;e&&Xf(t,e)?hg(r,n):(t.flags=t.flags&-4097|2,ce=!1,pt=t)}}else{if(ju(t))throw Error(T(418));t.flags=t.flags&-4097|2,ce=!1,pt=t}}}function Zf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pt=t}function il(t){if(t!==pt)return!1;if(!ce)return Zf(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lu(t.type,t.memoizedProps)),e&&(e=dt)){if(ju(t))throw fg(),Error(T(418));for(;e;)hg(t,e),e=_n(e.nextSibling)}if(Zf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dt=_n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dt=null}}else dt=pt?_n(t.stateNode.nextSibling):null;return!0}function fg(){for(var t=dt;t;)t=_n(t.nextSibling)}function si(){dt=pt=null,ce=!1}function ph(t){It===null?It=[t]:It.push(t)}var Xw=Sn.ReactCurrentBatchConfig;function Ni(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function sl(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ed(t){var e=t._init;return e(t._payload)}function dg(t){function e(p,g){if(t){var w=p.deletions;w===null?(p.deletions=[g],p.flags|=16):w.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Un(p,g),p.index=0,p.sibling=null,p}function s(p,g,w){return p.index=w,t?(w=p.alternate,w!==null?(w=w.index,w<g?(p.flags|=2,g):w):(p.flags|=2,g)):(p.flags|=1048576,g)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,g,w,k){return g===null||g.tag!==6?(g=Fa(w,p.mode,k),g.return=p,g):(g=i(g,w),g.return=p,g)}function a(p,g,w,k){var C=w.type;return C===Lr?c(p,g,w.props.children,k,w.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===An&&ed(C)===g.type)?(k=i(g,w.props),k.ref=Ni(p,g,w),k.return=p,k):(k=Hl(w.type,w.key,w.props,null,p.mode,k),k.ref=Ni(p,g,w),k.return=p,k)}function u(p,g,w,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=za(w,p.mode,k),g.return=p,g):(g=i(g,w.children||[]),g.return=p,g)}function c(p,g,w,k,C){return g===null||g.tag!==7?(g=pr(w,p.mode,k,C),g.return=p,g):(g=i(g,w),g.return=p,g)}function h(p,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Fa(""+g,p.mode,w),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Gs:return w=Hl(g.type,g.key,g.props,null,p.mode,w),w.ref=Ni(p,null,g),w.return=p,w;case Dr:return g=za(g,p.mode,w),g.return=p,g;case An:var k=g._init;return h(p,k(g._payload),w)}if(zi(g)||bi(g))return g=pr(g,p.mode,w,null),g.return=p,g;sl(p,g)}return null}function f(p,g,w,k){var C=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:o(p,g,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gs:return w.key===C?a(p,g,w,k):null;case Dr:return w.key===C?u(p,g,w,k):null;case An:return C=w._init,f(p,g,C(w._payload),k)}if(zi(w)||bi(w))return C!==null?null:c(p,g,w,k,null);sl(p,w)}return null}function d(p,g,w,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return p=p.get(w)||null,o(g,p,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Gs:return p=p.get(k.key===null?w:k.key)||null,a(g,p,k,C);case Dr:return p=p.get(k.key===null?w:k.key)||null,u(g,p,k,C);case An:var A=k._init;return d(p,g,w,A(k._payload),C)}if(zi(k)||bi(k))return p=p.get(w)||null,c(g,p,k,C,null);sl(g,k)}return null}function m(p,g,w,k){for(var C=null,A=null,b=g,O=g=0,z=null;b!==null&&O<w.length;O++){b.index>O?(z=b,b=null):z=b.sibling;var E=f(p,b,w[O],k);if(E===null){b===null&&(b=z);break}t&&b&&E.alternate===null&&e(p,b),g=s(E,g,O),A===null?C=E:A.sibling=E,A=E,b=z}if(O===w.length)return n(p,b),ce&&sr(p,O),C;if(b===null){for(;O<w.length;O++)b=h(p,w[O],k),b!==null&&(g=s(b,g,O),A===null?C=b:A.sibling=b,A=b);return ce&&sr(p,O),C}for(b=r(p,b);O<w.length;O++)z=d(b,p,O,w[O],k),z!==null&&(t&&z.alternate!==null&&b.delete(z.key===null?O:z.key),g=s(z,g,O),A===null?C=z:A.sibling=z,A=z);return t&&b.forEach(function(W){return e(p,W)}),ce&&sr(p,O),C}function v(p,g,w,k){var C=bi(w);if(typeof C!="function")throw Error(T(150));if(w=C.call(w),w==null)throw Error(T(151));for(var A=C=null,b=g,O=g=0,z=null,E=w.next();b!==null&&!E.done;O++,E=w.next()){b.index>O?(z=b,b=null):z=b.sibling;var W=f(p,b,E.value,k);if(W===null){b===null&&(b=z);break}t&&b&&W.alternate===null&&e(p,b),g=s(W,g,O),A===null?C=W:A.sibling=W,A=W,b=z}if(E.done)return n(p,b),ce&&sr(p,O),C;if(b===null){for(;!E.done;O++,E=w.next())E=h(p,E.value,k),E!==null&&(g=s(E,g,O),A===null?C=E:A.sibling=E,A=E);return ce&&sr(p,O),C}for(b=r(p,b);!E.done;O++,E=w.next())E=d(b,p,O,E.value,k),E!==null&&(t&&E.alternate!==null&&b.delete(E.key===null?O:E.key),g=s(E,g,O),A===null?C=E:A.sibling=E,A=E);return t&&b.forEach(function(R){return e(p,R)}),ce&&sr(p,O),C}function x(p,g,w,k){if(typeof w=="object"&&w!==null&&w.type===Lr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Gs:e:{for(var C=w.key,A=g;A!==null;){if(A.key===C){if(C=w.type,C===Lr){if(A.tag===7){n(p,A.sibling),g=i(A,w.props.children),g.return=p,p=g;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===An&&ed(C)===A.type){n(p,A.sibling),g=i(A,w.props),g.ref=Ni(p,A,w),g.return=p,p=g;break e}n(p,A);break}else e(p,A);A=A.sibling}w.type===Lr?(g=pr(w.props.children,p.mode,k,w.key),g.return=p,p=g):(k=Hl(w.type,w.key,w.props,null,p.mode,k),k.ref=Ni(p,g,w),k.return=p,p=k)}return l(p);case Dr:e:{for(A=w.key;g!==null;){if(g.key===A)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(p,g.sibling),g=i(g,w.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=za(w,p.mode,k),g.return=p,p=g}return l(p);case An:return A=w._init,x(p,g,A(w._payload),k)}if(zi(w))return m(p,g,w,k);if(bi(w))return v(p,g,w,k);sl(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(p,g.sibling),g=i(g,w),g.return=p,p=g):(n(p,g),g=Fa(w,p.mode,k),g.return=p,p=g),l(p)):n(p,g)}return x}var li=dg(!0),pg=dg(!1),ao=tr(null),uo=null,Hr=null,mh=null;function gh(){mh=Hr=uo=null}function yh(t){var e=ao.current;ue(ao),t._currentValue=e}function zu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jr(t,e){uo=t,mh=Hr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(it=!0),t.firstContext=null)}function Tt(t){var e=t._currentValue;if(mh!==t)if(t={context:t,memoizedValue:e,next:null},Hr===null){if(uo===null)throw Error(T(308));Hr=t,uo.dependencies={lanes:0,firstContext:t}}else Hr=Hr.next=t;return e}var ur=null;function vh(t){ur===null?ur=[t]:ur.push(t)}function mg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vh(e)):(n.next=i.next,i.next=n),e.interleaved=n,wn(t,r)}function wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var En=!1;function wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wn(t,n)}return i=r.interleaved,i===null?(e.next=e,vh(r)):(e.next=i.next,i.next=e),r.interleaved=e,wn(t,n)}function Bl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}function td(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function co(t,e,n,r){var i=t.updateQueue;En=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==l&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;l=0,c=u=a=null,o=s;do{var f=o.lane,d=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,v=o;switch(f=e,d=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(d,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(d,h,f):m,f==null)break e;h=ge({},h,f);break e;case 2:En=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=d,a=h):c=c.next=d,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=h),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wr|=l,t.lanes=l,t.memoizedState=h}}function nd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(T(191,i));i.call(r)}}}var zs={},ln=tr(zs),vs=tr(zs),ws=tr(zs);function cr(t){if(t===zs)throw Error(T(174));return t}function xh(t,e){switch(se(ws,e),se(vs,t),se(ln,zs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wu(e,t)}ue(ln),se(ln,e)}function oi(){ue(ln),ue(vs),ue(ws)}function yg(t){cr(ws.current);var e=cr(ln.current),n=wu(e,t.type);e!==n&&(se(vs,t),se(ln,n))}function kh(t){vs.current===t&&(ue(ln),ue(vs))}var de=tr(0);function ho(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Da=[];function Sh(){for(var t=0;t<Da.length;t++)Da[t]._workInProgressVersionPrimary=null;Da.length=0}var Il=Sn.ReactCurrentDispatcher,La=Sn.ReactCurrentBatchConfig,vr=0,me=null,Ce=null,Me=null,fo=!1,Qi=!1,xs=0,Zw=0;function _e(){throw Error(T(321))}function Ch(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_t(t[n],e[n]))return!1;return!0}function bh(t,e,n,r,i,s){if(vr=s,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Il.current=t===null||t.memoizedState===null?rx:ix,t=n(r,i),Qi){s=0;do{if(Qi=!1,xs=0,25<=s)throw Error(T(301));s+=1,Me=Ce=null,e.updateQueue=null,Il.current=sx,t=n(r,i)}while(Qi)}if(Il.current=po,e=Ce!==null&&Ce.next!==null,vr=0,Me=Ce=me=null,fo=!1,e)throw Error(T(300));return t}function Ah(){var t=xs!==0;return xs=0,t}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?me.memoizedState=Me=t:Me=Me.next=t,Me}function Nt(){if(Ce===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=Me===null?me.memoizedState:Me.next;if(e!==null)Me=e,Ce=t;else{if(t===null)throw Error(T(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Me===null?me.memoizedState=Me=t:Me=Me.next=t}return Me}function ks(t,e){return typeof e=="function"?e(t):e}function Ra(t){var e=Nt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=Ce,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var c=u.lane;if((vr&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=h,l=r):a=a.next=h,me.lanes|=c,wr|=c}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,_t(r,e.memoizedState)||(it=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,me.lanes|=s,wr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ba(t){var e=Nt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);_t(s,e.memoizedState)||(it=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function vg(){}function wg(t,e){var n=me,r=Nt(),i=e(),s=!_t(r.memoizedState,i);if(s&&(r.memoizedState=i,it=!0),r=r.queue,Eh(Sg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,Ss(9,kg.bind(null,n,r,i,e),void 0,null),Ne===null)throw Error(T(349));vr&30||xg(n,e,i)}return i}function xg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kg(t,e,n,r){e.value=n,e.getSnapshot=r,Cg(e)&&bg(t)}function Sg(t,e,n){return n(function(){Cg(e)&&bg(t)})}function Cg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_t(t,n)}catch{return!0}}function bg(t){var e=wn(t,1);e!==null&&zt(e,t,1,-1)}function rd(t){var e=Xt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:t},e.queue=t,t=t.dispatch=nx.bind(null,me,t),[e.memoizedState,t]}function Ss(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ag(){return Nt().memoizedState}function jl(t,e,n,r){var i=Xt();me.flags|=t,i.memoizedState=Ss(1|e,n,void 0,r===void 0?null:r)}function $o(t,e,n,r){var i=Nt();r=r===void 0?null:r;var s=void 0;if(Ce!==null){var l=Ce.memoizedState;if(s=l.destroy,r!==null&&Ch(r,l.deps)){i.memoizedState=Ss(e,n,s,r);return}}me.flags|=t,i.memoizedState=Ss(1|e,n,s,r)}function id(t,e){return jl(8390656,8,t,e)}function Eh(t,e){return $o(2048,8,t,e)}function Eg(t,e){return $o(4,2,t,e)}function Mg(t,e){return $o(4,4,t,e)}function Tg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ng(t,e,n){return n=n!=null?n.concat([t]):null,$o(4,4,Tg.bind(null,e,t),n)}function Mh(){}function Og(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ch(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Pg(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ch(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dg(t,e,n){return vr&21?(_t(n,e)||(n=jm(),me.lanes|=n,wr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,it=!0),t.memoizedState=n)}function ex(t,e){var n=ne;ne=n!==0&&4>n?n:4,t(!0);var r=La.transition;La.transition={};try{t(!1),e()}finally{ne=n,La.transition=r}}function Lg(){return Nt().memoizedState}function tx(t,e,n){var r=Vn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rg(t))Bg(e,n);else if(n=mg(t,e,n,r),n!==null){var i=Je();zt(n,t,r,i),Ig(n,e,r)}}function nx(t,e,n){var r=Vn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rg(t))Bg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,_t(o,l)){var a=e.interleaved;a===null?(i.next=i,vh(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=mg(t,e,i,r),n!==null&&(i=Je(),zt(n,t,r,i),Ig(n,e,r))}}function Rg(t){var e=t.alternate;return t===me||e!==null&&e===me}function Bg(t,e){Qi=fo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ig(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}var po={readContext:Tt,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},rx={readContext:Tt,useCallback:function(t,e){return Xt().memoizedState=[t,e===void 0?null:e],t},useContext:Tt,useEffect:id,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jl(4194308,4,Tg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jl(4194308,4,t,e)},useInsertionEffect:function(t,e){return jl(4,2,t,e)},useMemo:function(t,e){var n=Xt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tx.bind(null,me,t),[r.memoizedState,t]},useRef:function(t){var e=Xt();return t={current:t},e.memoizedState=t},useState:rd,useDebugValue:Mh,useDeferredValue:function(t){return Xt().memoizedState=t},useTransition:function(){var t=rd(!1),e=t[0];return t=ex.bind(null,t[1]),Xt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=me,i=Xt();if(ce){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),Ne===null)throw Error(T(349));vr&30||xg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,id(Sg.bind(null,r,s,t),[t]),r.flags|=2048,Ss(9,kg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Xt(),e=Ne.identifierPrefix;if(ce){var n=dn,r=fn;n=(r&~(1<<32-Ft(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Zw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ix={readContext:Tt,useCallback:Og,useContext:Tt,useEffect:Eh,useImperativeHandle:Ng,useInsertionEffect:Eg,useLayoutEffect:Mg,useMemo:Pg,useReducer:Ra,useRef:Ag,useState:function(){return Ra(ks)},useDebugValue:Mh,useDeferredValue:function(t){var e=Nt();return Dg(e,Ce.memoizedState,t)},useTransition:function(){var t=Ra(ks)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:vg,useSyncExternalStore:wg,useId:Lg,unstable_isNewReconciler:!1},sx={readContext:Tt,useCallback:Og,useContext:Tt,useEffect:Eh,useImperativeHandle:Ng,useInsertionEffect:Eg,useLayoutEffect:Mg,useMemo:Pg,useReducer:Ba,useRef:Ag,useState:function(){return Ba(ks)},useDebugValue:Mh,useDeferredValue:function(t){var e=Nt();return Ce===null?e.memoizedState=t:Dg(e,Ce.memoizedState,t)},useTransition:function(){var t=Ba(ks)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:vg,useSyncExternalStore:wg,useId:Lg,unstable_isNewReconciler:!1};function Rt(t,e){if(t&&t.defaultProps){e=ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _u(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ko={isMounted:function(t){return(t=t._reactInternals)?Mr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Je(),i=Vn(t),s=pn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,i),e!==null&&(zt(e,t,i,r),Bl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Je(),i=Vn(t),s=pn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,i),e!==null&&(zt(e,t,i,r),Bl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Je(),r=Vn(t),i=pn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hn(t,i,r),e!==null&&(zt(e,t,r,n),Bl(e,t,r))}};function sd(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!ps(n,r)||!ps(i,s):!0}function jg(t,e,n){var r=!1,i=qn,s=e.contextType;return typeof s=="object"&&s!==null?s=Tt(s):(i=lt(e)?gr:Ke.current,r=e.contextTypes,s=(r=r!=null)?ii(t,i):qn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ko,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ld(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ko.enqueueReplaceState(e,e.state,null)}function Hu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},wh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Tt(s):(s=lt(e)?gr:Ke.current,i.context=ii(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_u(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ko.enqueueReplaceState(i,i.state,null),co(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ai(t,e){try{var n="",r=e;do n+=L1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ia(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lx=typeof WeakMap=="function"?WeakMap:Map;function Fg(t,e,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){go||(go=!0,Xu=r),Wu(t,e)},n}function zg(t,e,n){n=pn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Wu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wu(t,e),typeof r!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function od(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=xx.bind(null,t,e,n),e.then(t,t))}function ad(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ud(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pn(-1,1),e.tag=2,Hn(n,e,1))),n.lanes|=1),t)}var ox=Sn.ReactCurrentOwner,it=!1;function Qe(t,e,n,r){e.child=t===null?pg(e,null,n,r):li(e,t.child,n,r)}function cd(t,e,n,r,i){n=n.render;var s=e.ref;return Jr(e,i),r=bh(t,e,n,r,s,i),n=Ah(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xn(t,e,i)):(ce&&n&&fh(e),e.flags|=1,Qe(t,e,r,i),e.child)}function hd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Bh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,_g(t,e,s,r,i)):(t=Hl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:ps,n(l,r)&&t.ref===e.ref)return xn(t,e,i)}return e.flags|=1,t=Un(s,r),t.ref=e.ref,t.return=e,e.child=t}function _g(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ps(s,r)&&t.ref===e.ref)if(it=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(it=!0);else return e.lanes=t.lanes,xn(t,e,i)}return Vu(t,e,n,r,i)}function Hg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(Vr,ct),ct|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(Vr,ct),ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,se(Vr,ct),ct|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,se(Vr,ct),ct|=r;return Qe(t,e,i,n),e.child}function Wg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vu(t,e,n,r,i){var s=lt(n)?gr:Ke.current;return s=ii(e,s),Jr(e,i),n=bh(t,e,n,r,s,i),r=Ah(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xn(t,e,i)):(ce&&r&&fh(e),e.flags|=1,Qe(t,e,n,i),e.child)}function fd(t,e,n,r,i){if(lt(n)){var s=!0;so(e)}else s=!1;if(Jr(e,i),e.stateNode===null)Fl(t,e),jg(e,n,r),Hu(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Tt(u):(u=lt(n)?gr:Ke.current,u=ii(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&ld(e,l,r,u),En=!1;var f=e.memoizedState;l.state=f,co(e,r,l,i),a=e.memoizedState,o!==r||f!==a||st.current||En?(typeof c=="function"&&(_u(e,n,c,r),a=e.memoizedState),(o=En||sd(e,n,o,r,f,a,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,gg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Rt(e.type,o),l.props=u,h=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Tt(a):(a=lt(n)?gr:Ke.current,a=ii(e,a));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==a)&&ld(e,l,r,a),En=!1,f=e.memoizedState,l.state=f,co(e,r,l,i);var m=e.memoizedState;o!==h||f!==m||st.current||En?(typeof d=="function"&&(_u(e,n,d,r),m=e.memoizedState),(u=En||sd(e,n,u,r,f,m,a)||!1)?(c||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),l.props=r,l.state=m,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Uu(t,e,n,r,s,i)}function Uu(t,e,n,r,i,s){Wg(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&Jf(e,n,!1),xn(t,e,s);r=e.stateNode,ox.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=li(e,t.child,null,s),e.child=li(e,null,o,s)):Qe(t,e,o,s),e.memoizedState=r.state,i&&Jf(e,n,!0),e.child}function Vg(t){var e=t.stateNode;e.pendingContext?Qf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qf(t,e.context,!1),xh(t,e.containerInfo)}function dd(t,e,n,r,i){return si(),ph(i),e.flags|=256,Qe(t,e,n,r),e.child}var $u={dehydrated:null,treeContext:null,retryLane:0};function Ku(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ug(t,e,n){var r=e.pendingProps,i=de.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),se(de,i&1),t===null)return Fu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Yo(l,r,0,null),t=pr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ku(n),e.memoizedState=$u,t):Th(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return ax(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Un(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Un(o,s):(s=pr(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?Ku(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=$u,r}return s=t.child,t=s.sibling,r=Un(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Th(t,e){return e=Yo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ll(t,e,n,r){return r!==null&&ph(r),li(e,t.child,null,n),t=Th(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ax(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=Ia(Error(T(422))),ll(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yo({mode:"visible",children:r.children},i,0,null),s=pr(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&li(e,t.child,null,l),e.child.memoizedState=Ku(l),e.memoizedState=$u,s);if(!(e.mode&1))return ll(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(T(419)),r=Ia(s,r,void 0),ll(t,e,l,r)}if(o=(l&t.childLanes)!==0,it||o){if(r=Ne,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wn(t,i),zt(r,t,i,-1))}return Rh(),r=Ia(Error(T(421))),ll(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=kx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,dt=_n(i.nextSibling),pt=e,ce=!0,It=null,t!==null&&(xt[kt++]=fn,xt[kt++]=dn,xt[kt++]=yr,fn=t.id,dn=t.overflow,yr=e),e=Th(e,r.children),e.flags|=4096,e)}function pd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zu(t.return,e,n)}function ja(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $g(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Qe(t,e,r.children,n),r=de.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pd(t,n,e);else if(t.tag===19)pd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(se(de,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ho(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ja(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ho(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ja(e,!0,n,null,s);break;case"together":ja(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=Un(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Un(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ux(t,e,n){switch(e.tag){case 3:Vg(e),si();break;case 5:yg(e);break;case 1:lt(e.type)&&so(e);break;case 4:xh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;se(ao,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(se(de,de.current&1),e.flags|=128,null):n&e.child.childLanes?Ug(t,e,n):(se(de,de.current&1),t=xn(t,e,n),t!==null?t.sibling:null);se(de,de.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $g(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),se(de,de.current),r)break;return null;case 22:case 23:return e.lanes=0,Hg(t,e,n)}return xn(t,e,n)}var Kg,qu,qg,Gg;Kg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qu=function(){};qg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,cr(ln.current);var s=null;switch(n){case"input":i=mu(t,i),r=mu(t,r),s=[];break;case"select":i=ge({},i,{value:void 0}),r=ge({},r,{value:void 0}),s=[];break;case"textarea":i=vu(t,i),r=vu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ro)}xu(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(os.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(os.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&oe("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Gg=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oi(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cx(t,e,n){var r=e.pendingProps;switch(dh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return lt(e.type)&&io(),He(e),null;case 3:return r=e.stateNode,oi(),ue(st),ue(Ke),Sh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(il(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,It!==null&&(tc(It),It=null))),qu(t,e),He(e),null;case 5:kh(e);var i=cr(ws.current);if(n=e.type,t!==null&&e.stateNode!=null)qg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(T(166));return He(e),null}if(t=cr(ln.current),il(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Zt]=e,r[ys]=s,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(i=0;i<Hi.length;i++)oe(Hi[i],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":Cf(r,s),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},oe("invalid",r);break;case"textarea":Af(r,s),oe("invalid",r)}xu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&rl(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&rl(r.textContent,o,t),i=["children",""+o]):os.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&oe("scroll",r)}switch(n){case"input":Ys(r),bf(r,s,!0);break;case"textarea":Ys(r),Ef(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ro)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Zt]=e,t[ys]=r,Kg(t,e,!1,!1),e.stateNode=t;e:{switch(l=ku(n,r),n){case"dialog":oe("cancel",t),oe("close",t),i=r;break;case"iframe":case"object":case"embed":oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Hi.length;i++)oe(Hi[i],t);i=r;break;case"source":oe("error",t),i=r;break;case"img":case"image":case"link":oe("error",t),oe("load",t),i=r;break;case"details":oe("toggle",t),i=r;break;case"input":Cf(t,r),i=mu(t,r),oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ge({},r,{value:void 0}),oe("invalid",t);break;case"textarea":Af(t,r),i=vu(t,r),oe("invalid",t);break;default:i=r}xu(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?Am(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Cm(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&as(t,a):typeof a=="number"&&as(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(os.hasOwnProperty(s)?a!=null&&s==="onScroll"&&oe("scroll",t):a!=null&&Xc(t,s,a,l))}switch(n){case"input":Ys(t),bf(t,r,!1);break;case"textarea":Ys(t),Ef(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?qr(t,!!r.multiple,s,!1):r.defaultValue!=null&&qr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return He(e),null;case 6:if(t&&e.stateNode!=null)Gg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(T(166));if(n=cr(ws.current),cr(ln.current),il(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zt]=e,(s=r.nodeValue!==n)&&(t=pt,t!==null))switch(t.tag){case 3:rl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=e,e.stateNode=r}return He(e),null;case 13:if(ue(de),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&dt!==null&&e.mode&1&&!(e.flags&128))fg(),si(),e.flags|=98560,s=!1;else if(s=il(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(T(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(T(317));s[Zt]=e}else si(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),s=!1}else It!==null&&(tc(It),It=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||de.current&1?be===0&&(be=3):Rh())),e.updateQueue!==null&&(e.flags|=4),He(e),null);case 4:return oi(),qu(t,e),t===null&&ms(e.stateNode.containerInfo),He(e),null;case 10:return yh(e.type._context),He(e),null;case 17:return lt(e.type)&&io(),He(e),null;case 19:if(ue(de),s=e.memoizedState,s===null)return He(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Oi(s,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=ho(t),l!==null){for(e.flags|=128,Oi(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return se(de,de.current&1|2),e.child}t=t.sibling}s.tail!==null&&xe()>ui&&(e.flags|=128,r=!0,Oi(s,!1),e.lanes=4194304)}else{if(!r)if(t=ho(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!ce)return He(e),null}else 2*xe()-s.renderingStartTime>ui&&n!==1073741824&&(e.flags|=128,r=!0,Oi(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xe(),e.sibling=null,n=de.current,se(de,r?n&1|2:n&1),e):(He(e),null);case 22:case 23:return Lh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ct&1073741824&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function hx(t,e){switch(dh(e),e.tag){case 1:return lt(e.type)&&io(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oi(),ue(st),ue(Ke),Sh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kh(e),null;case 13:if(ue(de),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));si()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ue(de),null;case 4:return oi(),null;case 10:return yh(e.type._context),null;case 22:case 23:return Lh(),null;case 24:return null;default:return null}}var ol=!1,Ve=!1,fx=typeof WeakSet=="function"?WeakSet:Set,B=null;function Wr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(t,e,r)}else n.current=null}function Gu(t,e,n){try{n()}catch(r){ve(t,e,r)}}var md=!1;function dx(t,e){if(Pu=eo,t=Zm(),hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(o=l+i),h!==s||r!==0&&h.nodeType!==3||(a=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++c===r&&(a=l),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Du={focusedElem:t,selectionRange:n},eo=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,x=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:Rt(e.type,v),x);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(k){ve(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return m=md,md=!1,m}function Ji(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gu(e,n,s)}i=i.next}while(i!==r)}}function qo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yg(t){var e=t.alternate;e!==null&&(t.alternate=null,Yg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zt],delete e[ys],delete e[Bu],delete e[Yw],delete e[Qw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qg(t){return t.tag===5||t.tag===3||t.tag===4}function gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ro));else if(r!==4&&(t=t.child,t!==null))for(Qu(t,e,n),t=t.sibling;t!==null;)Qu(t,e,n),t=t.sibling}function Ju(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ju(t,e,n),t=t.sibling;t!==null;)Ju(t,e,n),t=t.sibling}var Oe=null,Bt=!1;function bn(t,e,n){for(n=n.child;n!==null;)Jg(t,e,n),n=n.sibling}function Jg(t,e,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(zo,n)}catch{}switch(n.tag){case 5:Ve||Wr(n,e);case 6:var r=Oe,i=Bt;Oe=null,bn(t,e,n),Oe=r,Bt=i,Oe!==null&&(Bt?(t=Oe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(Bt?(t=Oe,n=n.stateNode,t.nodeType===8?Oa(t.parentNode,n):t.nodeType===1&&Oa(t,n),fs(t)):Oa(Oe,n.stateNode));break;case 4:r=Oe,i=Bt,Oe=n.stateNode.containerInfo,Bt=!0,bn(t,e,n),Oe=r,Bt=i;break;case 0:case 11:case 14:case 15:if(!Ve&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Gu(n,e,l),i=i.next}while(i!==r)}bn(t,e,n);break;case 1:if(!Ve&&(Wr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ve(n,e,o)}bn(t,e,n);break;case 21:bn(t,e,n);break;case 22:n.mode&1?(Ve=(r=Ve)||n.memoizedState!==null,bn(t,e,n),Ve=r):bn(t,e,n);break;default:bn(t,e,n)}}function yd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fx),e.forEach(function(r){var i=Sx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Dt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Oe=o.stateNode,Bt=!1;break e;case 3:Oe=o.stateNode.containerInfo,Bt=!0;break e;case 4:Oe=o.stateNode.containerInfo,Bt=!0;break e}o=o.return}if(Oe===null)throw Error(T(160));Jg(s,l,i),Oe=null,Bt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ve(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xg(e,t),e=e.sibling}function Xg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dt(e,t),qt(t),r&4){try{Ji(3,t,t.return),qo(3,t)}catch(v){ve(t,t.return,v)}try{Ji(5,t,t.return)}catch(v){ve(t,t.return,v)}}break;case 1:Dt(e,t),qt(t),r&512&&n!==null&&Wr(n,n.return);break;case 5:if(Dt(e,t),qt(t),r&512&&n!==null&&Wr(n,n.return),t.flags&32){var i=t.stateNode;try{as(i,"")}catch(v){ve(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&xm(i,s),ku(o,l);var u=ku(o,s);for(l=0;l<a.length;l+=2){var c=a[l],h=a[l+1];c==="style"?Am(i,h):c==="dangerouslySetInnerHTML"?Cm(i,h):c==="children"?as(i,h):Xc(i,c,h,u)}switch(o){case"input":gu(i,s);break;case"textarea":km(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?qr(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?qr(i,!!s.multiple,s.defaultValue,!0):qr(i,!!s.multiple,s.multiple?[]:"",!1))}i[ys]=s}catch(v){ve(t,t.return,v)}}break;case 6:if(Dt(e,t),qt(t),r&4){if(t.stateNode===null)throw Error(T(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ve(t,t.return,v)}}break;case 3:if(Dt(e,t),qt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fs(e.containerInfo)}catch(v){ve(t,t.return,v)}break;case 4:Dt(e,t),qt(t);break;case 13:Dt(e,t),qt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ph=xe())),r&4&&yd(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ve=(u=Ve)||c,Dt(e,t),Ve=u):Dt(e,t),qt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(B=t,c=t.child;c!==null;){for(h=B=c;B!==null;){switch(f=B,d=f.child,f.tag){case 0:case 11:case 14:case 15:Ji(4,f,f.return);break;case 1:Wr(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){ve(r,n,v)}}break;case 5:Wr(f,f.return);break;case 22:if(f.memoizedState!==null){wd(h);continue}}d!==null?(d.return=f,B=d):wd(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=bm("display",l))}catch(v){ve(t,t.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){ve(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dt(e,t),qt(t),r&4&&yd(t);break;case 21:break;default:Dt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qg(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(as(i,""),r.flags&=-33);var s=gd(t);Ju(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=gd(t);Qu(t,o,l);break;default:throw Error(T(161))}}catch(a){ve(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function px(t,e,n){B=t,Zg(t)}function Zg(t,e,n){for(var r=(t.mode&1)!==0;B!==null;){var i=B,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||ol;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||Ve;o=ol;var u=Ve;if(ol=l,(Ve=a)&&!u)for(B=i;B!==null;)l=B,a=l.child,l.tag===22&&l.memoizedState!==null?xd(i):a!==null?(a.return=l,B=a):xd(i);for(;s!==null;)B=s,Zg(s),s=s.sibling;B=i,ol=o,Ve=u}vd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,B=s):vd(t)}}function vd(t){for(;B!==null;){var e=B;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ve||qo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ve)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Rt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nd(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&fs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Ve||e.flags&512&&Yu(e)}catch(f){ve(e,e.return,f)}}if(e===t){B=null;break}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}}function wd(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var n=e.sibling;if(n!==null){n.return=e.return,B=n;break}B=e.return}}function xd(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qo(4,e)}catch(a){ve(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ve(e,i,a)}}var s=e.return;try{Yu(e)}catch(a){ve(e,s,a)}break;case 5:var l=e.return;try{Yu(e)}catch(a){ve(e,l,a)}}}catch(a){ve(e,e.return,a)}if(e===t){B=null;break}var o=e.sibling;if(o!==null){o.return=e.return,B=o;break}B=e.return}}var mx=Math.ceil,mo=Sn.ReactCurrentDispatcher,Nh=Sn.ReactCurrentOwner,bt=Sn.ReactCurrentBatchConfig,J=0,Ne=null,Se=null,je=0,ct=0,Vr=tr(0),be=0,Cs=null,wr=0,Go=0,Oh=0,Xi=null,nt=null,Ph=0,ui=1/0,un=null,go=!1,Xu=null,Wn=null,al=!1,Ln=null,yo=0,Zi=0,Zu=null,zl=-1,_l=0;function Je(){return J&6?xe():zl!==-1?zl:zl=xe()}function Vn(t){return t.mode&1?J&2&&je!==0?je&-je:Xw.transition!==null?(_l===0&&(_l=jm()),_l):(t=ne,t!==0||(t=window.event,t=t===void 0?16:Um(t.type)),t):1}function zt(t,e,n,r){if(50<Zi)throw Zi=0,Zu=null,Error(T(185));Is(t,n,r),(!(J&2)||t!==Ne)&&(t===Ne&&(!(J&2)&&(Go|=n),be===4&&On(t,je)),ot(t,r),n===1&&J===0&&!(e.mode&1)&&(ui=xe()+500,Uo&&nr()))}function ot(t,e){var n=t.callbackNode;X1(t,e);var r=Zl(t,t===Ne?je:0);if(r===0)n!==null&&Nf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Nf(n),e===1)t.tag===0?Jw(kd.bind(null,t)):ug(kd.bind(null,t)),qw(function(){!(J&6)&&nr()}),n=null;else{switch(Fm(r)){case 1:n=rh;break;case 4:n=Bm;break;case 16:n=Xl;break;case 536870912:n=Im;break;default:n=Xl}n=o0(n,e0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function e0(t,e){if(zl=-1,_l=0,J&6)throw Error(T(327));var n=t.callbackNode;if(Xr()&&t.callbackNode!==n)return null;var r=Zl(t,t===Ne?je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vo(t,r);else{e=r;var i=J;J|=2;var s=n0();(Ne!==t||je!==e)&&(un=null,ui=xe()+500,dr(t,e));do try{vx();break}catch(o){t0(t,o)}while(!0);gh(),mo.current=s,J=i,Se!==null?e=0:(Ne=null,je=0,e=be)}if(e!==0){if(e===2&&(i=Eu(t),i!==0&&(r=i,e=ec(t,i))),e===1)throw n=Cs,dr(t,0),On(t,r),ot(t,xe()),n;if(e===6)On(t,r);else{if(i=t.current.alternate,!(r&30)&&!gx(i)&&(e=vo(t,r),e===2&&(s=Eu(t),s!==0&&(r=s,e=ec(t,s))),e===1))throw n=Cs,dr(t,0),On(t,r),ot(t,xe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(T(345));case 2:lr(t,nt,un);break;case 3:if(On(t,r),(r&130023424)===r&&(e=Ph+500-xe(),10<e)){if(Zl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Je(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ru(lr.bind(null,t,nt,un),e);break}lr(t,nt,un);break;case 4:if(On(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Ft(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mx(r/1960))-r,10<r){t.timeoutHandle=Ru(lr.bind(null,t,nt,un),r);break}lr(t,nt,un);break;case 5:lr(t,nt,un);break;default:throw Error(T(329))}}}return ot(t,xe()),t.callbackNode===n?e0.bind(null,t):null}function ec(t,e){var n=Xi;return t.current.memoizedState.isDehydrated&&(dr(t,e).flags|=256),t=vo(t,e),t!==2&&(e=nt,nt=n,e!==null&&tc(e)),t}function tc(t){nt===null?nt=t:nt.push.apply(nt,t)}function gx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!_t(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~Oh,e&=~Go,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ft(e),r=1<<n;t[n]=-1,e&=~r}}function kd(t){if(J&6)throw Error(T(327));Xr();var e=Zl(t,0);if(!(e&1))return ot(t,xe()),null;var n=vo(t,e);if(t.tag!==0&&n===2){var r=Eu(t);r!==0&&(e=r,n=ec(t,r))}if(n===1)throw n=Cs,dr(t,0),On(t,e),ot(t,xe()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,lr(t,nt,un),ot(t,xe()),null}function Dh(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(ui=xe()+500,Uo&&nr())}}function xr(t){Ln!==null&&Ln.tag===0&&!(J&6)&&Xr();var e=J;J|=1;var n=bt.transition,r=ne;try{if(bt.transition=null,ne=1,t)return t()}finally{ne=r,bt.transition=n,J=e,!(J&6)&&nr()}}function Lh(){ct=Vr.current,ue(Vr)}function dr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Kw(n)),Se!==null)for(n=Se.return;n!==null;){var r=n;switch(dh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&io();break;case 3:oi(),ue(st),ue(Ke),Sh();break;case 5:kh(r);break;case 4:oi();break;case 13:ue(de);break;case 19:ue(de);break;case 10:yh(r.type._context);break;case 22:case 23:Lh()}n=n.return}if(Ne=t,Se=t=Un(t.current,null),je=ct=e,be=0,Cs=null,Oh=Go=wr=0,nt=Xi=null,ur!==null){for(e=0;e<ur.length;e++)if(n=ur[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}ur=null}return t}function t0(t,e){do{var n=Se;try{if(gh(),Il.current=po,fo){for(var r=me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fo=!1}if(vr=0,Me=Ce=me=null,Qi=!1,xs=0,Nh.current=null,n===null||n.return===null){be=1,Cs=e,Se=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=je,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=ad(l);if(d!==null){d.flags&=-257,ud(d,l,o,s,e),d.mode&1&&od(s,u,e),e=d,a=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(a),e.updateQueue=v}else m.add(a);break e}else{if(!(e&1)){od(s,u,e),Rh();break e}a=Error(T(426))}}else if(ce&&o.mode&1){var x=ad(l);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ud(x,l,o,s,e),ph(ai(a,o));break e}}s=a=ai(a,o),be!==4&&(be=2),Xi===null?Xi=[s]:Xi.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Fg(s,a,e);td(s,p);break e;case 1:o=a;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wn===null||!Wn.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=zg(s,o,e);td(s,k);break e}}s=s.return}while(s!==null)}i0(n)}catch(C){e=C,Se===n&&n!==null&&(Se=n=n.return);continue}break}while(!0)}function n0(){var t=mo.current;return mo.current=po,t===null?po:t}function Rh(){(be===0||be===3||be===2)&&(be=4),Ne===null||!(wr&268435455)&&!(Go&268435455)||On(Ne,je)}function vo(t,e){var n=J;J|=2;var r=n0();(Ne!==t||je!==e)&&(un=null,dr(t,e));do try{yx();break}catch(i){t0(t,i)}while(!0);if(gh(),J=n,mo.current=r,Se!==null)throw Error(T(261));return Ne=null,je=0,be}function yx(){for(;Se!==null;)r0(Se)}function vx(){for(;Se!==null&&!V1();)r0(Se)}function r0(t){var e=l0(t.alternate,t,ct);t.memoizedProps=t.pendingProps,e===null?i0(t):Se=e,Nh.current=null}function i0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hx(n,e),n!==null){n.flags&=32767,Se=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,Se=null;return}}else if(n=cx(n,e,ct),n!==null){Se=n;return}if(e=e.sibling,e!==null){Se=e;return}Se=e=t}while(e!==null);be===0&&(be=5)}function lr(t,e,n){var r=ne,i=bt.transition;try{bt.transition=null,ne=1,wx(t,e,n,r)}finally{bt.transition=i,ne=r}return null}function wx(t,e,n,r){do Xr();while(Ln!==null);if(J&6)throw Error(T(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Z1(t,s),t===Ne&&(Se=Ne=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||al||(al=!0,o0(Xl,function(){return Xr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=bt.transition,bt.transition=null;var l=ne;ne=1;var o=J;J|=4,Nh.current=null,dx(t,n),Xg(n,t),zw(Du),eo=!!Pu,Du=Pu=null,t.current=n,px(n),U1(),J=o,ne=l,bt.transition=s}else t.current=n;if(al&&(al=!1,Ln=t,yo=i),s=t.pendingLanes,s===0&&(Wn=null),q1(n.stateNode),ot(t,xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(go)throw go=!1,t=Xu,Xu=null,t;return yo&1&&t.tag!==0&&Xr(),s=t.pendingLanes,s&1?t===Zu?Zi++:(Zi=0,Zu=t):Zi=0,nr(),null}function Xr(){if(Ln!==null){var t=Fm(yo),e=bt.transition,n=ne;try{if(bt.transition=null,ne=16>t?16:t,Ln===null)var r=!1;else{if(t=Ln,Ln=null,yo=0,J&6)throw Error(T(331));var i=J;for(J|=4,B=t.current;B!==null;){var s=B,l=s.child;if(B.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(B=u;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:Ji(8,c,s)}var h=c.child;if(h!==null)h.return=c,B=h;else for(;B!==null;){c=B;var f=c.sibling,d=c.return;if(Yg(c),c===u){B=null;break}if(f!==null){f.return=d,B=f;break}B=d}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}B=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,B=l;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ji(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,B=p;break e}B=s.return}}var g=t.current;for(B=g;B!==null;){l=B;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,B=w;else e:for(l=g;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:qo(9,o)}}catch(C){ve(o,o.return,C)}if(o===l){B=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,B=k;break e}B=o.return}}if(J=i,nr(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(zo,t)}catch{}r=!0}return r}finally{ne=n,bt.transition=e}}return!1}function Sd(t,e,n){e=ai(n,e),e=Fg(t,e,1),t=Hn(t,e,1),e=Je(),t!==null&&(Is(t,1,e),ot(t,e))}function ve(t,e,n){if(t.tag===3)Sd(t,t,n);else for(;e!==null;){if(e.tag===3){Sd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wn===null||!Wn.has(r))){t=ai(n,t),t=zg(e,t,1),e=Hn(e,t,1),t=Je(),e!==null&&(Is(e,1,t),ot(e,t));break}}e=e.return}}function xx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Je(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(je&n)===n&&(be===4||be===3&&(je&130023424)===je&&500>xe()-Ph?dr(t,0):Oh|=n),ot(t,e)}function s0(t,e){e===0&&(t.mode&1?(e=Xs,Xs<<=1,!(Xs&130023424)&&(Xs=4194304)):e=1);var n=Je();t=wn(t,e),t!==null&&(Is(t,e,n),ot(t,n))}function kx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),s0(t,n)}function Sx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(e),s0(t,n)}var l0;l0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||st.current)it=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return it=!1,ux(t,e,n);it=!!(t.flags&131072)}else it=!1,ce&&e.flags&1048576&&cg(e,oo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fl(t,e),t=e.pendingProps;var i=ii(e,Ke.current);Jr(e,n),i=bh(null,e,r,t,i,n);var s=Ah();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(r)?(s=!0,so(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wh(e),i.updater=Ko,e.stateNode=i,i._reactInternals=e,Hu(e,r,t,n),e=Uu(null,e,r,!0,s,n)):(e.tag=0,ce&&s&&fh(e),Qe(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=bx(r),t=Rt(r,t),i){case 0:e=Vu(null,e,r,t,n);break e;case 1:e=fd(null,e,r,t,n);break e;case 11:e=cd(null,e,r,t,n);break e;case 14:e=hd(null,e,r,Rt(r.type,t),n);break e}throw Error(T(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rt(r,i),Vu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rt(r,i),fd(t,e,r,i,n);case 3:e:{if(Vg(e),t===null)throw Error(T(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gg(t,e),co(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ai(Error(T(423)),e),e=dd(t,e,r,n,i);break e}else if(r!==i){i=ai(Error(T(424)),e),e=dd(t,e,r,n,i);break e}else for(dt=_n(e.stateNode.containerInfo.firstChild),pt=e,ce=!0,It=null,n=pg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(si(),r===i){e=xn(t,e,n);break e}Qe(t,e,r,n)}e=e.child}return e;case 5:return yg(e),t===null&&Fu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Lu(r,i)?l=null:s!==null&&Lu(r,s)&&(e.flags|=32),Wg(t,e),Qe(t,e,l,n),e.child;case 6:return t===null&&Fu(e),null;case 13:return Ug(t,e,n);case 4:return xh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=li(e,null,r,n):Qe(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rt(r,i),cd(t,e,r,i,n);case 7:return Qe(t,e,e.pendingProps,n),e.child;case 8:return Qe(t,e,e.pendingProps.children,n),e.child;case 12:return Qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,se(ao,r._currentValue),r._currentValue=l,s!==null)if(_t(s.value,l)){if(s.children===i.children&&!st.current){e=xn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=pn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),zu(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(T(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),zu(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Qe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Jr(e,n),i=Tt(i),r=r(i),e.flags|=1,Qe(t,e,r,n),e.child;case 14:return r=e.type,i=Rt(r,e.pendingProps),i=Rt(r.type,i),hd(t,e,r,i,n);case 15:return _g(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rt(r,i),Fl(t,e),e.tag=1,lt(r)?(t=!0,so(e)):t=!1,Jr(e,n),jg(e,r,i),Hu(e,r,i,n),Uu(null,e,r,!0,t,n);case 19:return $g(t,e,n);case 22:return Hg(t,e,n)}throw Error(T(156,e.tag))};function o0(t,e){return Rm(t,e)}function Cx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(t,e,n,r){return new Cx(t,e,n,r)}function Bh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bx(t){if(typeof t=="function")return Bh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eh)return 11;if(t===th)return 14}return 2}function Un(t,e){var n=t.alternate;return n===null?(n=Ct(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hl(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")Bh(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Lr:return pr(n.children,i,s,e);case Zc:l=8,i|=8;break;case hu:return t=Ct(12,n,e,i|2),t.elementType=hu,t.lanes=s,t;case fu:return t=Ct(13,n,e,i),t.elementType=fu,t.lanes=s,t;case du:return t=Ct(19,n,e,i),t.elementType=du,t.lanes=s,t;case ym:return Yo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mm:l=10;break e;case gm:l=9;break e;case eh:l=11;break e;case th:l=14;break e;case An:l=16,r=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=Ct(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function pr(t,e,n,r){return t=Ct(7,t,r,e),t.lanes=n,t}function Yo(t,e,n,r){return t=Ct(22,t,r,e),t.elementType=ym,t.lanes=n,t.stateNode={isHidden:!1},t}function Fa(t,e,n){return t=Ct(6,t,null,e),t.lanes=n,t}function za(t,e,n){return e=Ct(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ax(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wa(0),this.expirationTimes=wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ih(t,e,n,r,i,s,l,o,a){return t=new Ax(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ct(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wh(s),t}function Ex(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function a0(t){if(!t)return qn;t=t._reactInternals;e:{if(Mr(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(lt(n))return ag(t,n,e)}return e}function u0(t,e,n,r,i,s,l,o,a){return t=Ih(n,r,!0,t,i,s,l,o,a),t.context=a0(null),n=t.current,r=Je(),i=Vn(n),s=pn(r,i),s.callback=e??null,Hn(n,s,i),t.current.lanes=i,Is(t,i,r),ot(t,r),t}function Qo(t,e,n,r){var i=e.current,s=Je(),l=Vn(i);return n=a0(n),e.context===null?e.context=n:e.pendingContext=n,e=pn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hn(i,e,l),t!==null&&(zt(t,i,l,s),Bl(t,i,l)),l}function wo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jh(t,e){Cd(t,e),(t=t.alternate)&&Cd(t,e)}function Mx(){return null}var c0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fh(t){this._internalRoot=t}Jo.prototype.render=Fh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));Qo(t,e,null,null)};Jo.prototype.unmount=Fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xr(function(){Qo(null,t,null,null)}),e[vn]=null}};function Jo(t){this._internalRoot=t}Jo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nn.length&&e!==0&&e<Nn[n].priority;n++);Nn.splice(n,0,t),n===0&&Vm(t)}};function zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bd(){}function Tx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=wo(l);s.call(u)}}var l=u0(e,r,t,0,null,!1,!1,"",bd);return t._reactRootContainer=l,t[vn]=l.current,ms(t.nodeType===8?t.parentNode:t),xr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=wo(a);o.call(u)}}var a=Ih(t,0,!1,null,null,!1,!1,"",bd);return t._reactRootContainer=a,t[vn]=a.current,ms(t.nodeType===8?t.parentNode:t),xr(function(){Qo(e,a,n,r)}),a}function Zo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=wo(l);o.call(a)}}Qo(e,l,t,i)}else l=Tx(n,e,t,i,r);return wo(l)}zm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_i(e.pendingLanes);n!==0&&(ih(e,n|1),ot(e,xe()),!(J&6)&&(ui=xe()+500,nr()))}break;case 13:xr(function(){var r=wn(t,1);if(r!==null){var i=Je();zt(r,t,1,i)}}),jh(t,1)}};sh=function(t){if(t.tag===13){var e=wn(t,134217728);if(e!==null){var n=Je();zt(e,t,134217728,n)}jh(t,134217728)}};_m=function(t){if(t.tag===13){var e=Vn(t),n=wn(t,e);if(n!==null){var r=Je();zt(n,t,e,r)}jh(t,e)}};Hm=function(){return ne};Wm=function(t,e){var n=ne;try{return ne=t,e()}finally{ne=n}};Cu=function(t,e,n){switch(e){case"input":if(gu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Vo(r);if(!i)throw Error(T(90));wm(r),gu(r,i)}}}break;case"textarea":km(t,n);break;case"select":e=n.value,e!=null&&qr(t,!!n.multiple,e,!1)}};Tm=Dh;Nm=xr;var Nx={usingClientEntryPoint:!1,Events:[Fs,jr,Vo,Em,Mm,Dh]},Pi={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ox={bundleType:Pi.bundleType,version:Pi.version,rendererPackageName:Pi.rendererPackageName,rendererConfig:Pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dm(t),t===null?null:t.stateNode},findFiberByHostInstance:Pi.findFiberByHostInstance||Mx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{zo=ul.inject(Ox),sn=ul}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nx;vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zh(e))throw Error(T(200));return Ex(t,e,null,n)};vt.createRoot=function(t,e){if(!zh(t))throw Error(T(299));var n=!1,r="",i=c0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ih(t,1,!1,null,null,n,!1,r,i),t[vn]=e.current,ms(t.nodeType===8?t.parentNode:t),new Fh(e)};vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Dm(e),t=t===null?null:t.stateNode,t};vt.flushSync=function(t){return xr(t)};vt.hydrate=function(t,e,n){if(!Xo(e))throw Error(T(200));return Zo(null,t,e,!0,n)};vt.hydrateRoot=function(t,e,n){if(!zh(t))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=c0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=u0(e,null,t,1,n??null,i,!1,s,l),t[vn]=e.current,ms(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Jo(e)};vt.render=function(t,e,n){if(!Xo(e))throw Error(T(200));return Zo(null,t,e,!1,n)};vt.unmountComponentAtNode=function(t){if(!Xo(t))throw Error(T(40));return t._reactRootContainer?(xr(function(){Zo(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};vt.unstable_batchedUpdates=Dh;vt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xo(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return Zo(t,e,n,!1,r)};vt.version="18.3.1-next-f1338f8080-20240426";function h0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h0)}catch(t){console.error(t)}}h0(),hm.exports=vt;var Px=hm.exports,Ad=Px;uu.createRoot=Ad.createRoot,uu.hydrateRoot=Ad.hydrateRoot;let nc=[],f0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?f0:nc).push(n=n+t[e])})();function Dx(t){if(t<768)return!1;for(let e=0,n=nc.length;;){let r=e+n>>1;if(t<nc[r])n=r;else if(t>=f0[r])e=r+1;else return!0;if(e==n)return!1}}function Ed(t){return t>=127462&&t<=127487}const Md=8205;function Lx(t,e,n=!0,r=!0){return(n?d0:Rx)(t,e,r)}function d0(t,e,n){if(e==t.length)return e;e&&p0(t.charCodeAt(e))&&m0(t.charCodeAt(e-1))&&e--;let r=_a(t,e);for(e+=Td(r);e<t.length;){let i=_a(t,e);if(r==Md||i==Md||n&&Dx(i))e+=Td(i),r=i;else if(Ed(i)){let s=0,l=e-2;for(;l>=0&&Ed(_a(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function Rx(t,e,n){for(;e>0;){let r=d0(t,e-2,n);if(r<e)return r;e--}return 0}function _a(t,e){let n=t.charCodeAt(e);if(!m0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return p0(r)?(n-55296<<10)+(r-56320)+65536:n}function p0(t){return t>=56320&&t<57344}function m0(t){return t>=55296&&t<56320}function Td(t){return t<65536?1:2}class Q{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=ci(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),en.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=ci(this,e,n);let r=[];return this.decompose(e,n,r,0),en.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new es(this),s=new es(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new es(this,e)}iterRange(e,n=this.length){return new g0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new y0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Q.empty:e.length<=32?new we(e):en.from(we.split(e,[]))}}class we extends Q{constructor(e,n=Bx(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new Ix(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new we(Nd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=Wl(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new we(o,l.length+s.length));else{let a=o.length>>1;r.push(new we(o.slice(0,a)),new we(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof we))return super.replace(e,n,r);[e,n]=ci(this,e,n);let i=Wl(this.text,Wl(r.text,Nd(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new we(i,s):en.from(we.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=ci(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new we(r,i)),r=[],i=-1);return i>-1&&n.push(new we(r,i)),n}}class en extends Q{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=ci(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new en(c,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=ci(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof en))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let m of e)m.flatten(d);return new we(d,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,c=[];function h(d){let m;if(d.lines>s&&d instanceof en)for(let v of d.children)h(v);else d.lines>l&&(a>l||!a)?(f(),o.push(d)):d instanceof we&&a&&(m=c[c.length-1])instanceof we&&d.lines+m.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new we(m.text.concat(d.text),m.length+1+d.length)):(a+d.lines>i&&f(),a+=d.lines,u+=d.length+1,c.push(d))}function f(){a!=0&&(o.push(c.length==1?c[0]:en.from(c,u)),u=-1,a=c.length=0)}for(let d of e)h(d);return f(),o.length==1?o[0]:new en(o,n)}}Q.empty=new we([""],0);function Bx(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Wl(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function Nd(t,e,n){return Wl(t,[""],e,n)}class es{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof we?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof we?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof we){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof we?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class g0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new es(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class y0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Q.prototype[Symbol.iterator]=function(){return this.iter()},es.prototype[Symbol.iterator]=g0.prototype[Symbol.iterator]=y0.prototype[Symbol.iterator]=function(){return this});class Ix{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function ci(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Be(t,e,n=!0,r=!0){return Lx(t,e,n,r)}function jx(t){return t>=56320&&t<57344}function Fx(t){return t>=55296&&t<56320}function v0(t,e){let n=t.charCodeAt(e);if(!Fx(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return jx(r)?(n-55296<<10)+(r-56320)+65536:n}function zx(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function w0(t){return t<65536?1:2}const rc=/\r\n?|\n/;var ft=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(ft||(ft={}));class mn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){ic(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new mn(e)}composeDesc(e){return this.empty?e:e.empty?this:x0(this,e)}mapDesc(e,n=!1){return e.empty?this:sc(this,e,n)}mapPos(e,n=-1,r=ft.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=ft.Simple&&u>=e&&(r==ft.TrackDel&&i<e&&u>e||r==ft.TrackBefore&&i<e||r==ft.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new mn(e)}static create(e){return new mn(e)}}class Te extends mn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ic(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return sc(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(Q.empty);r.push(l?e.slice(s,s+l):Q.empty)}s+=l}return new Te(n,r)}compose(e){return this.empty?e:e.empty?this:x0(this,e,!0)}map(e,n=!1){return e.empty?this:sc(this,e,n,!0)}iterChanges(e,n=!1){ic(this,e,n)}get desc(){return mn.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new bs(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-o);We(i,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;We(n,c,h),h>0&&Rn(r,n,s.text),s.forward(c),o+=c}let u=e[l++];for(;o<u;){if(s.done)break e;let c=Math.min(s.len,u-o);We(n,c,-1),We(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),o+=c}}return{changes:new Te(n,r),filtered:mn.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(c=!1){if(!c&&!i.length)return;l<n&&We(i,n-l,-1);let h=new Te(i,s);o=o?o.compose(h.map(o)):h,i=[],s=[],l=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Te){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),o=o?o.compose(c.map(o)):c}else{let{from:h,to:f=h,insert:d}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let m=d?typeof d=="string"?Q.of(d.split(r||rc)):d:Q.empty,v=m.length;if(h==f&&v==0)return;h<l&&a(),h>l&&We(i,h-l,-1),We(i,f-h,v),Rn(s,i,m),l=f}}return u(e),a(!o),o}static empty(e){return new Te(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(Q.empty);r[i]=Q.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Te(n,r)}static createSet(e,n){return new Te(e,n)}}function We(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Rn(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Q.empty);t.push(n)}}function ic(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,c=s,h=Q.empty;for(;u+=o,c+=a,a&&r&&(h=h.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,c,h),i=u,s=c}}}function sc(t,e,n,r=!1){let i=[],s=r?[]:null,l=new bs(t),o=new bs(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);We(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(We(i,o.ins,-1);u;){let c=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=c&&(We(i,0,l.ins),s&&Rn(s,i,l.text),a=l.i),l.forward(c),u-=c}o.next()}else if(l.ins>=0){let u=0,c=l.len;for(;c;)if(o.ins==-1){let h=Math.min(c,o.len);u+=h,c-=h,o.forward(h)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;We(i,u,a<l.i?l.ins:0),s&&a<l.i&&Rn(s,i,l.text),a=l.i,l.forward(l.len-c)}else{if(l.done&&o.done)return s?Te.createSet(i,s):mn.create(i);throw new Error("Mismatched change set lengths")}}}function x0(t,e,n=!1){let r=[],i=n?[]:null,s=new bs(t),l=new bs(e);for(let o=!1;;){if(s.done&&l.done)return i?Te.createSet(r,i):mn.create(r);if(s.ins==0)We(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)We(r,0,l.ins,o),i&&Rn(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let c=l.ins==-1?-1:l.off?0:l.ins;We(r,a,c,o),i&&c&&Rn(i,r,l.text)}else l.ins==-1?(We(r,s.off?0:s.len,a,o),i&&Rn(i,r,s.textBit(a))):(We(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Rn(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class bs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Q.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Q.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class hr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new hr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return M.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return M.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return M.range(e.anchor,e.head)}static create(e,n,r){return new hr(e,n,r)}}class M{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:M.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new M([this.main],0)}addRange(e,n=!0){return M.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,M.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new M(e.ranges.map(n=>hr.fromJSON(n)),e.main)}static single(e,n=e){return new M([M.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return M.normalized(e.slice(),n);r=s.to}return new M(e,n)}static cursor(e,n=0,r,i){return hr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?hr.create(n,e,48|s):hr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?M.range(a,o):M.range(o,a))}}return new M(e,n)}}function k0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let _h=0;class F{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=_h++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new F(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Hh),!!e.static,e.enables)}of(e){return new Vl([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Vl(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Vl(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Hh(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Vl{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=_h++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[l]=r(h),1},update(h,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||lc(h,c)){let d=r(h);if(o?!Od(d,h.values[l],i):!i(d,h.values[l]))return h.values[l]=d,1}return 0},reconfigure:(h,f)=>{let d,m=f.config.address[s];if(m!=null){let v=ko(f,m);if(this.dependencies.every(x=>x instanceof F?f.facet(x)===h.facet(x):x instanceof Vt?f.field(x,!1)==h.field(x,!1):!0)||(o?Od(d=r(h),v,i):i(d=r(h),v)))return h.values[l]=v,0}else d=r(h);return h.values[l]=d,1}}}}function Od(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function lc(t,e){let n=!1;for(let r of e)ts(t,r)&1&&(n=!0);return n}function _x(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let c=0;c<r.length;c++){let h=ko(a,r[c]);if(i[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(a){for(let u of r)ts(a,u);return a.values[l]=o(a),1},update(a,u){if(!lc(a,s))return 0;let c=o(a);return e.compare(c,a.values[l])?0:(a.values[l]=c,1)},reconfigure(a,u){let c=lc(a,r),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&Hh(n,h))return a.values[l]=f,0;let d=o(a);return e.compare(d,f)?(a.values[l]=f,0):(a.values[l]=d,1)}}}const cl=F.define({static:!0});class Vt{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Vt(_h++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(cl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(cl),l=i.facet(cl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,cl.of({field:this,create:e})]}get extension(){return this}}const or={lowest:4,low:3,default:2,high:1,highest:0};function Di(t){return e=>new S0(e,t)}const ea={highest:Di(or.highest),high:Di(or.high),default:Di(or.default),low:Di(or.low),lowest:Di(or.lowest)};class S0{constructor(e,n){this.inner=e,this.prec=n}}class ta{of(e){return new oc(this,e)}reconfigure(e){return ta.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class oc{constructor(e,n){this.compartment=e,this.inner=n}}class xo{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of Hx(e,n,l))f instanceof Vt?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(d=>f.slot(d));let c=r==null?void 0:r.config.facets;for(let f in s){let d=s[f],m=d[0].facet,v=c&&c[f]||[];if(d.every(x=>x.type==0))if(o[m.id]=a.length<<1|1,Hh(v,d))a.push(r.facet(m));else{let x=m.combine(d.map(p=>p.value));a.push(r&&m.compare(x,r.facet(m))?r.facet(m):x)}else{for(let x of d)x.type==0?(o[x.id]=a.length<<1|1,a.push(x.value)):(o[x.id]=u.length<<1,u.push(p=>x.dynamicSlot(p)));o[m.id]=u.length<<1,u.push(x=>_x(x,m,d))}}let h=u.map(f=>f(o));return new xo(e,l,h,o,a,s)}}function Hx(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof oc&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof oc){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof S0)s(l.inner,l.prec);else if(l instanceof Vt)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof Vl)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,or.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,or.default),r.reduce((l,o)=>l.concat(o))}function ts(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function ko(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const C0=F.define(),ac=F.define({combine:t=>t.some(e=>e),static:!0}),b0=F.define({combine:t=>t.length?t[0]:void 0,static:!0}),A0=F.define(),E0=F.define(),M0=F.define(),T0=F.define({combine:t=>t.length?t[0]:!1});class xi{constructor(e,n){this.type=e,this.value=n}static define(){return new Wx}}class Wx{of(e){return new xi(this,e)}}class Vx{constructor(e){this.map=e}of(e){return new le(this,e)}}class le{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new le(this.type,n)}is(e){return this.type==e}static define(e={}){return new Vx(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}le.reconfigure=le.define();le.appendConfig=le.define();class $e{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&k0(r,n.newLength),s.some(o=>o.type==$e.time)||(this.annotations=s.concat($e.time.of(Date.now())))}static create(e,n,r,i,s,l){return new $e(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation($e.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}$e.time=xi.define();$e.userEvent=xi.define();$e.addToHistory=xi.define();$e.remote=xi.define();function Ux(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function N0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Te.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:le.mapEffects(t.effects,i).concat(le.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function uc(t,e,n){let r=e.selection,i=Zr(e.annotations);return e.userEvent&&(i=i.concat($e.userEvent.of(e.userEvent))),{changes:e.changes instanceof Te?e.changes:Te.of(e.changes||[],n,t.facet(b0)),selection:r&&(r instanceof M?r:M.single(r.anchor,r.head)),effects:Zr(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function O0(t,e,n){let r=uc(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=N0(r,uc(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=$e.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Kx(n?$x(i):i)}function $x(t){let e=t.startState,n=!0;for(let i of e.facet(A0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:Ux(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Te.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=$e.create(e,i,t.selection&&t.selection.map(s),le.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(E0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof $e?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof $e?t=s[0]:t=O0(e,Zr(s),!1)}return t}function Kx(t){let e=t.startState,n=e.facet(M0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=N0(r,uc(e,s,t.changes.newLength),!0))}return r==t?t:$e.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const qx=[];function Zr(t){return t==null?qx:Array.isArray(t)?t:[t]}var Ie=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Ie||(Ie={}));const Gx=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let cc;try{cc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Yx(t){if(cc)return cc.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Gx.test(n)))return!0}return!1}function Qx(t){return e=>{if(!/\S/.test(e))return Ie.Space;if(Yx(e))return Ie.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Ie.Word;return Ie.Other}}class Z{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)ts(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return ts(this,r),ko(this,r)}update(...e){return O0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(ta.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(le.reconfigure)?(n=null,r=o.value):o.is(le.appendConfig)&&(n=null,r=Zr(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=xo.resolve(r,i,this),s=new Z(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(ac)?e.newSelection:e.newSelection.asSingle();new Z(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:M.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=Zr(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),c=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(c);let h=i.mapDesc(u,!0);s.push(a.range.map(h)),i=i.compose(c),l=le.mapEffects(l,c).concat(le.mapEffects(Zr(a.effects),h))}return{changes:i,selection:M.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Te?e:Te.of(e,this.doc.length,this.facet(Z.lineSeparator))}toText(e){return Q.of(e.split(this.facet(Z.lineSeparator)||rc))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ts(this,n),ko(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Vt&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return Z.create({doc:e.doc,selection:M.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=xo.resolve(e.extensions||[],new Map),r=e.doc instanceof Q?e.doc:Q.of((e.doc||"").split(n.staticFacet(Z.lineSeparator)||rc)),i=e.selection?e.selection instanceof M?e.selection:M.single(e.selection.anchor,e.selection.head):M.single(0);return k0(i,r.length),n.staticFacet(ac)||(i=i.asSingle()),new Z(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(Z.tabSize)}get lineBreak(){return this.facet(Z.lineSeparator)||`
`}get readOnly(){return this.facet(T0)}phrase(e,...n){for(let r of this.facet(Z.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(C0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return Qx(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=Be(n,l,!1);if(s(n.slice(a,l))!=Ie.Word)break;l=a}for(;o<i;){let a=Be(n,o);if(s(n.slice(o,a))!=Ie.Word)break;o=a}return l==o?null:M.range(l+r,o+r)}}Z.allowMultipleSelections=ac;Z.tabSize=F.define({combine:t=>t.length?t[0]:4});Z.lineSeparator=b0;Z.readOnly=T0;Z.phrases=F.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Z.languageData=C0;Z.changeFilter=A0;Z.transactionFilter=E0;Z.transactionExtender=M0;ta.reconfigure=le.define();function na(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class hi{eq(e){return this==e}range(e,n=e){return hc.create(e,n,this)}}hi.prototype.startSide=hi.prototype.endSide=0;hi.prototype.point=!1;hi.prototype.mapMode=ft.TrackDel;let hc=class P0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new P0(e,n,r)}};function fc(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Wh{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,h=this.to[a]+e,f,d;if(c==h){let m=n.mapPos(c,u.startSide,u.mapMode);if(m==null||(f=d=m,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<f)))continue}else if(f=n.mapPos(c,u.startSide),d=n.mapPos(h,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,d-f)),r.push(u),i.push(f-l),s.push(d-l))}return{mapped:r.length?new Wh(i,s,r,o):null,pos:l}}}class ee{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ee(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(fc)),this.isEmpty)return n.length?ee.of(n):this;let o=new D0(this,null,-1).goto(0),a=0,u=[],c=new kr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let h=n[a++];c.addInner(h.from,h.to,h.value)||u.push(h)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||u.push(hc.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?ee.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:c,pos:h}=a.map(o,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new ee(r,n,s||ee.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return As.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return As.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),o=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=Pd(l,o,r),u=new Li(l,a,s),c=new Li(o,a,s);r.iterGaps((h,f,d)=>Dd(u,h,c,f,d,i)),r.empty&&r.length==0&&Dd(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),l=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=Pd(s,l),a=new Li(s,o,0).goto(r),u=new Li(l,o,0).goto(r);for(;;){if(a.to!=u.to||!dc(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new Li(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let c=l.activeForPoint(l.to),h=l.pointFrom<n?c.length+1:l.point.startSide<0?c.length:Math.min(c.length,a);i.point(o,u,l.point,c,h,l.pointRank),a=Math.min(l.openEnd(u),c.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new kr;for(let i of e instanceof hc?[e]:n?Jx(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ee.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ee.empty;i=i.nextLayer)n=new ee(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}ee.empty=new ee([],[],null,-1);function Jx(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(fc(e,r)>0)return t.slice().sort(fc);e=r}return t}ee.empty.nextLayer=ee.empty;class kr{finishChunk(e){this.chunks.push(new Wh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new kr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ee.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ee.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Pd(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class D0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class As{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new D0(l,n,r,s));return i.length==1?i[0]:new As(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ha(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ha(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ha(this.heap,0)}}}function Ha(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Li{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=As.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){hl(this.active,e),hl(this.activeTo,e),hl(this.activeRank,e),this.minActive=Ld(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;fl(this.active,n,r),fl(this.activeTo,n,i),fl(this.activeRank,n,s),e&&fl(e,n,this.cursor.from),this.minActive=Ld(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&hl(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Dd(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,h=c<0?t.to+a:n.to,f=Math.min(h,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&dc(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!dc(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),h>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),o=h,c<=0&&t.next(),c>=0&&n.next()}}function dc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function hl(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function fl(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Ld(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function ra(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Be(t,i));return r}function Xx(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Be(t,i)}return t.length}const pc="",Rd=typeof Symbol>"u"?"__"+pc:Symbol.for(pc),mc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Gn{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let c=[],h=/^@(\w+)\b/.exec(l[0]),f=h&&h[1]=="keyframes";if(h&&o==null)return a.push(l[0]+";");for(let d in o){let m=o[d];if(/&/.test(d))s(d.split(/,\s*/).map(v=>l.map(x=>v.replace(/&/,x))).reduce((v,x)=>v.concat(x)),m,a);else if(m&&typeof m=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),m,c,f)}else m!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+m+";")}(c.length||f)&&a.push((r&&!h&&!u?l.map(r):l).join(", ")+" {"+c.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Bd[Rd]||1;return Bd[Rd]=e+1,pc+e.toString(36)}static mount(e,n,r){let i=e[mc],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Zx(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let Id=new Map;class Zx{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=Id.get(r);if(s)return e[mc]=s;this.sheet=new i.CSSStyleSheet,Id.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[mc]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Yn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Es={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ek=typeof navigator<"u"&&/Mac/.test(navigator.platform),tk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Le=0;Le<10;Le++)Yn[48+Le]=Yn[96+Le]=String(Le);for(var Le=1;Le<=24;Le++)Yn[Le+111]="F"+Le;for(var Le=65;Le<=90;Le++)Yn[Le]=String.fromCharCode(Le+32),Es[Le]=String.fromCharCode(Le);for(var Wa in Yn)Es.hasOwnProperty(Wa)||(Es[Wa]=Yn[Wa]);function nk(t){var e=ek&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||tk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Es:Yn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Pe(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)L0(t,arguments[e]);return t}function L0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)L0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Ms(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function gc(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Ul(t,e){if(!e.anchorNode)return!1;try{return gc(t,e.anchorNode)}catch{return!1}}function Ts(t){return t.nodeType==3?Cr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function ns(t,e,n,r){return n?jd(t,e,n,r,-1)||jd(t,e,n,r,1):!1}function Sr(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function So(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function jd(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:on(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Sr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?on(t):0}else return!1}}function on(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ia(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function rk(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function R0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function ik(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,d=c==a.body,m=1,v=1;if(d)f=rk(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let g=c.getBoundingClientRect();({scaleX:m,scaleY:v}=R0(c,g)),f={left:g.left,right:g.left+c.clientWidth*m,top:g.top,bottom:g.top+c.clientHeight*v}}let x=0,p=0;if(i=="nearest")e.top<f.top?(p=e.top-(f.top+l),n>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,n<0&&e.top-p<f.top&&(p=e.top-(f.top+l)));else{let g=e.bottom-e.top,w=f.bottom-f.top;p=(i=="center"&&g<=w?e.top+g/2-w/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-w+l)-f.top}if(r=="nearest"?e.left<f.left?(x=e.left-(f.left+s),n>0&&e.right>f.right+x&&(x=e.right-f.right+s)):e.right>f.right&&(x=e.right-f.right+s,n<0&&e.left<f.left+x&&(x=e.left-(f.left+s))):x=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,x||p)if(d)u.scrollBy(x,p);else{let g=0,w=0;if(p){let k=c.scrollTop;c.scrollTop+=p/v,w=(c.scrollTop-k)*v}if(x){let k=c.scrollLeft;c.scrollLeft+=x/m,g=(c.scrollLeft-k)*m}e={left:e.left-g,top:e.top-w,right:e.right-g,bottom:e.bottom-w},g&&Math.abs(g-x)<1&&(r="nearest"),w&&Math.abs(w-p)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function sk(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class lk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?on(n):0),r,Math.min(e.focusOffset,r?on(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Nr=null;function B0(t){if(t.setActive)return t.setActive();if(Nr)return t.focus(Nr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Nr==null?{get preventScroll(){return Nr={preventScroll:!0},!0}}:void 0),!Nr){Nr=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Fd;function Cr(t,e,n=e){let r=Fd||(Fd=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function ei(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function ok(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function I0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function ak(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,on(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=on(n))}else{if(n==t)return!0;r=Sr(n),n=n.parentNode}}function j0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function F0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=on(n)}else if(n.parentNode&&!So(n))r=Sr(n),n=n.parentNode;else return null}}function z0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!So(n))r=Sr(n)+1,n=n.parentNode;else return null}}class Ue{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Ue(e.parentNode,Sr(e),n)}static after(e,n){return new Ue(e.parentNode,Sr(e)+1,n)}}const Vh=[];class ie{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=ie.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=zd(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=zd(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=on(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ie.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,c=r;a<this.children.length;a++){let h=this.children[a],f=u+h.length;if(u<e&&f>n)return h.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&h.dom.parentNode==this.dom){l=a,o=c;break}c=f,u=f+h.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=Vh){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new _0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ie.prototype.breakAfter=0;function zd(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class _0{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function H0(t,e,n,r,i,s,l,o,a){let{children:u}=t,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:l;if(!(e==r&&c&&!l&&!f&&s.length<2&&c.merge(n,i,s.length?h:null,n==0,o,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&(h!=null&&h.breakAfter))?(e==r&&(d=d.split(i),i=0),!f&&h&&d.merge(0,i,h,!0,0,a)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(h?h.breakAfter=1:l=1),r++}for(c&&(c.breakAfter=l,n>0&&(!l&&s.length&&c.merge(n,c.length,s[0],!1,o,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function W0(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:c}=l.findPos(e,-1),h=e-n;for(let f of r)h+=f.length;t.length+=h,H0(t,u,c,o,a,r,0,i,s)}let rt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},yc=typeof document<"u"?document:{documentElement:{style:{}}};const vc=/Edge\/(\d+)/.exec(rt.userAgent),V0=/MSIE \d/.test(rt.userAgent),wc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rt.userAgent),sa=!!(V0||wc||vc),_d=!sa&&/gecko\/(\d+)/i.test(rt.userAgent),Va=!sa&&/Chrome\/(\d+)/.exec(rt.userAgent),uk="webkitFontSmoothing"in yc.documentElement.style,U0=!sa&&/Apple Computer/.test(rt.vendor),Hd=U0&&(/Mobile\/\w+/.test(rt.userAgent)||rt.maxTouchPoints>2);var L={mac:Hd||/Mac/.test(rt.platform),windows:/Win/.test(rt.platform),linux:/Linux|X11/.test(rt.platform),ie:sa,ie_version:V0?yc.documentMode||6:wc?+wc[1]:vc?+vc[1]:0,gecko:_d,gecko_version:_d?+(/Firefox\/(\d+)/.exec(rt.userAgent)||[0,0])[1]:0,chrome:!!Va,chrome_version:Va?+Va[1]:0,ios:Hd,android:/Android\b/.test(rt.userAgent),safari:U0,webkit_version:uk?+(/\bAppleWebKit\/(\d+)/.exec(rt.userAgent)||[0,0])[1]:0,tabSize:yc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const ck=256;class Ht extends ie{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Ht)||this.length-(n-e)+r.length>ck||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Ht(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Ue(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return hk(this.dom,e,n)}}class kn extends ie{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(I0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof kn&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(W0(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new kn(this.mark,n,l)}domAtPos(e){return $0(this,e)}coordsAt(e,n){return q0(this,e,n)}}function hk(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?L.chrome||L.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=Cr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return L.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?ia(a,l<0):a||null}class fr extends ie{static create(e,n,r){return new fr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=fr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof fr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof fr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Q.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Q.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ue.before(this.dom):Ue.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return ia(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class fi extends ie{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof fi&&e.side==this.side}split(){return new fi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ue.before(this.dom):Ue.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Q.empty}get isHidden(){return!0}}Ht.prototype.children=fr.prototype.children=fi.prototype.children=Vh;function $0(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new Ue(n,0)}function K0(t,e,n){let r,{children:i}=t;n>0&&e instanceof kn&&i.length&&(r=i[i.length-1])instanceof kn&&r.mark.eq(e.mark)?K0(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function q0(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let d=u.children[h],m=f+d.length;m>=c&&(d.children.length?o(d,c-f):(!s||s.isHidden&&(n>0||dk(s,d)))&&(m>c||f==m&&d.getSide()>0)?(s=d,l=c-f):(f<c||f==m&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-f)),f=m}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):fk(t)}function fk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Ts(e);return n[n.length-1]||null}function dk(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function xc(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Wd=Object.create(null);function Co(t,e,n){if(t==e)return!0;t||(t=Wd),e||(e=Wd);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function kc(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function pk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class _s{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var At=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(At||(At={}));class U extends hi{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Hs(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Qn(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=G0(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new Qn(e,r,i,n,e.widget||null,!0)}static line(e){return new Ws(e)}static set(e,n=!1){return ee.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}U.none=ee.empty;class Hs extends U{constructor(e){let{start:n,end:r}=G0(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Hs&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Co(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Hs.prototype.point=!1;class Ws extends U{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ws&&this.spec.class==e.spec.class&&Co(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Ws.prototype.mapMode=ft.TrackBefore;Ws.prototype.point=!0;class Qn extends U{constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?ft.TrackBefore:ft.TrackAfter:ft.TrackDel}get type(){return this.startSide!=this.endSide?At.WidgetRange:this.startSide<=0?At.WidgetBefore:At.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Qn&&mk(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Qn.prototype.point=!0;function G0(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function mk(t,e){return t==e||!!(t&&e&&t.compare(e))}function $l(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class ke extends ie{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof ke))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),W0(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new ke;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Co(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){K0(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=xc(n,this.attrs||{})),r&&(this.attrs=xc({class:r},this.attrs||{}))}domAtPos(e){return $0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(I0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(kc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&ie.get(i)instanceof kn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ie.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!L.ios||!this.children.some(s=>s instanceof Ht))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Ht)||/[^ -~]/.test(r.text))return null;let i=Ts(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=q0(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof ke&&this.children.length==0&&e.children.length==0&&Co(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof ke)return s;if(l>n)break}i=l+s.breakAfter}return null}}class gn extends ie{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof gn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Ue.before(this.dom):Ue.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new gn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return Vh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Q.empty}domBoundsAround(){return null}become(e){return e instanceof gn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof Sc?null:ia(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Sc extends _s{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class rs{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof gn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ke),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(dl(new fi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof gn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(dl(new Ht(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof Qn){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof Qn)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new gn(r.widget||di.block,o,r));else{let a=fr.create(r.widget||di.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(h.append(dl(new fi(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(dl(a,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new rs(e,n,r,s);return l.openEnd=ee.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function dl(t,e){for(let n of e)t=new kn(n,[t],t.length);return t}class di extends _s{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}di.inline=new di("span");di.block=new di("div");var Ae=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ae||(Ae={}));const br=Ae.LTR,Uh=Ae.RTL;function Y0(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const gk=Y0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),yk=Y0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Cc=Object.create(null),Gt=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Cc[e]=n,Cc[n]=-e}function Q0(t){return t<=247?gk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?yk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const vk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Bn{get dir(){return this.level%2?Uh:br}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function J0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!J0(r.inner,i.inner))return!1}return!0}const re=[];function wk(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,c=a,h=a;u<o;u++){let f=Q0(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),re[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=l,c=a,h=a;u<o;u++){let f=re[u];if(f==128)u<o-1&&c==re[u+1]&&c&24?f=re[u]=c:re[u]=256;else if(f==64){let d=u+1;for(;d<o&&re[d]==64;)d++;let m=u&&c==8||d<n&&re[d]==8?h==1?1:8:256;for(let v=u;v<d;v++)re[v]=m;u=d-1}else f==8&&h==1&&(re[u]=1);c=f,f&7&&(h=f)}}}function xk(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,c=l<r.length?r[l].from:n;for(let h=u,f,d,m;h<c;h++)if(d=Cc[f=t.charCodeAt(h)])if(d<0){for(let v=o-3;v>=0;v-=3)if(Gt[v+1]==-d){let x=Gt[v+2],p=x&2?i:x&4?x&1?s:i:0;p&&(re[h]=re[Gt[v]]=p),o=v;break}}else{if(Gt.length==189)break;Gt[o++]=h,Gt[o++]=f,Gt[o++]=a}else if((m=re[h])==2||m==1){let v=m==i;a=v?0:1;for(let x=o-3;x>=0;x-=3){let p=Gt[x+2];if(p&2)break;if(v)Gt[x+2]|=2;else{if(p&4)break;Gt[x+2]|=4}}}}}function kk(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=re[a];if(u==256){let c=a+1;for(;;)if(c==o){if(i==n.length)break;c=n[i++].to,o=i<n.length?n[i].from:e}else if(re[c]==256)c++;else break;let h=s==1,f=(c<e?re[c]:r)==1,d=h==f?h?1:2:r;for(let m=c,v=i,x=v?n[v-1].to:t;m>a;)m==x&&(m=n[--v].from,x=v?n[v-1].to:t),re[--m]=d;a=c}else s=u,a++}}}function bc(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let c=!0,h=!1;if(u==s.length||a<s[u].from){let v=re[a];v!=o&&(c=!1,h=v==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,m=a;e:for(;;)if(u<s.length&&m==s[u].from){if(h)break e;let v=s[u];if(!c)for(let x=v.to,p=u+1;;){if(x==n)break e;if(p<s.length&&s[p].from==x)x=s[p++].to;else{if(re[x]==o)break e;break}}if(u++,f)f.push(v);else{v.from>a&&l.push(new Bn(a,v.from,d));let x=v.direction==br!=!(d%2);Ac(t,x?r+1:r,i,v.inner,v.from,v.to,l),a=v.to}m=v.to}else{if(m==n||(c?re[m]!=o:re[m]==o))break;m++}f?bc(t,a,m,r+1,i,f,l):a<m&&l.push(new Bn(a,m,d)),a=m}else for(let a=n,u=s.length;a>e;){let c=!0,h=!1;if(!u||a>s[u-1].to){let v=re[a-1];v!=o&&(c=!1,h=v==16)}let f=!c&&o==1?[]:null,d=c?r:r+1,m=a;e:for(;;)if(u&&m==s[u-1].to){if(h)break e;let v=s[--u];if(!c)for(let x=v.from,p=u;;){if(x==e)break e;if(p&&s[p-1].to==x)x=s[--p].from;else{if(re[x-1]==o)break e;break}}if(f)f.push(v);else{v.to<a&&l.push(new Bn(v.to,a,d));let x=v.direction==br!=!(d%2);Ac(t,x?r+1:r,i,v.inner,v.from,v.to,l),a=v.from}m=v.from}else{if(m==e||(c?re[m-1]!=o:re[m-1]==o))break;m--}f?bc(t,m,a,r+1,i,f,l):m<a&&l.push(new Bn(m,a,d)),a=m}}function Ac(t,e,n,r,i,s,l){let o=e%2?2:1;wk(t,i,s,r,o),xk(t,i,s,r,o),kk(i,s,r,o),bc(t,i,s,e,n,r,l)}function Sk(t,e,n){if(!t)return[new Bn(0,0,e==Uh?1:0)];if(e==br&&!n.length&&!vk.test(t))return X0(t.length);if(n.length)for(;t.length>re.length;)re[re.length]=256;let r=[],i=e==br?0:1;return Ac(t,i,i,n,0,t.length,r),r}function X0(t){return[new Bn(0,t,0)]}let Z0="";function Ck(t,e,n,r,i){var s;let l=r.head-t.from,o=Bn.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let c=Be(t.text,l,a.forward(i,n));(c<a.from||c>a.to)&&(c=u),Z0=t.text.slice(Math.min(l,c),Math.max(l,c));let h=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return h&&c==u&&h.level+(i?0:1)<a.level?M.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):M.cursor(c+t.from,a.forward(i,n)?-1:1,a.level)}function bk(t,e,n){for(let r=e;r<n;r++){let i=Q0(t.charCodeAt(r));if(i==1)return br;if(i==2||i==4)return Uh}return br}const ey=F.define(),ty=F.define(),ny=F.define(),ry=F.define(),Ec=F.define(),iy=F.define(),sy=F.define(),$h=F.define(),Kh=F.define(),ly=F.define({combine:t=>t.some(e=>e)}),Ak=F.define({combine:t=>t.some(e=>e)}),oy=F.define();class ti{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new ti(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ti(M.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const pl=le.define({map:(t,e)=>t.map(e)}),ay=le.define();function nn(t,e,n){let r=t.facet(ry);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const hn=F.define({combine:t=>t.length?t[0]:!0});let Ek=0;const Ur=F.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class gt{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Ur.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Ur.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new gt(Ek++,e,r,i,o=>{let a=[];return l&&a.push(Ns.of(u=>{let c=u.plugin(o);return c?l(c):U.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return gt.define((r,i)=>new e(r,i),n)}}class Ua{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(nn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){nn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){nn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const uy=F.define(),qh=F.define(),Ns=F.define(),cy=F.define(),Vs=F.define(),hy=F.define();function Vd(t,e){let n=t.state.facet(hy);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return ee.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,c=l-e.from,h=i;for(let f=o.length-1;f>=0;f--,a--){let d=o[f].spec.bidiIsolate,m;if(d==null&&(d=bk(e.text,u,c)),a>0&&h.length&&(m=h[h.length-1]).to==u&&m.direction==d)m.to=c,h=m.inner;else{let v={from:u,to:c,direction:d,inner:[]};h.push(v),h=v.inner}}}}),i}const fy=F.define();function dy(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(fy)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Wi=F.define();class Et{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Et(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let h=n[s],f=n[s+1],d=Math.max(o,h),m=Math.min(c,f);if(d<=m&&new Et(d+u,m+u,d,m).addToSet(r),f>c)break;s+=2}if(!a)return r;new Et(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class bo{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Te.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new Et(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new bo(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Ud extends ie{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=U.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ke],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Et(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!Lk(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?Tk(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Et(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(L.ie||L.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=Pk(l,o,e.changes);return r=Et.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=L.chrome||L.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof gn&&l.widget instanceof Sc&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:c,toB:h}=o,f,d,m,v;if(r&&r.range.fromB<h&&r.range.toB>c){let k=rs.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=rs.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);d=k.breakAtStart,m=k.openStart,v=C.openEnd;let A=this.compositionView(r);C.breakAtStart?A.breakAfter=1:C.content.length&&A.merge(A.length,A.length,C.content[0],!1,C.openStart,0)&&(A.breakAfter=C.content[0].breakAfter,C.content.shift()),k.content.length&&A.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(A).concat(C.content)}else({content:f,breakAtStart:d,openStart:m,openEnd:v}=rs.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:x,off:p}=s.findPos(u,1),{i:g,off:w}=s.findPos(a,-1);H0(this,g,w,x,p,f,d,m,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(ay)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Ht(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new kn(i,[n],n.length);let r=new ke;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=ie.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(hn)||this.dom.tabIndex>-1)&&Ul(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(L.gecko&&o.empty&&!this.hasComposition&&Mk(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=u=new Ue(h,0),l=!0}let c=this.view.observer.selectionRange;(l||!c.focusNode||(!ns(a.node,a.offset,c.anchorNode,c.anchorOffset)||!ns(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,o))&&(this.view.observer.ignore(()=>{L.android&&L.chrome&&this.dom.contains(c.focusNode)&&Dk(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Ms(this.view.root);if(h)if(o.empty){if(L.gecko){let f=Nk(a.node,a.offset);if(f&&f!=3){let d=(f==1?F0:z0)(a.node,a.offset);d&&(a=new Ue(d.node,d.offset))}}h.collapse(a.node,a.offset),o.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=o.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Ue(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Ue(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&ns(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Ms(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=ke.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=ie.get(n.childNodes[i]);s instanceof ke&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=ie.get(n.childNodes[i]);s instanceof ke&&(r=s.domAtPos(s.length))}return r?new Ue(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=ie.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof ke)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof ke&&!(r instanceof ke&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof gn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof ke))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Ht))return null;let s=Be(i.text,r);if(s==r)return null;let l=Cr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Ae.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>i)break;if(u>=r){let d=h.dom.getBoundingClientRect();if(n.push(d.height),l){let m=h.dom.lastChild,v=m?Ts(m):[];if(v.length){let x=v[v.length-1],p=a?x.right-d.left:d.right-x.left;p>o&&(o=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Ae.RTL:Ae.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ke){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Ts(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new _0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(U.replace({widget:new Sc(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return U.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Ns).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(cy).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(ee.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(oy))try{if(u(this.view,e.range,e))return!0}catch(c){nn(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=dy(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;ik(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Ae.LTR)}}function Mk(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function py(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=F0(n.focusNode,n.focusOffset),i=z0(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=ie.get(i.node);if(!o||o instanceof Ht&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=ie.get(r.node);!a||a instanceof Ht&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function Tk(t,e,n){let r=py(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new Et(a.mapPos(s),a.mapPos(l),s,l),c=[];for(let h=i.parentNode;;h=h.parentNode){let f=ie.get(h);if(f instanceof kn)c.push({node:h,deco:f.mark});else{if(f instanceof ke||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new Hs({inclusive:!0,attributes:pk(h),tagName:h.tagName.toLowerCase()})});else return null}}}function Nk(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Ok=class{constructor(){this.changes=[]}compareRange(e,n){$l(e,n,this.changes)}comparePoint(e,n){$l(e,n,this.changes)}boundChange(e){$l(e,e,this.changes)}};function Pk(t,e,n){let r=new Ok;return ee.compare(t,e,n,r),r.changes}function Dk(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Lk(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function Rk(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return M.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=Be(i.text,s,!1):o=Be(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=Be(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=Be(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return M.range(l+i.from,o+i.from)}function Bk(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Ik(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function $a(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function $d(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Kd(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Mc(t,e,n){let r,i,s,l,o=!1,a,u,c,h;for(let m=t.firstChild;m;m=m.nextSibling){let v=Ts(m);for(let x=0;x<v.length;x++){let p=v[x];i&&$a(i,p)&&(p=$d(Kd(p,i.bottom),i.top));let g=Bk(e,p),w=Ik(n,p);if(g==0&&w==0)return m.nodeType==3?qd(m,e,n):Mc(m,e,n);(!r||l>w||l==w&&s>g)&&(r=m,i=p,s=g,l=w,o=g?e<p.left?x>0:x<v.length-1:!0),g==0?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=m,c=p):n<p.top&&(!h||h.top>p.top)&&(u=m,h=p):c&&$a(c,p)?c=Kd(c,p.bottom):h&&$a(h,p)&&(h=$d(h,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):h&&h.top<=n&&(r=u,i=h),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return qd(r,f,n);if(o&&r.contentEditable!="false")return Mc(r,f,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function qd(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=Cr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;l||(l=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,d=f;if((L.chrome||L.gecko)&&Cr(t,o).getBoundingClientRect().left==c.right&&(d=!f),h<=0)return{node:t,offset:o+(d?1:0)};i=o+(d?1:0),s=h}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function my(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:h}=e,f=h-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,C=!1;a=t.elementAtHeight(f),a.type!=At.Text;)for(;f=r>0?a.bottom+k:a.top-k,!(f>=0&&f<=u);){if(C)return n?null:0;C=!0,r=-r}h=o+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:Gd(t,l,a,c,h);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Gd(t,l,a,c,h);let m=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:m,x=v.elementFromPoint(c,h);x&&!t.contentDOM.contains(x)&&(x=null),x||(c=Math.max(l.left+1,Math.min(l.right-1,c)),x=v.elementFromPoint(c,h),x&&!t.contentDOM.contains(x)&&(x=null));let p,g=-1;if(x&&((i=t.docView.nearest(x))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let k=m.caretPositionFromPoint(c,h);k&&({offsetNode:p,offset:g}=k)}else if(m.caretRangeFromPoint){let k=m.caretRangeFromPoint(c,h);k&&({startContainer:p,startOffset:g}=k)}p&&(!t.contentDOM.contains(p)||L.safari&&jk(p,g,c)||L.chrome&&Fk(p,g,c))&&(p=void 0),p&&(g=Math.min(on(p),g))}if(!p||!t.docView.dom.contains(p)){let k=ke.find(t.docView,d);if(!k)return f>a.top+a.height/2?a.to:a.from;({node:p,offset:g}=Mc(k.dom,c,h))}let w=t.docView.nearest(p);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=w.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(p,g)+w.posAtStart}function Gd(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+Xx(l,s,t.state.tabSize)}function gy(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return Cr(t,r-1,r).getBoundingClientRect().right>n}function jk(t,e,n){return gy(t,e,n)}function Fk(t,e,n){if(e!=0)return gy(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Cr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function zk(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==At.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function _k(t,e,n,r){let i=zk(t,e.head,e.assoc||-1),s=!r||i.type!=At.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==Ae.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return M.cursor(a,n?-1:1)}return M.cursor(n?i.to:i.from,n?-1:1)}function Yd(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Ck(i,s,l,o,n),c=Z0;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(c))return o}else{if(!r)return u;a=r(c)}o=u}}function Hk(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==Ie.Space&&(i=l),i==l}}function Wk(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return M.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),o=(s<0?d.top:d.bottom)+c}let h=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let m=o+(f+d)*s,v=my(t,{x:h,y:m},!1,s);if(m<a.top||m>a.bottom||(s<0?v<i:v>i)){let x=t.docView.coordsForChar(v),p=!x||m<x.top?-1:1;return M.cursor(v,p,void 0,l)}}}function is(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function yy(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=is(t,i.from,0);l!=i.from&&(s=M.cursor(l,-1))}else{let l=is(t,i.from,-1),o=is(t,i.to,1);(l!=i.from||o!=i.to)&&(s=M.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?M.create(n,e.mainIndex):e}function Ka(t,e,n){let r=is(t.state.facet(Vs).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:M.cursor(r,r<n.from?1:-1)}const Vi="";class Vk{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Z.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Vi}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=ie.get(i),a=ie.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:So(i))||So(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=ie.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(Uk(e,r.node,r.offset)?n:0))}}function Uk(t,e,n){for(;;){if(!e||n<on(e))return!1;if(e==t)return!0;n=Sr(e)+1,e=e.parentNode}}class Qd{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class $k{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:Gk(e),a=new Vk(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=Yk(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!gc(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!gc(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),c=e.viewport;if((L.ios||L.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(a,u),f=Math.max(a,u),d=c.from-h,m=c.to-f;(d==0||d==1||h==0)&&(m==0||m==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=M.single(u,a)}}}function vy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||L.android&&e.text.length<o-l)&&(a=i.to,u="end");let c=qk(t.state.doc.sliceString(l,o,Vi),e.text,a-l,u);c&&(L.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Vi+Vi&&c.toB--,n={from:l+c.from,to:l+c.toA,insert:Q.of(e.text.slice(c.from,c.toB).split(Vi))})}else r&&(!t.hasFocus&&t.state.facet(hn)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(L.mac||L.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=M.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Q.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:L.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=M.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Q.of([" "])}),n)return Gh(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=yy(t.state.facet(Vs).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function Gh(t,e,n,r=-1){if(L.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(L.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ei(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&ei(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&ei(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=Kk(t,e,n));return t.state.facet(iy).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function Kk(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,c=is(i.facet(Vs).map(h=>h(t)),u,a);e.from==c&&(l=c)}if(l>-1)r={changes:e,selection:M.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),h,f=n&&py(t,n.main.head);if(f){let v=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-v}}else h=t.state.doc.lineAt(s.head);let d=s.to-e.to,m=s.to-s.from;r=i.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:u||v.map(a)};let x=v.to-d,p=x-c.length;if(v.to-v.from!=m||t.state.sliceDoc(p,x)!=c||v.to>=h.from&&v.from<=h.to)return{range:v};let g=i.changes({from:p,to:x,insert:e.insert}),w=v.to-s.to;return{changes:g,range:u?M.range(Math.max(0,u.anchor+w),Math.max(0,u.head+w)):v.map(g)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function qk(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function Gk(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Qd(n,r)),(i!=n||s!=r)&&e.push(new Qd(i,s))),e}function Yk(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?M.single(n+e,r+e):null}class Qk{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,L.safari&&e.contentDOM.addEventListener("input",()=>null),L.gecko&&fS(e.contentDOM.ownerDocument)}handleEvent(e){!iS(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Jk(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&xy.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),L.android&&L.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return L.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=wy.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||Xk.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ei(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:L.safari&&!L.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Jd(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){nn(n.state,i)}}}function Jk(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(Jd(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(Jd(r.value,a))}}for(let r in Wt)n(r).handlers.push(Wt[r]);for(let r in Ot)n(r).observers.push(Ot[r]);return e}const wy=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Xk="dthko",xy=[16,17,18,20,91,92,224,225],ml=6;function gl(t){return Math.max(0,t)*.7+8}function Zk(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class eS{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=sk(e.contentDOM),this.atoms=e.state.facet(Vs).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Z.allowMultipleSelections)&&tS(e,n),this.dragging=rS(e,n)&&Cy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Zk(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=dy(this.view);e.clientX-a.left<=i+ml?n=-gl(i-e.clientX):e.clientX+a.right>=l-ml&&(n=gl(e.clientX-l)),e.clientY-a.top<=s+ml?r=-gl(s-e.clientY):e.clientY+a.bottom>=o-ml&&(r=gl(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=yy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function tS(t,e){let n=t.state.facet(ey);return n.length?n[0](e):L.mac?e.metaKey:e.ctrlKey}function nS(t,e){let n=t.state.facet(ty);return n.length?n[0](e):L.mac?!e.altKey:!e.ctrlKey}function rS(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Ms(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function iS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ie.get(n))&&r.ignoreEvent(e))return!1;return!0}const Wt=Object.create(null),Ot=Object.create(null),ky=L.ie&&L.ie_version<15||L.ios&&L.webkit_version<604;function sS(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Sy(t,n.value)},50)}function la(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function Sy(t,e){e=la(t.state,$h,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(Tc!=null&&n.selection.ranges.every(a=>a.empty)&&Tc==s.toString()){let a=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let h=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:M.cursor(u.from+h.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:M.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Ot.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Wt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ot.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ot.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Wt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(ny))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=aS(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new eS(t,e,n,r)),r&&t.observer.ignore(()=>{B0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Xd(t,e,n,r){if(r==1)return M.cursor(e,n);if(r==2)return Rk(t.state,e,n);{let i=ke.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,M.range(l,o)}}let Zd=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function lS(t,e,n,r){let i=ke.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&Zd(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&Zd(n,r,o)?1:l&&l.bottom>=r?-1:1}function ep(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:lS(t,n,e.clientX,e.clientY)}}const oS=L.ie&&L.ie_version<=11;let tp=null,np=0,rp=0;function Cy(t){if(!oS)return t.detail;let e=tp,n=rp;return tp=t,rp=Date.now(),np=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(np+1)%3:1}function aS(t,e){let n=ep(t,e),r=Cy(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=ep(t,s),u,c=Xd(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let h=Xd(t,n.pos,n.bias,r),f=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=f<c.from?M.range(f,d):M.range(d,f)}return l?i.replaceRange(i.main.extend(c.from,c.to)):o&&r==1&&i.ranges.length>1&&(u=uS(i,a.pos))?u:o?i.addRange(c):M.create([c])}}}function uS(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return M.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Wt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=M.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",la(t.state,Kh,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Wt.dragend=t=>(t.inputState.draggedContent=null,!1);function ip(t,e,n,r){if(n=la(t.state,$h,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&nS(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Wt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&ip(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return ip(t,e,r,!0),!0}return!1};Wt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=ky?null:e.clipboardData;return n?(Sy(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(sS(t),!1)};function cS(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function hS(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:la(t,Kh,e.join(t.lineBreak)),ranges:n,linewise:r}}let Tc=null;Wt.copy=Wt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=hS(t.state);if(!n&&!i)return!1;Tc=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=ky?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(cS(t,n),!1)};const by=xi.define();function Ay(t,e){let n=[];for(let r of t.facet(sy)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:by.of(!0)}):null}function Ey(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Ay(t.state,e);n?t.dispatch(n):t.update([])}},10)}Ot.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Ey(t)};Ot.blur=t=>{t.observer.clearSelectionRange(),Ey(t)};Ot.compositionstart=Ot.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ot.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,L.chrome&&L.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ot.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Wt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return Gh(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(L.chrome&&L.android&&(i=wy.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return L.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),L.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ot.compositionend(t,e),20),!1};const sp=new Set;function fS(t){sp.has(t)||(sp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const lp=["pre-wrap","normal","pre-line","break-spaces"];let pi=!1;function op(){pi=!1}class dS{constructor(e){this.lineWrapping=e,this.doc=Q.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return lp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=lp.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let c=l[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class pS{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class tn{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?At.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Qn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new tn(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var ae=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(ae||(ae={}));const Kl=.001;class Xe{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Kl&&(pi=!0),this.height=e)}replace(e,n,r){return Xe.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:c,toB:h}=i[o],f=s.lineAt(a,ae.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,ae.ByPosNoHeight,r,0,0);for(h+=d.to-u,u=d.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,ae.ByPosNoHeight,r,0,0));c+=f.from-a,a=f.from;let m=Yh.build(r.setDoc(l),e,c,h);s=Ao(s,s.replace(a,u,m))}return s.updateHeight(r,0)}static empty(){return new ht(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new mS(Xe.of(e.slice(0,n)),l,Xe.of(e.slice(r)))}}function Ao(t,e){return t==e?t:(t.constructor!=e.constructor&&(pi=!0),e)}Xe.prototype.size=1;class My extends Xe{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new tn(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ht extends My{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new tn(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof ht||i instanceof De&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof De?i=new ht(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Xe.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class De extends Xe{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),h=o+c.length*a,f=Math.max(r,e-h/2);return new tn(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:c,length:h}=n.doc.line(s+u);return new tn(c,h,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==ae.ByHeight)return this.blockAt(e,r,i,s);if(n==ae.ByPosNoHeight){let{from:d,to:m}=r.doc.lineAt(e);return new tn(d,m-d,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=o+u.length*a,h=u.number-l,f=i+o*h+a*(u.from-s-h);return new tn(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let c=e,h=i;c<=n;){let f=r.doc.lineAt(c);if(c==e){let m=f.number-o;h+=a*m+u*(e-s-m)}let d=a+u*f.length;l(new tn(f.from,f.length,h,d,0)),h+=d,c=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof De?r[r.length-1]=new De(s.length+i):r.push(null,new De(i-1))}if(e>0){let s=r[0];s instanceof De?r[0]=new De(e+s.length):r.unshift(new De(e-1),null)}return Xe.of(r)}decomposeLeft(e,n){n.push(new De(e-1),null)}decomposeRight(e,n){n.push(null,new De(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new De(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let c=e.doc.lineAt(o).length;l.length&&l.push(null);let h=i.heights[i.index++];a==-1?a=h:Math.abs(h-a)>=Kl&&(a=-2);let f=new ht(c,h);f.outdated=!1,l.push(f),o+=c+1}o<=s&&l.push(null,new De(s-o).updateHeight(e,o));let u=Xe.of(l);return(a<0||Math.abs(u.height-this.height)>=Kl||Math.abs(a-this.heightMetrics(e,n).perLine)>=Kl)&&(pi=!0),Ao(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class mS extends Xe{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==ae.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let c=n==ae.ByPosNoHeight?ae.ByPosNoHeight:ae.ByPos;return a?u.join(this.right.lineAt(o,c,r,l,o)):this.left.lineAt(o,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,ae.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&ap(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),ap(s,o)}return Xe.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Xe.of(this.break?[e,null,n]:[e,n]):(this.left=Ao(this.left,e),this.right=Ao(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ap(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof De&&(r=t[e+1])instanceof De&&t.splice(e-1,3,new De(n.length+1+r.length))}const gS=5;class Yh{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof ht?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new ht(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new My(l,i,r)):(l||s||i>=gS)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ht(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new De(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ht)return e;let n=new ht(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof ht)&&!this.isCovered?this.nodes.push(new ht(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof ht&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new Yh(r,e);return ee.spans(n,r,i,s,0),s.finish(r)}}function yS(t,e,n){let r=new vS;return ee.compare(t,e,n,r,0),r.changes}class vS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&$l(e,n,this.changes,5)}}function wS(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function xS(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function kS(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class qa{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return U.replace({widget:new SS(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class SS extends _s{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class up{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=cp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ae.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(qh).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new dS(n),this.stateDeco=e.facet(Ns).filter(r=>typeof r!="function"),this.heightMap=Xe.empty().applyChanges(this.stateDeco,Q.empty,this.heightOracle.setDoc(e.doc),[new Et(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=U.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new yl(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?cp:new Qh(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ui(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Ns).filter(c=>typeof c!="function");let i=e.changedRanges,s=Et.extendWithRanges(i,yS(r,this.stateDeco,e?e.changes:Te.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);op(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||pi)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Ak)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Ae.RTL:Ae.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,c=0;if(o.width&&o.height){let{scaleX:k,scaleY:C}=R0(n,o);(k>.005&&Math.abs(this.scaleX-k)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=k,this.scaleY=C,u|=16,l=a=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=j0(e.scrollDOM);let m=(this.printing?kS:wS)(n,this.paddingTop),v=m.top-this.pixelViewport.top,x=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!xS(e.dom))return 0;let g=o.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let k=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(k)&&(l=!0),l||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:A,textHeight:b}=e.docView.measureTextSize();l=C>0&&i.refresh(s,C,A,b,Math.max(5,g/A),k),l&&(e.docView.minWidth=0,u|=16)}v>0&&x>0?c=Math.max(v,x):v<0&&x<0&&(c=Math.min(v,x)),op();for(let C of this.viewports){let A=C.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(C);this.heightMap=(l?Xe.empty().applyChanges(this.stateDeco,Q.empty,this.heightOracle,[new Et(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new pS(C.from,A))}pi&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new yl(i.lineAt(l-r*1e3,ae.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,ae.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(u,ae.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=h.top:f=h.bottom-c,a=new yl(i.lineAt(f-1e3/2,ae.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,ae.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new yl(this.heightMap.lineAt(r,ae.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,ae.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,ae.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,ae.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new qa(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=Ae.LTR&&!r)return[];let o=[],a=(c,h,f,d)=>{if(h-c<s)return;let m=this.state.selection.main,v=[m.from];m.empty||v.push(m.to);for(let p of v)if(p>c&&p<h){a(c,p-10,f,d),a(p+10,h,f,d);return}let x=bS(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-c)<s&&Math.abs(p.to-h)<s&&!v.some(g=>p.from<g&&p.to>g));if(!x){if(h<f.to&&n&&r&&n.visibleRanges.some(w=>w.from<=h&&w.to>=h)){let w=n.moveToLineBoundary(M.cursor(h),!1,!0).head;w>c&&(h=w)}let p=this.gapSize(f,c,h,d),g=r||p<2e6?p:2e6;x=new qa(c,h,p,g)}o.push(x)},u=c=>{if(c.length<l||c.type!=At.Text)return;let h=CS(c.from,c.to,this.stateDeco);if(h.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,m;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,p;if(f!=null){let g=wl(h,f),w=((this.visibleBottom-this.visibleTop)/2+v)/c.height;x=g-w,p=g+w}else x=(this.visibleTop-c.top-v)/c.height,p=(this.visibleBottom-c.top+v)/c.height;d=vl(h,x),m=vl(h,p)}else{let v=h.total*this.heightOracle.charWidth,x=i*this.heightOracle.charWidth,p=0;if(v>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=A.size-A.displaySize);let g=this.pixelViewport.left+p,w=this.pixelViewport.right+p,k,C;if(f!=null){let A=wl(h,f),b=((w-g)/2+x)/v;k=A-b,C=A+b}else k=(g-x)/v,C=(w+x)/v;d=vl(h,k),m=vl(h,C)}d>c.from&&a(c.from,d,c,h),m<c.to&&a(m,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return o}gapSize(e,n,r,i){let s=wl(i,r)-wl(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){qa.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=U.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];ee.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Ui(this.heightMap.lineAt(e,ae.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Ui(this.heightMap.lineAt(this.scaler.fromDOM(e),ae.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Ui(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class yl{constructor(e,n){this.from=e,this.to=n}}function CS(t,e,n){let r=[],i=t,s=0;return ee.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function vl({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function wl(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function bS(t,e){for(let n of t)if(e(n))return n}const cp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Qh{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,ae.ByPos,e,0,0).top,c=n.lineAt(a,ae.ByPos,e,0,0).bottom;return i+=c-u,{from:o,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof Qh?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Ui(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new tn(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Ui(i,e)):t._content)}const xl=F.define({combine:t=>t.join(" ")}),Nc=F.define({combine:t=>t.indexOf(!0)>-1}),Oc=Gn.newName(),Ty=Gn.newName(),Ny=Gn.newName(),Oy={"&light":"."+Ty,"&dark":"."+Ny};function Pc(t,e,n){return new Gn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const AS=Pc("."+Oc,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Oy),ES={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ga=L.ie&&L.ie_version<=11;class MS{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new lk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(L.ie&&L.ie_version<=11||L.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&L.android&&e.constructor.EDIT_CONTEXT!==!1&&!(L.chrome&&L.chrome_version<126)&&(this.editContext=new NS(e),e.state.facet(hn)&&(e.contentDOM.editContext=this.editContext.editContext)),Ga&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(hn)?r.root.activeElement!=this.dom:!Ul(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(L.ie&&L.ie_version<=11||L.android&&L.chrome)&&!r.state.selection.main.empty&&i.focusNode&&ns(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ms(e.root);if(!n)return!1;let r=L.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&TS(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=Ul(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&ak(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ES),Ga&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ga&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&ei(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Ul(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new $k(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=vy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=hp(n,e.previousSibling||e.target.previousSibling,-1),i=hp(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(hn)!=e.state.facet(hn)&&(e.view.contentDOM.editContext=e.state.facet(hn)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function hp(t,e,n){for(;e;){let r=ie.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function fp(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return ns(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function TS(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return fp(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?fp(t,n):null}class NS{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:Q.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=M.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((L.mac||L.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:Q.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);Gh(e,u,M.single(this.toEditorPos(r.selectionStart,c),this.toEditorPos(r.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(U.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:ay.of(U.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Ms(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let c=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class j{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||ok(e.parent)||document,this.viewState=new up(e.state||Z.create(e)),e.scrollTo&&e.scrollTo.is(pl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ur).map(i=>new Ua(i));for(let i of this.plugins)i.update(this);this.observer=new MS(this),this.inputState=new Qk(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Ud(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof $e?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(by))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=Ay(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(Z.phrases)!=this.state.facet(Z.phrases))return this.setState(s);i=bo.create(this,s,e),i.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new ti(d.empty?d:M.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(pl)&&(h=d.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=Eo.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Wi)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(xl)!=i.state.facet(xl)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(Ec))try{f(i)}catch(d){nn(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!vy(this,c)&&u.force&&ei(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new up(e),this.plugins=e.facet(Ur).map(r=>new Ua(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new Ud(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Ur),r=e.state.facet(Ur);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new Ua(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){nn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(j0(r))s=-1,l=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,l=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(m){return nn(this.state,m),dp}}),h=bo.create(this,this.state,[]),f=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=dp)try{let m=u[d];m.write&&m.write(c[d],this)}catch(m){nn(this.state,m)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(Ec))o(n)}get themeClasses(){return Oc+" "+(this.state.facet(Nc)?Ny:Ty)+" "+this.state.facet(xl)}updateAttrs(){let e=pp(this,uy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(hn)?"true":"false",class:"cm-content",style:`${L.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),pp(this,qh,n);let r=this.observer.ignore(()=>{let i=kc(this.contentDOM,this.contentAttrs,n),s=kc(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(j.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Wi);let e=this.state.facet(j.cspNonce);Gn.mount(this.root,this.styleModules.concat(AS).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Ka(this,e,Yd(this,e,n,r))}moveByGroup(e,n){return Ka(this,e,Yd(this,e,n,r=>Hk(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return M.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return _k(this,e,n,r)}moveVertically(e,n,r){return Ka(this,e,Wk(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),my(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[Bn.find(s,e-i.from,-1,n)];return ia(r,l.dir==Ae.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(ly)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>OS)return X0(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||J0(s.isolates,r=Vd(this,e))))return s.order;r||(r=Vd(this,e));let i=Sk(e.text,n,r);return this.bidiCache.push(new Eo(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||L.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{B0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return pl.of(new ti(typeof e=="number"?M.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return pl.of(new ti(M.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return gt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return gt.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Gn.newName(),i=[xl.of(r),Wi.of(Pc(`.${r}`,e))];return n&&n.dark&&i.push(Nc.of(!0)),i}static baseTheme(e){return ea.lowest(Wi.of(Pc("."+Oc,e,Oy)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ie.get(r)||ie.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}j.styleModule=Wi;j.inputHandler=iy;j.clipboardInputFilter=$h;j.clipboardOutputFilter=Kh;j.scrollHandler=oy;j.focusChangeEffect=sy;j.perLineTextDirection=ly;j.exceptionSink=ry;j.updateListener=Ec;j.editable=hn;j.mouseSelectionStyle=ny;j.dragMovesSelection=ty;j.clickAddsSelectionRange=ey;j.decorations=Ns;j.outerDecorations=cy;j.atomicRanges=Vs;j.bidiIsolatedRanges=hy;j.scrollMargins=fy;j.darkTheme=Nc;j.cspNonce=F.define({combine:t=>t.length?t[0]:""});j.contentAttributes=qh;j.editorAttributes=uy;j.lineWrapping=j.contentAttributes.of({class:"cm-lineWrapping"});j.announce=le.define();const OS=4096,dp={};class Eo{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Ae.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new Eo(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function pp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&xc(l,n)}return n}const PS=L.mac?"mac":L.windows?"win":L.linux?"linux":"key";function DS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function kl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const LS=ea.default(j.domEventHandlers({keydown(t,e){return Ly(Dy(e.state),t,e,"editor")}})),Py=F.define({enables:LS}),mp=new WeakMap;function Dy(t){let e=t.facet(Py),n=mp.get(e);return n||mp.set(e,n=IS(e.reduce((r,i)=>r.concat(i),[]))),n}function RS(t,e,n){return Ly(Dy(t.state),e,t,n)}let Pn=null;const BS=4e3;function IS(t,e=PS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,c)=>{var h,f;let d=n[l]||(n[l]=Object.create(null)),m=o.split(/ (?!$)/).map(p=>DS(p,e));for(let p=1;p<m.length;p++){let g=m.slice(0,p).join(" ");i(g,!0),d[g]||(d[g]={preventDefault:!0,stopPropagation:!1,run:[w=>{let k=Pn={view:w,prefix:g,scope:l};return setTimeout(()=>{Pn==k&&(Pn=null)},BS),!0}]})}let v=m.join(" ");i(v,!1);let x=d[v]||(d[v]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});a&&x.run.push(a),u&&(x.preventDefault=!0),c&&(x.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=l;for(let f in c)c[f].run.push(d=>h(d,Dc))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Dc=null;function Ly(t,e,n,r){Dc=e;let i=nk(e),s=v0(i,0),l=w0(s)==i.length&&i!=" ",o="",a=!1,u=!1,c=!1;Pn&&Pn.view==n&&Pn.scope==r&&(o=Pn.prefix+" ",xy.indexOf(e.keyCode)<0&&(u=!0,Pn=null));let h=new Set,f=x=>{if(x){for(let p of x.run)if(!h.has(p)&&(h.add(p),p(n)))return x.stopPropagation&&(c=!0),!0;x.preventDefault&&(x.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],m,v;return d&&(f(d[o+kl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(L.windows&&e.ctrlKey&&e.altKey)&&!(L.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(m=Yn[e.keyCode])&&m!=i?(f(d[o+kl(m,e,!0)])||e.shiftKey&&(v=Es[e.keyCode])!=i&&v!=m&&f(d[o+kl(v,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(d[o+kl(i,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),Dc=null,a}function jS(){return zS}const FS=U.line({class:"cm-activeLine"}),zS=gt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(FS.range(i.from)),e=i.from)}return U.set(n)}},{decorations:t=>t.decorations}),gp=F.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Mo(t,e){let n=t.plugin(Ry),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Ry=gt.fromClass(class{constructor(t){this.input=t.state.facet(To),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(gp);this.top=new Sl(t,!0,e.topContainer),this.bottom=new Sl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(gp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Sl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Sl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(To);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),o.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:l).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>j.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Sl{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=yp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=yp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function yp(t){let e=t.nextSibling;return t.remove(),e}const To=F.define({enables:Ry});class Jn extends hi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Jn.prototype.elementClass="";Jn.prototype.toDOM=void 0;Jn.prototype.mapMode=ft.TrackBefore;Jn.prototype.startSide=Jn.prototype.endSide=-1;Jn.prototype.point=!0;const Ya=F.define(),_S=F.define(),HS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ee.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ss=F.define();function WS(t){return[By(),ss.of({...HS,...t})]}const vp=F.define({combine:t=>t.some(e=>e)});function By(t){return[VS]}const VS=gt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ss).map(e=>new xp(t,e)),this.fixed=!t.state.facet(vp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(vp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=ee.iter(this.view.state.facet(Ya),this.view.viewport.from),r=[],i=this.gutters.map(s=>new US(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==At.Text&&l){Lc(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==At.Text){Lc(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ss),n=t.state.facet(ss),r=t.docChanged||t.heightChanged||t.viewportChanged||!ee.eq(t.startState.facet(Ya),t.state.facet(Ya),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new xp(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>j.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ae.LTR?{left:r,right:i}:{right:r,left:i}})});function wp(t){return Array.isArray(t)?t:[t]}function Lc(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class US{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ee.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new Iy(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Lc(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(_S)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class xp{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=wp(n.markers(e)),n.initialSpacer&&(this.spacer=new Iy(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=wp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ee.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Iy{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),$S(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let h=l;h<this.markers.length;h++)if(this.markers[h].compare(a)){o=h,u=!0;break}}else o=this.markers.length;for(;l<o;){let c=this.markers[l++];if(c.toDOM){c.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function $S(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const KS=F.define(),qS=F.define(),$r=F.define({combine(t){return na(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class Qa extends Jn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ja(t,e){return t.state.facet($r).formatNumber(e,t.state)}const GS=ss.compute([$r],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(KS)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new Qa(Ja(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(qS)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet($r)!=e.state.facet($r),initialSpacer(e){return new Qa(Ja(e,kp(e.state.doc.lines)))},updateSpacer(e,n){let r=Ja(n.view,kp(n.view.state.doc.lines));return r==e.number?e:new Qa(r)},domEventHandlers:t.facet($r).domEventHandlers,side:"before"}));function YS(t={}){return[$r.of(t),By(),GS]}function kp(t){let e=9;for(;e<t;)e=e*10+9;return e}const QS=1024;let JS=0;class Xa{constructor(e,n){this.from=e,this.to=n}}class G{constructor(e={}){this.id=JS++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=at.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}G.closedBy=new G({deserialize:t=>t.split(" ")});G.openedBy=new G({deserialize:t=>t.split(" ")});G.group=new G({deserialize:t=>t.split(" ")});G.isolate=new G({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});G.contextHash=new G({perNode:!0});G.lookAhead=new G({perNode:!0});G.mounted=new G({perNode:!0});class No{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[G.mounted.id]}}const XS=Object.create(null);class at{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):XS,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new at(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(G.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(G.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}at.none=new at("",Object.create(null),0,8);class Jh{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new at(r.name,i,r.id,r.flags):r)}return new Jh(n)}}const Cl=new WeakMap,Sp=new WeakMap;var Re;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Re||(Re={}));class pe{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=No.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Bc(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Cl.get(this)||this.topNode,s=new Bc(i);return s.moveTo(e,n),Cl.set(this,s._tree),s}get topNode(){return new Mt(this,0,0,null)}resolve(e,n=0){let r=Os(Cl.get(this)||this.topNode,e,n,!1);return Cl.set(this,r),r}resolveInner(e,n=0){let r=Os(Sp.get(this)||this.topNode,e,n,!0);return Sp.set(this,r),r}resolveStack(e,n=0){return tC(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&Re.IncludeAnonymous)>0;for(let a=this.cursor(l|Re.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:ef(at.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new pe(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new pe(at.none,n,r,i)))}static build(e){return nC(e)}}pe.empty=new pe(at.none,[],[],0);class Xh{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Xh(this.buffer,this.index)}}class Xn{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return at.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(jy(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new Xn(s,l,this.set)}}function jy(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Os(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof Mt&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:Re.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof Mt&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class Fy{cursor(e=0){return new Bc(this,e)}getChild(e,n=null,r=null){let i=Cp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Cp(this,e,n,r)}resolve(e,n=0){return Os(this,e,n,!1)}resolveInner(e,n=0){return Os(this,e,n,!0)}matchContext(e){return Rc(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Mt extends Fy{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let c=o[e],h=a[e]+l.from;if(jy(i,r,h,h+c.length)){if(c instanceof Xn){if(s&Re.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,r-h,i);if(f>-1)return new In(new ZS(l,c,e,h),null,f)}else if(s&Re.IncludeAnonymous||!c.type.isAnonymous||Zh(c)){let f;if(!(s&Re.IgnoreMounts)&&(f=No.get(c))&&!f.overlay)return new Mt(f.tree,h,e,l);let d=new Mt(c,h,e,l);return s&Re.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&Re.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Re.IgnoreOverlays)&&(i=No.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new Mt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Cp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Rc(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class ZS{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class In extends Fy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new In(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Re.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new In(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new In(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new In(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new pe(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function zy(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof Mt&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new eC(i,n)}class eC{constructor(e,n){this.heads=e,this.node=n}get next(){return zy(this.heads)}}function tC(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Mt?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=No.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new Mt(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Os(o,e,n,!1))}}return i?zy(i):r}class Bc{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Mt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Mt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Re.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Re.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Re.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&Re.IncludeAnonymous||o instanceof Xn||!o.type.isAnonymous||Zh(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new In(this.buffer,n,this.stack[i]);return this.bufferNode=new In(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Rc(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Rc(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function Zh(t){return t.children.some(e=>e instanceof Xn||!e.type.isAnonymous||Zh(e))}function nC(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=QS,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new Xh(n,n.length):n,a=r.types,u=0,c=0;function h(C,A,b,O,z,E){let{id:W,start:R,end:q,size:X}=o,ye=c,te=u;for(;X<0;)if(o.next(),X==-1){let Y=s[W];b.push(Y),O.push(R-C);return}else if(X==-3){u=W;return}else if(X==-4){c=W;return}else throw new RangeError(`Unrecognized record size: ${X}`);let Ge=a[W],P,H,_=R-C;if(q-R<=i&&(H=x(o.pos-A,z))){let Y=new Uint16Array(H.size-H.skip),$=o.pos-H.size,he=Y.length;for(;o.pos>$;)he=p(H.start,Y,he);P=new Xn(Y,q-H.start,r),_=H.start-C}else{let Y=o.pos-X;o.next();let $=[],he=[],Ee=W>=l?W:-1,Ye=0,tt=q;for(;o.pos>Y;)Ee>=0&&o.id==Ee&&o.size>=0?(o.end<=tt-i&&(m($,he,R,Ye,o.end,tt,Ee,ye,te),Ye=$.length,tt=o.end),o.next()):E>2500?f(R,Y,$,he):h(R,Y,$,he,Ee,E+1);if(Ee>=0&&Ye>0&&Ye<$.length&&m($,he,R,Ye,R,tt,Ee,ye,te),$.reverse(),he.reverse(),Ee>-1&&Ye>0){let an=d(Ge,te);P=ef(Ge,$,he,0,$.length,0,q-R,an,an)}else P=v(Ge,$,he,q-R,ye-q,te)}b.push(P),O.push(_)}function f(C,A,b,O){let z=[],E=0,W=-1;for(;o.pos>A;){let{id:R,start:q,end:X,size:ye}=o;if(ye>4)o.next();else{if(W>-1&&q<W)break;W<0&&(W=X-i),z.push(R,q,X),E++,o.next()}}if(E){let R=new Uint16Array(E*4),q=z[z.length-2];for(let X=z.length-3,ye=0;X>=0;X-=3)R[ye++]=z[X],R[ye++]=z[X+1]-q,R[ye++]=z[X+2]-q,R[ye++]=ye;b.push(new Xn(R,z[2]-q,r)),O.push(q-C)}}function d(C,A){return(b,O,z)=>{let E=0,W=b.length-1,R,q;if(W>=0&&(R=b[W])instanceof pe){if(!W&&R.type==C&&R.length==z)return R;(q=R.prop(G.lookAhead))&&(E=O[W]+R.length+q)}return v(C,b,O,z,E,A)}}function m(C,A,b,O,z,E,W,R,q){let X=[],ye=[];for(;C.length>O;)X.push(C.pop()),ye.push(A.pop()+b-z);C.push(v(r.types[W],X,ye,E-z,R-E,q)),A.push(z-b)}function v(C,A,b,O,z,E,W){if(E){let R=[G.contextHash,E];W=W?[R].concat(W):[R]}if(z>25){let R=[G.lookAhead,z];W=W?[R].concat(W):[R]}return new pe(C,A,b,O,W)}function x(C,A){let b=o.fork(),O=0,z=0,E=0,W=b.end-i,R={size:0,start:0,skip:0};e:for(let q=b.pos-C;b.pos>q;){let X=b.size;if(b.id==A&&X>=0){R.size=O,R.start=z,R.skip=E,E+=4,O+=4,b.next();continue}let ye=b.pos-X;if(X<0||ye<q||b.start<W)break;let te=b.id>=l?4:0,Ge=b.start;for(b.next();b.pos>ye;){if(b.size<0)if(b.size==-3)te+=4;else break e;else b.id>=l&&(te+=4);b.next()}z=Ge,O+=X,E+=te}return(A<0||O==C)&&(R.size=O,R.start=z,R.skip=E),R.size>4?R:void 0}function p(C,A,b){let{id:O,start:z,end:E,size:W}=o;if(o.next(),W>=0&&O<l){let R=b;if(W>4){let q=o.pos-(W-4);for(;o.pos>q;)b=p(C,A,b)}A[--b]=R,A[--b]=E-C,A[--b]=z-C,A[--b]=O}else W==-3?u=O:W==-4&&(c=O);return b}let g=[],w=[];for(;o.pos>0;)h(t.start||0,t.bufferStart||0,g,w,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:g.length?w[0]+g[0].length:0;return new pe(a[t.topID],g.reverse(),w.reverse(),k)}const bp=new WeakMap;function ql(t,e){if(!t.isAnonymous||e instanceof Xn||e.type!=t)return 1;let n=bp.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof pe)){n=1;break}n+=ql(t,r)}bp.set(e,n)}return n}function ef(t,e,n,r,i,s,l,o,a){let u=0;for(let m=r;m<i;m++)u+=ql(t,e[m]);let c=Math.ceil(u*1.5/8),h=[],f=[];function d(m,v,x,p,g){for(let w=x;w<p;){let k=w,C=v[w],A=ql(t,m[w]);for(w++;w<p;w++){let b=ql(t,m[w]);if(A+b>=c)break;A+=b}if(w==k+1){if(A>c){let b=m[k];d(b.children,b.positions,0,b.children.length,v[k]+g);continue}h.push(m[k])}else{let b=v[w-1]+m[w-1].length-C;h.push(ef(t,m,v,k,w,C,b,null,a))}f.push(C+g-s)}}return d(e,n,r,i,0),(o||a)(h,f,l)}class mr{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new mr(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let c=o<n.length?n[o]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;l&&l.from<h;){let f=l;if(a>=f.from||h<=f.to||u){let d=Math.max(f.from,a)-u,m=Math.min(f.to,h)-u;f=d>=m?null:new mr(d,m,f.tree,f.offset+u,o>0,!!c)}if(f&&i.push(f),l.to>h)break;l=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}}class _y{startParse(e,n,r){return typeof e=="string"&&(e=new rC(e)),r=r?r.length?r.map(i=>new Xa(i.from,i.to)):[new Xa(0,0)]:[new Xa(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class rC{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new G({perNode:!0});let iC=0;class St{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=iC++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof St&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new St(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Oo(e);return r=>r.modified.indexOf(n)>-1?r:Oo.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let sC=0;class Oo{constructor(e){this.name=e,this.instances=[],this.id=sC++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&lC(n,o.modified));if(r)return r;let i=[],s=new St(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=oC(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(Oo.get(o,a));return s}}function lC(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function oC(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function aC(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let h=0;;){if(o=="..."&&h>0&&h+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let d=i[h++];if(h==i.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);o=i.slice(h)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new Po(r,l,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return Hy.add(e)}const Hy=new G;class Po{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Po.empty=new Po([],2,null);function Wy(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function uC(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function cC(t,e,n,r=0,i=t.length){let s=new hC(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class hC{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(l)));let u=i,c=fC(e)||Po.empty,h=uC(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,o),u),c.opaque)return;let f=e.tree&&e.tree.prop(G.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+o,1),m=this.highlighters.filter(x=>!x.scope||x.scope(f.tree.type)),v=e.firstChild();for(let x=0,p=o;;x++){let g=x<f.overlay.length?f.overlay[x]:null,w=g?g.from+o:a,k=Math.max(n,p),C=Math.min(r,w);if(k<C&&v)for(;e.from<C&&(this.highlightRange(e,k,C,i,s),this.startSpan(Math.min(C,e.to),u),!(e.to>=w||!e.nextSibling())););if(!g||w>r)break;p=g.to+o,p>n&&(this.highlightRange(d.cursor(),Math.max(n,g.from+o),Math.min(r,p),"",m),this.startSpan(Math.min(r,p),u))}v&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function fC(t){let e=t.type.prop(Hy);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const D=St.define,bl=D(),Mn=D(),Ap=D(Mn),Ep=D(Mn),Tn=D(),Al=D(Tn),Za=D(Tn),Jt=D(),ir=D(Jt),Yt=D(),Qt=D(),Ic=D(),Ri=D(Ic),El=D(),N={comment:bl,lineComment:D(bl),blockComment:D(bl),docComment:D(bl),name:Mn,variableName:D(Mn),typeName:Ap,tagName:D(Ap),propertyName:Ep,attributeName:D(Ep),className:D(Mn),labelName:D(Mn),namespace:D(Mn),macroName:D(Mn),literal:Tn,string:Al,docString:D(Al),character:D(Al),attributeValue:D(Al),number:Za,integer:D(Za),float:D(Za),bool:D(Tn),regexp:D(Tn),escape:D(Tn),color:D(Tn),url:D(Tn),keyword:Yt,self:D(Yt),null:D(Yt),atom:D(Yt),unit:D(Yt),modifier:D(Yt),operatorKeyword:D(Yt),controlKeyword:D(Yt),definitionKeyword:D(Yt),moduleKeyword:D(Yt),operator:Qt,derefOperator:D(Qt),arithmeticOperator:D(Qt),logicOperator:D(Qt),bitwiseOperator:D(Qt),compareOperator:D(Qt),updateOperator:D(Qt),definitionOperator:D(Qt),typeOperator:D(Qt),controlOperator:D(Qt),punctuation:Ic,separator:D(Ic),bracket:Ri,angleBracket:D(Ri),squareBracket:D(Ri),paren:D(Ri),brace:D(Ri),content:Jt,heading:ir,heading1:D(ir),heading2:D(ir),heading3:D(ir),heading4:D(ir),heading5:D(ir),heading6:D(ir),contentSeparator:D(Jt),list:D(Jt),quote:D(Jt),emphasis:D(Jt),strong:D(Jt),link:D(Jt),monospace:D(Jt),strikethrough:D(Jt),inserted:D(),deleted:D(),changed:D(),invalid:D(),meta:El,documentMeta:D(El),annotation:D(El),processingInstruction:D(El),definition:St.defineModifier("definition"),constant:St.defineModifier("constant"),function:St.defineModifier("function"),standard:St.defineModifier("standard"),local:St.defineModifier("local"),special:St.defineModifier("special")};for(let t in N){let e=N[t];e instanceof St&&(e.name=t)}Wy([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}]);var eu;const Kr=new G;function dC(t){return F.define({combine:t?e=>e.concat(t):void 0})}const pC=new G;class jt{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Z.prototype.hasOwnProperty("tree")||Object.defineProperty(Z.prototype,"tree",{get(){return yt(this)}}),this.parser=n,this.extension=[Zn.of(this),Z.languageData.of((s,l,o)=>{let a=Mp(s,l,o),u=a.type.prop(Kr);if(!u)return[];let c=s.facet(u),h=a.type.prop(pC);if(h){let f=a.resolve(l-a.from,o);for(let d of h)if(d.test(f,s)){let m=s.facet(d.facet);return d.type=="replace"?m:m.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return Mp(e,n,r).type.prop(Kr)==this.data}findRegions(e){let n=e.facet(Zn);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(Kr)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(G.mounted);if(o){if(o.tree.prop(Kr)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof pe&&i(u,s.positions[a]+l)}};return i(yt(e),0),r}get allowsNesting(){return!0}}jt.setState=le.define();function Mp(t,e,n){let r=t.facet(Zn),i=yt(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Re.ExcludeBuffers))s.type.isTop&&(i=s);return i}function yt(t){let e=t.field(jt.state,!1);return e?e.tree:pe.empty}class mC{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Bi=null;class mi{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new mi(e,n,[],pe.empty,0,r,[],null)}startParse(){return this.parser.startParse(new mC(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=pe.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(mr.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(mr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Bi;Bi=this;try{return e()}finally{Bi=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Tp(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,h,f)=>a.push({fromA:u,toA:c,fromB:h,toB:f})),r=mr.applyChanges(r,a),i=pe.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&o.push({from:c,to:h})}}}return new mi(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Tp(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends _y{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Bi;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new pe(at.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Bi}}function Tp(t,e,n){return mr.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class gi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new gi(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=mi.create(e.facet(Zn).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new gi(r)}}jt.state=Vt.define({create:gi.init,update(t,e){for(let n of e.effects)if(n.is(jt.setState))return n.value;return e.startState.facet(Zn)!=e.state.facet(Zn)?gi.init(e.state):t.apply(e)}});let Vy=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Vy=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const tu=typeof navigator<"u"&&(!((eu=navigator.scheduling)===null||eu===void 0)&&eu.isInputPending)?()=>navigator.scheduling.isInputPending():null,gC=gt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(jt.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(jt.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Vy(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(jt.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!tu?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>tu&&tu()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:jt.setState.of(new gi(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>nn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Zn=F.define({combine(t){return t.length?t[0]:null},enables:t=>[jt.state,gC,j.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),yC=F.define(),tf=F.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Ar(t){let e=t.facet(tf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Ps(t,e){let n="",r=t.tabSize,i=t.facet(tf)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function nf(t,e){t instanceof Z&&(t=new oa(t));for(let r of t.state.facet(yC)){let i=r(t,e);if(i!==void 0)return i}let n=yt(t.state);return n.length>=e?vC(t,n,e):null}class oa{constructor(e,n={}){this.state=e,this.options=n,this.unit=Ar(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return ra(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Uy=new G;function vC(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return $y(r,t,n)}function $y(t,e,n){for(let r=t;r;r=r.next){let i=xC(r.node);if(i)return i(rf.create(e,n,r))}return 0}function wC(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function xC(t){let e=t.type.prop(Uy);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(G.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>bC(l,!0,1,void 0,s&&!wC(l)?i.from:void 0)}return t.parent==null?kC:null}function kC(){return 0}class rf extends oa{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new rf(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(SC(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return $y(this.context.next,this.base,this.pos)}}function SC(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function CC(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function bC(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=CC(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const AC=200;function EC(){return Z.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+AC)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let c=l.doc.lineAt(u);if(c.from==o)continue;o=c.from;let h=nf(l,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],d=Ps(l,h);f!=d&&a.push({from:c.from,to:c.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const MC=F.define(),TC=new G;function NC(t,e,n){let r=yt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(TC);if(a&&(o.to<r.length-50||r.length==t.doc.length||!OC(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function OC(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Np(t,e,n){for(let r of t.facet(MC)){let i=r(t,e,n);if(i)return i}return NC(t,e,n)}function Ky(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const qy=le.define({map:Ky}),sf=le.define({map:Ky}),Do=Vt.define({create(){return U.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=Op(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(qy)&&!PC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(Gy),i=r?U.replace({widget:new RC(r(e.state,n.value))}):Pp;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(sf)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=Op(t,e.selection.main.head)),t},provide:t=>j.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Pp.range(r,i))}return U.set(e,!0)}});function Op(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function jc(t,e,n){var r;let i=null;return(r=t.field(Do,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function PC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const DC={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Gy=F.define({combine(t){return na(t,DC)}});function LC(t){return[Do,jC]}function Yy(t,e){let{state:n}=t,r=n.facet(Gy),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=jc(t.state,o.from,o.to);a&&t.dispatch({effects:sf.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const Pp=U.replace({widget:new class extends _s{toDOM(t){return Yy(t,null)}}});class RC extends _s{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Yy(e,this.value)}}const BC={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class nu extends Jn{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function IC(t={}){let e={...BC,...t},n=new nu(e,!0),r=new nu(e,!1),i=gt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(Zn)!=l.state.facet(Zn)||l.startState.field(Do,!1)!=l.state.field(Do,!1)||yt(l.startState)!=yt(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new kr;for(let a of l.viewportLineBlocks){let u=jc(l.state,a.from,a.to)?r:Np(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,WS({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||ee.empty},initialSpacer(){return new nu(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=jc(l.state,o.from,o.to);if(u)return l.dispatch({effects:sf.of(u)}),!0;let c=Np(l.state,o.from,o.to);return c?(l.dispatch({effects:qy.of(c)}),!0):!1}}}),LC()]}const jC=j.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class aa{constructor(e,n){this.specs=e;let r;function i(o){let a=Gn.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof jt?o=>o.prop(Kr)==l.data:l?o=>o==l:void 0,this.style=Wy(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new Gn(r):null,this.themeType=n.themeType}static define(e,n){return new aa(e,n||{})}}const Fc=F.define(),FC=F.define({combine(t){return t.length?[t[0]]:null}});function ru(t){let e=t.facet(Fc);return e.length?e:t.facet(FC)}function zC(t,e){let n=[HC],r;return t instanceof aa&&(t.module&&n.push(j.styleModule.of(t.module)),r=t.themeType),r?n.push(Fc.computeN([j.darkTheme],i=>i.facet(j.darkTheme)==(r=="dark")?[t]:[])):n.push(Fc.of(t)),n}class _C{constructor(e){this.markCache=Object.create(null),this.tree=yt(e.state),this.decorations=this.buildDeco(e,ru(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=yt(e.state),r=ru(e.state),i=r!=ru(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return U.none;let r=new kr;for(let{from:i,to:s}of e.visibleRanges)cC(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=U.mark({class:a})))},i,s);return r.finish()}}const HC=ea.high(gt.fromClass(_C,{decorations:t=>t.decorations})),WC=j.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Qy=1e4,Jy="()[]{}",Xy=F.define({combine(t){return na(t,{afterCursor:!0,brackets:Jy,maxScanDistance:Qy,renderMatch:$C})}}),VC=U.mark({class:"cm-matchingBracket"}),UC=U.mark({class:"cm-nonmatchingBracket"});function $C(t){let e=[],n=t.matched?VC:UC;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const KC=Vt.define({create(){return U.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Xy);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=rn(e.state,i.head,-1,r)||i.head>0&&rn(e.state,i.head-1,1,r)||r.afterCursor&&(rn(e.state,i.head,1,r)||i.head<e.state.doc.length&&rn(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return U.set(n,!0)},provide:t=>j.decorations.from(t)}),qC=[KC,WC];function GC(t={}){return[Xy.of(t),qC]}const YC=new G;function zc(t,e,n){let r=t.prop(e<0?G.openedBy:G.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function _c(t){let e=t.type.prop(YC);return e?e(t.node):t}function rn(t,e,n,r={}){let i=r.maxScanDistance||Qy,s=r.brackets||Jy,l=yt(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=zc(a.type,n,s);if(u&&a.from<a.to){let c=_c(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return QC(t,e,n,a,c,u,s)}}return JC(t,e,n,l,o.type,i,s)}function QC(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,c=o==null?void 0:o.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=_c(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(zc(c.type,n,l))u++;else if(zc(c.type,-n,l)){if(u==0){let h=_c(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function JC(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;n<0&&(f+=d.length);let m=e+f*n;for(let v=n>0?0:d.length-1,x=n>0?d.length:-1;v!=x;v+=n){let p=l.indexOf(d[v]);if(!(p<0||r.resolveInner(m+v,1).type!=i))if(p%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:m+v,to:m+v+1},matched:p>>1==a>>1};h--}}n>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}function Dp(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class Zy{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Dp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Dp(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function XC(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||ZC,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||af,mergeTokens:t.mergeTokens!==!1}}function ZC(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const Lp=new WeakMap;class lf extends jt{constructor(e){let n=dC(e.languageData),r=XC(e),i,s=new class extends _y{createParse(l,o,a){return new t2(i,l,o,a)}};super(n,s,[],e.name),this.topNode=i2(n,this),i=this,this.streamParser=r,this.stateAfter=new G({perNode:!0}),this.tokenTable=e.tokenTable?new rv(r.tokenTable):r2}static define(e){return new lf(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=Lp.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=of(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let c=r?r(a.from):-1,h=new Zy(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;h.pos<u-a.from;)tv(this.streamParser.token,h,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&Lp.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function of(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof pe&&a<i&&of(t,o,a,r,i);if(u)return u}return null}function ev(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof pe){if(!(a=ev(t,o,n-l,r-l,i)))break;return i?new pe(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function e2(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&of(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=ev(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?Ar(i):4),tree:pe.empty}}class t2{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=mi.get(),l=i[0].from,{state:o,tree:a}=e2(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Ar(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=mi.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new Zy(n,e?e.state.tabSize:4,e?Ar(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=tv(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=pe.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:n2,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new pe(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new pe(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function tv(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const af=Object.create(null),Ds=[at.none],n2=new Jh(Ds),Rp=[],Bp=Object.create(null),nv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])nv[t]=iv(af,e);class rv{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),nv)}resolve(e){return e?this.table[e]||(this.table[e]=iv(this.extra,e)):0}}const r2=new rv(af);function iu(t,e){Rp.indexOf(t)>-1||(Rp.push(t),console.warn(e))}function iv(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let c=t[u]||N[u];c?typeof c=="function"?a.length?a=a.map(c):iu(u,`Modifier ${u} used at start of tag`):a.length?iu(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:iu(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=Bp[i];if(s)return s.id;let l=Bp[i]=at.define({id:Ds.length,name:r,props:[aC({[r]:n})]});return Ds.push(l),l.id}function i2(t,e){let n=at.define({id:Ds.length,name:"Document",props:[Kr.add(()=>t),Uy.add(()=>r=>e.getIndent(r))],top:!0});return Ds.push(n),n}Ae.RTL,Ae.LTR;const s2="#e5c07b",Ip="#e06c75",l2="#56b6c2",o2="#ffffff",Gl="#abb2bf",Hc="#7d8799",a2="#61afef",u2="#98c379",jp="#d19a66",c2="#c678dd",h2="#21252b",Fp="#2c313a",zp="#282c34",su="#353a42",f2="#3E4451",_p="#528bff",d2=j.theme({"&":{color:Gl,backgroundColor:zp},".cm-content":{caretColor:_p},".cm-cursor, .cm-dropCursor":{borderLeftColor:_p},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:f2},".cm-panels":{backgroundColor:h2,color:Gl},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:zp,color:Hc,border:"none"},".cm-activeLineGutter":{backgroundColor:Fp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:su},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:su,borderBottomColor:su},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Fp,color:Gl}}},{dark:!0}),p2=aa.define([{tag:N.keyword,color:c2},{tag:[N.name,N.deleted,N.character,N.propertyName,N.macroName],color:Ip},{tag:[N.function(N.variableName),N.labelName],color:a2},{tag:[N.color,N.constant(N.name),N.standard(N.name)],color:jp},{tag:[N.definition(N.name),N.separator],color:Gl},{tag:[N.typeName,N.className,N.number,N.changed,N.annotation,N.modifier,N.self,N.namespace],color:s2},{tag:[N.operator,N.operatorKeyword,N.url,N.escape,N.regexp,N.link,N.special(N.string)],color:l2},{tag:[N.meta,N.comment],color:Hc},{tag:N.strong,fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.link,color:Hc,textDecoration:"underline"},{tag:N.heading,fontWeight:"bold",color:Ip},{tag:[N.atom,N.bool,N.special(N.variableName)],color:jp},{tag:[N.processingInstruction,N.string,N.inserted],color:u2},{tag:N.invalid,color:o2}]),m2=[d2,zC(p2)],g2=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=cf(t.state,n.from);return r.line?y2(t):r.block?w2(t):!1};function uf(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const y2=uf(S2,0),v2=uf(sv,0),w2=uf((t,e)=>sv(t,e,k2(e)),0);function cf(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Ii=50;function x2(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Ii,r),l=t.sliceDoc(i,i+Ii),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let c,h;i-r<=2*Ii?c=h=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+Ii),h=t.sliceDoc(i-Ii,i));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(h)[0].length,m=h.length-d-n.length;return c.slice(f,f+e.length)==e&&h.slice(m,m+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(h.charAt(m-1))?1:0}}:null}function k2(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function sv(t,e,n=e.selection.ranges){let r=n.map(s=>cf(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>x2(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:c}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function S2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=cf(e,s).line;if(u){for(let c=s;c<=l;){let h=e.doc.lineAt(c);if(h.from>i&&(s==l||l>h.from)){i=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,m=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),r.push({line:h,comment:m,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(a<1e9)for(let c=o;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:c,single:h}of r)(h||!c)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,c=u+a.length;l.text[c-l.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}function ki(t,e){return M.create(t.ranges.map(e),t.mainIndex)}function Ut(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function $t({state:t,dispatch:e},n){let r=ki(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Ut(t,r)),!0)}function ua(t,e){return M.cursor(e?t.to:t.from)}function lv(t,e){return $t(t,n=>n.empty?t.moveByChar(n,e):ua(n,e))}function qe(t){return t.textDirectionAt(t.state.selection.main.head)==Ae.LTR}const ov=t=>lv(t,!qe(t)),av=t=>lv(t,qe(t));function uv(t,e){return $t(t,n=>n.empty?t.moveByGroup(n,e):ua(n,e))}const C2=t=>uv(t,!qe(t)),b2=t=>uv(t,qe(t));function A2(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function ca(t,e,n){let r=yt(t).resolveInner(e.head),i=n?G.closedBy:G.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;A2(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?rn(t,r.from,1):rn(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,M.cursor(o,n?-1:1)}const E2=t=>$t(t,e=>ca(t.state,e,!qe(t))),M2=t=>$t(t,e=>ca(t.state,e,qe(t)));function cv(t,e){return $t(t,n=>{if(!n.empty)return ua(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const hv=t=>cv(t,!1),fv=t=>cv(t,!0);function dv(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(j.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function pv(t,e){let n=dv(t),{state:r}=t,i=ki(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):ua(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=j.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(Ut(r,i),{effects:s}),!0}const Hp=t=>pv(t,!1),Wc=t=>pv(t,!0);function rr(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=M.cursor(r.from+s))}return i}const T2=t=>$t(t,e=>rr(t,e,!0)),N2=t=>$t(t,e=>rr(t,e,!1)),O2=t=>$t(t,e=>rr(t,e,!qe(t))),P2=t=>$t(t,e=>rr(t,e,qe(t))),D2=t=>$t(t,e=>M.cursor(t.lineBlockAt(e.head).from,1)),L2=t=>$t(t,e=>M.cursor(t.lineBlockAt(e.head).to,-1));function R2(t,e,n){let r=!1,i=ki(t.selection,s=>{let l=rn(t,s.head,-1)||rn(t,s.head,1)||s.head>0&&rn(t,s.head-1,1)||s.head<t.doc.length&&rn(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return M.cursor(o)});return r?(e(Ut(t,i)),!0):!1}const B2=({state:t,dispatch:e})=>R2(t,e);function Pt(t,e){let n=ki(t.state.selection,r=>{let i=e(r);return M.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Ut(t.state,n)),!0)}function mv(t,e){return Pt(t,n=>t.moveByChar(n,e))}const gv=t=>mv(t,!qe(t)),yv=t=>mv(t,qe(t));function vv(t,e){return Pt(t,n=>t.moveByGroup(n,e))}const I2=t=>vv(t,!qe(t)),j2=t=>vv(t,qe(t)),F2=t=>Pt(t,e=>ca(t.state,e,!qe(t))),z2=t=>Pt(t,e=>ca(t.state,e,qe(t)));function wv(t,e){return Pt(t,n=>t.moveVertically(n,e))}const xv=t=>wv(t,!1),kv=t=>wv(t,!0);function Sv(t,e){return Pt(t,n=>t.moveVertically(n,e,dv(t).height))}const Wp=t=>Sv(t,!1),Vp=t=>Sv(t,!0),_2=t=>Pt(t,e=>rr(t,e,!0)),H2=t=>Pt(t,e=>rr(t,e,!1)),W2=t=>Pt(t,e=>rr(t,e,!qe(t))),V2=t=>Pt(t,e=>rr(t,e,qe(t))),U2=t=>Pt(t,e=>M.cursor(t.lineBlockAt(e.head).from)),$2=t=>Pt(t,e=>M.cursor(t.lineBlockAt(e.head).to)),Up=({state:t,dispatch:e})=>(e(Ut(t,{anchor:0})),!0),$p=({state:t,dispatch:e})=>(e(Ut(t,{anchor:t.doc.length})),!0),Kp=({state:t,dispatch:e})=>(e(Ut(t,{anchor:t.selection.main.anchor,head:0})),!0),qp=({state:t,dispatch:e})=>(e(Ut(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),K2=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),q2=({state:t,dispatch:e})=>{let n=ha(t).map(({from:r,to:i})=>M.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:M.create(n),userEvent:"select"})),!0},G2=({state:t,dispatch:e})=>{let n=ki(t.selection,r=>{let i=yt(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return M.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(Ut(t,n)),!0)};function Cv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(Ut(n,M.create(i,i.length-1))),!0)}const Y2=t=>Cv(t,!1),Q2=t=>Cv(t,!0),J2=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=M.create([n.main]):n.main.empty||(r=M.create([M.cursor(n.main.head)])),r?(e(Ut(t,r)),!0):!1};function Us(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=Ml(t,a,!1)):a>l&&(n="delete.forward",a=Ml(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=Ml(t,l,!1),o=Ml(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:M.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?j.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ml(t,e,n){if(t instanceof j)for(let r of t.state.facet(j.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const bv=(t,e,n)=>Us(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=ra(o,s.tabSize),c=u%Ar(s)||Ar(s);for(let h=0;h<c&&o[o.length-1-h]==" ";h++)i--;a=i}else a=Be(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=Be(l.text,a-l.from,!1,!1)+l.from);return a}),Vc=t=>bv(t,!1,!0),Av=t=>bv(t,!0,!1),Ev=(t,e)=>Us(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=Be(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=l(u);if(o!=null&&c!=o)break;(u!=" "||r!=n.head)&&(o=c),r=a}return r}),Mv=t=>Ev(t,!1),X2=t=>Ev(t,!0),Z2=t=>Us(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),eb=t=>Us(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),tb=t=>Us(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),nb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Q.of(["",""])},range:M.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},rb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:Be(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:Be(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:M.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ha(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Tv(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of ha(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(M.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(M.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:M.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const ib=({state:t,dispatch:e})=>Tv(t,e,!1),sb=({state:t,dispatch:e})=>Tv(t,e,!0);function Nv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of ha(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const lb=({state:t,dispatch:e})=>Nv(t,e,!1),ob=({state:t,dispatch:e})=>Nv(t,e,!0),ab=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(ha(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=ki(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function ub(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=yt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(G.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const Gp=Ov(!1),cb=Ov(!0);function Ov(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&ub(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new oa(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=nf(u,s);for(c==null&&(c=ra(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let h=["",Ps(e,c)];return a&&h.push(Ps(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:Q.of(h)},range:M.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function hf(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:M.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const hb=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new oa(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=hf(t,(s,l,o)=>{let a=nf(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],c=Ps(t,a);(u!=c||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},fb=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hf(t,(n,r)=>{r.push({from:n.from,insert:t.facet(tf)})}),{userEvent:"input.indent"})),!0),db=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hf(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=ra(i,t.tabSize),l=0,o=Ps(t,Math.max(0,s-Ar(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),pb=t=>(t.setTabFocusMode(),!0),mb=[{key:"Ctrl-b",run:ov,shift:gv,preventDefault:!0},{key:"Ctrl-f",run:av,shift:yv},{key:"Ctrl-p",run:hv,shift:xv},{key:"Ctrl-n",run:fv,shift:kv},{key:"Ctrl-a",run:D2,shift:U2},{key:"Ctrl-e",run:L2,shift:$2},{key:"Ctrl-d",run:Av},{key:"Ctrl-h",run:Vc},{key:"Ctrl-k",run:Z2},{key:"Ctrl-Alt-h",run:Mv},{key:"Ctrl-o",run:nb},{key:"Ctrl-t",run:rb},{key:"Ctrl-v",run:Wc}],gb=[{key:"ArrowLeft",run:ov,shift:gv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:C2,shift:I2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:O2,shift:W2,preventDefault:!0},{key:"ArrowRight",run:av,shift:yv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:b2,shift:j2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:P2,shift:V2,preventDefault:!0},{key:"ArrowUp",run:hv,shift:xv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Up,shift:Kp},{mac:"Ctrl-ArrowUp",run:Hp,shift:Wp},{key:"ArrowDown",run:fv,shift:kv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:$p,shift:qp},{mac:"Ctrl-ArrowDown",run:Wc,shift:Vp},{key:"PageUp",run:Hp,shift:Wp},{key:"PageDown",run:Wc,shift:Vp},{key:"Home",run:N2,shift:H2,preventDefault:!0},{key:"Mod-Home",run:Up,shift:Kp},{key:"End",run:T2,shift:_2,preventDefault:!0},{key:"Mod-End",run:$p,shift:qp},{key:"Enter",run:Gp,shift:Gp},{key:"Mod-a",run:K2},{key:"Backspace",run:Vc,shift:Vc,preventDefault:!0},{key:"Delete",run:Av,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Mv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:X2,preventDefault:!0},{mac:"Mod-Backspace",run:eb,preventDefault:!0},{mac:"Mod-Delete",run:tb,preventDefault:!0}].concat(mb.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),yb=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:E2,shift:F2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:M2,shift:z2},{key:"Alt-ArrowUp",run:ib},{key:"Shift-Alt-ArrowUp",run:lb},{key:"Alt-ArrowDown",run:sb},{key:"Shift-Alt-ArrowDown",run:ob},{key:"Mod-Alt-ArrowUp",run:Y2},{key:"Mod-Alt-ArrowDown",run:Q2},{key:"Escape",run:J2},{key:"Mod-Enter",run:cb},{key:"Alt-l",mac:"Ctrl-l",run:q2},{key:"Mod-i",run:G2,preventDefault:!0},{key:"Mod-[",run:db},{key:"Mod-]",run:fb},{key:"Mod-Alt-\\",run:hb},{key:"Shift-Mod-k",run:ab},{key:"Shift-Mod-\\",run:B2},{key:"Mod-/",run:g2},{key:"Alt-A",run:v2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:pb}].concat(gb),Yp=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Ls{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(Yp(o)):Yp,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return v0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=zx(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=w0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Ls.prototype[Symbol.iterator]=function(){return this});const Pv={from:-1,to:-1,match:/.*/.exec("")},ff="gm"+(/x/.unicode==null?"":"u");class Dv{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Pv,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Lv(e,n,r,i,s);this.re=new RegExp(n,ff+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=Lo(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Lo(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const lu=new WeakMap;class ni{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=lu.get(e);if(!i||i.from>=r||i.to<=n){let o=new ni(n,e.sliceString(n,r));return lu.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),lu.set(e,new ni(l,s)),new ni(n,s.slice(n-l,r-l))}}class Lv{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=Pv,this.matchPos=Lo(e,i),this.re=new RegExp(n,ff+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=ni.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Lo(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ni.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Dv.prototype[Symbol.iterator]=Lv.prototype[Symbol.iterator]=function(){return this});function vb(t){try{return new RegExp(t,ff),!0}catch{return!1}}function Lo(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Uc(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Pe("input",{class:"cm-textfield",name:"line",value:e}),r=Pe("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:ls.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Pe("label",t.state.phrase("Go to line"),": ",n)," ",Pe("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Pe("button",{name:"close",onclick:()=>{t.dispatch({effects:ls.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,c,h]=s,f=c?+c.slice(1):0,d=u?+u:o.number;if(u&&h){let x=d/100;a&&(x=x*(a=="-"?-1:1)+o.number/l.doc.lines),d=Math.round(l.doc.lines*x)}else u&&a&&(d=d*(a=="-"?-1:1)+o.number);let m=l.doc.line(Math.max(1,Math.min(l.doc.lines,d))),v=M.cursor(m.from+Math.max(0,Math.min(f,m.length)));t.dispatch({effects:[ls.of(!1),j.scrollIntoView(v.from,{y:"center"})],selection:v}),t.focus()}return{dom:r}}const ls=le.define(),Qp=Vt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(ls)&&(t=n.value);return t},provide:t=>To.from(t,e=>e?Uc:null)}),wb=t=>{let e=Mo(t,Uc);if(!e){let n=[ls.of(!0)];t.state.field(Qp,!1)==null&&n.push(le.appendConfig.of([Qp,xb])),t.dispatch({effects:n}),e=Mo(t,Uc)}return e&&e.dom.querySelector("input").select(),!0},xb=j.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),kb=({state:t,dispatch:e})=>{let{selection:n}=t,r=M.create(n.ranges.map(i=>t.wordAt(i.head)||M.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Sb(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Ls(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Ls(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const Cb=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return kb({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=Sb(t,r);return i?(e(t.update({selection:t.selection.addRange(M.range(i.from,i.to),!1),effects:j.scrollIntoView(i.to)})),!0):!1},Si=F.define({combine(t){return na(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Bb(e),scrollToMatch:e=>j.scrollIntoView(e)})}});class Rv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||vb(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Mb(this):new Ab(this)}getCursor(e,n=0,r){let i=e.doc?e:Z.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Pr(this,i,n,r):Or(this,i,n,r)}}class Bv{constructor(e){this.spec=e}}function Or(t,e,n,r){return new Ls(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?bb(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function bb(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Ro(i,n-s))!=Ie.Word||e(Bo(i,n-s))!=Ie.Word)&&(e(Bo(i,r-s))!=Ie.Word||e(Ro(i,r-s))!=Ie.Word))}class Ab extends Bv{constructor(e){super(e)}nextMatch(e,n,r){let i=Or(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Or(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Or(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Or(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Or(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Pr(t,e,n,r){return new Dv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Eb(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Ro(t,e){return t.slice(Be(t,e,!1),e)}function Bo(t,e){return t.slice(e,Be(t,e))}function Eb(t){return(e,n,r)=>!r[0].length||(t(Ro(r.input,r.index))!=Ie.Word||t(Bo(r.input,r.index))!=Ie.Word)&&(t(Bo(r.input,r.index+r[0].length))!=Ie.Word||t(Ro(r.input,r.index+r[0].length))!=Ie.Word)}class Mb extends Bv{nextMatch(e,n,r){let i=Pr(this.spec,e,r,e.doc.length).next();return i.done&&(i=Pr(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Pr(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Pr(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Pr(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Rs=le.define(),df=le.define(),$n=Vt.define({create(t){return new ou($c(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Rs)?t=new ou(n.value.create(),t.panel):n.is(df)&&(t=new ou(t.query,n.value?pf:null));return t},provide:t=>To.from(t,e=>e.panel)});class ou{constructor(e,n){this.query=e,this.panel=n}}const Tb=U.mark({class:"cm-searchMatch"}),Nb=U.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Ob=gt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field($n))}update(t){let e=t.state.field($n);(e!=t.startState.field($n)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return U.none;let{view:n}=this,r=new kr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,c)=>{let h=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,h?Nb:Tb)})}return r.finish()}},{decorations:t=>t.decorations});function $s(t){return e=>{let n=e.state.field($n,!1);return n&&n.query.spec.valid?t(e,n):Fv(e)}}const Io=$s((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=M.single(r.from,r.to),s=t.state.facet(Si);return t.dispatch({selection:i,effects:[mf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),jv(t),!0}),jo=$s((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=M.single(i.from,i.to),l=t.state.facet(Si);return t.dispatch({selection:s,effects:[mf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),jv(t),!0}),Pb=$s((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:M.create(n.map(r=>M.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Db=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Ls(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(M.range(o.value.from,o.value.to))}return e(t.update({selection:M.create(s,l),userEvent:"select.search.matches"})),!0},Jp=$s((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,c=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),c.push(j.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(o);return l&&(a=M.single(l.from,l.to).map(h),c.push(mf(t,l)),c.push(n.facet(Si).scrollToMatch(a.main,t))),t.dispatch({changes:h,selection:a,effects:c,userEvent:"input.replace"}),!0}),Lb=$s((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:j.announce.of(r),userEvent:"input.replace.all"}),!0});function pf(t){return t.state.facet(Si).createPanel(t)}function $c(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(Si);return new Rv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function Iv(t){let e=Mo(t,pf);return e&&e.dom.querySelector("[main-field]")}function jv(t){let e=Iv(t);e&&e==t.root.activeElement&&e.select()}const Fv=t=>{let e=t.state.field($n,!1);if(e&&e.panel){let n=Iv(t);if(n&&n!=t.root.activeElement){let r=$c(t.state,e.query.spec);r.valid&&t.dispatch({effects:Rs.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[df.of(!0),e?Rs.of($c(t.state,e.query.spec)):le.appendConfig.of(jb)]});return!0},zv=t=>{let e=t.state.field($n,!1);if(!e||!e.panel)return!1;let n=Mo(t,pf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:df.of(!1)}),!0},Rb=[{key:"Mod-f",run:Fv,scope:"editor search-panel"},{key:"F3",run:Io,shift:jo,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Io,shift:jo,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:zv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Db},{key:"Mod-Alt-g",run:wb},{key:"Mod-d",run:Cb,preventDefault:!0}];class Bb{constructor(e){this.view=e;let n=this.query=e.state.field($n).query.spec;this.commit=this.commit.bind(this),this.searchField=Pe("input",{value:n.search,placeholder:ut(e,"Find"),"aria-label":ut(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Pe("input",{value:n.replace,placeholder:ut(e,"Replace"),"aria-label":ut(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Pe("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Pe("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Pe("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return Pe("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=Pe("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Io(e),[ut(e,"next")]),r("prev",()=>jo(e),[ut(e,"previous")]),r("select",()=>Pb(e),[ut(e,"all")]),Pe("label",null,[this.caseField,ut(e,"match case")]),Pe("label",null,[this.reField,ut(e,"regexp")]),Pe("label",null,[this.wordField,ut(e,"by word")]),...e.state.readOnly?[]:[Pe("br"),this.replaceField,r("replace",()=>Jp(e),[ut(e,"replace")]),r("replaceAll",()=>Lb(e),[ut(e,"replace all")])],Pe("button",{name:"close",onclick:()=>zv(e),"aria-label":ut(e,"close"),type:"button"},[""])])}commit(){let e=new Rv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Rs.of(e)}))}keydown(e){RS(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?jo:Io)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Jp(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Rs)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Si).top}}function ut(t,e){return t.state.phrase(e)}const Tl=30,Nl=/[\s\.,:;?!]/;function mf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Tl),l=Math.min(i,n+Tl),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<Tl;a++)if(!Nl.test(o[a+1])&&Nl.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-Tl;a--)if(!Nl.test(o[a-1])&&Nl.test(o[a])){o=o.slice(0,a);break}}return j.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const Ib=j.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),jb=[$n,ea.low(Ob),Ib],Lt={PAGE_BREAK:/^\={3,}$/,CHARACTER:/^([A-Z][A-Z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,CHARACTER_POWER_USER:/^(?:@)([A-Za-z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,SCENE:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,TRANSITION:/^((?:FADE (?:IN|TO BLACK|OUT)|CUT TO BLACK)[\:\.]?|.+ TO\:)/i,TRANSITION_POWER_USER:/^(?:> )(.+)/i,TITLE:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,SECTION:/^(#{1,4})\ (.*)/,MILESTONE:/^(?:\ +)?-\ (.+)/,IMAGE:/^(\[i\]https:\/\/(.+))/i,AUDIO:/^(\[a\]https:\/\/(.+))/i},Fb=lf.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(Lt.TRANSITION)||t.match(Lt.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(Lt.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(Lt.CHARACTER))||(n=t.match(Lt.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(Lt.IMAGE)||t.match(Lt.AUDIO)?"link":t.match(Lt.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(Lt.TITLE))return t.skipTo(":"),t.next(),"def";if(n=t.match(Lt.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(Lt.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),zb=gt.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push(U.line({class:"cm-keyword"}).range(s.from)),e.push(U.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push(U.line({class:"cm-header"}).range(s.from)),e.push(U.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push(U.line({class:"cm-atom"}).range(s.from)),e.push(U.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push(U.line({class:"cm-synopsis"}).range(s.from)),e.push(U.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push(U.line({class:"cm-number"}).range(s.from)),e.push(U.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push(U.line({class:"cm-variable"}).range(s.from)),e.push(U.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return U.set(e)}},{decorations:t=>t.decorations}),_v=I.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=I.useRef(null),l=I.useRef(null);return I.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:j.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),I.useEffect(()=>{if(!s.current)return;const o=[YS(),jS(),IC(),GC(),EC(),j.lineWrapping,Fb,zb,j.domEventHandlers({mouseup:(c,h)=>{setTimeout(()=>{const f=h.state.selection.main.head,d=h.state.doc.lineAt(f);n(d.number-1)},10)}}),m2,Py.of([...yb,...Rb]),j.updateListener.of(c=>{if(c.docChanged&&e(c.state.doc.toString()),c.selectionSet&&!c.docChanged){const h=c.state.selection.main.head,f=c.state.doc.lineAt(h);n(f.number-1)}}),j.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=Z.create({doc:t,extensions:o}),u=new j({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),I.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),y.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});_v.displayName="CodeMirrorEditor";let ji="";function _b(){return new Promise(t=>{if(window.google)return t();const e=setInterval(()=>{window.google&&(clearInterval(e),t())},50)})}async function Hb(){if(ji)return ji;await _b();const e=window.google.accounts.oauth2.initTokenClient({client_id:"332933508693-u0f8kifpkma08osh7cscdcdbgsqi4ir1.apps.googleusercontent.com",scope:["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly"].join(" "),callback:n=>{ji=n.access_token}});return new Promise((n,r)=>{e.callback=i=>{i.error?r(i):(ji=i.access_token,n(ji))},e.requestAccessToken({prompt:""})})}const Wb={VITE_GCP_PROJECT_NUMBER:"332933508693",VITE_GOOGLE_API_KEY:"AIzaSyBNuoxiWJI0jd68umAFLH0QYfuJdyAHUUs"};function Vb(t=3e3){return new Promise((e,n)=>{if(window.gapi)return e();const r=Date.now(),i=setInterval(()=>{if(window.gapi)return clearInterval(i),e();if(Date.now()-r>t)return clearInterval(i),n(new Error("gapi did not load"))},50)})}function Ub(){return new Promise(async(t,e)=>{try{await Vb()}catch{return e(new Error("Google API library (gapi) not loaded. Ensure https://apis.google.com/js/api.js is included."))}try{window.gapi.load("picker",()=>{if(!window.google||!window.google.picker)return e(new Error("Google Picker API not available on window.google.picker. Make sure the Picker API is enabled in Google Cloud Console."));t()})}catch(n){e(n)}})}async function $b(){await Ub();const t=await Hb(),e=window.google,n=new e.picker.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMimeTypes("application/vnd.google-apps.folder");return new Promise(r=>{const i=Wb||{};new e.picker.PickerBuilder().setAppId(i.VITE_GCP_PROJECT_NUMBER).setDeveloperKey(i.VITE_GOOGLE_API_KEY).setOAuthToken(t).addView(n).setTitle("Choose a Drive Folder").setCallback(l=>{var o;if(l.action===e.picker.Action.PICKED&&((o=l.docs)!=null&&o.length)){console.log("Google Picker selected folder:",l.docs[0]);try{const a=new CustomEvent("fountain:drive:folderSelected",{detail:l.docs[0]});window.dispatchEvent(a)}catch(a){console.warn("picker: could not dispatch folderSelected event",a)}r({id:l.docs[0].id,name:l.docs[0].name})}else r(null)}).build().setVisible(!0)})}const Hv="fountain:driveState";function Xp(){try{return JSON.parse(localStorage.getItem(Hv)||"{}")}catch{return{}}}function Zp(t){localStorage.setItem(Hv,JSON.stringify(t))}function Kb({getDoc:t,setDoc:e,getDocName:n}){const[r,i]=I.useState(!1),[s,l]=I.useState(!1),[o,a]=I.useState(()=>Xp());I.useEffect(()=>{const m="ontouchstart"in window||navigator.maxTouchPoints&&navigator.maxTouchPoints>0;l(!!m);const v=x=>{(x.ctrlKey||x.metaKey)&&x.key.toLowerCase()==="g"&&(x.preventDefault(),i(p=>!p))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),I.useEffect(()=>{const m=v=>{try{const x=v.detail;if(x&&x.id){const p={...Xp(),folderId:x.id,folderName:x.name,folder:x};a(p),Zp(p),console.log("DriveBar: persisted folder from event",p)}}catch(x){console.error("DriveBar: error handling folderSelected event",x)}};return window.addEventListener("fountain:drive:folderSelected",m),()=>window.removeEventListener("fountain:drive:folderSelected",m)},[]);async function u(){try{const m=await $b();if(!m)return;const v={...o,folderId:m.id,folderName:m.name,folder:m};a(v),Zp(v),console.log("DriveBar: saved fountain:driveState =",localStorage.getItem("fountain:driveState"))}catch(m){console.error("Folder pick failed",m),alert("Could not open folder picker. Check console for details.")}}function c(){alert("Save  not implemented yet")}function h(){alert("Save As  not implemented yet")}function f(){alert("Load  not implemented yet")}const d=y.jsx("button",{onClick:()=>i(m=>!m),"aria-label":"Open Drive toolbar",style:{position:"fixed",right:12,bottom:12,zIndex:1200,borderRadius:9999,width:48,height:48,display:"flex",alignItems:"center",justifyContent:"center",background:"#2563eb",color:"white",border:"none",boxShadow:"0 6px 12px rgba(0,0,0,0.12)"},children:y.jsx("span",{style:{fontSize:18,lineHeight:1},children:""})});return!r&&!s?null:y.jsxs(y.Fragment,{children:[s?d:null,r&&y.jsxs("div",{style:{display:"flex",gap:8,padding:8,border:"1px solid #ddd",borderRadius:8,background:"#fafafa",marginBottom:8,alignItems:"center"},children:[y.jsxs("button",{className:"toolbar-btn",onClick:u,children:[y.jsx("i",{className:"fas fa-folder-open","aria-hidden":"true"})," Choose Folder"]}),y.jsxs("button",{className:"toolbar-btn",onClick:c,children:[y.jsx("i",{className:"fas fa-save","aria-hidden":"true"})," Save"]}),y.jsxs("button",{className:"toolbar-btn",onClick:h,children:[y.jsx("i",{className:"fas fa-file-export","aria-hidden":"true"})," Save As"]}),y.jsxs("button",{className:"toolbar-btn",onClick:f,children:[y.jsx("i",{className:"fas fa-download","aria-hidden":"true"})," Load"]}),y.jsx("div",{style:{marginLeft:"auto",fontSize:12,color:"#475569"},children:o.folderName?`Folder: ${o.folderName}`:"No folder selected"})]})]})}function qb(t=""){const[e,n]=I.useState([]),[r,i]=I.useState([]),[s,l]=I.useState(new Map),o=I.useRef(null),[a,u]=I.useState(!0);return I.useEffect(()=>{if(!a){if(t){const h=da(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}return}(function(){try{const h=new Worker(new URL("/assets/previewWorker-D6jE4gsy.js",import.meta.url),{type:"module"});return h.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},h.onmessage=f=>{const{type:d,blocks:m,characters:v,characterLineCounts:x}=f.data;d==="result"?(n(m||[]),i(v||[]),l(x||new Map)):d==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=h,t&&h.postMessage({type:"process",text:t}),()=>{try{h.terminate()}catch{}}}catch(h){console.error("Failed to create module worker, falling back to main-thread parsing:",h),u(!1)}})()},[a]),I.useEffect(()=>{if(!a&&t){const h=da(t);n(h.blocks),i(h.characters),l(h.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:h=>{if(a&&o.current)o.current.postMessage({type:"process",text:h});else{const f=da(h);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}let Gb=1;function Yb(){const t=I.useRef(null),e=I.useRef(new Map),[n,r]=I.useState([]),i=I.useRef(!1);I.useEffect(()=>(i.current=!0,()=>{if(i.current=!1,t.current){try{t.current.terminate()}catch{}t.current=null}for(const[,{resolve:o}]of e.current)try{o([])}catch{}e.current.clear()}),[]);const s=I.useCallback(()=>{if(t.current)return t.current;try{const o=new Worker(new URL("/assets/playerWorker-PCay-oew.js",import.meta.url),{type:"module"});return o.onmessage=a=>{const{type:u,panels:c,requestId:h,message:f}=a.data||{};if(h&&e.current.has(h)){const{resolve:d,reject:m}=e.current.get(h);if(e.current.delete(h),u==="panels")try{d(c)}catch{}else if(u==="error")try{m(new Error(f||"worker error"))}catch{}else try{m(new Error("unknown worker response"))}catch{}}else u==="panels"&&Array.isArray(c)&&r(c)},o.onerror=a=>{for(const[,{reject:u}]of e.current)try{u(a||new Error("worker error"))}catch{}e.current.clear();try{o.terminate()}catch{}t.current=null},t.current=o,o}catch{return t.current=null,null}},[]),l=I.useCallback(o=>{const a=s();if(!a)try{const c=r1(o);return r(c),Promise.resolve(c)}catch(c){return Promise.reject(c)}const u=String(Gb++);return new Promise((c,h)=>{e.current.set(u,{resolve:c,reject:h});try{a.postMessage({type:"parsePanels",text:o,requestId:u})}catch(f){e.current.delete(u),h(f)}}).then(c=>(i.current&&r(c),c))},[s]);return{panels:n,parsePanels:l}}const au=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Heydid the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE  CODING AND COFFEE\r
\r
 Keys clack.  \r
 Tests blink green, then red, then righteous green again.  \r
 A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pingsjust shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing  preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open  payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function Qb(){const[t,e]=I.useState(!1),[n,r]=I.useState(""),[i,s]=I.useState(!1),[l,o]=I.useState(!1),[a,u]=I.useState("edit"),[c,h]=I.useState(0),[f,d]=I.useState(!1),[m,v]=I.useState(null),x=I.useRef(null),p=I.useRef(null),g=I.useRef([]),w=I.useRef(null),[k,C]=I.useState(!1);I.useEffect(()=>{const S=localStorage.getItem("fountain-script");let V=au;if(S)try{const fe=JSON.parse(S);V=fe.content,d(!0),v(new Date(fe.savedAt))}catch(fe){console.error("Error parsing saved script:",fe),localStorage.removeItem("fountain-script")}r(V),z(V);try{typeof W=="function"&&W(V)}catch{}},[]),I.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const V=navigator.userAgent||"",fe=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(V),ze=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,Kt=(window.innerWidth||screen.width||0)<1024;(fe||ze&&Kt)&&e(!0)}catch{}},[]);const{blocks:A,characters:b,characterLineCounts:O,processText:z}=qb(""),{panels:E,parsePanels:W}=Yb(),[R,q]=I.useState(0),[X,ye]=I.useState("screenplay"),te=I.useRef(null),[Ge,P]=I.useState(!1),H=I.useRef(null),_=I.useRef(null),[Y,$]=I.useState(!1),he=I.useRef(null),[Ee,Ye]=I.useState(!1);I.useEffect(()=>{g.current=A},[A]);const tt=S=>{r(S),z(S);try{typeof W=="function"&&W(S)}catch{}},an=()=>{!Array.isArray(E)||E.length===0||(fa(),$(!1),he.current="user",q(S=>{const V=E.length;return((S-1)%V+V)%V}))},gf=(S=!0)=>{!Array.isArray(E)||E.length===0||(he.current=S?"user":"auto",S&&(fa(),$(!1)),q(V=>{const fe=E.length;return(V+1)%fe}))},Wv=async()=>{Y&&(q(0),$(!1));try{te.current&&te.current.paused&&(te.current.currentTime=0)}catch{}P(!0)},Vv=()=>{if(te.current){he.current="user";try{te.current.pause()}catch{}P(!1)}},Uv=()=>{fa(),$(!1);try{q(0)}catch{}};function fa(){try{_.current&&(clearTimeout(_.current),_.current=null)}catch{}try{te.current&&(he.current="user",te.current.pause(),te.current.currentTime=0)}catch{}P(!1)}I.useEffect(()=>{const S=te.current;if(!S)return;const V=()=>P(!0),fe=()=>{he.current==="user"&&P(!1)},ze=()=>{gf(!1)};return S.addEventListener("play",V),S.addEventListener("pause",fe),S.addEventListener("ended",ze),()=>{S.removeEventListener("play",V),S.removeEventListener("pause",fe),S.removeEventListener("ended",ze)}},[R,E]),I.useEffect(()=>{if(_.current&&(clearTimeout(_.current),_.current=null),!Ge)return;const S=E&&E.length>0?E[R]||E[0]:null;if(!S){P(!1);return}try{te.current&&te.current.play().catch(()=>{})}catch{}const V=Math.max(1e3,typeof S.duration=="number"?S.duration*1e3:3e3);return _.current=setTimeout(()=>{!E||R>=E.length-1?(P(!1),$(!0),_.current=null):q(fe=>fe+1)},V),()=>{_.current&&(clearTimeout(_.current),_.current=null)}},[Ge,R,E]),I.useEffect(()=>{if(te.current)try{he.current==="user"&&(te.current.pause(),te.current.currentTime=0,P(!1))}catch{}he.current=null;try{H.current&&typeof H.current.scrollTo=="function"&&H.current.scrollTo({top:0,behavior:"smooth"})}catch{}},[R]),I.useEffect(()=>()=>{try{_.current&&clearTimeout(_.current)}catch{}},[]),I.useEffect(()=>{try{const S=E&&E.length>0&&E[R]?E[R]:null}catch{}},[E,R]),I.useEffect(()=>{Ye(!1)},[R]);const $v=()=>{if(n.trim()){const S={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(S)),d(!0),v(new Date)}},Kv=()=>{const S=localStorage.getItem("fountain-script");if(S)try{const V=JSON.parse(S);r(V.content),z(V.content),v(new Date(V.savedAt))}catch(V){console.error("Error loading saved script:",V)}},qv=()=>{localStorage.removeItem("fountain-script"),d(!1),v(null),r(au),z(au)},Gv=async()=>{try{await navigator.clipboard.writeText(n)}catch{const V=document.createElement("textarea");V.value=n,document.body.appendChild(V),V.select(),document.execCommand("copy"),document.body.removeChild(V)}},Yv=async()=>{try{const S=await navigator.clipboard.readText();r(S),z(S)}catch(S){console.error("Error pasting from clipboard:",S)}},Qv=()=>{r(""),z("");try{p.current&&p.current.focus&&p.current.focus()}catch{}},Jv=I.useCallback(S=>{const V=g.current;if(h(S),x.current&&V.length>0){let fe=null;for(let ze=V.length-1;ze>=0;ze--)if(V[ze].index<=S){fe=V[ze];break}if(fe){const ze=x.current.querySelector(`[data-line-id="${fe.id}"]`);if(ze){const Kt=x.current,Cn=Kt.getBoundingClientRect(),Ci=ze.getBoundingClientRect(),Ks=Ci.top-Cn.top,e1=Cn.height,t1=Ci.height,n1=Kt.scrollTop+Ks-e1/2+t1/2;Kt.scrollTo({top:n1,behavior:"smooth"})}}}},[]),Xv=I.useCallback(S=>{p.current&&p.current.scrollToLine&&p.current.scrollToLine(S)},[]);I.useEffect(()=>{const S=V=>{V.key==="Escape"&&(i?s(!1):l&&o(!1))};if(i||l)return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[i,l]),I.useEffect(()=>{const S=()=>{C(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",S),()=>document.removeEventListener("fullscreenchange",S)},[]);const Zv=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),C(!1)):w.current&&w.current.requestFullscreen?(await w.current.requestFullscreen(),C(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),C(!0))}catch(S){console.error("Fullscreen toggle failed",S)}};return y.jsxs("div",{className:"fountain-app",ref:w,children:[t&&y.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:y.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),y.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:""})]}),y.jsxs("div",{className:"modal-body",children:[y.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),y.jsxs("p",{style:{marginTop:"1rem"},children:[y.jsx("strong",{children:"How to:"}),' open your browser menu () and choose "Desktop site" or "Request desktop site".']})]}),y.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:y.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"Got it"})})]})}),y.jsxs("div",{className:"persistence-toolbar",children:[y.jsxs("div",{className:"toolbar-group",children:[y.jsxs("button",{className:`toolbar-btn ${n.trim()?"":"disabled"}`,onClick:$v,disabled:!n.trim(),title:"Save current script to browser storage",children:[y.jsx("i",{className:"fas fa-save"}),"Save"]}),y.jsxs("button",{className:`toolbar-btn ${f?"":"disabled"}`,onClick:Kv,disabled:!f,title:m?`Load saved script (${m.toLocaleDateString()} ${m.toLocaleTimeString()})`:"Load saved script",children:[y.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),y.jsxs("button",{className:"toolbar-btn",onClick:Gv,title:"Copy editor contents to clipboard",children:[y.jsx("i",{className:"fas fa-copy"}),"Copy"]}),y.jsxs("button",{className:"toolbar-btn",onClick:Yv,title:"Paste from clipboard to editor",children:[y.jsx("i",{className:"fas fa-paste"}),"Paste"]}),y.jsxs("button",{className:`toolbar-btn danger ${n.trim()?"":"disabled"}`,onClick:Qv,disabled:!n.trim(),title:"Clear editor contents",children:[y.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),y.jsxs("button",{className:`toolbar-btn danger ${f?"":"disabled"}`,onClick:qv,disabled:!f,title:"Clear saved script from storage",children:[y.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),y.jsx("div",{className:"toolbar-divider"}),y.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>s(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[y.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),y.jsxs("button",{className:`toolbar-btn character-btn ${b.length===0?"disabled":""}`,onClick:()=>b.length>0&&o(!0),title:b.length>0?"Character List":"No characters found",disabled:b.length===0,children:[y.jsx("i",{className:"fas fa-user"}),"Characters",b.length>0&&y.jsx("span",{className:"character-count-badge",children:b.length})]})]}),m&&y.jsxs("div",{className:"last-saved",children:["Last saved: ",m.toLocaleDateString()," at ",m.toLocaleTimeString()]}),y.jsx("div",{style:{display:"flex",alignItems:"center",marginLeft:12},children:y.jsx(Kb,{getDoc:()=>n,setDoc:S=>{r(S),z(S)},getDocName:()=>null})})]}),y.jsx("div",{className:"mobile-view-toggle",children:y.jsx("div",{className:"tabs is-centered",children:y.jsxs("ul",{children:[y.jsx("li",{className:a==="edit"?"is-active":"",children:y.jsxs("a",{onClick:()=>u("edit"),children:[y.jsx("span",{className:"icon is-small",children:y.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),y.jsx("span",{children:"Edit"})]})}),y.jsx("li",{className:a==="preview"?"is-active":"",children:y.jsxs("a",{onClick:()=>u("preview"),children:[y.jsx("span",{className:"icon is-small",children:y.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),y.jsx("span",{children:"Preview"})]})})]})})}),y.jsxs("div",{className:"editor-layout",children:[y.jsx("button",{className:`toolbar-btn fullscreen-btn ${k?"is-active":""}`,onClick:Zv,title:k?"Exit fullscreen":"Enter fullscreen","aria-label":k?"Exit fullscreen":"Enter fullscreen",children:y.jsx("i",{className:`fas ${k?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),y.jsxs("div",{className:"columns is-gapless",children:[y.jsx("div",{className:`column is-half-desktop ${a==="preview"?"mobile-hidden":""}`,children:y.jsxs("div",{className:"box editor-box",children:[y.jsx("h3",{className:"title is-6",children:"Editor"}),y.jsx(_v,{ref:p,value:n,onChange:tt,onCursorChange:Jv,placeholder:"Type your fountain screenplay here..."})]})}),y.jsx("div",{className:`column is-half-desktop ${a==="edit"?"mobile-hidden":""}`,children:y.jsxs("div",{className:"box preview-box",children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[y.jsx("h3",{className:"title is-6",style:{margin:0},children:"Live Preview:"}),y.jsxs("div",{className:"pane-toggle",style:{display:"flex"},children:[y.jsx("button",{className:`toolbar-btn pane-toggle-btn ${X==="screenplay"?"is-active":""}`,onClick:()=>ye("screenplay"),"aria-pressed":X==="screenplay",title:"Show screenplay preview",children:"Screenplay"}),y.jsx("button",{className:`toolbar-btn pane-toggle-btn ${X==="player"?"is-active":""}`,onClick:()=>ye("player"),"aria-pressed":X==="player",title:"Show media player",children:"Player"})]})]}),y.jsx("div",{})]}),X==="screenplay"?y.jsx("div",{className:"preview-content",ref:x,children:A.length===0?y.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):A.map(S=>y.jsx("div",{className:`preview-line ${S.className||""} ${S.index===c?"current-line":""}`,"data-type":S.type,"data-line-id":S.id,"data-line-index":S.index,onClick:()=>Xv(S.index),style:{cursor:"pointer"},children:S.type==="image"||S.type==="audio"||S.type==="title_page"||S.type==="page_break"||S.type==="page_number"?y.jsx("div",{dangerouslySetInnerHTML:{__html:S.text}}):S.text||""},S.id))}):y.jsxs("div",{className:"media-player",ref:H,style:{padding:"1rem",maxHeight:"80vh",overflowY:"auto"},children:[(()=>{const S=E&&E.length>0?E[R]||E[0]:null,V=S&&typeof S.duration=="number"?S.duration:null,fe=E&&E.length?E.length:0,ze=S&&S.title?String(S.title):"";let Kt="untitled";return ze&&ze.trim()&&(Kt=ze.replace(/^\s*Panel\s*\d+\s*[:\-]\s*/i,"").trim(),Kt||(Kt="untitled")),y.jsxs("div",{className:"player-header",style:{marginBottom:"0.5rem",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[y.jsxs("div",{children:[y.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[y.jsxs("div",{className:"panel-title-wrapper",style:{position:"relative",display:"inline-block"},children:[y.jsx("div",{className:"panel-title",style:{fontSize:"1.05rem",fontWeight:700},onMouseEnter:()=>Ye(!0),onMouseLeave:()=>Ye(!1),onClick:()=>Ye(Cn=>!Cn),"aria-haspopup":"true","aria-expanded":Ee,children:Kt}),S&&S.nesting&&Ee?y.jsxs("div",{className:"panel-nesting-tooltip",role:"tooltip",children:[S.nesting.act?y.jsxs("div",{children:[y.jsx("strong",{children:"Act:"})," ",S.nesting.act]}):null,S.nesting.scene?y.jsxs("div",{children:[y.jsx("strong",{children:"Scene:"})," ",S.nesting.scene]}):null,S.nesting.sequence?y.jsxs("div",{children:[y.jsx("strong",{children:"Sequence:"})," ",S.nesting.sequence]}):null,!S.nesting.act&&!S.nesting.sequence&&!S.nesting.scene?y.jsx("div",{style:{color:"#999"},children:"No nesting"}):null]}):null]}),y.jsx("div",{style:{fontSize:"0.85rem",color:"#bdbdbd"},children:`(${R+1} / ${fe})`})]}),y.jsx("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,marginTop:"0.25rem",fontSize:"0.85rem",color:"#999"},children:y.jsxs("div",{style:{color:"#999"},children:["lines ",S&&typeof S.startLine=="number"?S.startLine:"?","",S&&typeof S.endLine=="number"?S.endLine:"?"]})})]}),y.jsxs("div",{style:{display:"flex",gap:"0.6rem",alignItems:"center"},children:[y.jsxs("div",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:6,marginRight:6},children:[y.jsx("span",{style:{fontSize:"0.95rem"},children:""}),V?`${V}s`:"n/a"]}),y.jsx("button",{className:"toolbar-btn",title:"Stop","aria-label":"Stop",onClick:Uv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),y.jsxs("button",{className:`toolbar-btn ${Ge?"is-active":""}`,title:"Play","aria-label":"Play",onClick:Wv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[Ge?y.jsx("span",{className:"playing-indicator","aria-hidden":"true"}):null,""]}),y.jsx("button",{className:"toolbar-btn",title:"Pause","aria-label":"Pause",onClick:Vv,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),y.jsx("button",{className:"toolbar-btn",title:"Previous","aria-label":"Previous",onClick:an,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""}),y.jsx("button",{className:"toolbar-btn",title:"Next","aria-label":"Next",onClick:gf,style:{padding:"0.25rem 0.4rem",fontSize:"0.9rem"},children:""})]})]}),Ge&&(()=>{const Cn=E&&E.length>0?E[R]||E[0]:null,Ci=Cn&&typeof Cn.duration=="number"?Cn.duration:null,Ks=Math.max(1e3,typeof Ci=="number"?Ci*1e3:3e3);return y.jsx("div",{className:"player-header-progress-wrapper",style:{position:"relative"},children:y.jsx("div",{className:"player-progress",style:{animationDuration:`${Ks}ms`},"aria-hidden":"true"},`player-progress-${R}-${Ks}`)})})()]})})(),(()=>{if(Y)return y.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:y.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#000",aspectRatio:"16/9"}})});const S=E&&E.length>0?E[R]||E[0]:null,V=S&&S.imageUrl?S.imageUrl:null;return y.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"0.75rem"},children:V?y.jsx("img",{src:V,alt:"panel",style:{width:"100%",maxWidth:640,borderRadius:6}}):y.jsx("div",{style:{width:"100%",maxWidth:640,borderRadius:6,background:"#f0f0f0",aspectRatio:"16/9",display:"flex",alignItems:"center",justifyContent:"center",color:"#9a9a9a"},children:y.jsx("span",{children:"No image"})})})})(),(()=>{const S=E&&E.length>0?E[R]||E[0]:null,V=S&&S.audioUrl?S.audioUrl:null;return y.jsx("div",{style:{marginBottom:"0.75rem"},children:V?y.jsx("audio",{ref:te,controls:!0,src:V,style:{width:"100%"}}):y.jsx("audio",{ref:te,controls:!0,disabled:!0,style:{width:"100%"}})})})(),y.jsx("div",{style:{borderTop:"1px solid #2a2a2a",paddingTop:"0.75rem"},children:!E||E.length===0?y.jsx("div",{style:{color:"#999"},children:"No panel content found in the script. Add '####' headings to create panels."}):(()=>{const S=E&&E.length>0?E[R]||E[0]:null;return y.jsx("div",{children:y.jsx("div",{style:{padding:"0.5rem"},children:y.jsx("div",{className:"preview-content player-preview-content",style:{margin:0},children:S&&S.blocks&&S.blocks.length>0?S.blocks.map(V=>y.jsx("div",{className:`preview-line ${V.className||""}`,dangerouslySetInnerHTML:{__html:V.text||""}},V.id)):S&&S.snippet?S.snippet.split(/\r?\n/).map((V,fe)=>y.jsx("div",{style:{whiteSpace:"pre-wrap"},children:V||""},fe)):y.jsx("div",{style:{color:"#999"},children:"No content for this panel."})})})})})()})]})]})})]})]}),i&&y.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:y.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{children:"Fountain.ext Format Reference"}),y.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:""})]}),y.jsxs("div",{className:"modal-body",children:[y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Title Page"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",y.jsx("br",{}),"Credit: Written by",y.jsx("br",{}),"Author: John Dope",y.jsx("br",{}),"Authors: John Dope and Jane Smith",y.jsx("br",{}),"Source: Based on the novel by Famous Writer",y.jsx("br",{}),"Draft Date: October 4, 2025",y.jsx("br",{}),"Date: 10/04/2025",y.jsx("br",{}),"Contact:",y.jsx("br",{}),"John Dope",y.jsx("br",{}),"555-123-4567",y.jsx("br",{}),"john@example.com",y.jsx("br",{}),"",y.jsx("br",{}),"Literary Agent",y.jsx("br",{}),"Agency Name",y.jsx("br",{}),"agent@agency.com",y.jsx("br",{}),"Notes: This is a sample script",y.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),y.jsx("p",{children:'Title page elements appear at the top of your script. All are optional. Use "Author" for single writer, "Authors" for multiple. Contact can be multi-line with indentation. End title page with === (page break).'})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Scene Headings"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["EXT. PARKING LOT - DAY",y.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",y.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),y.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Characters & Dialogue"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["MENTOR",y.jsx("br",{}),"Welcome to the team!",y.jsx("br",{}),y.jsx("br",{}),"@MENTOR",y.jsx("br",{}),"(power user syntax)",y.jsx("br",{}),y.jsx("br",{}),"USER #1",y.jsx("br",{}),"Thanks for having me.",y.jsx("br",{}),y.jsx("br",{}),"BOB O'SHAUNNESSY",y.jsx("br",{}),"(whispering)",y.jsx("br",{}),"This is a parenthetical."]}),y.jsx("p",{children:'Characters are ALL CAPS. Use @ for power user syntax or mixed-case names like "@John Doe". Names with @ in front will be counted as characters. Parentheticals go under character names.'})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Dual Dialogue"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["ALICE^",y.jsx("br",{}),"BOB^",y.jsx("br",{}),"CHARLIE^",y.jsx("br",{}),"I can't believe it!",y.jsx("br",{}),y.jsx("br",{}),"CHARLIE ^",y.jsx("br",{}),"DAVE ^",y.jsx("br",{}),"(disgusted)",y.jsx("br",{}),"Eew. no it's nooot!",y.jsx("br",{}),y.jsx("br",{})]}),y.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Action Lines"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["Bob walks into the room and looks around nervously.",y.jsx("br",{}),y.jsx("br",{}),"The computer screen flickers to life."]}),y.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Transitions"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["FADE IN:",y.jsx("br",{}),"CUT TO:",y.jsx("br",{}),"FADE TO BLACK.",y.jsx("br",{}),"> CUT TO BLACK."]}),y.jsx("p",{children:"Transitions control scene changes. Use > for power user syntax."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Centered Text"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:[">INTERMISSION<",y.jsx("br",{}),">THE END<"]}),y.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["# Act I",y.jsx("br",{}),"## Scene 1: The Beginning",y.jsx("br",{}),"### Sequence A: Setup",y.jsx("br",{}),"#### Panel 1",y.jsx("br",{}),"02:30",y.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",y.jsx("br",{}),"[a]https://example.com/dialogue.mp3",y.jsx("br",{}),y.jsx("br",{}),"#### Panel 2",y.jsx("br",{}),"01:15",y.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),y.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Notes & Comments"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["[[This is a note for the writer]]",y.jsx("br",{}),y.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),y.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"Special Elements"}),y.jsxs("div",{className:"help-example",children:[y.jsxs("code",{children:["= Synopsis: Brief scene description",y.jsx("br",{}),y.jsx("br",{}),"===",y.jsx("br",{}),"(Page Break)",y.jsx("br",{}),y.jsx("br",{}),"~Lyrics:",y.jsx("br",{}),'~"Happy birthday to you"',y.jsx("br",{}),'~"Happy birthday to you"']}),y.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),l&&y.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:y.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h2",{children:"Character List"}),y.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:""})]}),y.jsx("div",{className:"modal-body",children:b.length===0?y.jsx("p",{children:"No characters found in the script."}):y.jsx("div",{className:"character-list",children:b.map(S=>y.jsxs("div",{className:"character-item",children:[y.jsx("div",{className:"character-name",children:S}),y.jsxs("div",{className:"character-count",children:[O.get(S)||0," dialogue lines"]})]},S))})})]})})]})}uu.createRoot(document.getElementById("root")).render(y.jsx(x1.StrictMode,{children:y.jsx(Qb,{})}));
