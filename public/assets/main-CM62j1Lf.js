import{p as ra}from"./chunk-Dl70ecfl.js";function Dv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hp={exports:{}},Oo={},Wp={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=Symbol.for("react.element"),Pv=Symbol.for("react.portal"),Lv=Symbol.for("react.fragment"),Rv=Symbol.for("react.strict_mode"),Bv=Symbol.for("react.profiler"),Iv=Symbol.for("react.provider"),Fv=Symbol.for("react.context"),jv=Symbol.for("react.forward_ref"),zv=Symbol.for("react.suspense"),_v=Symbol.for("react.memo"),Hv=Symbol.for("react.lazy"),lf=Symbol.iterator;function Wv(t){return t===null||typeof t!="object"?null:(t=lf&&t[lf]||t["@@iterator"],typeof t=="function"?t:null)}var Vp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Up=Object.assign,$p={};function ci(t,e,n){this.props=t,this.context=e,this.refs=$p,this.updater=n||Vp}ci.prototype.isReactComponent={};ci.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ci.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kp(){}Kp.prototype=ci.prototype;function Ih(t,e,n){this.props=t,this.context=e,this.refs=$p,this.updater=n||Vp}var Fh=Ih.prototype=new Kp;Fh.constructor=Ih;Up(Fh,ci.prototype);Fh.isPureReactComponent=!0;var of=Array.isArray,qp=Object.prototype.hasOwnProperty,jh={current:null},Gp={key:!0,ref:!0,__self:!0,__source:!0};function Qp(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)qp.call(e,r)&&!Gp.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),u=0;u<o;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Ms,type:t,key:s,ref:l,props:i,_owner:jh.current}}function Vv(t,e){return{$$typeof:Ms,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ms}function Uv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var af=/\/+/g;function ia(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Uv(""+t.key):e.toString(36)}function xl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ms:case Pv:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+ia(l,0):r,of(i)?(n="",t!=null&&(n=t.replace(af,"$&/")+"/"),xl(i,e,n,"",function(u){return u})):i!=null&&(zh(i)&&(i=Vv(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(af,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",of(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+ia(s,o);l+=xl(s,e,n,a,i)}else if(a=Wv(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+ia(s,o++),l+=xl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function js(t,e,n){if(t==null)return t;var r=[],i=0;return xl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $v(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qe={current:null},Sl={transition:null},Kv={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:Sl,ReactCurrentOwner:jh};function Yp(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:js,forEach:function(t,e,n){js(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return js(t,function(){e++}),e},toArray:function(t){return js(t,function(e){return e})||[]},only:function(t){if(!zh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};U.Component=ci;U.Fragment=Lv;U.Profiler=Bv;U.PureComponent=Ih;U.StrictMode=Rv;U.Suspense=zv;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kv;U.act=Yp;U.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Up({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=jh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)qp.call(e,a)&&!Gp.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Ms,type:t.type,key:i,ref:s,props:r,_owner:l}};U.createContext=function(t){return t={$$typeof:Fv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Iv,_context:t},t.Consumer=t};U.createElement=Qp;U.createFactory=function(t){var e=Qp.bind(null,t);return e.type=t,e};U.createRef=function(){return{current:null}};U.forwardRef=function(t){return{$$typeof:jv,render:t}};U.isValidElement=zh;U.lazy=function(t){return{$$typeof:Hv,_payload:{_status:-1,_result:t},_init:$v}};U.memo=function(t,e){return{$$typeof:_v,type:t,compare:e===void 0?null:e}};U.startTransition=function(t){var e=Sl.transition;Sl.transition={};try{t()}finally{Sl.transition=e}};U.unstable_act=Yp;U.useCallback=function(t,e){return qe.current.useCallback(t,e)};U.useContext=function(t){return qe.current.useContext(t)};U.useDebugValue=function(){};U.useDeferredValue=function(t){return qe.current.useDeferredValue(t)};U.useEffect=function(t,e){return qe.current.useEffect(t,e)};U.useId=function(){return qe.current.useId()};U.useImperativeHandle=function(t,e,n){return qe.current.useImperativeHandle(t,e,n)};U.useInsertionEffect=function(t,e){return qe.current.useInsertionEffect(t,e)};U.useLayoutEffect=function(t,e){return qe.current.useLayoutEffect(t,e)};U.useMemo=function(t,e){return qe.current.useMemo(t,e)};U.useReducer=function(t,e,n){return qe.current.useReducer(t,e,n)};U.useRef=function(t){return qe.current.useRef(t)};U.useState=function(t){return qe.current.useState(t)};U.useSyncExternalStore=function(t,e,n){return qe.current.useSyncExternalStore(t,e,n)};U.useTransition=function(){return qe.current.useTransition()};U.version="18.3.1";Wp.exports=U;var $=Wp.exports;const qv=Dv($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv=$,Qv=Symbol.for("react.element"),Yv=Symbol.for("react.fragment"),Jv=Object.prototype.hasOwnProperty,Xv=Gv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zv={key:!0,ref:!0,__self:!0,__source:!0};function Jp(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)Jv.call(e,r)&&!Zv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Qv,type:t,key:s,ref:l,props:i,_owner:Xv.current}}Oo.Fragment=Yv;Oo.jsx=Jp;Oo.jsxs=Jp;Hp.exports=Oo;var w=Hp.exports,Za={},Xp={exports:{}},dt={},Zp={exports:{}},em={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,_){var E=D.length;D.push(_);e:for(;0<E;){var j=E-1>>>1,V=D[j];if(0<i(V,_))D[j]=_,D[E]=V,E=j;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var _=D[0],E=D.pop();if(E!==_){D[0]=E;e:for(var j=0,V=D.length,ie=V>>>1;j<ie;){var me=2*(j+1)-1,rt=D[me],Ve=me+1,nn=D[Ve];if(0>i(rt,E))Ve<V&&0>i(nn,rt)?(D[j]=nn,D[Ve]=E,j=Ve):(D[j]=rt,D[me]=E,j=me);else if(Ve<V&&0>i(nn,E))D[j]=nn,D[Ve]=E,j=Ve;else break e}}return _}function i(D,_){var E=D.sortIndex-_.sortIndex;return E!==0?E:D.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var a=[],u=[],h=1,c=null,f=3,d=!1,m=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=D)r(u),_.sortIndex=_.expirationTime,e(a,_);else break;_=n(u)}}function x(D){if(v=!1,y(D),!m)if(n(a)!==null)m=!0,Qe(S);else{var _=n(u);_!==null&&Mt(x,_.startTime-D)}}function S(D,_){m=!1,v&&(v=!1,p(O),O=-1),d=!0;var E=f;try{for(y(_),c=n(a);c!==null&&(!(c.expirationTime>_)||D&&!H());){var j=c.callback;if(typeof j=="function"){c.callback=null,f=c.priorityLevel;var V=j(c.expirationTime<=_);_=t.unstable_now(),typeof V=="function"?c.callback=V:c===n(a)&&r(a),y(_)}else r(a);c=n(a)}if(c!==null)var ie=!0;else{var me=n(u);me!==null&&Mt(x,me.startTime-_),ie=!1}return ie}finally{c=null,f=E,d=!1}}var A=!1,C=null,O=-1,F=5,R=-1;function H(){return!(t.unstable_now()-R<F)}function z(){if(C!==null){var D=t.unstable_now();R=D;var _=!0;try{_=C(!0,D)}finally{_?Q():(A=!1,C=null)}}else A=!1}var Q;if(typeof g=="function")Q=function(){g(z)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,pe=Z.port2;Z.port1.onmessage=z,Q=function(){pe.postMessage(null)}}else Q=function(){k(z,0)};function Qe(D){C=D,A||(A=!0,Q())}function Mt(D,_){O=k(function(){D(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){m||d||(m=!0,Qe(S))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var _=3;break;default:_=f}var E=f;f=_;try{return D()}finally{f=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,_){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var E=f;f=D;try{return _()}finally{f=E}},t.unstable_scheduleCallback=function(D,_,E){var j=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?j+E:j):E=j,D){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=E+V,D={id:h++,callback:_,priorityLevel:D,startTime:E,expirationTime:V,sortIndex:-1},E>j?(D.sortIndex=E,e(u,D),n(a)===null&&D===n(u)&&(v?(p(O),O=-1):v=!0,Mt(x,E-j))):(D.sortIndex=V,e(a,D),m||d||(m=!0,Qe(S))),D},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(D){var _=f;return function(){var E=f;f=_;try{return D.apply(this,arguments)}finally{f=E}}}})(em);Zp.exports=em;var e1=Zp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1=$,ht=e1;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tm=new Set,Zi={};function kr(t,e){Jr(t,e),Jr(t+"Capture",e)}function Jr(t,e){for(Zi[t]=e,t=0;t<e.length;t++)tm.add(e[t])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eu=Object.prototype.hasOwnProperty,n1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uf={},hf={};function r1(t){return eu.call(hf,t)?!0:eu.call(uf,t)?!1:n1.test(t)?hf[t]=!0:(uf[t]=!0,!1)}function i1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function s1(t,e,n,r){if(e===null||typeof e>"u"||i1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ge(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Re[t]=new Ge(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Re[e]=new Ge(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Re[t]=new Ge(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Re[t]=new Ge(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Re[t]=new Ge(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Re[t]=new Ge(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Re[t]=new Ge(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Re[t]=new Ge(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Re[t]=new Ge(t,5,!1,t.toLowerCase(),null,!1,!1)});var _h=/[\-:]([a-z])/g;function Hh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_h,Hh);Re[e]=new Ge(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_h,Hh);Re[e]=new Ge(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_h,Hh);Re[e]=new Ge(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Re[t]=new Ge(t,1,!1,t.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Re[t]=new Ge(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wh(t,e,n,r){var i=Re.hasOwnProperty(e)?Re[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(s1(e,n,i,r)&&(n=null),r||i===null?r1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yn=t1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zs=Symbol.for("react.element"),br=Symbol.for("react.portal"),Mr=Symbol.for("react.fragment"),Vh=Symbol.for("react.strict_mode"),tu=Symbol.for("react.profiler"),nm=Symbol.for("react.provider"),rm=Symbol.for("react.context"),Uh=Symbol.for("react.forward_ref"),nu=Symbol.for("react.suspense"),ru=Symbol.for("react.suspense_list"),$h=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),im=Symbol.for("react.offscreen"),cf=Symbol.iterator;function yi(t){return t===null||typeof t!="object"?null:(t=cf&&t[cf]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Object.assign,sa;function Ni(t){if(sa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sa=e&&e[1]||""}return`
`+sa+t}var la=!1;function oa(t,e){if(!t||la)return"";la=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,o=s.length-1;1<=l&&0<=o&&i[l]!==s[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==s[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==s[o]){var a=`
`+i[l].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=l&&0<=o);break}}}finally{la=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ni(t):""}function l1(t){switch(t.tag){case 5:return Ni(t.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 2:case 15:return t=oa(t.type,!1),t;case 11:return t=oa(t.type.render,!1),t;case 1:return t=oa(t.type,!0),t;default:return""}}function iu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mr:return"Fragment";case br:return"Portal";case tu:return"Profiler";case Vh:return"StrictMode";case nu:return"Suspense";case ru:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rm:return(t.displayName||"Context")+".Consumer";case nm:return(t._context.displayName||"Context")+".Provider";case Uh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $h:return e=t.displayName||null,e!==null?e:iu(t.type)||"Memo";case wn:e=t._payload,t=t._init;try{return iu(t(e))}catch{}}return null}function o1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return iu(e);case 8:return e===Vh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _n(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function a1(t){var e=sm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _s(t){t._valueTracker||(t._valueTracker=a1(t))}function lm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function su(t,e){var n=e.checked;return fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ff(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_n(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function om(t,e){e=e.checked,e!=null&&Wh(t,"checked",e,!1)}function lu(t,e){om(t,e);var n=_n(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ou(t,e.type,n):e.hasOwnProperty("defaultValue")&&ou(t,e.type,_n(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function df(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ou(t,e,n){(e!=="number"||_l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Di=Array.isArray;function Hr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_n(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function au(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Di(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_n(n)}}function am(t,e){var n=_n(e.value),r=_n(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function um(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?um(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hs,hm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hs=Hs||document.createElement("div"),Hs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function es(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},u1=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(t){u1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fi[e]=Fi[t]})});function cm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fi.hasOwnProperty(t)&&Fi[t]?(""+e).trim():e+"px"}function fm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=cm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var h1=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hu(t,e){if(e){if(h1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function cu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fu=null;function Kh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var du=null,Wr=null,Vr=null;function gf(t){if(t=Ns(t)){if(typeof du!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Ro(e),du(t.stateNode,t.type,e))}}function dm(t){Wr?Vr?Vr.push(t):Vr=[t]:Wr=t}function pm(){if(Wr){var t=Wr,e=Vr;if(Vr=Wr=null,gf(t),e)for(t=0;t<e.length;t++)gf(e[t])}}function mm(t,e){return t(e)}function gm(){}var aa=!1;function ym(t,e,n){if(aa)return t(e,n);aa=!0;try{return mm(t,e,n)}finally{aa=!1,(Wr!==null||Vr!==null)&&(gm(),pm())}}function ts(t,e){var n=t.stateNode;if(n===null)return null;var r=Ro(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var pu=!1;if(fn)try{var vi={};Object.defineProperty(vi,"passive",{get:function(){pu=!0}}),window.addEventListener("test",vi,vi),window.removeEventListener("test",vi,vi)}catch{pu=!1}function c1(t,e,n,r,i,s,l,o,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ji=!1,Hl=null,Wl=!1,mu=null,f1={onError:function(t){ji=!0,Hl=t}};function d1(t,e,n,r,i,s,l,o,a){ji=!1,Hl=null,c1.apply(f1,arguments)}function p1(t,e,n,r,i,s,l,o,a){if(d1.apply(this,arguments),ji){if(ji){var u=Hl;ji=!1,Hl=null}else throw Error(M(198));Wl||(Wl=!0,mu=u)}}function xr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yf(t){if(xr(t)!==t)throw Error(M(188))}function m1(t){var e=t.alternate;if(!e){if(e=xr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return yf(i),t;if(s===r)return yf(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l){for(o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function wm(t){return t=m1(t),t!==null?km(t):null}function km(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=km(t);if(e!==null)return e;t=t.sibling}return null}var xm=ht.unstable_scheduleCallback,vf=ht.unstable_cancelCallback,g1=ht.unstable_shouldYield,y1=ht.unstable_requestPaint,ye=ht.unstable_now,v1=ht.unstable_getCurrentPriorityLevel,qh=ht.unstable_ImmediatePriority,Sm=ht.unstable_UserBlockingPriority,Vl=ht.unstable_NormalPriority,w1=ht.unstable_LowPriority,Cm=ht.unstable_IdlePriority,No=null,Zt=null;function k1(t){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(No,t,void 0,(t.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:C1,x1=Math.log,S1=Math.LN2;function C1(t){return t>>>=0,t===0?32:31-(x1(t)/S1|0)|0}var Ws=64,Vs=4194304;function Pi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ul(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~i;o!==0?r=Pi(o):(s&=l,s!==0&&(r=Pi(s)))}else l=n&~i,l!==0?r=Pi(l):s!==0&&(r=Pi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rt(e),i=1<<n,r|=t[n],e&=~i;return r}function A1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Rt(s),o=1<<l,a=i[l];a===-1?(!(o&n)||o&r)&&(i[l]=A1(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function gu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Am(){var t=Ws;return Ws<<=1,!(Ws&4194240)&&(Ws=64),t}function ua(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ts(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rt(e),t[e]=n}function b1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Rt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Gh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var X=0;function Em(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bm,Qh,Mm,Tm,Om,yu=!1,Us=[],Dn=null,Pn=null,Ln=null,ns=new Map,rs=new Map,Cn=[],M1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wf(t,e){switch(t){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":ns.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(e.pointerId)}}function wi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ns(e),e!==null&&Qh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function T1(t,e,n,r,i){switch(e){case"focusin":return Dn=wi(Dn,t,e,n,r,i),!0;case"dragenter":return Pn=wi(Pn,t,e,n,r,i),!0;case"mouseover":return Ln=wi(Ln,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ns.set(s,wi(ns.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rs.set(s,wi(rs.get(s)||null,t,e,n,r,i)),!0}return!1}function Nm(t){var e=nr(t.target);if(e!==null){var n=xr(e);if(n!==null){if(e=n.tag,e===13){if(e=vm(n),e!==null){t.blockedOn=e,Om(t.priority,function(){Mm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fu=r,n.target.dispatchEvent(r),fu=null}else return e=Ns(n),e!==null&&Qh(e),t.blockedOn=n,!1;e.shift()}return!0}function kf(t,e,n){Cl(t)&&n.delete(e)}function O1(){yu=!1,Dn!==null&&Cl(Dn)&&(Dn=null),Pn!==null&&Cl(Pn)&&(Pn=null),Ln!==null&&Cl(Ln)&&(Ln=null),ns.forEach(kf),rs.forEach(kf)}function ki(t,e){t.blockedOn===e&&(t.blockedOn=null,yu||(yu=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,O1)))}function is(t){function e(i){return ki(i,t)}if(0<Us.length){ki(Us[0],t);for(var n=1;n<Us.length;n++){var r=Us[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dn!==null&&ki(Dn,t),Pn!==null&&ki(Pn,t),Ln!==null&&ki(Ln,t),ns.forEach(e),rs.forEach(e),n=0;n<Cn.length;n++)r=Cn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)Nm(n),n.blockedOn===null&&Cn.shift()}var Ur=yn.ReactCurrentBatchConfig,$l=!0;function N1(t,e,n,r){var i=X,s=Ur.transition;Ur.transition=null;try{X=1,Yh(t,e,n,r)}finally{X=i,Ur.transition=s}}function D1(t,e,n,r){var i=X,s=Ur.transition;Ur.transition=null;try{X=4,Yh(t,e,n,r)}finally{X=i,Ur.transition=s}}function Yh(t,e,n,r){if($l){var i=vu(t,e,n,r);if(i===null)wa(t,e,r,Kl,n),wf(t,r);else if(T1(i,t,e,n,r))r.stopPropagation();else if(wf(t,r),e&4&&-1<M1.indexOf(t)){for(;i!==null;){var s=Ns(i);if(s!==null&&bm(s),s=vu(t,e,n,r),s===null&&wa(t,e,r,Kl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wa(t,e,r,null,n)}}var Kl=null;function vu(t,e,n,r){if(Kl=null,t=Kh(r),t=nr(t),t!==null)if(e=xr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kl=t,null}function Dm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v1()){case qh:return 1;case Sm:return 4;case Vl:case w1:return 16;case Cm:return 536870912;default:return 16}default:return 16}}var bn=null,Jh=null,Al=null;function Pm(){if(Al)return Al;var t,e=Jh,n=e.length,r,i="value"in bn?bn.value:bn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Al=i.slice(t,1<r?1-r:void 0)}function El(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $s(){return!0}function xf(){return!1}function pt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$s:xf,this.isPropagationStopped=xf,this}return fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),e}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xh=pt(fi),Os=fe({},fi,{view:0,detail:0}),P1=pt(Os),ha,ca,xi,Do=fe({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xi&&(xi&&t.type==="mousemove"?(ha=t.screenX-xi.screenX,ca=t.screenY-xi.screenY):ca=ha=0,xi=t),ha)},movementY:function(t){return"movementY"in t?t.movementY:ca}}),Sf=pt(Do),L1=fe({},Do,{dataTransfer:0}),R1=pt(L1),B1=fe({},Os,{relatedTarget:0}),fa=pt(B1),I1=fe({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),F1=pt(I1),j1=fe({},fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),z1=pt(j1),_1=fe({},fi,{data:0}),Cf=pt(_1),H1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=V1[t])?!!e[t]:!1}function Zh(){return U1}var $1=fe({},Os,{key:function(t){if(t.key){var e=H1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=El(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?W1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zh,charCode:function(t){return t.type==="keypress"?El(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?El(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),K1=pt($1),q1=fe({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Af=pt(q1),G1=fe({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zh}),Q1=pt(G1),Y1=fe({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),J1=pt(Y1),X1=fe({},Do,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z1=pt(X1),ew=[9,13,27,32],ec=fn&&"CompositionEvent"in window,zi=null;fn&&"documentMode"in document&&(zi=document.documentMode);var tw=fn&&"TextEvent"in window&&!zi,Lm=fn&&(!ec||zi&&8<zi&&11>=zi),Ef=" ",bf=!1;function Rm(t,e){switch(t){case"keyup":return ew.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tr=!1;function nw(t,e){switch(t){case"compositionend":return Bm(e);case"keypress":return e.which!==32?null:(bf=!0,Ef);case"textInput":return t=e.data,t===Ef&&bf?null:t;default:return null}}function rw(t,e){if(Tr)return t==="compositionend"||!ec&&Rm(t,e)?(t=Pm(),Al=Jh=bn=null,Tr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lm&&e.locale!=="ko"?null:e.data;default:return null}}var iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iw[t.type]:e==="textarea"}function Im(t,e,n,r){dm(r),e=ql(e,"onChange"),0<e.length&&(n=new Xh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _i=null,ss=null;function sw(t){qm(t,0)}function Po(t){var e=Dr(t);if(lm(e))return t}function lw(t,e){if(t==="change")return e}var Fm=!1;if(fn){var da;if(fn){var pa="oninput"in document;if(!pa){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),pa=typeof Tf.oninput=="function"}da=pa}else da=!1;Fm=da&&(!document.documentMode||9<document.documentMode)}function Of(){_i&&(_i.detachEvent("onpropertychange",jm),ss=_i=null)}function jm(t){if(t.propertyName==="value"&&Po(ss)){var e=[];Im(e,ss,t,Kh(t)),ym(sw,e)}}function ow(t,e,n){t==="focusin"?(Of(),_i=e,ss=n,_i.attachEvent("onpropertychange",jm)):t==="focusout"&&Of()}function aw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Po(ss)}function uw(t,e){if(t==="click")return Po(e)}function hw(t,e){if(t==="input"||t==="change")return Po(e)}function cw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var It=typeof Object.is=="function"?Object.is:cw;function ls(t,e){if(It(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!eu.call(e,i)||!It(t[i],e[i]))return!1}return!0}function Nf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Df(t,e){var n=Nf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nf(n)}}function zm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _m(){for(var t=window,e=_l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_l(t.document)}return e}function tc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fw(t){var e=_m(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zm(n.ownerDocument.documentElement,n)){if(r!==null&&tc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Df(n,s);var l=Df(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dw=fn&&"documentMode"in document&&11>=document.documentMode,Or=null,wu=null,Hi=null,ku=!1;function Pf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ku||Or==null||Or!==_l(r)||(r=Or,"selectionStart"in r&&tc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hi&&ls(Hi,r)||(Hi=r,r=ql(wu,"onSelect"),0<r.length&&(e=new Xh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Or)))}function Ks(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Nr={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionend:Ks("Transition","TransitionEnd")},ma={},Hm={};fn&&(Hm=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function Lo(t){if(ma[t])return ma[t];if(!Nr[t])return t;var e=Nr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hm)return ma[t]=e[n];return t}var Wm=Lo("animationend"),Vm=Lo("animationiteration"),Um=Lo("animationstart"),$m=Lo("transitionend"),Km=new Map,Lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(t,e){Km.set(t,e),kr(e,[t])}for(var ga=0;ga<Lf.length;ga++){var ya=Lf[ga],pw=ya.toLowerCase(),mw=ya[0].toUpperCase()+ya.slice(1);Gn(pw,"on"+mw)}Gn(Wm,"onAnimationEnd");Gn(Vm,"onAnimationIteration");Gn(Um,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn($m,"onTransitionEnd");Jr("onMouseEnter",["mouseout","mouseover"]);Jr("onMouseLeave",["mouseout","mouseover"]);Jr("onPointerEnter",["pointerout","pointerover"]);Jr("onPointerLeave",["pointerout","pointerover"]);kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Rf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,p1(r,e,void 0,t),t.currentTarget=null}function qm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var o=r[l],a=o.instance,u=o.currentTarget;if(o=o.listener,a!==s&&i.isPropagationStopped())break e;Rf(i,o,u),s=a}else for(l=0;l<r.length;l++){if(o=r[l],a=o.instance,u=o.currentTarget,o=o.listener,a!==s&&i.isPropagationStopped())break e;Rf(i,o,u),s=a}}}if(Wl)throw t=mu,Wl=!1,mu=null,t}function se(t,e){var n=e[Eu];n===void 0&&(n=e[Eu]=new Set);var r=t+"__bubble";n.has(r)||(Gm(e,t,2,!1),n.add(r))}function va(t,e,n){var r=0;e&&(r|=4),Gm(n,t,r,e)}var qs="_reactListening"+Math.random().toString(36).slice(2);function os(t){if(!t[qs]){t[qs]=!0,tm.forEach(function(n){n!=="selectionchange"&&(gw.has(n)||va(n,!1,t),va(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qs]||(e[qs]=!0,va("selectionchange",!1,e))}}function Gm(t,e,n,r){switch(Dm(e)){case 1:var i=N1;break;case 4:i=D1;break;default:i=Yh}n=i.bind(null,e,n,t),i=void 0,!pu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wa(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var a=l.tag;if((a===3||a===4)&&(a=l.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;l=l.return}for(;o!==null;){if(l=nr(o),l===null)return;if(a=l.tag,a===5||a===6){r=s=l;continue e}o=o.parentNode}}r=r.return}ym(function(){var u=s,h=Kh(n),c=[];e:{var f=Km.get(t);if(f!==void 0){var d=Xh,m=t;switch(t){case"keypress":if(El(n)===0)break e;case"keydown":case"keyup":d=K1;break;case"focusin":m="focus",d=fa;break;case"focusout":m="blur",d=fa;break;case"beforeblur":case"afterblur":d=fa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=R1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Q1;break;case Wm:case Vm:case Um:d=F1;break;case $m:d=J1;break;case"scroll":d=P1;break;case"wheel":d=Z1;break;case"copy":case"cut":case"paste":d=z1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Af}var v=(e&4)!==0,k=!v&&t==="scroll",p=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,y;g!==null;){y=g;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,p!==null&&(x=ts(g,p),x!=null&&v.push(as(g,x,y)))),k)break;g=g.return}0<v.length&&(f=new d(f,m,null,n,h),c.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==fu&&(m=n.relatedTarget||n.fromElement)&&(nr(m)||m[dn]))break e;if((d||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,d?(m=n.relatedTarget||n.toElement,d=u,m=m?nr(m):null,m!==null&&(k=xr(m),m!==k||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=u),d!==m)){if(v=Sf,x="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Af,x="onPointerLeave",p="onPointerEnter",g="pointer"),k=d==null?f:Dr(d),y=m==null?f:Dr(m),f=new v(x,g+"leave",d,n,h),f.target=k,f.relatedTarget=y,x=null,nr(h)===u&&(v=new v(p,g+"enter",m,n,h),v.target=y,v.relatedTarget=k,x=v),k=x,d&&m)t:{for(v=d,p=m,g=0,y=v;y;y=Sr(y))g++;for(y=0,x=p;x;x=Sr(x))y++;for(;0<g-y;)v=Sr(v),g--;for(;0<y-g;)p=Sr(p),y--;for(;g--;){if(v===p||p!==null&&v===p.alternate)break t;v=Sr(v),p=Sr(p)}v=null}else v=null;d!==null&&Bf(c,f,d,v,!1),m!==null&&k!==null&&Bf(c,k,m,v,!0)}}e:{if(f=u?Dr(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var S=lw;else if(Mf(f))if(Fm)S=hw;else{S=aw;var A=ow}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=uw);if(S&&(S=S(t,u))){Im(c,S,n,h);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&ou(f,"number",f.value)}switch(A=u?Dr(u):window,t){case"focusin":(Mf(A)||A.contentEditable==="true")&&(Or=A,wu=u,Hi=null);break;case"focusout":Hi=wu=Or=null;break;case"mousedown":ku=!0;break;case"contextmenu":case"mouseup":case"dragend":ku=!1,Pf(c,n,h);break;case"selectionchange":if(dw)break;case"keydown":case"keyup":Pf(c,n,h)}var C;if(ec)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Tr?Rm(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(Lm&&n.locale!=="ko"&&(Tr||O!=="onCompositionStart"?O==="onCompositionEnd"&&Tr&&(C=Pm()):(bn=h,Jh="value"in bn?bn.value:bn.textContent,Tr=!0)),A=ql(u,O),0<A.length&&(O=new Cf(O,t,null,n,h),c.push({event:O,listeners:A}),C?O.data=C:(C=Bm(n),C!==null&&(O.data=C)))),(C=tw?nw(t,n):rw(t,n))&&(u=ql(u,"onBeforeInput"),0<u.length&&(h=new Cf("onBeforeInput","beforeinput",null,n,h),c.push({event:h,listeners:u}),h.data=C))}qm(c,e)})}function as(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ql(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ts(t,n),s!=null&&r.unshift(as(t,s,i)),s=ts(t,e),s!=null&&r.push(as(t,s,i))),t=t.return}return r}function Sr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bf(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var o=n,a=o.alternate,u=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&u!==null&&(o=u,i?(a=ts(n,s),a!=null&&l.unshift(as(n,a,o))):i||(a=ts(n,s),a!=null&&l.push(as(n,a,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var yw=/\r\n?/g,vw=/\u0000|\uFFFD/g;function If(t){return(typeof t=="string"?t:""+t).replace(yw,`
`).replace(vw,"")}function Gs(t,e,n){if(e=If(e),If(t)!==e&&n)throw Error(M(425))}function Gl(){}var xu=null,Su=null;function Cu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Au=typeof setTimeout=="function"?setTimeout:void 0,ww=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,kw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(t){return Ff.resolve(null).then(t).catch(xw)}:Au;function xw(t){setTimeout(function(){throw t})}function ka(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),is(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);is(e)}function Rn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var di=Math.random().toString(36).slice(2),Gt="__reactFiber$"+di,us="__reactProps$"+di,dn="__reactContainer$"+di,Eu="__reactEvents$"+di,Sw="__reactListeners$"+di,Cw="__reactHandles$"+di;function nr(t){var e=t[Gt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dn]||n[Gt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jf(t);t!==null;){if(n=t[Gt])return n;t=jf(t)}return e}t=n,n=t.parentNode}return null}function Ns(t){return t=t[Gt]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Ro(t){return t[us]||null}var bu=[],Pr=-1;function Qn(t){return{current:t}}function oe(t){0>Pr||(t.current=bu[Pr],bu[Pr]=null,Pr--)}function ne(t,e){Pr++,bu[Pr]=t.current,t.current=e}var Hn={},He=Qn(Hn),Ze=Qn(!1),hr=Hn;function Xr(t,e){var n=t.type.contextTypes;if(!n)return Hn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function et(t){return t=t.childContextTypes,t!=null}function Ql(){oe(Ze),oe(He)}function zf(t,e,n){if(He.current!==Hn)throw Error(M(168));ne(He,e),ne(Ze,n)}function Qm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,o1(t)||"Unknown",i));return fe({},n,r)}function Yl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hn,hr=He.current,ne(He,t),ne(Ze,Ze.current),!0}function _f(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=Qm(t,e,hr),r.__reactInternalMemoizedMergedChildContext=t,oe(Ze),oe(He),ne(He,t)):oe(Ze),ne(Ze,n)}var sn=null,Bo=!1,xa=!1;function Ym(t){sn===null?sn=[t]:sn.push(t)}function Aw(t){Bo=!0,Ym(t)}function Yn(){if(!xa&&sn!==null){xa=!0;var t=0,e=X;try{var n=sn;for(X=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}sn=null,Bo=!1}catch(i){throw sn!==null&&(sn=sn.slice(t+1)),xm(qh,Yn),i}finally{X=e,xa=!1}}return null}var Lr=[],Rr=0,Jl=null,Xl=0,mt=[],gt=0,cr=null,on=1,an="";function Zn(t,e){Lr[Rr++]=Xl,Lr[Rr++]=Jl,Jl=t,Xl=e}function Jm(t,e,n){mt[gt++]=on,mt[gt++]=an,mt[gt++]=cr,cr=t;var r=on;t=an;var i=32-Rt(r)-1;r&=~(1<<i),n+=1;var s=32-Rt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,on=1<<32-Rt(e)+i|n<<i|r,an=s+t}else on=1<<s|n<<i|r,an=t}function nc(t){t.return!==null&&(Zn(t,1),Jm(t,1,0))}function rc(t){for(;t===Jl;)Jl=Lr[--Rr],Lr[Rr]=null,Xl=Lr[--Rr],Lr[Rr]=null;for(;t===cr;)cr=mt[--gt],mt[gt]=null,an=mt[--gt],mt[gt]=null,on=mt[--gt],mt[gt]=null}var ut=null,at=null,ae=!1,Pt=null;function Xm(t,e){var n=vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ut=t,at=Rn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ut=t,at=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cr!==null?{id:on,overflow:an}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ut=t,at=null,!0):!1;default:return!1}}function Mu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tu(t){if(ae){var e=at;if(e){var n=e;if(!Hf(t,e)){if(Mu(t))throw Error(M(418));e=Rn(n.nextSibling);var r=ut;e&&Hf(t,e)?Xm(r,n):(t.flags=t.flags&-4097|2,ae=!1,ut=t)}}else{if(Mu(t))throw Error(M(418));t.flags=t.flags&-4097|2,ae=!1,ut=t}}}function Wf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ut=t}function Qs(t){if(t!==ut)return!1;if(!ae)return Wf(t),ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cu(t.type,t.memoizedProps)),e&&(e=at)){if(Mu(t))throw Zm(),Error(M(418));for(;e;)Xm(t,e),e=Rn(e.nextSibling)}if(Wf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){at=Rn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}at=null}}else at=ut?Rn(t.stateNode.nextSibling):null;return!0}function Zm(){for(var t=at;t;)t=Rn(t.nextSibling)}function Zr(){at=ut=null,ae=!1}function ic(t){Pt===null?Pt=[t]:Pt.push(t)}var Ew=yn.ReactCurrentBatchConfig;function Si(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var o=i.refs;l===null?delete o[s]:o[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Ys(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vf(t){var e=t._init;return e(t._payload)}function eg(t){function e(p,g){if(t){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=jn(p,g),p.index=0,p.sibling=null,p}function s(p,g,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=2,g):y):(p.flags|=2,g)):(p.flags|=1048576,g)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,g,y,x){return g===null||g.tag!==6?(g=Ta(y,p.mode,x),g.return=p,g):(g=i(g,y),g.return=p,g)}function a(p,g,y,x){var S=y.type;return S===Mr?h(p,g,y.props.children,x,y.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===wn&&Vf(S)===g.type)?(x=i(g,y.props),x.ref=Si(p,g,y),x.return=p,x):(x=Pl(y.type,y.key,y.props,null,p.mode,x),x.ref=Si(p,g,y),x.return=p,x)}function u(p,g,y,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Oa(y,p.mode,x),g.return=p,g):(g=i(g,y.children||[]),g.return=p,g)}function h(p,g,y,x,S){return g===null||g.tag!==7?(g=ar(y,p.mode,x,S),g.return=p,g):(g=i(g,y),g.return=p,g)}function c(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ta(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case zs:return y=Pl(g.type,g.key,g.props,null,p.mode,y),y.ref=Si(p,null,g),y.return=p,y;case br:return g=Oa(g,p.mode,y),g.return=p,g;case wn:var x=g._init;return c(p,x(g._payload),y)}if(Di(g)||yi(g))return g=ar(g,p.mode,y,null),g.return=p,g;Ys(p,g)}return null}function f(p,g,y,x){var S=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:o(p,g,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case zs:return y.key===S?a(p,g,y,x):null;case br:return y.key===S?u(p,g,y,x):null;case wn:return S=y._init,f(p,g,S(y._payload),x)}if(Di(y)||yi(y))return S!==null?null:h(p,g,y,x,null);Ys(p,y)}return null}function d(p,g,y,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(y)||null,o(g,p,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zs:return p=p.get(x.key===null?y:x.key)||null,a(g,p,x,S);case br:return p=p.get(x.key===null?y:x.key)||null,u(g,p,x,S);case wn:var A=x._init;return d(p,g,y,A(x._payload),S)}if(Di(x)||yi(x))return p=p.get(y)||null,h(g,p,x,S,null);Ys(g,x)}return null}function m(p,g,y,x){for(var S=null,A=null,C=g,O=g=0,F=null;C!==null&&O<y.length;O++){C.index>O?(F=C,C=null):F=C.sibling;var R=f(p,C,y[O],x);if(R===null){C===null&&(C=F);break}t&&C&&R.alternate===null&&e(p,C),g=s(R,g,O),A===null?S=R:A.sibling=R,A=R,C=F}if(O===y.length)return n(p,C),ae&&Zn(p,O),S;if(C===null){for(;O<y.length;O++)C=c(p,y[O],x),C!==null&&(g=s(C,g,O),A===null?S=C:A.sibling=C,A=C);return ae&&Zn(p,O),S}for(C=r(p,C);O<y.length;O++)F=d(C,p,O,y[O],x),F!==null&&(t&&F.alternate!==null&&C.delete(F.key===null?O:F.key),g=s(F,g,O),A===null?S=F:A.sibling=F,A=F);return t&&C.forEach(function(H){return e(p,H)}),ae&&Zn(p,O),S}function v(p,g,y,x){var S=yi(y);if(typeof S!="function")throw Error(M(150));if(y=S.call(y),y==null)throw Error(M(151));for(var A=S=null,C=g,O=g=0,F=null,R=y.next();C!==null&&!R.done;O++,R=y.next()){C.index>O?(F=C,C=null):F=C.sibling;var H=f(p,C,R.value,x);if(H===null){C===null&&(C=F);break}t&&C&&H.alternate===null&&e(p,C),g=s(H,g,O),A===null?S=H:A.sibling=H,A=H,C=F}if(R.done)return n(p,C),ae&&Zn(p,O),S;if(C===null){for(;!R.done;O++,R=y.next())R=c(p,R.value,x),R!==null&&(g=s(R,g,O),A===null?S=R:A.sibling=R,A=R);return ae&&Zn(p,O),S}for(C=r(p,C);!R.done;O++,R=y.next())R=d(C,p,O,R.value,x),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?O:R.key),g=s(R,g,O),A===null?S=R:A.sibling=R,A=R);return t&&C.forEach(function(z){return e(p,z)}),ae&&Zn(p,O),S}function k(p,g,y,x){if(typeof y=="object"&&y!==null&&y.type===Mr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case zs:e:{for(var S=y.key,A=g;A!==null;){if(A.key===S){if(S=y.type,S===Mr){if(A.tag===7){n(p,A.sibling),g=i(A,y.props.children),g.return=p,p=g;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===wn&&Vf(S)===A.type){n(p,A.sibling),g=i(A,y.props),g.ref=Si(p,A,y),g.return=p,p=g;break e}n(p,A);break}else e(p,A);A=A.sibling}y.type===Mr?(g=ar(y.props.children,p.mode,x,y.key),g.return=p,p=g):(x=Pl(y.type,y.key,y.props,null,p.mode,x),x.ref=Si(p,g,y),x.return=p,p=x)}return l(p);case br:e:{for(A=y.key;g!==null;){if(g.key===A)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(p,g.sibling),g=i(g,y.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Oa(y,p.mode,x),g.return=p,p=g}return l(p);case wn:return A=y._init,k(p,g,A(y._payload),x)}if(Di(y))return m(p,g,y,x);if(yi(y))return v(p,g,y,x);Ys(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(p,g.sibling),g=i(g,y),g.return=p,p=g):(n(p,g),g=Ta(y,p.mode,x),g.return=p,p=g),l(p)):n(p,g)}return k}var ei=eg(!0),tg=eg(!1),Zl=Qn(null),eo=null,Br=null,sc=null;function lc(){sc=Br=eo=null}function oc(t){var e=Zl.current;oe(Zl),t._currentValue=e}function Ou(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $r(t,e){eo=t,sc=Br=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xe=!0),t.firstContext=null)}function Ct(t){var e=t._currentValue;if(sc!==t)if(t={context:t,memoizedValue:e,next:null},Br===null){if(eo===null)throw Error(M(308));Br=t,eo.dependencies={lanes:0,firstContext:t}}else Br=Br.next=t;return e}var rr=null;function ac(t){rr===null?rr=[t]:rr.push(t)}function ng(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ac(e)):(n.next=i.next,i.next=n),e.interleaved=n,pn(t,r)}function pn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kn=!1;function uc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,G&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,pn(t,n)}return i=r.interleaved,i===null?(e.next=e,ac(r)):(e.next=i.next,i.next=e),r.interleaved=e,pn(t,n)}function bl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gh(t,n)}}function Uf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function to(t,e,n,r){var i=t.updateQueue;kn=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var a=o,u=a.next;a.next=null,l===null?s=u:l.next=u,l=a;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;l=0,h=u=a=null,o=s;do{var f=o.lane,d=o.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,v=o;switch(f=e,d=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){c=m.call(d,c,f);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(d,c,f):m,f==null)break e;c=fe({},c,f);break e;case 2:kn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=d,a=c):h=h.next=d,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);dr|=l,t.lanes=l,t.memoizedState=c}}function $f(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var Ds={},en=Qn(Ds),hs=Qn(Ds),cs=Qn(Ds);function ir(t){if(t===Ds)throw Error(M(174));return t}function hc(t,e){switch(ne(cs,e),ne(hs,t),ne(en,Ds),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uu(e,t)}oe(en),ne(en,e)}function ti(){oe(en),oe(hs),oe(cs)}function ig(t){ir(cs.current);var e=ir(en.current),n=uu(e,t.type);e!==n&&(ne(hs,t),ne(en,n))}function cc(t){hs.current===t&&(oe(en),oe(hs))}var ue=Qn(0);function no(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sa=[];function fc(){for(var t=0;t<Sa.length;t++)Sa[t]._workInProgressVersionPrimary=null;Sa.length=0}var Ml=yn.ReactCurrentDispatcher,Ca=yn.ReactCurrentBatchConfig,fr=0,ce=null,ke=null,Ce=null,ro=!1,Wi=!1,fs=0,bw=0;function Be(){throw Error(M(321))}function dc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!It(t[n],e[n]))return!1;return!0}function pc(t,e,n,r,i,s){if(fr=s,ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ml.current=t===null||t.memoizedState===null?Nw:Dw,t=n(r,i),Wi){s=0;do{if(Wi=!1,fs=0,25<=s)throw Error(M(301));s+=1,Ce=ke=null,e.updateQueue=null,Ml.current=Pw,t=n(r,i)}while(Wi)}if(Ml.current=io,e=ke!==null&&ke.next!==null,fr=0,Ce=ke=ce=null,ro=!1,e)throw Error(M(300));return t}function mc(){var t=fs!==0;return fs=0,t}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?ce.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function At(){if(ke===null){var t=ce.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Ce===null?ce.memoizedState:Ce.next;if(e!==null)Ce=e,ke=t;else{if(t===null)throw Error(M(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Ce===null?ce.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function ds(t,e){return typeof e=="function"?e(t):e}function Aa(t){var e=At(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=l=null,a=null,u=s;do{var h=u.lane;if((fr&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(o=a=c,l=r):a=a.next=c,ce.lanes|=h,dr|=h}u=u.next}while(u!==null&&u!==s);a===null?l=r:a.next=o,It(r,e.memoizedState)||(Xe=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ce.lanes|=s,dr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ea(t){var e=At(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);It(s,e.memoizedState)||(Xe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function sg(){}function lg(t,e){var n=ce,r=At(),i=e(),s=!It(r.memoizedState,i);if(s&&(r.memoizedState=i,Xe=!0),r=r.queue,gc(ug.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,ps(9,ag.bind(null,n,r,i,e),void 0,null),Ee===null)throw Error(M(349));fr&30||og(n,e,i)}return i}function og(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ag(t,e,n,r){e.value=n,e.getSnapshot=r,hg(e)&&cg(t)}function ug(t,e,n){return n(function(){hg(e)&&cg(t)})}function hg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!It(t,n)}catch{return!0}}function cg(t){var e=pn(t,1);e!==null&&Bt(e,t,1,-1)}function Kf(t){var e=qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:t},e.queue=t,t=t.dispatch=Ow.bind(null,ce,t),[e.memoizedState,t]}function ps(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fg(){return At().memoizedState}function Tl(t,e,n,r){var i=qt();ce.flags|=t,i.memoizedState=ps(1|e,n,void 0,r===void 0?null:r)}function Io(t,e,n,r){var i=At();r=r===void 0?null:r;var s=void 0;if(ke!==null){var l=ke.memoizedState;if(s=l.destroy,r!==null&&dc(r,l.deps)){i.memoizedState=ps(e,n,s,r);return}}ce.flags|=t,i.memoizedState=ps(1|e,n,s,r)}function qf(t,e){return Tl(8390656,8,t,e)}function gc(t,e){return Io(2048,8,t,e)}function dg(t,e){return Io(4,2,t,e)}function pg(t,e){return Io(4,4,t,e)}function mg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gg(t,e,n){return n=n!=null?n.concat([t]):null,Io(4,4,mg.bind(null,e,t),n)}function yc(){}function yg(t,e){var n=At();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vg(t,e){var n=At();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function wg(t,e,n){return fr&21?(It(n,e)||(n=Am(),ce.lanes|=n,dr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xe=!0),t.memoizedState=n)}function Mw(t,e){var n=X;X=n!==0&&4>n?n:4,t(!0);var r=Ca.transition;Ca.transition={};try{t(!1),e()}finally{X=n,Ca.transition=r}}function kg(){return At().memoizedState}function Tw(t,e,n){var r=Fn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xg(t))Sg(e,n);else if(n=ng(t,e,n,r),n!==null){var i=$e();Bt(n,t,r,i),Cg(n,e,r)}}function Ow(t,e,n){var r=Fn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xg(t))Sg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,o=s(l,n);if(i.hasEagerState=!0,i.eagerState=o,It(o,l)){var a=e.interleaved;a===null?(i.next=i,ac(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=ng(t,e,i,r),n!==null&&(i=$e(),Bt(n,t,r,i),Cg(n,e,r))}}function xg(t){var e=t.alternate;return t===ce||e!==null&&e===ce}function Sg(t,e){Wi=ro=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Cg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gh(t,n)}}var io={readContext:Ct,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},Nw={readContext:Ct,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:qf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tl(4194308,4,mg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tl(4,2,t,e)},useMemo:function(t,e){var n=qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Tw.bind(null,ce,t),[r.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:Kf,useDebugValue:yc,useDeferredValue:function(t){return qt().memoizedState=t},useTransition:function(){var t=Kf(!1),e=t[0];return t=Mw.bind(null,t[1]),qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ce,i=qt();if(ae){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Ee===null)throw Error(M(349));fr&30||og(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,qf(ug.bind(null,r,s,t),[t]),r.flags|=2048,ps(9,ag.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=qt(),e=Ee.identifierPrefix;if(ae){var n=an,r=on;n=(r&~(1<<32-Rt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Dw={readContext:Ct,useCallback:yg,useContext:Ct,useEffect:gc,useImperativeHandle:gg,useInsertionEffect:dg,useLayoutEffect:pg,useMemo:vg,useReducer:Aa,useRef:fg,useState:function(){return Aa(ds)},useDebugValue:yc,useDeferredValue:function(t){var e=At();return wg(e,ke.memoizedState,t)},useTransition:function(){var t=Aa(ds)[0],e=At().memoizedState;return[t,e]},useMutableSource:sg,useSyncExternalStore:lg,useId:kg,unstable_isNewReconciler:!1},Pw={readContext:Ct,useCallback:yg,useContext:Ct,useEffect:gc,useImperativeHandle:gg,useInsertionEffect:dg,useLayoutEffect:pg,useMemo:vg,useReducer:Ea,useRef:fg,useState:function(){return Ea(ds)},useDebugValue:yc,useDeferredValue:function(t){var e=At();return ke===null?e.memoizedState=t:wg(e,ke.memoizedState,t)},useTransition:function(){var t=Ea(ds)[0],e=At().memoizedState;return[t,e]},useMutableSource:sg,useSyncExternalStore:lg,useId:kg,unstable_isNewReconciler:!1};function Nt(t,e){if(t&&t.defaultProps){e=fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fo={isMounted:function(t){return(t=t._reactInternals)?xr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$e(),i=Fn(t),s=un(r,i);s.payload=e,n!=null&&(s.callback=n),e=Bn(t,s,i),e!==null&&(Bt(e,t,i,r),bl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$e(),i=Fn(t),s=un(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Bn(t,s,i),e!==null&&(Bt(e,t,i,r),bl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$e(),r=Fn(t),i=un(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bn(t,i,r),e!==null&&(Bt(e,t,r,n),bl(e,t,r))}};function Gf(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!ls(n,r)||!ls(i,s):!0}function Ag(t,e,n){var r=!1,i=Hn,s=e.contextType;return typeof s=="object"&&s!==null?s=Ct(s):(i=et(e)?hr:He.current,r=e.contextTypes,s=(r=r!=null)?Xr(t,i):Hn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Qf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fo.enqueueReplaceState(e,e.state,null)}function Du(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},uc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ct(s):(s=et(e)?hr:He.current,i.context=Xr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Nu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Fo.enqueueReplaceState(i,i.state,null),to(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ni(t,e){try{var n="",r=e;do n+=l1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ba(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lw=typeof WeakMap=="function"?WeakMap:Map;function Eg(t,e,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lo||(lo=!0,Wu=r),Pu(t,e)},n}function bg(t,e,n){n=un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Pu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Pu(t,e),typeof r!="function"&&(In===null?In=new Set([this]):In.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Yf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Lw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=qw.bind(null,t,e,n),e.then(t,t))}function Jf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=un(-1,1),e.tag=2,Bn(n,e,1))),n.lanes|=1),t)}var Rw=yn.ReactCurrentOwner,Xe=!1;function Ue(t,e,n,r){e.child=t===null?tg(e,null,n,r):ei(e,t.child,n,r)}function Zf(t,e,n,r,i){n=n.render;var s=e.ref;return $r(e,i),r=pc(t,e,n,r,s,i),n=mc(),t!==null&&!Xe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mn(t,e,i)):(ae&&n&&nc(e),e.flags|=1,Ue(t,e,r,i),e.child)}function ed(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ec(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Mg(t,e,s,r,i)):(t=Pl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:ls,n(l,r)&&t.ref===e.ref)return mn(t,e,i)}return e.flags|=1,t=jn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Mg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ls(s,r)&&t.ref===e.ref)if(Xe=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Xe=!0);else return e.lanes=t.lanes,mn(t,e,i)}return Lu(t,e,n,r,i)}function Tg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(Fr,st),st|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ne(Fr,st),st|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ne(Fr,st),st|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ne(Fr,st),st|=r;return Ue(t,e,i,n),e.child}function Og(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lu(t,e,n,r,i){var s=et(n)?hr:He.current;return s=Xr(e,s),$r(e,i),n=pc(t,e,n,r,s,i),r=mc(),t!==null&&!Xe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mn(t,e,i)):(ae&&r&&nc(e),e.flags|=1,Ue(t,e,n,i),e.child)}function td(t,e,n,r,i){if(et(n)){var s=!0;Yl(e)}else s=!1;if($r(e,i),e.stateNode===null)Ol(t,e),Ag(e,n,r),Du(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var a=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ct(u):(u=et(n)?hr:He.current,u=Xr(e,u));var h=n.getDerivedStateFromProps,c=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";c||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||a!==u)&&Qf(e,l,r,u),kn=!1;var f=e.memoizedState;l.state=f,to(e,r,l,i),a=e.memoizedState,o!==r||f!==a||Ze.current||kn?(typeof h=="function"&&(Nu(e,n,h,r),a=e.memoizedState),(o=kn||Gf(e,n,o,r,f,a,u))?(c||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),l.props=r,l.state=a,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,rg(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Nt(e.type,o),l.props=u,c=e.pendingProps,f=l.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ct(a):(a=et(n)?hr:He.current,a=Xr(e,a));var d=n.getDerivedStateFromProps;(h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==c||f!==a)&&Qf(e,l,r,a),kn=!1,f=e.memoizedState,l.state=f,to(e,r,l,i);var m=e.memoizedState;o!==c||f!==m||Ze.current||kn?(typeof d=="function"&&(Nu(e,n,d,r),m=e.memoizedState),(u=kn||Gf(e,n,u,r,f,m,a)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,m,a),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,m,a)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),l.props=r,l.state=m,l.context=a,r=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ru(t,e,n,r,s,i)}function Ru(t,e,n,r,i,s){Og(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&_f(e,n,!1),mn(t,e,s);r=e.stateNode,Rw.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=ei(e,t.child,null,s),e.child=ei(e,null,o,s)):Ue(t,e,o,s),e.memoizedState=r.state,i&&_f(e,n,!0),e.child}function Ng(t){var e=t.stateNode;e.pendingContext?zf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zf(t,e.context,!1),hc(t,e.containerInfo)}function nd(t,e,n,r,i){return Zr(),ic(i),e.flags|=256,Ue(t,e,n,r),e.child}var Bu={dehydrated:null,treeContext:null,retryLane:0};function Iu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dg(t,e,n){var r=e.pendingProps,i=ue.current,s=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ne(ue,i&1),t===null)return Tu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=_o(l,r,0,null),t=ar(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Iu(n),e.memoizedState=Bu,t):vc(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Bw(t,e,l,r,o,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,o=i.sibling;var a={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=jn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=jn(o,s):(s=ar(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?Iu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Bu,r}return s=t.child,t=s.sibling,r=jn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vc(t,e){return e=_o({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Js(t,e,n,r){return r!==null&&ic(r),ei(e,t.child,null,n),t=vc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Bw(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=ba(Error(M(422))),Js(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=_o({mode:"visible",children:r.children},i,0,null),s=ar(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ei(e,t.child,null,l),e.child.memoizedState=Iu(l),e.memoizedState=Bu,s);if(!(e.mode&1))return Js(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(M(419)),r=ba(s,r,void 0),Js(t,e,l,r)}if(o=(l&t.childLanes)!==0,Xe||o){if(r=Ee,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,pn(t,i),Bt(r,t,i,-1))}return Ac(),r=ba(Error(M(421))),Js(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Gw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,at=Rn(i.nextSibling),ut=e,ae=!0,Pt=null,t!==null&&(mt[gt++]=on,mt[gt++]=an,mt[gt++]=cr,on=t.id,an=t.overflow,cr=e),e=vc(e,r.children),e.flags|=4096,e)}function rd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ou(t.return,e,n)}function Ma(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Pg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ue(t,e,r.children,n),r=ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rd(t,n,e);else if(t.tag===19)rd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ne(ue,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&no(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ma(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&no(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ma(e,!0,n,null,s);break;case"together":Ma(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ol(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),dr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Iw(t,e,n){switch(e.tag){case 3:Ng(e),Zr();break;case 5:ig(e);break;case 1:et(e.type)&&Yl(e);break;case 4:hc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ne(Zl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ne(ue,ue.current&1),e.flags|=128,null):n&e.child.childLanes?Dg(t,e,n):(ne(ue,ue.current&1),t=mn(t,e,n),t!==null?t.sibling:null);ne(ue,ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Pg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ne(ue,ue.current),r)break;return null;case 22:case 23:return e.lanes=0,Tg(t,e,n)}return mn(t,e,n)}var Lg,Fu,Rg,Bg;Lg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fu=function(){};Rg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ir(en.current);var s=null;switch(n){case"input":i=su(t,i),r=su(t,r),s=[];break;case"select":i=fe({},i,{value:void 0}),r=fe({},r,{value:void 0}),s=[];break;case"textarea":i=au(t,i),r=au(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gl)}hu(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==o&&(a!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||a&&a.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in a)a.hasOwnProperty(l)&&o[l]!==a[l]&&(n||(n={}),n[l]=a[l])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&se("scroll",t),s||o===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Bg=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ci(t,e){if(!ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fw(t,e,n){var r=e.pendingProps;switch(rc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return et(e.type)&&Ql(),Ie(e),null;case 3:return r=e.stateNode,ti(),oe(Ze),oe(He),fc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pt!==null&&($u(Pt),Pt=null))),Fu(t,e),Ie(e),null;case 5:cc(e);var i=ir(cs.current);if(n=e.type,t!==null&&e.stateNode!=null)Rg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ie(e),null}if(t=ir(en.current),Qs(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Gt]=e,r[us]=s,t=(e.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(i=0;i<Li.length;i++)se(Li[i],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":ff(r,s),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},se("invalid",r);break;case"textarea":pf(r,s),se("invalid",r)}hu(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var o=s[l];l==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Gs(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Gs(r.textContent,o,t),i=["children",""+o]):Zi.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&se("scroll",r)}switch(n){case"input":_s(r),df(r,s,!0);break;case"textarea":_s(r),mf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=um(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Gt]=e,t[us]=r,Lg(t,e,!1,!1),e.stateNode=t;e:{switch(l=cu(n,r),n){case"dialog":se("cancel",t),se("close",t),i=r;break;case"iframe":case"object":case"embed":se("load",t),i=r;break;case"video":case"audio":for(i=0;i<Li.length;i++)se(Li[i],t);i=r;break;case"source":se("error",t),i=r;break;case"img":case"image":case"link":se("error",t),se("load",t),i=r;break;case"details":se("toggle",t),i=r;break;case"input":ff(t,r),i=su(t,r),se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=fe({},r,{value:void 0}),se("invalid",t);break;case"textarea":pf(t,r),i=au(t,r),se("invalid",t);break;default:i=r}hu(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?fm(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&hm(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&es(t,a):typeof a=="number"&&es(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zi.hasOwnProperty(s)?a!=null&&s==="onScroll"&&se("scroll",t):a!=null&&Wh(t,s,a,l))}switch(n){case"input":_s(t),df(t,r,!1);break;case"textarea":_s(t),mf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_n(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Hr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Hr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)Bg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=ir(cs.current),ir(en.current),Qs(e)){if(r=e.stateNode,n=e.memoizedProps,r[Gt]=e,(s=r.nodeValue!==n)&&(t=ut,t!==null))switch(t.tag){case 3:Gs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gs(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gt]=e,e.stateNode=r}return Ie(e),null;case 13:if(oe(ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ae&&at!==null&&e.mode&1&&!(e.flags&128))Zm(),Zr(),e.flags|=98560,s=!1;else if(s=Qs(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[Gt]=e}else Zr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),s=!1}else Pt!==null&&($u(Pt),Pt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ue.current&1?xe===0&&(xe=3):Ac())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return ti(),Fu(t,e),t===null&&os(e.stateNode.containerInfo),Ie(e),null;case 10:return oc(e.type._context),Ie(e),null;case 17:return et(e.type)&&Ql(),Ie(e),null;case 19:if(oe(ue),s=e.memoizedState,s===null)return Ie(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)Ci(s,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=no(t),l!==null){for(e.flags|=128,Ci(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ne(ue,ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&ye()>ri&&(e.flags|=128,r=!0,Ci(s,!1),e.lanes=4194304)}else{if(!r)if(t=no(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ci(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!ae)return Ie(e),null}else 2*ye()-s.renderingStartTime>ri&&n!==1073741824&&(e.flags|=128,r=!0,Ci(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ye(),e.sibling=null,n=ue.current,ne(ue,r?n&1|2:n&1),e):(Ie(e),null);case 22:case 23:return Cc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?st&1073741824&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function jw(t,e){switch(rc(e),e.tag){case 1:return et(e.type)&&Ql(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ti(),oe(Ze),oe(He),fc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cc(e),null;case 13:if(oe(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Zr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(ue),null;case 4:return ti(),null;case 10:return oc(e.type._context),null;case 22:case 23:return Cc(),null;case 24:return null;default:return null}}var Xs=!1,je=!1,zw=typeof WeakSet=="function"?WeakSet:Set,L=null;function Ir(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){de(t,e,r)}else n.current=null}function ju(t,e,n){try{n()}catch(r){de(t,e,r)}}var id=!1;function _w(t,e){if(xu=$l,t=_m(),tc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,o=-1,a=-1,u=0,h=0,c=t,f=null;t:for(;;){for(var d;c!==n||i!==0&&c.nodeType!==3||(o=l+i),c!==s||r!==0&&c.nodeType!==3||(a=l+r),c.nodeType===3&&(l+=c.nodeValue.length),(d=c.firstChild)!==null;)f=c,c=d;for(;;){if(c===t)break t;if(f===n&&++u===i&&(o=l),f===s&&++h===r&&(a=l),(d=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=d}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Su={focusedElem:t,selectionRange:n},$l=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,k=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:Nt(e.type,v),k);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(x){de(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return m=id,id=!1,m}function Vi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ju(e,n,s)}i=i.next}while(i!==r)}}function jo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ig(t){var e=t.alternate;e!==null&&(t.alternate=null,Ig(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gt],delete e[us],delete e[Eu],delete e[Sw],delete e[Cw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fg(t){return t.tag===5||t.tag===3||t.tag===4}function sd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _u(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gl));else if(r!==4&&(t=t.child,t!==null))for(_u(t,e,n),t=t.sibling;t!==null;)_u(t,e,n),t=t.sibling}function Hu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hu(t,e,n),t=t.sibling;t!==null;)Hu(t,e,n),t=t.sibling}var be=null,Dt=!1;function vn(t,e,n){for(n=n.child;n!==null;)jg(t,e,n),n=n.sibling}function jg(t,e,n){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(No,n)}catch{}switch(n.tag){case 5:je||Ir(n,e);case 6:var r=be,i=Dt;be=null,vn(t,e,n),be=r,Dt=i,be!==null&&(Dt?(t=be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):be.removeChild(n.stateNode));break;case 18:be!==null&&(Dt?(t=be,n=n.stateNode,t.nodeType===8?ka(t.parentNode,n):t.nodeType===1&&ka(t,n),is(t)):ka(be,n.stateNode));break;case 4:r=be,i=Dt,be=n.stateNode.containerInfo,Dt=!0,vn(t,e,n),be=r,Dt=i;break;case 0:case 11:case 14:case 15:if(!je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&ju(n,e,l),i=i.next}while(i!==r)}vn(t,e,n);break;case 1:if(!je&&(Ir(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){de(n,e,o)}vn(t,e,n);break;case 21:vn(t,e,n);break;case 22:n.mode&1?(je=(r=je)||n.memoizedState!==null,vn(t,e,n),je=r):vn(t,e,n);break;default:vn(t,e,n)}}function ld(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zw),e.forEach(function(r){var i=Qw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:be=o.stateNode,Dt=!1;break e;case 3:be=o.stateNode.containerInfo,Dt=!0;break e;case 4:be=o.stateNode.containerInfo,Dt=!0;break e}o=o.return}if(be===null)throw Error(M(160));jg(s,l,i),be=null,Dt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){de(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zg(e,t),e=e.sibling}function zg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tt(e,t),Wt(t),r&4){try{Vi(3,t,t.return),jo(3,t)}catch(v){de(t,t.return,v)}try{Vi(5,t,t.return)}catch(v){de(t,t.return,v)}}break;case 1:Tt(e,t),Wt(t),r&512&&n!==null&&Ir(n,n.return);break;case 5:if(Tt(e,t),Wt(t),r&512&&n!==null&&Ir(n,n.return),t.flags&32){var i=t.stateNode;try{es(i,"")}catch(v){de(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&om(i,s),cu(o,l);var u=cu(o,s);for(l=0;l<a.length;l+=2){var h=a[l],c=a[l+1];h==="style"?fm(i,c):h==="dangerouslySetInnerHTML"?hm(i,c):h==="children"?es(i,c):Wh(i,h,c,u)}switch(o){case"input":lu(i,s);break;case"textarea":am(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Hr(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?Hr(i,!!s.multiple,s.defaultValue,!0):Hr(i,!!s.multiple,s.multiple?[]:"",!1))}i[us]=s}catch(v){de(t,t.return,v)}}break;case 6:if(Tt(e,t),Wt(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){de(t,t.return,v)}}break;case 3:if(Tt(e,t),Wt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{is(e.containerInfo)}catch(v){de(t,t.return,v)}break;case 4:Tt(e,t),Wt(t);break;case 13:Tt(e,t),Wt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xc=ye())),r&4&&ld(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(je=(u=je)||h,Tt(e,t),je=u):Tt(e,t),Wt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(L=t,h=t.child;h!==null;){for(c=L=h;L!==null;){switch(f=L,d=f.child,f.tag){case 0:case 11:case 14:case 15:Vi(4,f,f.return);break;case 1:Ir(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){de(r,n,v)}}break;case 5:Ir(f,f.return);break;case 22:if(f.memoizedState!==null){ad(c);continue}}d!==null?(d.return=f,L=d):ad(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=c.stateNode,a=c.memoizedProps.style,l=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=cm("display",l))}catch(v){de(t,t.return,v)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){de(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Tt(e,t),Wt(t),r&4&&ld(t);break;case 21:break;default:Tt(e,t),Wt(t)}}function Wt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Fg(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(es(i,""),r.flags&=-33);var s=sd(t);Hu(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,o=sd(t);_u(t,o,l);break;default:throw Error(M(161))}}catch(a){de(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hw(t,e,n){L=t,_g(t)}function _g(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var i=L,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Xs;if(!l){var o=i.alternate,a=o!==null&&o.memoizedState!==null||je;o=Xs;var u=je;if(Xs=l,(je=a)&&!u)for(L=i;L!==null;)l=L,a=l.child,l.tag===22&&l.memoizedState!==null?ud(i):a!==null?(a.return=l,L=a):ud(i);for(;s!==null;)L=s,_g(s),s=s.sibling;L=i,Xs=o,je=u}od(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,L=s):od(t)}}function od(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:je||jo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!je)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Nt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&$f(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$f(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&is(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}je||e.flags&512&&zu(e)}catch(f){de(e,e.return,f)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function ad(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function ud(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jo(4,e)}catch(a){de(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){de(e,i,a)}}var s=e.return;try{zu(e)}catch(a){de(e,s,a)}break;case 5:var l=e.return;try{zu(e)}catch(a){de(e,l,a)}}}catch(a){de(e,e.return,a)}if(e===t){L=null;break}var o=e.sibling;if(o!==null){o.return=e.return,L=o;break}L=e.return}}var Ww=Math.ceil,so=yn.ReactCurrentDispatcher,wc=yn.ReactCurrentOwner,wt=yn.ReactCurrentBatchConfig,G=0,Ee=null,we=null,Le=0,st=0,Fr=Qn(0),xe=0,ms=null,dr=0,zo=0,kc=0,Ui=null,Ye=null,xc=0,ri=1/0,rn=null,lo=!1,Wu=null,In=null,Zs=!1,Mn=null,oo=0,$i=0,Vu=null,Nl=-1,Dl=0;function $e(){return G&6?ye():Nl!==-1?Nl:Nl=ye()}function Fn(t){return t.mode&1?G&2&&Le!==0?Le&-Le:Ew.transition!==null?(Dl===0&&(Dl=Am()),Dl):(t=X,t!==0||(t=window.event,t=t===void 0?16:Dm(t.type)),t):1}function Bt(t,e,n,r){if(50<$i)throw $i=0,Vu=null,Error(M(185));Ts(t,n,r),(!(G&2)||t!==Ee)&&(t===Ee&&(!(G&2)&&(zo|=n),xe===4&&An(t,Le)),tt(t,r),n===1&&G===0&&!(e.mode&1)&&(ri=ye()+500,Bo&&Yn()))}function tt(t,e){var n=t.callbackNode;E1(t,e);var r=Ul(t,t===Ee?Le:0);if(r===0)n!==null&&vf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vf(n),e===1)t.tag===0?Aw(hd.bind(null,t)):Ym(hd.bind(null,t)),kw(function(){!(G&6)&&Yn()}),n=null;else{switch(Em(r)){case 1:n=qh;break;case 4:n=Sm;break;case 16:n=Vl;break;case 536870912:n=Cm;break;default:n=Vl}n=Gg(n,Hg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Hg(t,e){if(Nl=-1,Dl=0,G&6)throw Error(M(327));var n=t.callbackNode;if(Kr()&&t.callbackNode!==n)return null;var r=Ul(t,t===Ee?Le:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ao(t,r);else{e=r;var i=G;G|=2;var s=Vg();(Ee!==t||Le!==e)&&(rn=null,ri=ye()+500,or(t,e));do try{$w();break}catch(o){Wg(t,o)}while(!0);lc(),so.current=s,G=i,we!==null?e=0:(Ee=null,Le=0,e=xe)}if(e!==0){if(e===2&&(i=gu(t),i!==0&&(r=i,e=Uu(t,i))),e===1)throw n=ms,or(t,0),An(t,r),tt(t,ye()),n;if(e===6)An(t,r);else{if(i=t.current.alternate,!(r&30)&&!Vw(i)&&(e=ao(t,r),e===2&&(s=gu(t),s!==0&&(r=s,e=Uu(t,s))),e===1))throw n=ms,or(t,0),An(t,r),tt(t,ye()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:er(t,Ye,rn);break;case 3:if(An(t,r),(r&130023424)===r&&(e=xc+500-ye(),10<e)){if(Ul(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$e(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Au(er.bind(null,t,Ye,rn),e);break}er(t,Ye,rn);break;case 4:if(An(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Rt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ww(r/1960))-r,10<r){t.timeoutHandle=Au(er.bind(null,t,Ye,rn),r);break}er(t,Ye,rn);break;case 5:er(t,Ye,rn);break;default:throw Error(M(329))}}}return tt(t,ye()),t.callbackNode===n?Hg.bind(null,t):null}function Uu(t,e){var n=Ui;return t.current.memoizedState.isDehydrated&&(or(t,e).flags|=256),t=ao(t,e),t!==2&&(e=Ye,Ye=n,e!==null&&$u(e)),t}function $u(t){Ye===null?Ye=t:Ye.push.apply(Ye,t)}function Vw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!It(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function An(t,e){for(e&=~kc,e&=~zo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rt(e),r=1<<n;t[n]=-1,e&=~r}}function hd(t){if(G&6)throw Error(M(327));Kr();var e=Ul(t,0);if(!(e&1))return tt(t,ye()),null;var n=ao(t,e);if(t.tag!==0&&n===2){var r=gu(t);r!==0&&(e=r,n=Uu(t,r))}if(n===1)throw n=ms,or(t,0),An(t,e),tt(t,ye()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,er(t,Ye,rn),tt(t,ye()),null}function Sc(t,e){var n=G;G|=1;try{return t(e)}finally{G=n,G===0&&(ri=ye()+500,Bo&&Yn())}}function pr(t){Mn!==null&&Mn.tag===0&&!(G&6)&&Kr();var e=G;G|=1;var n=wt.transition,r=X;try{if(wt.transition=null,X=1,t)return t()}finally{X=r,wt.transition=n,G=e,!(G&6)&&Yn()}}function Cc(){st=Fr.current,oe(Fr)}function or(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ww(n)),we!==null)for(n=we.return;n!==null;){var r=n;switch(rc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ql();break;case 3:ti(),oe(Ze),oe(He),fc();break;case 5:cc(r);break;case 4:ti();break;case 13:oe(ue);break;case 19:oe(ue);break;case 10:oc(r.type._context);break;case 22:case 23:Cc()}n=n.return}if(Ee=t,we=t=jn(t.current,null),Le=st=e,xe=0,ms=null,kc=zo=dr=0,Ye=Ui=null,rr!==null){for(e=0;e<rr.length;e++)if(n=rr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}rr=null}return t}function Wg(t,e){do{var n=we;try{if(lc(),Ml.current=io,ro){for(var r=ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ro=!1}if(fr=0,Ce=ke=ce=null,Wi=!1,fs=0,wc.current=null,n===null||n.return===null){xe=1,ms=e,we=null;break}e:{var s=t,l=n.return,o=n,a=e;if(e=Le,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=o,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=Jf(l);if(d!==null){d.flags&=-257,Xf(d,l,o,s,e),d.mode&1&&Yf(s,u,e),e=d,a=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(a),e.updateQueue=v}else m.add(a);break e}else{if(!(e&1)){Yf(s,u,e),Ac();break e}a=Error(M(426))}}else if(ae&&o.mode&1){var k=Jf(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Xf(k,l,o,s,e),ic(ni(a,o));break e}}s=a=ni(a,o),xe!==4&&(xe=2),Ui===null?Ui=[s]:Ui.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=Eg(s,a,e);Uf(s,p);break e;case 1:o=a;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(In===null||!In.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=bg(s,o,e);Uf(s,x);break e}}s=s.return}while(s!==null)}$g(n)}catch(S){e=S,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function Vg(){var t=so.current;return so.current=io,t===null?io:t}function Ac(){(xe===0||xe===3||xe===2)&&(xe=4),Ee===null||!(dr&268435455)&&!(zo&268435455)||An(Ee,Le)}function ao(t,e){var n=G;G|=2;var r=Vg();(Ee!==t||Le!==e)&&(rn=null,or(t,e));do try{Uw();break}catch(i){Wg(t,i)}while(!0);if(lc(),G=n,so.current=r,we!==null)throw Error(M(261));return Ee=null,Le=0,xe}function Uw(){for(;we!==null;)Ug(we)}function $w(){for(;we!==null&&!g1();)Ug(we)}function Ug(t){var e=qg(t.alternate,t,st);t.memoizedProps=t.pendingProps,e===null?$g(t):we=e,wc.current=null}function $g(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jw(n,e),n!==null){n.flags&=32767,we=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,we=null;return}}else if(n=Fw(n,e,st),n!==null){we=n;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);xe===0&&(xe=5)}function er(t,e,n){var r=X,i=wt.transition;try{wt.transition=null,X=1,Kw(t,e,n,r)}finally{wt.transition=i,X=r}return null}function Kw(t,e,n,r){do Kr();while(Mn!==null);if(G&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(b1(t,s),t===Ee&&(we=Ee=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zs||(Zs=!0,Gg(Vl,function(){return Kr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wt.transition,wt.transition=null;var l=X;X=1;var o=G;G|=4,wc.current=null,_w(t,n),zg(n,t),fw(Su),$l=!!xu,Su=xu=null,t.current=n,Hw(n),y1(),G=o,X=l,wt.transition=s}else t.current=n;if(Zs&&(Zs=!1,Mn=t,oo=i),s=t.pendingLanes,s===0&&(In=null),k1(n.stateNode),tt(t,ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(lo)throw lo=!1,t=Wu,Wu=null,t;return oo&1&&t.tag!==0&&Kr(),s=t.pendingLanes,s&1?t===Vu?$i++:($i=0,Vu=t):$i=0,Yn(),null}function Kr(){if(Mn!==null){var t=Em(oo),e=wt.transition,n=X;try{if(wt.transition=null,X=16>t?16:t,Mn===null)var r=!1;else{if(t=Mn,Mn=null,oo=0,G&6)throw Error(M(331));var i=G;for(G|=4,L=t.current;L!==null;){var s=L,l=s.child;if(L.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var u=o[a];for(L=u;L!==null;){var h=L;switch(h.tag){case 0:case 11:case 15:Vi(8,h,s)}var c=h.child;if(c!==null)c.return=h,L=c;else for(;L!==null;){h=L;var f=h.sibling,d=h.return;if(Ig(h),h===u){L=null;break}if(f!==null){f.return=d,L=f;break}L=d}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}L=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,L=l;else e:for(;L!==null;){if(s=L,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vi(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,L=p;break e}L=s.return}}var g=t.current;for(L=g;L!==null;){l=L;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,L=y;else e:for(l=g;L!==null;){if(o=L,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:jo(9,o)}}catch(S){de(o,o.return,S)}if(o===l){L=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,L=x;break e}L=o.return}}if(G=i,Yn(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(No,t)}catch{}r=!0}return r}finally{X=n,wt.transition=e}}return!1}function cd(t,e,n){e=ni(n,e),e=Eg(t,e,1),t=Bn(t,e,1),e=$e(),t!==null&&(Ts(t,1,e),tt(t,e))}function de(t,e,n){if(t.tag===3)cd(t,t,n);else for(;e!==null;){if(e.tag===3){cd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(In===null||!In.has(r))){t=ni(n,t),t=bg(e,t,1),e=Bn(e,t,1),t=$e(),e!==null&&(Ts(e,1,t),tt(e,t));break}}e=e.return}}function qw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$e(),t.pingedLanes|=t.suspendedLanes&n,Ee===t&&(Le&n)===n&&(xe===4||xe===3&&(Le&130023424)===Le&&500>ye()-xc?or(t,0):kc|=n),tt(t,e)}function Kg(t,e){e===0&&(t.mode&1?(e=Vs,Vs<<=1,!(Vs&130023424)&&(Vs=4194304)):e=1);var n=$e();t=pn(t,e),t!==null&&(Ts(t,e,n),tt(t,n))}function Gw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Kg(t,n)}function Qw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),Kg(t,n)}var qg;qg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ze.current)Xe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xe=!1,Iw(t,e,n);Xe=!!(t.flags&131072)}else Xe=!1,ae&&e.flags&1048576&&Jm(e,Xl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ol(t,e),t=e.pendingProps;var i=Xr(e,He.current);$r(e,n),i=pc(null,e,r,t,i,n);var s=mc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(s=!0,Yl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uc(e),i.updater=Fo,e.stateNode=i,i._reactInternals=e,Du(e,r,t,n),e=Ru(null,e,r,!0,s,n)):(e.tag=0,ae&&s&&nc(e),Ue(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ol(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Jw(r),t=Nt(r,t),i){case 0:e=Lu(null,e,r,t,n);break e;case 1:e=td(null,e,r,t,n);break e;case 11:e=Zf(null,e,r,t,n);break e;case 14:e=ed(null,e,r,Nt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),Lu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),td(t,e,r,i,n);case 3:e:{if(Ng(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,rg(t,e),to(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ni(Error(M(423)),e),e=nd(t,e,r,n,i);break e}else if(r!==i){i=ni(Error(M(424)),e),e=nd(t,e,r,n,i);break e}else for(at=Rn(e.stateNode.containerInfo.firstChild),ut=e,ae=!0,Pt=null,n=tg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zr(),r===i){e=mn(t,e,n);break e}Ue(t,e,r,n)}e=e.child}return e;case 5:return ig(e),t===null&&Tu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,Cu(r,i)?l=null:s!==null&&Cu(r,s)&&(e.flags|=32),Og(t,e),Ue(t,e,l,n),e.child;case 6:return t===null&&Tu(e),null;case 13:return Dg(t,e,n);case 4:return hc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ei(e,null,r,n):Ue(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),Zf(t,e,r,i,n);case 7:return Ue(t,e,e.pendingProps,n),e.child;case 8:return Ue(t,e,e.pendingProps.children,n),e.child;case 12:return Ue(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,ne(Zl,r._currentValue),r._currentValue=l,s!==null)if(It(s.value,l)){if(s.children===i.children&&!Ze.current){e=mn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){l=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=un(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ou(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(M(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Ou(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Ue(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,$r(e,n),i=Ct(i),r=r(i),e.flags|=1,Ue(t,e,r,n),e.child;case 14:return r=e.type,i=Nt(r,e.pendingProps),i=Nt(r.type,i),ed(t,e,r,i,n);case 15:return Mg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),Ol(t,e),e.tag=1,et(r)?(t=!0,Yl(e)):t=!1,$r(e,n),Ag(e,r,i),Du(e,r,i,n),Ru(null,e,r,!0,t,n);case 19:return Pg(t,e,n);case 22:return Tg(t,e,n)}throw Error(M(156,e.tag))};function Gg(t,e){return xm(t,e)}function Yw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,e,n,r){return new Yw(t,e,n,r)}function Ec(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jw(t){if(typeof t=="function")return Ec(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uh)return 11;if(t===$h)return 14}return 2}function jn(t,e){var n=t.alternate;return n===null?(n=vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pl(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")Ec(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Mr:return ar(n.children,i,s,e);case Vh:l=8,i|=8;break;case tu:return t=vt(12,n,e,i|2),t.elementType=tu,t.lanes=s,t;case nu:return t=vt(13,n,e,i),t.elementType=nu,t.lanes=s,t;case ru:return t=vt(19,n,e,i),t.elementType=ru,t.lanes=s,t;case im:return _o(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nm:l=10;break e;case rm:l=9;break e;case Uh:l=11;break e;case $h:l=14;break e;case wn:l=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=vt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ar(t,e,n,r){return t=vt(7,t,r,e),t.lanes=n,t}function _o(t,e,n,r){return t=vt(22,t,r,e),t.elementType=im,t.lanes=n,t.stateNode={isHidden:!1},t}function Ta(t,e,n){return t=vt(6,t,null,e),t.lanes=n,t}function Oa(t,e,n){return e=vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Xw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ua(0),this.expirationTimes=ua(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ua(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bc(t,e,n,r,i,s,l,o,a){return t=new Xw(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uc(s),t}function Zw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:br,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Qg(t){if(!t)return Hn;t=t._reactInternals;e:{if(xr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(et(n))return Qm(t,n,e)}return e}function Yg(t,e,n,r,i,s,l,o,a){return t=bc(n,r,!0,t,i,s,l,o,a),t.context=Qg(null),n=t.current,r=$e(),i=Fn(n),s=un(r,i),s.callback=e??null,Bn(n,s,i),t.current.lanes=i,Ts(t,i,r),tt(t,r),t}function Ho(t,e,n,r){var i=e.current,s=$e(),l=Fn(i);return n=Qg(n),e.context===null?e.context=n:e.pendingContext=n,e=un(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bn(i,e,l),t!==null&&(Bt(t,i,l,s),bl(t,i,l)),l}function uo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mc(t,e){fd(t,e),(t=t.alternate)&&fd(t,e)}function ek(){return null}var Jg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tc(t){this._internalRoot=t}Wo.prototype.render=Tc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Ho(t,e,null,null)};Wo.prototype.unmount=Tc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pr(function(){Ho(null,t,null,null)}),e[dn]=null}};function Wo(t){this._internalRoot=t}Wo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cn.length&&e!==0&&e<Cn[n].priority;n++);Cn.splice(n,0,t),n===0&&Nm(t)}};function Oc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dd(){}function tk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=uo(l);s.call(u)}}var l=Yg(e,r,t,0,null,!1,!1,"",dd);return t._reactRootContainer=l,t[dn]=l.current,os(t.nodeType===8?t.parentNode:t),pr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=uo(a);o.call(u)}}var a=bc(t,0,!1,null,null,!1,!1,"",dd);return t._reactRootContainer=a,t[dn]=a.current,os(t.nodeType===8?t.parentNode:t),pr(function(){Ho(e,a,n,r)}),a}function Uo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var o=i;i=function(){var a=uo(l);o.call(a)}}Ho(e,l,t,i)}else l=tk(n,e,t,i,r);return uo(l)}bm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pi(e.pendingLanes);n!==0&&(Gh(e,n|1),tt(e,ye()),!(G&6)&&(ri=ye()+500,Yn()))}break;case 13:pr(function(){var r=pn(t,1);if(r!==null){var i=$e();Bt(r,t,1,i)}}),Mc(t,1)}};Qh=function(t){if(t.tag===13){var e=pn(t,134217728);if(e!==null){var n=$e();Bt(e,t,134217728,n)}Mc(t,134217728)}};Mm=function(t){if(t.tag===13){var e=Fn(t),n=pn(t,e);if(n!==null){var r=$e();Bt(n,t,e,r)}Mc(t,e)}};Tm=function(){return X};Om=function(t,e){var n=X;try{return X=t,e()}finally{X=n}};du=function(t,e,n){switch(e){case"input":if(lu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ro(r);if(!i)throw Error(M(90));lm(r),lu(r,i)}}}break;case"textarea":am(t,n);break;case"select":e=n.value,e!=null&&Hr(t,!!n.multiple,e,!1)}};mm=Sc;gm=pr;var nk={usingClientEntryPoint:!1,Events:[Ns,Dr,Ro,dm,pm,Sc]},Ai={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rk={bundleType:Ai.bundleType,version:Ai.version,rendererPackageName:Ai.rendererPackageName,rendererConfig:Ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wm(t),t===null?null:t.stateNode},findFiberByHostInstance:Ai.findFiberByHostInstance||ek,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{No=el.inject(rk),Zt=el}catch{}}dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nk;dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oc(e))throw Error(M(200));return Zw(t,e,null,n)};dt.createRoot=function(t,e){if(!Oc(t))throw Error(M(299));var n=!1,r="",i=Jg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bc(t,1,!1,null,null,n,!1,r,i),t[dn]=e.current,os(t.nodeType===8?t.parentNode:t),new Tc(e)};dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=wm(e),t=t===null?null:t.stateNode,t};dt.flushSync=function(t){return pr(t)};dt.hydrate=function(t,e,n){if(!Vo(e))throw Error(M(200));return Uo(null,t,e,!0,n)};dt.hydrateRoot=function(t,e,n){if(!Oc(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=Jg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Yg(e,null,t,1,n??null,i,!1,s,l),t[dn]=e.current,os(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Wo(e)};dt.render=function(t,e,n){if(!Vo(e))throw Error(M(200));return Uo(null,t,e,!1,n)};dt.unmountComponentAtNode=function(t){if(!Vo(t))throw Error(M(40));return t._reactRootContainer?(pr(function(){Uo(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1};dt.unstable_batchedUpdates=Sc;dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vo(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Uo(t,e,n,!1,r)};dt.version="18.3.1-next-f1338f8080-20240426";function Xg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xg)}catch(t){console.error(t)}}Xg(),Xp.exports=dt;var ik=Xp.exports,pd=ik;Za.createRoot=pd.createRoot,Za.hydrateRoot=pd.hydrateRoot;let Ku=[],Zg=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?Zg:Ku).push(n=n+t[e])})();function sk(t){if(t<768)return!1;for(let e=0,n=Ku.length;;){let r=e+n>>1;if(t<Ku[r])n=r;else if(t>=Zg[r])e=r+1;else return!0;if(e==n)return!1}}function md(t){return t>=127462&&t<=127487}const gd=8205;function lk(t,e,n=!0,r=!0){return(n?e0:ok)(t,e,r)}function e0(t,e,n){if(e==t.length)return e;e&&t0(t.charCodeAt(e))&&n0(t.charCodeAt(e-1))&&e--;let r=Na(t,e);for(e+=yd(r);e<t.length;){let i=Na(t,e);if(r==gd||i==gd||n&&sk(i))e+=yd(i),r=i;else if(md(i)){let s=0,l=e-2;for(;l>=0&&md(Na(t,l));)s++,l-=2;if(s%2==0)break;e+=2}else break}return e}function ok(t,e,n){for(;e>0;){let r=e0(t,e-2,n);if(r<e)return r;e--}return 0}function Na(t,e){let n=t.charCodeAt(e);if(!n0(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return t0(r)?(n-55296<<10)+(r-56320)+65536:n}function t0(t){return t>=56320&&t<57344}function n0(t){return t>=55296&&t<56320}function yd(t){return t<65536?1:2}class q{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=ii(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Qt.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=ii(this,e,n);let r=[];return this.decompose(e,n,r,0),Qt.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Ki(this),s=new Ki(e);for(let l=n,o=n;;){if(i.next(l),s.next(l),l=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new Ki(this,e)}iterRange(e,n=this.length){return new r0(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new i0(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?q.empty:e.length<=32?new ge(e):Qt.from(ge.split(e,[]))}}class ge extends q{constructor(e,n=ak(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.text[s],o=i+l.length;if((n?r:o)>=e)return new uk(i,o,r,l);i=o+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new ge(vd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let l=r.pop(),o=Ll(s.text,l.text.slice(),0,s.length);if(o.length<=32)r.push(new ge(o,l.length+s.length));else{let a=o.length>>1;r.push(new ge(o.slice(0,a)),new ge(o.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof ge))return super.replace(e,n,r);[e,n]=ii(this,e,n);let i=Ll(this.text,Ll(r.text,vd(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new ge(i,s):Qt.from(ge.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=ii(this,e,n);let i="";for(let s=0,l=0;s<=n&&l<this.text.length;l++){let o=this.text[l],a=s+o.length;s>e&&l&&(i+=r),e<a&&n>s&&(i+=o.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new ge(r,i)),r=[],i=-1);return i>-1&&n.push(new ge(r,i)),n}}class Qt extends q{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let l=this.children[s],o=i+l.length,a=r+l.lines-1;if((n?a:o)>=e)return l.lineInner(e,n,r,i);i=o+1,r=a+1}}decompose(e,n,r,i){for(let s=0,l=0;l<=n&&s<this.children.length;s++){let o=this.children[s],a=l+o.length;if(e<=a&&n>=l){let u=i&((l<=e?1:0)|(a>=n?2:0));l>=e&&a<=n&&!u?r.push(o):o.decompose(e-l,n-l,r,u)}l=a+1}}replace(e,n,r){if([e,n]=ii(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],o=s+l.length;if(e>=s&&n<=o){let a=l.replace(e-s,n-s,r),u=this.lines-l.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let h=this.children.slice();return h[i]=a,new Qt(h,this.length-(n-e)+r.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=ii(this,e,n);let i="";for(let s=0,l=0;s<this.children.length&&l<=n;s++){let o=this.children[s],a=l+o.length;l>e&&s&&(i+=r),e<a&&n>l&&(i+=o.sliceString(e-l,n-l,r)),l=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Qt))return 0;let r=0,[i,s,l,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==l||s==o)return r;let a=this.children[i],u=e.children[s];if(a!=u)return r+a.scanIdentical(u,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let m of e)m.flatten(d);return new ge(d,n)}let i=Math.max(32,r>>5),s=i<<1,l=i>>1,o=[],a=0,u=-1,h=[];function c(d){let m;if(d.lines>s&&d instanceof Qt)for(let v of d.children)c(v);else d.lines>l&&(a>l||!a)?(f(),o.push(d)):d instanceof ge&&a&&(m=h[h.length-1])instanceof ge&&d.lines+m.lines<=32?(a+=d.lines,u+=d.length+1,h[h.length-1]=new ge(m.text.concat(d.text),m.length+1+d.length)):(a+d.lines>i&&f(),a+=d.lines,u+=d.length+1,h.push(d))}function f(){a!=0&&(o.push(h.length==1?h[0]:Qt.from(h,u)),u=-1,a=h.length=0)}for(let d of e)c(d);return f(),o.length==1?o[0]:new Qt(o,n)}}q.empty=new ge([""],0);function ak(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Ll(t,e,n=0,r=1e9){for(let i=0,s=0,l=!0;s<t.length&&i<=r;s++){let o=t[s],a=i+o.length;a>=n&&(a>r&&(o=o.slice(0,r-i)),i<n&&(o=o.slice(n-i)),l?(e[e.length-1]+=o,l=!1):e.push(o)),i=a+1}return e}function vd(t,e,n){return Ll(t,[""],e,n)}class Ki{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof ge?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],l=s>>1,o=i instanceof ge?i.text.length:i.children.length;if(l==(n>0?o:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof ge){let a=i.text[l+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[l+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof ge?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class r0{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Ki(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class i0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(q.prototype[Symbol.iterator]=function(){return this.iter()},Ki.prototype[Symbol.iterator]=r0.prototype[Symbol.iterator]=i0.prototype[Symbol.iterator]=function(){return this});class uk{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function ii(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function De(t,e,n=!0,r=!0){return lk(t,e,n,r)}function hk(t){return t>=56320&&t<57344}function ck(t){return t>=55296&&t<56320}function s0(t,e){let n=t.charCodeAt(e);if(!ck(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return hk(r)?(n-55296<<10)+(r-56320)+65536:n}function fk(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function l0(t){return t<65536?1:2}const qu=/\r\n?|\n/;var ot=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(ot||(ot={}));class hn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],l=this.sections[n++];l<0?(e(r,i,s),i+=s):i+=l,r+=s}}iterChangedRanges(e,n=!1){Gu(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new hn(e)}composeDesc(e){return this.empty?e:e.empty?this:o0(this,e)}mapDesc(e,n=!1){return e.empty?this:Qu(this,e,n)}mapPos(e,n=-1,r=ot.Simple){let i=0,s=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],u=i+o;if(a<0){if(u>e)return s+(e-i);s+=o}else{if(r!=ot.Simple&&u>=e&&(r==ot.TrackDel&&i<e&&u>e||r==ot.TrackBefore&&i<e||r==ot.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==i||n<0?s:s+a;s+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],l=this.sections[r++],o=i+s;if(l>=0&&i<=n&&o>=e)return i<e&&o>n?"cover":!0;i=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new hn(e)}static create(e){return new hn(e)}}class Ae extends hn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Gu(this,(n,r,i,s,l)=>e=e.replace(i,i+(r-n),l),!1),e}mapDesc(e,n=!1){return Qu(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let l=n[i],o=n[i+1];if(o>=0){n[i]=o,n[i+1]=l;let a=i>>1;for(;r.length<a;)r.push(q.empty);r.push(l?e.slice(s,s+l):q.empty)}s+=l}return new Ae(n,r)}compose(e){return this.empty?e:e.empty?this:o0(this,e,!0)}map(e,n=!1){return e.empty?this:Qu(this,e,n,!0)}iterChanges(e,n=!1){Gu(this,e,n)}get desc(){return hn.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new gs(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,a-o);Fe(i,h,-1);let c=s.ins==-1?-1:s.off==0?s.ins:0;Fe(n,h,c),c>0&&Tn(r,n,s.text),s.forward(h),o+=h}let u=e[l++];for(;o<u;){if(s.done)break e;let h=Math.min(s.len,u-o);Fe(n,h,-1),Fe(i,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),o+=h}}return{changes:new Ae(n,r),filtered:hn.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],l=0,o=null;function a(h=!1){if(!h&&!i.length)return;l<n&&Fe(i,n-l,-1);let c=new Ae(i,s);o=o?o.compose(c.map(o)):c,i=[],s=[],l=0}function u(h){if(Array.isArray(h))for(let c of h)u(c);else if(h instanceof Ae){if(h.length!=n)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${n})`);a(),o=o?o.compose(h.map(o)):h}else{let{from:c,to:f=c,insert:d}=h;if(c>f||c<0||f>n)throw new RangeError(`Invalid change range ${c} to ${f} (in doc of length ${n})`);let m=d?typeof d=="string"?q.of(d.split(r||qu)):d:q.empty,v=m.length;if(c==f&&v==0)return;c<l&&a(),c>l&&Fe(i,c-l,-1),Fe(i,f-c,v),Tn(s,i,m),l=f}}return u(e),a(!o),o}static empty(e){return new Ae(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(q.empty);r[i]=q.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Ae(n,r)}static createSet(e,n){return new Ae(e,n)}}function Fe(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Tn(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(q.empty);t.push(n)}}function Gu(t,e,n){let r=t.inserted;for(let i=0,s=0,l=0;l<t.sections.length;){let o=t.sections[l++],a=t.sections[l++];if(a<0)i+=o,s+=o;else{let u=i,h=s,c=q.empty;for(;u+=o,h+=a,a&&r&&(c=c.append(r[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)o=t.sections[l++],a=t.sections[l++];e(i,u,s,h,c),i=u,s=h}}}function Qu(t,e,n,r=!1){let i=[],s=r?[]:null,l=new gs(t),o=new gs(e);for(let a=-1;;){if(l.done&&o.len||o.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&o.ins==-1){let u=Math.min(l.len,o.len);Fe(i,u,-1),l.forward(u),o.forward(u)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!n))){let u=o.len;for(Fe(i,o.ins,-1);u;){let h=Math.min(l.len,u);l.ins>=0&&a<l.i&&l.len<=h&&(Fe(i,0,l.ins),s&&Tn(s,i,l.text),a=l.i),l.forward(h),u-=h}o.next()}else if(l.ins>=0){let u=0,h=l.len;for(;h;)if(o.ins==-1){let c=Math.min(h,o.len);u+=c,h-=c,o.forward(c)}else if(o.ins==0&&o.len<h)h-=o.len,o.next();else break;Fe(i,u,a<l.i?l.ins:0),s&&a<l.i&&Tn(s,i,l.text),a=l.i,l.forward(l.len-h)}else{if(l.done&&o.done)return s?Ae.createSet(i,s):hn.create(i);throw new Error("Mismatched change set lengths")}}}function o0(t,e,n=!1){let r=[],i=n?[]:null,s=new gs(t),l=new gs(e);for(let o=!1;;){if(s.done&&l.done)return i?Ae.createSet(r,i):hn.create(r);if(s.ins==0)Fe(r,s.len,0,o),s.next();else if(l.len==0&&!l.done)Fe(r,0,l.ins,o),i&&Tn(i,r,l.text),l.next();else{if(s.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,l.len),u=r.length;if(s.ins==-1){let h=l.ins==-1?-1:l.off?0:l.ins;Fe(r,a,h,o),i&&h&&Tn(i,r,l.text)}else l.ins==-1?(Fe(r,s.off?0:s.len,a,o),i&&Tn(i,r,s.textBit(a))):(Fe(r,s.off?0:s.len,l.off?0:l.ins,o),i&&!l.off&&Tn(i,r,l.text));o=(s.ins>a||l.ins>=0&&l.len>a)&&(o||r.length>u),s.forward2(a),l.forward(a)}}}}class gs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?q.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?q.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class sr{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new sr(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return b.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return b.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return b.range(e.anchor,e.head)}static create(e,n,r){return new sr(e,n,r)}}class b{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:b.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new b([this.main],0)}addRange(e,n=!0){return b.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,b.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new b(e.ranges.map(n=>sr.fromJSON(n)),e.main)}static single(e,n=e){return new b([b.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return b.normalized(e.slice(),n);r=s.to}return new b(e,n)}static cursor(e,n=0,r,i){return sr.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?sr.create(n,e,48|s):sr.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],l=e[i-1];if(s.empty?s.from<=l.to:s.from<l.to){let o=l.from,a=Math.max(s.to,l.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?b.range(a,o):b.range(o,a))}}return new b(e,n)}}function a0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Nc=0;class I{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Nc++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new I(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Dc),!!e.static,e.enables)}of(e){return new Rl([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rl(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rl(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Dc(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Rl{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Nc++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,l=e[s]>>1,o=this.type==2,a=!1,u=!1,h=[];for(let c of this.dependencies)c=="doc"?a=!0:c=="selection"?u=!0:((n=e[c.id])!==null&&n!==void 0?n:1)&1||h.push(e[c.id]);return{create(c){return c.values[l]=r(c),1},update(c,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||Yu(c,h)){let d=r(c);if(o?!wd(d,c.values[l],i):!i(d,c.values[l]))return c.values[l]=d,1}return 0},reconfigure:(c,f)=>{let d,m=f.config.address[s];if(m!=null){let v=co(f,m);if(this.dependencies.every(k=>k instanceof I?f.facet(k)===c.facet(k):k instanceof zt?f.field(k,!1)==c.field(k,!1):!0)||(o?wd(d=r(c),v,i):i(d=r(c),v)))return c.values[l]=v,0}else d=r(c);return c.values[l]=d,1}}}}function wd(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Yu(t,e){let n=!1;for(let r of e)qi(t,r)&1&&(n=!0);return n}function dk(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),l=t[e.id]>>1;function o(a){let u=[];for(let h=0;h<r.length;h++){let c=co(a,r[h]);if(i[h]==2)for(let f of c)u.push(f);else u.push(c)}return e.combine(u)}return{create(a){for(let u of r)qi(a,u);return a.values[l]=o(a),1},update(a,u){if(!Yu(a,s))return 0;let h=o(a);return e.compare(h,a.values[l])?0:(a.values[l]=h,1)},reconfigure(a,u){let h=Yu(a,r),c=u.config.facets[e.id],f=u.facet(e);if(c&&!h&&Dc(n,c))return a.values[l]=f,0;let d=o(a);return e.compare(d,f)?(a.values[l]=f,0):(a.values[l]=d,1)}}}const tl=I.define({static:!0});class zt{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new zt(Nc++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(tl).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],l=this.updateF(s,i);return this.compareF(s,l)?0:(r.values[n]=l,1)},reconfigure:(r,i)=>{let s=r.facet(tl),l=i.facet(tl),o;return(o=s.find(a=>a.field==this))&&o!=l.find(a=>a.field==this)?(r.values[n]=o.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,tl.of({field:this,create:e})]}get extension(){return this}}const tr={lowest:4,low:3,default:2,high:1,highest:0};function Ei(t){return e=>new u0(e,t)}const $o={highest:Ei(tr.highest),high:Ei(tr.high),default:Ei(tr.default),low:Ei(tr.low),lowest:Ei(tr.lowest)};class u0{constructor(e,n){this.inner=e,this.prec=n}}class Ko{of(e){return new Ju(this,e)}reconfigure(e){return Ko.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Ju{constructor(e,n){this.compartment=e,this.inner=n}}class ho{constructor(e,n,r,i,s,l){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),l=new Map;for(let f of pk(e,n,l))f instanceof zt?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let o=Object.create(null),a=[],u=[];for(let f of i)o[f.id]=u.length<<1,u.push(d=>f.slot(d));let h=r==null?void 0:r.config.facets;for(let f in s){let d=s[f],m=d[0].facet,v=h&&h[f]||[];if(d.every(k=>k.type==0))if(o[m.id]=a.length<<1|1,Dc(v,d))a.push(r.facet(m));else{let k=m.combine(d.map(p=>p.value));a.push(r&&m.compare(k,r.facet(m))?r.facet(m):k)}else{for(let k of d)k.type==0?(o[k.id]=a.length<<1|1,a.push(k.value)):(o[k.id]=u.length<<1,u.push(p=>k.dynamicSlot(p)));o[m.id]=u.length<<1,u.push(k=>dk(k,m,d))}}let c=u.map(f=>f(o));return new ho(e,l,c,o,a,s)}}function pk(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(l,o){let a=i.get(l);if(a!=null){if(a<=o)return;let u=r[a].indexOf(l);u>-1&&r[a].splice(u,1),l instanceof Ju&&n.delete(l.compartment)}if(i.set(l,o),Array.isArray(l))for(let u of l)s(u,o);else if(l instanceof Ju){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(l.compartment)||l.inner;n.set(l.compartment,u),s(u,o)}else if(l instanceof u0)s(l.inner,l.prec);else if(l instanceof zt)r[o].push(l),l.provides&&s(l.provides,o);else if(l instanceof Rl)r[o].push(l),l.facet.extensions&&s(l.facet.extensions,tr.default);else{let u=l.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,tr.default),r.reduce((l,o)=>l.concat(o))}function qi(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function co(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const h0=I.define(),Xu=I.define({combine:t=>t.some(e=>e),static:!0}),c0=I.define({combine:t=>t.length?t[0]:void 0,static:!0}),f0=I.define(),d0=I.define(),p0=I.define(),m0=I.define({combine:t=>t.length?t[0]:!1});class pi{constructor(e,n){this.type=e,this.value=n}static define(){return new mk}}class mk{of(e){return new pi(this,e)}}class gk{constructor(e){this.map=e}of(e){return new re(this,e)}}class re{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new re(this.type,n)}is(e){return this.type==e}static define(e={}){return new gk(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}re.reconfigure=re.define();re.appendConfig=re.define();class _e{constructor(e,n,r,i,s,l){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=l,this._doc=null,this._state=null,r&&a0(r,n.newLength),s.some(o=>o.type==_e.time)||(this.annotations=s.concat(_e.time.of(Date.now())))}static create(e,n,r,i,s,l){return new _e(e,n,r,i,s,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(_e.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}_e.time=pi.define();_e.userEvent=pi.define();_e.addToHistory=pi.define();_e.remote=pi.define();function yk(t,e){let n=[];for(let r=0,i=0;;){let s,l;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],l=t[r++];else if(i<e.length)s=e[i++],l=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function g0(t,e,n){var r;let i,s,l;return n?(i=e.changes,s=Ae.empty(e.changes.length),l=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(i)),{changes:l,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:re.mapEffects(t.effects,i).concat(re.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Zu(t,e,n){let r=e.selection,i=qr(e.annotations);return e.userEvent&&(i=i.concat(_e.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ae?e.changes:Ae.of(e.changes||[],n,t.facet(c0)),selection:r&&(r instanceof b?r:b.single(r.anchor,r.head)),effects:qr(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function y0(t,e,n){let r=Zu(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let l=!!e[s].sequential;r=g0(r,Zu(t,e[s],l?r.changes.newLength:t.doc.length),l)}let i=_e.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return wk(n?vk(i):i)}function vk(t){let e=t.startState,n=!0;for(let i of e.facet(f0)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:yk(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Ae.empty(e.doc.length);else{let l=t.changes.filter(n);i=l.changes,s=l.filtered.mapDesc(l.changes).invertedDesc}t=_e.create(e,i,t.selection&&t.selection.map(s),re.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(d0);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof _e?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof _e?t=s[0]:t=y0(e,qr(s),!1)}return t}function wk(t){let e=t.startState,n=e.facet(p0),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=g0(r,Zu(e,s,t.changes.newLength),!0))}return r==t?t:_e.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const kk=[];function qr(t){return t==null?kk:Array.isArray(t)?t:[t]}var Pe=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Pe||(Pe={}));const xk=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let eh;try{eh=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Sk(t){if(eh)return eh.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||xk.test(n)))return!0}return!1}function Ck(t){return e=>{if(!/\S/.test(e))return Pe.Space;if(Sk(e))return Pe.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Pe.Word;return Pe.Other}}class Y{constructor(e,n,r,i,s,l){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)qi(this,o<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return qi(this,r),co(this,r)}update(...e){return y0(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(Ko.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,u)=>i.set(u,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(re.reconfigure)?(n=null,r=o.value):o.is(re.appendConfig)&&(n=null,r=qr(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=ho.resolve(r,i,this),s=new Y(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let l=e.startState.facet(Xu)?e.newSelection:e.newSelection.asSingle();new Y(n,e.newDoc,l,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:b.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],l=qr(r.effects);for(let o=1;o<n.ranges.length;o++){let a=e(n.ranges[o]),u=this.changes(a.changes),h=u.map(i);for(let f=0;f<o;f++)s[f]=s[f].map(h);let c=i.mapDesc(u,!0);s.push(a.range.map(c)),i=i.compose(h),l=re.mapEffects(l,h).concat(re.mapEffects(qr(a.effects),c))}return{changes:i,selection:b.create(s,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Ae?e:Ae.of(e,this.doc.length,this.facet(Y.lineSeparator))}toText(e){return q.of(e.split(this.facet(Y.lineSeparator)||qu))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(qi(this,n),co(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof zt&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let l=r[s],o=e[s];i.push(l.init(a=>l.spec.fromJSON(o,a)))}}return Y.create({doc:e.doc,selection:b.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=ho.resolve(e.extensions||[],new Map),r=e.doc instanceof q?e.doc:q.of((e.doc||"").split(n.staticFacet(Y.lineSeparator)||qu)),i=e.selection?e.selection instanceof b?e.selection:b.single(e.selection.anchor,e.selection.head):b.single(0);return a0(i,r.length),n.staticFacet(Xu)||(i=i.asSingle()),new Y(n,r,i,n.dynamicSlots.map(()=>null),(s,l)=>l.create(s),null)}get tabSize(){return this.facet(Y.tabSize)}get lineBreak(){return this.facet(Y.lineSeparator)||`
`}get readOnly(){return this.facet(m0)}phrase(e,...n){for(let r of this.facet(Y.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(h0))for(let l of s(this,n,r))Object.prototype.hasOwnProperty.call(l,e)&&i.push(l[e]);return i}charCategorizer(e){return Ck(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),l=e-r,o=e-r;for(;l>0;){let a=De(n,l,!1);if(s(n.slice(a,l))!=Pe.Word)break;l=a}for(;o<i;){let a=De(n,o);if(s(n.slice(o,a))!=Pe.Word)break;o=a}return l==o?null:b.range(l+r,o+r)}}Y.allowMultipleSelections=Xu;Y.tabSize=I.define({combine:t=>t.length?t[0]:4});Y.lineSeparator=c0;Y.readOnly=m0;Y.phrases=I.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Y.languageData=h0;Y.changeFilter=f0;Y.transactionFilter=d0;Y.transactionExtender=p0;Ko.reconfigure=re.define();function qo(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let l=i[s],o=r[s];if(o===void 0)r[s]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](o,l);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class si{eq(e){return this==e}range(e,n=e){return th.create(e,n,this)}}si.prototype.startSide=si.prototype.endSide=0;si.prototype.point=!1;si.prototype.mapMode=ot.TrackDel;let th=class v0{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new v0(e,n,r)}};function nh(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Pc{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let l=i,o=s.length;;){if(l==o)return l;let a=l+o>>1,u=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==l)return u>=0?l:o;u>=0?o=a:l=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),l=this.findIndex(r,1e9,!1,s);s<l;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],h=this.from[a]+e,c=this.to[a]+e,f,d;if(h==c){let m=n.mapPos(h,u.startSide,u.mapMode);if(m==null||(f=d=m,u.startSide!=u.endSide&&(d=n.mapPos(h,u.endSide),d<f)))continue}else if(f=n.mapPos(h,u.startSide),d=n.mapPos(c,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(l<0&&(l=f),u.point&&(o=Math.max(o,d-f)),r.push(u),i.push(f-l),s.push(d-l))}return{mapped:r.length?new Pc(i,s,r,o):null,pos:l}}}class J{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new J(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(r&&(n=n.slice().sort(nh)),this.isEmpty)return n.length?J.of(n):this;let o=new w0(this,null,-1).goto(0),a=0,u=[],h=new mr;for(;o.value||a<n.length;)if(a<n.length&&(o.from-n[a].from||o.startSide-n[a].value.startSide)>=0){let c=n[a++];h.addInner(c.from,c.to,c.value)||u.push(c)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(o.chunkIndex)<n[a].from)&&(!l||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&h.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||i>o.to||s<o.from||l(o.from,o.to,o.value))&&(h.addInner(o.from,o.to,o.value)||u.push(th.create(o.from,o.to,o.value))),o.next());return h.finishInner(this.nextLayer.isEmpty&&!u.length?J.empty:this.nextLayer.update({add:u,filter:l,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],u=e.touchesRange(o,o+a.length);if(u===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(u===!0){let{mapped:h,pos:c}=a.map(o,e);h&&(i=Math.max(i,h.maxPoint),n.push(h),r.push(c))}}let s=this.nextLayer.map(e);return n.length==0?s:new J(r,n,s||J.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],l=this.chunk[i];if(n>=s&&e<=s+l.length&&l.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return ys.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return ys.from(e).goto(n)}static compare(e,n,r,i,s=-1){let l=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),o=n.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),a=kd(l,o,r),u=new bi(l,a,s),h=new bi(o,a,s);r.iterGaps((c,f,d)=>xd(u,c,h,f,d,i)),r.empty&&r.length==0&&xd(u,0,h,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(h=>!h.isEmpty&&n.indexOf(h)<0),l=n.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=l.length)return!1;if(!s.length)return!0;let o=kd(s,l),a=new bi(s,o,0).goto(r),u=new bi(l,o,0).goto(r);for(;;){if(a.to!=u.to||!rh(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,n,r,i,s=-1){let l=new bi(e,null,s).goto(n),o=n,a=l.openStart;for(;;){let u=Math.min(l.to,r);if(l.point){let h=l.activeForPoint(l.to),c=l.pointFrom<n?h.length+1:l.point.startSide<0?h.length:Math.min(h.length,a);i.point(o,u,l.point,h,c,l.pointRank),a=Math.min(l.openEnd(u),h.length)}else u>o&&(i.span(o,u,l.active,a),a=l.openEnd(u));if(l.to>r)return a+(l.point&&l.to>r?1:0);o=l.to,l.next()}}static of(e,n=!1){let r=new mr;for(let i of e instanceof th?[e]:n?Ak(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return J.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=J.empty;i=i.nextLayer)n=new J(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}J.empty=new J([],[],null,-1);function Ak(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(nh(e,r)>0)return t.slice().sort(nh);e=r}return t}J.empty.nextLayer=J.empty;class mr{finishChunk(e){this.chunks.push(new Pc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new mr)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(J.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=J.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function kd(t,e,n){let r=new Map;for(let s of t)for(let l=0;l<s.chunk.length;l++)s.chunk[l].maxPoint<=0&&r.set(s.chunk[l],s.chunkPos[l]);let i=new Set;for(let s of e)for(let l=0;l<s.chunk.length;l++){let o=r.get(s.chunk[l]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[l]&&!(n!=null&&n.touchesRange(o,o+s.chunk[l].length))&&i.add(s.chunk[l])}return i}class w0{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ys{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let l=e[s];!l.isEmpty;l=l.nextLayer)l.maxPoint>=r&&i.push(new w0(l,n,r,s));return i.length==1?i[0]:new ys(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Da(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Da(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Da(this.heap,0)}}}function Da(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class bi{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ys.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){nl(this.active,e),nl(this.activeTo,e),nl(this.activeRank,e),this.minActive=Sd(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;rl(this.active,n,r),rl(this.activeTo,n,i),rl(this.activeRank,n,s),e&&rl(e,n,this.cursor.from),this.minActive=Sd(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&nl(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function xd(t,e,n,r,i,s){t.goto(e),n.goto(r);let l=r+i,o=r,a=r-e;for(;;){let u=t.to+a-n.to,h=u||t.endSide-n.endSide,c=h<0?t.to+a:n.to,f=Math.min(c,l);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&rh(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,f,t.point,n.point):f>o&&!rh(t.active,n.active)&&s.compareRange(o,f,t.active,n.active),c>l)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(c),o=c,h<=0&&t.next(),h>=0&&n.next()}}function rh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function nl(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function rl(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Sd(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Go(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=De(t,i));return r}function Ek(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=De(t,i)}return t.length}const ih="",Cd=typeof Symbol>"u"?"__"+ih:Symbol.for(ih),sh=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Wn{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function s(l,o,a,u){let h=[],c=/^@(\w+)\b/.exec(l[0]),f=c&&c[1]=="keyframes";if(c&&o==null)return a.push(l[0]+";");for(let d in o){let m=o[d];if(/&/.test(d))s(d.split(/,\s*/).map(v=>l.map(k=>v.replace(/&/,k))).reduce((v,k)=>v.concat(k)),m,a);else if(m&&typeof m=="object"){if(!c)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),m,h,f)}else m!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+m+";")}(h.length||f)&&a.push((r&&!c&&!u?l.map(r):l).join(", ")+" {"+h.join(" ")+"}")}for(let l in e)s(i(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Ad[Cd]||1;return Ad[Cd]=e+1,ih+e.toString(36)}static mount(e,n,r){let i=e[sh],s=r&&r.nonce;i?s&&i.setNonce(s):i=new bk(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let Ed=new Map;class bk{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=Ed.get(r);if(s)return e[sh]=s;this.sheet=new i.CSSStyleSheet,Ed.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[sh]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let l=0;l<e.length;l++){let o=e[l],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,o),r)for(let u=0;u<o.rules.length;u++)r.insertRule(o.rules[u],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let a=0;a<this.modules.length;a++)l+=this.modules[a].getRules()+`
`;this.styleTag.textContent=l;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Vn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},vs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Mk=typeof navigator<"u"&&/Mac/.test(navigator.platform),Tk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Oe=0;Oe<10;Oe++)Vn[48+Oe]=Vn[96+Oe]=String(Oe);for(var Oe=1;Oe<=24;Oe++)Vn[Oe+111]="F"+Oe;for(var Oe=65;Oe<=90;Oe++)Vn[Oe]=String.fromCharCode(Oe+32),vs[Oe]=String.fromCharCode(Oe);for(var Pa in Vn)vs.hasOwnProperty(Pa)||(vs[Pa]=Vn[Pa]);function Ok(t){var e=Mk&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Tk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?vs:Vn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Me(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)k0(t,arguments[e]);return t}function k0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)k0(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function ws(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function lh(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Bl(t,e){if(!e.anchorNode)return!1;try{return lh(t,e.anchorNode)}catch{return!1}}function ks(t){return t.nodeType==3?yr(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Gi(t,e,n,r){return n?bd(t,e,n,r,-1)||bd(t,e,n,r,1):!1}function gr(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function fo(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function bd(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:tn(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=gr(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?tn(t):0}else return!1}}function tn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Qo(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Nk(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function x0(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function Dk(t,e,n,r,i,s,l,o){let a=t.ownerDocument,u=a.defaultView||window;for(let h=t,c=!1;h&&!c;)if(h.nodeType==1){let f,d=h==a.body,m=1,v=1;if(d)f=Nk(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(c=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let g=h.getBoundingClientRect();({scaleX:m,scaleY:v}=x0(h,g)),f={left:g.left,right:g.left+h.clientWidth*m,top:g.top,bottom:g.top+h.clientHeight*v}}let k=0,p=0;if(i=="nearest")e.top<f.top?(p=e.top-(f.top+l),n>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,n<0&&e.top-p<f.top&&(p=e.top-(f.top+l)));else{let g=e.bottom-e.top,y=f.bottom-f.top;p=(i=="center"&&g<=y?e.top+g/2-y/2:i=="start"||i=="center"&&n<0?e.top-l:e.bottom-y+l)-f.top}if(r=="nearest"?e.left<f.left?(k=e.left-(f.left+s),n>0&&e.right>f.right+k&&(k=e.right-f.right+s)):e.right>f.right&&(k=e.right-f.right+s,n<0&&e.left<f.left+k&&(k=e.left-(f.left+s))):k=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==o?e.left-s:e.right-(f.right-f.left)+s)-f.left,k||p)if(d)u.scrollBy(k,p);else{let g=0,y=0;if(p){let x=h.scrollTop;h.scrollTop+=p/v,y=(h.scrollTop-x)*v}if(k){let x=h.scrollLeft;h.scrollLeft+=k/m,g=(h.scrollLeft-x)*m}e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y},g&&Math.abs(g-k)<1&&(r="nearest"),y&&Math.abs(y-p)<1&&(i="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function Pk(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class Lk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?tn(n):0),r,Math.min(e.focusOffset,r?tn(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Cr=null;function S0(t){if(t.setActive)return t.setActive();if(Cr)return t.focus(Cr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Cr==null?{get preventScroll(){return Cr={preventScroll:!0},!0}}:void 0),!Cr){Cr=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Md;function yr(t,e,n=e){let r=Md||(Md=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Gr(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let l=new KeyboardEvent("keyup",i);return l.synthetic=!0,t.dispatchEvent(l),s.defaultPrevented||l.defaultPrevented}function Rk(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function C0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Bk(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,tn(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=tn(n))}else{if(n==t)return!0;r=gr(n),n=n.parentNode}}function A0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function E0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=tn(n)}else if(n.parentNode&&!fo(n))r=gr(n),n=n.parentNode;else return null}}function b0(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!fo(n))r=gr(n)+1,n=n.parentNode;else return null}}class ze{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new ze(e.parentNode,gr(e),n)}static after(e,n){return new ze(e.parentNode,gr(e)+1,n)}}const Lc=[];class te{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let l of this.children){if(l.flags&7){if(!l.dom&&(s=i?i.nextSibling:r.firstChild)){let o=te.get(s);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(s)}l.sync(e,n),l.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=l.dom&&(n.written=!0),l.dom.parentNode==r)for(;s&&s!=l.dom;)s=Td(s);else r.insertBefore(l.dom,s);i=l.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=Td(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=tn(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!te.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let l=this.children[i];if(l.dom==r)return s;s+=l.length+l.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,l=-1,o=-1;for(let a=0,u=r,h=r;a<this.children.length;a++){let c=this.children[a],f=u+c.length;if(u<e&&f>n)return c.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=a,s=u),u>n&&c.dom.parentNode==this.dom){l=a,o=h;break}h=f,u=f+c.breakAfter}return{from:s,to:o<0?r+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=Lc){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new M0(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}te.prototype.breakAfter=0;function Td(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class M0{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function T0(t,e,n,r,i,s,l,o,a){let{children:u}=t,h=u.length?u[e]:null,c=s.length?s[s.length-1]:null,f=c?c.breakAfter:l;if(!(e==r&&h&&!l&&!f&&s.length<2&&h.merge(n,i,s.length?c:null,n==0,o,a))){if(r<u.length){let d=u[r];d&&(i<d.length||d.breakAfter&&(c!=null&&c.breakAfter))?(e==r&&(d=d.split(i),i=0),!f&&c&&d.merge(0,i,c,!0,0,a)?s[s.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(c?c.breakAfter=1:l=1),r++}for(h&&(h.breakAfter=l,n>0&&(!l&&s.length&&h.merge(n,h.length,s[0],!1,o,0)?h.breakAfter=s.shift().breakAfter:(n<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(n,h.length,null,!1,o,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:o;else if(u[e].become(s[0]))e++,s.shift(),o=s.length?0:a;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,o,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function O0(t,e,n,r,i,s){let l=t.childCursor(),{i:o,off:a}=l.findPos(n,1),{i:u,off:h}=l.findPos(e,-1),c=e-n;for(let f of r)c+=f.length;t.length+=c,T0(t,u,h,o,a,r,0,i,s)}let Je=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},oh=typeof document<"u"?document:{documentElement:{style:{}}};const ah=/Edge\/(\d+)/.exec(Je.userAgent),N0=/MSIE \d/.test(Je.userAgent),uh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Je.userAgent),Yo=!!(N0||uh||ah),Od=!Yo&&/gecko\/(\d+)/i.test(Je.userAgent),La=!Yo&&/Chrome\/(\d+)/.exec(Je.userAgent),Ik="webkitFontSmoothing"in oh.documentElement.style,D0=!Yo&&/Apple Computer/.test(Je.vendor),Nd=D0&&(/Mobile\/\w+/.test(Je.userAgent)||Je.maxTouchPoints>2);var P={mac:Nd||/Mac/.test(Je.platform),windows:/Win/.test(Je.platform),linux:/Linux|X11/.test(Je.platform),ie:Yo,ie_version:N0?oh.documentMode||6:uh?+uh[1]:ah?+ah[1]:0,gecko:Od,gecko_version:Od?+(/Firefox\/(\d+)/.exec(Je.userAgent)||[0,0])[1]:0,chrome:!!La,chrome_version:La?+La[1]:0,ios:Nd,android:/Android\b/.test(Je.userAgent),safari:D0,webkit_version:Ik?+(/\bAppleWebKit\/(\d+)/.exec(Je.userAgent)||[0,0])[1]:0,tabSize:oh.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Fk=256;class Ft extends te{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Ft)||this.length-(n-e)+r.length>Fk||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Ft(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new ze(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return jk(this.dom,e,n)}}class gn extends te{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(C0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,l){return r&&(!(r instanceof gn&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&l<=0)?!1:(O0(this,e,n,r?r.children.slice():[],s-1,l-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let l=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new gn(this.mark,n,l)}domAtPos(e){return P0(this,e)}coordsAt(e,n){return R0(this,e,n)}}function jk(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,l=0;e==0&&n<0||e==r&&n>=0?P.chrome||P.gecko||(e?(i--,l=1):s<r&&(s++,l=-1)):n<0?i--:s<r&&s++;let o=yr(t,i,s).getClientRects();if(!o.length)return null;let a=o[(l?l<0:n>=0)?0:o.length-1];return P.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,u=>u.width)||a),l?Qo(a,l<0):a||null}class lr extends te{static create(e,n,r){return new lr(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=lr.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,l){return r&&(!(r instanceof lr)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof lr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return q.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):q.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ze.before(this.dom):ze.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let l=this.side?this.side<0:e>0;for(let o=l?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=l?-1:1);return Qo(s,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class li extends te{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof li&&e.side==this.side}split(){return new li(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ze.before(this.dom):ze.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return q.empty}get isHidden(){return!0}}Ft.prototype.children=lr.prototype.children=li.prototype.children=Lc;function P0(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let l=r[i],o=s+l.length;if(!(o==s&&l.getSide()<=0)){if(e>s&&e<o&&l.dom.parentNode==n)return l.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let l=r[s-1];if(l.dom.parentNode==n)return l.domAtPos(l.length)}for(let s=i;s<r.length;s++){let l=r[s];if(l.dom.parentNode==n)return l.domAtPos(0)}return new ze(n,0)}function L0(t,e,n){let r,{children:i}=t;n>0&&e instanceof gn&&i.length&&(r=i[i.length-1])instanceof gn&&r.mark.eq(e.mark)?L0(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function R0(t,e,n){let r=null,i=-1,s=null,l=-1;function o(u,h){for(let c=0,f=0;c<u.children.length&&f<=h;c++){let d=u.children[c],m=f+d.length;m>=h&&(d.children.length?o(d,h-f):(!s||s.isHidden&&(n>0||_k(s,d)))&&(m>h||f==m&&d.getSide()>0)?(s=d,l=h-f):(f<h||f==m&&d.getSide()<0&&!d.isHidden)&&(r=d,i=h-f)),f=m}}o(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:l),n):zk(t)}function zk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=ks(e);return n[n.length-1]||null}function _k(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function hh(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Dd=Object.create(null);function po(t,e,n){if(t==e)return!0;t||(t=Dd),e||(e=Dd);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function ch(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function Hk(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Ps{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var kt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(kt||(kt={}));class W extends si{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Ls(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Un(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:l}=B0(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(l?n?2e8:1:-6e8)+1}return new Un(e,r,i,n,e.widget||null,!0)}static line(e){return new Rs(e)}static set(e,n=!1){return J.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}W.none=J.empty;class Ls extends W{constructor(e){let{start:n,end:r}=B0(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Ls&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&po(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Ls.prototype.point=!1;class Rs extends W{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Rs&&this.spec.class==e.spec.class&&po(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Rs.prototype.mapMode=ot.TrackBefore;Rs.prototype.point=!0;class Un extends W{constructor(e,n,r,i,s,l){super(n,r,s,e),this.block=i,this.isReplace=l,this.mapMode=i?n<=0?ot.TrackBefore:ot.TrackAfter:ot.TrackDel}get type(){return this.startSide!=this.endSide?kt.WidgetRange:this.startSide<=0?kt.WidgetBefore:kt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Un&&Wk(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Un.prototype.point=!0;function B0(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function Wk(t,e){return t==e||!!(t&&e&&t.compare(e))}function Il(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class ve extends te{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,l){if(r){if(!(r instanceof ve))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),O0(this,e,n,r?r.children.slice():[],s,l),!0}split(e){let n=new ve;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){po(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){L0(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=hh(n,this.attrs||{})),r&&(this.attrs=hh({class:r},this.attrs||{}))}domAtPos(e){return P0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(C0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ch(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&te.get(i)instanceof gn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=te.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!P.ios||!this.children.some(s=>s instanceof Ft))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Ft)||/[^ -~]/.test(r.text))return null;let i=ks(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=R0(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let l=(s-i.textHeight)/2;return{top:r.top+l,bottom:r.bottom-l,left:r.left,right:r.left}}}return r}become(e){return e instanceof ve&&this.children.length==0&&e.children.length==0&&po(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],l=i+s.length;if(l>=n){if(s instanceof ve)return s;if(l>n)break}i=l+s.breakAfter}return null}}class cn extends te{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,l){return r&&(!(r instanceof cn)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&l<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?ze.before(this.dom):ze.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new cn(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return Lc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):q.empty}domBoundsAround(){return null}become(e){return e instanceof cn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof fh?null:Qo(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class fh extends Ps{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Qi{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof cn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ve),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(il(new li(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof cn)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(il(new Ft(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,l){if(this.disallowBlockEffectsFor[l]&&r instanceof Un){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=n-e;if(r instanceof Un)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new cn(r.widget||oi.block,o,r));else{let a=lr.create(r.widget||oi.inline,o,o?0:r.startSide),u=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),h=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),c=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(c.append(il(new li(1),i),s),s=i.length+Math.max(0,s-i.length)),c.append(il(a,i),s),this.atCursorPos=h,this.pendingBuffer=h?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let l=new Qi(e,n,r,s);return l.openEnd=J.spans(i,n,r,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function il(t,e){for(let n of e)t=new gn(n,[t],t.length);return t}class oi extends Ps{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}oi.inline=new oi("span");oi.block=new oi("div");var Se=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Se||(Se={}));const vr=Se.LTR,Rc=Se.RTL;function I0(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Vk=I0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Uk=I0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),dh=Object.create(null),Vt=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);dh[e]=n,dh[n]=-e}function F0(t){return t<=247?Vk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Uk[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const $k=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class On{get dir(){return this.level%2?Rc:vr}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=n&&o.to>=n){if(o.level==r)return l;(s<0||(i!=0?i<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=l)}}if(s<0)throw new RangeError("Index out of range");return s}}function j0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!j0(r.inner,i.inner))return!1}return!0}const ee=[];function Kk(t,e,n,r,i){for(let s=0;s<=r.length;s++){let l=s?r[s-1].to:e,o=s<r.length?r[s].from:n,a=s?256:i;for(let u=l,h=a,c=a;u<o;u++){let f=F0(t.charCodeAt(u));f==512?f=h:f==8&&c==4&&(f=16),ee[u]=f==4?2:f,f&7&&(c=f),h=f}for(let u=l,h=a,c=a;u<o;u++){let f=ee[u];if(f==128)u<o-1&&h==ee[u+1]&&h&24?f=ee[u]=h:ee[u]=256;else if(f==64){let d=u+1;for(;d<o&&ee[d]==64;)d++;let m=u&&h==8||d<n&&ee[d]==8?c==1?1:8:256;for(let v=u;v<d;v++)ee[v]=m;u=d-1}else f==8&&c==1&&(ee[u]=1);h=f,f&7&&(c=f)}}}function qk(t,e,n,r,i){let s=i==1?2:1;for(let l=0,o=0,a=0;l<=r.length;l++){let u=l?r[l-1].to:e,h=l<r.length?r[l].from:n;for(let c=u,f,d,m;c<h;c++)if(d=dh[f=t.charCodeAt(c)])if(d<0){for(let v=o-3;v>=0;v-=3)if(Vt[v+1]==-d){let k=Vt[v+2],p=k&2?i:k&4?k&1?s:i:0;p&&(ee[c]=ee[Vt[v]]=p),o=v;break}}else{if(Vt.length==189)break;Vt[o++]=c,Vt[o++]=f,Vt[o++]=a}else if((m=ee[c])==2||m==1){let v=m==i;a=v?0:1;for(let k=o-3;k>=0;k-=3){let p=Vt[k+2];if(p&2)break;if(v)Vt[k+2]|=2;else{if(p&4)break;Vt[k+2]|=4}}}}}function Gk(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let l=i?n[i-1].to:t,o=i<n.length?n[i].from:e;for(let a=l;a<o;){let u=ee[a];if(u==256){let h=a+1;for(;;)if(h==o){if(i==n.length)break;h=n[i++].to,o=i<n.length?n[i].from:e}else if(ee[h]==256)h++;else break;let c=s==1,f=(h<e?ee[h]:r)==1,d=c==f?c?1:2:r;for(let m=h,v=i,k=v?n[v-1].to:t;m>a;)m==k&&(m=n[--v].from,k=v?n[v-1].to:t),ee[--m]=d;a=h}else s=u,a++}}}function ph(t,e,n,r,i,s,l){let o=r%2?2:1;if(r%2==i%2)for(let a=e,u=0;a<n;){let h=!0,c=!1;if(u==s.length||a<s[u].from){let v=ee[a];v!=o&&(h=!1,c=v==16)}let f=!h&&o==1?[]:null,d=h?r:r+1,m=a;e:for(;;)if(u<s.length&&m==s[u].from){if(c)break e;let v=s[u];if(!h)for(let k=v.to,p=u+1;;){if(k==n)break e;if(p<s.length&&s[p].from==k)k=s[p++].to;else{if(ee[k]==o)break e;break}}if(u++,f)f.push(v);else{v.from>a&&l.push(new On(a,v.from,d));let k=v.direction==vr!=!(d%2);mh(t,k?r+1:r,i,v.inner,v.from,v.to,l),a=v.to}m=v.to}else{if(m==n||(h?ee[m]!=o:ee[m]==o))break;m++}f?ph(t,a,m,r+1,i,f,l):a<m&&l.push(new On(a,m,d)),a=m}else for(let a=n,u=s.length;a>e;){let h=!0,c=!1;if(!u||a>s[u-1].to){let v=ee[a-1];v!=o&&(h=!1,c=v==16)}let f=!h&&o==1?[]:null,d=h?r:r+1,m=a;e:for(;;)if(u&&m==s[u-1].to){if(c)break e;let v=s[--u];if(!h)for(let k=v.from,p=u;;){if(k==e)break e;if(p&&s[p-1].to==k)k=s[--p].from;else{if(ee[k-1]==o)break e;break}}if(f)f.push(v);else{v.to<a&&l.push(new On(v.to,a,d));let k=v.direction==vr!=!(d%2);mh(t,k?r+1:r,i,v.inner,v.from,v.to,l),a=v.from}m=v.from}else{if(m==e||(h?ee[m-1]!=o:ee[m-1]==o))break;m--}f?ph(t,m,a,r+1,i,f,l):m<a&&l.push(new On(m,a,d)),a=m}}function mh(t,e,n,r,i,s,l){let o=e%2?2:1;Kk(t,i,s,r,o),qk(t,i,s,r,o),Gk(i,s,r,o),ph(t,i,s,e,n,r,l)}function Qk(t,e,n){if(!t)return[new On(0,0,e==Rc?1:0)];if(e==vr&&!n.length&&!$k.test(t))return z0(t.length);if(n.length)for(;t.length>ee.length;)ee[ee.length]=256;let r=[],i=e==vr?0:1;return mh(t,i,i,n,0,t.length,r),r}function z0(t){return[new On(0,t,0)]}let _0="";function Yk(t,e,n,r,i){var s;let l=r.head-t.from,o=On.find(e,l,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[o],u=a.side(i,n);if(l==u){let f=o+=i?1:-1;if(f<0||f>=e.length)return null;a=e[o=f],l=a.side(!i,n),u=a.side(i,n)}let h=De(t.text,l,a.forward(i,n));(h<a.from||h>a.to)&&(h=u),_0=t.text.slice(Math.min(l,h),Math.max(l,h));let c=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return c&&h==u&&c.level+(i?0:1)<a.level?b.cursor(c.side(!i,n)+t.from,c.forward(i,n)?1:-1,c.level):b.cursor(h+t.from,a.forward(i,n)?-1:1,a.level)}function Jk(t,e,n){for(let r=e;r<n;r++){let i=F0(t.charCodeAt(r));if(i==1)return vr;if(i==2||i==4)return Rc}return vr}const H0=I.define(),W0=I.define(),V0=I.define(),U0=I.define(),gh=I.define(),$0=I.define(),K0=I.define(),Bc=I.define(),Ic=I.define(),q0=I.define({combine:t=>t.some(e=>e)}),Xk=I.define({combine:t=>t.some(e=>e)}),G0=I.define();class Qr{constructor(e,n="nearest",r="nearest",i=5,s=5,l=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=l}map(e){return e.empty?this:new Qr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Qr(b.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const sl=re.define({map:(t,e)=>t.map(e)}),Q0=re.define();function Jt(t,e,n){let r=t.facet(U0);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const ln=I.define({combine:t=>t.length?t[0]:!0});let Zk=0;const jr=I.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class ct{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(jr.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(jr.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:l}=n||{};return new ct(Zk++,e,r,i,o=>{let a=[];return l&&a.push(xs.of(u=>{let h=u.plugin(o);return h?l(h):W.none})),s&&a.push(s(o)),a})}static fromClass(e,n){return ct.define((r,i)=>new e(r,i),n)}}class Ra{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Jt(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Jt(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Jt(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Y0=I.define(),Fc=I.define(),xs=I.define(),J0=I.define(),Bs=I.define(),X0=I.define();function Pd(t,e){let n=t.state.facet(X0);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return J.spans(r,e.from,e.to,{point(){},span(s,l,o,a){let u=s-e.from,h=l-e.from,c=i;for(let f=o.length-1;f>=0;f--,a--){let d=o[f].spec.bidiIsolate,m;if(d==null&&(d=Jk(e.text,u,h)),a>0&&c.length&&(m=c[c.length-1]).to==u&&m.direction==d)m.to=h,c=m.inner;else{let v={from:u,to:h,direction:d,inner:[]};c.push(v),c=v.inner}}}}),i}const Z0=I.define();function ey(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(Z0)){let l=s(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(r=Math.max(r,l.top)),l.bottom!=null&&(i=Math.max(i,l.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Ri=I.define();class xt{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new xt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,l=0,o=0;;i++){let a=i==e.length?null:e[i],u=l-o,h=a?a.fromB:1e9;for(;s<n.length&&n[s]<h;){let c=n[s],f=n[s+1],d=Math.max(o,c),m=Math.min(h,f);if(d<=m&&new xt(d+u,m+u,d,m).addToSet(r),f>h)break;s+=2}if(!a)return r;new xt(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),l=a.toA,o=a.toB}}}class mo{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ae.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,l,o,a)=>i.push(new xt(s,l,o,a))),this.changedRanges=i}static create(e,n,r){return new mo(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Ld extends te{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=W.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ve],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:h})=>h<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!lx(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?tx(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:h}=this.hasComposition;r=new xt(u,h,e.changes.mapPos(u,-1),e.changes.mapPos(h,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(P.ie||P.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,o=this.updateDeco(),a=ix(l,o,e.changes);return r=xt.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=P.chrome||P.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.flags&=-8,l&&(l.written||i.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(l=>l.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof cn&&l.widget instanceof fh&&s.push(l.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let l=i.length-1;;l--){let o=l>=0?i[l]:null;if(!o)break;let{fromA:a,toA:u,fromB:h,toB:c}=o,f,d,m,v;if(r&&r.range.fromB<c&&r.range.toB>h){let x=Qi.build(this.view.state.doc,h,r.range.fromB,this.decorations,this.dynamicDecorationMap),S=Qi.build(this.view.state.doc,r.range.toB,c,this.decorations,this.dynamicDecorationMap);d=x.breakAtStart,m=x.openStart,v=S.openEnd;let A=this.compositionView(r);S.breakAtStart?A.breakAfter=1:S.content.length&&A.merge(A.length,A.length,S.content[0],!1,S.openStart,0)&&(A.breakAfter=S.content[0].breakAfter,S.content.shift()),x.content.length&&A.merge(0,0,x.content[x.content.length-1],!0,0,x.openEnd)&&x.content.pop(),f=x.content.concat(A).concat(S.content)}else({content:f,breakAtStart:d,openStart:m,openEnd:v}=Qi.build(this.view.state.doc,h,c,this.decorations,this.dynamicDecorationMap));let{i:k,off:p}=s.findPos(u,1),{i:g,off:y}=s.findPos(a,-1);T0(this,g,y,k,p,f,d,m,v)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(Q0)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Ft(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new gn(i,[n],n.length);let r=new ve;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,l)=>{l.flags|=8|(l.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(l);let o=te.get(s);o&&o!=l&&(o.dom=null),l.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(ln)||this.dom.tabIndex>-1)&&Bl(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let l=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(P.gecko&&o.empty&&!this.hasComposition&&ex(a)){let c=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(c,a.node.childNodes[a.offset]||null)),a=u=new ze(c,0),l=!0}let h=this.view.observer.selectionRange;(l||!h.focusNode||(!Gi(a.node,a.offset,h.anchorNode,h.anchorOffset)||!Gi(u.node,u.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,o))&&(this.view.observer.ignore(()=>{P.android&&P.chrome&&this.dom.contains(h.focusNode)&&sx(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let c=ws(this.view.root);if(c)if(o.empty){if(P.gecko){let f=nx(a.node,a.offset);if(f&&f!=3){let d=(f==1?E0:b0)(a.node,a.offset);d&&(a=new ze(d.node,d.offset))}}c.collapse(a.node,a.offset),o.bidiLevel!=null&&c.caretBidiLevel!==void 0&&(c.caretBidiLevel=o.bidiLevel)}else if(c.extend){c.collapse(a.node,a.offset);try{c.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new ze(h.anchorNode,h.anchorOffset),this.impreciseHead=u.precise?null:new ze(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Gi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=ws(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let l=ve.find(this,n.head);if(!l)return;let o=l.posAtStart;if(n.head==o||n.head==o+l.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let h=this.domAtPos(n.head+n.assoc);r.collapse(h.node,h.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=te.get(n.childNodes[i]);s instanceof ve&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=te.get(n.childNodes[i]);s instanceof ve&&(r=s.domAtPos(s.length))}return r?new ze(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=te.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof ve)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,l=this.children.length-1;l>=0;l--){let o=this.children[l],a=s-o.breakAfter,u=a-o.length;if(a<e)break;if(u<=e&&(u<e||o.covers(-1))&&(a>e||o.covers(1))&&(!r||o instanceof ve&&!(r instanceof ve&&n>=0)))r=o,i=u;else if(r&&u==e&&a==e&&o instanceof cn&&Math.abs(n)<2){if(o.deco.startSide<0)break;l&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof ve))return null;for(;i.children.length;){let{i:o,off:a}=i.childPos(r,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}r=a}if(!(i instanceof Ft))return null;let s=De(i.text,r);if(s==r)return null;let l=yr(i.dom,r,s).getClientRects();for(let o=0;o<l.length;o++){let a=l[o];if(o==l.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,l=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Se.LTR;for(let u=0,h=0;h<this.children.length;h++){let c=this.children[h],f=u+c.length;if(f>i)break;if(u>=r){let d=c.dom.getBoundingClientRect();if(n.push(d.height),l){let m=c.dom.lastChild,v=m?ks(m):[];if(v.length){let k=v[v.length-1],p=a?k.right-d.left:d.right-k.left;p>o&&(o=p,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+c.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Se.RTL:Se.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ve){let l=s.measureTextSize();if(l)return l}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=ks(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new M0(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],l=s?s.from-1:this.length;if(l>r){let o=(n.lineBlockAt(l).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(W.replace({widget:new fh(o),block:!0,inclusive:!0,isBlockGap:!0}).range(r,l))}if(!s)break;r=s.to+1}return W.set(e)}updateDeco(){let e=1,n=this.view.state.facet(xs).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(J0).map((s,l)=>{let o=typeof s=="function";return o&&(r=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(J.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(G0))try{if(u(this.view,e.range,e))return!0}catch(h){Jt(this.view.state,h,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=ey(this.view),l={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;Dk(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Se.LTR)}}function ex(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function ty(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=E0(n.focusNode,n.focusOffset),i=b0(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let o=te.get(i.node);if(!o||o instanceof Ft&&o.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=te.get(r.node);!a||a instanceof Ft&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let l=e-s.offset;return{from:l,to:l+s.node.nodeValue.length,node:s.node}}function tx(t,e,n){let r=ty(t,n);if(!r)return null;let{node:i,from:s,to:l}=r,o=i.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(r.from,r.to)!=o)return null;let a=e.invertedDesc,u=new xt(a.mapPos(s),a.mapPos(l),s,l),h=[];for(let c=i.parentNode;;c=c.parentNode){let f=te.get(c);if(f instanceof gn)h.push({node:c,deco:f.mark});else{if(f instanceof ve||c.nodeName=="DIV"&&c.parentNode==t.contentDOM)return{range:u,text:i,marks:h,line:c};if(c!=t.contentDOM)h.push({node:c,deco:new Ls({inclusive:!0,attributes:Hk(c),tagName:c.tagName.toLowerCase()})});else return null}}}function nx(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let rx=class{constructor(){this.changes=[]}compareRange(e,n){Il(e,n,this.changes)}comparePoint(e,n){Il(e,n,this.changes)}boundChange(e){Il(e,e,this.changes)}};function ix(t,e,n){let r=new rx;return J.compare(t,e,n,r),r.changes}function sx(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function lx(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function ox(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return b.cursor(e);s==0?n=1:s==i.length&&(n=-1);let l=s,o=s;n<0?l=De(i.text,s,!1):o=De(i.text,s);let a=r(i.text.slice(l,o));for(;l>0;){let u=De(i.text,l,!1);if(r(i.text.slice(u,l))!=a)break;l=u}for(;o<i.length;){let u=De(i.text,o);if(r(i.text.slice(o,u))!=a)break;o=u}return b.range(l+i.from,o+i.from)}function ax(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function ux(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Ba(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Rd(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Bd(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function yh(t,e,n){let r,i,s,l,o=!1,a,u,h,c;for(let m=t.firstChild;m;m=m.nextSibling){let v=ks(m);for(let k=0;k<v.length;k++){let p=v[k];i&&Ba(i,p)&&(p=Rd(Bd(p,i.bottom),i.top));let g=ax(e,p),y=ux(n,p);if(g==0&&y==0)return m.nodeType==3?Id(m,e,n):yh(m,e,n);(!r||l>y||l==y&&s>g)&&(r=m,i=p,s=g,l=y,o=g?e<p.left?k>0:k<v.length-1:!0),g==0?n>p.bottom&&(!h||h.bottom<p.bottom)?(a=m,h=p):n<p.top&&(!c||c.top>p.top)&&(u=m,c=p):h&&Ba(h,p)?h=Bd(h,p.bottom):c&&Ba(c,p)&&(c=Rd(c,p.top))}}if(h&&h.bottom>=n?(r=a,i=h):c&&c.top<=n&&(r=u,i=c),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Id(r,f,n);if(o&&r.contentEditable!="false")return yh(r,f,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function Id(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,l=0;for(let o=0;o<r;o++){let a=yr(t,o,o+1).getClientRects();for(let u=0;u<a.length;u++){let h=a[u];if(h.top==h.bottom)continue;l||(l=e-h.left);let c=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&c<s){let f=e>=(h.left+h.right)/2,d=f;if((P.chrome||P.gecko)&&yr(t,o).getBoundingClientRect().left==h.right&&(d=!f),c<=0)return{node:t,offset:o+(d?1:0)};i=o+(d?1:0),s=c}}}return{node:t,offset:i>-1?i:l>0?t.nodeValue.length:0}}function ny(t,e,n,r=-1){var i,s;let l=t.contentDOM.getBoundingClientRect(),o=l.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:h,y:c}=e,f=c-o;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let x=t.viewState.heightOracle.textHeight/2,S=!1;a=t.elementAtHeight(f),a.type!=kt.Text;)for(;f=r>0?a.bottom+x:a.top-x,!(f>=0&&f<=u);){if(S)return n?null:0;S=!0,r=-r}c=o+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:Fd(t,l,a,h,c);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Fd(t,l,a,h,c);let m=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:m,k=v.elementFromPoint(h,c);k&&!t.contentDOM.contains(k)&&(k=null),k||(h=Math.max(l.left+1,Math.min(l.right-1,h)),k=v.elementFromPoint(h,c),k&&!t.contentDOM.contains(k)&&(k=null));let p,g=-1;if(k&&((i=t.docView.nearest(k))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let x=m.caretPositionFromPoint(h,c);x&&({offsetNode:p,offset:g}=x)}else if(m.caretRangeFromPoint){let x=m.caretRangeFromPoint(h,c);x&&({startContainer:p,startOffset:g}=x)}p&&(!t.contentDOM.contains(p)||P.safari&&hx(p,g,h)||P.chrome&&cx(p,g,h))&&(p=void 0),p&&(g=Math.min(tn(p),g))}if(!p||!t.docView.dom.contains(p)){let x=ve.find(t.docView,d);if(!x)return f>a.top+a.height/2?a.to:a.from;({node:p,offset:g}=yh(x.dom,h,c))}let y=t.docView.nearest(p);if(!y)return null;if(y.isWidget&&((s=y.dom)===null||s===void 0?void 0:s.nodeType)==1){let x=y.dom.getBoundingClientRect();return e.y<x.top||e.y<=x.bottom&&e.x<=(x.left+x.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(p,g)+y.posAtStart}function Fd(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-o)*.5)/o);s+=a*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+Ek(l,s,t.state.tabSize)}function ry(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let l=i.parentNode;if(!l||l.nodeName=="DIV")break;i=l}}return yr(t,r-1,r).getBoundingClientRect().right>n}function hx(t,e,n){return ry(t,e,n)}function cx(t,e,n){if(e!=0)return ry(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():yr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function fx(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==kt.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function dx(t,e,n,r){let i=fx(t,e.head,e.assoc||-1),s=!r||i.type!=kt.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(o==Se.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(a!=null)return b.cursor(a,n?-1:1)}return b.cursor(n?i.to:i.from,n?-1:1)}function jd(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),l=t.textDirectionAt(i.from);for(let o=e,a=null;;){let u=Yk(i,s,l,o,n),h=_0;if(!u){if(i.number==(n?t.state.doc.lines:1))return o;h=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(a){if(!a(h))return o}else{if(!r)return u;a=r(h)}o=u}}function px(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let l=r(s);return i==Pe.Space&&(i=l),i==l}}function mx(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return b.cursor(i,e.assoc);let l=e.goalColumn,o,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),h=t.documentTop;if(u)l==null&&(l=u.left-a.left),o=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);l==null&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-d.from))),o=(s<0?d.top:d.bottom)+h}let c=a.left+l,f=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let m=o+(f+d)*s,v=ny(t,{x:c,y:m},!1,s);if(m<a.top||m>a.bottom||(s<0?v<i:v>i)){let k=t.docView.coordsForChar(v),p=!k||m<k.top?-1:1;return b.cursor(v,p,void 0,l)}}}function Yi(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,l,o)=>{if(e>s&&e<l){let a=r||n||(e-s<l-e?-1:1);e=a<0?s:l,r=a}});if(!r)return e}}function iy(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let l=Yi(t,i.from,0);l!=i.from&&(s=b.cursor(l,-1))}else{let l=Yi(t,i.from,-1),o=Yi(t,i.to,1);(l!=i.from||o!=i.to)&&(s=b.range(i.from==i.anchor?l:o,i.from==i.head?l:o))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?b.create(n,e.mainIndex):e}function Ia(t,e,n){let r=Yi(t.state.facet(Bs).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:b.cursor(r,r<n.from?1:-1)}const Bi="";class gx{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Y.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Bi}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let l=i.nextSibling;if(l==n)break;let o=te.get(i),a=te.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:fo(i))||fo(l)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=l}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,l=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),l=this.lineSeparator.length):(o=i.exec(n))&&(s=o.index,l=o[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);r=s+l}}readNode(e){if(e.cmIgnore)return;let n=te.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(yx(e,r.node,r.offset)?n:0))}}function yx(t,e,n){for(;;){if(!e||n<tn(e))return!1;if(e==t)return!0;n=gr(e)+1,e=e.parentNode}}class zd{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class vx{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let o=s||l?[]:xx(e),a=new gx(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=Sx(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!lh(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!lh(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),h=e.viewport;if((P.ios||P.chrome)&&e.state.selection.main.empty&&a!=u&&(h.from>0||h.to<e.state.doc.length)){let c=Math.min(a,u),f=Math.max(a,u),d=h.from-c,m=h.to-f;(d==0||d==1||c==0)&&(m==0||m==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=b.single(u,a)}}}function sy(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:o}=e.bounds,a=i.from,u=null;(s===8||P.android&&e.text.length<o-l)&&(a=i.to,u="end");let h=kx(t.state.doc.sliceString(l,o,Bi),e.text,a-l,u);h&&(P.chrome&&s==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==Bi+Bi&&h.toB--,n={from:l+h.from,to:l+h.toA,insert:q.of(e.text.slice(h.from,h.toB).split(Bi))})}else r&&(!t.hasFocus&&t.state.facet(ln)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(P.mac||P.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=b.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:q.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:P.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=b.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:q.of([" "])}),n)return jc(t,n,r,s);if(r&&!r.main.eq(i)){let l=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(r=iy(t.state.facet(Bs).map(a=>a(t)),r))),t.dispatch({selection:r,scrollIntoView:l,userEvent:o}),!0}else return!1}function jc(t,e,n,r=-1){if(P.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(P.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Gr(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Gr(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Gr(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,o=()=>l||(l=wx(t,e,n));return t.state.facet($0).some(a=>a(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function wx(t,e,n){let r,i=t.state,s=i.selection.main,l=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,u=a<0?s.from:s.to,h=Yi(i.facet(Bs).map(c=>c(t)),u,a);e.from==h&&(l=h)}if(l>-1)r={changes:e,selection:b.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",u=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let a=i.changes(e),u=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=t.state.sliceDoc(e.from,e.to),c,f=n&&ty(t,n.main.head);if(f){let v=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-v}}else c=t.state.doc.lineAt(s.head);let d=s.to-e.to,m=s.to-s.from;r=i.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:u||v.map(a)};let k=v.to-d,p=k-h.length;if(v.to-v.from!=m||t.state.sliceDoc(p,k)!=h||v.to>=c.from&&v.from<=c.to)return{range:v};let g=i.changes({from:p,to:k,insert:e.insert}),y=v.to-s.to;return{changes:g,range:u?b.range(Math.max(0,u.anchor+y),Math.max(0,u.head+y)):v.map(g)}})}else r={changes:a,selection:u&&i.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function kx(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let l=t.length,o=e.length;for(;l>0&&o>0&&t.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(r=="end"){let a=Math.max(0,s-Math.min(l,o));n-=l+a-s}if(l<s&&t.length<e.length){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}else if(o<s){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}return{from:s,toA:l,toB:o}}function xx(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new zd(n,r)),(i!=n||s!=r)&&e.push(new zd(i,s))),e}function Sx(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?b.single(n+e,r+e):null}class Cx{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,P.safari&&e.contentDOM.addEventListener("input",()=>null),P.gecko&&zx(e.contentDOM.ownerDocument)}handleEvent(e){!Dx(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Ax(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let l=!n[s].handlers.length,o=r[s];o&&l!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:l})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&oy.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),P.android&&P.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return P.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=ly.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||Ex.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Gr(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:P.safari&&!P.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function _d(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Jt(n.state,i)}}}function Ax(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,l=i&&i.plugin.domEventObservers;if(s)for(let o in s){let a=s[o];a&&n(o).handlers.push(_d(r.value,a))}if(l)for(let o in l){let a=l[o];a&&n(o).observers.push(_d(r.value,a))}}for(let r in jt)n(r).handlers.push(jt[r]);for(let r in Et)n(r).observers.push(Et[r]);return e}const ly=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Ex="dthko",oy=[16,17,18,20,91,92,224,225],ll=6;function ol(t){return Math.max(0,t)*.7+8}function bx(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Mx{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Pk(e.contentDOM),this.atoms=e.state.facet(Bs).map(l=>l(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Y.allowMultipleSelections)&&Tx(e,n),this.dragging=Nx(e,n)&&hy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&bx(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,l=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let a=ey(this.view);e.clientX-a.left<=i+ll?n=-ol(i-e.clientX):e.clientX+a.right>=l-ll&&(n=ol(e.clientX-l)),e.clientY-a.top<=s+ll?r=-ol(s-e.clientY):e.clientY+a.bottom>=o-ll&&(r=ol(e.clientY-o)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=iy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Tx(t,e){let n=t.state.facet(H0);return n.length?n[0](e):P.mac?e.metaKey:e.ctrlKey}function Ox(t,e){let n=t.state.facet(W0);return n.length?n[0](e):P.mac?!e.altKey:!e.ctrlKey}function Nx(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=ws(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let l=i[s];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function Dx(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=te.get(n))&&r.ignoreEvent(e))return!1;return!0}const jt=Object.create(null),Et=Object.create(null),ay=P.ie&&P.ie_version<15||P.ios&&P.webkit_version<604;function Px(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),uy(t,n.value)},50)}function Jo(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function uy(t,e){e=Jo(t.state,Bc,e);let{state:n}=t,r,i=1,s=n.toText(e),l=s.lines==n.selection.ranges.length;if(vh!=null&&n.selection.ranges.every(a=>a.empty)&&vh==s.toString()){let a=-1;r=n.changeByRange(u=>{let h=n.doc.lineAt(u.from);if(h.from==a)return{range:u};a=h.from;let c=n.toText((l?s.line(i++).text:e)+n.lineBreak);return{changes:{from:h.from,insert:c},range:b.cursor(u.from+c.length)}})}else l?r=n.changeByRange(a=>{let u=s.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:b.cursor(a.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Et.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};jt.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Et.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Et.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};jt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(V0))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=Bx(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new Mx(t,e,n,r)),r&&t.observer.ignore(()=>{S0(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Hd(t,e,n,r){if(r==1)return b.cursor(e,n);if(r==2)return ox(t.state,e,n);{let i=ve.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),l=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,b.range(l,o)}}let Wd=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Lx(t,e,n,r){let i=ve.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let l=i.coordsAt(s,-1);if(l&&Wd(n,r,l))return-1;let o=i.coordsAt(s,1);return o&&Wd(n,r,o)?1:l&&l.bottom>=r?-1:1}function Vd(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Lx(t,n,e.clientX,e.clientY)}}const Rx=P.ie&&P.ie_version<=11;let Ud=null,$d=0,Kd=0;function hy(t){if(!Rx)return t.detail;let e=Ud,n=Kd;return Ud=t,Kd=Date.now(),$d=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?($d+1)%3:1}function Bx(t,e){let n=Vd(t,e),r=hy(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,l,o){let a=Vd(t,s),u,h=Hd(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!l){let c=Hd(t,n.pos,n.bias,r),f=Math.min(c.from,h.from),d=Math.max(c.to,h.to);h=f<h.from?b.range(f,d):b.range(d,f)}return l?i.replaceRange(i.main.extend(h.from,h.to)):o&&r==1&&i.ranges.length>1&&(u=Ix(i,a.pos))?u:o?i.addRange(h):b.create([h])}}}function Ix(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return b.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}jt.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,l=s+i.length;(s>=n.to||l<=n.from)&&(n=b.range(s,l))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Jo(t.state,Ic,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};jt.dragend=t=>(t.inputState.draggedContent=null,!1);function qd(t,e,n,r){if(n=Jo(t.state,Bc,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,l=r&&s&&Ox(t,e)?{from:s.from,to:s.to}:null,o={from:i,insert:n},a=t.state.changes(l?[l,o]:o);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}jt.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&qd(t,e,r.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(r[l]=o.result),s()},o.readAsText(n[l])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return qd(t,e,r,!0),!0}return!1};jt.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=ay?null:e.clipboardData;return n?(uy(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Px(t),!1)};function Fx(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function jx(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let l=t.doc.lineAt(s);l.number>i&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),i=l.number}r=!0}return{text:Jo(t,Ic,e.join(t.lineBreak)),ranges:n,linewise:r}}let vh=null;jt.copy=jt.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=jx(t.state);if(!n&&!i)return!1;vh=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=ay?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Fx(t,n),!1)};const cy=pi.define();function fy(t,e){let n=[];for(let r of t.facet(K0)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:cy.of(!0)}):null}function dy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=fy(t.state,e);n?t.dispatch(n):t.update([])}},10)}Et.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),dy(t)};Et.blur=t=>{t.observer.clearSelectionRange(),dy(t)};Et.compositionstart=Et.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Et.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,P.chrome&&P.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Et.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};jt.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(s&&l.length){let o=l[0],a=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return jc(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let i;if(P.chrome&&P.android&&(i=ly.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return P.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),P.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Et.compositionend(t,e),20),!1};const Gd=new Set;function zx(t){Gd.has(t)||(Gd.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Qd=["pre-wrap","normal","pre-line","break-spaces"];let ai=!1;function Yd(){ai=!1}class _x{constructor(e){this.lineWrapping=e,this.doc=q.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Qd.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,l){let o=Qd.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<l.length;u++){let h=l[u];h<0?u++:this.heightSamples[Math.floor(h*10)]=!0}}return a}}class Hx{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Yt{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?kt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Un?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Yt(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var le=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(le||(le={}));const Fl=.001;class Ke{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Fl&&(ai=!0),this.height=e)}replace(e,n,r){return Ke.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,l=r.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:u,fromB:h,toB:c}=i[o],f=s.lineAt(a,le.ByPosNoHeight,r.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,le.ByPosNoHeight,r,0,0);for(c+=d.to-u,u=d.to;o>0&&f.from<=i[o-1].toA;)a=i[o-1].fromA,h=i[o-1].fromB,o--,a<f.from&&(f=s.lineAt(a,le.ByPosNoHeight,r,0,0));h+=f.from-a,a=f.from;let m=zc.build(r.setDoc(l),e,h,c);s=go(s,s.replace(a,u,m))}return s.updateHeight(r,0)}static empty(){return new lt(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else if(s>i*2){let o=e[r];o.break?e.splice(r,1,o.left,null,o.right):e.splice(r,1,o.left,o.right),r+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[n++];o&&(i+=o.size)}else{let o=e[--r];o&&(s+=o.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,r++),new Wx(Ke.of(e.slice(0,n)),l,Ke.of(e.slice(r)))}}function go(t,e){return t==e?t:(t.constructor!=e.constructor&&(ai=!0),e)}Ke.prototype.size=1;class py extends Ke{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Yt(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,l){e<=s+this.length&&n>=s&&l(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class lt extends py{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Yt(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof lt||i instanceof Te&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Te?i=new lt(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ke.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Te extends Ke{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);l=a/s,this.length>s+1&&(o=(this.height-a)/(this.length-s-1))}else l=this.height/s;return{firstLine:r,lastLine:i,perLine:l,perChar:o}}blockAt(e,n,r,i){let{firstLine:s,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),h=n.doc.lineAt(u),c=o+h.length*a,f=Math.max(r,e-c/2);return new Yt(h.from,h.length,f,c,0)}else{let u=Math.max(0,Math.min(l-s,Math.floor((e-r)/o))),{from:h,length:c}=n.doc.line(s+u);return new Yt(h,c,r+o*u,o,0)}}lineAt(e,n,r,i,s){if(n==le.ByHeight)return this.blockAt(e,r,i,s);if(n==le.ByPosNoHeight){let{from:d,to:m}=r.doc.lineAt(e);return new Yt(d,m-d,0,0,0)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(r,s),u=r.doc.lineAt(e),h=o+u.length*a,c=u.number-l,f=i+o*c+a*(u.from-s-c);return new Yt(u.from,u.length,Math.max(i,Math.min(f,i+this.height-h)),h,0)}forEachLine(e,n,r,i,s,l){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:a,perChar:u}=this.heightMetrics(r,s);for(let h=e,c=i;h<=n;){let f=r.doc.lineAt(h);if(h==e){let m=f.number-o;c+=a*m+u*(e-s-m)}let d=a+u*f.length;l(new Yt(f.from,f.length,c,d,0)),c+=d,h=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Te?r[r.length-1]=new Te(s.length+i):r.push(null,new Te(i-1))}if(e>0){let s=r[0];s instanceof Te?r[0]=new Te(e+s.length):r.unshift(new Te(e-1),null)}return Ke.of(r)}decomposeLeft(e,n){n.push(new Te(e-1),null)}decomposeRight(e,n){n.push(null,new Te(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let l=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&l.push(new Te(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let h=e.doc.lineAt(o).length;l.length&&l.push(null);let c=i.heights[i.index++];a==-1?a=c:Math.abs(c-a)>=Fl&&(a=-2);let f=new lt(h,c);f.outdated=!1,l.push(f),o+=h+1}o<=s&&l.push(null,new Te(s-o).updateHeight(e,o));let u=Ke.of(l);return(a<0||Math.abs(u.height-this.height)>=Fl||Math.abs(a-this.heightMetrics(e,n).perLine)>=Fl)&&(ai=!0),go(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Wx extends Ke{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let l=i+this.left.height,o=s+this.left.length+this.break,a=n==le.ByHeight?e<l:e<o,u=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,l,o);if(this.break||(a?u.to<o:u.from>o))return u;let h=n==le.ByPosNoHeight?le.ByPosNoHeight:le.ByPos;return a?u.join(this.right.lineAt(o,h,r,l,o)):this.left.lineAt(o,h,r,i,s).join(u)}forEachLine(e,n,r,i,s,l){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,l),n>=a&&this.right.forEachLine(e,n,r,o,a,l);else{let u=this.lineAt(a,le.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,l),u.to>=e&&u.from<=n&&l(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,o,a,l)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let l=s.length;for(let o of r)s.push(o);if(e>0&&Jd(s,l-1),n<this.length){let o=s.length;this.decomposeRight(n,s),Jd(s,o)}return Ke.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Ke.of(this.break?[e,null,n]:[e,n]):(this.left=go(this.left,e),this.right=go(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:l}=this,o=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=o+l.length&&i.more?a=l=l.updateHeight(e,o,r,i):l.updateHeight(e,o,r),a?this.balanced(s,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Jd(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Te&&(r=t[e+1])instanceof Te&&t.splice(e-1,3,new Te(n.length+1+r.length))}const Vx=5;class zc{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof lt?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new lt(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let l=n-e;r.block?this.addBlock(new py(l,i,r)):(l||s||i>=Vx)&&this.addLineDeco(i,s,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new lt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Te(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof lt)return e;let n=new lt(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof lt)&&!this.isCovered?this.nodes.push(new lt(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof lt&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new zc(r,e);return J.spans(n,r,i,s,0),s.finish(r)}}function Ux(t,e,n){let r=new $x;return J.compare(t,e,n,r,0),r.changes}class $x{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&Il(e,n,this.changes,5)}}function Kx(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),l=Math.min(i.innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let h=u,c=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&c.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),l=Math.min(l,f.right),o=Math.max(o,f.top),a=Math.min(u==t.parentNode?i.innerHeight:a,f.bottom)}u=c.position=="absolute"||c.position=="fixed"?h.offsetParent:h.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,l)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}function qx(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function Gx(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Fa{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return W.replace({widget:new Qx(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Qx extends Ps{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Xd{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Zd,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Se.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Fc).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new _x(n),this.stateDeco=e.facet(xs).filter(r=>typeof r!="function"),this.heightMap=Ke.empty().applyChanges(this.stateDeco,q.empty,this.heightOracle.setDoc(e.doc),[new xt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=W.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:l})=>i>=s&&i<=l)){let{from:s,to:l}=this.lineBlockAt(i);e.push(new al(s,l))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Zd:new _c(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ii(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(xs).filter(h=>typeof h!="function");let i=e.changedRanges,s=xt.extendWithRanges(i,Ux(r,this.stateDeco,e?e.changes:Ae.empty(this.state.doc.length))),l=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Yd(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=l||ai)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Xk)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Se.RTL:Se.LTR;let l=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,h=0;if(o.width&&o.height){let{scaleX:x,scaleY:S}=x0(n,o);(x>.005&&Math.abs(this.scaleX-x)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=x,this.scaleY=S,u|=16,l=a=!0)}let c=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=f)&&(this.paddingTop=c,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=A0(e.scrollDOM);let m=(this.printing?Gx:Kx)(n,this.paddingTop),v=m.top-this.pixelViewport.top,k=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!qx(e.dom))return 0;let g=o.width;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let x=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(x)&&(l=!0),l||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:A,textHeight:C}=e.docView.measureTextSize();l=S>0&&i.refresh(s,S,A,C,Math.max(5,g/A),x),l&&(e.docView.minWidth=0,u|=16)}v>0&&k>0?h=Math.max(v,k):v<0&&k<0&&(h=Math.min(v,k)),Yd();for(let S of this.viewports){let A=S.from==this.viewport.from?x:e.docView.measureVisibleLineHeights(S);this.heightMap=(l?Ke.empty().applyChanges(this.stateDeco,q.empty,this.heightOracle,[new xt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,l,new Hx(S.from,A))}ai&&(u|=2)}let y=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),u|=this.updateForViewport()),(u&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new al(i.lineAt(l-r*1e3,le.ByHeight,s,0,0).from,i.lineAt(o+(1-r)*1e3,le.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=i.lineAt(u,le.ByPos,s,0,0),f;n.y=="center"?f=(c.top+c.bottom)/2-h/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=c.top:f=c.bottom-h,a=new al(i.lineAt(f-1e3/2,le.ByHeight,s,0,0).from,i.lineAt(f+h+1e3/2,le.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new al(this.heightMap.lineAt(r,le.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,le.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,le.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,le.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||i<=l-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(r,250)))&&i>l-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Fa(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,l=i<<1;if(this.defaultTextDirection!=Se.LTR&&!r)return[];let o=[],a=(h,c,f,d)=>{if(c-h<s)return;let m=this.state.selection.main,v=[m.from];m.empty||v.push(m.to);for(let p of v)if(p>h&&p<c){a(h,p-10,f,d),a(p+10,c,f,d);return}let k=Jx(e,p=>p.from>=f.from&&p.to<=f.to&&Math.abs(p.from-h)<s&&Math.abs(p.to-c)<s&&!v.some(g=>p.from<g&&p.to>g));if(!k){if(c<f.to&&n&&r&&n.visibleRanges.some(y=>y.from<=c&&y.to>=c)){let y=n.moveToLineBoundary(b.cursor(c),!1,!0).head;y>h&&(c=y)}let p=this.gapSize(f,h,c,d),g=r||p<2e6?p:2e6;k=new Fa(h,c,p,g)}o.push(k)},u=h=>{if(h.length<l||h.type!=kt.Text)return;let c=Yx(h.from,h.to,this.stateDeco);if(c.total<l)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,m;if(r){let v=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,k,p;if(f!=null){let g=hl(c,f),y=((this.visibleBottom-this.visibleTop)/2+v)/h.height;k=g-y,p=g+y}else k=(this.visibleTop-h.top-v)/h.height,p=(this.visibleBottom-h.top+v)/h.height;d=ul(c,k),m=ul(c,p)}else{let v=c.total*this.heightOracle.charWidth,k=i*this.heightOracle.charWidth,p=0;if(v>2e6)for(let A of e)A.from>=h.from&&A.from<h.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=A.size-A.displaySize);let g=this.pixelViewport.left+p,y=this.pixelViewport.right+p,x,S;if(f!=null){let A=hl(c,f),C=((y-g)/2+k)/v;x=A-C,S=A+C}else x=(g-k)/v,S=(y+k)/v;d=ul(c,x),m=ul(c,S)}d>h.from&&a(h.from,d,h,c),m<h.to&&a(m,h.to,h,c)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(u):u(h);return o}gapSize(e,n,r,i){let s=hl(i,r)-hl(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Fa.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=W.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];J.spans(n,this.viewport.from,this.viewport.to,{span(s,l){r.push({from:s,to:l})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let l=this.visibleRanges[s],o=r[s];(l.from!=o.from||l.to!=o.to)&&(i|=4,e&&e.mapPos(l.from,-1)==o.from&&e.mapPos(l.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Ii(this.heightMap.lineAt(e,le.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Ii(this.heightMap.lineAt(this.scaler.fromDOM(e),le.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Ii(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class al{constructor(e,n){this.from=e,this.to=n}}function Yx(t,e,n){let r=[],i=t,s=0;return J.spans(n,t,e,{span(){},point(l,o){l>i&&(r.push({from:i,to:l}),s+=l-i),i=o}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function ul({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:l}=e[i],o=l-s;if(r<=o)return s+r;r-=o}}function hl(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function Jx(t,e){for(let n of t)if(e(n))return n}const Zd={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class _c{constructor(e,n,r){let i=0,s=0,l=0;this.viewports=r.map(({from:o,to:a})=>{let u=n.lineAt(o,le.ByPos,e,0,0).top,h=n.lineAt(a,le.ByPos,e,0,0).bottom;return i+=h-u,{from:o,to:a,top:u,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let o of this.viewports)o.domTop=l+(o.top-s)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof _c?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Ii(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Yt(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Ii(i,e)):t._content)}const cl=I.define({combine:t=>t.join(" ")}),wh=I.define({combine:t=>t.indexOf(!0)>-1}),kh=Wn.newName(),my=Wn.newName(),gy=Wn.newName(),yy={"&light":"."+my,"&dark":"."+gy};function xh(t,e,n){return new Wn(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const Xx=xh("."+kh,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},yy),Zx={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ja=P.ie&&P.ie_version<=11;class eS{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Lk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(P.ie&&P.ie_version<=11||P.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&P.android&&e.constructor.EDIT_CONTEXT!==!1&&!(P.chrome&&P.chrome_version<126)&&(this.editContext=new nS(e),e.state.facet(ln)&&(e.contentDOM.editContext=this.editContext.editContext)),ja&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(ln)?r.root.activeElement!=this.dom:!Bl(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(P.ie&&P.ie_version<=11||P.android&&P.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Gi(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=ws(e.root);if(!n)return!1;let r=P.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&tS(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=Bl(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Bk(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Zx),ja&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ja&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Gr(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let l=this.readMutation(s);l&&(l.typeOver&&(i=!0),n==-1?{from:n,to:r}=l:(n=Math.min(l.from,n),r=Math.max(l.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Bl(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new vx(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=sy(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=ep(n,e.previousSibling||e.target.previousSibling,-1),i=ep(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ln)!=e.state.facet(ln)&&(e.view.contentDOM.editContext=e.state.facet(ln)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function ep(t,e,n){for(;e;){let r=te.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function tp(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return Gi(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function tS(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return tp(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?tp(t,n):null}class nS{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:l}=i,o=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:o,drifted:!1});let u={from:o,to:a,insert:q.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let h=b.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}if((P.mac||P.android)&&u.from==l-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:o,to:a,insert:q.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let h=this.to-this.from+(u.to-u.from+u.insert.length);jc(e,u,b.single(this.toEditorPos(r.selectionStart,h),this.toEditorPos(r.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let l=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);l<o;l++){let a=e.coordsForChar(l);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let l=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(o)){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let h=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(W.mark({attributes:{style:h}}).range(a,u))}}}e.dispatch({effects:Q0.of(W.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=ws(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,l,o,a,u)=>{if(r)return;let h=u.length-(l-s);if(i&&l>=i.to)if(i.from==s&&i.to==l&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=h,this.to+=h;return}else i=null,this.revertPending(e.state);if(s+=n,l+=n,l<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||l>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(l),u.toString()),this.to+=h}n+=h}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class B{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Rk(e.parent)||document,this.viewState=new Xd(e.state||Y.create(e)),e.scrollTo&&e.scrollTo.is(sl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(jr).map(i=>new Ra(i));for(let i of this.plugins)i.update(this);this.observer=new eS(this),this.inputState=new Cx(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Ld(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof _e?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let l=this.hasFocus,o=0,a=null;e.some(f=>f.annotation(cy))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=fy(s,l),a||(o=1));let u=this.observer.delayedAndroidKey,h=null;if(u?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(h=null)):this.observer.clear(),s.facet(Y.phrases)!=this.state.facet(Y.phrases))return this.setState(s);i=mo.create(this,s,e),i.flags|=o;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(c&&(c=c.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;c=new Qr(d.empty?d:b.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(sl)&&(c=d.value.clip(this.state))}this.viewState.update(i,c),this.bidiCache=yo.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Ri)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(cl)!=i.state.facet(cl)&&(this.viewState.mustMeasureContent=!0),(n||r||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(gh))try{f(i)}catch(d){Jt(this.state,d,"update listener")}(a||h)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),h&&!sy(this,h)&&u.force&&Gr(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Xd(e),this.plugins=e.facet(jr).map(r=>new Ra(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new Ld(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(jr),r=e.state.facet(jr);if(n!=r){let i=[];for(let s of r){let l=n.indexOf(s);if(l<0)i.push(new Ra(s));else{let o=this.plugins[l];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Jt(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:l}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(l<0)if(A0(r))s=-1,l=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,l=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let h=u.map(d=>{try{return d.read(this)}catch(m){return Jt(this.state,m),np}}),c=mo.create(this,this.state,[]),f=!1;c.flags|=a,n?n.flags|=a:n=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),f=this.docView.update(c),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(h[d]!=np)try{let m=u[d];m.write&&m.write(h[d],this)}catch(m){Jt(this.state,m)}if(f&&this.docView.updateSelection(!0),!c.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-l;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(gh))o(n)}get themeClasses(){return kh+" "+(this.state.facet(wh)?gy:my)+" "+this.state.facet(cl)}updateAttrs(){let e=rp(this,Y0,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(ln)?"true":"false",class:"cm-content",style:`${P.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),rp(this,Fc,n);let r=this.observer.ignore(()=>{let i=ch(this.contentDOM,this.contentAttrs,n),s=ch(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(B.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ri);let e=this.state.facet(B.cspNonce);Wn.mount(this.root,this.styleModules.concat(Xx).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Ia(this,e,jd(this,e,n,r))}moveByGroup(e,n){return Ia(this,e,jd(this,e,n,r=>px(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return b.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return dx(this,e,n,r)}moveVertically(e,n,r){return Ia(this,e,mx(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),ny(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),l=s[On.find(s,e-i.from,-1,n)];return Qo(r,l.dir==Se.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(q0)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>rS)return z0(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||j0(s.isolates,r=Pd(this,e))))return s.order;r||(r=Pd(this,e));let i=Qk(e.text,n,r);return this.bidiCache.push(new yo(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||P.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{S0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return sl.of(new Qr(typeof e=="number"?b.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return sl.of(new Qr(b.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ct.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ct.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Wn.newName(),i=[cl.of(r),Ri.of(xh(`.${r}`,e))];return n&&n.dark&&i.push(wh.of(!0)),i}static baseTheme(e){return $o.lowest(Ri.of(xh("."+kh,e,yy)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&te.get(r)||te.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}B.styleModule=Ri;B.inputHandler=$0;B.clipboardInputFilter=Bc;B.clipboardOutputFilter=Ic;B.scrollHandler=G0;B.focusChangeEffect=K0;B.perLineTextDirection=q0;B.exceptionSink=U0;B.updateListener=gh;B.editable=ln;B.mouseSelectionStyle=V0;B.dragMovesSelection=W0;B.clickAddsSelectionRange=H0;B.decorations=xs;B.outerDecorations=J0;B.atomicRanges=Bs;B.bidiIsolatedRanges=X0;B.scrollMargins=Z0;B.darkTheme=wh;B.cspNonce=I.define({combine:t=>t.length?t[0]:""});B.contentAttributes=Fc;B.editorAttributes=Y0;B.lineWrapping=B.contentAttributes.of({class:"cm-lineWrapping"});B.announce=re.define();const rS=4096,np={};class yo{constructor(e,n,r,i,s,l){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=l}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Se.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let l=e[s];l.dir==i&&!n.touchesRange(l.from,l.to)&&r.push(new yo(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return r}}function rp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],l=typeof s=="function"?s(t):s;l&&hh(l,n)}return n}const iS=P.mac?"mac":P.windows?"win":P.linux?"linux":"key";function sS(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,l,o;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))l=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),l&&(r="Shift-"+r),r}function fl(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const lS=$o.default(B.domEventHandlers({keydown(t,e){return ky(wy(e.state),t,e,"editor")}})),vy=I.define({enables:lS}),ip=new WeakMap;function wy(t){let e=t.facet(vy),n=ip.get(e);return n||ip.set(e,n=uS(e.reduce((r,i)=>r.concat(i),[]))),n}function oS(t,e,n){return ky(wy(t.state),e,t,n)}let En=null;const aS=4e3;function uS(t,e=iS){let n=Object.create(null),r=Object.create(null),i=(l,o)=>{let a=r[l];if(a==null)r[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},s=(l,o,a,u,h)=>{var c,f;let d=n[l]||(n[l]=Object.create(null)),m=o.split(/ (?!$)/).map(p=>sS(p,e));for(let p=1;p<m.length;p++){let g=m.slice(0,p).join(" ");i(g,!0),d[g]||(d[g]={preventDefault:!0,stopPropagation:!1,run:[y=>{let x=En={view:y,prefix:g,scope:l};return setTimeout(()=>{En==x&&(En=null)},aS),!0}]})}let v=m.join(" ");i(v,!1);let k=d[v]||(d[v]={preventDefault:!1,stopPropagation:!1,run:((f=(c=d._any)===null||c===void 0?void 0:c.run)===null||f===void 0?void 0:f.slice())||[]});a&&k.run.push(a),u&&(k.preventDefault=!0),h&&(k.stopPropagation=!0)};for(let l of t){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let u of o){let h=n[u]||(n[u]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:c}=l;for(let f in h)h[f].run.push(d=>c(d,Sh))}let a=l[e]||l.key;if(a)for(let u of o)s(u,a,l.run,l.preventDefault,l.stopPropagation),l.shift&&s(u,"Shift-"+a,l.shift,l.preventDefault,l.stopPropagation)}return n}let Sh=null;function ky(t,e,n,r){Sh=e;let i=Ok(e),s=s0(i,0),l=l0(s)==i.length&&i!=" ",o="",a=!1,u=!1,h=!1;En&&En.view==n&&En.scope==r&&(o=En.prefix+" ",oy.indexOf(e.keyCode)<0&&(u=!0,En=null));let c=new Set,f=k=>{if(k){for(let p of k.run)if(!c.has(p)&&(c.add(p),p(n)))return k.stopPropagation&&(h=!0),!0;k.preventDefault&&(k.stopPropagation&&(h=!0),u=!0)}return!1},d=t[r],m,v;return d&&(f(d[o+fl(i,e,!l)])?a=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(P.windows&&e.ctrlKey&&e.altKey)&&!(P.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(m=Vn[e.keyCode])&&m!=i?(f(d[o+fl(m,e,!0)])||e.shiftKey&&(v=vs[e.keyCode])!=i&&v!=m&&f(d[o+fl(v,e,!1)]))&&(a=!0):l&&e.shiftKey&&f(d[o+fl(i,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&h&&e.stopPropagation(),Sh=null,a}function hS(){return fS}const cS=W.line({class:"cm-activeLine"}),fS=ct.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(cS.range(i.from)),e=i.from)}return W.set(n)}},{decorations:t=>t.decorations}),sp=I.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function vo(t,e){let n=t.plugin(xy),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const xy=ct.fromClass(class{constructor(t){this.input=t.state.facet(wo),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(sp);this.top=new dl(t,!0,e.topContainer),this.bottom=new dl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(sp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new dl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new dl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(wo);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],l=[],o=[];for(let a of r){let u=this.specs.indexOf(a),h;u<0?(h=a(t.view),o.push(h)):(h=this.panels[u],h.update&&h.update(t)),i.push(h),(h.top?s:l).push(h)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>B.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class dl{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=lp(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=lp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function lp(t){let e=t.nextSibling;return t.remove(),e}const wo=I.define({enables:xy});class $n extends si{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}$n.prototype.elementClass="";$n.prototype.toDOM=void 0;$n.prototype.mapMode=ot.TrackBefore;$n.prototype.startSide=$n.prototype.endSide=-1;$n.prototype.point=!0;const za=I.define(),dS=I.define(),pS={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>J.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Ji=I.define();function mS(t){return[Sy(),Ji.of({...pS,...t})]}const op=I.define({combine:t=>t.some(e=>e)});function Sy(t){return[gS]}const gS=ct.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Ji).map(e=>new up(t,e)),this.fixed=!t.state.facet(op);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(op)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=J.iter(this.view.state.facet(za),this.view.viewport.from),r=[],i=this.gutters.map(s=>new yS(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let l=!0;for(let o of s.type)if(o.type==kt.Text&&l){Ch(n,r,o.from);for(let a of i)a.line(this.view,o,r);l=!1}else if(o.widget)for(let a of i)a.widget(this.view,o)}else if(s.type==kt.Text){Ch(n,r,s.from);for(let l of i)l.line(this.view,s,r)}else if(s.widget)for(let l of i)l.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Ji),n=t.state.facet(Ji),r=t.docChanged||t.heightChanged||t.viewportChanged||!J.eq(t.startState.facet(za),t.state.facet(za),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let l=e.indexOf(s);l<0?i.push(new up(this.view,s)):(this.gutters[l].update(t),i.push(this.gutters[l]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>B.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Se.LTR?{left:r,right:i}:{right:r,left:i}})});function ap(t){return Array.isArray(t)?t:[t]}function Ch(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class yS{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=J.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==i.elements.length){let o=new Cy(e,l,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,l,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Ch(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let l=this.gutter;i.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(dS)){let l=s(e,n.widget,n);l&&(i||(i=[])).push(l)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class up{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,l;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=i.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=ap(n.markers(e)),n.initialSpacer&&(this.spacer=new Cy(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=ap(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!J.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Cy{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),vS(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,l=0;;){let o=l,a=s<n.length?n[s++]:null,u=!1;if(a){let h=a.elementClass;h&&(r+=" "+h);for(let c=l;c<this.markers.length;c++)if(this.markers[c].compare(a)){o=c,u=!0;break}}else o=this.markers.length;for(;l<o;){let h=this.markers[l++];if(h.toDOM){h.destroy(i);let c=i.nextSibling;i.remove(),i=c}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&l++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function vS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const wS=I.define(),kS=I.define(),zr=I.define({combine(t){return qo(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],l=n[i];r[i]=s?(o,a,u)=>s(o,a,u)||l(o,a,u):l}return r}})}});class _a extends $n{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ha(t,e){return t.state.facet(zr).formatNumber(e,t.state)}const xS=Ji.compute([zr],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(wS)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new _a(Ha(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(kS)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(zr)!=e.state.facet(zr),initialSpacer(e){return new _a(Ha(e,hp(e.state.doc.lines)))},updateSpacer(e,n){let r=Ha(n.view,hp(n.view.state.doc.lines));return r==e.number?e:new _a(r)},domEventHandlers:t.facet(zr).domEventHandlers,side:"before"}));function SS(t={}){return[zr.of(t),Sy(),xS]}function hp(t){let e=9;for(;e<t;)e=e*10+9;return e}const CS=1024;let AS=0;class Wa{constructor(e,n){this.from=e,this.to=n}}class K{constructor(e={}){this.id=AS++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=nt.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}K.closedBy=new K({deserialize:t=>t.split(" ")});K.openedBy=new K({deserialize:t=>t.split(" ")});K.group=new K({deserialize:t=>t.split(" ")});K.isolate=new K({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});K.contextHash=new K({perNode:!0});K.lookAhead=new K({perNode:!0});K.mounted=new K({perNode:!0});class ko{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[K.mounted.id]}}const ES=Object.create(null);class nt{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):ES,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new nt(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(K.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(K.group),s=-1;s<(i?i.length:0);s++){let l=n[s<0?r.name:i[s]];if(l)return l}}}}nt.none=new nt("",Object.create(null),0,8);class Hc{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let l=s(r);l&&(i||(i=Object.assign({},r.props)),i[l[0].id]=l[1])}n.push(i?new nt(r.name,i,r.id,r.flags):r)}return new Hc(n)}}const pl=new WeakMap,cp=new WeakMap;var Ne;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Ne||(Ne={}));class he{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[l,o]of s)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=ko.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Eh(this.topNode,e)}cursorAt(e,n=0,r=0){let i=pl.get(this)||this.topNode,s=new Eh(i);return s.moveTo(e,n),pl.set(this,s._tree),s}get topNode(){return new St(this,0,0,null)}resolve(e,n=0){let r=Ss(pl.get(this)||this.topNode,e,n,!1);return pl.set(this,r),r}resolveInner(e,n=0){let r=Ss(cp.get(this)||this.topNode,e,n,!0);return cp.set(this,r),r}resolveStack(e,n=0){return TS(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,l=e.mode||0,o=(l&Ne.IncludeAnonymous)>0;for(let a=this.cursor(l|Ne.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(!o&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&r&&(o||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Uc(nt.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new he(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new he(nt.none,n,r,i)))}static build(e){return OS(e)}}he.empty=new he(nt.none,[],[],0);class Wc{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Wc(this.buffer,this.index)}}class Kn{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return nt.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let l=[];for(;e<r;)l.push(this.childString(e)),e=this.buffer[e+3];return s+"("+l.join(",")+")"}findChild(e,n,r,i,s){let{buffer:l}=this,o=-1;for(let a=e;a!=n&&!(Ay(s,i,l[a+1],l[a+2])&&(o=a,r>0));a=l[a+3]);return o}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),l=0;for(let o=e,a=0;o<n;){s[a++]=i[o++],s[a++]=i[o++]-r;let u=s[a++]=i[o++]-r;s[a++]=i[o++]-e,l=Math.max(l,u)}return new Kn(s,l,this.set)}}function Ay(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ss(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!r&&t instanceof St&&t.index<0?null:t.parent;if(!l)return t;t=l}let s=r?0:Ne.IgnoreOverlays;if(r)for(let l=t,o=l.parent;o;l=o,o=l.parent)l instanceof St&&l.index<0&&((i=o.enter(e,n,s))===null||i===void 0?void 0:i.from)!=l.from&&(t=o);for(;;){let l=t.enter(e,n,s);if(!l)return t;t=l}}class Ey{cursor(e=0){return new Eh(this,e)}getChild(e,n=null,r=null){let i=fp(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return fp(this,e,n,r)}resolve(e,n=0){return Ss(this,e,n,!1)}resolveInner(e,n=0){return Ss(this,e,n,!0)}matchContext(e){return Ah(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class St extends Ey{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,u=n>0?o.length:-1;e!=u;e+=n){let h=o[e],c=a[e]+l.from;if(Ay(i,r,c,c+h.length)){if(h instanceof Kn){if(s&Ne.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,n,r-c,i);if(f>-1)return new Nn(new bS(l,h,e,c),null,f)}else if(s&Ne.IncludeAnonymous||!h.type.isAnonymous||Vc(h)){let f;if(!(s&Ne.IgnoreMounts)&&(f=ko.get(h))&&!f.overlay)return new St(f.tree,c,e,l);let d=new St(h,c,e,l);return s&Ne.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?h.children.length-1:0,n,r,i)}}}if(s&Ne.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Ne.IgnoreOverlays)&&(i=ko.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:l,to:o}of i.overlay)if((n>0?l<=s:l<s)&&(n<0?o>=s:o>s))return new St(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function fp(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let l=!1;!l;)if(l=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Ah(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class bS{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Nn extends Ey{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Nn(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Ne.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Nn(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Nn(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Nn(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let l=r.buffer[this.index+1];e.push(r.slice(i,s,l)),n.push(0)}return new he(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function by(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let l=t[s];(l.from>n.from||l.to<n.to)&&(n=l,e=s)}let r=n instanceof St&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new MS(i,n)}class MS{constructor(e,n){this.heads=e,this.node=n}get next(){return by(this.heads)}}function TS(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof St?r:r.context.parent;s;s=s.parent)if(s.index<0){let l=s.parent;(i||(i=[r])).push(l.resolve(e,n)),s=l}else{let l=ko.get(s.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let o=new St(l.tree,l.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Ss(o,e,n,!1))}}return i?by(i):r}class Eh{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof St)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof St?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Ne.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ne.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ne.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,l=e<0?-1:r._tree.children.length;s!=l;s+=e){let o=r._tree.children[s];if(this.mode&Ne.IncludeAnonymous||o instanceof Kn||!o.type.isAnonymous||Vc(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;n=l,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Nn(this.buffer,n,this.stack[i]);return this.bufferNode=new Nn(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ah(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Ah(this._tree,e,i);let l=r[n.buffer[this.stack[s]]];if(!l.isAnonymous){if(e[i]&&e[i]!=l.name)return!1;i--}}return!0}}function Vc(t){return t.children.some(e=>e instanceof Kn||!e.type.isAnonymous||Vc(e))}function OS(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=CS,reused:s=[],minRepeatType:l=r.types.length}=t,o=Array.isArray(n)?new Wc(n,n.length):n,a=r.types,u=0,h=0;function c(S,A,C,O,F,R){let{id:H,start:z,end:Q,size:Z}=o,pe=h,Qe=u;for(;Z<0;)if(o.next(),Z==-1){let j=s[H];C.push(j),O.push(z-S);return}else if(Z==-3){u=H;return}else if(Z==-4){h=H;return}else throw new RangeError(`Unrecognized record size: ${Z}`);let Mt=a[H],D,_,E=z-S;if(Q-z<=i&&(_=k(o.pos-A,F))){let j=new Uint16Array(_.size-_.skip),V=o.pos-_.size,ie=j.length;for(;o.pos>V;)ie=p(_.start,j,ie);D=new Kn(j,Q-_.start,r),E=_.start-S}else{let j=o.pos-Z;o.next();let V=[],ie=[],me=H>=l?H:-1,rt=0,Ve=Q;for(;o.pos>j;)me>=0&&o.id==me&&o.size>=0?(o.end<=Ve-i&&(m(V,ie,z,rt,o.end,Ve,me,pe,Qe),rt=V.length,Ve=o.end),o.next()):R>2500?f(z,j,V,ie):c(z,j,V,ie,me,R+1);if(me>=0&&rt>0&&rt<V.length&&m(V,ie,z,rt,z,Ve,me,pe,Qe),V.reverse(),ie.reverse(),me>-1&&rt>0){let nn=d(Mt,Qe);D=Uc(Mt,V,ie,0,V.length,0,Q-z,nn,nn)}else D=v(Mt,V,ie,Q-z,pe-Q,Qe)}C.push(D),O.push(E)}function f(S,A,C,O){let F=[],R=0,H=-1;for(;o.pos>A;){let{id:z,start:Q,end:Z,size:pe}=o;if(pe>4)o.next();else{if(H>-1&&Q<H)break;H<0&&(H=Z-i),F.push(z,Q,Z),R++,o.next()}}if(R){let z=new Uint16Array(R*4),Q=F[F.length-2];for(let Z=F.length-3,pe=0;Z>=0;Z-=3)z[pe++]=F[Z],z[pe++]=F[Z+1]-Q,z[pe++]=F[Z+2]-Q,z[pe++]=pe;C.push(new Kn(z,F[2]-Q,r)),O.push(Q-S)}}function d(S,A){return(C,O,F)=>{let R=0,H=C.length-1,z,Q;if(H>=0&&(z=C[H])instanceof he){if(!H&&z.type==S&&z.length==F)return z;(Q=z.prop(K.lookAhead))&&(R=O[H]+z.length+Q)}return v(S,C,O,F,R,A)}}function m(S,A,C,O,F,R,H,z,Q){let Z=[],pe=[];for(;S.length>O;)Z.push(S.pop()),pe.push(A.pop()+C-F);S.push(v(r.types[H],Z,pe,R-F,z-R,Q)),A.push(F-C)}function v(S,A,C,O,F,R,H){if(R){let z=[K.contextHash,R];H=H?[z].concat(H):[z]}if(F>25){let z=[K.lookAhead,F];H=H?[z].concat(H):[z]}return new he(S,A,C,O,H)}function k(S,A){let C=o.fork(),O=0,F=0,R=0,H=C.end-i,z={size:0,start:0,skip:0};e:for(let Q=C.pos-S;C.pos>Q;){let Z=C.size;if(C.id==A&&Z>=0){z.size=O,z.start=F,z.skip=R,R+=4,O+=4,C.next();continue}let pe=C.pos-Z;if(Z<0||pe<Q||C.start<H)break;let Qe=C.id>=l?4:0,Mt=C.start;for(C.next();C.pos>pe;){if(C.size<0)if(C.size==-3)Qe+=4;else break e;else C.id>=l&&(Qe+=4);C.next()}F=Mt,O+=Z,R+=Qe}return(A<0||O==S)&&(z.size=O,z.start=F,z.skip=R),z.size>4?z:void 0}function p(S,A,C){let{id:O,start:F,end:R,size:H}=o;if(o.next(),H>=0&&O<l){let z=C;if(H>4){let Q=o.pos-(H-4);for(;o.pos>Q;)C=p(S,A,C)}A[--C]=z,A[--C]=R-S,A[--C]=F-S,A[--C]=O}else H==-3?u=O:H==-4&&(h=O);return C}let g=[],y=[];for(;o.pos>0;)c(t.start||0,t.bufferStart||0,g,y,-1,0);let x=(e=t.length)!==null&&e!==void 0?e:g.length?y[0]+g[0].length:0;return new he(a[t.topID],g.reverse(),y.reverse(),x)}const dp=new WeakMap;function jl(t,e){if(!t.isAnonymous||e instanceof Kn||e.type!=t)return 1;let n=dp.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof he)){n=1;break}n+=jl(t,r)}dp.set(e,n)}return n}function Uc(t,e,n,r,i,s,l,o,a){let u=0;for(let m=r;m<i;m++)u+=jl(t,e[m]);let h=Math.ceil(u*1.5/8),c=[],f=[];function d(m,v,k,p,g){for(let y=k;y<p;){let x=y,S=v[y],A=jl(t,m[y]);for(y++;y<p;y++){let C=jl(t,m[y]);if(A+C>=h)break;A+=C}if(y==x+1){if(A>h){let C=m[x];d(C.children,C.positions,0,C.children.length,v[x]+g);continue}c.push(m[x])}else{let C=v[y-1]+m[y-1].length-S;c.push(Uc(t,m,v,x,y,S,C,null,a))}f.push(S+g-s)}}return d(e,n,r,i,0),(o||a)(c,f,l)}class ur{constructor(e,n,r,i,s=!1,l=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new ur(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,l=e.length?e[0]:null;for(let o=0,a=0,u=0;;o++){let h=o<n.length?n[o]:null,c=h?h.fromA:1e9;if(c-a>=r)for(;l&&l.from<c;){let f=l;if(a>=f.from||c<=f.to||u){let d=Math.max(f.from,a)-u,m=Math.min(f.to,c)-u;f=d>=m?null:new ur(d,m,f.tree,f.offset+u,o>0,!!h)}if(f&&i.push(f),l.to>c)break;l=s<e.length?e[s++]:null}if(!h)break;a=h.toA,u=h.toA-h.toB}return i}}class My{startParse(e,n,r){return typeof e=="string"&&(e=new NS(e)),r=r?r.length?r.map(i=>new Wa(i.from,i.to)):[new Wa(0,0)]:[new Wa(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class NS{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new K({perNode:!0});let DS=0;class yt{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=DS++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof yt&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new yt(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new xo(e);return r=>r.modified.indexOf(n)>-1?r:xo.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let PS=0;class xo{constructor(e){this.name=e,this.instances=[],this.id=PS++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(o=>o.base==e&&LS(n,o.modified));if(r)return r;let i=[],s=new yt(e.name,i,e,n);for(let o of n)o.instances.push(s);let l=RS(n);for(let o of e.set)if(!o.modified.length)for(let a of l)i.push(xo.get(o,a));return s}}function LS(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function RS(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function BS(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],l=2,o=i;for(let c=0;;){if(o=="..."&&c>0&&c+3==i.length){l=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),c+=f[0].length,c==i.length)break;let d=i[c++];if(c==i.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);o=i.slice(c)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+i);let h=new So(r,l,a>0?s.slice(0,a):null);e[u]=h.sort(e[u])}}return Ty.add(e)}const Ty=new K;class So{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}So.empty=new So([],2,null);function Oy(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let l of s.tag)n[l.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let l=i;for(let o of s)for(let a of o.set){let u=n[a.id];if(u){l=l?l+" "+u:u;break}}return l},scope:r}}function IS(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function FS(t,e,n,r=0,i=t.length){let s=new jS(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class jS{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:l,from:o,to:a}=e;if(o>=r||a<=n)return;l.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(l)));let u=i,h=zS(e)||So.empty,c=IS(s,h.tags);if(c&&(u&&(u+=" "),u+=c,h.mode==1&&(i+=(i?" ":"")+c)),this.startSpan(Math.max(n,o),u),h.opaque)return;let f=e.tree&&e.tree.prop(K.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+o,1),m=this.highlighters.filter(k=>!k.scope||k.scope(f.tree.type)),v=e.firstChild();for(let k=0,p=o;;k++){let g=k<f.overlay.length?f.overlay[k]:null,y=g?g.from+o:a,x=Math.max(n,p),S=Math.min(r,y);if(x<S&&v)for(;e.from<S&&(this.highlightRange(e,x,S,i,s),this.startSpan(Math.min(S,e.to),u),!(e.to>=y||!e.nextSibling())););if(!g||y>r)break;p=g.to+o,p>n&&(this.highlightRange(d.cursor(),Math.max(n,g.from+o),Math.min(r,p),"",m),this.startSpan(Math.min(r,p),u))}v&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function zS(t){let e=t.type.prop(Ty);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const N=yt.define,ml=N(),xn=N(),pp=N(xn),mp=N(xn),Sn=N(),gl=N(Sn),Va=N(Sn),Kt=N(),Xn=N(Kt),Ut=N(),$t=N(),bh=N(),Mi=N(bh),yl=N(),T={comment:ml,lineComment:N(ml),blockComment:N(ml),docComment:N(ml),name:xn,variableName:N(xn),typeName:pp,tagName:N(pp),propertyName:mp,attributeName:N(mp),className:N(xn),labelName:N(xn),namespace:N(xn),macroName:N(xn),literal:Sn,string:gl,docString:N(gl),character:N(gl),attributeValue:N(gl),number:Va,integer:N(Va),float:N(Va),bool:N(Sn),regexp:N(Sn),escape:N(Sn),color:N(Sn),url:N(Sn),keyword:Ut,self:N(Ut),null:N(Ut),atom:N(Ut),unit:N(Ut),modifier:N(Ut),operatorKeyword:N(Ut),controlKeyword:N(Ut),definitionKeyword:N(Ut),moduleKeyword:N(Ut),operator:$t,derefOperator:N($t),arithmeticOperator:N($t),logicOperator:N($t),bitwiseOperator:N($t),compareOperator:N($t),updateOperator:N($t),definitionOperator:N($t),typeOperator:N($t),controlOperator:N($t),punctuation:bh,separator:N(bh),bracket:Mi,angleBracket:N(Mi),squareBracket:N(Mi),paren:N(Mi),brace:N(Mi),content:Kt,heading:Xn,heading1:N(Xn),heading2:N(Xn),heading3:N(Xn),heading4:N(Xn),heading5:N(Xn),heading6:N(Xn),contentSeparator:N(Kt),list:N(Kt),quote:N(Kt),emphasis:N(Kt),strong:N(Kt),link:N(Kt),monospace:N(Kt),strikethrough:N(Kt),inserted:N(),deleted:N(),changed:N(),invalid:N(),meta:yl,documentMeta:N(yl),annotation:N(yl),processingInstruction:N(yl),definition:yt.defineModifier("definition"),constant:yt.defineModifier("constant"),function:yt.defineModifier("function"),standard:yt.defineModifier("standard"),local:yt.defineModifier("local"),special:yt.defineModifier("special")};for(let t in T){let e=T[t];e instanceof yt&&(e.name=t)}Oy([{tag:T.link,class:"tok-link"},{tag:T.heading,class:"tok-heading"},{tag:T.emphasis,class:"tok-emphasis"},{tag:T.strong,class:"tok-strong"},{tag:T.keyword,class:"tok-keyword"},{tag:T.atom,class:"tok-atom"},{tag:T.bool,class:"tok-bool"},{tag:T.url,class:"tok-url"},{tag:T.labelName,class:"tok-labelName"},{tag:T.inserted,class:"tok-inserted"},{tag:T.deleted,class:"tok-deleted"},{tag:T.literal,class:"tok-literal"},{tag:T.string,class:"tok-string"},{tag:T.number,class:"tok-number"},{tag:[T.regexp,T.escape,T.special(T.string)],class:"tok-string2"},{tag:T.variableName,class:"tok-variableName"},{tag:T.local(T.variableName),class:"tok-variableName tok-local"},{tag:T.definition(T.variableName),class:"tok-variableName tok-definition"},{tag:T.special(T.variableName),class:"tok-variableName2"},{tag:T.definition(T.propertyName),class:"tok-propertyName tok-definition"},{tag:T.typeName,class:"tok-typeName"},{tag:T.namespace,class:"tok-namespace"},{tag:T.className,class:"tok-className"},{tag:T.macroName,class:"tok-macroName"},{tag:T.propertyName,class:"tok-propertyName"},{tag:T.operator,class:"tok-operator"},{tag:T.comment,class:"tok-comment"},{tag:T.meta,class:"tok-meta"},{tag:T.invalid,class:"tok-invalid"},{tag:T.punctuation,class:"tok-punctuation"}]);var Ua;const _r=new K;function _S(t){return I.define({combine:t?e=>e.concat(t):void 0})}const HS=new K;class Lt{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Y.prototype.hasOwnProperty("tree")||Object.defineProperty(Y.prototype,"tree",{get(){return ft(this)}}),this.parser=n,this.extension=[qn.of(this),Y.languageData.of((s,l,o)=>{let a=gp(s,l,o),u=a.type.prop(_r);if(!u)return[];let h=s.facet(u),c=a.type.prop(HS);if(c){let f=a.resolve(l-a.from,o);for(let d of c)if(d.test(f,s)){let m=s.facet(d.facet);return d.type=="replace"?m:m.concat(h)}}return h})].concat(r)}isActiveAt(e,n,r=-1){return gp(e,n,r).type.prop(_r)==this.data}findRegions(e){let n=e.facet(qn);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,l)=>{if(s.prop(_r)==this.data){r.push({from:l,to:l+s.length});return}let o=s.prop(K.mounted);if(o){if(o.tree.prop(_r)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+l,to:a.to+l});else r.push({from:l,to:l+s.length});return}else if(o.overlay){let a=r.length;if(i(o.tree,o.overlay[0].from+l),r.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof he&&i(u,s.positions[a]+l)}};return i(ft(e),0),r}get allowsNesting(){return!0}}Lt.setState=re.define();function gp(t,e,n){let r=t.facet(qn),i=ft(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Ne.ExcludeBuffers))s.type.isTop&&(i=s);return i}function ft(t){let e=t.field(Lt.state,!1);return e?e.tree:he.empty}class WS{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ti=null;class ui{constructor(e,n,r=[],i,s,l,o,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new ui(e,n,[],he.empty,0,r,[],null)}startParse(){return this.parser.startParse(new WS(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=he.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(ur.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ur.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ti;Ti=this;try{return e()}finally{Ti=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=yp(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,h,c,f)=>a.push({fromA:u,toA:h,fromB:c,toB:f})),r=ur.applyChanges(r,a),i=he.empty,s=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let h=e.mapPos(u.from,1),c=e.mapPos(u.to,-1);h<c&&o.push({from:h,to:c})}}}return new ui(this.parser,n,r,i,s,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=yp(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends My{createParse(n,r,i){let s=i[0].from,l=i[i.length-1].to;return{parsedPos:s,advance(){let a=Ti;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new he(nt.none,[],[],l-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ti}}function yp(t,e,n){return ur.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class hi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new hi(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=ui.create(e.facet(qn).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new hi(r)}}Lt.state=zt.define({create:hi.init,update(t,e){for(let n of e.effects)if(n.is(Lt.setState))return n.value;return e.startState.facet(qn)!=e.state.facet(qn)?hi.init(e.state):t.apply(e)}});let Ny=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Ny=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const $a=typeof navigator<"u"&&(!((Ua=navigator.scheduling)===null||Ua===void 0)&&Ua.isInputPending)?()=>navigator.scheduling.isInputPending():null,VS=ct.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Lt.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Lt.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Ny(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Lt.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!$a?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>$a&&$a()||Date.now()>l,i+(o?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Lt.setState.of(new hi(s.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Jt(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),qn=I.define({combine(t){return t.length?t[0]:null},enables:t=>[Lt.state,VS,B.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),US=I.define(),$c=I.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function wr(t){let e=t.facet($c);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Cs(t,e){let n="",r=t.tabSize,i=t.facet($c)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function Kc(t,e){t instanceof Y&&(t=new Xo(t));for(let r of t.state.facet(US)){let i=r(t,e);if(i!==void 0)return i}let n=ft(t.state);return n.length>=e?$S(t,n,e):null}class Xo{constructor(e,n={}){this.state=e,this.options=n,this.unit=wr(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),l=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return l>-1&&(s+=l-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Go(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let l=s(i);if(l>-1)return l}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Dy=new K;function $S(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let l=i;l&&!(l.from<r.node.from||l.to>r.node.to||l.from==r.node.from&&l.type==r.node.type);l=l.parent)s.push(l);for(let l=s.length-1;l>=0;l--)r={node:s[l],next:r}}return Py(r,t,n)}function Py(t,e,n){for(let r=t;r;r=r.next){let i=qS(r.node);if(i)return i(qc.create(e,n,r))}return 0}function KS(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function qS(t){let e=t.type.prop(Dy);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(K.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return l=>JS(l,!0,1,void 0,s&&!KS(l)?i.from:void 0)}return t.parent==null?GS:null}function GS(){return 0}class qc extends Xo{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new qc(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(QS(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return Py(this.context.next,this.base,this.pos)}}function QS(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function YS(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),l=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=n.to;;){let a=e.childAfter(o);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=l)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=a.to}}function JS(t,e,n,r,i){let s=t.textAfter,l=s.match(/^\s*/)[0].length,o=r&&s.slice(l,l+r.length)==r||i==t.pos+l,a=YS(t);return a?o?t.column(a.from):t.column(a.to):t.baseIndent+(o?0:t.unit*n)}const XS=200;function ZS(){return Y.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+XS)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:l}=t,o=-1,a=[];for(let{head:u}of l.selection.ranges){let h=l.doc.lineAt(u);if(h.from==o)continue;o=h.from;let c=Kc(l,h.from);if(c==null)continue;let f=/^\s*/.exec(h.text)[0],d=Cs(l,c);f!=d&&a.push({from:h.from,to:h.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const eC=I.define(),tC=new K;function nC(t,e,n){let r=ft(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let l=i;l;l=l.next){let o=l.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(tC);if(a&&(o.to<r.length-50||r.length==t.doc.length||!rC(o))){let u=a(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function rC(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function vp(t,e,n){for(let r of t.facet(eC)){let i=r(t,e,n);if(i)return i}return nC(t,e,n)}function Ly(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Ry=re.define({map:Ly}),Gc=re.define({map:Ly}),Co=zt.define({create(){return W.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=wp(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Ry)&&!iC(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(By),i=r?W.replace({widget:new oC(r(e.state,n.value))}):kp;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(Gc)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=wp(t,e.selection.main.head)),t},provide:t=>B.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(kp.range(r,i))}return W.set(e,!0)}});function wp(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function Mh(t,e,n){var r;let i=null;return(r=t.field(Co,!1))===null||r===void 0||r.between(e,n,(s,l)=>{(!i||i.from>s)&&(i={from:s,to:l})}),i}function iC(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const sC={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},By=I.define({combine(t){return qo(t,sC)}});function lC(t){return[Co,hC]}function Iy(t,e){let{state:n}=t,r=n.facet(By),i=l=>{let o=t.lineBlockAt(t.posAtDOM(l.target)),a=Mh(t.state,o.from,o.to);a&&t.dispatch({effects:Gc.of(a)}),l.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const kp=W.replace({widget:new class extends Ps{toDOM(t){return Iy(t,null)}}});class oC extends Ps{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Iy(e,this.value)}}const aC={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ka extends $n{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function uC(t={}){let e={...aC,...t},n=new Ka(e,!0),r=new Ka(e,!1),i=ct.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(qn)!=l.state.facet(qn)||l.startState.field(Co,!1)!=l.state.field(Co,!1)||ft(l.startState)!=ft(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new mr;for(let a of l.viewportLineBlocks){let u=Mh(l.state,a.from,a.to)?r:vp(l.state,a.from,a.to)?n:null;u&&o.add(a.from,a.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[i,mS({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(i))===null||o===void 0?void 0:o.markers)||J.empty},initialSpacer(){return new Ka(e,!1)},domEventHandlers:{...s,click:(l,o,a)=>{if(s.click&&s.click(l,o,a))return!0;let u=Mh(l.state,o.from,o.to);if(u)return l.dispatch({effects:Gc.of(u)}),!0;let h=vp(l.state,o.from,o.to);return h?(l.dispatch({effects:Ry.of(h)}),!0):!1}}}),lC()]}const hC=B.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Zo{constructor(e,n){this.specs=e;let r;function i(o){let a=Wn.newName();return(r||(r=Object.create(null)))["."+a]=o,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,l=n.scope;this.scope=l instanceof Lt?o=>o.prop(_r)==l.data:l?o=>o==l:void 0,this.style=Oy(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=r?new Wn(r):null,this.themeType=n.themeType}static define(e,n){return new Zo(e,n||{})}}const Th=I.define(),cC=I.define({combine(t){return t.length?[t[0]]:null}});function qa(t){let e=t.facet(Th);return e.length?e:t.facet(cC)}function fC(t,e){let n=[pC],r;return t instanceof Zo&&(t.module&&n.push(B.styleModule.of(t.module)),r=t.themeType),r?n.push(Th.computeN([B.darkTheme],i=>i.facet(B.darkTheme)==(r=="dark")?[t]:[])):n.push(Th.of(t)),n}class dC{constructor(e){this.markCache=Object.create(null),this.tree=ft(e.state),this.decorations=this.buildDeco(e,qa(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=ft(e.state),r=qa(e.state),i=r!=qa(e.startState),{viewport:s}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&l>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return W.none;let r=new mr;for(let{from:i,to:s}of e.visibleRanges)FS(this.tree,n,(l,o,a)=>{r.add(l,o,this.markCache[a]||(this.markCache[a]=W.mark({class:a})))},i,s);return r.finish()}}const pC=$o.high(ct.fromClass(dC,{decorations:t=>t.decorations})),mC=B.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Fy=1e4,jy="()[]{}",zy=I.define({combine(t){return qo(t,{afterCursor:!0,brackets:jy,maxScanDistance:Fy,renderMatch:vC})}}),gC=W.mark({class:"cm-matchingBracket"}),yC=W.mark({class:"cm-nonmatchingBracket"});function vC(t){let e=[],n=t.matched?gC:yC;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const wC=zt.define({create(){return W.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(zy);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Xt(e.state,i.head,-1,r)||i.head>0&&Xt(e.state,i.head-1,1,r)||r.afterCursor&&(Xt(e.state,i.head,1,r)||i.head<e.state.doc.length&&Xt(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return W.set(n,!0)},provide:t=>B.decorations.from(t)}),kC=[wC,mC];function xC(t={}){return[zy.of(t),kC]}const SC=new K;function Oh(t,e,n){let r=t.prop(e<0?K.openedBy:K.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Nh(t){let e=t.type.prop(SC);return e?e(t.node):t}function Xt(t,e,n,r={}){let i=r.maxScanDistance||Fy,s=r.brackets||jy,l=ft(t),o=l.resolveInner(e,n);for(let a=o;a;a=a.parent){let u=Oh(a.type,n,s);if(u&&a.from<a.to){let h=Nh(a);if(h&&(n>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return CC(t,e,n,a,h,u,s)}}return AC(t,e,n,l,o.type,i,s)}function CC(t,e,n,r,i,s,l){let o=r.parent,a={from:i.from,to:i.to},u=0,h=o==null?void 0:o.cursor();if(h&&(n<0?h.childBefore(r.from):h.childAfter(r.to)))do if(n<0?h.to<=r.from:h.from>=r.to){if(u==0&&s.indexOf(h.type.name)>-1&&h.from<h.to){let c=Nh(h);return{start:a,end:c?{from:c.from,to:c.to}:void 0,matched:!0}}else if(Oh(h.type,n,l))u++;else if(Oh(h.type,-n,l)){if(u==0){let c=Nh(h);return{start:a,end:c&&c.from<c.to?{from:c.from,to:c.to}:void 0,matched:!1}}u--}}while(n<0?h.prevSibling():h.nextSibling());return{start:a,matched:!1}}function AC(t,e,n,r,i,s,l){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),c=0;for(let f=0;!h.next().done&&f<=s;){let d=h.value;n<0&&(f+=d.length);let m=e+f*n;for(let v=n>0?0:d.length-1,k=n>0?d.length:-1;v!=k;v+=n){let p=l.indexOf(d[v]);if(!(p<0||r.resolveInner(m+v,1).type!=i))if(p%2==0==n>0)c++;else{if(c==1)return{start:u,end:{from:m+v,to:m+v+1},matched:p>>1==a>>1};c--}}n>0&&(f+=d.length)}return h.done?{start:u,matched:!1}:null}function xp(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let l=r;l<e;l++)t.charCodeAt(l)==9?s+=n-s%n:s++;return s}class _y{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=xp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:xp(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=l=>r?l.toLowerCase():l,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function EC(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||bC,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Jc,mergeTokens:t.mergeTokens!==!1}}function bC(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const Sp=new WeakMap;class Qc extends Lt{constructor(e){let n=_S(e.languageData),r=EC(e),i,s=new class extends My{createParse(l,o,a){return new TC(i,l,o,a)}};super(n,s,[],e.name),this.topNode=DC(n,this),i=this,this.streamParser=r,this.stateAfter=new K({perNode:!0}),this.tokenTable=e.tokenTable?new Uy(r.tokenTable):NC}static define(e){return new Qc(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=Sp.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=Yc(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,l;if(i?(l=i.state,s=i.pos+1):(l=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),u=Math.min(e.pos,a.to);if(a.length){let h=r?r(a.from):-1,c=new _y(a.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;c.pos<u-a.from;)Wy(this.streamParser.token,c,l)}else this.streamParser.blankLine(l,e.unit);if(u==e.pos)break;s=a.to+1}let o=e.lineAt(e.pos);return r&&n==null&&Sp.set(e.state,o.from),this.streamParser.indent(l,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function Yc(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let l=e.children.length-1;l>=0;l--){let o=e.children[l],a=n+e.positions[l],u=o instanceof he&&a<i&&Yc(t,o,a,r,i);if(u)return u}return null}function Hy(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let l=e.positions[s],o=e.children[s],a;if(l<r&&o instanceof he){if(!(a=Hy(t,o,n-l,r-l,i)))break;return i?new he(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),l+a.length):a}}return null}function MC(t,e,n,r,i){for(let s of e){let l=s.from+(s.openStart?25:0),o=s.to-(s.openEnd?25:0),a=l<=n&&o>n&&Yc(t,s.tree,0-s.offset,n,o),u;if(a&&a.pos<=r&&(u=Hy(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:u}}return{state:t.streamParser.startState(i?wr(i):4),tree:he.empty}}class TC{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=ui.get(),l=i[0].from,{state:o,tree:a}=MC(e,r,l,this.to,s==null?void 0:s.state);this.state=o,this.parsedPos=this.chunkStart=l+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(wr(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=ui.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let l=this.ranges[i].from,o=this.lineAfter(l);n+=o,r=l+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let l=this.ranges[++this.rangeIndex].from;n+=l-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let o=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-o}let l=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&l>=0&&this.chunk[l]==e&&this.chunk[l+2]==n?this.chunk[l+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,l=new _y(n,e?e.state.tabSize:4,e?wr(e.state):2);if(l.eol())s.blankLine(this.state,l.indentUnit);else for(;!l.eol();){let o=Wy(s.token,l,this.state);if(o&&(i=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+l.start,this.parsedPos+l.pos,i)),l.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=he.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:OC,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new he(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new he(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Wy(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const Jc=Object.create(null),As=[nt.none],OC=new Hc(As),Cp=[],Ap=Object.create(null),Vy=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Vy[t]=$y(Jc,e);class Uy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Vy)}resolve(e){return e?this.table[e]||(this.table[e]=$y(this.extra,e)):0}}const NC=new Uy(Jc);function Ga(t,e){Cp.indexOf(t)>-1||(Cp.push(t),console.warn(e))}function $y(t,e){let n=[];for(let o of e.split(" ")){let a=[];for(let u of o.split(".")){let h=t[u]||T[u];h?typeof h=="function"?a.length?a=a.map(h):Ga(u,`Modifier ${u} used at start of tag`):a.length?Ga(u,`Tag ${u} used as modifier`):a=Array.isArray(h)?h:[h]:Ga(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(o=>o.id),s=Ap[i];if(s)return s.id;let l=Ap[i]=nt.define({id:As.length,name:r,props:[BS({[r]:n})]});return As.push(l),l.id}function DC(t,e){let n=nt.define({id:As.length,name:"Document",props:[_r.add(()=>t),Dy.add(()=>r=>e.getIndent(r))],top:!0});return As.push(n),n}Se.RTL,Se.LTR;const PC="#e5c07b",Ep="#e06c75",LC="#56b6c2",RC="#ffffff",zl="#abb2bf",Dh="#7d8799",BC="#61afef",IC="#98c379",bp="#d19a66",FC="#c678dd",jC="#21252b",Mp="#2c313a",Tp="#282c34",Qa="#353a42",zC="#3E4451",Op="#528bff",_C=B.theme({"&":{color:zl,backgroundColor:Tp},".cm-content":{caretColor:Op},".cm-cursor, .cm-dropCursor":{borderLeftColor:Op},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:zC},".cm-panels":{backgroundColor:jC,color:zl},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Tp,color:Dh,border:"none"},".cm-activeLineGutter":{backgroundColor:Mp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Qa},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Qa,borderBottomColor:Qa},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Mp,color:zl}}},{dark:!0}),HC=Zo.define([{tag:T.keyword,color:FC},{tag:[T.name,T.deleted,T.character,T.propertyName,T.macroName],color:Ep},{tag:[T.function(T.variableName),T.labelName],color:BC},{tag:[T.color,T.constant(T.name),T.standard(T.name)],color:bp},{tag:[T.definition(T.name),T.separator],color:zl},{tag:[T.typeName,T.className,T.number,T.changed,T.annotation,T.modifier,T.self,T.namespace],color:PC},{tag:[T.operator,T.operatorKeyword,T.url,T.escape,T.regexp,T.link,T.special(T.string)],color:LC},{tag:[T.meta,T.comment],color:Dh},{tag:T.strong,fontWeight:"bold"},{tag:T.emphasis,fontStyle:"italic"},{tag:T.strikethrough,textDecoration:"line-through"},{tag:T.link,color:Dh,textDecoration:"underline"},{tag:T.heading,fontWeight:"bold",color:Ep},{tag:[T.atom,T.bool,T.special(T.variableName)],color:bp},{tag:[T.processingInstruction,T.string,T.inserted],color:IC},{tag:T.invalid,color:RC}]),WC=[_C,fC(HC)],VC=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=Zc(t.state,n.from);return r.line?UC(t):r.block?KC(t):!1};function Xc(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const UC=Xc(QC,0),$C=Xc(Ky,0),KC=Xc((t,e)=>Ky(t,e,GC(e)),0);function Zc(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Oi=50;function qC(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Oi,r),l=t.sliceDoc(i,i+Oi),o=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(l)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&l.slice(a,a+n.length)==n)return{open:{pos:r-o,margin:o&&1},close:{pos:i+a,margin:a&&1}};let h,c;i-r<=2*Oi?h=c=t.sliceDoc(r,i):(h=t.sliceDoc(r,r+Oi),c=t.sliceDoc(i-Oi,i));let f=/^\s*/.exec(h)[0].length,d=/\s*$/.exec(c)[0].length,m=c.length-d-n.length;return h.slice(f,f+e.length)==e&&c.slice(m,m+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(h.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(c.charAt(m-1))?1:0}}:null}function GC(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Ky(t,e,n=e.selection.ranges){let r=n.map(s=>Zc(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,l)=>qC(e,r[l],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,l)=>i[l]?[]:[{from:s.from,insert:r[l].open+" "},{from:s.to,insert:" "+r[l].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let l=0,o;l<i.length;l++)if(o=i[l]){let a=r[l],{open:u,close:h}=o;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:h.pos-h.margin,to:h.pos+a.close.length})}return{changes:s}}return null}function QC(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:l}of n){let o=r.length,a=1e9,u=Zc(e,s).line;if(u){for(let h=s;h<=l;){let c=e.doc.lineAt(h);if(c.from>i&&(s==l||l>c.from)){i=c.from;let f=/^\s*/.exec(c.text)[0].length,d=f==c.length,m=c.text.slice(f,f+u.length)==u?f:-1;f<c.text.length&&f<a&&(a=f),r.push({line:c,comment:m,token:u,indent:f,empty:d,single:!1})}h=c.to+1}if(a<1e9)for(let h=o;h<r.length;h++)r[h].indent<r[h].line.text.length&&(r[h].indent=a);r.length==o+1&&(r[o].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:a,indent:u,empty:h,single:c}of r)(c||!h)&&s.push({from:o.from+u,insert:a+" "});let l=e.changes(s);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:l,comment:o,token:a}of r)if(o>=0){let u=l.from+o,h=u+a.length;l.text[h-l.from]==" "&&h++,s.push({from:u,to:h})}return{changes:s}}return null}function mi(t,e){return b.create(t.ranges.map(e),t.mainIndex)}function _t(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ht({state:t,dispatch:e},n){let r=mi(t.selection,n);return r.eq(t.selection,!0)?!1:(e(_t(t,r)),!0)}function ea(t,e){return b.cursor(e?t.to:t.from)}function qy(t,e){return Ht(t,n=>n.empty?t.moveByChar(n,e):ea(n,e))}function We(t){return t.textDirectionAt(t.state.selection.main.head)==Se.LTR}const Gy=t=>qy(t,!We(t)),Qy=t=>qy(t,We(t));function Yy(t,e){return Ht(t,n=>n.empty?t.moveByGroup(n,e):ea(n,e))}const YC=t=>Yy(t,!We(t)),JC=t=>Yy(t,We(t));function XC(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function ta(t,e,n){let r=ft(t).resolveInner(e.head),i=n?K.closedBy:K.openedBy;for(let a=e.head;;){let u=n?r.childAfter(a):r.childBefore(a);if(!u)break;XC(t,u,i)?r=u:a=n?u.to:u.from}let s=r.type.prop(i),l,o;return s&&(l=n?Xt(t,r.from,1):Xt(t,r.to,-1))&&l.matched?o=n?l.end.to:l.end.from:o=n?r.to:r.from,b.cursor(o,n?-1:1)}const ZC=t=>Ht(t,e=>ta(t.state,e,!We(t))),e2=t=>Ht(t,e=>ta(t.state,e,We(t)));function Jy(t,e){return Ht(t,n=>{if(!n.empty)return ea(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const Xy=t=>Jy(t,!1),Zy=t=>Jy(t,!0);function ev(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(B.scrollMargins)){let l=s(t);l!=null&&l.top&&(n=Math.max(l==null?void 0:l.top,n)),l!=null&&l.bottom&&(r=Math.max(l==null?void 0:l.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function tv(t,e){let n=ev(t),{state:r}=t,i=mi(r.selection,l=>l.empty?t.moveVertically(l,e,n.height):ea(l,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let l=t.coordsAtPos(r.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,u=o.bottom-n.marginBottom;l&&l.top>a&&l.bottom<u&&(s=B.scrollIntoView(i.main.head,{y:"start",yMargin:l.top-a}))}return t.dispatch(_t(r,i),{effects:s}),!0}const Np=t=>tv(t,!1),Ph=t=>tv(t,!0);function Jn(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=b.cursor(r.from+s))}return i}const t2=t=>Ht(t,e=>Jn(t,e,!0)),n2=t=>Ht(t,e=>Jn(t,e,!1)),r2=t=>Ht(t,e=>Jn(t,e,!We(t))),i2=t=>Ht(t,e=>Jn(t,e,We(t))),s2=t=>Ht(t,e=>b.cursor(t.lineBlockAt(e.head).from,1)),l2=t=>Ht(t,e=>b.cursor(t.lineBlockAt(e.head).to,-1));function o2(t,e,n){let r=!1,i=mi(t.selection,s=>{let l=Xt(t,s.head,-1)||Xt(t,s.head,1)||s.head>0&&Xt(t,s.head-1,1)||s.head<t.doc.length&&Xt(t,s.head+1,-1);if(!l||!l.end)return s;r=!0;let o=l.start.from==s.head?l.end.to:l.end.from;return b.cursor(o)});return r?(e(_t(t,i)),!0):!1}const a2=({state:t,dispatch:e})=>o2(t,e);function bt(t,e){let n=mi(t.state.selection,r=>{let i=e(r);return b.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(_t(t.state,n)),!0)}function nv(t,e){return bt(t,n=>t.moveByChar(n,e))}const rv=t=>nv(t,!We(t)),iv=t=>nv(t,We(t));function sv(t,e){return bt(t,n=>t.moveByGroup(n,e))}const u2=t=>sv(t,!We(t)),h2=t=>sv(t,We(t)),c2=t=>bt(t,e=>ta(t.state,e,!We(t))),f2=t=>bt(t,e=>ta(t.state,e,We(t)));function lv(t,e){return bt(t,n=>t.moveVertically(n,e))}const ov=t=>lv(t,!1),av=t=>lv(t,!0);function uv(t,e){return bt(t,n=>t.moveVertically(n,e,ev(t).height))}const Dp=t=>uv(t,!1),Pp=t=>uv(t,!0),d2=t=>bt(t,e=>Jn(t,e,!0)),p2=t=>bt(t,e=>Jn(t,e,!1)),m2=t=>bt(t,e=>Jn(t,e,!We(t))),g2=t=>bt(t,e=>Jn(t,e,We(t))),y2=t=>bt(t,e=>b.cursor(t.lineBlockAt(e.head).from)),v2=t=>bt(t,e=>b.cursor(t.lineBlockAt(e.head).to)),Lp=({state:t,dispatch:e})=>(e(_t(t,{anchor:0})),!0),Rp=({state:t,dispatch:e})=>(e(_t(t,{anchor:t.doc.length})),!0),Bp=({state:t,dispatch:e})=>(e(_t(t,{anchor:t.selection.main.anchor,head:0})),!0),Ip=({state:t,dispatch:e})=>(e(_t(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),w2=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),k2=({state:t,dispatch:e})=>{let n=na(t).map(({from:r,to:i})=>b.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:b.create(n),userEvent:"select"})),!0},x2=({state:t,dispatch:e})=>{let n=mi(t.selection,r=>{let i=ft(t),s=i.resolveStack(r.from,1);if(r.empty){let l=i.resolveStack(r.from,-1);l.node.from>=s.node.from&&l.node.to<=s.node.to&&(s=l)}for(let l=s;l;l=l.next){let{node:o}=l;if((o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from)&&l.next)return b.range(o.to,o.from)}return r});return n.eq(t.selection)?!1:(e(_t(t,n)),!0)};function hv(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let l=n.doc.lineAt(s.head);if(e?l.to<t.state.doc.length:l.from>0)for(let o=s;;){let a=t.moveVertically(o,e);if(a.head<l.from||a.head>l.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==o.head)break;o=a}}}return i.length==r.ranges.length?!1:(t.dispatch(_t(n,b.create(i,i.length-1))),!0)}const S2=t=>hv(t,!1),C2=t=>hv(t,!0),A2=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=b.create([n.main]):n.main.empty||(r=b.create([b.cursor(n.main.head)])),r?(e(_t(t,r)),!0):!1};function Is(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:l,to:o}=s;if(l==o){let a=e(s);a<l?(n="delete.backward",a=vl(t,a,!1)):a>l&&(n="delete.forward",a=vl(t,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=vl(t,l,!1),o=vl(t,o,!0);return l==o?{range:s}:{changes:{from:l,to:o},range:b.cursor(l,l<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?B.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function vl(t,e,n){if(t instanceof B)for(let r of t.state.facet(B.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const cv=(t,e,n)=>Is(t,r=>{let i=r.from,{state:s}=t,l=s.doc.lineAt(i),o,a;if(n&&!e&&i>l.from&&i<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,i-l.from))){if(o[o.length-1]=="	")return i-1;let u=Go(o,s.tabSize),h=u%wr(s)||wr(s);for(let c=0;c<h&&o[o.length-1-c]==" ";c++)i--;a=i}else a=De(l.text,i-l.from,e,e)+l.from,a==i&&l.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,i-l.from))&&(a=De(l.text,a-l.from,!1,!1)+l.from);return a}),Lh=t=>cv(t,!1,!0),fv=t=>cv(t,!0,!1),dv=(t,e)=>Is(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),l=i.charCategorizer(r);for(let o=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=De(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),h=l(u);if(o!=null&&h!=o)break;(u!=" "||r!=n.head)&&(o=h),r=a}return r}),pv=t=>dv(t,!1),E2=t=>dv(t,!0),b2=t=>Is(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),M2=t=>Is(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),T2=t=>Is(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),O2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:q.of(["",""])},range:b.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},N2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),l=i==s.from?i-1:De(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:De(s.text,i-s.from,!0)+s.from;return{changes:{from:l,to:o,insert:t.doc.slice(i,o).append(t.doc.slice(l,i))},range:b.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function na(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let l=e[e.length-1];l.to=s.to,l.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function mv(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of na(t)){if(n?s.to==t.doc.length:s.from==0)continue;let l=t.doc.lineAt(n?s.to+1:s.from-1),o=l.length+1;if(n){r.push({from:s.to,to:l.to},{from:s.from,insert:l.text+t.lineBreak});for(let a of s.ranges)i.push(b.range(Math.min(t.doc.length,a.anchor+o),Math.min(t.doc.length,a.head+o)))}else{r.push({from:l.from,to:s.from},{from:s.to,insert:t.lineBreak+l.text});for(let a of s.ranges)i.push(b.range(a.anchor-o,a.head-o))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:b.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const D2=({state:t,dispatch:e})=>mv(t,e,!1),P2=({state:t,dispatch:e})=>mv(t,e,!0);function gv(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of na(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const L2=({state:t,dispatch:e})=>gv(t,e,!1),R2=({state:t,dispatch:e})=>gv(t,e,!0),B2=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(na(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=mi(e.selection,i=>{let s;if(t.lineWrapping){let l=t.lineBlockAt(i.head),o=t.coordsAtPos(i.head,i.assoc||1);o&&(s=l.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function I2(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=ft(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(K.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const Fp=yv(!1),F2=yv(!0);function yv(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:l}=i,o=e.doc.lineAt(s),a=!t&&s==l&&I2(e,s);t&&(s=l=(l<=o.to?o:e.doc.lineAt(l)).to);let u=new Xo(e,{simulateBreak:s,simulateDoubleBreak:!!a}),h=Kc(u,s);for(h==null&&(h=Go(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:s,to:l}=a:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let c=["",Cs(e,h)];return a&&c.push(Cs(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:l,insert:q.of(c)},range:b.cursor(s+1+c[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function ef(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let l=r.from;l<=r.to;){let o=t.doc.lineAt(l);o.number>n&&(r.empty||r.to>o.from)&&(e(o,i,r),n=o.number),l=o.to+1}let s=t.changes(i);return{changes:i,range:b.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const j2=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Xo(t,{overrideIndentation:s=>{let l=n[s];return l??-1}}),i=ef(t,(s,l,o)=>{let a=Kc(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],h=Cs(t,a);(u!=h||o.from<s.from+u.length)&&(n[s.from]=a,l.push({from:s.from,to:s.from+u.length,insert:h}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},z2=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(ef(t,(n,r)=>{r.push({from:n.from,insert:t.facet($c)})}),{userEvent:"input.indent"})),!0),_2=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(ef(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Go(i,t.tabSize),l=0,o=Cs(t,Math.max(0,s-wr(t)));for(;l<i.length&&l<o.length&&i.charCodeAt(l)==o.charCodeAt(l);)l++;r.push({from:n.from+l,to:n.from+i.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),H2=t=>(t.setTabFocusMode(),!0),W2=[{key:"Ctrl-b",run:Gy,shift:rv,preventDefault:!0},{key:"Ctrl-f",run:Qy,shift:iv},{key:"Ctrl-p",run:Xy,shift:ov},{key:"Ctrl-n",run:Zy,shift:av},{key:"Ctrl-a",run:s2,shift:y2},{key:"Ctrl-e",run:l2,shift:v2},{key:"Ctrl-d",run:fv},{key:"Ctrl-h",run:Lh},{key:"Ctrl-k",run:b2},{key:"Ctrl-Alt-h",run:pv},{key:"Ctrl-o",run:O2},{key:"Ctrl-t",run:N2},{key:"Ctrl-v",run:Ph}],V2=[{key:"ArrowLeft",run:Gy,shift:rv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:YC,shift:u2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:r2,shift:m2,preventDefault:!0},{key:"ArrowRight",run:Qy,shift:iv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:JC,shift:h2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:i2,shift:g2,preventDefault:!0},{key:"ArrowUp",run:Xy,shift:ov,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Lp,shift:Bp},{mac:"Ctrl-ArrowUp",run:Np,shift:Dp},{key:"ArrowDown",run:Zy,shift:av,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Rp,shift:Ip},{mac:"Ctrl-ArrowDown",run:Ph,shift:Pp},{key:"PageUp",run:Np,shift:Dp},{key:"PageDown",run:Ph,shift:Pp},{key:"Home",run:n2,shift:p2,preventDefault:!0},{key:"Mod-Home",run:Lp,shift:Bp},{key:"End",run:t2,shift:d2,preventDefault:!0},{key:"Mod-End",run:Rp,shift:Ip},{key:"Enter",run:Fp,shift:Fp},{key:"Mod-a",run:w2},{key:"Backspace",run:Lh,shift:Lh,preventDefault:!0},{key:"Delete",run:fv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:pv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:E2,preventDefault:!0},{mac:"Mod-Backspace",run:M2,preventDefault:!0},{mac:"Mod-Delete",run:T2,preventDefault:!0}].concat(W2.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),U2=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:ZC,shift:c2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e2,shift:f2},{key:"Alt-ArrowUp",run:D2},{key:"Shift-Alt-ArrowUp",run:L2},{key:"Alt-ArrowDown",run:P2},{key:"Shift-Alt-ArrowDown",run:R2},{key:"Mod-Alt-ArrowUp",run:S2},{key:"Mod-Alt-ArrowDown",run:C2},{key:"Escape",run:A2},{key:"Mod-Enter",run:F2},{key:"Alt-l",mac:"Ctrl-l",run:k2},{key:"Mod-i",run:x2,preventDefault:!0},{key:"Mod-[",run:_2},{key:"Mod-]",run:z2},{key:"Mod-Alt-\\",run:j2},{key:"Shift-Mod-k",run:B2},{key:"Shift-Mod-\\",run:a2},{key:"Mod-/",run:VC},{key:"Alt-A",run:$C},{key:"Ctrl-m",mac:"Shift-Alt-m",run:H2}].concat(V2),jp=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Es{constructor(e,n,r=0,i=e.length,s,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(jp(o)):jp,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return s0(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=fk(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=l0(e);let i=this.normalize(n);if(i.length)for(let s=0,l=r;;s++){let o=i.charCodeAt(s),a=this.match(o,l,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}l==r&&s<n.length&&n.charCodeAt(s)==o&&l++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let l=this.matches[s],o=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Es.prototype[Symbol.iterator]=function(){return this});const vv={from:-1,to:-1,match:/.*/.exec("")},tf="gm"+(/x/.unicode==null?"":"u");class wv{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=vv,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new kv(e,n,r,i,s);this.re=new RegExp(n,tf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let l=e.lineAt(i);this.curLineStart=l.from,this.matchPos=Ao(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Ao(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Ya=new WeakMap;class Yr{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=Ya.get(e);if(!i||i.from>=r||i.to<=n){let o=new Yr(n,e.sliceString(n,r));return Ya.set(e,o),o}if(i.from==n&&i.to==r)return i;let{text:s,from:l}=i;return l>n&&(s=e.sliceString(n,l)+s,l=n),i.to<r&&(s+=e.sliceString(i.to,r)),Ya.set(e,new Yr(l,s)),new Yr(n,s.slice(n-l,r-l))}}class kv{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=vv,this.matchPos=Ao(e,i),this.re=new RegExp(n,tf+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Yr.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Ao(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Yr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(wv.prototype[Symbol.iterator]=kv.prototype[Symbol.iterator]=function(){return this});function $2(t){try{return new RegExp(t,tf),!0}catch{return!1}}function Ao(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Rh(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Me("input",{class:"cm-textfield",name:"line",value:e}),r=Me("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Xi.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Me("label",t.state.phrase("Go to line"),": ",n)," ",Me("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Me("button",{name:"close",onclick:()=>{t.dispatch({effects:Xi.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:l}=t,o=l.doc.lineAt(l.selection.main.head),[,a,u,h,c]=s,f=h?+h.slice(1):0,d=u?+u:o.number;if(u&&c){let k=d/100;a&&(k=k*(a=="-"?-1:1)+o.number/l.doc.lines),d=Math.round(l.doc.lines*k)}else u&&a&&(d=d*(a=="-"?-1:1)+o.number);let m=l.doc.line(Math.max(1,Math.min(l.doc.lines,d))),v=b.cursor(m.from+Math.max(0,Math.min(f,m.length)));t.dispatch({effects:[Xi.of(!1),B.scrollIntoView(v.from,{y:"center"})],selection:v}),t.focus()}return{dom:r}}const Xi=re.define(),zp=zt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Xi)&&(t=n.value);return t},provide:t=>wo.from(t,e=>e?Rh:null)}),K2=t=>{let e=vo(t,Rh);if(!e){let n=[Xi.of(!0)];t.state.field(zp,!1)==null&&n.push(re.appendConfig.of([zp,q2])),t.dispatch({effects:n}),e=vo(t,Rh)}return e&&e.dom.querySelector("input").select(),!0},q2=B.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),G2=({state:t,dispatch:e})=>{let{selection:n}=t,r=b.create(n.ranges.map(i=>t.wordAt(i.head)||b.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Q2(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let l=!1,o=new Es(t.doc,e,r[r.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new Es(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),l=!0}else{if(l&&r.some(a=>a.from==o.value.from))continue;if(s){let a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const Y2=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return G2({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=Q2(t,r);return i?(e(t.update({selection:t.selection.addRange(b.range(i.from,i.to),!1),effects:B.scrollIntoView(i.to)})),!0):!1},gi=I.define({combine(t){return qo(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new aA(e),scrollToMatch:e=>B.scrollIntoView(e)})}});class xv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||$2(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new eA(this):new X2(this)}getCursor(e,n=0,r){let i=e.doc?e:Y.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Er(this,i,n,r):Ar(this,i,n,r)}}class Sv{constructor(e){this.spec=e}}function Ar(t,e,n,r){return new Es(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?J2(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function J2(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Eo(i,n-s))!=Pe.Word||e(bo(i,n-s))!=Pe.Word)&&(e(bo(i,r-s))!=Pe.Word||e(Eo(i,r-s))!=Pe.Word))}class X2 extends Sv{constructor(e){super(e)}nextMatch(e,n,r){let i=Ar(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Ar(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),l=Ar(this.spec,e,s,i),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Ar(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Ar(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Er(t,e,n,r){return new wv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Z2(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Eo(t,e){return t.slice(De(t,e,!1),e)}function bo(t,e){return t.slice(e,De(t,e))}function Z2(t){return(e,n,r)=>!r[0].length||(t(Eo(r.input,r.index))!=Pe.Word||t(bo(r.input,r.index))!=Pe.Word)&&(t(bo(r.input,r.index+r[0].length))!=Pe.Word||t(Eo(r.input,r.index+r[0].length))!=Pe.Word)}class eA extends Sv{nextMatch(e,n,r){let i=Er(this.spec,e,r,e.doc.length).next();return i.done&&(i=Er(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),l=Er(this.spec,e,s,r),o=null;for(;!l.next().done;)o=l.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Er(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Er(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const bs=re.define(),nf=re.define(),zn=zt.define({create(t){return new Ja(Bh(t).create(),null)},update(t,e){for(let n of e.effects)n.is(bs)?t=new Ja(n.value.create(),t.panel):n.is(nf)&&(t=new Ja(t.query,n.value?rf:null));return t},provide:t=>wo.from(t,e=>e.panel)});class Ja{constructor(e,n){this.query=e,this.panel=n}}const tA=W.mark({class:"cm-searchMatch"}),nA=W.mark({class:"cm-searchMatch cm-searchMatch-selected"}),rA=ct.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(zn))}update(t){let e=t.state.field(zn);(e!=t.startState.field(zn)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return W.none;let{view:n}=this,r=new mr;for(let i=0,s=n.visibleRanges,l=s.length;i<l;i++){let{from:o,to:a}=s[i];for(;i<l-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,o,a,(u,h)=>{let c=n.state.selection.ranges.some(f=>f.from==u&&f.to==h);r.add(u,h,c?nA:tA)})}return r.finish()}},{decorations:t=>t.decorations});function Fs(t){return e=>{let n=e.state.field(zn,!1);return n&&n.query.spec.valid?t(e,n):Ev(e)}}const Mo=Fs((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=b.single(r.from,r.to),s=t.state.facet(gi);return t.dispatch({selection:i,effects:[sf(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),Av(t),!0}),To=Fs((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=b.single(i.from,i.to),l=t.state.facet(gi);return t.dispatch({selection:s,effects:[sf(t,i),l.scrollToMatch(s.main,t)],userEvent:"select.search"}),Av(t),!0}),iA=Fs((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:b.create(n.map(r=>b.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),sA=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],l=0;for(let o=new Es(t.doc,t.sliceDoc(r,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==r&&(l=s.length),s.push(b.range(o.value.from,o.value.to))}return e(t.update({selection:b.create(s,l),userEvent:"select.search.matches"})),!0},_p=Fs((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let l=s,o=[],a,u,h=[];l.from==r&&l.to==i&&(u=n.toText(e.getReplacement(l)),o.push({from:l.from,to:l.to,insert:u}),l=e.nextMatch(n,l.from,l.to),h.push(B.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let c=t.state.changes(o);return l&&(a=b.single(l.from,l.to).map(c),h.push(sf(t,l)),h.push(n.facet(gi).scrollToMatch(a.main,t))),t.dispatch({changes:c,selection:a,effects:h,userEvent:"input.replace"}),!0}),lA=Fs((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:l}=i;return{from:s,to:l,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:B.announce.of(r),userEvent:"input.replace.all"}),!0});function rf(t){return t.state.facet(gi).createPanel(t)}function Bh(t,e){var n,r,i,s,l;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let u=t.facet(gi);return new xv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(l=e==null?void 0:e.wholeWord)!==null&&l!==void 0?l:u.wholeWord})}function Cv(t){let e=vo(t,rf);return e&&e.dom.querySelector("[main-field]")}function Av(t){let e=Cv(t);e&&e==t.root.activeElement&&e.select()}const Ev=t=>{let e=t.state.field(zn,!1);if(e&&e.panel){let n=Cv(t);if(n&&n!=t.root.activeElement){let r=Bh(t.state,e.query.spec);r.valid&&t.dispatch({effects:bs.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[nf.of(!0),e?bs.of(Bh(t.state,e.query.spec)):re.appendConfig.of(hA)]});return!0},bv=t=>{let e=t.state.field(zn,!1);if(!e||!e.panel)return!1;let n=vo(t,rf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:nf.of(!1)}),!0},oA=[{key:"Mod-f",run:Ev,scope:"editor search-panel"},{key:"F3",run:Mo,shift:To,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Mo,shift:To,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:bv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:sA},{key:"Mod-Alt-g",run:K2},{key:"Mod-d",run:Y2,preventDefault:!0}];class aA{constructor(e){this.view=e;let n=this.query=e.state.field(zn).query.spec;this.commit=this.commit.bind(this),this.searchField=Me("input",{value:n.search,placeholder:it(e,"Find"),"aria-label":it(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Me("input",{value:n.replace,placeholder:it(e,"Replace"),"aria-label":it(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Me("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Me("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Me("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,l){return Me("button",{class:"cm-button",name:i,onclick:s,type:"button"},l)}this.dom=Me("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Mo(e),[it(e,"next")]),r("prev",()=>To(e),[it(e,"previous")]),r("select",()=>iA(e),[it(e,"all")]),Me("label",null,[this.caseField,it(e,"match case")]),Me("label",null,[this.reField,it(e,"regexp")]),Me("label",null,[this.wordField,it(e,"by word")]),...e.state.readOnly?[]:[Me("br"),this.replaceField,r("replace",()=>_p(e),[it(e,"replace")]),r("replaceAll",()=>lA(e),[it(e,"replace all")])],Me("button",{name:"close",onclick:()=>bv(e),"aria-label":it(e,"close"),type:"button"},[""])])}commit(){let e=new xv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:bs.of(e)}))}keydown(e){oS(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?To:Mo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),_p(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(bs)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(gi).top}}function it(t,e){return t.state.phrase(e)}const wl=30,kl=/[\s\.,:;?!]/;function sf(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-wl),l=Math.min(i,n+wl),o=t.state.sliceDoc(s,l);if(s!=r.from){for(let a=0;a<wl;a++)if(!kl.test(o[a+1])&&kl.test(o[a])){o=o.slice(a);break}}if(l!=i){for(let a=o.length-1;a>o.length-wl;a--)if(!kl.test(o[a-1])&&kl.test(o[a])){o=o.slice(0,a);break}}return B.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${r.number}.`)}const uA=B.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),hA=[zn,$o.low(rA),uA],Ot={PAGE_BREAK:/^\={3,}$/,CHARACTER:/^([A-Z][A-Z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,CHARACTER_POWER_USER:/^(?:@)([A-Za-z0-9\.\'\-\s]+)(?:\s*(\([A-Za-z0-9\.\'\-\s]+\))?\s*(\^)?\s*)$/,SCENE:/^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e)[. ]).+)|^(?:\.(?!\.+))(.+)/i,TRANSITION:/^((?:FADE (?:IN|TO BLACK|OUT)|CUT TO BLACK)[\:\.]?|.+ TO\:)/i,TRANSITION_POWER_USER:/^(?:> )(.+)/i,TITLE:/^((?:title|credit|author[s]?|source|notes|draft date|date|contact|copyright)\:)/gim,SECTION:/^(#{1,4})\ (.*)/,MILESTONE:/^(?:\ +)?-\ (.+)/,IMAGE:/^(\[i\]https:\/\/(.+))/i,AUDIO:/^(\[a\]https:\/\/(.+))/i},cA=Qc.define({name:"fountain",startState(){return{last_line_blank:!1,character_extended:!1,section:!1,section_level:!1,note:!1}},token(t,e){let n=!1,r=!1;if(e.note)return n=t.skipTo("]]"),n?(t.match("]]"),e.note=!1,"comment"):(t.skipToEnd(),"comment");if(t.match(/^FADE IN:/)||t.match(/^FADE OUT\./)||t.match(Ot.TRANSITION)||t.match(Ot.TRANSITION_POWER_USER))return t.skipToEnd(),"keyword";if(t.match(Ot.SCENE))return e.section=!0,t.skipToEnd(),"header";if((n=t.match(Ot.CHARACTER))||(n=t.match(Ot.CHARACTER_POWER_USER)))return e.character_extended=!1,t.eatSpace(),r=t.peek(),r=="^"?(t.next(),e.character_extended=!0,"variable"):r=="("?(e.character_extended=!0,"variable"):r&&r!=="("&&r!=="^"?(t.skipToEnd(),null):(e.character_extended=!0,t.skipToEnd(),"variable");if(e.character_extended)return t.eatSpace(),r=t.peek(),r=="("?(n=t.skipTo(")"),n?(t.next(),t.eatSpace(),"meta"):(t.skipToEnd(),null)):(t.skipToEnd(),"string");if(e.section)return t.match(Ot.IMAGE)||t.match(Ot.AUDIO)?"link":t.match(Ot.MILESTONE)?(t.skipToEnd(),"atom"):t.match(/^[0-9]?[0-9]:[0-9][0-9]/)&&e.section_level==4?(t.skipToEnd(),"number"):(t.match(/^,/)&&e.section_level==4||(e.section=!1,e.section_level=!1),null);if(t.match(Ot.TITLE))return t.skipTo(":"),t.next(),"def";if(n=t.match(Ot.SECTION))return e.section=!0,e.section_level=n[1].length,t.skipToEnd(),"atom";if(t.match(/^~ /))return t.skipToEnd(),"emphasis";if(t.match(/^= /))return t.skipToEnd(),"string";if(t.match(Ot.PAGE_BREAK))return t.skipToEnd(),"operator";if(t.match(/\[\[/)){for(;!t.eol();){if(t.match(/\]\]/))return"comment";t.next()}return e.note=!0,"comment"}return t.skipToEnd(),null},blankLine(t){t.character_extended=!1}}),fA=ct.fromClass(class{constructor(t){this.view=t,this.decorations=this.buildDecorations(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=this.buildDecorations(t.view))}buildDecorations(t){const e=[],{from:n,to:r}=t.viewport,i=t.state.doc;let s=i.lineAt(n);for(;s.from<=r;){const l=s.text.trim();if(l){const o=l.replace(/^>\s*/,""),a=o.toUpperCase();/^(?:FADE\s+(?:IN|OUT)|CUT TO BLACK)[:\.]?$/.test(a)||/.+\sTO:?$/.test(a)?(e.push(W.line({class:"cm-keyword"}).range(s.from)),e.push(W.mark({class:"cm-keyword"}).range(s.from,s.to))):/^(?:INT|EXT|I\/E)\.|^\./i.test(o)?(e.push(W.line({class:"cm-header"}).range(s.from)),e.push(W.mark({class:"cm-header"}).range(s.from,s.to))):/^#{1,4}\s/.test(o)?(e.push(W.line({class:"cm-atom"}).range(s.from)),e.push(W.mark({class:"cm-atom"}).range(s.from,s.to))):/^=\s/.test(o)?(e.push(W.line({class:"cm-synopsis"}).range(s.from)),e.push(W.mark({class:"cm-synopsis"}).range(s.from,s.to))):/^\d{1,2}:\d{2}$/.test(o)?(e.push(W.line({class:"cm-number"}).range(s.from)),e.push(W.mark({class:"cm-number"}).range(s.from,s.to))):(/^[A-Z][A-Z0-9 '\-\.]*(?:\^)?$/.test(o)&&o===o.toUpperCase()||/^@.+$/.test(o))&&(e.push(W.line({class:"cm-variable"}).range(s.from)),e.push(W.mark({class:"cm-variable"}).range(s.from,s.to)))}if(s.to>=i.length)break;s=i.lineAt(s.to+1)}return W.set(e)}},{decorations:t=>t.decorations}),Mv=$.forwardRef(({value:t="",onChange:e=()=>{},onCursorChange:n=()=>{},placeholder:r="Type your fountain screenplay here..."},i)=>{const s=$.useRef(null),l=$.useRef(null);return $.useImperativeHandle(i,()=>({scrollToLine:o=>{const a=l.current;if(a){const u=a.state.doc.line(Math.max(1,Math.min(o+1,a.state.doc.lines)));a.dispatch({selection:{anchor:u.from,head:u.from},effects:B.scrollIntoView(u.from,{y:"center"})})}},focus:()=>{const o=l.current;o&&o.focus()}}),[]),$.useEffect(()=>{if(!s.current)return;const o=[SS(),hS(),uC(),xC(),ZS(),B.lineWrapping,cA,fA,B.domEventHandlers({mouseup:(h,c)=>{setTimeout(()=>{const f=c.state.selection.main.head,d=c.state.doc.lineAt(f);n(d.number-1)},10)}}),WC,vy.of([...U2,...oA]),B.updateListener.of(h=>{if(h.docChanged&&e(h.state.doc.toString()),h.selectionSet&&!h.docChanged){const c=h.state.selection.main.head,f=h.state.doc.lineAt(c);n(f.number-1)}}),B.theme({"&":{fontSize:"14px",minHeight:"400px",maxHeight:"80vh"},".cm-content":{padding:"12px",minHeight:"400px"},".cm-scroller":{fontFamily:"'Fira Code', 'Courier New', monospace",height:"auto !important"},".cm-editor":{height:"auto !important"}})],a=Y.create({doc:t,extensions:o}),u=new B({state:a,parent:s.current});return l.current=u,()=>{l.current&&(l.current.destroy(),l.current=null)}},[]),$.useEffect(()=>{const o=l.current;if(!o)return;const a=o.state.doc.toString();t!==a&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:t}})},[t]),w.jsx("div",{ref:s,className:"codemirror-wrapper","data-placeholder":r})});Mv.displayName="CodeMirrorEditor";function dA(t=""){const[e,n]=$.useState([]),[r,i]=$.useState([]),[s,l]=$.useState(new Map),o=$.useRef(null),[a,u]=$.useState(!0);return $.useEffect(()=>{if(!a){if(t){const c=ra(t);n(c.blocks),i(c.characters),l(c.characterLineCounts)}return}(function(){try{const c=new Worker(new URL("/assets/previewWorker-D6jE4gsy.js",import.meta.url),{type:"module"});return c.onerror=f=>{console.error("Preview module worker error; falling back to main-thread parsing:",f),u(!1)},c.onmessage=f=>{const{type:d,blocks:m,characters:v,characterLineCounts:k}=f.data;d==="result"?(n(m||[]),i(v||[]),l(k||new Map)):d==="error"&&console.error("Preview worker reported error:",f.data.message)},o.current=c,t&&c.postMessage({type:"process",text:t}),()=>{try{c.terminate()}catch{}}}catch(c){console.error("Failed to create module worker, falling back to main-thread parsing:",c),u(!1)}})()},[a]),$.useEffect(()=>{if(!a&&t){const c=ra(t);n(c.blocks),i(c.characters),l(c.characterLineCounts)}},[a,t]),{blocks:e,characters:r,characterLineCounts:s,processText:c=>{if(a&&o.current)o.current.postMessage({type:"process",text:c});else{const f=ra(c);n(f.blocks),i(f.characters),l(f.characterLineCounts)}}}}const Xa=`title: The Great Fountain Script\r
credit: Written by\r
author: John Dope\r
authors: John Dope and Jane Smith\r
source: Based on the novel by Famous Writer\r
draft date: October 4, 2025\r
date: 10/04/2025\r
contact:\r
    John Dope\r
    555-123-4567\r
    john@example.com\r
    \r
    Literary Agent\r
    Agency Name\r
    agent@agency.com\r
notes: This is a sample script\r
copyright: (c) 2025 John Dope\r
\r
===\r
\r
FADE IN:\r
\r
EXT. COFFEE SHOP - DAY\r
\r
Morning traffic hums. The patio is crowded with laptop people and latte foam art influencers.\r
\r
JANE sits at a small table, typing on her laptop. A half-empty cappuccino stares back, cooling with existential dread.\r
\r
JANE\r
(looking up from screen)\r
I think I've got it!\r
\r
She closes the laptop with satisfaction and breathes, as if exhaling an entire week.\r
\r
= Jane finishes draft zero; new goal: share it\r
\r
A BARISTA rattles cups inside. A passing BUSKER strums the same three chords, but with heart.\r
\r
JANE\r
(to herself)\r
No more caveats. Time to ship.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
Inside is a mild chaos symphony: grinder, milk steamer, printer whining from the back.\r
\r
BOB O'SHAUNNESSY, 30s, tech casual, leans on the counter pretending the pastry case is interesting.\r
\r
BOB O'SHAUNNESSY\r
Heydid the ending finally behave?\r
\r
JANE\r
I wrangled it into submission.\r
\r
(beat)\r
\r
JANE\r
Not pretty, but readable.\r
\r
BOB O'SHAUNNESSY\r
Readability's ninety percent of pretty.\r
\r
FADE OUT.\r
\r
===\r
\r
# Act\r
The Act of Consequences\r
\r
## Scene\r
A New Scene With Complications\r
\r
### Sequence\r
The Sequence Where Plans Shift\r
\r
#### panel\r
a panel\r
[i]https://picsum.photos/720/405?random=3\r
\r
#### Panel: Close-up of Jane\r
00:15\r
[i]https://picsum.photos/640/360?random=1\r
[a]https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\r
\r
- Bell rings when idea lands\r
- Jane reframes the problem\r
- Bob commits to help\r
\r
= Sequence beat: they decide to demo tonight\r
\r
#### panel 2\r
another panel with too much coffee and not enough sleep\r
[i]https://picsum.photos/960/540?random=4\r
\r
DAVE\r
(begins singing:)\r
~ we debug by moonlight, refactor at dawn\r
\r
[[ i am a note ]]\r
\r
[[ \r
i am \r
also a note \r
!!!\r
]]\r
\r
INT. JANE'S APARTMENT - EVENING\r
\r
A whiteboard groans under diagrams. Sticky notes form a fractal of optimism.\r
\r
JANE\r
We'll keep the parser incremental. No full rescans.\r
\r
BOB O'SHAUNNESSY\r
(gesturing at the board)\r
And the preview goes worker-side. Deltas, not dumps.\r
\r
JANE\r
Exactly.\r
\r
@Mentor\r
(from speakerphone)\r
Ship something imperfect. Perfect is a direction, not a state.\r
\r
> MATCH CUT TO:\r
\r
.MONTAGE  CODING AND COFFEE\r
\r
 Keys clack.  \r
 Tests blink green, then red, then righteous green again.  \r
 A PROGRESS BAR hesitates, then slides home.\r
\r
===\r
\r
INT. HALLWAY OUTSIDE JANE'S DOOR - NIGHT\r
\r
DAVE^\r
(whisper-shouting)\r
I brought snacks and feature creep!\r
\r
JANE^\r
(whisper-shouting back)\r
Only if the snacks pass code review!\r
\r
DONNY^\r
(off)\r
bees!\r
\r
JANE\r
(confused)\r
Why bees?\r
\r
DONNY\r
I thought we were yelling nouns.\r
\r
Laughter. The tension snaps.\r
\r
= Comic relief; team cohesion increases\r
\r
>INTERMISSION<\r
\r
EXT. ROOFTOP - NIGHT\r
\r
City lights blink like patient cursors. The air tastes like rain and new commits.\r
\r
JANE\r
We need a title page that actually looks like a title page.\r
\r
BOB O'SHAUNNESSY\r
And margins that would make old-school script readers nod with dignified approval.\r
\r
JANE\r
(considering)\r
Courier Prime, 12pt. One-inch all around, inch-and-a-half left where it matters.\r
\r
BOB O'SHAUNNESSY\r
Heads turn when pagination doesn't.\r
\r
CUT TO:\r
\r
INT. COFFEE SHOP - LATER\r
\r
The launch screen glows on a modest laptop. JANE hovers the cursor over a big, friendly button.\r
\r
JANE\r
(to everyone)\r
Moment of truth.\r
\r
BOB O'SHAUNNESSY\r
Ship it.\r
\r
JANE clicks.\r
\r
The app compiles, deploys, and returns with a humble little toast: "It worked."\r
\r
= Milestone: first user-visible success\r
\r
JANE\r
(relieved)\r
Okay. Bugs tomorrow.\r
\r
BOB O'SHAUNNESSY\r
Bugs are just misunderstood features.\r
\r
DAVE\r
(sincerely)\r
We're proud of you.\r
\r
===\r
\r
# Act\r
The Act of Consequences (Reprise)\r
\r
## Scene\r
Feedback and Fallout\r
\r
### Sequence\r
Users Arrive\r
\r
EXT. COFFEE SHOP - MORNING\r
\r
Regulars scroll through their phones. Someone discovers the app, squints, then grins.\r
\r
USER #1\r
(softly, to self)\r
This feels fast.\r
\r
USER #2\r
overhears, nodding with quiet internet approval\r
\r
INT. COFFEE SHOP - CONTINUOUS\r
\r
A NOTIFICATION pingsjust shy of obnoxious. JANE reads.\r
\r
JANE\r
(reading)\r
"Love the live preview. Could you add inline notes to the PDF?"\r
\r
BOB O'SHAUNNESSY\r
We tabled PDF. For now.\r
\r
JANE\r
(typing a reply)\r
Roadmap: yes. Priority: after stability.\r
\r
BOB O'SHAUNNESSY\r
(aside)\r
We're maintaining a boundary. That's growth.\r
\r
= They choose focus; future them says thanks\r
\r
[[ Note for later:\r
Revisit pagination widows/orphans; test five-page dialogues.\r
Consider keep-with-next for scene headers.\r
]]\r
\r
INT. WHITEBOARD NOOK - LATER\r
\r
@QA\r
(cheerful)\r
Found a weird edge case: dot-slug headings inside notes become haunted.\r
\r
JANE\r
(jots it down)\r
Haunted slugs go to the backlog.\r
\r
CUT TO BLACK.\r
\r
FADE IN:\r
\r
EXT. PARK - AFTERNOON\r
\r
Wind through leaves. The world continues, blissfully unaware of issue trackers.\r
\r
JANE\r
I forgot what sunlight felt like.\r
\r
BOB O'SHAUNNESSY\r
Sunlight: a free, high-availability mood service.\r
\r
JANE\r
(smiles)\r
Let's ship a tiny thing every day.\r
\r
BOB O'SHAUNNESSY\r
Agile via nice weather.\r
\r
FADE OUT.\r
\r
===\r
\r
# Appendix\r
Assorted Scratch and Sections\r
\r
## Themes\r
Growth through deliberate constraint.\r
\r
### Open Questions\r
What is "done" when words keep moving?\r
\r
#### Panel: Demo Checklist\r
00:45\r
[i]https://picsum.photos/800/450?random=2\r
[a]https://example.com/audio/subtle-whoosh.mp3\r
- Intro under 90 seconds\r
- Show typing  preview\r
- Kill the spinner ASAP\r
= Demo flow: cold open  payoff\r
\r
> SMASH TO:\r
\r
INT. COFFEE SHOP - NIGHT\r
\r
The team watches metrics. A few people in distant rooms clap without being asked.\r
\r
JANE\r
We can sleep now.\r
\r
BOB O'SHAUNNESSY\r
Tomorrow we build the PDF thing. Maybe.\r
\r
DAVE\r
Or never. Kidding. Kind of.\r
\r
FADE TO BLACK.\r
\r
===\r
\r
CUT TO BLACK.\r
\r
>The end<`;function pA(){const[t,e]=$.useState(!1),[n,r]=$.useState(""),[i,s]=$.useState(!1),[l,o]=$.useState(!1),[a,u]=$.useState("edit"),[h,c]=$.useState(0),[f,d]=$.useState(!1),[m,v]=$.useState(null),k=$.useRef(null),p=$.useRef(null),g=$.useRef([]),y=$.useRef(null),[x,S]=$.useState(!1);$.useEffect(()=>{const E=localStorage.getItem("fountain-script");let j=Xa;if(E)try{const V=JSON.parse(E);j=V.content,d(!0),v(new Date(V.savedAt))}catch(V){console.error("Error parsing saved script:",V),localStorage.removeItem("fountain-script")}r(j),F(j)},[]),$.useEffect(()=>{try{if(localStorage.getItem("desktopSuggestionDismissed")==="1")return;const j=navigator.userAgent||"",V=/Mobi|Android|iPhone|iPad|iPod|BB10|IEMobile|Opera Mini/i.test(j),ie=window.matchMedia&&window.matchMedia("(pointer:coarse)").matches,me=(window.innerWidth||screen.width||0)<1024;(V||ie&&me)&&e(!0)}catch{}},[]);const{blocks:A,characters:C,characterLineCounts:O,processText:F}=dA("");$.useEffect(()=>{g.current=A},[A]);const R=E=>{r(E),F(E)},H=()=>{if(n.trim()){const E={content:n,savedAt:new Date().toISOString()};localStorage.setItem("fountain-script",JSON.stringify(E)),d(!0),v(new Date)}},z=()=>{const E=localStorage.getItem("fountain-script");if(E)try{const j=JSON.parse(E);r(j.content),F(j.content),v(new Date(j.savedAt))}catch(j){console.error("Error loading saved script:",j)}},Q=()=>{localStorage.removeItem("fountain-script"),d(!1),v(null),r(Xa),F(Xa)},Z=async()=>{try{await navigator.clipboard.writeText(n)}catch{const j=document.createElement("textarea");j.value=n,document.body.appendChild(j),j.select(),document.execCommand("copy"),document.body.removeChild(j)}},pe=async()=>{try{const E=await navigator.clipboard.readText();r(E),F(E)}catch(E){console.error("Error pasting from clipboard:",E)}},Qe=()=>{r(""),F("");try{p.current&&p.current.focus&&p.current.focus()}catch{}},Mt=$.useCallback(E=>{const j=g.current;if(c(E),k.current&&j.length>0){let V=null;for(let ie=j.length-1;ie>=0;ie--)if(j[ie].index<=E){V=j[ie];break}if(V){const ie=k.current.querySelector(`[data-line-id="${V.id}"]`);if(ie){const me=k.current,rt=me.getBoundingClientRect(),Ve=ie.getBoundingClientRect(),nn=Ve.top-rt.top,Tv=rt.height,Ov=Ve.height,Nv=me.scrollTop+nn-Tv/2+Ov/2;me.scrollTo({top:Nv,behavior:"smooth"})}}}},[]),D=$.useCallback(E=>{p.current&&p.current.scrollToLine&&p.current.scrollToLine(E)},[]);$.useEffect(()=>{const E=j=>{j.key==="Escape"&&(i?s(!1):l&&o(!1))};if(i||l)return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[i,l]),$.useEffect(()=>{const E=()=>{S(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",E),()=>document.removeEventListener("fullscreenchange",E)},[]);const _=async()=>{try{document.fullscreenElement?document.exitFullscreen&&(await document.exitFullscreen(),S(!1)):y.current&&y.current.requestFullscreen?(await y.current.requestFullscreen(),S(!0)):document.documentElement.requestFullscreen&&(await document.documentElement.requestFullscreen(),S(!0))}catch(E){console.error("Fullscreen toggle failed",E)}};return w.jsxs("div",{className:"fountain-app",ref:y,children:[t&&w.jsx("div",{className:"modal-overlay",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:w.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),children:[w.jsxs("div",{className:"modal-header",children:[w.jsx("h2",{children:"Tip: enable Desktop site for a better layout"}),w.jsx("button",{className:"modal-close",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:""})]}),w.jsxs("div",{className:"modal-body",children:[w.jsx("p",{children:`For the best editing experience on phones, enable your browser's "Desktop site" option from the browser menu. This prevents the toolbar from wrapping and provides the full desktop layout.`}),w.jsxs("p",{style:{marginTop:"1rem"},children:[w.jsx("strong",{children:"How to:"}),' open your browser menu () and choose "Desktop site" or "Request desktop site".']})]}),w.jsx("div",{className:"modal-header",style:{borderTop:"1px solid #404040",justifyContent:"flex-end"},children:w.jsx("button",{className:"toolbar-btn",onClick:()=>{localStorage.setItem("desktopSuggestionDismissed","1"),e(!1)},children:"Got it"})})]})}),w.jsxs("div",{className:"persistence-toolbar",children:[w.jsxs("div",{className:"toolbar-group",children:[w.jsxs("button",{className:`toolbar-btn ${n.trim()?"":"disabled"}`,onClick:H,disabled:!n.trim(),title:"Save current script to browser storage",children:[w.jsx("i",{className:"fas fa-save"}),"Save"]}),w.jsxs("button",{className:`toolbar-btn ${f?"":"disabled"}`,onClick:z,disabled:!f,title:m?`Load saved script (${m.toLocaleDateString()} ${m.toLocaleTimeString()})`:"Load saved script",children:[w.jsx("i",{className:"fas fa-folder-open"}),"Load"]}),w.jsxs("button",{className:"toolbar-btn",onClick:Z,title:"Copy editor contents to clipboard",children:[w.jsx("i",{className:"fas fa-copy"}),"Copy"]}),w.jsxs("button",{className:"toolbar-btn",onClick:pe,title:"Paste from clipboard to editor",children:[w.jsx("i",{className:"fas fa-paste"}),"Paste"]}),w.jsxs("button",{className:`toolbar-btn danger ${n.trim()?"":"disabled"}`,onClick:Qe,disabled:!n.trim(),title:"Clear editor contents",children:[w.jsx("i",{className:"fas fa-trash"}),"Clear Editor"]}),w.jsxs("button",{className:`toolbar-btn danger ${f?"":"disabled"}`,onClick:Q,disabled:!f,title:"Clear saved script from storage",children:[w.jsx("i",{className:"fas fa-trash"}),"Clear Saved"]}),w.jsx("div",{className:"toolbar-divider"}),w.jsxs("button",{className:"toolbar-btn help-btn",onClick:()=>s(!0),title:"Writing help (Fountain syntax & tips)","aria-label":"Open writing help",children:[w.jsx("i",{className:"fas fa-pen","aria-hidden":"true"}),"Help"]}),w.jsxs("button",{className:`toolbar-btn character-btn ${C.length===0?"disabled":""}`,onClick:()=>C.length>0&&o(!0),title:C.length>0?"Character List":"No characters found",disabled:C.length===0,children:[w.jsx("i",{className:"fas fa-user"}),"Characters",C.length>0&&w.jsx("span",{className:"character-count-badge",children:C.length})]})]}),m&&w.jsxs("div",{className:"last-saved",children:["Last saved: ",m.toLocaleDateString()," at ",m.toLocaleTimeString()]})]}),w.jsx("div",{className:"mobile-view-toggle",children:w.jsx("div",{className:"tabs is-centered",children:w.jsxs("ul",{children:[w.jsx("li",{className:a==="edit"?"is-active":"",children:w.jsxs("a",{onClick:()=>u("edit"),children:[w.jsx("span",{className:"icon is-small",children:w.jsx("i",{className:"fas fa-edit","aria-hidden":"true"})}),w.jsx("span",{children:"Edit"})]})}),w.jsx("li",{className:a==="preview"?"is-active":"",children:w.jsxs("a",{onClick:()=>u("preview"),children:[w.jsx("span",{className:"icon is-small",children:w.jsx("i",{className:"fas fa-eye","aria-hidden":"true"})}),w.jsx("span",{children:"Preview"})]})})]})})}),w.jsxs("div",{className:"editor-layout",children:[w.jsx("button",{className:`toolbar-btn fullscreen-btn ${x?"is-active":""}`,onClick:_,title:x?"Exit fullscreen":"Enter fullscreen","aria-label":x?"Exit fullscreen":"Enter fullscreen",children:w.jsx("i",{className:`fas ${x?"fa-compress":"fa-expand"}`,"aria-hidden":"true"})}),w.jsxs("div",{className:"columns is-gapless",children:[w.jsx("div",{className:`column is-half-desktop ${a==="preview"?"mobile-hidden":""}`,children:w.jsxs("div",{className:"box editor-box",children:[w.jsx("h3",{className:"title is-6",children:"Editor"}),w.jsx(Mv,{ref:p,value:n,onChange:R,onCursorChange:Mt,placeholder:"Type your fountain screenplay here..."})]})}),w.jsx("div",{className:`column is-half-desktop ${a==="edit"?"mobile-hidden":""}`,children:w.jsxs("div",{className:"box preview-box",children:[w.jsx("h3",{className:"title is-6",children:"Live Preview"}),w.jsx("div",{className:"preview-content",ref:k,children:A.length===0?w.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Loading preview..."}):A.map(E=>w.jsx("div",{className:`preview-line ${E.className||""} ${E.index===h?"current-line":""}`,"data-type":E.type,"data-line-id":E.id,"data-line-index":E.index,onClick:()=>D(E.index),style:{cursor:"pointer"},children:E.type==="image"||E.type==="audio"||E.type==="title_page"||E.type==="page_break"||E.type==="page_number"?w.jsx("div",{dangerouslySetInnerHTML:{__html:E.text}}):E.text||""},E.id))})]})})]})]}),i&&w.jsx("div",{className:"modal-overlay",onClick:()=>s(!1),children:w.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),children:[w.jsxs("div",{className:"modal-header",children:[w.jsx("h2",{children:"Fountain.ext Format Reference"}),w.jsx("button",{className:"modal-close",onClick:()=>s(!1),children:""})]}),w.jsxs("div",{className:"modal-body",children:[w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Title Page"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["Title: THE GREAT FOUNTAIN SCRIPT",w.jsx("br",{}),"Credit: Written by",w.jsx("br",{}),"Author: John Dope",w.jsx("br",{}),"Authors: John Dope and Jane Smith",w.jsx("br",{}),"Source: Based on the novel by Famous Writer",w.jsx("br",{}),"Draft Date: October 4, 2025",w.jsx("br",{}),"Date: 10/04/2025",w.jsx("br",{}),"Contact:",w.jsx("br",{}),"John Dope",w.jsx("br",{}),"555-123-4567",w.jsx("br",{}),"john@example.com",w.jsx("br",{}),"",w.jsx("br",{}),"Literary Agent",w.jsx("br",{}),"Agency Name",w.jsx("br",{}),"agent@agency.com",w.jsx("br",{}),"Notes: This is a sample script",w.jsx("br",{}),"Copyright: (c) 2025 John Dope"]}),w.jsx("p",{children:'Title page elements appear at the top of your script. All are optional. Use "Author" for single writer, "Authors" for multiple. Contact can be multi-line with indentation. End title page with === (page break).'})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Scene Headings"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["EXT. PARKING LOT - DAY",w.jsx("br",{}),"INT. COFFEE SHOP - NIGHT",w.jsx("br",{}),".MONTAGE - CODING AND COFFEE"]}),w.jsx("p",{children:"Scene headings start with INT./EXT./EST./I\\/E or a period (.) for special scenes."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Characters & Dialogue"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["MENTOR",w.jsx("br",{}),"Welcome to the team!",w.jsx("br",{}),w.jsx("br",{}),"@MENTOR",w.jsx("br",{}),"(power user syntax)",w.jsx("br",{}),w.jsx("br",{}),"USER #1",w.jsx("br",{}),"Thanks for having me.",w.jsx("br",{}),w.jsx("br",{}),"BOB O'SHAUNNESSY",w.jsx("br",{}),"(whispering)",w.jsx("br",{}),"This is a parenthetical."]}),w.jsx("p",{children:'Characters are ALL CAPS. Use @ for power user syntax or mixed-case names like "@John Doe". Names with @ in front will be counted as characters. Parentheticals go under character names.'})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Dual Dialogue"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["ALICE^",w.jsx("br",{}),"BOB^",w.jsx("br",{}),"CHARLIE^",w.jsx("br",{}),"I can't believe it!",w.jsx("br",{}),w.jsx("br",{}),"CHARLIE ^",w.jsx("br",{}),"DAVE ^",w.jsx("br",{}),"(disgusted)",w.jsx("br",{}),"Eew. no it's nooot!",w.jsx("br",{}),w.jsx("br",{})]}),w.jsx("p",{children:"For dual dialogue, all character names with ^ must be stacked consecutively at the top, then their dialogue follows in order. This creates side-by-side dialogue spoken simultaneously."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Action Lines"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["Bob walks into the room and looks around nervously.",w.jsx("br",{}),w.jsx("br",{}),"The computer screen flickers to life."]}),w.jsx("p",{children:"Action lines describe what happens on screen."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Transitions"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["FADE IN:",w.jsx("br",{}),"CUT TO:",w.jsx("br",{}),"FADE TO BLACK.",w.jsx("br",{}),"> CUT TO BLACK."]}),w.jsx("p",{children:"Transitions control scene changes. Use > for power user syntax."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Centered Text"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:[">INTERMISSION<",w.jsx("br",{}),">THE END<"]}),w.jsx("p",{children:"Text wrapped in > and < appears centered (great for titles or breaks)."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Act/Scene/Sequence/Panel Hierarchy"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["# Act I",w.jsx("br",{}),"## Scene 1: The Beginning",w.jsx("br",{}),"### Sequence A: Setup",w.jsx("br",{}),"#### Panel 1",w.jsx("br",{}),"02:30",w.jsx("br",{}),"[i]https://example.com/storyboard1.jpg",w.jsx("br",{}),"[a]https://example.com/dialogue.mp3",w.jsx("br",{}),w.jsx("br",{}),"#### Panel 2",w.jsx("br",{}),"01:15",w.jsx("br",{}),"[i]https://example.com/storyboard2.jpg"]}),w.jsx("p",{children:"Use # for Acts, ## for Scenes, ### for Sequences, #### for Panels. This hierarchy is designed for storyboarding workflows. Durations (mm:ss format) are only used with #### Panels. Images and audio are typically used at the #### Panel level for detailed storyboard frames and audio references."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Notes & Comments"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["[[This is a note for the writer]]",w.jsx("br",{}),w.jsx("br",{}),"Some action here [[with an inline note]] continues."]}),w.jsx("p",{children:"Notes wrapped in [[ ]] are for writer reference and don't appear in final script."})]})]}),w.jsxs("div",{className:"help-section",children:[w.jsx("h3",{children:"Special Elements"}),w.jsxs("div",{className:"help-example",children:[w.jsxs("code",{children:["= Synopsis: Brief scene description",w.jsx("br",{}),w.jsx("br",{}),"===",w.jsx("br",{}),"(Page Break)",w.jsx("br",{}),w.jsx("br",{}),"~Lyrics:",w.jsx("br",{}),'~"Happy birthday to you"',w.jsx("br",{}),'~"Happy birthday to you"']}),w.jsx("p",{children:"Use = for synopsis notes, === for page breaks, ~ for lyrics. Each lyric line must begin with ~."})]})]})]})]})}),l&&w.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:w.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),children:[w.jsxs("div",{className:"modal-header",children:[w.jsx("h2",{children:"Character List"}),w.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:""})]}),w.jsx("div",{className:"modal-body",children:C.length===0?w.jsx("p",{children:"No characters found in the script."}):w.jsx("div",{className:"character-list",children:C.map(E=>w.jsxs("div",{className:"character-item",children:[w.jsx("div",{className:"character-name",children:E}),w.jsxs("div",{className:"character-count",children:[O.get(E)||0," dialogue lines"]})]},E))})})]})})]})}Za.createRoot(document.getElementById("root")).render(w.jsx(qv.StrictMode,{children:w.jsx(pA,{})}));
